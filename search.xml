<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>AWS èµ·æ­¥</title>
    <url>/2022/01/17/aws-get-started/</url>
    <content><![CDATA[<p>ğŸŒˆ AWS åœ¨éƒ¨ç½²å®¹å™¨æ—¶æä¾›äº†å¾ˆå¤šé€‰é¡¹ã€‚ä½†æ˜¯çŸ¥é“å“ªç§æœåŠ¡èƒ½åšä»€ä¹ˆï¼Œå³ä½¿æ˜¯ç»éªŒä¸°å¯Œçš„ä¸“ä¸šäººå£«ä¹Ÿä¼šæ„Ÿåˆ°å¤´ç—›ã€‚</p>
<span id="more"></span>
<h2 id="äº†è§£æ¯ä¸ªæœåŠ¡çš„è§’è‰²"><a href="#äº†è§£æ¯ä¸ªæœåŠ¡çš„è§’è‰²" class="headerlink" title="äº†è§£æ¯ä¸ªæœåŠ¡çš„è§’è‰²"></a>äº†è§£æ¯ä¸ªæœåŠ¡çš„è§’è‰²</h2><p>æœ¬è´¨ä¸Šï¼Œæ¯ä¸ªæœåŠ¡éƒ½æ˜¯ç¼–æ’å±‚ï¼ˆç®¡ç†å®¹å™¨ï¼‰æˆ–å®¿ä¸»å±‚ï¼ˆè¿è¡Œå®¹å™¨ï¼‰çš„ä¸€éƒ¨åˆ†ï¼š</p>
<ul>
<li>ECSã€EK å’Œ Kuberneretes æ˜¯ç¼–æ’å±‚çš„ä¸€éƒ¨åˆ†ï¼›</li>
<li>EC2 å’Œ Fargate æ˜¯å®¿ä¸»å±‚çš„ä¸€éƒ¨åˆ†ï¼›</li>
</ul>
<h2 id="EKS-vs-ECS-vs-Kuberneretes-ç¼–æ’å±‚"><a href="#EKS-vs-ECS-vs-Kuberneretes-ç¼–æ’å±‚" class="headerlink" title="EKS vs ECS vs Kuberneretes - ç¼–æ’å±‚"></a>EKS vs ECS vs Kuberneretes - ç¼–æ’å±‚</h2><p><img src="https://prof.justaftermidnight247.com/wp-content/uploads/2021/03/2-768x512.png" alt="aws-eks-ecs"></p>
<p>å®¹å™¨ç¼–æ’æœåŠ¡è‡ªåŠ¨åŒ–ç®¡ç†å®¹å™¨çš„æ‰‹åŠ¨å·¥ä½œã€‚ç¼–æ’çš„ä¸»è¦å¥½å¤„æ˜¯ï¼š</p>
<ul>
<li>Simplifying Operations - è‡ªåŠ¨éƒ¨ç½²å’Œåˆ›å»ºæ–°å®¹å™¨ï¼›</li>
<li>Adding Resilience - è‡ªåŠ¨ç®¡ç†æ•…éšœå’Œå®¹å™¨ç”Ÿå‘½å‘¨æœŸï¼›</li>
<li>Adding Security - æ¶ˆé™¤ç”±äºç”¨æˆ·é”™è¯¯è€Œé€ æˆçš„è¿è§„è¡Œä¸ºï¼Œå¹¶è‡ªåŠ¨åŒ–å®‰å…¨æœ€ä½³å®è·µï¼›</li>
</ul>
<h3 id="ECS-Elastic-Container-Service"><a href="#ECS-Elastic-Container-Service" class="headerlink" title="ECS - Elastic Container Service"></a>ECS - Elastic Container Service</h3><p>AWS è‡ªå·±çš„å®¹å™¨æœåŠ¡ã€‚å®ƒåœ¨é›†ç¾¤ä¸­ç®¡ç†å®¹å™¨ï¼Œè¢«ç§°ä¸º ECS é›†ç¾¤ã€‚</p>
<h3 id="EKS-Elastic-Kuberneretes-Service"><a href="#EKS-Elastic-Kuberneretes-Service" class="headerlink" title="EKS - Elastic Kuberneretes Service"></a>EKS - Elastic Kuberneretes Service</h3><p>EKS æ˜¯ä¸€ç§ AWS å®¹å™¨æœåŠ¡ï¼Œå®ƒä¸ ECS çš„ä¸åŒä¹‹å¤„åœ¨äºå®ƒç”¨äºç®¡ç† AWS åŸºç¡€è®¾æ–½ä¸Šçš„ Kubernetes é›†ç¾¤ã€‚è¿˜å¯ä»¥å°†ç°æœ‰çš„ Kubernetes å·¥ä½œè´Ÿè½½è¿ç§»åˆ° EKS ä¸Šã€‚</p>
<h3 id="Kubernetes"><a href="#Kubernetes" class="headerlink" title="Kubernetes"></a>Kubernetes</h3><p>Kubernetes æ˜¯å¼€æºçš„å®¹å™¨ç¼–æ’æœåŠ¡ï¼Œéå¸¸æµè¡Œï¼Œä½†è¦åœ¨ AWS ä¸Šéƒ¨ç½² Kubernetesï¼Œå¯ä»¥è¯´å¿…é¡»ä½¿ç”¨ EKS æ¥å®ç°ã€‚</p>
<h3 id="ECS-vs-EKS"><a href="#ECS-vs-EKS" class="headerlink" title="ECS vs EKS"></a>ECS vs EKS</h3><h4 id="ECS-pros"><a href="#ECS-pros" class="headerlink" title="ECS pros"></a>ECS pros</h4><ul>
<li>ECS æ˜¯ AWS è‡ªå·±çš„å®¹å™¨æœåŠ¡ï¼Œå› æ­¤å®ƒä¸ AWS ç”Ÿæ€ç³»ç»Ÿï¼ŒåŒ…æ‹¬ CloudTrailï¼ŒCloudWatch å’Œ Amazon ECRï¼ˆå¼¹æ€§å®¹å™¨æ³¨å†Œï¼‰è¿›è¡Œäº†æ›´å¥½çš„é›†æˆï¼Œä»¥å®ç°å¯¹ Docker æ˜ åƒçš„æ— ç¼ç®¡ç†ï¼›</li>
<li>ECS æ§åˆ¶é¢æ¿å®Œå…¨è‡ªç”±ï¼Œè€Œ EKS éœ€è¦å……å€¼ï¼›</li>
</ul>
<h4 id="EKS-pros"><a href="#EKS-pros" class="headerlink" title="EKS pros"></a>EKS pros</h4><ul>
<li>ç”±äº EKS ä½¿ç”¨ Kubernetesï¼Œæ‰€ä»¥å®ƒæ›´åŠ çµæ´»ï¼Œè¿™æ„å‘³ç€å¯ä»¥æ¯” ECS æ›´è½»æ¾åœ°å°†å·¥ä½œè¿ç§»åˆ°å¦ä¸€ä¸ªå¹³å°ï¼Œä½¿å…¶æ›´é€‚åˆå¤æ‚çš„å¤šäº‘å·¥ä½œè´Ÿè½½ï¼›</li>
<li>EKS æ›´é€‚åˆå¤æ‚çš„åº”ç”¨ï¼›</li>
<li>EKS æœ€ç»ˆæä¾›äº†æ¯” ECS æ›´å¤šçš„æ§åˆ¶ï¼ˆå¯¹é›†ç¾¤çš„ç®¡ç†å’Œè°ƒåº¦ï¼‰ï¼›</li>
</ul>
<h4 id="ç»“è®º"><a href="#ç»“è®º" class="headerlink" title="ç»“è®º"></a>ç»“è®º</h4><p>å¦‚æœéœ€è¦ä¸€ä¸ªæ›´ç®€å•çš„åº”ç”¨ç¨‹åºï¼Œå¹¶ä¸”å¸Œæœ›åˆå¹¶è®¸å¤š AWS æœåŠ¡ï¼ŒECS å¯èƒ½æ˜¯æ¯”è¾ƒå¥½çš„é€‰æ‹©ã€‚å¦‚æœæœ‰ä¸€ä¸ªæ›´å¤æ‚çš„é¡¹ç›®ï¼Œç‰¹åˆ«æ˜¯å¦‚æœæƒ³è¦ä½¿ç”¨å¤šäº‘æ–¹æ³•ï¼ŒEKS æ˜¯æ­£ç¡®çš„é€‰æ‹©â€”â€”æ˜¾ç„¶ï¼Œå¦‚æœæƒ³è¦ä½¿ç”¨ Kubernetes æ—¶ã€‚</p>
<h2 id="Fargate-vs-EC2-â€“-å®¿ä¸»å±‚"><a href="#Fargate-vs-EC2-â€“-å®¿ä¸»å±‚" class="headerlink" title="Fargate vs EC2 â€“ å®¿ä¸»å±‚"></a>Fargate vs EC2 â€“ å®¿ä¸»å±‚</h2><p><img src="https://prof.justaftermidnight247.com/wp-content/uploads/2021/03/1-768x512.png" alt="aws-fargate-ec2"></p>
<p>å®¹å™¨éƒ¨ç½²çš„å®¿ä¸»å±‚è¡¨ç¤ºå®¹å™¨å°†å®é™…è¿è¡Œçš„è™šæ‹Ÿæœºï¼ˆæˆ–æ‰¿è½½çš„è™šæ‹Ÿæœºï¼Œå› æ­¤å¾—åï¼‰ã€‚</p>
<h3 id="EC2"><a href="#EC2" class="headerlink" title="EC2"></a>EC2</h3><blockquote>
<p>Deploy and manage your own cluster of EC2 instances for running the containers.</p>
</blockquote>
<p>EC2 æ˜¯éƒ¨ç½²å®¹å™¨çš„ä¼ ç»Ÿæ–¹å¼ã€‚åœ¨ EC2 ä¸­ï¼Œé€šè¿‡å®é™…çš„ VM è¿›è¡Œè¿è¡Œã€‚</p>
<h3 id="Fargate"><a href="#Fargate" class="headerlink" title="Fargate"></a>Fargate</h3><blockquote>
<p>Run containers directly, without any EC2 instances.</p>
</blockquote>
<p>Fargate å¸¦æ¥äº†ä¸€ç§æ— æœåŠ¡å™¨çš„æ–¹å¼ï¼ŒFargate ä¸æ˜¯è‡ªå·±é…ç½®æœåŠ¡å™¨ï¼Œè€Œæ˜¯æ ¹æ®æ¯ä¸ªè¯·æ±‚è‡ªåŠ¨ä¸ºå®¹å™¨é…ç½®åŸºç¡€è®¾æ–½ã€‚</p>
<h3 id="EC2-vs-Fargate"><a href="#EC2-vs-Fargate" class="headerlink" title="EC2 vs Fargate"></a>EC2 vs Fargate</h3><h4 id="EC2-pros"><a href="#EC2-pros" class="headerlink" title="EC2 pros"></a>EC2 pros</h4><ul>
<li>EC2 æ„å‘³ç€æ›´å¤šçš„æ‰‹å·¥å·¥ä½œï¼Œä½†æ˜¯æœ‰æ›´å¤šçš„æ§åˆ¶åŠ›å’Œé€æ˜åº¦ï¼ˆå› ä¸ºä½ è‡ªå·±éœ€è¦é…ç½®åŸºç¡€è®¾æ–½ï¼‰ï¼›</li>
<li>éœ€è¦ç†Ÿæ‚‰ EC2ï¼›</li>
</ul>
<h4 id="Fargate-pros"><a href="#Fargate-pros" class="headerlink" title="Fargate pros"></a>Fargate pros</h4><ul>
<li>Fargate æ„å‘³ç€æ›´å°‘çš„å·¥ä½œï¼Œé€šå¸¸æˆæœ¬æ›´ä½ï¼ˆéœ€è¦ä½ ä¸ºæ¶ˆè€—çš„èµ„æºä»˜è´¹ï¼‰ï¼Œå¯¹åº”çš„æ§åˆ¶åŠ›å’Œé€æ˜åº¦æ›´ä½ï¼›</li>
<li>Fargate æ˜¯æ— æœåŠ¡å™¨çš„ï¼Œè¿™ç§æ–¹å¼æ˜¯ä»¥åçš„å¸¸æ€ï¼›</li>
</ul>
<h4 id="ç»“è®º-1"><a href="#ç»“è®º-1" class="headerlink" title="ç»“è®º"></a>ç»“è®º</h4><p>å¦‚æœæœ‰æ—¶é—´å’Œé¢„ç®—ï¼Œå¹¶ä¸”éœ€è¦é¢å¤–çš„ç›‘ç£å’Œæ§åˆ¶ï¼ŒEC2 æ˜¯æ›´å¥½çš„é€‰æ‹©ã€‚å¦‚æœæƒ³è¦é™ä½æˆæœ¬å’Œå‡è½»è´Ÿæ‹…ï¼ŒFargate æ˜¯ä¸ªä¸é”™çš„é€‰æ‹©ã€‚</p>
<h2 id="Benefits-of-infrastructure-as-code"><a href="#Benefits-of-infrastructure-as-code" class="headerlink" title="Benefits of infrastructure as code"></a>Benefits of infrastructure as code</h2><blockquote>
<p>ä»¥ä¸‹æ‘˜è‡ª AWS å®˜ç½‘ã€‚</p>
</blockquote>
<ul>
<li><strong>Visibility</strong>: An infrastructure as code template serves as a very clear reference of what resources are on your account, and what their settings are. You donâ€™t have to navigate to the web console to check the parameters.</li>
<li><strong>Stability</strong>: If you accidentally change the wrong setting or delete the wrong resource in the web console you can break things. Infrastructure as code helps solve this, especially when it is combined with version control, such as Git.</li>
<li><strong>Scalability</strong>: With infrastructure as code you can write it once and then reuse it many times. This means that one well written template can be used as the basis for multiple services, in multiple regions around the world, making it much easier to horizontally scale.</li>
<li><strong>Security</strong>: Once again infrastructure as code gives you a unified template for how to deploy your architecture. If you create one well secured architecture you can reuse it multiple times, and know that each deployed version is following the same settings.</li>
<li><strong>Transactional</strong>: CloudFormation not only creates resources on your AWS account but also waits for them to stabilize while they start. It verifies that provisioning was successful, and if there is a failure it can gracefully roll the infrastructure back to a past known good state.</li>
</ul>
]]></content>
      <categories>
        <category>aws</category>
      </categories>
      <tags>
        <tag>aws</tag>
      </tags>
  </entry>
  <entry>
    <title>æµ…è°ˆ RESTful API</title>
    <url>/2018/04/22/basic-restful-api/</url>
    <content><![CDATA[<h1 id="ä»€ä¹ˆæ˜¯-RESTful"><a href="#ä»€ä¹ˆæ˜¯-RESTful" class="headerlink" title="ä»€ä¹ˆæ˜¯ RESTful"></a>ä»€ä¹ˆæ˜¯ RESTful</h1><blockquote>
<ul>
<li><a href="https://github.com/aisuhua/restful-api-design-references">RESTful API è®¾è®¡å‚è€ƒæ–‡çŒ®åˆ—è¡¨</a></li>
<li><a href="http://www.restapitutorial.com/lessons/whatisrest.html">What Is REST?</a></li>
</ul>
</blockquote>
<p><code>RESTful</code> æ˜¯ä¸€ç§è½¯ä»¶è®¾è®¡é£æ ¼ï¼Œç”± <a href="https://en.wikipedia.org/wiki/Roy_Fielding">Roy Thomas Fielding</a> åœ¨ä»– <code>2000</code> å¹´çš„<a href="http://www.ics.uci.edu/~fielding/pubs/dissertation/top.htm">è®ºæ–‡</a>ä¸­æå‡ºï¼Œ<code>Fielding</code> å°†ä»–å¯¹äº’è”ç½‘è½¯ä»¶çš„æ¶æ„åŸåˆ™ï¼Œå®šåä¸º <code>REST</code>ï¼Œå³ <code>Representational State Transfer</code> çš„ç¼©å†™ï¼Œè¯‘ä¸ºè¡¨ç°å±‚çŠ¶æ€è½¬åŒ–ï¼Œä¹Ÿå¯ç†è§£ä¸ºç”¨ <code>URL</code> å®šä½èµ„æºï¼Œç”¨ <code>HTTP</code> æ–¹æ³•æè¿°æ“ä½œã€‚</p>
<p><code>REST</code> çš„æ ¸å¿ƒæ˜¯å¯ç¼–è¾‘çš„èµ„æºåŠå…¶é›†åˆï¼Œç”¨ç¬¦åˆ <code>Atom</code> æ–‡æ¡£æ ‡å‡†çš„ <code>Feed</code> å’Œ <code>Entry</code> è¡¨ç¤ºã€‚æ¯ä¸ªèµ„æºæˆ–è€…é›†åˆæœ‰ä¸€ä¸ªæƒŸä¸€çš„ <code>URI</code>ã€‚ç³»ç»Ÿä»¥èµ„æºä¸ºä¸­å¿ƒï¼Œæ„å»ºå¹¶æä¾›ä¸€ç³»åˆ—çš„ <code>Web</code> æœåŠ¡ã€‚<code>REST</code> çš„åŸºæœ¬æ¦‚å¿µå’ŒåŸåˆ™åŒ…æ‹¬ï¼šç³»ç»Ÿä¸Šçš„æ‰€æœ‰äº‹ç‰©éƒ½è¢«æŠ½è±¡ä¸ºèµ„æºï¼›æ¯ä¸ªèµ„æºå¯¹åº”å”¯ä¸€çš„èµ„æºæ ‡è¯†ï¼›å¯¹èµ„æºçš„æ“ä½œä¸ä¼šæ”¹å˜èµ„æºæ ‡è¯†æœ¬èº«ï¼›æ‰€æœ‰çš„æ“ä½œéƒ½æ˜¯æ— çŠ¶æ€çš„ï¼›ç­‰ç­‰ã€‚</p>
<h1 id="ä¸ºä½•è¦ç”¨-RESTful"><a href="#ä¸ºä½•è¦ç”¨-RESTful" class="headerlink" title="ä¸ºä½•è¦ç”¨ RESTful"></a>ä¸ºä½•è¦ç”¨ RESTful</h1><p>æŒ‰ç…§ <code>RESTful</code> æ¶æ„å¯ä»¥å……åˆ†çš„åˆ©ç”¨ <code>HTTP</code> åè®®å¸¦ç»™æˆ‘ä»¬çš„å„ç§åŠŸèƒ½ï¼Œç®—æ˜¯å¯¹ <code>HTTP</code> åè®®ä½¿ç”¨çš„æœ€ä½³å®è·µï¼Œè¿˜æœ‰ä¸€ç‚¹å°±æ˜¯å¯ä»¥ä½¿è½¯ä»¶æ¶æ„è®¾è®¡æ›´åŠ æ¸…æ™°ï¼Œå¯ç»´æŠ¤æ€§æ›´å¥½</p>
<h1 id="å¦‚ä½•åš-RESTful"><a href="#å¦‚ä½•åš-RESTful" class="headerlink" title="å¦‚ä½•åš RESTful"></a>å¦‚ä½•åš RESTful</h1><h2 id="RESTful-æ¶æ„"><a href="#RESTful-æ¶æ„" class="headerlink" title="RESTful æ¶æ„"></a>RESTful æ¶æ„</h2><p>å¦‚æœä¸€ä¸ªæ¶æ„ç¬¦åˆ <code>REST</code> åŸåˆ™ï¼Œå°±ç§°å®ƒä¸º <code>RESTful</code> æ¶æ„</p>
<p>ä»ä»¥ä¸‹ä¸‰ä¸ªæ–¹é¢ç†è§£ <code>RESTful</code> æ¶æ„ï¼š</p>
<ul>
<li>èµ„æº - <code>Resources</code>ï¼šæ‰€è°“èµ„æºï¼Œå°±æ˜¯ç½‘ç»œä¸Šçš„ä¸€ä¸ªå®ä½“ï¼Œæˆ–è€…è¯´æ˜¯ç½‘ç»œä¸Šçš„ä¸€ä¸ªå…·ä½“ä¿¡æ¯</li>
<li>è¡¨ç°å±‚ - <code>Representation</code>ï¼šèµ„æºæ˜¯ä¸€ç§ä¿¡æ¯å®ä½“ï¼Œå®ƒå¯ä»¥æœ‰å¤šç§å¤–åœ¨è¡¨ç°å½¢å¼ã€‚æˆ‘ä»¬æŠŠã€èµ„æºã€å…·ä½“å‘ˆç°å‡ºæ¥çš„å½¢å¼ï¼Œå«åšå®ƒçš„ã€è¡¨ç°å±‚ã€</li>
<li>çŠ¶æ€è½¬åŒ– - <code>State Transfer</code>ï¼šäº’è”ç½‘é€šä¿¡åè®® <code>HTTPåè®®</code>ï¼Œæ˜¯ä¸€ä¸ªæ— çŠ¶æ€åè®®ã€‚è¿™æ„å‘³ç€ï¼Œæ‰€æœ‰çš„çŠ¶æ€éƒ½ä¿å­˜åœ¨æœåŠ¡å™¨ç«¯ã€‚å› æ­¤ï¼Œå¦‚æœå®¢æˆ·ç«¯æƒ³è¦æ“ä½œæœåŠ¡å™¨ï¼Œå¿…é¡»é€šè¿‡æŸç§æ‰‹æ®µï¼Œè®©æœåŠ¡å™¨ç«¯å‘ç”Ÿã€çŠ¶æ€è½¬åŒ– - <code>State Transfer</code>ã€ã€‚è€Œè¿™ç§è½¬åŒ–æ˜¯å»ºç«‹åœ¨è¡¨ç°å±‚ä¹‹ä¸Šçš„ï¼Œæ‰€ä»¥å°±æ˜¯ã€è¡¨ç°å±‚çŠ¶æ€è½¬åŒ–ã€</li>
</ul>
<p>ä¹Ÿä¸»å°±æ˜¯è¯´ï¼Œéµå¾ª <code>REST</code> åŸåˆ™ï¼Œè®¾è®¡å‡ºæ¥çš„ä¸€ä¸ªæ¶æ„å°±ç§°ä¸º <code>RESTful</code> æ¶æ„ï¼Œæ¯”å¦‚ï¼š<code>GitHub API</code> å°±æ˜¯ä¸€ä¸ªå…¸å‹çš„ <code>RESTful</code> æ¶æ„</p>
<h2 id="RESTful-API-è®¾è®¡"><a href="#RESTful-API-è®¾è®¡" class="headerlink" title="RESTful API è®¾è®¡"></a>RESTful API è®¾è®¡</h2><h3 id="ä½¿ç”¨-URL-å®šä½èµ„æº"><a href="#ä½¿ç”¨-URL-å®šä½èµ„æº" class="headerlink" title="ä½¿ç”¨ URL å®šä½èµ„æº"></a>ä½¿ç”¨ URL å®šä½èµ„æº</h3><blockquote>
<p><a href="https://developer.github.com/v3/">GitHub REST API v3</a></p>
</blockquote>
<p>å¾ˆå¤§ç¨‹åº¦ä¸Šï¼Œå®šä¹‰çš„ <code>API</code> åœ°å€è¦å¯¹ç¨‹åºå‘˜å‹å¥½ï¼Œå¹¶ä¸”èƒ½åœ¨æµè§ˆå™¨åœ°å€æ å®¹æ˜“è¾“å…¥ã€‚æ˜¯çš„ï¼Œè¿™ä¸¤ä¸ªæŒ‡æ ‡ä¹Ÿèƒ½æ£€éªŒå‡ºé‚£äº›åˆæ ¼çš„ <code>API</code> è®¾è®¡è€…ï¼Œæˆ‘å°±æ˜¯è¿™æ ·è®¤ä¸ºçš„</p>
<ul>
<li>åº”è¯¥å°† <code>API</code> éƒ¨ç½²åœ¨ä¸“ç”¨åŸŸåä¹‹ä¸‹ï¼Œæ¯”å¦‚ï¼š<code>api.example.com</code></li>
<li>ä¸ç”¨å¤§å†™</li>
<li>ç”¨ä¸­æ  <code>-</code> è€Œä¸æ˜¯ <code>_</code></li>
<li>å‚æ•°åˆ—è¡¨è¦ <code>encode</code></li>
<li><code>URI</code> ä¸­å°½é‡ä½¿ç”¨åè¯è€Œä¸æ˜¯åŠ¨è¯</li>
<li><code>URI</code> ä¸­çš„åè¯è¡¨ç¤ºèµ„æºé›†åˆï¼Œä½¿ç”¨å¤æ•°å½¢å¼</li>
<li>è™½ç„¶ <code>/</code> åœ¨ <code>URI</code> ä¸­è¡¨è¾¾å±‚çº§ï¼Œä½†æ˜¯é¿å…ä¸ºäº†è¿½æ±‚ <code>REST</code> å¯¼è‡´å±‚çº§è¿‡æ·±ï¼Œé€‚å½“ä½¿ç”¨å‚æ•°è¡¨ç¤ºï¼Œæ¯”å¦‚ï¼š<code>GET /animals?zoo=1&amp;area=3&amp;page=1</code></li>
</ul>
<h3 id="ç‰ˆæœ¬æ§åˆ¶"><a href="#ç‰ˆæœ¬æ§åˆ¶" class="headerlink" title="ç‰ˆæœ¬æ§åˆ¶"></a>ç‰ˆæœ¬æ§åˆ¶</h3><ul>
<li>å°†ç‰ˆæœ¬å·ç›´æ¥åŠ å…¥ <code>URL</code> ä¸­</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">https://api.example.com/v1</span><br><span class="line">https://api.example.com/v2</span><br></pre></td></tr></table></figure>
<ul>
<li>ä½¿ç”¨ <code>HTTP</code> è¯·æ±‚å¤´çš„ <code>Accept</code> å­—æ®µè¿›è¡ŒåŒºåˆ†</li>
</ul>
<p>åœ¨è¿™ç§æ–¹å¼ä¸­ï¼Œå®¢æˆ·ç«¯åœ¨ <code>Accept Header</code> ä¸­å­˜æ”¾ <code>Accept: application/vnd.example.v1+json</code>ï¼ŒæœåŠ¡å™¨è‡ªå®šä¹‰ <code>Header</code> è¿”å›å½“å‰ç‰ˆæœ¬ä¿¡æ¯ <code>X-Example-Media-Type: example.v3; format=json</code></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">https://api.example.com/</span><br><span class="line">    Accept: application/vnd.example.v1+json</span><br><span class="line">    Accept: application/vnd.example.v2+json</span><br></pre></td></tr></table></figure>
<p>è¯·æ±‚ <code>GitHub</code> æŸ¥çœ‹å¤´ä¸­è‡ªå®šä¹‰çš„ <code>X-GitHub-Media-Type</code></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ curl -i https://api.github.com/users/octocat/orgs</span><br><span class="line">HTTP/1.1 200 OK</span><br><span class="line">Date: Sun, 22 Apr 2018 03:43:57 GMT</span><br><span class="line">Content-Type: application/json; charset=utf-8</span><br><span class="line">Content-Length: 5</span><br><span class="line">Server: GitHub.com</span><br><span class="line">Status: 200 OK</span><br><span class="line">X-RateLimit-Limit: 60 <span class="comment"># æœ€å¤§è®¿é—®æ¬¡æ•°</span></span><br><span class="line">X-RateLimit-Remaining: 50 <span class="comment"># å‰©ä½™çš„è®¿é—®æ¬¡æ•°</span></span><br><span class="line">X-RateLimit-Reset: 1524369179 <span class="comment"># åˆ°è¯¥æ—¶é—´ç‚¹ï¼Œè®¿é—®æ¬¡æ•°ä¼šé‡ç½®ä¸º X-RateLimit-Limit</span></span><br><span class="line">Cache-Control: public, max-age=60, s-maxage=60</span><br><span class="line">Vary: Accept</span><br><span class="line">ETag: <span class="string">&quot;98f0c1b396a4e5d54f4d5fe561d54b44&quot;</span></span><br><span class="line">X-GitHub-Media-Type: github.v3; format=json <span class="comment"># GitHub æœåŠ¡ç«¯è‡ªå®šä¹‰ Header è¿”å›å½“å‰ç‰ˆæœ¬ä¿¡æ¯</span></span><br><span class="line">Access-Control-Expose-Headers: ETag, Link, Retry-After, X-GitHub-OTP, X-RateLimit-Limit, X-RateLimit-Remaining, X-RateLimit-Reset, X-OAuth-Scopes, X-Accepted-OAuth-Scopes, X-Poll-Interval</span><br><span class="line">Access-Control-Allow-Origin: *</span><br><span class="line">Strict-Transport-Security: max-age=31536000; includeSubdomains; preload</span><br><span class="line">X-Frame-Options: deny</span><br><span class="line">X-Content-Type-Options: nosniff</span><br><span class="line">X-XSS-Protection: 1; mode=block</span><br><span class="line">Referrer-Policy: origin-when-cross-origin, strict-origin-when-cross-origin</span><br><span class="line">Content-Security-Policy: default-src <span class="string">&#x27;none&#x27;</span></span><br><span class="line">X-Runtime-rack: 0.010912</span><br><span class="line">Vary: Accept-Encoding</span><br><span class="line">X-GitHub-Request-Id: E5BC:17C8:C2B264:1064F09:5ADC04FD</span><br><span class="line"></span><br><span class="line">[</span><br><span class="line"></span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<p>è¯·æ±‚ <code>GitHub</code> æ¥å£è¶…è¿‡é™åˆ¶æ¬¡æ•°åçš„å“åº”</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// å½“è¯·æ±‚åˆ°ç¬¬ 61 æ¬¡æ—¶çš„å“åº”ç»“æœ</span><br><span class="line">$ <span class="keyword">for</span> (( i=0; i&lt;61; i=i+1 )); <span class="keyword">do</span> curl -i https://api.github.com/users/octocat/orgs; <span class="keyword">done</span></span><br><span class="line">HTTP/1.1 403 Forbidden <span class="comment"># æœåŠ¡å™¨æ‹’ç»äº†</span></span><br><span class="line">Date: Sun, 22 Apr 2018 04:04:15 GMT</span><br><span class="line">Content-Type: application/json; charset=utf-8</span><br><span class="line">Content-Length: 258</span><br><span class="line">Server: GitHub.com</span><br><span class="line">Status: 403 Forbidden <span class="comment"># è¿”å›çš„çŠ¶æ€ç </span></span><br><span class="line">X-RateLimit-Limit: 60</span><br><span class="line">X-RateLimit-Remaining: 0 <span class="comment"># å‰©ä½™æ¬¡æ•°ä¸º 0 äº†</span></span><br><span class="line">X-RateLimit-Reset: 1524372880</span><br><span class="line">X-GitHub-Media-Type: github.v3; format=json</span><br><span class="line">Access-Control-Expose-Headers: ETag, Link, Retry-After, X-GitHub-OTP, X-RateLimit-Limit, X-RateLimit-Remaining, X-RateLimit-Reset, X-OAuth-Scopes, X-Accepted-OAuth-Scopes, X-Poll-Interval</span><br><span class="line">Access-Control-Allow-Origin: *</span><br><span class="line">Strict-Transport-Security: max-age=31536000; includeSubdomains; preload</span><br><span class="line">X-Frame-Options: deny</span><br><span class="line">X-Content-Type-Options: nosniff</span><br><span class="line">X-XSS-Protection: 1; mode=block</span><br><span class="line">Referrer-Policy: origin-when-cross-origin, strict-origin-when-cross-origin</span><br><span class="line">Content-Security-Policy: default-src <span class="string">&#x27;none&#x27;</span></span><br><span class="line">X-Runtime-rack: 0.012239</span><br><span class="line">X-GitHub-Request-Id: E756:2E0E:75FBFF:A0DA73:5ADC09BF</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;message&quot;</span>: <span class="string">&quot;API rate limit exceeded for 221.223.47.129. (But here&#x27;s the good news: Authenticated requests get a higher rate limit. Check out the documentation for more details.)&quot;</span>,</span><br><span class="line">  <span class="string">&quot;documentation_url&quot;</span>: <span class="string">&quot;https://developer.github.com/v3/#rate-limiting&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>è‡ªå®šä¹‰ <code>Header</code> å¤´</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">X-Api-Version: 1</span><br></pre></td></tr></table></figure>
<h3 id="ä½¿ç”¨-HTTP-æ–¹æ³•"><a href="#ä½¿ç”¨-HTTP-æ–¹æ³•" class="headerlink" title="ä½¿ç”¨ HTTP æ–¹æ³•"></a>ä½¿ç”¨ HTTP æ–¹æ³•</h3><div class="note info">
            <ul><li>å®‰å…¨æ€§ï¼šä¸ä¼šæ”¹å˜èµ„æºçŠ¶æ€ï¼Œå¯ä»¥ç†è§£ä¸ºåªè¯»çš„</li><li>å¹‚ç­‰æ€§ï¼šæ‰§è¡Œ <code>1</code> æ¬¡å’Œæ‰§è¡Œ <code>N</code> æ¬¡ï¼Œå¯¹èµ„æºçŠ¶æ€æ”¹å˜çš„æ•ˆæœæ˜¯ç­‰ä»·çš„ï¼Œä¹Ÿå°±æ˜¯è¯´æ— è®ºä½ æ‰§è¡Œå¤šå°‘æ¬¡é‡å¤çš„æ“ä½œéƒ½ä¸ä¼šç»™èµ„æºé€ æˆå˜æ›´</li></ul>
          </div>
<table>
<thead>
<tr>
<th>æ–¹æ³•</th>
<th>æè¿°</th>
<th>æ˜¯å¦å®‰å…¨</th>
<th>æ˜¯å¦å¹‚ç­‰</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>GET</code></td>
<td>è·å–èµ„æºï¼Œå•ä¸ªæˆ–å¤šä¸ª</td>
<td>æ˜¯</td>
<td>æ˜¯</td>
</tr>
<tr>
<td><code>POST</code></td>
<td>åˆ›å»ºèµ„æº</td>
<td>å¦</td>
<td>å¦</td>
</tr>
<tr>
<td><code>PUT</code></td>
<td>æ›´æ–°èµ„æºï¼Œå®¢æˆ·ç«¯æä¾›å®Œæ•´çš„èµ„æºæ•°æ®</td>
<td>å¦</td>
<td>æ˜¯</td>
</tr>
<tr>
<td><code>PATCH</code></td>
<td>æ›´æ–°èµ„æºï¼Œå®¢æˆ·ç«¯æä¾›éƒ¨åˆ†çš„èµ„æºæ•°æ®</td>
<td>å¦</td>
<td>å¦</td>
</tr>
<tr>
<td><code>DELETE</code></td>
<td>åˆ é™¤èµ„æº</td>
<td>å¦</td>
<td>æ˜¯</td>
</tr>
</tbody>
</table>
<h3 id="ä½¿ç”¨-HTTP-å“åº”ä»£ç "><a href="#ä½¿ç”¨-HTTP-å“åº”ä»£ç " class="headerlink" title="ä½¿ç”¨ HTTP å“åº”ä»£ç "></a>ä½¿ç”¨ HTTP å“åº”ä»£ç </h3><h4 id="è¯·æ±‚æˆåŠŸ"><a href="#è¯·æ±‚æˆåŠŸ" class="headerlink" title="è¯·æ±‚æˆåŠŸ"></a>è¯·æ±‚æˆåŠŸ</h4><table>
<thead>
<tr>
<th>çŠ¶æ€ç </th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>200 OK</code></td>
<td>å·²åˆ›å»ºï¼Œè¯·æ±‚æˆåŠŸä¸”æœåŠ¡å™¨å·²åˆ›å»ºäº†æ–°çš„èµ„æºï¼Œä¹Ÿå¯ä»¥è¢«ç”¨åœ¨ä¸åˆ›å»ºæ–°èµ„æºçš„ <code>POST</code> æ“ä½œä¸Š</td>
</tr>
<tr>
<td><code>201 Created</code></td>
<td>å¯¹è±¡åˆ›å»ºæˆåŠŸå¹¶è¿”å›ç›¸åº”èµ„æºæ•°æ®ï¼Œå¦‚ï¼š<code>POST</code> æˆåŠŸï¼›åˆ›å»ºå®Œæˆåå“åº”å¤´ä¸­åº”è¯¥æºå¸¦å¤´æ ‡ <code>Location</code>ï¼ŒæŒ‡å‘æ–°å»ºèµ„æºçš„åœ°å€</td>
</tr>
<tr>
<td><code>202 Accepted</code></td>
<td>æœåŠ¡å™¨æ¥å—äº†è¯·æ±‚ï¼Œä½†æ˜¯è¿˜æœªå¤„ç†ï¼Œå“åº”ä¸­åº”è¯¥åŒ…å«ç›¸åº”çš„æŒ‡ç¤ºä¿¡æ¯ï¼Œå‘Šè¯‰å®¢æˆ·ç«¯è¯¥å»å“ªé‡ŒæŸ¥è¯¢å…³äºæœ¬æ¬¡è¯·æ±‚çš„ä¿¡æ¯</td>
</tr>
<tr>
<td><code>204 No Content</code></td>
<td>è¯·æ±‚æ‰§è¡ŒæˆåŠŸï¼Œä¸è¿”å›ç›¸åº”èµ„æºæ•°æ®ï¼Œå¦‚ï¼š<code>PATCH</code>ã€<code>DELETE</code> æˆåŠŸ</td>
</tr>
</tbody>
</table>
<h4 id="é‡å®šå‘"><a href="#é‡å®šå‘" class="headerlink" title="é‡å®šå‘"></a>é‡å®šå‘</h4><table>
<thead>
<tr>
<th>çŠ¶æ€ç </th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>301 Moved Permanently</code></td>
<td>è¢«è¯·æ±‚çš„èµ„æºå·²æ°¸ä¹…ç§»åŠ¨åˆ°æ–°ä½ç½®</td>
</tr>
<tr>
<td><code>302 Found</code></td>
<td>è¯·æ±‚çš„èµ„æºç°åœ¨ä¸´æ—¶ä»ä¸åŒçš„ <code>URI</code> å“åº”è¯·æ±‚</td>
</tr>
<tr>
<td><code>303 See Other</code></td>
<td>å¯¹åº”å½“å‰è¯·æ±‚çš„å“åº”å¯ä»¥åœ¨å¦ä¸€ä¸ª <code>URI</code> ä¸Šè¢«æ‰¾åˆ°ï¼Œå®¢æˆ·ç«¯åº”è¯¥ä½¿ç”¨ <code>GET</code> æ–¹æ³•è¿›è¡Œè¯·æ±‚ã€‚æ¯”å¦‚åœ¨åˆ›å»ºå·²ç»è¢«åˆ›å»ºçš„èµ„æºæ—¶ï¼Œå¯ä»¥è¿”å› <code>303</code></td>
</tr>
<tr>
<td><code>307 Temporary Redirect</code></td>
<td>å¯¹åº”å½“å‰è¯·æ±‚çš„å“åº”å¯ä»¥åœ¨å¦ä¸€ä¸ª <code>URI</code> ä¸Šè¢«æ‰¾åˆ°ï¼Œå®¢æˆ·ç«¯åº”è¯¥ä¿æŒåŸæœ‰çš„è¯·æ±‚æ–¹æ³•è¿›è¡Œè¯·æ±‚</td>
</tr>
</tbody>
</table>
<h4 id="æ¡ä»¶è¯·æ±‚"><a href="#æ¡ä»¶è¯·æ±‚" class="headerlink" title="æ¡ä»¶è¯·æ±‚"></a>æ¡ä»¶è¯·æ±‚</h4><table>
<thead>
<tr>
<th>çŠ¶æ€ç </th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>304 Not Modified</code></td>
<td>èµ„æºè‡ªä»ä¸Šæ¬¡è¯·æ±‚åæ²¡æœ‰å†æ¬¡å‘ç”Ÿå˜åŒ–ï¼Œä¸»è¦ä½¿ç”¨åœºæ™¯åœ¨äºå®ç°æ•°æ®ç¼“å­˜</td>
</tr>
<tr>
<td><code>409 Conflict</code></td>
<td>è¯·æ±‚æ“ä½œå’Œèµ„æºçš„å½“å‰çŠ¶æ€å­˜åœ¨å†²çªã€‚ä¸»è¦ä½¿ç”¨åœºæ™¯åœ¨äºå®ç°å¹¶å‘æ§åˆ¶</td>
</tr>
<tr>
<td><code>412 Precondition Failed</code></td>
<td>æœåŠ¡å™¨åœ¨éªŒè¯åœ¨è¯·æ±‚çš„å¤´å­—æ®µä¸­ç»™å‡ºå…ˆå†³æ¡ä»¶æ—¶ï¼Œæ²¡èƒ½æ»¡è¶³å…¶ä¸­çš„ä¸€ä¸ªæˆ–å¤šä¸ªã€‚ä¸»è¦ä½¿ç”¨åœºæ™¯åœ¨äºå®ç°å¹¶å‘æ§åˆ¶</td>
</tr>
</tbody>
</table>
<h4 id="å®¢æˆ·ç«¯é”™è¯¯"><a href="#å®¢æˆ·ç«¯é”™è¯¯" class="headerlink" title="å®¢æˆ·ç«¯é”™è¯¯"></a>å®¢æˆ·ç«¯é”™è¯¯</h4><table>
<thead>
<tr>
<th>çŠ¶æ€ç </th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>400 Bad Request</code></td>
<td>æ±‚ä½“åŒ…å«è¯­æ³•é”™è¯¯</td>
</tr>
<tr>
<td><code>401 Unauthorized</code></td>
<td>æœªæˆæƒï¼Œè¯·æ±‚è¦æ±‚è¿›è¡Œèº«ä»½éªŒè¯ï¼Œå¦‚æœæœåŠ¡å™¨å°±ç®—æ˜¯èº«ä»½éªŒè¯åä¹Ÿä¸å…è®¸å®¢æˆ·è®¿é—®èµ„æºï¼Œåº”è¯¥å“åº” <code>403 Forbidden</code>ã€‚å¦‚æœè¯·æ±‚é‡Œæœ‰ <code>Authorization</code> å¤´ï¼Œé‚£ä¹ˆå¿…é¡»è¿”å›ä¸€ä¸ª <a href="https://tools.ietf.org/html/rfc7235#section-4.1"><code>WWW-Authenticate</code></a> å¤´</td>
</tr>
<tr>
<td><code>403 Forbidden</code></td>
<td>å·²ç¦æ­¢ï¼ŒæœåŠ¡å™¨æ‹’ç»è¯·æ±‚</td>
</tr>
<tr>
<td><code>404 Not Found</code></td>
<td>æœªæ‰¾åˆ°ï¼Œè¯·æ±‚ä¸€ä¸ªä¸å­˜åœ¨çš„èµ„æº</td>
</tr>
<tr>
<td><code>405 Method Not Allowed</code></td>
<td>æ–¹æ³•ç¦ç”¨ï¼Œç¦ç”¨è¯·æ±‚ä¸­æ‰€æŒ‡å®šçš„æ–¹æ³•</td>
</tr>
<tr>
<td><code>406 Not Acceptable</code></td>
<td>æœåŠ¡å™¨ä¸æ”¯æŒå®¢æˆ·ç«¯è¯·æ±‚çš„å†…å®¹æ ¼å¼ï¼Œä½†å“åº”é‡Œä¼šåŒ…å«æœåŠ¡ç«¯èƒ½å¤Ÿç»™å‡ºçš„æ ¼å¼çš„æ•°æ®ï¼Œå¹¶åœ¨ <code>Content-Type</code> ä¸­å£°æ˜æ ¼å¼åç§°</td>
</tr>
<tr>
<td><code>410 Gone</code></td>
<td>å·²åˆ é™¤ï¼Œå¦‚æœè¯·æ±‚çš„èµ„æºå·²è¢«æ°¸ä¹…åˆ é™¤ï¼Œé‚£ä¹ˆï¼ŒæœåŠ¡å™¨ä¼šè¿”å›æ­¤å“åº”</td>
</tr>
<tr>
<td><code>413 Payload Too Large</code></td>
<td><code>POST</code> æˆ–è€… <code>PUT</code> è¯·æ±‚çš„æ¶ˆæ¯å®ä½“è¿‡å¤§</td>
</tr>
<tr>
<td><code>415 Unsupported Media Type</code></td>
<td>æœåŠ¡å™¨ä¸æ”¯æŒè¯·æ±‚ä¸­æäº¤çš„æ•°æ®çš„æ ¼å¼</td>
</tr>
<tr>
<td><code>422 Unprocessable Entity</code></td>
<td>è¯·æ±‚æ ¼å¼æ­£ç¡®ï¼Œä½†æ˜¯ç”±äºå«æœ‰è¯­ä¹‰é”™è¯¯ï¼Œæ— æ³•å“åº”</td>
</tr>
<tr>
<td><code>428 Precondition Required</code></td>
<td>è¦æ±‚å…ˆå†³æ¡ä»¶ï¼Œå¦‚æœæƒ³è¦è¯·æ±‚èƒ½æˆåŠŸå¿…é¡»æ»¡è¶³ä¸€äº›é¢„è®¾çš„æ¡ä»¶</td>
</tr>
<tr>
<td><code>429 Too Many Requests</code></td>
<td>ç”±äºè¯·æ±‚é¢‘æ¬¡è¾¾åˆ°ä¸Šé™è€Œè¢«æ‹’ç»è®¿é—®</td>
</tr>
</tbody>
</table>
<h4 id="æœåŠ¡ç«¯é”™è¯¯"><a href="#æœåŠ¡ç«¯é”™è¯¯" class="headerlink" title="æœåŠ¡ç«¯é”™è¯¯"></a>æœåŠ¡ç«¯é”™è¯¯</h4><table>
<thead>
<tr>
<th>çŠ¶æ€ç </th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>500 Internal Server Error</code></td>
<td>æœåŠ¡å™¨é‡åˆ°äº†ä¸€ä¸ªæœªæ›¾é¢„æ–™çš„çŠ¶å†µï¼Œå¯¼è‡´äº†å®ƒæ— æ³•å®Œæˆå¯¹è¯·æ±‚çš„å¤„ç†</td>
</tr>
<tr>
<td><code>501 Not Implemented</code></td>
<td>æœåŠ¡å™¨ä¸æ”¯æŒå½“å‰è¯·æ±‚æ‰€éœ€è¦çš„æŸä¸ªåŠŸèƒ½</td>
</tr>
<tr>
<td><code>502 Bad Gateway</code></td>
<td>ä½œä¸ºç½‘å…³æˆ–è€…ä»£ç†å·¥ä½œçš„æœåŠ¡å™¨å°è¯•æ‰§è¡Œè¯·æ±‚æ—¶ï¼Œä»ä¸Šæ¸¸æœåŠ¡å™¨æ¥æ”¶åˆ°æ— æ•ˆçš„å“åº”</td>
</tr>
<tr>
<td><code>503 Service Unavailable</code></td>
<td>ç”±äºä¸´æ—¶çš„æœåŠ¡å™¨ç»´æŠ¤æˆ–è€…è¿‡è½½ï¼ŒæœåŠ¡å™¨å½“å‰æ— æ³•å¤„ç†è¯·æ±‚</td>
</tr>
</tbody>
</table>
<h3 id="å“åº”æ•°æ®æ ¼å¼"><a href="#å“åº”æ•°æ®æ ¼å¼" class="headerlink" title="å“åº”æ•°æ®æ ¼å¼"></a>å“åº”æ•°æ®æ ¼å¼</h3><blockquote>
<p><a href="https://www.zhihu.com/question/25636060">ä¸ºä»€ä¹ˆéƒ½åå¯¹ XML è€Œæ”¯æŒä½¿ç”¨ JSONï¼Ÿ</a></p>
</blockquote>
<blockquote>
<p>å½“ç„¶è½®å­å“¥æ˜¯è¿™æ ·è¯´çš„ã€åœ¨æˆ‘é•¿æ—¶é—´ä½¿ç”¨ <code>XML</code> å’Œ <code>JSON</code> çš„è¿‡ç¨‹ä¸­æˆ‘å‘ç°ï¼Œå…¶å®ä»–ä»¬æ˜¯ä¸å¯äº’ç›¸æ›¿ä»£çš„ã€‚æˆ‘ä»¬åªèƒ½è¯´å¦‚ä»Šå¤§éƒ¨åˆ†é€‚åˆ <code>XML</code> çš„ç¨‹åºè¦ä¹ˆéƒ½å†™å®Œäº†è¦ä¹ˆéƒ½ä¸æ—¶é«¦äº†ï¼Œç°åœ¨éœ€è¦ <code>JSON</code> çš„è¿˜æ²¡å†™çš„ç¨‹åºå¤šä¸€ç‚¹ã€</p>
</blockquote>
<p><code>GitHub</code> æ˜¯åœ¨è¯·æ±‚çš„ <code>body</code> ä½“ä¸­ä½¿ç”¨ <code>JSON</code> æ ¼å¼æ¥è¿”å›æ•°æ®çš„</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ curl -i https://api.github.com -u foo:bar</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;message&quot;</span>: <span class="string">&quot;Bad credentials&quot;</span>,</span><br><span class="line">  <span class="string">&quot;documentation_url&quot;</span>: <span class="string">&quot;https://developer.github.com/v3&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="ç¼–å†™æ–‡æ¡£"><a href="#ç¼–å†™æ–‡æ¡£" class="headerlink" title="ç¼–å†™æ–‡æ¡£"></a>ç¼–å†™æ–‡æ¡£</h3><p>ä¸€ä¸ªå¥½çš„æ–‡æ¡£ä¹Ÿååº”å‡ºæ¥å£å¼€å‘è€…çš„ç´ å…»ï¼ˆå½“ç„¶é‚£äº›èµ¶é¡¹ç›®è¿›åº¦çš„é™¤å¤–ï¼Œç¬”è€…ç¡®å®ä¹Ÿç»å†è¿‡è¿™ç§åœºæ™¯ï¼Œé¡¹ç›®æ€¥å¼å¼çš„ä¸Šï¼Œå°±æ„Ÿè§‰æ˜å¤©åšä¸å‡ºæ¥ï¼Œåå¤©å…¬å¸å°±è¦å€’é—­çš„è¿™ç§ï¼Œä¸è¦è¯´å†™æ–‡æ¡£ï¼Œå°±è‡ªå·±å†™çš„ä»£ç  <code>Review</code> ä¸€ä¸‹éƒ½æ˜¯æµªè´¹æ—¶é—´ã€‚å¦‚æœæ¡ä»¶å…è®¸ï¼Œæˆ‘ä¸ªäººè¿˜æ˜¯æ„¿æ„æŠŠç¨‹åºå’Œæ–‡æ¡£éƒ½å†™å¥½çš„ï¼‰ã€‚å½“ç„¶ï¼Œé€šè¿‡è¿™äº›ï¼Œä½ ä¹Ÿçœ‹åˆ°äº†æˆ‘çš„ç´ å…»ç¡®å®ä¹Ÿä¸é«˜ï¼Œæ‰¾äº†ä¸€ä¸ªèµ¶è¿›åº¦çš„å€Ÿå£ä¸å†™æ–‡æ¡£ï¼Œä½ æ„¿æ„è¿™ä¹ˆç†è§£æˆ‘ä¹Ÿå°±ä¸è¯´ä»€ä¹ˆäº†</p>
<p>æ–‡æ¡£çš„ä¸€äº›åŸåˆ™</p>
<ul>
<li>æ¯ä¸€ä¸ªæ¥å£çš„è¯·æ±‚å‚æ•°ï¼Œæ¯ä¸ªå‚æ•°çš„ç±»å‹é™åˆ¶ï¼Œæ˜¯å¦å¿…å¡«ï¼Œå¯é€‰çš„å€¼ç­‰éƒ½è¿›è¡Œæ˜ç¡®</li>
<li>å“åº”ç»“æœé›†ä¸­çš„æ¯ä¸ªå‚æ•°éƒ½æœ‰æ˜ç¡®çš„è§£é‡Š</li>
<li>å¯¹äºç‰¹å®šåœºæ™¯å’Œä¸“é—¨é€‚é…çš„æ¥å£ï¼Œæä¾›è¯¦ç»†çš„è¯´æ˜ï¼Œæ€ä¹ˆçš„åœºæ™¯ä¸‹è°ƒç”¨ä¹‹ç±»ç­‰ç­‰</li>
</ul>
<p>æ˜¾ç„¶ï¼Œè¿™ä¹ˆå®å¤§çš„æ ‡é¢˜å¯ä¸æ˜¯å†™ä¸€ç¯‡æ–‡ç« å°±èƒ½æå®šçš„ï¼Œä»¥ä¸Šè¿™äº›å°±æ˜¯æˆ‘å¯¹ <code>RESTful API</code> çš„ä¸€äº›ç†è§£å’Œæ€»ç»“ï¼ŒåæœŸä¼šè¡¥å……å’Œå®Œå–„</p>
<p>æœªå®Œå¾…ç»­â€¦</p>
]]></content>
      <categories>
        <category>basic</category>
      </categories>
      <tags>
        <tag>basic</tag>
      </tags>
  </entry>
  <entry>
    <title>TCP çš„ä¸‰æ¬¡æ¡æ‰‹</title>
    <url>/2018/05/12/basic-tcp-three-handshake/</url>
    <content><![CDATA[<h1 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h1><h2 id="TCP-åè®®"><a href="#TCP-åè®®" class="headerlink" title="TCP åè®®"></a>TCP åè®®</h2><p>ä¼ è¾“æ§åˆ¶åè®® - <code>Transmission Control Protocol</code>ï¼Œç¼©å†™ä¸º <code>TCP</code>ï¼Œæ˜¯ä¸€ç§é¢å‘è¿æ¥çš„ã€å¯é çš„ã€åŸºäºå­—èŠ‚æµçš„ä¼ è¾“å±‚é€šä¿¡åè®®ï¼Œç”± <code>IETF</code> çš„ <code>RFC 793</code> å®šä¹‰ã€‚åœ¨ç®€åŒ–çš„è®¡ç®—æœºç½‘ç»œ <code>OSI</code> æ¨¡å‹ä¸­ï¼Œå®ƒå®Œæˆç¬¬å››å±‚ä¼ è¾“å±‚æ‰€æŒ‡å®šçš„åŠŸèƒ½ï¼Œç”¨æˆ·æ•°æ®åŒ…åè®® <code>UDP</code> æ˜¯åŒä¸€å±‚å†…å¦ä¸€ä¸ªé‡è¦çš„ä¼ è¾“åè®®ã€‚</p>
<h2 id="è¿è¡Œæ–¹å¼"><a href="#è¿è¡Œæ–¹å¼" class="headerlink" title="è¿è¡Œæ–¹å¼"></a>è¿è¡Œæ–¹å¼</h2><p><code>TCP</code> åè®®çš„è¿è¡Œå¯åˆ’åˆ†ä¸ºä¸‰ä¸ªé˜¶æ®µï¼šè¿æ¥åˆ›å»ºï¼ˆ<code>connection establishment</code>ï¼‰ã€æ•°æ®ä¼ é€ï¼ˆ<code>data transfer</code>ï¼‰å’Œè¿æ¥ç»ˆæ­¢<code>connection termination</code>ã€‚æ“ä½œç³»ç»Ÿå°† <code>TCP</code> è¿æ¥æŠ½è±¡ä¸ºå¥—æ¥å­—è¡¨ç¤ºçš„æœ¬åœ°ç«¯ç‚¹ï¼ˆ<code>local end-point</code>ï¼‰ï¼Œä½œä¸ºç¼–ç¨‹æ¥å£ç»™ç¨‹åºä½¿ç”¨ã€‚åœ¨ <code>TCP</code> è¿æ¥çš„ç”Ÿå‘½æœŸå†…ï¼Œæœ¬åœ°ç«¯ç‚¹è¦ç»å†ä¸€ç³»åˆ—çš„çŠ¶æ€æ”¹å˜ã€‚</p>
<h2 id="TCP-ç‰¹æ€§"><a href="#TCP-ç‰¹æ€§" class="headerlink" title="TCP ç‰¹æ€§"></a>TCP ç‰¹æ€§</h2><ul>
<li><code>TCP</code> æä¾›ä¸€ç§é¢å‘è¿æ¥çš„ã€å¯é çš„å­—èŠ‚æµæœåŠ¡</li>
<li>åœ¨ä¸€ä¸ª <code>TCP</code> è¿æ¥ä¸­ï¼Œä»…æœ‰ä¸¤æ–¹è¿›è¡Œå½¼æ­¤é€šä¿¡ã€‚å¹¿æ’­å’Œå¤šæ’­ä¸èƒ½ç”¨äº <code>TCP</code></li>
<li><code>TCP</code> ä½¿ç”¨æ ¡éªŒå’Œï¼Œç¡®è®¤å’Œé‡ä¼ æœºåˆ¶æ¥ä¿è¯å¯é ä¼ è¾“</li>
<li><code>TCP</code> ç»™æ•°æ®åˆ†èŠ‚è¿›è¡Œæ’åºï¼Œå¹¶ä½¿ç”¨ç´¯ç§¯ç¡®è®¤ä¿è¯æ•°æ®çš„é¡ºåºä¸å˜å’Œéé‡å¤</li>
<li><code>TCP</code> ä½¿ç”¨æ»‘åŠ¨çª—å£æœºåˆ¶æ¥å®ç°æµé‡æ§åˆ¶ï¼Œé€šè¿‡åŠ¨æ€æ”¹å˜çª—å£çš„å¤§å°è¿›è¡Œæ‹¥å¡æ§åˆ¶</li>
</ul>
<div class="note danger">
            <p><code>TCP</code> å¹¶ä¸èƒ½ä¿è¯æ•°æ®ä¸€å®šä¼šè¢«å¯¹æ–¹æ¥æ”¶åˆ°ã€‚<code>TCP</code> èƒ½å¤Ÿåšåˆ°çš„æ˜¯ï¼Œå¦‚æœæœ‰å¯èƒ½ï¼Œå°±æŠŠæ•°æ®é€’é€åˆ°æ¥æ”¶æ–¹ï¼Œå¦åˆ™å°±ï¼ˆé€šè¿‡æ”¾å¼ƒé‡ä¼ å¹¶ä¸”ä¸­æ–­è¿æ¥è¿™ä¸€æ‰‹æ®µï¼‰é€šçŸ¥ç”¨æˆ·ã€‚å› æ­¤å‡†ç¡®è¯´ <code>TCP</code> ä¹Ÿä¸æ˜¯ <code>100%</code> å¯é çš„åè®®ï¼Œå®ƒæ‰€èƒ½æä¾›çš„æ˜¯æ•°æ®çš„å¯é é€’é€æˆ–æ•…éšœçš„å¯é é€šçŸ¥ã€‚</p>
          </div>
<h2 id="OSI-æ¨¡å‹"><a href="#OSI-æ¨¡å‹" class="headerlink" title="OSI` æ¨¡å‹"></a>OSI` æ¨¡å‹</h2><p>å¼€æ”¾å¼ç³»ç»Ÿäº’è”é€šä¿¡å‚è€ƒæ¨¡å‹ - <code>Open System Interconnection Reference Model</code>ï¼Œç¼©å†™ä¸º <code>OSI</code>ã€‚ä¸€ç§æ¦‚å¿µæ¨¡å‹ï¼Œç”±å›½é™…æ ‡å‡†åŒ–ç»„ç»‡æå‡ºï¼Œä¸€ä¸ªè¯•å›¾ä½¿å„ç§è®¡ç®—æœºåœ¨ä¸–ç•ŒèŒƒå›´å†…äº’è¿ä¸ºç½‘ç»œçš„æ ‡å‡†æ¡†æ¶ã€‚å®šä¹‰äº <code>ISO/IEC 7498-1</code></p>
<table>
<thead>
<tr>
<th>OSI å±‚ï¼ˆä»ä¸Šåˆ°ä¸‹ï¼‰</th>
<th>åŠŸèƒ½</th>
<th>åè®®</th>
</tr>
</thead>
<tbody>
<tr>
<td>åº”ç”¨å±‚ - <code>Application Layer</code></td>
<td>æä¾›ä¸ºåº”ç”¨è½¯ä»¶è€Œè®¾çš„æ¥å£ï¼Œä»¥è®¾ç½®ä¸å¦ä¸€åº”ç”¨è½¯ä»¶ä¹‹é—´çš„é€šä¿¡</td>
<td><code>HTTP(S)</code>ã€<code>FTP</code>ã€<br><code>TELNET</code>ã€<code>SSH</code>ã€<br><code>SMTP</code>ã€<code>POP3</code>ã€<br><code>NFS</code></td>
</tr>
<tr>
<td>è¡¨ç¤ºå±‚ - <code>Presentation Layer</code></td>
<td>æŠŠæ•°æ®è½¬æ¢ä¸ºèƒ½ä¸æ¥æ”¶è€…çš„ç³»ç»Ÿæ ¼å¼å…¼å®¹å¹¶é€‚åˆä¼ è¾“çš„æ ¼å¼ï¼Œä»¥ç¡®ä¿ä»¥ä¸€ä¸ªç³»ç»Ÿåº”ç”¨å±‚å‘é€çš„ä¿¡æ¯å¯ä»¥è¢«å¦ä¸€ä¸ªç³»ç»Ÿåº”ç”¨å±‚è¯†åˆ«ï¼Œå³å®šä¹‰æ•°æ®æ ¼å¼åŠåŠ å¯†</td>
<td>æ— </td>
</tr>
<tr>
<td>ä¼šè¯å±‚ - <code>Session Layer</code></td>
<td>è´Ÿè´£åœ¨æ•°æ®ä¼ è¾“ä¸­è®¾ç½®å’Œç»´æŠ¤ç”µè„‘ç½‘ç»œä¸­ä¸¤å°ç”µè„‘ä¹‹é—´çš„é€šä¿¡è¿æ¥ï¼Œå»ºç«‹ã€ç®¡ç†å’Œç»ˆæ­¢è¡¨ç¤ºå±‚ä¸å®ä½“ä¹‹é—´çš„é€šä¿¡ä¼šè¯</td>
<td>æ— </td>
</tr>
<tr>
<td>ä¼ è¾“å±‚ - <code>Transport Layer</code></td>
<td>æä¾›å¯é çš„ç«¯åˆ°ç«¯çš„ç½‘ç»œæ•°æ®æµæœåŠ¡</td>
<td><code>TCP</code>ã€<code>UDP</code></td>
</tr>
<tr>
<td>ç½‘ç»œå±‚ - <code>Network Layer</code></td>
<td>å†³å®šæ•°æ®çš„è·¯å¾„é€‰æ‹©å’Œè½¬å¯„ï¼Œå°†ç½‘ç»œè¡¨å¤´ï¼ˆ<code>NH</code>ï¼‰åŠ è‡³æ•°æ®åŒ…ï¼Œä»¥å½¢æˆåˆ†ç»„ã€‚åœ¨æºå’Œç»ˆç‚¹ä¹‹é—´å»ºç«‹è¿æ¥</td>
<td><code>IPv4</code>ã€<code>IPv6</code></td>
</tr>
<tr>
<td>æ•°æ®é“¾è·¯å±‚ - <code>Data Link Layer</code></td>
<td>ä¸åŒçš„æ•°æ®é“¾è·¯å±‚å®šä¹‰äº†ä¸åŒçš„ç½‘ç»œå’Œåè®®ï¼ŒåŒ…æ‹¬ç½‘ç»œå¯»å€ã€é”™è¯¯ä¾¦æµ‹å’Œæ”¹é”™ã€‚åˆ†ä¸ºé€»è¾‘é“¾è·¯æ§åˆ¶å’Œä»‹è´¨è®¿é—®æ§åˆ¶ä¸¤ä¸ªå­å±‚</td>
<td><code>ARP</code>ã€<code>RARP</code></td>
</tr>
<tr>
<td>ç‰©ç†å±‚ - <code>Physical Layer</code></td>
<td>å±€éƒ¨å±€åŸŸç½‘ä¸Šä¼ é€æ•°æ®å¸§ã€‚å°†ä¿¡æ¯ç¼–ç æˆç”µæµè„‰å†²æˆ–å…¶å®ƒä¿¡å·ç”¨äºç½‘ä¸Šä¼ è¾“</td>
<td><code>IEEE 802</code>ã€<br><code>IEEE 802.2</code></td>
</tr>
</tbody>
</table>
<p><img src="https://inotes.oss-cn-beijing.aliyuncs.com/network/201812/basic-osi-model.gif" alt="basic-osi-model.gif"></p>
<h1 id="TCP-æŠ¥æ–‡æ ¼å¼"><a href="#TCP-æŠ¥æ–‡æ ¼å¼" class="headerlink" title="TCP æŠ¥æ–‡æ ¼å¼"></a>TCP æŠ¥æ–‡æ ¼å¼</h1><h2 id="åºå·"><a href="#åºå·" class="headerlink" title="åºå·"></a>åºå·</h2><p>åºå· - <code>Sequence Number</code>ï¼š<code>Seq</code> åºå·ï¼Œå  <code>32</code> ä½ï¼Œç”¨æ¥æ ‡è¯†ä» <code>TCP</code> æºç«¯å‘ç›®çš„ç«¯å‘é€çš„å­—èŠ‚æµï¼Œå‘èµ·æ–¹å‘é€æ•°æ®æ—¶å¯¹æ­¤è¿›è¡Œæ ‡è®°ã€‚</p>
<h2 id="ç¡®è®¤åºå·"><a href="#ç¡®è®¤åºå·" class="headerlink" title="ç¡®è®¤åºå·"></a>ç¡®è®¤åºå·</h2><p>ç¡®è®¤åºå·ï¼Œä¹Ÿç§°åº”ç­”å· - <code>Acknowledgment Number</code>ï¼š<code>Ack</code> åºå·ï¼Œå  <code>32</code> ä½ï¼Œåªæœ‰ <code>ACK</code> æ ‡å¿—ä½ä¸º <code>1</code> æ—¶ï¼Œç¡®è®¤åºå·å­—æ®µæ‰æœ‰æ•ˆï¼Œ<code>Ack=Seq+1</code></p>
<h2 id="æ ‡å¿—ä½"><a href="#æ ‡å¿—ä½" class="headerlink" title="æ ‡å¿—ä½"></a>æ ‡å¿—ä½</h2><ul>
<li><code>SYN</code> - <code>Synchronize Sequence Numbers</code>ï¼ŒåŒæ­¥æ ‡å¿—ï¼šå‘èµ·ä¸€èµ·æ–°è¿æ¥ï¼Œè¯¥æ ‡å¿—ä»…åœ¨ä¸‰æ¬¡æ¡æ‰‹å»ºç«‹ <code>TCP</code> è¿æ¥æ—¶æœ‰æ•ˆ</li>
<li><code>ACK</code> - <code>Acknowledgement Number</code>ï¼Œç¡®è®¤æ ‡å¿—ï¼šç¡®è®¤åºå·æœ‰æ•ˆ</li>
<li><code>RST</code> - <code>Reset</code>ï¼Œå¤ä½æ ‡å¿—ï¼šé‡ç½®è¿æ¥</li>
<li><code>URG</code> - <code>Urgent Pointer</code>ï¼Œç´§æ€¥æŒ‡é’ˆæ ‡å¿—ï¼šç´§æ€¥æŒ‡é’ˆæœ‰æ•ˆ</li>
<li><code>PSH</code> - <code>Push</code>ï¼Œæ¨æ ‡å¿—ï¼šæ¥æ”¶æ–¹åº”è¯¥å°½å¿«å°†è¿™ä¸ªæŠ¥æ–‡äº¤ç»™åº”ç”¨å±‚</li>
<li><code>FIN</code> - <code>Finish</code>ï¼Œç»“æŸæ ‡å¿—ï¼šé‡Šæ”¾ä¸€ä¸ªè¿æ¥</li>
</ul>
<h1 id="æŠ“åŒ…å·¥å…·"><a href="#æŠ“åŒ…å·¥å…·" class="headerlink" title="æŠ“åŒ…å·¥å…·"></a>æŠ“åŒ…å·¥å…·</h1><blockquote>
<p><a href="https://www.wireshark.org/#download"><code>Wireshark</code></a></p>
</blockquote>
<h2 id="å°åŒ…è¯¦ç»†ä¿¡æ¯"><a href="#å°åŒ…è¯¦ç»†ä¿¡æ¯" class="headerlink" title="å°åŒ…è¯¦ç»†ä¿¡æ¯"></a>å°åŒ…è¯¦ç»†ä¿¡æ¯</h2><ul>
<li><code>Frame</code>ï¼šç‰©ç†å±‚çš„æ•°æ®å¸§æ¦‚å†µ</li>
<li><code>Ethernet II</code>ï¼šæ•°æ®é“¾è·¯å±‚ä»¥å¤ªç½‘å¸§å¤´éƒ¨ä¿¡æ¯</li>
<li><code>Internet Protocol Version 4</code>ï¼šäº’è”ç½‘å±‚ <code>IP</code> åŒ…å¤´éƒ¨ä¿¡æ¯</li>
<li><code>Transmission Control Protocol</code>ï¼šä¼ è¾“å±‚Tçš„æ•°æ®æ®µå¤´éƒ¨ä¿¡æ¯ï¼Œæ­¤å¤„æ˜¯ <code>TCP</code></li>
<li><code>Hypertext Transfer Protocol</code>ï¼šåº”ç”¨å±‚çš„ä¿¡æ¯ï¼Œæ­¤å¤„æ˜¯ <code>HTTP</code></li>
</ul>
<h2 id="Wireshark-ä¸å¯¹åº”çš„-OSI-æ¨¡å‹"><a href="#Wireshark-ä¸å¯¹åº”çš„-OSI-æ¨¡å‹" class="headerlink" title="Wireshark ä¸å¯¹åº”çš„ OSI æ¨¡å‹"></a>Wireshark ä¸å¯¹åº”çš„ OSI æ¨¡å‹</h2><table>
<thead>
<tr>
<th><code>Wireshark</code></th>
<th><code>OSI</code></th>
<th><code>Protocol</code></th>
</tr>
</thead>
<tbody>
<tr>
<td><code>Hypertext Transfer Protocol</code></td>
<td>åº”ç”¨å±‚ - <code>Application Layer</code></td>
<td><code>HTTP</code>ã€<code>FTP</code>ã€<br><code>TFTP</code>ã€<code>SMTP</code>ã€<br><code>SNMP</code>ã€<code>DNS</code></td>
</tr>
<tr>
<td><code>Transmission Control Protocol</code></td>
<td>ä¼ è¾“å±‚ - <code>Transport Layer</code></td>
<td><code>TCP</code>ã€<code>UDP</code>ï¼Œ<br>æ•°æ®åŒ…ä¸€æ—¦ç¦»å¼€ç½‘å¡å³è¿›å…¥ç½‘ç»œä¼ è¾“å±‚</td>
</tr>
<tr>
<td><code>Internet Protocol Version 4</code></td>
<td>ç½‘ç»œå±‚ - <code>Network Layer</code></td>
<td><code>ICMP</code>ã€<code>IGMP</code>ã€<br><code>IPv4/IPv6</code>ã€<br><code>ARP</code>ã€<code>RARP</code></td>
</tr>
<tr>
<td><code>Ethernet II</code></td>
<td>æ•°æ®é“¾è·¯å±‚ - <code>Data Link Layer</code></td>
<td></td>
</tr>
<tr>
<td><code>Frame</code></td>
<td>ç‰©ç†å±‚ - <code>Physical Layer</code></td>
<td><br></td>
</tr>
</tbody>
</table>
<h1 id="ä¸‰æ¬¡æ¡æ‰‹"><a href="#ä¸‰æ¬¡æ¡æ‰‹" class="headerlink" title="ä¸‰æ¬¡æ¡æ‰‹"></a>ä¸‰æ¬¡æ¡æ‰‹</h1><blockquote>
<ul>
<li><a href="https://www.zhihu.com/question/24853633">TCP ä¸ºä»€ä¹ˆæ˜¯ä¸‰æ¬¡æ¡æ‰‹ï¼Œè€Œä¸æ˜¯ä¸¤æ¬¡æˆ–å››æ¬¡ï¼Ÿ</a></li>
<li>ä¸è¦å°†ç¡®è®¤åºå· <code>Ack</code> ä¸æ ‡å¿—ä½ä¸­çš„ <code>ACK</code> ææ··äº†</li>
<li>ç¡®è®¤æ–¹ <code>Ack</code> ç­‰äºå‘èµ·æ–¹ <code>Seq+1</code>ï¼Œä¸¤ç«¯é…å¯¹</li>
</ul>
</blockquote>
<p><img src="https://inotes.oss-cn-beijing.aliyuncs.com/network/201812/basic-tcp-handshake.gif" alt="å»ºç«‹ TCP éœ€è¦ä¸‰æ¬¡æ¡æ‰‹æ‰èƒ½å»ºç«‹ï¼Œè€Œæ–­å¼€è¿æ¥åˆ™éœ€è¦å››æ¬¡æ¡æ‰‹"></p>
<h2 id="è¿‡æ»¤è¯·æ±‚"><a href="#è¿‡æ»¤è¯·æ±‚" class="headerlink" title="è¿‡æ»¤è¯·æ±‚"></a>è¿‡æ»¤è¯·æ±‚</h2><p><img src="https://inotes.oss-cn-beijing.aliyuncs.com/network/201812/basic-wireshark-filter.jpg" alt="basic-wireshark-filter.jpg"></p>
<h2 id="å®šä½åˆ°ä¸‰æ¬¡æ¡æ‰‹çš„-TCP-æµ"><a href="#å®šä½åˆ°ä¸‰æ¬¡æ¡æ‰‹çš„-TCP-æµ" class="headerlink" title="å®šä½åˆ°ä¸‰æ¬¡æ¡æ‰‹çš„ TCP æµ"></a>å®šä½åˆ°ä¸‰æ¬¡æ¡æ‰‹çš„ TCP æµ</h2><p><img src="https://inotes.oss-cn-beijing.aliyuncs.com/network/201812/basic-wireshark-three-handshake.jpg" alt="basic-wireshark-three-handshake.jpg"></p>
<h2 id="ä¸‰æ¬¡æ¡æ‰‹è¯¦æƒ…"><a href="#ä¸‰æ¬¡æ¡æ‰‹è¯¦æƒ…" class="headerlink" title="ä¸‰æ¬¡æ¡æ‰‹è¯¦æƒ…"></a>ä¸‰æ¬¡æ¡æ‰‹è¯¦æƒ…</h2><h3 id="ç¬¬ä¸€æ¬¡æ¡æ‰‹"><a href="#ç¬¬ä¸€æ¬¡æ¡æ‰‹" class="headerlink" title="ç¬¬ä¸€æ¬¡æ¡æ‰‹"></a>ç¬¬ä¸€æ¬¡æ¡æ‰‹</h3><p><img src="https://inotes.oss-cn-beijing.aliyuncs.com/network/201812/basic-wireshark-first.jpg" alt="basic-wireshark-first.jpg"></p>
<p><code>Client</code> å°†æ ‡å¿—ä½ <code>SYN</code> ç½®ä¸º <code>1</code>ï¼Œéšæœºäº§ç”Ÿä¸€ä¸ªå€¼ <code>Seq=X</code>ï¼Œå¹¶å°†è¯¥æ•°æ®åŒ…å‘é€ç»™ <code>Server</code>ï¼Œ<code>Client</code> è¿›å…¥ <code>SYN_SENT</code> çŠ¶æ€ï¼Œç­‰å¾… <code>Server</code> ç¡®è®¤</p>
<h3 id="ç¬¬äºŒæ¬¡æ¡æ‰‹"><a href="#ç¬¬äºŒæ¬¡æ¡æ‰‹" class="headerlink" title="ç¬¬äºŒæ¬¡æ¡æ‰‹"></a>ç¬¬äºŒæ¬¡æ¡æ‰‹</h3><p><img src="https://inotes.oss-cn-beijing.aliyuncs.com/network/201812/basic-wireshark-second.jpg" alt="basic-wireshark-second.jpg"></p>
<p><code>Server</code> æ”¶åˆ°æ•°æ®åŒ…åç”±æ ‡å¿—ä½ <code>SYN</code> ä¸º <code>1</code> çŸ¥é“ <code>Client</code> è¯·æ±‚å»ºç«‹è¿æ¥ï¼Œ<code>Server</code> å°†æ ‡å¿—ä½ <code>SYN</code> å’Œ <code>ACK</code> éƒ½ç½®ä¸º <code>1</code>ï¼Œ<code>Ack=X+1</code>ï¼Œéšæœºäº§ç”Ÿä¸€ä¸ªå€¼ <code>Seq=Y</code>ï¼Œå¹¶å°†è¯¥æ•°æ®åŒ…å‘é€ç»™ <code>Client</code> ä»¥ç¡®è®¤è¿æ¥è¯·æ±‚ï¼Œ<code>Server</code> è¿›å…¥ <code>SYN_RCVD</code> çŠ¶æ€</p>
<h3 id="ç¬¬ä¸‰æ¬¡æ¡æ‰‹"><a href="#ç¬¬ä¸‰æ¬¡æ¡æ‰‹" class="headerlink" title="ç¬¬ä¸‰æ¬¡æ¡æ‰‹"></a>ç¬¬ä¸‰æ¬¡æ¡æ‰‹</h3><p><img src="https://inotes.oss-cn-beijing.aliyuncs.com/network/201812/basic-wireshark-third.jpg" alt="basic-wireshark-third.jpg"></p>
<p><code>Client</code> æ”¶åˆ°ç¡®è®¤åï¼Œæ£€æŸ¥ <code>Ack</code> æ˜¯å¦ä¸º <code>X+1</code>ï¼Œ<code>ACK</code> æ˜¯å¦ç½®ä¸º <code>1</code>ï¼Œå¦‚æœæ­£ç¡®åˆ™å°†æ ‡å¿—ä½ <code>ACK</code> ç½®ä¸º <code>1</code>ï¼Œ<code>Ack=Y+1</code>ï¼Œå¹¶å°†æ•°æ®åŒ…å‘é€ç»™ <code>Server</code>ï¼Œ<code>Server</code> æ£€æŸ¥ <code>Ack</code> æ˜¯å¦ä¸º <code>Y+1</code>ï¼Œ<code>ACK</code> æ˜¯å¦ä¸º <code>1</code>ï¼Œå¦‚æœæ­£ç¡®åˆ™è¿æ¥å»ºç«‹æˆåŠŸï¼Œ<code>Client</code> å’Œ <code>Server</code> è¿›å…¥ <code>ESTABLISHED</code> çŠ¶æ€ï¼Œå®Œæˆä¸‰æ¬¡æ¡æ‰‹ï¼Œéšå <code>Client</code> ä¸ <code>Server</code> ä¹‹é—´å¯ä»¥å¼€å§‹ä¼ è¾“æ•°æ®äº†</p>
<h1 id="SYN-æ”»å‡»"><a href="#SYN-æ”»å‡»" class="headerlink" title="SYN æ”»å‡»"></a>SYN æ”»å‡»</h1><p>åœ¨ä¸‰æ¬¡æ¡æ‰‹è¿‡ç¨‹ä¸­ï¼Œ<code>Server</code> å‘é€ <code>SYN-ACK</code> ä¹‹åï¼Œæ”¶åˆ° <code>Client</code> çš„ <code>ACK</code> ä¹‹å‰çš„ <code>TCP</code> è¿æ¥ç§°ä¸ºåŠè¿æ¥ï¼ˆ<code>half-open connect</code>ï¼‰ï¼Œæ­¤æ—¶ <code>Server</code> å¤„äº <code>SYN_RCVD</code> çŠ¶æ€ï¼Œå½“æ”¶åˆ° <code>ACK</code> åï¼Œ<code>Server</code> è½¬å…¥ <code>ESTABLISHED</code> çŠ¶æ€. <code>SYN</code> æ”»å‡»å°±æ˜¯ <code>Client</code> åœ¨çŸ­æ—¶é—´å†…ä¼ªé€ å¤§é‡ä¸å­˜åœ¨çš„ <code>IP</code> åœ°å€ï¼Œå¹¶å‘ <code>Server</code> ä¸æ–­åœ°å‘é€ <code>SYN</code> åŒ…ï¼Œ<code>Server</code> å›å¤ç¡®è®¤åŒ…ï¼Œå¹¶ç­‰å¾… <code>Client</code> çš„ç¡®è®¤ï¼Œç”±äºæºåœ°å€æ˜¯ä¸å­˜åœ¨çš„ï¼Œå› æ­¤ï¼Œ<code>Server</code> éœ€è¦ä¸æ–­é‡å‘ç›´è‡³è¶…æ—¶ï¼Œè¿™äº›ä¼ªé€ çš„ <code>SYN</code> åŒ…å°†é•¿æ—¶é—´å ç”¨æœªè¿æ¥é˜Ÿåˆ—ï¼Œå¯¼è‡´æ­£å¸¸çš„ <code>SYN</code> è¯·æ±‚å› ä¸ºé˜Ÿåˆ—æ»¡è€Œè¢«ä¸¢å¼ƒï¼Œä»è€Œå¼•èµ·ç½‘ç»œå µå¡ç”šè‡³ç³»ç»Ÿç˜«ç—ª. <code>SYN</code> æ”»å‡»æ—¶ä¸€ç§å…¸å‹çš„ <code>DDOS</code> æ”»å‡»ï¼Œæ£€æµ‹ <code>SYN</code> æ”»å‡»çš„æ–¹å¼éå¸¸ç®€å•ï¼Œå³å½“ <code>Server</code> ä¸Šæœ‰å¤§é‡åŠè¿æ¥çŠ¶æ€ä¸”æº <code>IP</code> åœ°å€æ˜¯éšæœºçš„ï¼Œåˆ™å¯ä»¥æ–­å®šé­åˆ° <code>SYN</code> æ”»å‡»äº†ã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// æŸ¥çœ‹ SYN_RECV çŠ¶æ€</span><br><span class="line">$ netstat -nap | grep SYN_RECV</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>basic</category>
      </categories>
      <tags>
        <tag>basic</tag>
      </tags>
  </entry>
  <entry>
    <title>ä½¿ç”¨ Satis æ­å»º Composer ç§æœ‰æº</title>
    <url>/2019/06/22/composer-satis-private-source/</url>
    <content><![CDATA[<p><img src="/images/2019/201906221121.jpg" alt="201906221121.jpg"></p>
<p>æœ‰æ—¶å€™æˆ‘ä»¬ä¸æƒ³å…¬å¼€ä¸šåŠ¡å¼€å‘ä¸­å°è£…çš„ä¸€äº›å·¥å…·æˆ–è€…å¼€å‘åŒ…ï¼Œæƒ³é€šè¿‡æ­å»ºè‡ªå·±ä¸“å±çš„ Composer æºæ¥å®‰è£…è¿™äº›åŒ…ï¼Œé‚£ä¹ˆå°±å¾—ä½¿ç”¨ Satis è¿™ç§å·¥å…·æ­å»º Composer ç§æœ‰æºï¼Œå½“ç„¶ï¼ŒSatis å¹¶ä¸æ˜¯å”¯ä¸€çš„æ–¹å¼ã€‚</p>
<span id="more"></span>
<h2 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h2><p>Satis æ˜¯ä¸€ä¸ªé™æ€çš„ Composer åº“ç”Ÿæˆå™¨ã€‚å®ƒæœ‰ç‚¹åƒ packagist çš„è¶…è½»é‡çº§ã€åŸºäºé™æ€æ–‡ä»¶çš„ç‰ˆæœ¬ï¼Œå¯ä»¥ç”¨æ¥æ‰˜ç®¡å…¬å¸çš„ç§æœ‰åŒ…æˆ–è‡ªå·±çš„åŒ…çš„å…ƒæ•°æ®ã€‚å®ƒåŸºæœ¬ä¸Šæ˜¯ä¸€ä¸ªå¾®å‹å®¹å™¨ã€‚å¯ä»¥ä» <a href="https://github.com/composer/satis">GitHub</a> è·å–å®ƒï¼Œæˆ–è€…é€šè¿‡å‘½ä»¤è¡Œç•Œé¢å®‰è£…ã€‚</p>
<h2 id="èµ·æ­¥"><a href="#èµ·æ­¥" class="headerlink" title="èµ·æ­¥"></a>èµ·æ­¥</h2><h3 id="å‡†å¤‡å®‰è£…åŒ…"><a href="#å‡†å¤‡å®‰è£…åŒ…" class="headerlink" title="å‡†å¤‡å®‰è£…åŒ…"></a>å‡†å¤‡å®‰è£…åŒ…</h3><p>æœ¬æ–‡ä¸­ä»¥æ‰˜ç®¡åˆ° <a href="https://gitee.com/">ç äº‘</a> ä¸Šçš„é¡¹ç›®ä¸ºä¾‹ï¼ˆç›¸å…³é…ç½®æœ¬æ–‡æš‚ç•¥ï¼‰ã€‚</p>
<h3 id="åˆ›å»ºé¡¹ç›®"><a href="#åˆ›å»ºé¡¹ç›®" class="headerlink" title="åˆ›å»ºé¡¹ç›®"></a>åˆ›å»ºé¡¹ç›®</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// åˆ‡æ¢æŒ‡å®šç›®å½•</span><br><span class="line">$ <span class="built_in">cd</span> ~/Codes/laravel</span><br><span class="line"></span><br><span class="line">// ç”Ÿæˆé¡¹ç›®éª¨æ¶</span><br><span class="line">$ composer create-project composer/satis package.test --stability=dev --keep-vcs</span><br><span class="line">Installing composer/satis (dev-master 735f6d4e0d933e3bd0263f96865a0e50b80f4257)</span><br><span class="line">  - Installing composer/satis (dev-master 735f6d4): Cloning 735f6d4e0d from cache</span><br><span class="line">Created project <span class="keyword">in</span> package.test</span><br><span class="line">Loading composer repositories with package information</span><br><span class="line">Installing dependencies (including require-dev) from lock file</span><br><span class="line">Package operations: 55 installs, 0 updates, 0 removals</span><br><span class="line">  - Installing symfony/process (v4.2.7): Loading from cache</span><br><span class="line">  - Installing symfony/finder (v4.2.7): Loading from cache</span><br><span class="line">  - Installing symfony/polyfill-ctype (v1.11.0): Loading from cache</span><br><span class="line">  - Installing symfony/filesystem (v4.2.7): Loading from cache</span><br><span class="line">  - Installing symfony/polyfill-mbstring (v1.11.0): Loading from cache</span><br><span class="line">  - Installing symfony/contracts (v1.0.2): Loading from cache</span><br><span class="line">  - Installing symfony/console (v4.2.7): Loading from cache</span><br><span class="line">  - Installing seld/phar-utils (1.0.1): Loading from cache</span><br><span class="line">  - Installing seld/jsonlint (1.7.1): Loading from cache</span><br><span class="line">  - Installing psr/<span class="built_in">log</span> (1.1.0): Loading from cache</span><br><span class="line">  - Installing justinrainbow/json-schema (5.2.8): Loading from cache</span><br><span class="line">  - Installing composer/xdebug-handler (1.3.2): Loading from cache</span><br><span class="line">  - Installing composer/spdx-licenses (1.5.1): Loading from cache</span><br><span class="line">  - Installing composer/semver (1.5.0): Loading from cache</span><br><span class="line">  - Installing composer/ca-bundle (1.1.4): Loading from cache</span><br><span class="line">  - Installing composer/composer (1.8.5): Loading from cache</span><br><span class="line">  - Installing twig/twig (v2.8.1): Loading from cache</span><br><span class="line">  - Installing doctrine/lexer (v1.0.1): Loading from cache</span><br><span class="line">  - Installing symfony/stopwatch (v4.2.7): Loading from cache</span><br><span class="line">  - Installing symfony/polyfill-php72 (v1.11.0): Loading from cache</span><br><span class="line">  - Installing paragonie/random_compat (v9.99.99): Loading from cache</span><br><span class="line">  - Installing symfony/polyfill-php70 (v1.11.0): Loading from cache</span><br><span class="line">  - Installing symfony/options-resolver (v4.2.7): Loading from cache</span><br><span class="line">  - Installing symfony/event-dispatcher (v4.2.7): Loading from cache</span><br><span class="line">  - Installing php-cs-fixer/diff (v1.3.0): Loading from cache</span><br><span class="line">  - Installing doctrine/annotations (v1.6.1): Loading from cache</span><br><span class="line">  - Installing friendsofphp/php-cs-fixer (v2.14.2): Loading from cache</span><br><span class="line">  - Installing mikey179/vfsstream (v1.6.6): Loading from cache</span><br><span class="line">  - Installing webmozart/assert (1.4.0): Loading from cache</span><br><span class="line">  - Installing phpdocumentor/reflection-common (1.0.1): Loading from cache</span><br><span class="line">  - Installing phpdocumentor/type-resolver (0.4.0): Loading from cache</span><br><span class="line">  - Installing phpdocumentor/reflection-docblock (4.3.0): Loading from cache</span><br><span class="line">  - Installing phpunit/php-token-stream (3.0.1): Loading from cache</span><br><span class="line">  - Installing sebastian/version (2.0.1): Loading from cache</span><br><span class="line">  - Installing sebastian/resource-operations (2.0.1): Loading from cache</span><br><span class="line">  - Installing sebastian/recursion-context (3.0.0): Loading from cache</span><br><span class="line">  - Installing sebastian/object-reflector (1.1.1): Loading from cache</span><br><span class="line">  - Installing sebastian/object-enumerator (3.0.3): Loading from cache</span><br><span class="line">  - Installing sebastian/global-state (3.0.0): Loading from cache</span><br><span class="line">  - Installing sebastian/exporter (3.1.0): Loading from cache</span><br><span class="line">  - Installing sebastian/environment (4.2.0): Loading from cache</span><br><span class="line">  - Installing sebastian/diff (3.0.2): Loading from cache</span><br><span class="line">  - Installing sebastian/comparator (3.0.2): Loading from cache</span><br><span class="line">  - Installing phpunit/php-timer (2.1.1): Loading from cache</span><br><span class="line">  - Installing phpunit/php-text-template (1.2.1): Loading from cache</span><br><span class="line">  - Installing phpunit/php-file-iterator (2.0.2): Loading from cache</span><br><span class="line">  - Installing theseer/tokenizer (1.1.2): Loading from cache</span><br><span class="line">  - Installing sebastian/code-unit-reverse-lookup (1.0.1): Loading from cache</span><br><span class="line">  - Installing phpunit/php-code-coverage (7.0.3): Loading from cache</span><br><span class="line">  - Installing doctrine/instantiator (1.2.0): Loading from cache</span><br><span class="line">  - Installing phpspec/prophecy (1.8.0): Loading from cache</span><br><span class="line">  - Installing phar-io/version (2.0.1): Loading from cache</span><br><span class="line">  - Installing phar-io/manifest (1.0.3): Loading from cache</span><br><span class="line">  - Installing myclabs/deep-copy (1.9.1): Loading from cache</span><br><span class="line">  - Installing phpunit/phpunit (8.1.3): Loading from cache</span><br><span class="line">symfony/contracts suggests installing psr/cache (When using the Cache contracts)</span><br><span class="line">symfony/contracts suggests installing psr/container (When using the Service contracts)</span><br><span class="line">symfony/contracts suggests installing symfony/cache-contracts-implementation</span><br><span class="line">symfony/contracts suggests installing symfony/service-contracts-implementation</span><br><span class="line">symfony/contracts suggests installing symfony/translation-contracts-implementation</span><br><span class="line">symfony/console suggests installing symfony/lock</span><br><span class="line">paragonie/random_compat suggests installing ext-libsodium (Provides a modern crypto API that can be used to generate random bytes.)</span><br><span class="line">symfony/event-dispatcher suggests installing symfony/dependency-injection</span><br><span class="line">symfony/event-dispatcher suggests installing symfony/http-kernel</span><br><span class="line">friendsofphp/php-cs-fixer suggests installing php-cs-fixer/phpunit-constraint-isidenticalstring (For IsIdenticalString constraint.)</span><br><span class="line">friendsofphp/php-cs-fixer suggests installing php-cs-fixer/phpunit-constraint-xmlmatchesxsd (For XmlMatchesXsd constraint.)</span><br><span class="line">sebastian/global-state suggests installing ext-uopz (*)</span><br><span class="line">phpunit/phpunit suggests installing phpunit/php-invoker (^2.0)</span><br><span class="line">Generating <span class="built_in">autoload</span> files</span><br></pre></td></tr></table></figure>
<h3 id="ç§æœ‰æºé¡¹ç›®é…ç½®"><a href="#ç§æœ‰æºé¡¹ç›®é…ç½®" class="headerlink" title="ç§æœ‰æºé¡¹ç›®é…ç½®"></a>ç§æœ‰æºé¡¹ç›®é…ç½®</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// åˆ‡æ¢åˆ°é¡¹ç›®ç›®å½•</span><br><span class="line">$ <span class="built_in">cd</span> ~/Codes/laravel/package.test</span><br><span class="line"></span><br><span class="line">// åˆ›å»º satis.json æ–‡ä»¶ï¼Œå¹¶å¡«å…¥ä»¥ä¸‹å†…å®¹</span><br><span class="line">$ touch satis.json</span><br><span class="line">&#123;</span><br><span class="line">    <span class="string">&quot;name&quot;</span>: <span class="string">&quot;xiaohe/packages&quot;</span>,</span><br><span class="line">    <span class="string">&quot;description&quot;</span>: <span class="string">&quot;Xiaohe PHP Development Package&quot;</span>,</span><br><span class="line">    <span class="string">&quot;homepage&quot;</span>: <span class="string">&quot;http://package.test&quot;</span>,</span><br><span class="line">    <span class="string">&quot;repositories&quot;</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="string">&quot;type&quot;</span>: <span class="string">&quot;vcs&quot;</span>,</span><br><span class="line">            <span class="string">&quot;url&quot;</span>: <span class="string">&quot;git@gitee.com:xiaoheinc/laravel-sms.git&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">    ],</span><br><span class="line">    <span class="string">&quot;repositories-dep&quot;</span>: [],</span><br><span class="line">    <span class="string">&quot;output-dir&quot;</span>: <span class="string">&quot;public&quot;</span>,</span><br><span class="line">    <span class="string">&quot;require-all&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="string">&quot;require&quot;</span>: &#123;</span><br><span class="line">        <span class="string">&quot;xiaohe/laravel-sms&quot;</span>: <span class="string">&quot;dev-master&quot;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">&quot;require-dependencies&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="string">&quot;require-dev-dependencies&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="string">&quot;output-html&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="string">&quot;config&quot;</span>: &#123;</span><br><span class="line">        <span class="string">&quot;secure-http&quot;</span>: <span class="literal">false</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="ç§æœ‰æºç”Ÿæˆ"><a href="#ç§æœ‰æºç”Ÿæˆ" class="headerlink" title="ç§æœ‰æºç”Ÿæˆ"></a>ç§æœ‰æºç”Ÿæˆ</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ php -c ./php-cli.ini bin/satis build -vv --skip-errors satis.json public/</span><br><span class="line">Scanning packages</span><br><span class="line">Reading composer.json of xiaohe/laravel-sms (master)</span><br><span class="line">Importing branch master (dev-master)</span><br><span class="line">Selected xiaohe/laravel-sms (dev-master)</span><br><span class="line">wrote packages to public//include/all<span class="variable">$979ee73568f8982cf167859ee4a0d1d7e8679915</span>.json</span><br><span class="line">Writing packages.json</span><br><span class="line">Pruning include directories</span><br><span class="line">Deleted public//include/all<span class="variable">$ab346115d9b4c32b0da1504f27e7ed1ec29bbf73</span>.json</span><br><span class="line">Writing web view</span><br></pre></td></tr></table></figure>
<h3 id="è®©ç§æœ‰æºé¡¹ç›®å¯è®¿é—®"><a href="#è®©ç§æœ‰æºé¡¹ç›®å¯è®¿é—®" class="headerlink" title="è®©ç§æœ‰æºé¡¹ç›®å¯è®¿é—®"></a>è®©ç§æœ‰æºé¡¹ç›®å¯è®¿é—®</h3><p>é…ç½®ç§æœ‰æºé¡¹ç›®ï¼Œå¹¶é‡å¯ Nginx æœåŠ¡å™¨ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">server &#123;</span><br><span class="line"></span><br><span class="line">    listen 80;</span><br><span class="line">    listen [::]:80;</span><br><span class="line"></span><br><span class="line">    <span class="comment"># For https</span></span><br><span class="line">    <span class="comment"># listen 443 ssl;</span></span><br><span class="line">    <span class="comment"># listen [::]:443 ssl ipv6only=on;</span></span><br><span class="line">    <span class="comment"># ssl_certificate /etc/nginx/ssl/default.crt;</span></span><br><span class="line">    <span class="comment"># ssl_certificate_key /etc/nginx/ssl/default.key;</span></span><br><span class="line"></span><br><span class="line">    server_name package.test;</span><br><span class="line">    root /var/www/package.test/public;</span><br><span class="line">    index index.php index.html index.htm;</span><br><span class="line"></span><br><span class="line">    location ~ \.php$ &#123;</span><br><span class="line">        try_files <span class="variable">$uri</span> /index.php =404;</span><br><span class="line">        fastcgi_pass php-upstream;</span><br><span class="line">        fastcgi_index index.php;</span><br><span class="line">        fastcgi_buffers 16 16k;</span><br><span class="line">        fastcgi_buffer_size 32k;</span><br><span class="line">        fastcgi_param SCRIPT_FILENAME $document_root<span class="variable">$fastcgi_script_name</span>;</span><br><span class="line">        <span class="comment"># fixes timeouts</span></span><br><span class="line">        fastcgi_read_timeout 600;</span><br><span class="line">        include fastcgi_params;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    location ~ /\.ht &#123;</span><br><span class="line">        deny all;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    error_log /var/<span class="built_in">log</span>/nginx/package-error.log;</span><br><span class="line">    access_log /var/<span class="built_in">log</span>/nginx/package-access.log;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è®¿é—®ç§æœ‰æºé¡¹ç›®ï¼š</p>
<p><img src="https://inotes.oss-cn-beijing.aliyuncs.com/php/201906/composer-package.jpg" alt="composer-package.jpg"></p>
<h2 id="ç§æœ‰æºä½¿ç”¨"><a href="#ç§æœ‰æºä½¿ç”¨" class="headerlink" title="ç§æœ‰æºä½¿ç”¨"></a>ç§æœ‰æºä½¿ç”¨</h2><h3 id="é¡¹ç›®ä¸­é…ç½®"><a href="#é¡¹ç›®ä¸­é…ç½®" class="headerlink" title="é¡¹ç›®ä¸­é…ç½®"></a>é¡¹ç›®ä¸­é…ç½®</h3><blockquote>
<p>æ­¤å¤„ä»¥ Laravel é¡¹ç›®ä¸ºä¾‹ã€‚</p>
</blockquote>
<p>å°†ä»¥ä¸‹å†…å®¹æ·»åŠ åˆ°é¡¹ç›®çš„ <code>composer.json</code> æ–‡ä»¶ä¸­ï¼š</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    .</span><br><span class="line">    .</span><br><span class="line">    .</span><br><span class="line">    <span class="attr">&quot;repositories&quot;</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;composer&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;url&quot;</span>: <span class="string">&quot;http://package.test/&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="å®‰è£…æµ‹è¯•"><a href="#å®‰è£…æµ‹è¯•" class="headerlink" title="å®‰è£…æµ‹è¯•"></a>å®‰è£…æµ‹è¯•</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ composer require xiaohe/laravel-sms</span><br><span class="line">Warning: Accessing package.test over http <span class="built_in">which</span> is an insecure protocol.</span><br><span class="line">    1/3:        https://packagist.laravel-china.org/p/provider-latest<span class="variable">$dfdf6692476db7cc6ba617894e2d61d7b41970cc0e5e2aa0d79f14e5c0c0b526</span>.json</span><br><span class="line">    2/3:        https://packagist.laravel-china.org/p/provider-2018-10<span class="variable">$4bfb9a1a71d8062fdf36b1dd4d35635da47e70cf04f2d8978668127e70c43dcf</span>.json</span><br><span class="line">    3/3:        https://packagist.laravel-china.org/p/provider-2019-04<span class="variable">$e201694c08014f9b374db1cbcfc61a971eb80d8965069a87a7d557efb338aaf6</span>.json</span><br><span class="line">    Finished: success: 3, skipped: 0, failure: 0, total: 3</span><br><span class="line">Using version dev-master <span class="keyword">for</span> xiaohe/laravel-sms</span><br><span class="line">./composer.json has been updated</span><br><span class="line">Warning: Accessing package.test over http <span class="built_in">which</span> is an insecure protocol.</span><br><span class="line">Loading composer repositories with package information</span><br><span class="line">Updating dependencies (including require-dev)</span><br><span class="line">Package operations: 1 install, 0 updates, 0 removals</span><br><span class="line">  - Installing xiaohe/laravel-sms (dev-master 9fdc80d): Cloning 9fdc80d63d from cache</span><br><span class="line">Writing lock file</span><br><span class="line">Generating optimized <span class="built_in">autoload</span> files</span><br><span class="line">&gt; Illuminate\Foundation\ComposerScripts::postAutoloadDump</span><br><span class="line">&gt; @php artisan package:discover --ansi</span><br><span class="line">Discovered Package: barryvdh/laravel-ide-helper</span><br><span class="line">Discovered Package: beyondcode/laravel-dump-server</span><br><span class="line">Discovered Package: dingo/api</span><br><span class="line">Discovered Package: fideloper/proxy</span><br><span class="line">Discovered Package: intervention/image</span><br><span class="line">Discovered Package: jenssegers/mongodb</span><br><span class="line">Discovered Package: laravel/horizon</span><br><span class="line">Discovered Package: laravel/slack-notification-channel</span><br><span class="line">Discovered Package: laravel/tinker</span><br><span class="line">Discovered Package: liyu/dingo-serializer-switch</span><br><span class="line">Discovered Package: mews/captcha</span><br><span class="line">Discovered Package: nesbot/carbon</span><br><span class="line">Discovered Package: nunomaduro/collision</span><br><span class="line">Discovered Package: nunomaduro/larastan</span><br><span class="line">Discovered Package: nunomaduro/phpinsights</span><br><span class="line">Discovered Package: nwidart/laravel-modules</span><br><span class="line">Discovered Package: tymon/jwt-auth</span><br><span class="line">Discovered Package: xiaohe/laravel-sms</span><br><span class="line">Package manifest generated successfully.</span><br><span class="line">ocramius/package-versions:  Generating version class...</span><br><span class="line">ocramius/package-versions: ...<span class="keyword">done</span> generating version class</span><br></pre></td></tr></table></figure>
<h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><ul>
<li><a href="https://getcomposer.org/doc/articles/handling-private-packages-with-satis.md">Handling private packages</a></li>
<li><a href="https://composer.github.io/satis/">For full private Composer repo use Private Packagist</a></li>
</ul>
]]></content>
      <categories>
        <category>composer</category>
      </categories>
      <tags>
        <tag>php</tag>
        <tag>composer</tag>
      </tags>
  </entry>
  <entry>
    <title>æŠ€æœ¯æœ¯è¯­çŸ¥å¤šå°‘</title>
    <url>/2019/12/05/basic-technical-terms/</url>
    <content><![CDATA[<p><img src="/images/2019/201912051818.jpeg" alt="201912051818.jpeg"></p>
<p>ğŸ§¸ ä½ æ˜¯å¦å’Œæˆ‘ä¸€æ ·åœ¨çœ‹ä¸€äº›æŠ€æœ¯æ–‡ç« æ—¶ï¼Œä½œè€…é€šç¯‡æŠŠä¸€äº›æŠ€æœ¯åè¯ç¼©å†™åŒ–ï¼Œç¢°åˆ°è¿™ç§è¦ä¹ˆæŸ¥é˜…è¦ä¹ˆè·³è¿‡ã€‚é«˜é¢‘å‡ºç°çš„å¯èƒ½è¿˜èƒ½çŒœä¸ªå¤§æ¦‚ï¼Œä½†æ˜¯æ€»æœ‰é‚£ä¹ˆä¸€äº›æ˜¯çŒœä¸ç€ï¼Œè®°ä¸ä½ï¼Œæ²¡è§è¿‡çš„ï¼Œæ­£å¦‚å¾ˆå¤š Linux å‘½ä»¤æˆ–è€… Git å‘½ä»¤ä¸€æ ·ï¼Œéœ€è¦å¼„ä¸ªå°æœ‰å‘½ä»¤å¤§å…¨çš„æ¡Œé¢æˆ–è€…é¼ æ ‡å«ä»¥å¤‡ä¸æ—¶ä¹‹éœ€ã€‚å¦‚æœå¤§è„‘æ˜¯ä¸€å—å†…å­˜ï¼Œæˆ‘å½“ç„¶éœ€è¦ä¸€å—å¾ˆå¤§çš„ç¡¬ç›˜å»è®°å½•å†…å­˜è£…è½½ä¸äº†çš„ä¸œè¥¿ï¼Œè­¬å¦‚ï¼ŒæŠŠè¿™äº›è®°ä¸ä½çš„ä¸œè¥¿è®°å½•èµ·æ¥ã€‚</p>
<span id="more"></span>
<h1 id="åŸºæœ¬"><a href="#åŸºæœ¬" class="headerlink" title="åŸºæœ¬"></a>åŸºæœ¬</h1><table>
<thead>
<tr>
<th>ç®€ç§°</th>
<th>å…¨ç§°</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>ANSI</code></td>
<td><code>American National Standards Institute</code></td>
<td>ç¾å›½å›½å®¶æ ‡å‡†å­¦ä¼š</td>
</tr>
<tr>
<td><code>ASCII</code></td>
<td><code>American Standard Code for Information Interchange</code></td>
<td>ç¾å›½ä¿¡æ¯äº¤æ¢æ ‡å‡†ä»£ç </td>
</tr>
<tr>
<td><code>CPU</code></td>
<td><code>Central Processing Unit</code></td>
<td>ä¸­å¤®å¤„ç†å™¨</td>
</tr>
<tr>
<td><code>EBCDIC</code></td>
<td><code>Extended Binary Coded Decimal Interchange Code</code></td>
<td>æ‰©å¢äºŒè¿›å¼åè¿›äº¤æ¢ç </td>
</tr>
<tr>
<td><code>RAM</code></td>
<td><code>Random Access Memory</code></td>
<td>éšæœºå­˜å–å­˜å‚¨å™¨</td>
</tr>
<tr>
<td><code>ROM</code></td>
<td><code>Read Only Memory</code></td>
<td>åªè¯»å­˜å‚¨å™¨</td>
</tr>
<tr>
<td><code>FAQ</code></td>
<td><code>Frequently Asked Questions</code></td>
<td>å¸¸è§é—®é¢˜é›†</td>
</tr>
<tr>
<td><code>FDD</code></td>
<td><code>Floppy Disk Drive</code></td>
<td>è½¯ç›˜é©±åŠ¨å™¨</td>
</tr>
<tr>
<td><code>GIF</code></td>
<td><code>Graphics Interchange Format</code></td>
<td>å›¾åƒäº’æ¢æ ¼å¼ï¼Œä¸€ç§ä½å›¾å›¾å½¢æ–‡ä»¶æ ¼å¼</td>
</tr>
<tr>
<td><code>GUID</code></td>
<td><code>Globally Unique Identifier</code></td>
<td>å…¨å±€å”¯ä¸€æ ‡è¯†ç¬¦</td>
</tr>
<tr>
<td><code>GUI</code></td>
<td><code>Graphical User Interface</code></td>
<td>å›¾å½¢ç”¨æˆ·ç•Œé¢</td>
</tr>
<tr>
<td><code>GDI</code></td>
<td><code>Graphics Device Interface</code></td>
<td>å›¾å½¢è®¾å¤‡æ¥å£</td>
</tr>
<tr>
<td><code>HDD</code></td>
<td><code>Hard Disk Drive</code></td>
<td>ç¡¬ç›˜é©±åŠ¨å™¨</td>
</tr>
<tr>
<td><code>JPEG</code></td>
<td><code>Joint Photographic Experts Group</code></td>
<td>è”åˆå›¾åƒä¸“å®¶å°ç»„ï¼Œä¸€ç§é’ˆå¯¹ç…§ç‰‡å½±åƒè€Œå¹¿æ³›ä½¿ç”¨çš„æœ‰æŸå‹ç¼©æ ‡å‡†æ–¹æ³•</td>
</tr>
<tr>
<td><code>LSP</code></td>
<td><code>Liskov Substitution Principle</code></td>
<td>é‡Œæ°æ›¿æ¢åŸåˆ™</td>
</tr>
<tr>
<td><code>RESTful</code></td>
<td><code>Representational State Transfer</code></td>
<td>ä¸€ç§æ¶æ„è§„çº¦ï¼Œç¬¦åˆå°±ç§°å…¶ RESTful æ¶æ„</td>
</tr>
<tr>
<td><code>OS</code></td>
<td><code>Operating System</code></td>
<td>æ“ä½œç³»ç»Ÿ</td>
</tr>
<tr>
<td><code>OOA</code></td>
<td><code>Object Oriented Analysis</code></td>
<td>é¢å‘å¯¹è±¡åˆ†ææ–¹æ³•</td>
</tr>
<tr>
<td><code>OOD</code></td>
<td><code>Object Oriented Design</code></td>
<td>é¢å‘å¯¹è±¡è®¾è®¡</td>
</tr>
<tr>
<td><code>OOP</code></td>
<td><code>Object Oriented Programming</code></td>
<td>é¢å‘å¯¹è±¡ç¨‹åºè®¾è®¡</td>
</tr>
<tr>
<td><code>PDF</code></td>
<td><code>Portable Document Format</code></td>
<td>ä¾¿æºå¼æ–‡æ¡£æ ¼å¼</td>
</tr>
<tr>
<td><code>PC</code></td>
<td><code>Personal Computer</code></td>
<td>ä¸ªäººè®¡ç®—æœº</td>
</tr>
<tr>
<td><code>PC</code></td>
<td><code>Program Counter</code></td>
<td>ç¨‹åºè®¡æ•°å™¨</td>
</tr>
<tr>
<td><code>PNG</code></td>
<td><code>Portable Network Graphics</code></td>
<td>ä¾¿æºå¼ç½‘ç»œå›¾å½¢ï¼Œä¸€ç§æ— æŸå‹ç¼©çš„ä½å›¾å›¾å½¢æ ¼å¼</td>
</tr>
<tr>
<td><code>SVG</code></td>
<td><code>Scalable Vector Graphics</code></td>
<td>å¯ç¼©æ”¾çŸ¢é‡å›¾å½¢</td>
</tr>
<tr>
<td><code>SRP</code></td>
<td><code>Single Responsibility Principle</code></td>
<td>å•ä¸€èŒè´£åŸåˆ™</td>
</tr>
<tr>
<td><code>I/O</code></td>
<td><code>Input/Output</code></td>
<td>è¾“å…¥è¾“å‡º</td>
</tr>
<tr>
<td><code>IT</code></td>
<td><code>Internet Technology</code></td>
<td>ä¿¡æ¯æŠ€æœ¯æˆ–äº’è”ç½‘æŠ€æœ¯</td>
</tr>
<tr>
<td><code>IETF</code></td>
<td><code>Internet Engineering Task Force</code></td>
<td>äº’è”ç½‘å·¥ç¨‹ä»»åŠ¡ç»„</td>
</tr>
<tr>
<td><code>REST</code></td>
<td><code>Representational State Transfer</code></td>
<td>è¡¨è¿°æ€§çŠ¶æ€ä¼ é€’</td>
</tr>
<tr>
<td><code>UTF-8</code></td>
<td><code>8-bit Unicode Transformation Format</code></td>
<td>ä¸€ç§é’ˆå¯¹ Unicode çš„å¯å˜é•¿åº¦å­—ç¬¦ç¼–ç ï¼Œä¹Ÿæ˜¯ä¸€ç§å‰ç¼€ç </td>
</tr>
<tr>
<td><code>VM</code></td>
<td><code>Virtual Machine</code></td>
<td>è™šæ‹Ÿæœº</td>
</tr>
<tr>
<td><code>W3C</code></td>
<td><code>Word Wide Web Consortium</code></td>
<td>ä¸‡ç»´ç½‘åä¼š</td>
</tr>
</tbody>
</table>
<h1 id="ç½‘ç»œ"><a href="#ç½‘ç»œ" class="headerlink" title="ç½‘ç»œ"></a>ç½‘ç»œ</h1><table>
<thead>
<tr>
<th>ç®€ç§°</th>
<th>å…¨ç§°</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>IP</code></td>
<td><code>Internet Protocol</code></td>
<td>ç½‘é™…äº’è¿åè®®</td>
</tr>
<tr>
<td><code>WWW</code></td>
<td><code>World Wide Web</code></td>
<td>ä¸‡ç»´ç½‘</td>
</tr>
<tr>
<td><code>DNS</code></td>
<td><code>Domain Name Server</code></td>
<td>åŸŸåæœåŠ¡å™¨</td>
</tr>
<tr>
<td><code>CDN</code></td>
<td><code>Content Delivery Network</code></td>
<td>å†…å®¹åˆ†å‘ç½‘ç»œ</td>
</tr>
<tr>
<td><code>ISP</code></td>
<td><code>Internet Service Provider</code></td>
<td>å› ç‰¹ç½‘æœåŠ¡æä¾›å•†</td>
</tr>
<tr>
<td><code>NAT</code></td>
<td><code>Network Address Translation</code></td>
<td>ç½‘ç»œåœ°å€è½¬æ¢</td>
</tr>
<tr>
<td><code>ARP</code></td>
<td><code>Address Resolution Protoco</code></td>
<td>åœ°å€è§£æåè®®</td>
</tr>
<tr>
<td><code>IPS</code></td>
<td><code>Internet Protocol Suite</code></td>
<td>äº’è”ç½‘åè®®æ—</td>
</tr>
<tr>
<td><code>PS</code></td>
<td><code>Packet Switching</code></td>
<td>åˆ†ç»„äº¤æ¢</td>
</tr>
<tr>
<td><code>IPv4</code></td>
<td><code>Internet Protocol version 4</code></td>
<td>äº’è”ç½‘é€šä¿¡åè®®ç¬¬å››ç‰ˆ</td>
</tr>
<tr>
<td><code>IPv6</code></td>
<td><code>Internet Protocol version 6</code></td>
<td>äº’è”ç½‘é€šä¿¡åè®®ç¬¬å…­ç‰ˆ</td>
</tr>
<tr>
<td><code>ICMPv6</code></td>
<td><code>Internet Control Message Protocol Version 6</code></td>
<td>äº’è”ç½‘æ§åˆ¶æ¶ˆæ¯åè®®ç¬¬å…­ç‰ˆ</td>
</tr>
<tr>
<td><code>HTTP</code></td>
<td><code>HyperText Transfer Protocol</code></td>
<td>è¶…æ–‡æœ¬ä¼ è¾“åè®®</td>
</tr>
<tr>
<td><code>HTTPS</code></td>
<td><code>Hyper Text Transfer Protocol over SecureSocket Layer</code></td>
<td>è¶…æ–‡æœ¬ä¼ è¾“å®‰å…¨åè®®</td>
</tr>
<tr>
<td><code>TCP</code></td>
<td><code>Transmission Control Protocol</code></td>
<td>ä¼ è¾“æ§åˆ¶åè®®</td>
</tr>
<tr>
<td><code>UDP</code></td>
<td><code>User Datagram Protocol</code></td>
<td>ç”¨æˆ·æ•°æ®æŠ¥åè®®</td>
</tr>
<tr>
<td><code>FTP</code></td>
<td><code>File Transfer Protocol</code></td>
<td>æ–‡ä»¶ä¼ è¾“åè®®</td>
</tr>
<tr>
<td><code>NDP</code></td>
<td><code>Neighbor Discovery Protocol</code></td>
<td>é‚»å±…å‘ç°åè®®</td>
</tr>
<tr>
<td><code>ICMP</code></td>
<td><code>Internet Control Message Protocol</code></td>
<td>äº’è”ç½‘æ§åˆ¶æ¶ˆæ¯åè®®</td>
</tr>
<tr>
<td><code>OSI</code></td>
<td><code>Open System Interconnection</code></td>
<td>å¼€æ”¾å¼ç³»ç»Ÿäº’è”</td>
</tr>
<tr>
<td><code>SSL</code></td>
<td><code>Secure Sockets Layer</code></td>
<td>å®‰å…¨å¥—æ¥å±‚</td>
</tr>
<tr>
<td><code>TLS</code></td>
<td><code>Transport Layer Security</code></td>
<td>ä¼ è¾“å±‚å®‰å…¨æ€§åè®®</td>
</tr>
<tr>
<td><code>IoT</code></td>
<td><code>Internet of Things</code></td>
<td>ç‰©è”ç½‘</td>
</tr>
<tr>
<td><code>GPS</code></td>
<td><code>Global Positioning System</code></td>
<td>å…¨çƒå®šä½ç³»ç»Ÿ</td>
</tr>
<tr>
<td><code>GNU</code></td>
<td><code>GNU is Not Unix</code></td>
<td>ä¸€ä¸ªè‡ªç”±çš„æ“ä½œç³»ç»Ÿï¼Œå…¶å†…å®¹è½¯ä»¶å®Œå…¨ä»¥ GPL æ–¹å¼å‘å¸ƒ</td>
</tr>
<tr>
<td><code>SNS</code></td>
<td><code>Social Networking Services</code></td>
<td>ç¤¾äº¤ç½‘ç»œæœåŠ¡</td>
</tr>
<tr>
<td><code>SMS</code></td>
<td><code>Short Message Service</code></td>
<td>çŸ­ä¿¡æ¯æœåŠ¡</td>
</tr>
<tr>
<td><code>RFC</code></td>
<td><code>Request For Comments</code></td>
<td>è¯·æ±‚è¯„è®ºï¼Œå³ä¸€ç³»åˆ—ä»¥ç¼–å·æ’å®šçš„æ–‡ä»¶</td>
</tr>
<tr>
<td><code>CAS</code></td>
<td><code>Central Authentication Service</code></td>
<td>ä¸­å¤®è®¤è¯æœåŠ¡</td>
</tr>
<tr>
<td><code>DAU</code></td>
<td><code>Daily Active User</code></td>
<td>æ—¥æ´»è·ƒç”¨æˆ·æ•°</td>
</tr>
<tr>
<td><code>MAU</code></td>
<td><code>Monthly Active Users</code></td>
<td>æœˆæ´»è·ƒç”¨æˆ·æ•°</td>
</tr>
<tr>
<td><code>CTR</code></td>
<td><code>Click Through Rate</code></td>
<td>ç‚¹å‡»é€šè¿‡ç‡</td>
</tr>
<tr>
<td><code>PV</code></td>
<td><code>Page View</code></td>
<td>ç½‘ç«™è¢«æµè§ˆæ€»æ¬¡æ•°</td>
</tr>
<tr>
<td><code>URL</code></td>
<td><code>Uniform Resource Locator</code></td>
<td>ç»Ÿä¸€èµ„æºå®šä½ç¬¦</td>
</tr>
<tr>
<td><code>URI</code></td>
<td><code>Uniform Resource Identifier</code></td>
<td>ç»Ÿä¸€èµ„æºæ ‡è¯†ç¬¦</td>
</tr>
<tr>
<td><code>UV</code></td>
<td><code>Unique Visitor</code></td>
<td>ç‹¬ç«‹è®¿å®¢ï¼Œå”¯ä¸€èº«ä»½è®¿é—®ç½‘ç«™çš„æ•°å­—</td>
</tr>
<tr>
<td><code>TP</code></td>
<td><code>Time On Page</code></td>
<td>é¡µé¢åœç•™æ—¶é—´</td>
</tr>
<tr>
<td><code>LBS</code></td>
<td><code>Location Based Services</code></td>
<td>åŸºäºä½ç½®çš„æœåŠ¡</td>
</tr>
<tr>
<td><code>LVS</code></td>
<td><code>Linux Virtual Server</code></td>
<td>Linux è™šæ‹ŸæœåŠ¡å™¨</td>
</tr>
<tr>
<td><code>VPN</code></td>
<td><code>Virtual Private Network</code></td>
<td>è™›æ‹Ÿç§æœ‰ç½‘ç»œ</td>
</tr>
<tr>
<td><code>VIP</code></td>
<td><code>Virtual Private Network</code></td>
<td>è™›æ‹Ÿç§æœ‰ç½‘ç»œ</td>
</tr>
</tbody>
</table>
<h1 id="ç¼–ç¨‹"><a href="#ç¼–ç¨‹" class="headerlink" title="ç¼–ç¨‹"></a>ç¼–ç¨‹</h1><table>
<thead>
<tr>
<th>ç®€ç§°</th>
<th>å…¨ç§°</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>API</code></td>
<td><code>Application Programming Interface</code></td>
<td>åº”ç”¨ç¨‹åºæ¥å£</td>
</tr>
<tr>
<td><code>COM</code></td>
<td><code>Component Object Model</code></td>
<td>ç»„ä»¶å¯¹è±¡æ¨¡å‹</td>
</tr>
<tr>
<td><code>JVM</code></td>
<td><code>Java Virtual Machine</code></td>
<td>Java è™šæ‹Ÿæœº</td>
</tr>
<tr>
<td><code>JIT</code></td>
<td><code>Just In Time (Compiler)</code></td>
<td>å³æ—¶ç¼–è¯‘</td>
</tr>
<tr>
<td><code>JDK</code></td>
<td><code>Java Development Kit</code></td>
<td>Java è¯­è¨€çš„è½¯ä»¶å¼€å‘å·¥å…·åŒ…</td>
</tr>
<tr>
<td><code>JRE</code></td>
<td><code>Java Runtime Environment</code></td>
<td>Java è¿è¡Œæ—¶ç¯å¢ƒ</td>
</tr>
<tr>
<td><code>GC</code></td>
<td><code>Gabage Collection</code></td>
<td>åƒåœ¾å›æ”¶å™¨</td>
</tr>
<tr>
<td><code>JS</code></td>
<td><code>JavaScript</code></td>
<td>JavaScript ç¼–ç¨‹è¯­è¨€</td>
</tr>
<tr>
<td><code>PHP</code></td>
<td><code>Hypertext Preprocessor</code></td>
<td>PHP ç¼–ç¨‹è¯­è¨€</td>
</tr>
<tr>
<td><code>CAS</code></td>
<td><code>Compare and Swap</code></td>
<td>æ¯”è¾ƒå¹¶äº¤æ¢</td>
</tr>
<tr>
<td><code>JSON</code></td>
<td><code>JavaScript Object Notation</code></td>
<td>JavaScript å¯¹è±¡ç®€è°±ï¼Œå³ä¸€ç§è½»é‡çº§çš„æ•°æ®äº¤æ¢æ ¼å¼</td>
</tr>
<tr>
<td><code>ECMAScript</code></td>
<td><code>European Computer Manufacturers Association Script</code></td>
<td>Ecma å›½é™…é€šè¿‡ ECMA-262 æ ‡å‡†åŒ–çš„è„šæœ¬ç¨‹åºè®¾è®¡è¯­è¨€</td>
</tr>
<tr>
<td><code>XML</code></td>
<td><code>Extensible Markup Language</code></td>
<td>å¯æ‰©å±•æ ‡è®°è¯­è¨€</td>
</tr>
<tr>
<td><code>SGML</code></td>
<td><code>Standard Generalized Markup Language</code></td>
<td>æ ‡å‡†é€šç”¨æ ‡è®°è¯­è¨€</td>
</tr>
<tr>
<td><code>HTML</code></td>
<td><code>HyperText Markup Language</code></td>
<td>è¶…çº§æ–‡æœ¬æ ‡è®°è¯­è¨€</td>
</tr>
<tr>
<td><code>AJAX</code></td>
<td><code>Asynchronous Javascript And XML</code></td>
<td>å¼‚æ­¥ JavaScript å’Œ XML</td>
</tr>
<tr>
<td><code>JWT</code></td>
<td><code>JSON Web Token</code></td>
<td>å®ç° Token æŠ€æœ¯çš„ä¸€ç§è§£å†³æ–¹æ¡ˆ</td>
</tr>
<tr>
<td><code>DP</code></td>
<td><code>Dynamic Programming</code></td>
<td>åŠ¨æ€è§„åˆ’</td>
</tr>
<tr>
<td><code>MVC</code></td>
<td><code>Model View Controller</code></td>
<td>è½¯ä»¶å·¥ç¨‹ä¸­çš„ä¸€ç§è½¯ä»¶æ¶æ„æ¨¡å¼</td>
</tr>
<tr>
<td><code>MVVM</code></td>
<td><code>Model View View Model</code></td>
<td>è½¯ä»¶å·¥ç¨‹ä¸­çš„ä¸€ç§è½¯ä»¶æ¶æ„æ¨¡å¼</td>
</tr>
</tbody>
</table>
<h1 id="æ•°æ®åº“"><a href="#æ•°æ®åº“" class="headerlink" title="æ•°æ®åº“"></a>æ•°æ®åº“</h1><table>
<thead>
<tr>
<th>ç®€ç§°</th>
<th>å…¨ç§°</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>DB</code></td>
<td><code>Database</code></td>
<td>æ•°æ®åº“</td>
</tr>
<tr>
<td><code>SQL</code></td>
<td><code>Structured Query Language</code></td>
<td>ç»“æ„åŒ–æŸ¥è¯¢è¯­è¨€</td>
</tr>
<tr>
<td><code>DDL</code></td>
<td><code>Data Definition Language</code></td>
<td>æ•°æ®å®šä¹‰è¯­è¨€</td>
</tr>
<tr>
<td><code>DML</code></td>
<td><code>Data Manipulation Language</code></td>
<td>æ•°æ®æ“çºµè¯­è¨€</td>
</tr>
<tr>
<td><code>DD</code></td>
<td><code>Data Dictionary</code></td>
<td>æ•°æ®å­—å…¸</td>
</tr>
<tr>
<td><code>DBMS</code></td>
<td><code>Database Management System</code></td>
<td>æ•°æ®åº“ç®¡ç†ç³»ç»Ÿ</td>
</tr>
<tr>
<td><code>RDBMS</code></td>
<td><code>Relational Database Management System</code></td>
<td>å…³ç³»å‹æ•°æ®åº“ç®¡ç†ç³»ç»Ÿ</td>
</tr>
<tr>
<td><code>NoSQL</code></td>
<td><code>Not Only SQL</code></td>
<td>éå…³ç³»å‹çš„æ•°æ®åº“</td>
</tr>
<tr>
<td><code>ACID</code></td>
<td><code>Atomicity, Consistency, Isolation, Durability</code></td>
<td>æ•°æ®åº“äº‹åŠ¡æ­£ç¡®æ‰§è¡Œçš„å››ä¸ªåŸºæœ¬è¦ç´ </td>
</tr>
<tr>
<td><code>WAL</code></td>
<td><code>Write Ahead Logging</code></td>
<td>é¢„å†™æ—¥å¿—ç³»ç»Ÿ</td>
</tr>
<tr>
<td><code>ID</code></td>
<td><code>Identity Document</code></td>
<td>èº«ä»½æ ‡è¯†å·</td>
</tr>
<tr>
<td><code>ODBC</code></td>
<td><code>Open Database Connectivity</code></td>
<td>å¼€æ”¾æ•°æ®åº“äº’è¿</td>
</tr>
<tr>
<td><code>JDBC</code></td>
<td><code>Java Database Connectivity</code></td>
<td>Java æ•°æ®åº“è¿æ¥</td>
</tr>
<tr>
<td><code>CAP</code></td>
<td><code>Consistency, Availability, Partition tolerance</code></td>
<td>ä¸€è‡´æ€§ã€å¯ç”¨æ€§ã€åˆ†åŒºå®¹é”™æ€§</td>
</tr>
<tr>
<td><code>1NF</code></td>
<td><code>First Normal Form</code></td>
<td>ç¬¬ä¸€èŒƒå¼</td>
</tr>
<tr>
<td><code>2NF</code></td>
<td><code>Second Normal Form</code></td>
<td>ç¬¬äºŒèŒƒå¼</td>
</tr>
<tr>
<td><code>3NF</code></td>
<td><code>Third Normal Form</code></td>
<td>ç¬¬ä¸‰èŒƒå¼</td>
</tr>
</tbody>
</table>
]]></content>
      <categories>
        <category>basic</category>
      </categories>
      <tags>
        <tag>basic</tag>
      </tags>
  </entry>
  <entry>
    <title>Git åˆ†æ”¯</title>
    <url>/2018/01/25/git-branch/</url>
    <content><![CDATA[<p>ğŸ§¬ åˆ†æ”¯å‡ ä¹æ˜¯ git çš„å¿…æ€æŠ€ï¼Œå€’ä¸æ˜¯è¯´å…¶ä»–çš„ç‰ˆæœ¬æ§åˆ¶æ²¡æœ‰åˆ†æ”¯è¿™ä¸ªç‰¹æ€§ï¼Œè€Œæ˜¯ git åˆ†æ”¯æ—©å·²æŠŠå…¶å®ƒçš„ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿåˆ†æ”¯åŠŸèƒ½ç”©äº†å¥½å‡ æ¡è¡—ã€‚è¿™ä¹ˆè¯´ä¸æ˜¯å¤¸å¼ ï¼Œå› ä¸º git çš„å®ç°ä¸é¡¹ç›®å¤æ‚åº¦æ— å…³ï¼Œå®ƒæ°¸è¿œå¯ä»¥åœ¨å‡ æ¯«ç§’çš„æ—¶é—´å†…å®Œæˆåˆ†æ”¯çš„åˆ›å»ºå’Œåˆ‡æ¢ã€‚åŒæ—¶ï¼Œå› ä¸ºæ¯æ¬¡æäº¤æ—¶éƒ½è®°å½•äº†ç¥–å…ˆä¿¡æ¯ï¼Œå°†æ¥è¦åˆå¹¶åˆ†æ”¯æ—¶ï¼Œå¯»æ‰¾æ°å½“çš„åˆå¹¶åŸºç¡€çš„å·¥ä½œå…¶å®å·²ç»å¾ˆæ˜¾ç„¶çš„æ‘†åœ¨é‚£é‡Œï¼Œæ‰€ä»¥å®ç°èµ·æ¥éå¸¸å®¹æ˜“ã€‚git é¼“åŠ±å¼€å‘è€…é¢‘ç¹ä½¿ç”¨åˆ†æ”¯ï¼Œæ­£æ˜¯ä»—ç€è¿™äº›ç‰¹æ€§ä½œä¿éšœã€‚</p>
<span id="more"></span>
<ul>
<li><a href="https://imajinyun.xyz/2018/01/22/git-started/"><code>Git èµ·æ­¥</code></a></li>
<li><a href="https://imajinyun.xyz/2018/01/23/git-basic/"><code>Git åŸºæœ¬æ“ä½œ</code></a></li>
<li><a href="https://imajinyun.xyz/2018/01/24/git-log/"><code>Git æŸ¥çœ‹æ—¥å¿—</code></a></li>
<li><a href="https://imajinyun.xyz/2018/01/25/git-branch/"><strong>Git åˆ†æ”¯</strong></a></li>
<li><a href="https://imajinyun.xyz/2018/01/27/git-multiple-accounts/"><code>Git ä¸­ä¸€ä¸ªå®¢æˆ·ç«¯è®¾ç½®å¤šä¸ªè´¦å·</code></a></li>
<li><a href="https://imajinyun.xyz/2018/05/01/git-workflow/"><code>Git Workflow</code></a></li>
<li><a href="https://imajinyun.xyz/2020/09/07/git-collection-command/"><code>Git å‘½ä»¤å¤§å…¨</code></a></li>
</ul>
<h1 id="æœ¬åœ°åˆ†æ”¯"><a href="#æœ¬åœ°åˆ†æ”¯" class="headerlink" title="æœ¬åœ°åˆ†æ”¯"></a>æœ¬åœ°åˆ†æ”¯</h1><h2 id="åˆ›å»ºåˆ†æ”¯"><a href="#åˆ›å»ºåˆ†æ”¯" class="headerlink" title="åˆ›å»ºåˆ†æ”¯"></a>åˆ›å»ºåˆ†æ”¯</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// åˆ›å»ºä¸€ä¸ªåç§°ä¸º develop çš„åˆ†æ”¯</span><br><span class="line">$ git checkout -b develop</span><br><span class="line">Switched to a new branch <span class="string">&#x27;develop&#x27;</span></span><br><span class="line">ç­‰ä»·äº</span><br><span class="line">$ git branch develop</span><br><span class="line">$ git checkout develop</span><br></pre></td></tr></table></figure>
<h2 id="åˆ é™¤åˆ†æ”¯"><a href="#åˆ é™¤åˆ†æ”¯" class="headerlink" title="åˆ é™¤åˆ†æ”¯"></a>åˆ é™¤åˆ†æ”¯</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// åˆ é™¤ä¸€ä¸ªå·²ç»æœ‰æäº¤è®°å½•ä½†è¿˜æ²¡æœ‰åˆå¹¶åˆ° master çš„åˆ†æ”¯</span><br><span class="line">$ git branch -d develop</span><br><span class="line">error: The branch <span class="string">&#x27;develop&#x27;</span> is not fully merged.</span><br><span class="line">If you are sure you want to delete it, run <span class="string">&#x27;git branch -D develop&#x27;</span>.</span><br><span class="line"></span><br><span class="line">// ç¡®å®šä¸åˆå¹¶ develop åˆ†æ”¯çš„ä»»ä½•æäº¤å¹¶åˆ é™¤æ­¤åˆ†æ”¯</span><br><span class="line">$ git branch -D develop</span><br><span class="line">Deleted branch develop (was 833b688).</span><br></pre></td></tr></table></figure>
<h2 id="æŸ¥çœ‹åˆ†æ”¯"><a href="#æŸ¥çœ‹åˆ†æ”¯" class="headerlink" title="æŸ¥çœ‹åˆ†æ”¯"></a>æŸ¥çœ‹åˆ†æ”¯</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// æŸ¥çœ‹åˆ†æ”¯åˆ—è¡¨</span><br><span class="line">$ git branch</span><br><span class="line">* develop</span><br><span class="line">  feature</span><br><span class="line">  master</span><br><span class="line"></span><br><span class="line">// æŸ¥çœ‹æ¯ä¸€ä¸ªåˆ†æ”¯çš„æœ€åä¸€æ¬¡æäº¤</span><br><span class="line">$ git branch -v</span><br><span class="line">* develop 9ad35ee Add index.js</span><br><span class="line">  feature 992122d Add .editorconfig</span><br><span class="line">  master  23a0a9e Rename index.php to index.html</span><br><span class="line"></span><br><span class="line">// æŸ¥çœ‹å“ªäº›åˆ†æ”¯å·²ç»åˆå¹¶åˆ°å½“å‰åˆ†æ”¯</span><br><span class="line">$ git branch --merged</span><br><span class="line">  develop</span><br><span class="line">* master</span><br><span class="line"></span><br><span class="line">// æŸ¥çœ‹æ‰€æœ‰åŒ…å«æœªåˆå¹¶å·¥ä½œçš„åˆ†æ”¯</span><br><span class="line">$ git branch --no-merged</span><br><span class="line">  feature</span><br></pre></td></tr></table></figure>
<h2 id="åˆå¹¶åˆ†æ”¯"><a href="#åˆå¹¶åˆ†æ”¯" class="headerlink" title="åˆå¹¶åˆ†æ”¯"></a>åˆå¹¶åˆ†æ”¯</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ git checkout master</span><br><span class="line">$ git merge --no-ff develop</span><br><span class="line">Merge made by the <span class="string">&#x27;recursive&#x27;</span> strategy.</span><br><span class="line"> README.md | 1 +</span><br><span class="line"> 1 file changed, 1 insertion(+)</span><br></pre></td></tr></table></figure>
<h2 id="åˆ†æ”¯å˜åŸº"><a href="#åˆ†æ”¯å˜åŸº" class="headerlink" title="åˆ†æ”¯å˜åŸº"></a>åˆ†æ”¯å˜åŸº</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// åˆ‡æ¢åˆ°è¦å˜åŸºçš„åˆ†æ”¯</span><br><span class="line">$ git checkout feature</span><br><span class="line">Switched to branch <span class="string">&#x27;feature&#x27;</span></span><br><span class="line"></span><br><span class="line">// è¿›è¡Œå˜åŸº</span><br><span class="line">$ git rebase master</span><br><span class="line">$ git rebase master</span><br><span class="line">First, rewinding head to replay your work on top of it...</span><br><span class="line">Applying: Add .editorconfig</span><br><span class="line">Applying: Add releases link</span><br><span class="line">Using index info to reconstruct a base tree...</span><br><span class="line">M  README.md</span><br><span class="line">Falling back to patching base and 3-way merge...</span><br><span class="line">Auto-merging README.md</span><br><span class="line">CONFLICT (content): Merge conflict <span class="keyword">in</span> README.md</span><br><span class="line">error: Failed to merge <span class="keyword">in</span> the changes.</span><br><span class="line">Patch failed at 0002 Add releases link</span><br><span class="line">Use <span class="string">&#x27;git am --show-current-patch&#x27;</span> to see the failed patch</span><br><span class="line"></span><br><span class="line">Resolve all conflicts manually, mark them as resolved with</span><br><span class="line"><span class="string">&quot;git add/rm &lt;conflicted_files&gt;&quot;</span>, <span class="keyword">then</span> run <span class="string">&quot;git rebase --continue&quot;</span>.</span><br><span class="line">You can instead skip this commit: run <span class="string">&quot;git rebase --skip&quot;</span>.</span><br><span class="line">To abort and get back to the state before <span class="string">&quot;git rebase&quot;</span>, run <span class="string">&quot;git rebase --abort&quot;</span>.</span><br><span class="line"></span><br><span class="line">// æŸ¥çœ‹å½“å‰çš„è¡¥ä¸</span><br><span class="line">$ git am --show-current-patch</span><br><span class="line">commit 15539736e18fe133f5916a55e8f38ce7b734113a (feature)</span><br><span class="line">Author: imajinyun &lt;imajinyun@gmail.com&gt;</span><br><span class="line">Date:   Mon Dec 31 21:24:59 2018 +0800</span><br><span class="line"></span><br><span class="line">    Add releases link</span><br><span class="line"></span><br><span class="line">diff --git a/README.md b/README.md</span><br><span class="line">index d467b4f..8ec2025 100644</span><br><span class="line">--- a/README.md</span><br><span class="line">+++ b/README.md</span><br><span class="line">@@ -2,3 +2,4 @@</span><br><span class="line"> [2]: https://symfony.com/projects</span><br><span class="line"> [3]: https://symfony.com/doc/current/reference/requirements.html</span><br><span class="line"> [4]: https://symfony.com/doc/current/setup.html</span><br><span class="line">+[5]: https://symfony.com/doc/current/contributing/community/releases.html</span><br><span class="line"></span><br><span class="line">// è§£å†³å†²çªå®Œæˆå˜åŸº</span><br><span class="line">$ vim README.md</span><br><span class="line">å†²çªçš„æ–‡ä»¶å†…å®¹ï¼š</span><br><span class="line">[1]: https://symfony.com</span><br><span class="line">[2]: https://symfony.com/projects</span><br><span class="line">[3]: https://symfony.com/doc/current/reference/requirements.html</span><br><span class="line">[4]: https://symfony.com/doc/current/setup.html</span><br><span class="line">&lt;&lt;&lt;&lt;&lt;&lt;&lt; <span class="string">HEAD</span></span><br><span class="line"><span class="string">[5]: http://semver.org</span></span><br><span class="line"><span class="string">=======</span></span><br><span class="line"><span class="string">[5]: https://symfony.com/doc/current/contributing/community/releases.html</span></span><br><span class="line"><span class="string">&gt;&gt;&gt;&gt;&gt;&gt;&gt; Add releases link</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">ä¿®å¤åçš„æ–‡ä»¶å†…å®¹ï¼š</span></span><br><span class="line"><span class="string">[1]: https://symfony.com</span></span><br><span class="line"><span class="string">[2]: https://symfony.com/projects</span></span><br><span class="line"><span class="string">[3]: https://symfony.com/doc/current/reference/requirements.html</span></span><br><span class="line"><span class="string">[4]: https://symfony.com/doc/current/setup.html</span></span><br><span class="line"><span class="string">[5]: http://semver.org</span></span><br><span class="line"><span class="string">[6]: https://symfony.com/doc/current/contributing/community/releases.html</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">// æŸ¥çœ‹ä»“åº“çŠ¶æ€</span></span><br><span class="line"><span class="string">$ git status</span></span><br><span class="line"><span class="string">rebase in progress; onto 4830059</span></span><br><span class="line"><span class="string">You are currently rebasing branch &#x27;feature&#x27; on &#x27;4830059&#x27;.</span></span><br><span class="line"><span class="string">  (fix conflicts and then run &quot;git rebase --continue&quot;)</span></span><br><span class="line"><span class="string">  (use &quot;git rebase --skip&quot; to skip this patch)</span></span><br><span class="line"><span class="string">  (use &quot;git rebase --abort&quot; to check out the original branch)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Unmerged paths:</span></span><br><span class="line"><span class="string">  (use &quot;git reset HEAD</span> &lt;file&gt;...<span class="string">&quot; to unstage)</span></span><br><span class="line"><span class="string">  (use &quot;</span>git add &lt;file&gt;...<span class="string">&quot; to mark resolution)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    both modified:   README.md</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">no changes added to commit (use &quot;</span>git add<span class="string">&quot; and/or &quot;</span>git commit -a<span class="string">&quot;)</span></span><br><span class="line"><span class="string">$ git add README.md</span></span><br><span class="line"><span class="string">$ git rebase --continue</span></span><br><span class="line"><span class="string">Applying: Add releases link</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">// åˆå¹¶æ­¤åˆ†æ”¯ä»£ç åˆ° master åˆ†æ”¯</span></span><br><span class="line"><span class="string">$ git checkout master</span></span><br><span class="line"><span class="string">$ git merge --no-ff feature</span></span><br><span class="line"><span class="string">Merge made by the &#x27;recursive&#x27; strategy.</span></span><br><span class="line"><span class="string"> .editorconfig | 0</span></span><br><span class="line"><span class="string"> README.md     | 1 +</span></span><br><span class="line"><span class="string"> 2 files changed, 1 insertion(+)</span></span><br><span class="line"><span class="string"> create mode 100644 .editorconfig</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">// å˜åŸºåçš„å†å²è®°å½•ï¼Œå¯ä»¥çœ‹åˆ°å˜åŸºä½¿å¾—æäº¤å†å²æ›´åŠ æ•´æ´ï¼Œæ—¥å¿—å°±åƒæ˜¯ä¸²è¡Œä¸€æ ·</span></span><br><span class="line"><span class="string">$ git log --oneline --graph</span></span><br><span class="line"><span class="string">*   f686948 (HEAD -&gt; master) Merge branch &#x27;feature&#x27; to master</span></span><br><span class="line"><span class="string">|\</span></span><br><span class="line"><span class="string">| * 78a6bfc (feature) Add releases link</span></span><br><span class="line"><span class="string">| * 34f8649 Add .editorconfig</span></span><br><span class="line"><span class="string">|/</span></span><br><span class="line"><span class="string">*   4830059 (develop) Merge branch &#x27;develop&#x27; to master</span></span><br><span class="line"><span class="string">|\</span></span><br><span class="line"><span class="string">| * 04a75c1 Add semver link</span></span><br><span class="line"><span class="string">* |   3bdd3fc Merge branch &#x27;develop&#x27; to master</span></span><br><span class="line"><span class="string">|\ \</span></span><br><span class="line"><span class="string">| |/</span></span><br><span class="line"><span class="string">| * d48ea11 Add setup link</span></span><br><span class="line"><span class="string">|/</span></span><br><span class="line"><span class="string">*   3513802 Merge branch &#x27;develop&#x27; to master</span></span><br><span class="line"><span class="string">|\</span></span><br><span class="line"><span class="string">| * 9ad35ee Add index.js</span></span><br><span class="line"><span class="string">| * 0bc04c2 Add index.css</span></span><br><span class="line"><span class="string">|/</span></span><br><span class="line"><span class="string">* 23a0a9e Rename index.php to index.html</span></span><br><span class="line"><span class="string">* da3c74c Add index.php</span></span><br><span class="line"><span class="string">* 7778db8 Add projects and requirements link</span></span><br><span class="line"><span class="string">* facc111 Add symfony website link</span></span><br><span class="line"><span class="string">* a384a2b Add README.md</span></span><br></pre></td></tr></table></figure>
<h1 id="å…¶å®ƒæ“ä½œ"><a href="#å…¶å®ƒæ“ä½œ" class="headerlink" title="å…¶å®ƒæ“ä½œ"></a>å…¶å®ƒæ“ä½œ</h1><h2 id="æ•´åˆè¿ç»­å¤šæ¬¡æäº¤"><a href="#æ•´åˆè¿ç»­å¤šæ¬¡æäº¤" class="headerlink" title="æ•´åˆè¿ç»­å¤šæ¬¡æäº¤"></a>æ•´åˆè¿ç»­å¤šæ¬¡æäº¤</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// æŸ¥çœ‹æäº¤æ—¥å¿—</span><br><span class="line">$ git <span class="built_in">log</span> --oneline --graph --all</span><br><span class="line">*   f686948 (HEAD -&gt; master) Merge branch <span class="string">&#x27;feature&#x27;</span> to master</span><br><span class="line">|\</span><br><span class="line">| * 78a6bfc (feature) Add releases link</span><br><span class="line">| * 34f8649 Add .editorconfig</span><br><span class="line">|/</span><br><span class="line">*   4830059 (develop) Merge branch <span class="string">&#x27;develop&#x27;</span> to master</span><br><span class="line">|\</span><br><span class="line">| * 04a75c1 Add semver link</span><br><span class="line">* |   3bdd3fc Merge branch <span class="string">&#x27;develop&#x27;</span> to master</span><br><span class="line">|\ \</span><br><span class="line">| |/</span><br><span class="line">| * d48ea11 Add setup link</span><br><span class="line">|/</span><br><span class="line">*   3513802 Merge branch <span class="string">&#x27;develop&#x27;</span> to master</span><br><span class="line">|\</span><br><span class="line">| * 9ad35ee Add index.js</span><br><span class="line">| * 0bc04c2 Add index.css</span><br><span class="line">|/</span><br><span class="line">* 23a0a9e Rename index.php to index.html</span><br><span class="line">* da3c74c Add index.php</span><br><span class="line">* 7778db8 Add projects and requirements link</span><br><span class="line">* facc111 Add symfony website link</span><br><span class="line">* a384a2b Add README.md</span><br><span class="line"></span><br><span class="line">// æ•´åˆæœ€è¿‘æäº¤çš„ 2 æ¬¡è®°å½•ï¼Œcommit-id ä½¿ç”¨ç¬¬äºŒæ¬¡ä¹‹å‰çš„</span><br><span class="line">$ git rebase -i 4830059</span><br><span class="line">å¼¹å‡ºçš„ç¼–è¾‘ç•Œé¢å†…å®¹ä¸ºï¼š</span><br><span class="line">pick 34f8649 Add .editorconfig</span><br><span class="line">s 78a6bfc Add releases link <span class="comment"># ä¿®æ”¹ pick ä¸º squash æˆ–è€… s</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Rebase 4830059..f686948 onto 4830059 (2 commands)</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Commands:</span></span><br><span class="line"><span class="comment"># p, pick = use commit</span></span><br><span class="line"><span class="comment"># r, reword = use commit, but edit the commit message</span></span><br><span class="line"><span class="comment"># e, edit = use commit, but stop for amending</span></span><br><span class="line"><span class="comment"># s, squash = use commit, but meld into previous commit</span></span><br><span class="line"><span class="comment"># f, fixup = like &quot;squash&quot;, but discard this commit&#x27;s log message</span></span><br><span class="line"><span class="comment"># x, exec = run command (the rest of the line) using shell</span></span><br><span class="line"><span class="comment"># d, drop = remove commit</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># These lines can be re-ordered; they are executed from top to bottom.</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># If you remove a line here THAT COMMIT WILL BE LOST.</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># However, if you remove everything, the rebase will be aborted.</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Note that empty commits are commented out</span></span><br><span class="line">ä¿å­˜åä¼šå¼¹å‡ºå¦ä¸€ä¸ªç¼–è¾‘ç•Œé¢ï¼Œå†…å®¹ä¸ºï¼š</span><br><span class="line"><span class="comment"># This is a combination of 2 commits.</span></span><br><span class="line"></span><br><span class="line">Integrating submission logs <span class="comment"># æ·»åŠ æœ¬æ¬¡çš„æäº¤æ—¥å¿—ä¿¡æ¯</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># This is the 1st commit message:</span></span><br><span class="line"></span><br><span class="line">Add .editorconfig</span><br><span class="line"></span><br><span class="line"><span class="comment"># This is the commit message #2:</span></span><br><span class="line"></span><br><span class="line">Add releases link</span><br><span class="line"></span><br><span class="line"><span class="comment"># Please enter the commit message for your changes. Lines starting</span></span><br><span class="line"><span class="comment"># with &#x27;#&#x27; will be ignored, and an empty message aborts the commit.</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Date:      Mon Dec 31 20:39:09 2018 +0800</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># interactive rebase in progress; onto 4830059</span></span><br><span class="line"><span class="comment"># Last commands done (2 commands done):</span></span><br><span class="line"><span class="comment">#    pick 34f8649 Add .editorconfig</span></span><br><span class="line"><span class="comment">#    squash 78a6bfc Add releases link</span></span><br><span class="line"><span class="comment"># No commands remaining.</span></span><br><span class="line"><span class="comment"># You are currently rebasing branch &#x27;master&#x27; on &#x27;4830059&#x27;.</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Changes to be committed:</span></span><br><span class="line"><span class="comment">#    new file:   .editorconfig</span></span><br><span class="line"><span class="comment">#    modified:   README.md</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line">[detached HEAD f9fa04a] Integrating submission logs</span><br><span class="line"> Date: Mon Dec 31 20:39:09 2018 +0800</span><br><span class="line"> 2 files changed, 1 insertion(+)</span><br><span class="line"> create mode 100644 .editorconfig</span><br><span class="line">Successfully rebased and updated refs/heads/master.</span><br><span class="line"></span><br><span class="line">// æŸ¥çœ‹æäº¤æ—¥å¿—</span><br><span class="line">* f9fa04a (HEAD -&gt; master) Integrating submission logs</span><br><span class="line">*   4830059 (develop) Merge branch <span class="string">&#x27;develop&#x27;</span> to master</span><br><span class="line">|\</span><br><span class="line">| * 04a75c1 Add semver link</span><br><span class="line">* |   3bdd3fc Merge branch <span class="string">&#x27;develop&#x27;</span> to master</span><br><span class="line">|\ \</span><br><span class="line">| |/</span><br><span class="line">| * d48ea11 Add setup link</span><br><span class="line">|/</span><br><span class="line">*   3513802 Merge branch <span class="string">&#x27;develop&#x27;</span> to master</span><br><span class="line">|\</span><br><span class="line">| * 9ad35ee Add index.js</span><br><span class="line">| * 0bc04c2 Add index.css</span><br><span class="line">|/</span><br><span class="line">* 23a0a9e Rename index.php to index.html</span><br><span class="line">* da3c74c Add index.php</span><br><span class="line">* 7778db8 Add projects and requirements link</span><br><span class="line">* facc111 Add symfony website link</span><br><span class="line">* a384a2b Add README.md</span><br></pre></td></tr></table></figure>
<h2 id="æ•´åˆé—´æ­‡å¤šæ¬¡æäº¤"><a href="#æ•´åˆé—´æ­‡å¤šæ¬¡æäº¤" class="headerlink" title="æ•´åˆé—´æ­‡å¤šæ¬¡æäº¤"></a>æ•´åˆé—´æ­‡å¤šæ¬¡æäº¤</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ git <span class="built_in">log</span> --oneline --graph</span><br><span class="line">* f9fa04a (HEAD -&gt; master) Integrating submission logs</span><br><span class="line">*   4830059 (develop) Merge branch <span class="string">&#x27;develop&#x27;</span> to master</span><br><span class="line">|\</span><br><span class="line">| * 04a75c1 Add semver link</span><br><span class="line">* |   3bdd3fc Merge branch <span class="string">&#x27;develop&#x27;</span> to master</span><br><span class="line">|\ \</span><br><span class="line">| |/</span><br><span class="line">| * d48ea11 Add setup link</span><br><span class="line">|/</span><br><span class="line">*   3513802 Merge branch <span class="string">&#x27;develop&#x27;</span> to master</span><br><span class="line">|\</span><br><span class="line">| * 9ad35ee Add index.js</span><br><span class="line">| * 0bc04c2 Add index.css</span><br><span class="line">|/</span><br><span class="line">* 23a0a9e Rename index.php to index.html</span><br><span class="line">* da3c74c Add index.php</span><br><span class="line">* 7778db8 Add projects and requirements link</span><br><span class="line">* facc111 Add symfony website link</span><br><span class="line">* a384a2b Add README.md</span><br><span class="line"></span><br><span class="line">// å˜åŸº</span><br><span class="line">$ git rebase -i 23a0a9e</span><br><span class="line">å¼¹å‡ºçš„ç¼–è¾‘ç•Œé¢å†…å®¹ä¸ºï¼š</span><br><span class="line">pick 23a0a9e</span><br><span class="line">s 0bc04c2 Add index.css <span class="comment"># ä¿®æ”¹ pick ä¸º squash æˆ– s</span></span><br><span class="line">s 9ad35ee Add index.js <span class="comment"># ä¿®æ”¹ pick ä¸º squash æˆ– s</span></span><br><span class="line">s d48ea11 Add setup link <span class="comment"># ä¿®æ”¹ pick ä¸º squash æˆ– s</span></span><br><span class="line">s 04a75c1 Add semver link <span class="comment"># ä¿®æ”¹ pick ä¸º squash æˆ– s</span></span><br><span class="line">pick f9fa04a Integrating submission logs</span><br><span class="line"></span><br><span class="line"><span class="comment"># Rebase 23a0a9e..f9fa04a onto 23a0a9e (5 commands)</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Commands:</span></span><br><span class="line"><span class="comment"># p, pick = use commit</span></span><br><span class="line"><span class="comment"># r, reword = use commit, but edit the commit message</span></span><br><span class="line"><span class="comment"># e, edit = use commit, but stop for amending</span></span><br><span class="line"><span class="comment"># s, squash = use commit, but meld into previous commit</span></span><br><span class="line"><span class="comment"># f, fixup = like &quot;squash&quot;, but discard this commit&#x27;s log message</span></span><br><span class="line"><span class="comment"># x, exec = run command (the rest of the line) using shell</span></span><br><span class="line"><span class="comment"># d, drop = remove commit</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># These lines can be re-ordered; they are executed from top to bottom.</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># If you remove a line here THAT COMMIT WILL BE LOST.</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># However, if you remove everything, the rebase will be aborted.</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Note that empty commits are commented out</span></span><br><span class="line">æ­£å¸¸æƒ…å†µä¸‹ä¼šæç¤ºæˆåŠŸï¼Œå¦åˆ™ä¼šå‡ºç°å¦‚ä¸‹æƒ…å†µï¼š</span><br><span class="line">The previous cherry-pick is now empty, possibly due to conflict resolution.</span><br><span class="line">If you wish to commit it anyway, use:</span><br><span class="line"></span><br><span class="line">    git commit --allow-empty</span><br><span class="line"></span><br><span class="line">Otherwise, please use <span class="string">&#x27;git reset&#x27;</span></span><br><span class="line">interactive rebase <span class="keyword">in</span> progress; onto 23a0a9e</span><br><span class="line">Last <span class="built_in">command</span> <span class="keyword">done</span> (1 <span class="built_in">command</span> <span class="keyword">done</span>):</span><br><span class="line">   pick 23a0a9e Add links and static file</span><br><span class="line">Next commands to <span class="keyword">do</span> (5 remaining commands):</span><br><span class="line">   squash 0bc04c2 Add index.css</span><br><span class="line">   squash 9ad35ee Add index.js</span><br><span class="line">You are currently rebasing branch <span class="string">&#x27;master&#x27;</span> on <span class="string">&#x27;23a0a9e&#x27;</span>.</span><br><span class="line"></span><br><span class="line">nothing to commit, working tree clean</span><br><span class="line">Could not apply 23a0a9e... Add links and static file</span><br><span class="line"></span><br><span class="line">// æŸ¥çœ‹çŠ¶æ€</span><br><span class="line">$ git status</span><br><span class="line">interactive rebase <span class="keyword">in</span> progress; onto 23a0a9e</span><br><span class="line">Last <span class="built_in">command</span> <span class="keyword">done</span> (1 <span class="built_in">command</span> <span class="keyword">done</span>):</span><br><span class="line">   pick 23a0a9e</span><br><span class="line">Next commands to <span class="keyword">do</span> (8 remaining commands):</span><br><span class="line">   squash 04a75c1 Add semver link</span><br><span class="line">   squash d48ea11 Add setup link</span><br><span class="line">   squash 9ad35ee Add index.js</span><br><span class="line">   squash 0bc04c2 Add index.css</span><br><span class="line">  (use <span class="string">&quot;git rebase --edit-todo&quot;</span> to view and edit)</span><br><span class="line">You are currently editing a commit <span class="keyword">while</span> rebasing branch <span class="string">&#x27;master&#x27;</span> on <span class="string">&#x27;23a0a9e&#x27;</span>.</span><br><span class="line">  (use <span class="string">&quot;git commit --amend&quot;</span> to amend the current commit)</span><br><span class="line">  (use <span class="string">&quot;git rebase --continue&quot;</span> once you are satisfied with your changes)</span><br><span class="line"></span><br><span class="line">nothing to commit, working tree clean</span><br><span class="line"></span><br><span class="line">// ç»§ç»­å˜åŸº</span><br><span class="line">$ git rebase --<span class="built_in">continue</span></span><br><span class="line">ç»§ç»­åå¼¹å‡ºçš„ç¼–è¾‘ç•Œé¢å†…å®¹ï¼š</span><br><span class="line"><span class="comment"># This is a combination of 5 commits.</span></span><br><span class="line">Add links and static file <span class="comment"># æ·»åŠ ä¸€è¡Œæ—¥å¿—ä¿¡æ¯</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># This is the 1st commit message:</span></span><br><span class="line"></span><br><span class="line">Rename index.php to index.html</span><br><span class="line"></span><br><span class="line"><span class="comment"># This is the commit message #2:</span></span><br><span class="line"></span><br><span class="line">Add index.css</span><br><span class="line"></span><br><span class="line"><span class="comment"># This is the commit message #3:</span></span><br><span class="line"></span><br><span class="line">Add index.js</span><br><span class="line"></span><br><span class="line"><span class="comment"># This is the commit message #4:</span></span><br><span class="line"></span><br><span class="line">Add setup link</span><br><span class="line"></span><br><span class="line"><span class="comment"># This is the commit message #5:</span></span><br><span class="line"></span><br><span class="line">Add semver link</span><br><span class="line"></span><br><span class="line"><span class="comment"># Please enter the commit message for your changes. Lines starting</span></span><br><span class="line"><span class="comment"># with &#x27;#&#x27; will be ignored, and an empty message aborts the commit.</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Date:      Mon Dec 31 20:05:25 2018 +0800</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># interactive rebase in progress; onto 23a0a9e</span></span><br><span class="line"><span class="comment"># Last commands done (5 commands done):</span></span><br><span class="line"><span class="comment">#    squash d48ea11 Add setup link</span></span><br><span class="line"><span class="comment">#    squash 04a75c1 Add semver link</span></span><br><span class="line"><span class="comment"># Next command to do (1 remaining command):</span></span><br><span class="line"><span class="comment">#    pick f9fa04a Integrating submission logs</span></span><br><span class="line"><span class="comment"># You are currently rebasing branch &#x27;master&#x27; on &#x27;23a0a9e&#x27;.</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Changes to be committed:</span></span><br><span class="line"><span class="comment">#    modified:   README.md</span></span><br><span class="line"><span class="comment">#    renamed:    index.php -&gt; index.css</span></span><br><span class="line"><span class="comment">#    new file:   index.html</span></span><br><span class="line"><span class="comment">#    new file:   index.js</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line">[detached HEAD 688088f] Add links and static file</span><br><span class="line"> Date: Mon Dec 31 20:05:25 2018 +0800</span><br><span class="line"> 4 files changed, 2 insertions(+)</span><br><span class="line"> rename index.php =&gt; index.css (100%)</span><br><span class="line"> create mode 100644 index.html</span><br><span class="line"> create mode 100644 index.js</span><br><span class="line">Successfully rebased and updated refs/heads/master.</span><br><span class="line"></span><br><span class="line">// æŸ¥çœ‹æ—¥å¿—ä¿¡æ¯</span><br><span class="line">$ git <span class="built_in">log</span> --oneline --graph</span><br><span class="line">* fe3b3cf (HEAD -&gt; master) Integrating submission logs</span><br><span class="line">* 688088f Add links and static file</span><br><span class="line">* da3c74c Add index.php</span><br><span class="line">* 7778db8 Add projects and requirements link</span><br><span class="line">* facc111 Add symfony website link</span><br><span class="line">* a384a2b Add README.md</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>git</category>
      </categories>
      <tags>
        <tag>git</tag>
      </tags>
  </entry>
  <entry>
    <title>Git å‘½ä»¤å¤§å…¨</title>
    <url>/2020/09/07/git-collection-command/</url>
    <content><![CDATA[<p><img src="/images/2020/202009071423.png" alt="202009071423.png"></p>
<p>ğŸ—³ é€šå¾€ Git çš„è·¯ä¸Šå¹¶ä¸æ€»æ˜¯é‚£ä¹ˆä¸€å¸†é£é¡ºï¼Œä½ æ˜¯å¦å’Œæˆ‘ä¸€æ ·æ€»æ˜¯ä¸ºäº†é‚£ä¹ˆä¸€æ¡åº”æ™¯çš„å‘½ä»¤æŠ“ç‹‚ï¼Œè²Œä¼¼è®°å¾—å¤§æ¦‚æ˜¯è¿™ä¹ˆæ“ä½œçš„ï¼Œä½†æ€»æ˜¯æ•²ä¸å¯¹å¤´ï¼Œåœ¨æŠ«è†æ–©æ£˜çš„åƒé’§ä¸€å‘åˆ©åˆƒç«Ÿç„¶è¿˜æ²¡å‡ºé˜ï¼ŒçœŸç‰¹ä¹ˆæ°”äººï¼Œä¸ºäº†è§£ç‡ƒçœ‰ä¹‹æ€¥ï¼Œæˆ‘å«äº†ä¸€å—è¶…å¤§çš„ Git å‘½ä»¤å¤§å…¨ï¼Œä½†é‚£æ˜¯åˆ«äººå®¶çš„ï¼Œæˆ‘è¦çš„æ˜¯è‡ªå·±æ”¶é›†æ•´ç†çš„è¿™ç§ï¼Œè¿˜å¥½ï¼Œæˆ‘æ•´ç†äº†ä¸€ä»½ï¼Œæ€»ç®—æ˜¯å‡ºäº†å£æ¶æ°”ã€‚</p>
<span id="more"></span>
<ul>
<li><a href="https://imajinyun.xyz/2018/01/22/git-started/"><code>Git èµ·æ­¥</code></a></li>
<li><a href="https://imajinyun.xyz/2018/01/23/git-basic/"><code>Git åŸºæœ¬æ“ä½œ</code></a></li>
<li><a href="https://imajinyun.xyz/2018/01/24/git-log/"><code>Git æŸ¥çœ‹æ—¥å¿—</code></a></li>
<li><a href="https://imajinyun.xyz/2018/01/25/git-branch/"><code>Git åˆ†æ”¯</code></a></li>
<li><a href="https://imajinyun.xyz/2018/01/27/git-multiple-accounts/"><code>Git ä¸­ä¸€ä¸ªå®¢æˆ·ç«¯è®¾ç½®å¤šä¸ªè´¦å·</code></a></li>
<li><a href="https://imajinyun.xyz/2018/05/01/git-workflow/"><code>Git Workflow</code></a></li>
<li><a href="https://imajinyun.xyz/2020/09/07/git-collection-command/"><strong>Git å‘½ä»¤å¤§å…¨</strong></a></li>
</ul>
<h2 id="Git-å‘½ä»¤åˆ†ç±»"><a href="#Git-å‘½ä»¤åˆ†ç±»" class="headerlink" title="Git å‘½ä»¤åˆ†ç±»"></a>Git å‘½ä»¤åˆ†ç±»</h2><ul>
<li>é…ç½®æ“ä½œï¼›</li>
<li>åŸºæœ¬æ“ä½œï¼›</li>
<li>åˆ†æ”¯æ“ä½œï¼›</li>
<li>åˆå¹¶æ“ä½œï¼›</li>
<li>æ ‡ç­¾æ“ä½œï¼›</li>
<li>å›æ»šæ“ä½œï¼›</li>
<li>æ—¥å¿—æ“ä½œï¼›</li>
<li>è¿œç¨‹æ“ä½œï¼›</li>
<li>ç»Ÿè®¡æ“ä½œï¼›</li>
</ul>
<h2 id="git-filter-repo"><a href="#git-filter-repo" class="headerlink" title="git filter-repo"></a>git filter-repo</h2><ul>
<li><a href="https://github.com/newren/git-filter-repo">Quickly rewrite git repository history</a></li>
<li><a href="https://htmlpreview.github.io/?https://github.com/newren/git-filter-repo/blob/docs/html/git-filter-repo.html">git-filter-repo manual page</a></li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// å®‰è£… git-filter-repo</span><br><span class="line">$ brew install git-filter-repo</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// å°†ç”¨æˆ·å tony æ›¿æ¢ä¸º pony</span><br><span class="line">$ git-filter-repo --name-callback <span class="string">&#x27;return name.replace(b&quot;tony&quot;, b&quot;pony&quot;)&#x27;</span> --force</span><br><span class="line"></span><br><span class="line">// å°†é‚®ç®± foo@gmail.com æ›¿æ¢ä¸º bar@gmail.com</span><br><span class="line">$ git-filter-repo --email-callback <span class="string">&#x27;return email.replace(b&quot;foo@gmail.com&quot;, b&quot;bar@gmail.com&quot;)&#x27;</span> --force</span><br></pre></td></tr></table></figure>
<h2 id="git-blame"><a href="#git-blame" class="headerlink" title="git blame"></a>git blame</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// æŸ¥æ‰¾æŒ‡å®šæ–‡ä»¶çš„ç¬¬ 40-60 è¡Œçš„å†å²ä¿¡æ¯</span><br><span class="line">$ git blame -L 40,60 /path/to/file.txt</span><br></pre></td></tr></table></figure>
<iframe id="embed_dom" name="embed_dom" frameborder="0" style="display:block;width:525px; height:245px;" src="https://www.processon.com/embed/5b630fa4e4b0edb750f75076"></iframe>

<p>å¦å¤–ï¼Œè¿™ä¸€ç¯‡å†™çš„å¤ªæ°´äº†ï¼Œè§è°…ã€‚</p>
]]></content>
      <categories>
        <category>git</category>
      </categories>
      <tags>
        <tag>git</tag>
      </tags>
  </entry>
  <entry>
    <title>è®¾è®¡æ¨¡å¼å…­å¤§åŸåˆ™</title>
    <url>/2018/01/31/basic-design-pattern-principle/</url>
    <content><![CDATA[<h2 id="å•ä¸€èŒè´£åŸåˆ™"><a href="#å•ä¸€èŒè´£åŸåˆ™" class="headerlink" title="å•ä¸€èŒè´£åŸåˆ™"></a>å•ä¸€èŒè´£åŸåˆ™</h2><p>å•ä¸€èŒè´£åŸåˆ™ - <code>SRP: Single Responsibility Principle</code></p>
<blockquote>
<p>å®ç°ç±»è¦èŒè´£å•ä¸€ã€‚</p>
</blockquote>
<h3 id="å•ä¸€èŒè´£å®šä¹‰"><a href="#å•ä¸€èŒè´£å®šä¹‰" class="headerlink" title="å•ä¸€èŒè´£å®šä¹‰"></a>å•ä¸€èŒè´£å®šä¹‰</h3><p>ä¸è¦å­˜åœ¨å¤šäºä¸€ä¸ªå¯¼è‡´ç±»å˜æ›´çš„åŸå› ã€‚é€šä¿—çš„è¯´ï¼Œå³ä¸€ä¸ªç±»åªè´Ÿè´£ä¸€é¡¹èŒè´£ã€‚</p>
<h3 id="å•ä¸€èŒè´£é—®é¢˜ç”±æ¥"><a href="#å•ä¸€èŒè´£é—®é¢˜ç”±æ¥" class="headerlink" title="å•ä¸€èŒè´£é—®é¢˜ç”±æ¥"></a>å•ä¸€èŒè´£é—®é¢˜ç”±æ¥</h3><p>ç±» <code>T</code> è´Ÿè´£ä¸¤ä¸ªä¸åŒçš„èŒè´£ï¼šèŒè´£ <code>P1</code>ï¼ŒèŒè´£ <code>P2</code>ã€‚å½“ç”±äºèŒè´£ <code>P1</code> éœ€æ±‚å‘ç”Ÿæ”¹å˜è€Œéœ€è¦ä¿®æ”¹ç±» <code>T</code> æ—¶ï¼Œæœ‰å¯èƒ½ä¼šå¯¼è‡´åŸæœ¬è¿è¡Œæ­£å¸¸çš„èŒè´£ <code>P2</code> åŠŸèƒ½å‘ç”Ÿæ•…éšœã€‚</p>
<h3 id="å•ä¸€èŒè´£æ³¨æ„ç‚¹"><a href="#å•ä¸€èŒè´£æ³¨æ„ç‚¹" class="headerlink" title="å•ä¸€èŒè´£æ³¨æ„ç‚¹"></a>å•ä¸€èŒè´£æ³¨æ„ç‚¹</h3><ul>
<li>å¯ä»¥é™ä½ç±»çš„å¤æ‚åº¦ï¼Œä¸€ä¸ªç±»åªè´Ÿè´£ä¸€é¡¹èŒè´£ï¼Œå…¶é€»è¾‘è‚¯å®šè¦æ¯”è´Ÿè´£å¤šé¡¹èŒè´£ç®€å•çš„å¤š</li>
<li>æé«˜ç±»çš„å¯è¯»æ€§ï¼Œæé«˜ç³»ç»Ÿçš„å¯ç»´æŠ¤æ€§</li>
<li>å˜æ›´å¼•èµ·çš„é£é™©é™ä½ï¼Œå˜æ›´æ˜¯å¿…ç„¶çš„ï¼Œå¦‚æœå•ä¸€èŒè´£åŸåˆ™éµå®ˆçš„å¥½ï¼Œå½“ä¿®æ”¹ä¸€ä¸ªåŠŸèƒ½æ—¶ï¼Œå¯ä»¥æ˜¾è‘—é™ä½å¯¹å…¶ä»–åŠŸèƒ½çš„å½±å“</li>
</ul>
<h2 id="é‡Œæ°æ›¿æ¢åŸåˆ™"><a href="#é‡Œæ°æ›¿æ¢åŸåˆ™" class="headerlink" title="é‡Œæ°æ›¿æ¢åŸåˆ™"></a>é‡Œæ°æ›¿æ¢åŸåˆ™</h2><p>é‡Œæ°æ›¿æ¢åŸåˆ™ - <code>LSP: Liskov Substitution Principle</code></p>
<blockquote>
<p>ä¸è¦ç ´åç»§æ‰¿ä½“ç³»ã€‚</p>
</blockquote>
<h3 id="é‡Œæ°æ›¿æ¢å®šä¹‰"><a href="#é‡Œæ°æ›¿æ¢å®šä¹‰" class="headerlink" title="é‡Œæ°æ›¿æ¢å®šä¹‰"></a>é‡Œæ°æ›¿æ¢å®šä¹‰</h3><p>æ‰€æœ‰å¼•ç”¨åŸºç±»çš„åœ°æ–¹å¿…é¡»èƒ½é€æ˜åœ°ä½¿ç”¨å…¶å­ç±»çš„å¯¹è±¡ã€‚</p>
<h3 id="é‡Œæ°æ›¿æ¢é—®é¢˜ç”±æ¥"><a href="#é‡Œæ°æ›¿æ¢é—®é¢˜ç”±æ¥" class="headerlink" title="é‡Œæ°æ›¿æ¢é—®é¢˜ç”±æ¥"></a>é‡Œæ°æ›¿æ¢é—®é¢˜ç”±æ¥</h3><p>æœ‰ä¸€åŠŸèƒ½ <code>P1</code>ï¼Œç”±ç±» <code>A</code> å®Œæˆã€‚ç°éœ€è¦å°†åŠŸèƒ½ <code>P1</code> è¿›è¡Œæ‰©å±•ï¼Œæ‰©å±•åçš„åŠŸèƒ½ä¸º <code>P</code>ï¼Œå…¶ä¸­ <code>P</code> ç”±åŸæœ‰åŠŸèƒ½ <code>P1</code> ä¸æ–°åŠŸèƒ½ <code>P2</code> ç»„æˆã€‚æ–°åŠŸèƒ½ <code>P</code> ç”±ç±» <code>A</code> çš„å­ç±» <code>B</code> æ¥å®Œæˆï¼Œåˆ™å­ç±» <code>B</code> åœ¨å®Œæˆæ–°åŠŸèƒ½ <code>P2</code> çš„åŒæ—¶ï¼Œæœ‰å¯èƒ½ä¼šå¯¼è‡´åŸæœ‰åŠŸèƒ½ <code>P1</code> å‘ç”Ÿæ•…éšœã€‚</p>
<h3 id="é‡Œæ°æ›¿æ¢æ³¨æ„ç‚¹"><a href="#é‡Œæ°æ›¿æ¢æ³¨æ„ç‚¹" class="headerlink" title="é‡Œæ°æ›¿æ¢æ³¨æ„ç‚¹"></a>é‡Œæ°æ›¿æ¢æ³¨æ„ç‚¹</h3><blockquote>
<p>é‡Œæ°æ›¿æ¢åŸåˆ™é€šä¿—çš„æ¥è®²å°±æ˜¯ï¼šå­ç±»å¯ä»¥æ‰©å±•çˆ¶ç±»çš„åŠŸèƒ½ï¼Œä½†ä¸èƒ½æ”¹å˜çˆ¶ç±»åŸæœ‰çš„åŠŸèƒ½ã€‚</p>
</blockquote>
<ul>
<li>å­ç±»å¯ä»¥å®ç°çˆ¶ç±»çš„æŠ½è±¡æ–¹æ³•ï¼Œä½†ä¸èƒ½è¦†ç›–çˆ¶ç±»çš„éæŠ½è±¡æ–¹æ³•</li>
<li>å­ç±»ä¸­å¯ä»¥å¢åŠ è‡ªå·±ç‰¹æœ‰çš„æ–¹æ³•</li>
<li>å½“å­ç±»çš„æ–¹æ³•é‡è½½çˆ¶ç±»çš„æ–¹æ³•æ—¶ï¼Œæ–¹æ³•çš„å‰ç½®æ¡ä»¶ï¼ˆå³æ–¹æ³•çš„å½¢å‚ï¼‰è¦æ¯”çˆ¶ç±»æ–¹æ³•çš„è¾“å…¥å‚æ•°æ›´å®½æ¾</li>
<li>å½“å­ç±»çš„æ–¹æ³•å®ç°çˆ¶ç±»çš„æŠ½è±¡æ–¹æ³•æ—¶ï¼Œæ–¹æ³•çš„åç½®æ¡ä»¶ï¼ˆå³æ–¹æ³•çš„è¿”å›å€¼ï¼‰è¦æ¯”çˆ¶ç±»æ›´ä¸¥æ ¼</li>
</ul>
<h2 id="ä¾èµ–å€’ç½®åŸåˆ™"><a href="#ä¾èµ–å€’ç½®åŸåˆ™" class="headerlink" title="ä¾èµ–å€’ç½®åŸåˆ™"></a>ä¾èµ–å€’ç½®åŸåˆ™</h2><p>ä¾èµ–å€’ç½®åŸåˆ™ - <code>DIP: Dependence Inversion Principle</code></p>
<blockquote>
<p>é¢å‘æ¥å£ç¼–ç¨‹ã€‚</p>
</blockquote>
<h3 id="ä¾èµ–å€’ç½®å®šä¹‰"><a href="#ä¾èµ–å€’ç½®å®šä¹‰" class="headerlink" title="ä¾èµ–å€’ç½®å®šä¹‰"></a>ä¾èµ–å€’ç½®å®šä¹‰</h3><p>é«˜å±‚æ¨¡å—ä¸åº”è¯¥ä¾èµ–ä½å±‚æ¨¡å—ï¼ŒäºŒè€…éƒ½åº”è¯¥ä¾èµ–å…¶æŠ½è±¡ï¼›æŠ½è±¡ä¸åº”è¯¥ä¾èµ–ç»†èŠ‚ï¼Œç»†èŠ‚åº”è¯¥ä¾èµ–æŠ½è±¡ã€‚</p>
<h3 id="ä¾èµ–å€’ç½®é—®é¢˜ç”±æ¥"><a href="#ä¾èµ–å€’ç½®é—®é¢˜ç”±æ¥" class="headerlink" title="ä¾èµ–å€’ç½®é—®é¢˜ç”±æ¥"></a>ä¾èµ–å€’ç½®é—®é¢˜ç”±æ¥</h3><p>ç±» <code>A</code> ç›´æ¥ä¾èµ–ç±» <code>B</code>ï¼Œå‡å¦‚è¦å°†ç±» <code>A</code> æ”¹ä¸ºä¾èµ–ç±» <code>C</code>ï¼Œåˆ™å¿…é¡»é€šè¿‡ä¿®æ”¹ç±» <code>A</code> çš„ä»£ç æ¥è¾¾æˆã€‚è¿™ç§åœºæ™¯ä¸‹ï¼Œç±» <code>A</code> ä¸€èˆ¬æ˜¯é«˜å±‚æ¨¡å—ï¼Œè´Ÿè´£å¤æ‚çš„ä¸šåŠ¡é€»è¾‘ï¼›ç±» <code>B</code> å’Œç±» <code>C</code> æ˜¯ä½å±‚æ¨¡å—ï¼Œè´Ÿè´£åŸºæœ¬çš„åŸå­æ“ä½œï¼›å‡å¦‚ä¿®æ”¹ç±» <code>A</code>ï¼Œä¼šç»™ç¨‹åºå¸¦æ¥ä¸å¿…è¦çš„é£é™©ã€‚</p>
<h3 id="ä¾èµ–å€’ç½®æ³¨æ„ç‚¹"><a href="#ä¾èµ–å€’ç½®æ³¨æ„ç‚¹" class="headerlink" title="ä¾èµ–å€’ç½®æ³¨æ„ç‚¹"></a>ä¾èµ–å€’ç½®æ³¨æ„ç‚¹</h3><ul>
<li>ä½å±‚æ¨¡å—å°½é‡éƒ½è¦æœ‰æŠ½è±¡ç±»æˆ–æ¥å£ï¼Œæˆ–è€…ä¸¤è€…éƒ½æœ‰</li>
<li>å˜é‡çš„å£°æ˜ç±»å‹å°½é‡æ˜¯æŠ½è±¡ç±»æˆ–æ¥å£</li>
<li>ä½¿ç”¨ç»§æ‰¿æ—¶éµå¾ªé‡Œæ°æ›¿æ¢åŸåˆ™</li>
</ul>
<h2 id="æ¥å£éš”ç¦»åŸåˆ™"><a href="#æ¥å£éš”ç¦»åŸåˆ™" class="headerlink" title="æ¥å£éš”ç¦»åŸåˆ™"></a>æ¥å£éš”ç¦»åŸåˆ™</h2><p>æ¥å£éš”ç¦»åŸåˆ™ - <code>ISP: Interface Segregation Principle</code></p>
<blockquote>
<ul>
<li>è®¾è®¡æ¥å£çš„æ—¶å€™è¦ç²¾ç®€å•ä¸€</li>
<li>å¤šç”¨ç»„åˆï¼Œå°‘ç”¨ç»§æ‰¿ï¼Œ<code>Has</code> å…³ç³»ç»„åˆï¼Œ<code>Is</code> å…³ç³»ç»§æ‰¿</li>
</ul>
</blockquote>
<h3 id="æ¥å£éš”ç¦»å®šä¹‰"><a href="#æ¥å£éš”ç¦»å®šä¹‰" class="headerlink" title="æ¥å£éš”ç¦»å®šä¹‰"></a>æ¥å£éš”ç¦»å®šä¹‰</h3><p>å®¢æˆ·ç«¯ä¸åº”è¯¥ä¾èµ–å®ƒä¸éœ€è¦çš„æ¥å£ï¼Œä¸€ä¸ªç±»å¯¹å¦ä¸€ä¸ªç±»çš„ä¾èµ–åº”è¯¥å»ºç«‹åœ¨æœ€å°çš„æ¥å£ä¸Šã€‚</p>
<h3 id="æ¥å£éš”ç¦»é—®é¢˜ç”±æ¥"><a href="#æ¥å£éš”ç¦»é—®é¢˜ç”±æ¥" class="headerlink" title="æ¥å£éš”ç¦»é—®é¢˜ç”±æ¥"></a>æ¥å£éš”ç¦»é—®é¢˜ç”±æ¥</h3><p>ç±» <code>A</code> é€šè¿‡æ¥å£ <code>I</code> ä¾èµ–ç±» <code>B</code>ï¼Œç±» <code>C</code> é€šè¿‡æ¥å£ <code>I</code> ä¾èµ–ç±» <code>D</code>ï¼Œå¦‚æœæ¥å£ <code>I</code> å¯¹äºç±» <code>A</code> å’Œç±» <code>B</code> æ¥è¯´ä¸æ˜¯æœ€å°æ¥å£ï¼Œåˆ™ç±» <code>B</code> å’Œç±» <code>D</code> å¿…é¡»å»å®ç°ä»–ä»¬ä¸éœ€è¦çš„æ–¹æ³•ã€‚</p>
<p>å°†è‡ƒè‚¿çš„æ¥å£ <code>I</code> æ‹†åˆ†ä¸ºç‹¬ç«‹çš„å‡ ä¸ªæ¥å£ï¼Œç±» <code>A</code> å’Œç±» <code>C</code> åˆ†åˆ«ä¸ä»–ä»¬éœ€è¦çš„æ¥å£å»ºç«‹ä¾èµ–å…³ç³»ã€‚ä¹Ÿå°±æ˜¯é‡‡ç”¨æ¥å£éš”ç¦»åŸåˆ™ã€‚</p>
<h3 id="æ¥å£éš”ç¦»æ³¨æ„ç‚¹"><a href="#æ¥å£éš”ç¦»æ³¨æ„ç‚¹" class="headerlink" title="æ¥å£éš”ç¦»æ³¨æ„ç‚¹"></a>æ¥å£éš”ç¦»æ³¨æ„ç‚¹</h3><ul>
<li>æ¥å£å°½é‡å°ï¼Œä½†æ˜¯è¦æœ‰é™åº¦ã€‚å¯¹æ¥å£è¿›è¡Œç»†åŒ–å¯ä»¥æé«˜ç¨‹åºè®¾è®¡çµæ´»æ€§æ˜¯ä¸äº‰çš„äº‹å®ï¼Œä½†æ˜¯å¦‚æœè¿‡å°ï¼Œåˆ™ä¼šé€ æˆæ¥å£æ•°é‡è¿‡å¤šï¼Œä½¿è®¾è®¡å¤æ‚åŒ–ã€‚æ‰€ä»¥ä¸€å®šè¦é€‚åº¦</li>
<li>ä¸ºä¾èµ–æ¥å£çš„ç±»å®šåˆ¶æœåŠ¡ï¼Œåªæš´éœ²ç»™è°ƒç”¨çš„ç±»å®ƒéœ€è¦çš„æ–¹æ³•ï¼Œå®ƒä¸éœ€è¦çš„æ–¹æ³•åˆ™éšè—èµ·æ¥ã€‚åªæœ‰ä¸“æ³¨åœ°ä¸ºä¸€ä¸ªæ¨¡å—æä¾›å®šåˆ¶æœåŠ¡ï¼Œæ‰èƒ½å»ºç«‹æœ€å°çš„ä¾èµ–å…³ç³»</li>
<li>æé«˜å†…èšï¼Œå‡å°‘å¯¹å¤–äº¤äº’ã€‚ä½¿æ¥å£ç”¨æœ€å°‘çš„æ–¹æ³•å»å®Œæˆæœ€å¤šçš„äº‹æƒ…</li>
</ul>
<h2 id="è¿ªç±³ç‰¹æ³•åˆ™"><a href="#è¿ªç±³ç‰¹æ³•åˆ™" class="headerlink" title="è¿ªç±³ç‰¹æ³•åˆ™"></a>è¿ªç±³ç‰¹æ³•åˆ™</h2><p>è¿ªç±³ç‰¹æ³•åˆ™ - <code>LKP: Least Knowledge Principle</code></p>
<blockquote>
<p>é™ä½è€¦åˆåªä¸ç›´æ¥çš„æœ‹å‹é€šä¿¡ã€‚</p>
</blockquote>
<h3 id="è¿ªç±³ç‰¹æ³•åˆ™å®šä¹‰"><a href="#è¿ªç±³ç‰¹æ³•åˆ™å®šä¹‰" class="headerlink" title="è¿ªç±³ç‰¹æ³•åˆ™å®šä¹‰"></a>è¿ªç±³ç‰¹æ³•åˆ™å®šä¹‰</h3><p>ä¸€ä¸ªå¯¹è±¡åº”è¯¥å¯¹å…¶ä»–å¯¹è±¡ä¿æŒæœ€å°‘çš„äº†è§£ã€‚</p>
<h3 id="è¿ªç±³ç‰¹æ³•åˆ™é—®é¢˜ç”±æ¥"><a href="#è¿ªç±³ç‰¹æ³•åˆ™é—®é¢˜ç”±æ¥" class="headerlink" title="è¿ªç±³ç‰¹æ³•åˆ™é—®é¢˜ç”±æ¥"></a>è¿ªç±³ç‰¹æ³•åˆ™é—®é¢˜ç”±æ¥</h3><p>ç±»ä¸ç±»ä¹‹é—´çš„å…³ç³»è¶Šå¯†åˆ‡ï¼Œè€¦åˆåº¦è¶Šå¤§ï¼Œå½“ä¸€ä¸ªç±»å‘ç”Ÿæ”¹å˜æ—¶ï¼Œå¯¹å¦ä¸€ä¸ªç±»çš„å½±å“ä¹Ÿè¶Šå¤§ã€‚</p>
<p>å°½é‡é™ä½ç±»ä¸ç±»ä¹‹é—´çš„è€¦åˆã€‚</p>
<h3 id="è¿ªç±³ç‰¹æ³•åˆ™æ³¨æ„ç‚¹"><a href="#è¿ªç±³ç‰¹æ³•åˆ™æ³¨æ„ç‚¹" class="headerlink" title="è¿ªç±³ç‰¹æ³•åˆ™æ³¨æ„ç‚¹"></a>è¿ªç±³ç‰¹æ³•åˆ™æ³¨æ„ç‚¹</h3><ul>
<li>è¿‡åˆ†çš„ä½¿ç”¨è¿ªç±³ç‰¹åŸåˆ™ï¼Œä¼šäº§ç”Ÿå¤§é‡è¿™æ ·çš„ä¸­ä»‹å’Œä¼ é€’ç±»ï¼Œå¯¼è‡´ç³»ç»Ÿå¤æ‚åº¦å˜å¤§</li>
<li>åœ¨é‡‡ç”¨è¿ªç±³ç‰¹æ³•åˆ™æ—¶è¦åå¤æƒè¡¡ï¼Œæ—¢åšåˆ°ç»“æ„æ¸…æ™°ï¼Œåˆè¦é«˜å†…èšä½è€¦åˆ</li>
</ul>
<h2 id="å¼€é—­åŸåˆ™"><a href="#å¼€é—­åŸåˆ™" class="headerlink" title="å¼€é—­åŸåˆ™"></a>å¼€é—­åŸåˆ™</h2><p>å¼€é—­åŸåˆ™ - <code>OCP: Open Closed Principle</code></p>
<blockquote>
<p>æ‰©å±•å¼€æ”¾ï¼Œå¯¹ä¿®æ”¹å…³é—­ã€‚</p>
</blockquote>
<h3 id="å¼€é—­åŸåˆ™å®šä¹‰"><a href="#å¼€é—­åŸåˆ™å®šä¹‰" class="headerlink" title="å¼€é—­åŸåˆ™å®šä¹‰"></a>å¼€é—­åŸåˆ™å®šä¹‰</h3><p>ä¸€ä¸ªè½¯ä»¶å®ä½“å¦‚ç±» / æ¨¡å—å’Œå‡½æ•°åº”è¯¥å¯¹æ‰©å±•å¼€æ”¾ï¼Œå¯¹ä¿®æ”¹å…³é—­ã€‚</p>
<h3 id="å¼€é—­åŸåˆ™é—®é¢˜ç”±æ¥"><a href="#å¼€é—­åŸåˆ™é—®é¢˜ç”±æ¥" class="headerlink" title="å¼€é—­åŸåˆ™é—®é¢˜ç”±æ¥"></a>å¼€é—­åŸåˆ™é—®é¢˜ç”±æ¥</h3><p>åœ¨è½¯ä»¶çš„ç”Ÿå‘½å‘¨æœŸå†…ï¼Œå› ä¸ºå˜åŒ– / å‡çº§å’Œç»´æŠ¤ç­‰åŸå› éœ€è¦å¯¹è½¯ä»¶åŸæœ‰ä»£ç è¿›è¡Œä¿®æ”¹æ—¶ï¼Œå¯èƒ½ä¼šç»™æ—§ä»£ç ä¸­å¼•å…¥é”™è¯¯ï¼Œä¹Ÿå¯èƒ½ä¼šä½¿æˆ‘ä»¬ä¸å¾—ä¸å¯¹æ•´ä¸ªåŠŸèƒ½è¿›è¡Œé‡æ„ï¼Œå¹¶ä¸”éœ€è¦åŸæœ‰ä»£ç ç»è¿‡é‡æ–°æµ‹è¯•ã€‚</p>
<p>å½“è½¯ä»¶éœ€è¦å˜åŒ–æ—¶ï¼Œå°½é‡é€šè¿‡æ‰©å±•è½¯ä»¶å®ä½“çš„è¡Œä¸ºæ¥å®ç°å˜åŒ–ï¼Œè€Œä¸æ˜¯é€šè¿‡ä¿®æ”¹å·²æœ‰çš„ä»£ç æ¥å®ç°å˜åŒ–ã€‚</p>
<h3 id="å¼€é—­åŸåˆ™æ³¨æ„ç‚¹"><a href="#å¼€é—­åŸåˆ™æ³¨æ„ç‚¹" class="headerlink" title="å¼€é—­åŸåˆ™æ³¨æ„ç‚¹"></a>å¼€é—­åŸåˆ™æ³¨æ„ç‚¹</h3><ul>
<li>ç”¨æŠ½è±¡æ„å»ºæ¡†æ¶ï¼Œç”¨å®ç°æ‰©å±•ç»†èŠ‚</li>
<li>æŠ½è±¡çµæ´»æ€§å¥½ï¼Œé€‚åº”æ€§å¹¿ï¼Œåªè¦æŠ½è±¡çš„åˆç†ï¼Œå¯ä»¥åŸºæœ¬ä¿æŒè½¯ä»¶æ¶æ„çš„ç¨³å®š</li>
<li>è€Œè½¯ä»¶ä¸­æ˜“å˜çš„ç»†èŠ‚ï¼Œæˆ‘ä»¬ç”¨ä»æŠ½è±¡æ´¾ç”Ÿçš„å®ç°ç±»æ¥è¿›è¡Œæ‰©å±•ï¼Œå½“è½¯ä»¶éœ€è¦å‘ç”Ÿå˜åŒ–æ—¶ï¼Œæˆ‘ä»¬åªéœ€è¦æ ¹æ®éœ€æ±‚é‡æ–°æ´¾ç”Ÿä¸€ä¸ªå®ç°ç±»æ¥æ‰©å±•å°±å¯ä»¥äº†</li>
</ul>
]]></content>
      <categories>
        <category>basic</category>
      </categories>
      <tags>
        <tag>basic</tag>
      </tags>
  </entry>
  <entry>
    <title>Git æŸ¥çœ‹æ—¥å¿—</title>
    <url>/2018/01/24/git-log/</url>
    <content><![CDATA[<p>ğŸ˜‡ åœ¨æäº¤äº†è‹¥å¹²æ›´æ–°ä¹‹åï¼Œåˆæˆ–è€…å…‹éš†äº†æŸä¸ªé¡¹ç›®ï¼Œæƒ³å›é¡¾ä¸‹æäº¤å†å²ï¼Œå¯ä»¥ä½¿ç”¨ git log å‘½ä»¤æŸ¥çœ‹ã€‚</p>
<span id="more"></span>
<ul>
<li><a href="https://imajinyun.xyz/2018/01/22/git-started/"><code>Git èµ·æ­¥</code></a></li>
<li><a href="https://imajinyun.xyz/2018/01/23/git-basic/"><code>Git åŸºæœ¬æ“ä½œ</code></a></li>
<li><a href="https://imajinyun.xyz/2018/01/24/git-log/"><strong>Git æŸ¥çœ‹æ—¥å¿—</strong></a></li>
<li><a href="https://imajinyun.xyz/2018/01/25/git-branch/"><code>Git åˆ†æ”¯</code></a></li>
<li><a href="https://imajinyun.xyz/2018/01/27/git-multiple-accounts/"><code>Git ä¸­ä¸€ä¸ªå®¢æˆ·ç«¯è®¾ç½®å¤šä¸ªè´¦å·</code></a></li>
<li><a href="https://imajinyun.xyz/2018/05/01/git-workflow/"><code>Git Workflow</code></a></li>
<li><a href="https://imajinyun.xyz/2020/09/07/git-collection-command/"><code>Git å‘½ä»¤å¤§å…¨</code></a></li>
</ul>
<h1 id="å¸¸ç”¨é€‰é¡¹"><a href="#å¸¸ç”¨é€‰é¡¹" class="headerlink" title="å¸¸ç”¨é€‰é¡¹"></a>å¸¸ç”¨é€‰é¡¹</h1><table>
<thead>
<tr>
<th>é€‰é¡¹</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>-p</code></td>
<td>æŒ‰è¡¥ä¸æ ¼å¼æ˜¾ç¤ºæ¯ä¸ªæ›´æ–°ä¹‹é—´çš„å·®å¼‚</td>
</tr>
<tr>
<td><code>--word-diff</code></td>
<td>æŒ‰ <code>word diff</code> æ ¼å¼æ˜¾ç¤ºå·®å¼‚</td>
</tr>
<tr>
<td><code>--stat</code></td>
<td>æ˜¾ç¤ºæ¯æ¬¡æ›´æ–°çš„æ–‡ä»¶ä¿®æ”¹ç»Ÿè®¡ä¿¡æ¯</td>
</tr>
<tr>
<td><code>--shortstat</code></td>
<td>åªæ˜¾ç¤º <code>--stat</code> ä¸­æœ€åçš„è¡Œæ•°ä¿®æ”¹æ·»åŠ ç§»é™¤ç»Ÿè®¡</td>
</tr>
<tr>
<td><code>--name-only</code></td>
<td>ä»…åœ¨æäº¤ä¿¡æ¯åæ˜¾ç¤ºå·²ä¿®æ”¹çš„æ–‡ä»¶æ¸…å•</td>
</tr>
<tr>
<td><code>--name-status</code></td>
<td>æ˜¾ç¤ºæ–°å¢ã€ä¿®æ”¹ã€åˆ é™¤çš„æ–‡ä»¶æ¸…å•</td>
</tr>
<tr>
<td><code>--abbrev-commit</code></td>
<td>ä»…æ˜¾ç¤º <code>SHA-1</code> çš„å‰å‡ ä¸ªå­—ç¬¦ï¼Œè€Œéæ‰€æœ‰çš„ <code>40</code> ä¸ªå­—ç¬¦</td>
</tr>
<tr>
<td><code>--relative-date</code></td>
<td>ä½¿ç”¨è¾ƒçŸ­çš„ç›¸å¯¹æ—¶é—´æ˜¾ç¤ºï¼ˆæ¯”å¦‚ï¼š<code>2 weeks ago</code>ï¼‰</td>
</tr>
<tr>
<td><code>--graph</code></td>
<td>æ˜¾ç¤º <code>ASCII</code> å›¾å½¢è¡¨ç¤ºçš„åˆ†æ”¯åˆå¹¶å†å²</td>
</tr>
<tr>
<td><code>--pretty</code></td>
<td>ä½¿ç”¨å…¶ä»–æ ¼å¼æ˜¾ç¤ºå†å²æäº¤ä¿¡æ¯ã€‚å¯ç”¨çš„é€‰é¡¹åŒ…æ‹¬ <code>oneline, short, full, fuller</code> å’Œ <code>format</code>ï¼ˆåè·ŸæŒ‡å®šæ ¼å¼ï¼‰</td>
</tr>
<tr>
<td><code>--oneline</code></td>
<td><code>--pretty=oneline --abbrev-commit</code> çš„ç®€åŒ–ç”¨æ³•</td>
</tr>
</tbody>
</table>
<h1 id="é¡¹ç›®å‡†å¤‡"><a href="#é¡¹ç›®å‡†å¤‡" class="headerlink" title="é¡¹ç›®å‡†å¤‡"></a>é¡¹ç›®å‡†å¤‡</h1><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// æ­¤å¤„ä»¥ vue åšæ¼”ç¤º</span><br><span class="line">$ <span class="built_in">cd</span> ~/Desktop/</span><br><span class="line">$ git <span class="built_in">clone</span> https://github.com/vuejs/vue.git</span><br><span class="line">Cloning into <span class="string">&#x27;vue&#x27;</span>...</span><br><span class="line">remote: Enumerating objects: 89, <span class="keyword">done</span>.</span><br><span class="line">remote: Counting objects: 100% (89/89), <span class="keyword">done</span>.</span><br><span class="line">remote: Compressing objects: 100% (64/64), <span class="keyword">done</span>.</span><br><span class="line">remote: Total 53631 (delta 38), reused 51 (delta 25), pack-reused 53542</span><br><span class="line">Receiving objects: 100% (53631/53631), 25.20 MiB | 1.76 MiB/s, <span class="keyword">done</span>.</span><br><span class="line">Resolving deltas: 100% (37410/37410), <span class="keyword">done</span>.</span><br><span class="line">$ <span class="built_in">cd</span> vue</span><br></pre></td></tr></table></figure>
<h1 id="æ™®é€šæ ¼å¼æŸ¥çœ‹"><a href="#æ™®é€šæ ¼å¼æŸ¥çœ‹" class="headerlink" title="æ™®é€šæ ¼å¼æŸ¥çœ‹"></a>æ™®é€šæ ¼å¼æŸ¥çœ‹</h1><h2 id="æŸ¥çœ‹å½“å‰åˆ†æ”¯çš„æ‰€æœ‰ç®€ç•¥æ—¥å¿—"><a href="#æŸ¥çœ‹å½“å‰åˆ†æ”¯çš„æ‰€æœ‰ç®€ç•¥æ—¥å¿—" class="headerlink" title="æŸ¥çœ‹å½“å‰åˆ†æ”¯çš„æ‰€æœ‰ç®€ç•¥æ—¥å¿—"></a>æŸ¥çœ‹å½“å‰åˆ†æ”¯çš„æ‰€æœ‰ç®€ç•¥æ—¥å¿—</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">commit 38e967b8067441ff37cb3b923200023a6b842759 (HEAD -&gt; dev, origin/dev, origin/HEAD)</span><br><span class="line">Author: Xin Du (Clark) &lt;clark.duxin@gmail.com&gt;</span><br><span class="line">Date:   Wed Dec 12 16:41:45 2018 +0000</span><br><span class="line"></span><br><span class="line">    refactor: tiny cleanup changes (<span class="comment">#9193)</span></span><br><span class="line"></span><br><span class="line">commit af9e2b3f0f4156fd52ed4444b96e2b8c0932c658</span><br><span class="line">Author: Nick Hall &lt;iamssb@gmail.com&gt;</span><br><span class="line">Date:   Thu Dec 13 01:41:36 2018 +0900</span><br><span class="line"></span><br><span class="line">    chore: minor comment cleanup (<span class="comment">#9191)</span></span><br><span class="line">    ...</span><br></pre></td></tr></table></figure>
<h2 id="æŸ¥çœ‹æ‰€æœ‰åˆ†æ”¯çš„æ‰€æœ‰ç®€ç•¥æ—¥å¿—"><a href="#æŸ¥çœ‹æ‰€æœ‰åˆ†æ”¯çš„æ‰€æœ‰ç®€ç•¥æ—¥å¿—" class="headerlink" title="æŸ¥çœ‹æ‰€æœ‰åˆ†æ”¯çš„æ‰€æœ‰ç®€ç•¥æ—¥å¿—"></a>æŸ¥çœ‹æ‰€æœ‰åˆ†æ”¯çš„æ‰€æœ‰ç®€ç•¥æ—¥å¿—</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ git <span class="built_in">log</span> --all</span><br><span class="line">commit ce35159d6d6e9c3607bd3232e386b5b994d0ec49 (origin/2.6)</span><br><span class="line">Author: Evan You &lt;yyx990803@gmail.com&gt;</span><br><span class="line">Date:   Wed Dec 26 17:22:32 2018 -0500</span><br><span class="line"></span><br><span class="line">    chore: fix types</span><br><span class="line"></span><br><span class="line">commit c7c13c2a156269d29fd9c9f8f6a3e53a2f2cac3d</span><br><span class="line">Author: Evan You &lt;yyx990803@gmail.com&gt;</span><br><span class="line">Date:   Wed Dec 26 17:17:30 2018 -0500</span><br><span class="line"></span><br><span class="line">    fix(scoped-slots): ensure <span class="variable">$scopedSlots</span> calls always <span class="built_in">return</span> Arrays</span><br><span class="line"></span><br><span class="line">    Also allow render <span class="built_in">functions</span> to <span class="built_in">return</span> an Array of a single element.</span><br><span class="line">    Close <span class="comment">#8056</span></span><br><span class="line"></span><br><span class="line">commit d747469e1ae26190d364e5cc9c8112d3d865a0b9</span><br><span class="line">Author: Evan You &lt;yyx990803@gmail.com&gt;</span><br><span class="line">Date:   Wed Dec 26 16:02:50 2018 -0500</span><br><span class="line"></span><br><span class="line">    <span class="built_in">test</span>: <span class="built_in">test</span> <span class="keyword">case</span> <span class="keyword">for</span> v-for native collection support</span><br><span class="line">    ...</span><br></pre></td></tr></table></figure>
<h2 id="æŸ¥çœ‹æŸä¸ªæ–‡ä»¶å˜åŠ¨çš„å…·ä½“æ—¥å¿—ä¿¡æ¯"><a href="#æŸ¥çœ‹æŸä¸ªæ–‡ä»¶å˜åŠ¨çš„å…·ä½“æ—¥å¿—ä¿¡æ¯" class="headerlink" title="æŸ¥çœ‹æŸä¸ªæ–‡ä»¶å˜åŠ¨çš„å…·ä½“æ—¥å¿—ä¿¡æ¯"></a>æŸ¥çœ‹æŸä¸ªæ–‡ä»¶å˜åŠ¨çš„å…·ä½“æ—¥å¿—ä¿¡æ¯</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ git <span class="built_in">log</span> -- src/core/index.js</span><br><span class="line">commit 9b22d86ab315a3c6061a6a4776eab1964304f92e</span><br><span class="line">Author: Evan You &lt;yyx990803@gmail.com&gt;</span><br><span class="line">Date:   Thu Mar 8 09:51:03 2018 -0500</span><br><span class="line"></span><br><span class="line">    fix: install ssr helpers <span class="keyword">for</span> functional context during SSR</span><br><span class="line"></span><br><span class="line">    close <span class="comment">#7443, ref nuxt/nuxt.js#2565</span></span><br><span class="line"></span><br><span class="line">commit 55816543c46e75aa53481ac95a89ff6f87a2d704</span><br><span class="line">Author: JK &lt;jingkai.zhao@foxmail.com&gt;</span><br><span class="line">Date:   Thu Jun 29 12:37:03 2017 +0800</span><br><span class="line"></span><br><span class="line">    fix(ssr): reference error when create <span class="variable">$ssrContext</span> <span class="keyword">for</span> root component (<span class="comment">#5981)</span></span><br><span class="line"></span><br><span class="line">    fix <span class="comment">#5941</span></span><br><span class="line">    ...</span><br></pre></td></tr></table></figure>
<h2 id="æŸ¥çœ‹æŸä¸ªæ–‡ä»¶å˜åŠ¨çš„å…·ä½“æ—¥å¿—ä¿¡æ¯å’Œæ–‡ä»¶å†…å®¹"><a href="#æŸ¥çœ‹æŸä¸ªæ–‡ä»¶å˜åŠ¨çš„å…·ä½“æ—¥å¿—ä¿¡æ¯å’Œæ–‡ä»¶å†…å®¹" class="headerlink" title="æŸ¥çœ‹æŸä¸ªæ–‡ä»¶å˜åŠ¨çš„å…·ä½“æ—¥å¿—ä¿¡æ¯å’Œæ–‡ä»¶å†…å®¹"></a>æŸ¥çœ‹æŸä¸ªæ–‡ä»¶å˜åŠ¨çš„å…·ä½“æ—¥å¿—ä¿¡æ¯å’Œæ–‡ä»¶å†…å®¹</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ git <span class="built_in">log</span> --follow -p -- src/core/index.js</span><br><span class="line">commit 9b22d86ab315a3c6061a6a4776eab1964304f92e</span><br><span class="line">Author: Evan You &lt;yyx990803@gmail.com&gt;</span><br><span class="line">Date:   Thu Mar 8 09:51:03 2018 -0500</span><br><span class="line"></span><br><span class="line">    fix: install ssr helpers <span class="keyword">for</span> functional context during SSR</span><br><span class="line"></span><br><span class="line">    close <span class="comment">#7443, ref nuxt/nuxt.js#2565</span></span><br><span class="line"></span><br><span class="line">diff --git a/src/core/index.js b/src/core/index.js</span><br><span class="line">index b2a0cb8c..daf6203b 100644</span><br><span class="line">--- a/src/core/index.js</span><br><span class="line">+++ b/src/core/index.js</span><br><span class="line">@@ -1,6 +1,7 @@</span><br><span class="line"> import Vue from <span class="string">&#x27;./instance/index&#x27;</span></span><br><span class="line"> import &#123; initGlobalAPI &#125; from <span class="string">&#x27;./global-api/index&#x27;</span></span><br><span class="line"> import &#123; isServerRendering &#125; from <span class="string">&#x27;core/util/env&#x27;</span></span><br><span class="line">+import &#123; FunctionalRenderContext &#125; from <span class="string">&#x27;core/vdom/create-functional-component&#x27;</span></span><br><span class="line">...</span><br></pre></td></tr></table></figure>
<h2 id="æŸ¥çœ‹æœ€è¿‘ä¸¤æ¬¡æ›´æ–°çš„å†…å®¹å·®å¼‚"><a href="#æŸ¥çœ‹æœ€è¿‘ä¸¤æ¬¡æ›´æ–°çš„å†…å®¹å·®å¼‚" class="headerlink" title="æŸ¥çœ‹æœ€è¿‘ä¸¤æ¬¡æ›´æ–°çš„å†…å®¹å·®å¼‚"></a>æŸ¥çœ‹æœ€è¿‘ä¸¤æ¬¡æ›´æ–°çš„å†…å®¹å·®å¼‚</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ git <span class="built_in">log</span> -p -2</span><br><span class="line">commit 38e967b8067441ff37cb3b923200023a6b842759 (HEAD -&gt; dev, origin/dev, origin/HEAD)</span><br><span class="line">Author: Xin Du (Clark) &lt;clark.duxin@gmail.com&gt;</span><br><span class="line">Date:   Wed Dec 12 16:41:45 2018 +0000</span><br><span class="line"></span><br><span class="line">    refactor: tiny cleanup changes (<span class="comment">#9193)</span></span><br><span class="line"></span><br><span class="line">diff --git a/src/core/instance/events.js b/src/core/instance/events.js</span><br><span class="line">index 8225bdec..bb07a96b 100644</span><br><span class="line">--- a/src/core/instance/events.js</span><br><span class="line">+++ b/src/core/instance/events.js</span><br><span class="line">@@ -102,16 +102,14 @@ <span class="built_in">export</span> <span class="keyword">function</span> eventsMixin (Vue: Class&lt;Component&gt;) &#123;</span><br><span class="line">       vm._events[event] = null</span><br><span class="line">       <span class="built_in">return</span> vm</span><br><span class="line">     &#125;</span><br><span class="line">-    <span class="keyword">if</span> (fn) &#123;</span><br><span class="line">-      // specific handler</span><br><span class="line">-      <span class="built_in">let</span> cb</span><br><span class="line">-      <span class="built_in">let</span> i = cbs.length</span><br><span class="line">-      <span class="keyword">while</span> (i--) &#123;</span><br><span class="line">-        cb = cbs[i]</span><br><span class="line">-        <span class="keyword">if</span> (cb === fn || cb.fn === fn) &#123;</span><br><span class="line">-          cbs.splice(i, 1)</span><br><span class="line">-          <span class="built_in">break</span></span><br><span class="line">-        &#125;</span><br><span class="line">+    // specific handler</span><br><span class="line">+    <span class="built_in">let</span> cb</span><br><span class="line">+    <span class="built_in">let</span> i = cbs.length</span><br><span class="line">+    <span class="keyword">while</span> (i--) &#123;</span><br><span class="line">+      cb = cbs[i]</span><br><span class="line">+      <span class="keyword">if</span> (cb === fn || cb.fn === fn) &#123;</span><br><span class="line">+        cbs.splice(i, 1)</span><br><span class="line">+        <span class="built_in">break</span></span><br><span class="line">       &#125;</span><br><span class="line">     &#125;</span><br><span class="line">     <span class="built_in">return</span> vm</span><br><span class="line">...</span><br></pre></td></tr></table></figure>
<h2 id="æŸ¥çœ‹æœ€è¿‘çš„ä¸‰æ¡çš„ç®€ç•¥æ—¥å¿—"><a href="#æŸ¥çœ‹æœ€è¿‘çš„ä¸‰æ¡çš„ç®€ç•¥æ—¥å¿—" class="headerlink" title="æŸ¥çœ‹æœ€è¿‘çš„ä¸‰æ¡çš„ç®€ç•¥æ—¥å¿—"></a>æŸ¥çœ‹æœ€è¿‘çš„ä¸‰æ¡çš„ç®€ç•¥æ—¥å¿—</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ git <span class="built_in">log</span> --oneline -n3</span><br><span class="line">38e967b8 (HEAD -&gt; dev, origin/dev, origin/HEAD) refactor: tiny cleanup changes (<span class="comment">#9193)</span></span><br><span class="line">af9e2b3f chore: minor comment cleanup (<span class="comment">#9191)</span></span><br><span class="line">b06c784b fix(ssr): support rendering comment (<span class="comment">#9128)</span></span><br></pre></td></tr></table></figure>
<h2 id="æ˜¾ç¤ºç®€è¦çš„å¢æ”¹è¡Œæ•°ç»Ÿè®¡"><a href="#æ˜¾ç¤ºç®€è¦çš„å¢æ”¹è¡Œæ•°ç»Ÿè®¡" class="headerlink" title="æ˜¾ç¤ºç®€è¦çš„å¢æ”¹è¡Œæ•°ç»Ÿè®¡"></a>æ˜¾ç¤ºç®€è¦çš„å¢æ”¹è¡Œæ•°ç»Ÿè®¡</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ git <span class="built_in">log</span> --<span class="built_in">stat</span></span><br><span class="line">commit 38e967b8067441ff37cb3b923200023a6b842759 (HEAD -&gt; dev, origin/dev, origin/HEAD)</span><br><span class="line">Author: Xin Du (Clark) &lt;clark.duxin@gmail.com&gt;</span><br><span class="line">Date:   Wed Dec 12 16:41:45 2018 +0000</span><br><span class="line"></span><br><span class="line">    refactor: tiny cleanup changes (<span class="comment">#9193)</span></span><br><span class="line"></span><br><span class="line"> src/core/instance/events.js           | 18 ++++++++----------</span><br><span class="line"> src/core/util/debug.js                |  2 +-</span><br><span class="line"> src/server/template-renderer/index.js |  2 +-</span><br><span class="line"> 3 files changed, 10 insertions(+), 12 deletions(-)</span><br><span class="line"></span><br><span class="line">commit af9e2b3f0f4156fd52ed4444b96e2b8c0932c658</span><br><span class="line">Author: Nick Hall &lt;iamssb@gmail.com&gt;</span><br><span class="line">Date:   Thu Dec 13 01:41:36 2018 +0900</span><br><span class="line"></span><br><span class="line">    chore: minor comment cleanup (<span class="comment">#9191)</span></span><br><span class="line"></span><br><span class="line"> src/core/observer/dep.js | 6 +++---</span><br><span class="line"> 1 file changed, 3 insertions(+), 3 deletions(-)</span><br><span class="line"></span><br><span class="line">commit b06c784b81a244e1bc2d028216fcd2ab873730b9</span><br><span class="line">Author: Xin Du (Clark) &lt;clark.duxin@gmail.com&gt;</span><br><span class="line">Date:   Wed Dec 12 16:41:08 2018 +0000</span><br><span class="line"></span><br><span class="line">    fix(ssr): support rendering comment (<span class="comment">#9128)</span></span><br><span class="line"></span><br><span class="line"> src/server/optimizing-compiler/codegen.js                  |  6 +++++-</span><br><span class="line"> <span class="built_in">test</span>/unit/modules/server-compiler/compiler-options.spec.js | 13 +++++++++++++</span><br><span class="line"> 2 files changed, 18 insertions(+), 1 deletion(-)</span><br></pre></td></tr></table></figure>
<h2 id="æ˜¾ç¤ºæœ€åä¸€æ¬¡æäº¤ä¿¡æ¯"><a href="#æ˜¾ç¤ºæœ€åä¸€æ¬¡æäº¤ä¿¡æ¯" class="headerlink" title="æ˜¾ç¤ºæœ€åä¸€æ¬¡æäº¤ä¿¡æ¯"></a>æ˜¾ç¤ºæœ€åä¸€æ¬¡æäº¤ä¿¡æ¯</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ git <span class="built_in">log</span> -1 HEAD</span><br><span class="line"> commit 38e967b8067441ff37cb3b923200023a6b842759 (HEAD -&gt; dev, origin/dev, origin/HEAD)</span><br><span class="line">Author: Xin Du (Clark) &lt;clark.duxin@gmail.com&gt;</span><br><span class="line">Date:   Wed Dec 12 16:41:45 2018 +0000</span><br><span class="line"></span><br><span class="line">    refactor: tiny cleanup changes (<span class="comment">#9193)</span></span><br></pre></td></tr></table></figure>
<h2 id="æŸ¥çœ‹æ–‡ä»¶æ”¹å˜ä¿¡æ¯"><a href="#æŸ¥çœ‹æ–‡ä»¶æ”¹å˜ä¿¡æ¯" class="headerlink" title="æŸ¥çœ‹æ–‡ä»¶æ”¹å˜ä¿¡æ¯"></a>æŸ¥çœ‹æ–‡ä»¶æ”¹å˜ä¿¡æ¯</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ git <span class="built_in">log</span> --name-status</span><br><span class="line">commit 38e967b8067441ff37cb3b923200023a6b842759 (HEAD -&gt; dev, origin/dev, origin/HEAD)</span><br><span class="line">Author: Xin Du (Clark) &lt;clark.duxin@gmail.com&gt;</span><br><span class="line">Date:   Wed Dec 12 16:41:45 2018 +0000</span><br><span class="line"></span><br><span class="line">    refactor: tiny cleanup changes (<span class="comment">#9193)</span></span><br><span class="line"></span><br><span class="line">M       src/core/instance/events.js</span><br><span class="line">M       src/core/util/debug.js</span><br><span class="line">M       src/server/template-renderer/index.js</span><br><span class="line"></span><br><span class="line">commit af9e2b3f0f4156fd52ed4444b96e2b8c0932c658</span><br><span class="line">Author: Nick Hall &lt;iamssb@gmail.com&gt;</span><br><span class="line">Date:   Thu Dec 13 01:41:36 2018 +0900</span><br><span class="line"></span><br><span class="line">    chore: minor comment cleanup (<span class="comment">#9191)</span></span><br><span class="line"></span><br><span class="line">M       src/core/observer/dep.js</span><br><span class="line"></span><br><span class="line">commit b06c784b81a244e1bc2d028216fcd2ab873730b9</span><br><span class="line">Author: Xin Du (Clark) &lt;clark.duxin@gmail.com&gt;</span><br><span class="line">Date:   Wed Dec 12 16:41:08 2018 +0000</span><br><span class="line"></span><br><span class="line">    fix(ssr): support rendering comment (<span class="comment">#9128)</span></span><br><span class="line"></span><br><span class="line">M       src/server/optimizing-compiler/codegen.js</span><br><span class="line">A       <span class="built_in">test</span>/unit/modules/server-compiler/compiler-options.spec.js</span><br></pre></td></tr></table></figure>
<h1 id="æŒ‡å®šæ ¼å¼æŸ¥çœ‹"><a href="#æŒ‡å®šæ ¼å¼æŸ¥çœ‹" class="headerlink" title="æŒ‡å®šæ ¼å¼æŸ¥çœ‹"></a>æŒ‡å®šæ ¼å¼æŸ¥çœ‹</h1><p><code>git log --pretty=format</code> å¸¸ç”¨çš„é€‰é¡¹ï¼š</p>
<table>
<thead>
<tr>
<th>é€‰é¡¹</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>%H</code></td>
<td>æäº¤å¯¹è±¡ï¼ˆ<code>commit</code>ï¼‰çš„å®Œæ•´å“ˆå¸Œå­—ä¸²</td>
</tr>
<tr>
<td><code>%h</code></td>
<td>æäº¤å¯¹è±¡çš„ç®€çŸ­å“ˆå¸Œå­—ä¸²</td>
</tr>
<tr>
<td><code>%T</code></td>
<td>æ ‘å¯¹è±¡ï¼ˆtreeï¼‰çš„å®Œæ•´å“ˆå¸Œå­—ä¸²</td>
</tr>
<tr>
<td><code>%t</code></td>
<td>æ ‘å¯¹è±¡çš„ç®€çŸ­å“ˆå¸Œå­—ä¸²</td>
</tr>
<tr>
<td><code>%P</code></td>
<td>çˆ¶å¯¹è±¡ï¼ˆparentï¼‰çš„å®Œæ•´å“ˆå¸Œå­—ä¸²</td>
</tr>
<tr>
<td><code>%p</code></td>
<td>çˆ¶å¯¹è±¡çš„ç®€çŸ­å“ˆå¸Œå­—ä¸²</td>
</tr>
<tr>
<td><code>%an</code></td>
<td>ä½œè€…ï¼ˆauthorï¼‰çš„åå­—</td>
</tr>
<tr>
<td><code>%ae</code></td>
<td>ä½œè€…çš„ç”µå­é‚®ä»¶åœ°å€</td>
</tr>
<tr>
<td><code>%ad</code></td>
<td>ä½œè€…ä¿®è®¢æ—¥æœŸï¼ˆå¯ä»¥ç”¨ <code>-date=</code> é€‰é¡¹å®šåˆ¶æ ¼å¼ï¼‰</td>
</tr>
<tr>
<td><code>%ar</code></td>
<td>ä½œè€…ä¿®è®¢æ—¥æœŸï¼ŒæŒ‰å¤šä¹…ä»¥å‰çš„æ–¹å¼æ˜¾ç¤º</td>
</tr>
<tr>
<td><code>%cn</code></td>
<td>æäº¤è€…ï¼ˆcommitterï¼‰çš„åå­—</td>
</tr>
<tr>
<td><code>%ce</code></td>
<td>æäº¤è€…çš„ç”µå­é‚®ä»¶åœ°å€</td>
</tr>
<tr>
<td><code>%cd</code></td>
<td>æäº¤æ—¥æœŸ</td>
</tr>
<tr>
<td><code>%cr</code></td>
<td>æäº¤æ—¥æœŸï¼ŒæŒ‰å¤šä¹…ä»¥å‰çš„æ–¹å¼æ˜¾ç¤º</td>
</tr>
<tr>
<td><code>%s</code></td>
<td>æäº¤è¯´æ˜</td>
</tr>
</tbody>
</table>
<p><code>git log</code> è¾“å‡ºçš„é€‰é¡¹ï¼š</p>
<table>
<thead>
<tr>
<th>é€‰é¡¹</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>-(n)</code></td>
<td>ä»…æ˜¾ç¤ºæœ€è¿‘çš„ n æ¡æäº¤</td>
</tr>
<tr>
<td><code>--since, --after</code></td>
<td>ä»…æ˜¾ç¤ºæŒ‡å®šæ—¶é—´ä¹‹åçš„æäº¤</td>
</tr>
<tr>
<td><code>--until, --before</code></td>
<td>ä»…æ˜¾ç¤ºæŒ‡å®šæ—¶é—´ä¹‹å‰çš„æäº¤</td>
</tr>
<tr>
<td><code>--author</code></td>
<td>ä»…æ˜¾ç¤ºæŒ‡å®šä½œè€…ç›¸å…³çš„æäº¤</td>
</tr>
<tr>
<td><code>--committer</code></td>
<td>ä»…æ˜¾ç¤ºæŒ‡å®šæäº¤è€…ç›¸å…³çš„æäº¤</td>
</tr>
<tr>
<td><code>--grep</code></td>
<td>ä»…æ˜¾ç¤ºå«æŒ‡å®šå…³é”®å­—çš„æäº¤</td>
</tr>
<tr>
<td><code>-S</code></td>
<td>ä»…æ˜¾ç¤ºæ·»åŠ æˆ–ç§»é™¤äº†æŸä¸ªå…³é”®å­—çš„æäº¤</td>
</tr>
</tbody>
</table>
<h2 id="ç”¨-oneline-å°†æ¯ä¸ªæäº¤æ”¾åœ¨ä¸€è¡Œæ˜¾ç¤º"><a href="#ç”¨-oneline-å°†æ¯ä¸ªæäº¤æ”¾åœ¨ä¸€è¡Œæ˜¾ç¤º" class="headerlink" title="ç”¨ oneline å°†æ¯ä¸ªæäº¤æ”¾åœ¨ä¸€è¡Œæ˜¾ç¤º"></a>ç”¨ oneline å°†æ¯ä¸ªæäº¤æ”¾åœ¨ä¸€è¡Œæ˜¾ç¤º</h2><blockquote>
<p>è¿™åœ¨æäº¤æ•°å¾ˆå¤§æ—¶éå¸¸æœ‰ç”¨ã€‚å¦å¤–è¿˜æœ‰ <code>short</code>ï¼Œ<code>full</code> å’Œ <code>fuller</code> å¯é€‰ã€‚</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ git <span class="built_in">log</span> --pretty=oneline</span><br><span class="line">38e967b8067441ff37cb3b923200023a6b842759 (HEAD -&gt; dev, origin/dev, origin/HEAD) refactor: tiny cleanup changes (<span class="comment">#9193)</span></span><br><span class="line">af9e2b3f0f4156fd52ed4444b96e2b8c0932c658 chore: minor comment cleanup (<span class="comment">#9191)</span></span><br><span class="line">b06c784b81a244e1bc2d028216fcd2ab873730b9 fix(ssr): support rendering comment (<span class="comment">#9128)</span></span><br><span class="line">70754084ec2d84e44effeb8f82efda3397a08b0d (tag: v2.5.21) build: release 2.5.21</span><br><span class="line">...</span><br></pre></td></tr></table></figure>
<h2 id="è‡ªå®šä¹‰æ ¼å¼æŸ¥çœ‹æ—¥å¿—"><a href="#è‡ªå®šä¹‰æ ¼å¼æŸ¥çœ‹æ—¥å¿—" class="headerlink" title="è‡ªå®šä¹‰æ ¼å¼æŸ¥çœ‹æ—¥å¿—"></a>è‡ªå®šä¹‰æ ¼å¼æŸ¥çœ‹æ—¥å¿—</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ git <span class="built_in">log</span> --pretty=format:<span class="string">&quot;%h - %an, %ar : %s&quot;</span></span><br><span class="line">38e967b8 - Xin Du (Clark), 3 weeks ago : refactor: tiny cleanup changes (<span class="comment">#9193)</span></span><br><span class="line">af9e2b3f - Nick Hall, 3 weeks ago : chore: minor comment cleanup (<span class="comment">#9191)</span></span><br><span class="line">b06c784b - Xi   n Du (Clark), 3 weeks ago : fix(ssr): support rendering comment (<span class="comment">#9128)</span></span><br><span class="line">70754084 - Evan You, 3 weeks ago : build: release 2.5.21</span><br><span class="line"></span><br><span class="line">$ git <span class="built_in">log</span> --color --graph --pretty=format:<span class="string">&#x27;%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cr) %C(bold blue)&lt;%an&gt;%Creset&#x27;</span> --abbrev-commit</span><br><span class="line">* 38e967b8 - (HEAD -&gt; dev, origin/dev, origin/HEAD) refactor: tiny cleanup changes (<span class="comment">#9193) (3 weeks ago) &lt;Xin Du (Clark)&gt;</span></span><br><span class="line">* af9e2b3f - chore: minor comment cleanup (<span class="comment">#9191) (3 weeks ago) &lt;Nick Hall&gt;</span></span><br><span class="line">* b06c784b - fix(ssr): support rendering comment (<span class="comment">#9128) (3 weeks ago) &lt;Xin Du (Clark)&gt;</span></span><br><span class="line">* 70754084 - (tag: v2.5.21) build: release 2.5.21 (3 weeks ago) &lt;Evan You&gt;</span><br><span class="line">* b449e17e - build: build 2.5.21 (3 weeks ago) &lt;Evan You&gt;</span><br></pre></td></tr></table></figure>
<h2 id="å›¾æ–‡æ ¼å¼æŸ¥çœ‹"><a href="#å›¾æ–‡æ ¼å¼æŸ¥çœ‹" class="headerlink" title="å›¾æ–‡æ ¼å¼æŸ¥çœ‹"></a>å›¾æ–‡æ ¼å¼æŸ¥çœ‹</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ git <span class="built_in">log</span> --pretty=oneline --graph --abbrev-commit</span><br><span class="line">*   5f737e836e (HEAD -&gt; master, origin/master, origin/HEAD) feature <span class="comment">#29613 [VarDumper] Use hyperlinks in CliDescriptor (ogizanagi)</span></span><br><span class="line">|\</span><br><span class="line">| * e54e21933a [VarDumper] Use hyperlinks <span class="keyword">in</span> CliDescriptor</span><br><span class="line">* |   55113775c0 Merge branch <span class="string">&#x27;4.2&#x27;</span></span><br><span class="line">|\ \</span><br><span class="line">| * | 9ade0a7605 [Cache] fix <span class="built_in">test</span></span><br><span class="line">* | |   96285882cf Merge branch <span class="string">&#x27;4.2&#x27;</span></span><br><span class="line">|\ \ \</span><br><span class="line">| |/ /</span><br><span class="line">| * |   43dfbe2df9 bug <span class="comment">#29648 [Cache] fix Simple\Psr6Cache proxying of metadata (nicolas-grekas)</span></span><br><span class="line">| |\ \</span><br><span class="line">| | * | 02edc9b049 [Cache] fix Simple\Psr6Cache proxying of metadata</span><br><span class="line">| |/ /</span><br><span class="line"></span><br><span class="line">$ git <span class="built_in">log</span> --pretty=format:<span class="string">&quot;%h %s&quot;</span> --graph</span><br><span class="line">*   5f737e836e feature <span class="comment">#29613 [VarDumper] Use hyperlinks in CliDescriptor (ogizanagi)</span></span><br><span class="line">|\</span><br><span class="line">| * e54e21933a [VarDumper] Use hyperlinks <span class="keyword">in</span> CliDescriptor</span><br><span class="line">* |   55113775c0 Merge branch <span class="string">&#x27;4.2&#x27;</span></span><br><span class="line">|\ \</span><br><span class="line">| * | 9ade0a7605 [Cache] fix <span class="built_in">test</span></span><br><span class="line">* | |   96285882cf Merge branch <span class="string">&#x27;4.2&#x27;</span></span><br></pre></td></tr></table></figure>
<h2 id="é€šè¿‡-ASCII-æ ‘å½¢ç»“æ„æ¥å±•ç¤ºæ‰€æœ‰çš„åˆ†æ”¯"><a href="#é€šè¿‡-ASCII-æ ‘å½¢ç»“æ„æ¥å±•ç¤ºæ‰€æœ‰çš„åˆ†æ”¯" class="headerlink" title="é€šè¿‡ ASCII æ ‘å½¢ç»“æ„æ¥å±•ç¤ºæ‰€æœ‰çš„åˆ†æ”¯"></a>é€šè¿‡ ASCII æ ‘å½¢ç»“æ„æ¥å±•ç¤ºæ‰€æœ‰çš„åˆ†æ”¯</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ git <span class="built_in">log</span> --graph --oneline --decorate --all</span><br><span class="line">* 17d7a5f6 chore: update sponsors</span><br><span class="line">| * c8139015 (origin/feat-scoped-slot-passdown) <span class="built_in">test</span>: add slot <span class="built_in">test</span> <span class="keyword">case</span> (<span class="comment">#8344)</span></span><br><span class="line">| * bb06c75e feat(core): support passing down scopedSlots with v-bind</span><br><span class="line">| | * 636c9b4e (tag: v2.5.17, origin/hotfix) build: release 2.5.17</span><br><span class="line">| | * 7e75b79b build: build 2.5.17</span><br><span class="line">| | * b3c5e642 chore: minor tweaks</span><br><span class="line">| | * c28f7929 fix: fix potential xss vulnerability <span class="keyword">in</span> ssr</span><br><span class="line">| |/</span><br><span class="line">|/|</span><br><span class="line">* | 25342194 (tag: v2.5.16) build: release 2.5.16</span><br><span class="line">* | 90891709 build: build 2.5.16</span><br><span class="line">* | 62a922e8 fix: fix wrongly matched named slots <span class="keyword">in</span> functional components</span><br><span class="line">| | * 0f4e6a9a (origin/fix-component-insert-order) fix: invoke component node create hooks before insertion</span><br><span class="line">| |/</span><br><span class="line">|/|</span><br><span class="line">| | * 531cea58 (origin/perf-computed) perf: avoid unnecessary re-renders when computed property value did not change</span><br><span class="line">| |/</span><br><span class="line">|/|</span><br><span class="line">| | * ca2e6a74 (origin/fix-beforeupdate) fix: beforeUpdate should be called before render and allow state mutation</span><br><span class="line">| |/</span><br><span class="line">|/|</span><br></pre></td></tr></table></figure>
<h1 id="é™åˆ¶æ ¼å¼è¾“å‡º"><a href="#é™åˆ¶æ ¼å¼è¾“å‡º" class="headerlink" title="é™åˆ¶æ ¼å¼è¾“å‡º"></a>é™åˆ¶æ ¼å¼è¾“å‡º</h1><table>
<thead>
<tr>
<th>é€‰é¡¹</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>-(n)</code></td>
<td>ä»…æ˜¾ç¤ºæœ€è¿‘çš„ <code>n</code> æ¡æäº¤</td>
</tr>
<tr>
<td><code>--since, --after</code></td>
<td>ä»…æ˜¾ç¤ºæŒ‡å®šæ—¶é—´ä¹‹åçš„æäº¤</td>
</tr>
<tr>
<td><code>--until, --before</code></td>
<td>ä»…æ˜¾ç¤ºæŒ‡å®šæ—¶é—´ä¹‹å‰çš„æäº¤</td>
</tr>
<tr>
<td><code>--author</code></td>
<td><code>ä»…æ˜¾ç¤ºæŒ‡å®šä½œè€…ç›¸å…³çš„æäº¤</code></td>
</tr>
<tr>
<td><code>--committer</code></td>
<td><code>ä»…æ˜¾ç¤ºæŒ‡å®šæäº¤è€…ç›¸å…³çš„æäº¤</code></td>
</tr>
</tbody>
</table>
<h2 id="æ˜¾ç¤ºä¸‰å‘¨ä¹‹åçš„æäº¤"><a href="#æ˜¾ç¤ºä¸‰å‘¨ä¹‹åçš„æäº¤" class="headerlink" title="æ˜¾ç¤ºä¸‰å‘¨ä¹‹åçš„æäº¤"></a>æ˜¾ç¤ºä¸‰å‘¨ä¹‹åçš„æäº¤</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ git <span class="built_in">log</span> --after=3.weeks</span><br><span class="line">commit 38e967b8067441ff37cb3b923200023a6b842759 (HEAD -&gt; dev, origin/dev, origin/HEAD)</span><br><span class="line">Author: Xin Du (Clark) &lt;clark.duxin@gmail.com&gt;</span><br><span class="line">Date:   Wed Dec 12 16:41:45 2018 +0000</span><br><span class="line"></span><br><span class="line">    refactor: tiny cleanup changes (<span class="comment">#9193)</span></span><br><span class="line"></span><br><span class="line">commit af9e2b3f0f4156fd52ed4444b96e2b8c0932c658</span><br><span class="line">Author: Nick Hall &lt;iamssb@gmail.com&gt;</span><br><span class="line">Date:   Thu Dec 13 01:41:36 2018 +0900</span><br><span class="line"></span><br><span class="line">    chore: minor comment cleanup (<span class="comment">#9191)</span></span><br></pre></td></tr></table></figure>
<h2 id="æ˜¾ç¤ºä¸¤å‘¨ä¹‹å‰çš„æäº¤"><a href="#æ˜¾ç¤ºä¸¤å‘¨ä¹‹å‰çš„æäº¤" class="headerlink" title="æ˜¾ç¤ºä¸¤å‘¨ä¹‹å‰çš„æäº¤"></a>æ˜¾ç¤ºä¸¤å‘¨ä¹‹å‰çš„æäº¤</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ git <span class="built_in">log</span> --before=2.weeks</span><br><span class="line">commit 38e967b8067441ff37cb3b923200023a6b842759 (HEAD -&gt; dev, origin/dev, origin/HEAD)</span><br><span class="line">Author: Xin Du (Clark) &lt;clark.duxin@gmail.com&gt;</span><br><span class="line">Date:   Wed Dec 12 16:41:45 2018 +0000</span><br><span class="line"></span><br><span class="line">    refactor: tiny cleanup changes (<span class="comment">#9193)</span></span><br><span class="line"></span><br><span class="line">commit af9e2b3f0f4156fd52ed4444b96e2b8c0932c658</span><br><span class="line">Author: Nick Hall &lt;iamssb@gmail.com&gt;</span><br><span class="line">Date:   Thu Dec 13 01:41:36 2018 +0900</span><br><span class="line"></span><br><span class="line">    chore: minor comment cleanup (<span class="comment">#9191)</span></span><br></pre></td></tr></table></figure>
<h2 id="æ˜¾ç¤ºæŒ‡å®šäººæäº¤æ—¥å¿—"><a href="#æ˜¾ç¤ºæŒ‡å®šäººæäº¤æ—¥å¿—" class="headerlink" title="æ˜¾ç¤ºæŒ‡å®šäººæäº¤æ—¥å¿—"></a>æ˜¾ç¤ºæŒ‡å®šäººæäº¤æ—¥å¿—</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// æŸ¥çœ‹ 2018 å¹´å…ƒæœˆæœŸé—´ï¼ŒEvan You æäº¤çš„ä½†æœªåˆå¹¶çš„ä½äºé¡¹ç›® ./src ç›®å½•ä¸‹çš„ä»£ç </span><br><span class="line">$ git <span class="built_in">log</span> --pretty=<span class="string">&quot;%h - %s&quot;</span> --author=<span class="string">&#x27;Evan You&#x27;</span> --after=<span class="string">&quot;2018-12-01&quot;</span> \</span><br><span class="line">--before=<span class="string">&quot;2018-12-31&quot;</span> --no-merges -- ./src</span><br><span class="line">847e4937 - fix: fix single v-for child optimization</span><br><span class="line">4074104f - perf: skip normalization on single child element v-for</span><br><span class="line">47487607 - fix: fix v-for component with undefined value</span><br><span class="line">0d4b35f5 - fix(vdom): remove unnecessary sameVnode condition</span><br><span class="line">5d721a42 - revert: fix(sfc): avoid deindent when pad option is specified (<span class="comment">#7647)</span></span><br><span class="line">780dac56 - fix(ssr): should not warn <span class="keyword">for</span> custom directives that <span class="keyword">do</span> not have ssr implementation</span><br><span class="line">8a2dbf50 - fix(transition-group): fix activeInstance regression</span><br><span class="line">f077ed17 - fix(ssr): fix ssr template publicPath generation</span><br><span class="line">1b4a8a0c - fix(compiler): fix codegen <span class="keyword">for</span> v-for component inside template</span><br><span class="line">e4b1b57f - fix(ssr): adjust call stack size defer threshold</span><br><span class="line">530ca1b2 - fix(core): properly handle reused vnodes</span><br><span class="line">097f6229 - fix(core): avoid mutating original children when cloning vnode</span><br><span class="line"></span><br><span class="line">$ git <span class="built_in">log</span> --before=&#123;2,weeks,ago&#125; --after=&#123;2018-11-30&#125; --oneline</span><br><span class="line">38e967b8 (HEAD -&gt; dev, origin/dev, origin/HEAD) refactor: tiny cleanup changes (<span class="comment">#9193)</span></span><br><span class="line">af9e2b3f chore: minor comment cleanup (<span class="comment">#9191)</span></span><br><span class="line">b06c784b fix(ssr): support rendering comment (<span class="comment">#9128)</span></span><br><span class="line">70754084 (tag: v2.5.21) build: release 2.5.21</span><br><span class="line">b449e17e build: build 2.5.21</span><br><span class="line">...</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>git</category>
      </categories>
      <tags>
        <tag>git</tag>
      </tags>
  </entry>
  <entry>
    <title>Git åŸºæœ¬æ“ä½œ</title>
    <url>/2018/01/23/git-basic/</url>
    <content><![CDATA[<p>ğŸ˜­ é€šè¿‡ä¸€é¡¿æ“ä½œæ¥ç†Ÿæ‚‰ Git æ˜¯ä¸äºŒæ³•é—¨ã€‚</p>
<span id="more"></span>
<ul>
<li><a href="https://imajinyun.xyz/2018/01/22/git-started/"><code>Git èµ·æ­¥</code></a></li>
<li><a href="https://imajinyun.xyz/2018/01/23/git-basic/"><strong>Git åŸºæœ¬æ“ä½œ</strong></a></li>
<li><a href="https://imajinyun.xyz/2018/01/24/git-log/"><code>Git æŸ¥çœ‹æ—¥å¿—</code></a></li>
<li><a href="https://imajinyun.xyz/2018/01/25/git-branch/"><code>Git åˆ†æ”¯</code></a></li>
<li><a href="https://imajinyun.xyz/2018/01/27/git-multiple-accounts/"><code>Git ä¸­ä¸€ä¸ªå®¢æˆ·ç«¯è®¾ç½®å¤šä¸ªè´¦å·</code></a></li>
<li><a href="https://imajinyun.xyz/2018/05/01/git-workflow/"><code>Git Workflow</code></a></li>
<li><a href="https://imajinyun.xyz/2020/09/07/git-collection-command/"><code>Git å‘½ä»¤å¤§å…¨</code></a></li>
</ul>
<h1 id="åˆ›å»ºä»“åº“"><a href="#åˆ›å»ºä»“åº“" class="headerlink" title="åˆ›å»ºä»“åº“"></a>åˆ›å»ºä»“åº“</h1><blockquote>
<p>è¯·è‡ªè¡Œå‡†å¤‡å¥½ <code>git</code> ç¯å¢ƒã€‚</p>
</blockquote>
<h2 id="åˆ›å»ºæœåŠ¡å™¨è£¸ä»“åº“"><a href="#åˆ›å»ºæœåŠ¡å™¨è£¸ä»“åº“" class="headerlink" title="åˆ›å»ºæœåŠ¡å™¨è£¸ä»“åº“"></a>åˆ›å»ºæœåŠ¡å™¨è£¸ä»“åº“</h2><blockquote>
<ul>
<li><code>git init</code>: å°†å½“å‰çš„ç›®å½•è½¬æ¢æˆä¸€ä¸ª <code>git</code> ä»“åº“</li>
<li><code>git init &lt;directory&gt;</code>: åœ¨æŒ‡å®šç›®å½•åˆ›å»ºä¸€ä¸ªç©ºçš„ <code>git</code> ä»“åº“</li>
<li><code>git init --bare &lt;project-name&gt;.git</code>: è£¸åº“å¾€å¾€è¢«åˆ›å»ºç”¨äºä½œä¸ºå¤§å®¶ä¸€èµ·å·¥ä½œçš„å…±äº«åº“ï¼Œæ¯ä¸€ä¸ªäººéƒ½å¯ä»¥å¾€é‡Œé¢ <code>push</code> è‡ªå·±çš„æœ¬åœ°ä¿®æ”¹ã€‚æœåŠ¡å™¨ä¸Š <code>bare</code> åˆ›å»ºçš„ä»“åº“ï¼Œä¸»è¦ç”¨æ¥è¿æ¥ï¼ŒåŒæ­¥ï¼Œåè°ƒã€‚è®°å½•æ¯ä¸ªäººæœ¬åœ°ä»“åº“çš„è®°å½•ï¼Œè€Œä¸å­˜æ”¾é¡¹ç›®æºä»£ç ã€‚è€Œæ¯ä¸ªå¼€å‘äººå‘˜è‡ªå·±ç”µè„‘ä¸Šåˆ†åˆ«æœ‰ä¸ªå°ä»“åº“ï¼Œå­˜æ”¾æºä»£ç åŠè‡ªå·±çš„æ”¹åŠ¨</li>
</ul>
</blockquote>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// ç™»å½•è¿œç¨‹æœåŠ¡å™¨</span><br><span class="line">$ ssh &lt;user&gt;@&lt;host&gt;</span><br><span class="line"></span><br><span class="line">// è¿›å…¥æ“ä½œç›®å½•</span><br><span class="line">$ <span class="built_in">cd</span> /path/to/repository</span><br><span class="line"></span><br><span class="line">// åˆ›å»ºç¥¼ä»“åº“</span><br><span class="line">$ git init --bare &lt;project-name&gt;.git</span><br><span class="line"></span><br><span class="line">// é€€å‡ºè¿œç¨‹æœåŠ¡å™¨ï¼Œè¿›å…¥æœ¬åœ°ç»ˆç«¯</span><br><span class="line">$ git init &lt;directory&gt;</span><br><span class="line">$ touch README.md</span><br><span class="line">$ git add README.md</span><br><span class="line">$ git commit -m <span class="string">&quot;Initial commit&quot;</span></span><br><span class="line">$ git remote add origin &lt;user&gt;@&lt;host&gt;:/path/to/repository/&lt;project-name&gt;.git</span><br><span class="line">$ git push -u origin master</span><br><span class="line"></span><br><span class="line">// å…¶å®ƒæˆå‘˜å…‹éš†ä»“åº“</span><br><span class="line">$ git <span class="built_in">clone</span> &lt;user&gt;@&lt;host&gt;:/path/to/repository/&lt;project-name&gt;.git</span><br></pre></td></tr></table></figure>
<h2 id="åˆ›å»ºæœ¬åœ°ä»“åº“"><a href="#åˆ›å»ºæœ¬åœ°ä»“åº“" class="headerlink" title="åˆ›å»ºæœ¬åœ°ä»“åº“"></a>åˆ›å»ºæœ¬åœ°ä»“åº“</h2><h3 id="åˆå§‹åŒ–æœ¬åœ°ä»“åº“"><a href="#åˆå§‹åŒ–æœ¬åœ°ä»“åº“" class="headerlink" title="åˆå§‹åŒ–æœ¬åœ°ä»“åº“"></a>åˆå§‹åŒ–æœ¬åœ°ä»“åº“</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// åˆ›å»ºæœ¬åœ°ä»“åº“</span><br><span class="line">$ mkdir example</span><br><span class="line">$ <span class="built_in">cd</span> example</span><br><span class="line">$ git init</span><br><span class="line">$ touch README.md</span><br><span class="line">$ git add README.md</span><br><span class="line">$ git commit -m <span class="string">&quot;Initial commit&quot;</span></span><br></pre></td></tr></table></figure>
<h3 id="å…³è”è¿œç¨‹ä»“åº“"><a href="#å…³è”è¿œç¨‹ä»“åº“" class="headerlink" title="å…³è”è¿œç¨‹ä»“åº“"></a>å…³è”è¿œç¨‹ä»“åº“</h3><blockquote>
<p>å…³è”å¤šä¸ªä»“åº“éœ€è¦ç»™ä¸åŒçš„è¿œç¨‹ä»“åº“èµ·ä¸€ä¸ªåˆ«åï¼Œè¯·è‡ªè¡Œåœ¨ gitee å’Œ github ä¸Šåˆ›å»ºç©ºä»“åº“ã€‚</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ git remote add gitee git@gitee.com:user/project.git</span><br><span class="line">$ git push -u gitee master</span><br><span class="line">æˆ–</span><br><span class="line">$ git remote add github https://github.com/user/project.git</span><br><span class="line">$ git push -u github master</span><br></pre></td></tr></table></figure>
<h3 id="åˆ†æ”¯è·Ÿè¸ªè¿œç¨‹åˆ†æ”¯"><a href="#åˆ†æ”¯è·Ÿè¸ªè¿œç¨‹åˆ†æ”¯" class="headerlink" title="åˆ†æ”¯è·Ÿè¸ªè¿œç¨‹åˆ†æ”¯"></a>åˆ†æ”¯è·Ÿè¸ªè¿œç¨‹åˆ†æ”¯</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// è®¾ç½®è®©æœ¬åœ°æŸä¸ªåˆ†æ”¯è·Ÿè¸ªè¿œç¨‹çš„æŸä¸ªåˆ†æ”¯</span><br><span class="line">$ git branch --set-upstream-to=origin/&lt;branch&gt; &lt;branch&gt;</span><br></pre></td></tr></table></figure>
<h3 id="å…‹éš†è¿œç¨‹ä»“åº“"><a href="#å…‹éš†è¿œç¨‹ä»“åº“" class="headerlink" title="å…‹éš†è¿œç¨‹ä»“åº“"></a>å…‹éš†è¿œç¨‹ä»“åº“</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ git <span class="built_in">clone</span> &lt;user&gt;@&lt;host&gt;:/path/to/repository/&lt;project&gt;.git</span><br><span class="line">æˆ–</span><br><span class="line">$ git <span class="built_in">clone</span> https://gitee.com/user/&lt;project&gt;.git</span><br></pre></td></tr></table></figure>
<h1 id="åŸºæœ¬æ“ä½œ"><a href="#åŸºæœ¬æ“ä½œ" class="headerlink" title="åŸºæœ¬æ“ä½œ"></a>åŸºæœ¬æ“ä½œ</h1><h2 id="åˆå§‹åŒ–ä»“åº“"><a href="#åˆå§‹åŒ–ä»“åº“" class="headerlink" title="åˆå§‹åŒ–ä»“åº“"></a>åˆå§‹åŒ–ä»“åº“</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> ~/Desktop &amp;&amp; mkdir example &amp;&amp; <span class="built_in">cd</span> example</span><br><span class="line">$ git init</span><br><span class="line">Initialized empty Git repository <span class="keyword">in</span> /Users/majinyun/Desktop/example/.git/</span><br></pre></td></tr></table></figure>
<h2 id="å¿½ç•¥æ–‡ä»¶"><a href="#å¿½ç•¥æ–‡ä»¶" class="headerlink" title="å¿½ç•¥æ–‡ä»¶"></a>å¿½ç•¥æ–‡ä»¶</h2><p>GitHub å®˜æ–¹æä¾›çš„ <strong><a href="https://github.com/github/gitignore">å¿½ç•¥æ–‡ä»¶æ¨¡ç‰ˆ</a></strong></p>
<p><code>.gitignore</code> æ–‡ä»¶æ ¼å¼ï¼š</p>
<ul>
<li>æ‰€æœ‰ç©ºè¡Œæˆ–è€…ä»¥æ³¨é‡Šç¬¦å· <code>#</code> å¼€å¤´çš„è¡Œéƒ½ä¼šè¢« <code>git</code> å¿½ç•¥</li>
<li>å¯ä»¥ä½¿ç”¨æ ‡å‡†çš„ <code>glob</code> æ¨¡å¼åŒ¹é…</li>
<li>åŒ¹é…æ¨¡å¼æœ€åè·Ÿåæ–œæ  <code>/</code> è¯´æ˜è¦å¿½ç•¥çš„æ˜¯ç›®å½•</li>
<li>è¦å¿½ç•¥æŒ‡å®šæ¨¡å¼ä»¥å¤–çš„æ–‡ä»¶æˆ–ç›®å½•ï¼Œå¯ä»¥åœ¨æ¨¡å¼å‰åŠ ä¸ŠæƒŠå¹å· <code>!</code> å–å</li>
</ul>
<h2 id="æ·»åŠ æ–‡ä»¶"><a href="#æ·»åŠ æ–‡ä»¶" class="headerlink" title="æ·»åŠ æ–‡ä»¶"></a>æ·»åŠ æ–‡ä»¶</h2><blockquote>
<p>ç©ºç›®å½•æ˜¯ä¸èƒ½æäº¤åˆ°ä»“åº“ä¸­çš„ï¼Œè‡³å°‘è¦ä¿è¯ç›®å½•ä¸­æœ‰ä¸€ä¸ªæ–‡ä»¶ã€‚</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// åˆ›å»ºä¸€ä¸ª README.md æ–‡ä»¶</span><br><span class="line">$ touch README.md</span><br><span class="line"></span><br><span class="line">// æŸ¥çœ‹ä»“åº“çŠ¶æ€</span><br><span class="line">$ git status</span><br><span class="line">On branch master</span><br><span class="line"></span><br><span class="line">No commits yet</span><br><span class="line"></span><br><span class="line">Untracked files:</span><br><span class="line">  (use <span class="string">&quot;git add &lt;file&gt;...&quot;</span> to include <span class="keyword">in</span> what will be committed)</span><br><span class="line"></span><br><span class="line">    README.md</span><br><span class="line"></span><br><span class="line">nothing added to commit but untracked files present (use <span class="string">&quot;git add&quot;</span> to track)</span><br><span class="line"></span><br><span class="line">// å¦‚æœè¿™ä¸ªé˜¶æ®µä½ å‘ç°æ–‡ä»¶åˆ›å»ºé”™è¯¯äº†ï¼ˆæœ¬ä¸åº”è¯¥æ”¾ç½®åœ¨æ­¤ç›®å½•ä¸­æˆ–ä¸éœ€è¦æ­¤æ–‡ä»¶æˆ–è€…å…¶å®ƒä»»ä½•åŸå› ï¼‰ï¼Œç›´æ¥åˆ é™¤æ‰å³å¯ï¼Œå¦åˆ™ç»§ç»­ä»¥ä¸‹æ“ä½œ</span><br><span class="line">$ rm -f README.md</span><br><span class="line"></span><br><span class="line">// æ·»åŠ  README.md æ–‡ä»¶åˆ°æš‚å­˜åŒº</span><br><span class="line">$ git add README.md</span><br><span class="line"></span><br><span class="line">// æŸ¥çœ‹ä»“åº“çŠ¶æ€</span><br><span class="line">$ git status</span><br><span class="line">On branch master</span><br><span class="line"></span><br><span class="line">No commits yet</span><br><span class="line"></span><br><span class="line">Changes to be committed:</span><br><span class="line">  (use <span class="string">&quot;git rm --cached &lt;file&gt;...&quot;</span> to unstage)</span><br><span class="line"></span><br><span class="line">    new file:   README.md</span><br><span class="line"></span><br><span class="line">// å¦‚æœè¿™ä¸ªé˜¶æ®µä½ å‘ç°æ­¤æ–‡ä»¶ä¸åº”è¯¥è¢«æ·»åŠ åˆ°æš‚å­˜åŒºï¼Œè¯·ä¸è¦ç²—æš´çš„ rm æ‰ï¼Œè€Œæ˜¯ä½¿ç”¨ git rm å‘½ä»¤å¹²æ‰å®ƒ</span><br><span class="line">$ git rm --cached README.md</span><br></pre></td></tr></table></figure>
<h2 id="ä»“åº“çŠ¶æ€"><a href="#ä»“åº“çŠ¶æ€" class="headerlink" title="ä»“åº“çŠ¶æ€"></a>ä»“åº“çŠ¶æ€</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ git status</span><br><span class="line">On branch master</span><br><span class="line">nothing to commit, working tree clean</span><br></pre></td></tr></table></figure>
<h2 id="æäº¤æ–‡ä»¶"><a href="#æäº¤æ–‡ä»¶" class="headerlink" title="æäº¤æ–‡ä»¶"></a>æäº¤æ–‡ä»¶</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// å°†æš‚å­˜åŒºçš„æ–‡ä»¶æäº¤åˆ°ä»“åº“ï¼Œæ­£å¸¸æƒ…å†µä¸‹ä¼šå¦‚ä¸‹é¢çš„æ“ä½œä¸€æ ·ï¼Œæ˜¾ç¤ºæ–‡ä»¶å·²ç»è¢«åŠ å…¥åˆ°ç‰ˆæœ¬åº“ä¸­ï¼Œä½†ä¹Ÿæœ‰ä¸æ­£å¸¸çš„æƒ…å†µ</span><br><span class="line">$ git commit -m <span class="string">&quot;Add README.md&quot;</span></span><br><span class="line">[master (root-commit) a384a2b] Add README.md</span><br><span class="line"> 1 file changed, 0 insertions(+), 0 deletions(-)</span><br><span class="line"> create mode 100644 README.md</span><br><span class="line"></span><br><span class="line">// è¿™ä¸ªå°±æ˜¯æäº¤æ—¶çš„ä¸æ­£å¸¸æƒ…å†µï¼Œä»€ä¹ˆæ„æ€å‘¢ï¼Ÿç¬¬ä¸€ç§è¯´æ³•çš„æ„æ€æ˜¯éœ€è¦ä½ é…ç½®ä¸€ä¸‹ä»“åº“çš„ç”¨æˆ·åç§°å’Œé‚®ç®±åœ°å€ï¼Œè¿™ä¸ªå°æ„æ€ï¼Œæˆ‘ä»¬ç›´æ¥æ¥ä¸ªå…¨å±€é…ç½®å’Œå±€éƒ¨é…ç½®å°±æå®šäº†ã€‚ç¬¬äºŒç§è¯´æ³•çš„æ„æ€æ˜¯ä½ åœ¨å®Œæˆä¸Šé¢çš„æ“ä½œä¹‹åï¼Œå¯ä»¥ä¿®å¤ç”¨äºæ­¤æäº¤çš„æ ‡è¯†ï¼Œè¯´ç™½äº†å°±æ˜¯ä½ æäº¤åˆ°ä»“åº“åè¿˜å¯ä»¥è¿›è¡Œç¼–è¾‘æäº¤è®°å½•çš„æ³¨é‡Šä¿¡æ¯ï¼ˆå°±æ˜¯å°±å¯¹ä¸‡ä¸€å°†æœ¬æ¬¡æäº¤è®°å½•çš„æ³¨é‡Šä¿¡æ¯å†™é”™çš„æƒ…å†µï¼‰ï¼Œå®ƒä¼šå¼¹å‡ºä½ æ‰€é…ç½®çš„ç¼–è¾‘å™¨è®©ä½ ä¿®æ”¹æäº¤è®°å½•çš„æ³¨é‡Šä¿¡æ¯ï¼Œå¾ˆé—æ†¾è¿™ä¸ªåªä¿®æ”¹æœ€åä¸€ä¸ªæäº¤è®°å½•çš„æ³¨é‡Šä¿¡æ¯ï¼Œé‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œæ€ä¹ˆä¿®æ”¹å‰ N æ¬¡çš„çš„æŸä¸ªæäº¤è®°å½•çš„æ³¨é‡Šä¿¡æ¯å‘¢ï¼Œè¿™é‡Œæš‚æ—¶å…ˆä¸æ¢ç©¶ï¼Œè¿™ä¸ªæ¶‰åŠåˆ° rebase æ“ä½œï¼Œè¶³ä»¥è®©æˆ‘å†æŠ˜è…¾ä¸€ç¯‡æ¥ä¸“é—¨è¯´è¿™ç§æƒ…å†µ</span><br><span class="line">$ git commit -m <span class="string">&quot;Add README.md&quot;</span></span><br><span class="line">[master (root-commit) a384a2b] Add README.md</span><br><span class="line"> Committer: user &lt;user@user.com&gt;</span><br><span class="line">Your name and email address were configured automatically based</span><br><span class="line">on your username and hostname. Please check that they are accurate.</span><br><span class="line">You can suppress this message by setting them explicitly:</span><br><span class="line"></span><br><span class="line">    git config --global user.name <span class="string">&quot;Your Name&quot;</span></span><br><span class="line">    git config --global user.email you@example.com</span><br><span class="line"></span><br><span class="line">After doing this, you may fix the identity used <span class="keyword">for</span> this commit with:</span><br><span class="line"></span><br><span class="line">    git commit --amend --reset-author</span><br><span class="line"></span><br><span class="line"> 1 file changed, 0 insertions(+), 0 deletions(-)</span><br><span class="line"> create mode 100644 README.md</span><br><span class="line"></span><br><span class="line">// é…ç½®ç”¨æˆ·å’Œé‚®ç®±äº¤æäº¤åˆ°ä»“åº“ï¼Œå°†ç”¨æˆ·å’Œé‚®ç®±æ¢æˆä½ è‡ªå·±çš„ï¼Œè¿™ä¸ªæ—¶é—´ä»£ç å·²ç»è¢«æäº¤åˆ°ä»“åº“</span><br><span class="line">$ git config user.name <span class="string">&quot;yourname&quot;</span></span><br><span class="line">$ git config user.email <span class="string">&quot;yourname@email.com&quot;</span></span><br><span class="line"></span><br><span class="line">// æŸ¥çœ‹ä»“åº“çŠ¶æ€</span><br><span class="line">$ git status</span><br><span class="line">On branch master</span><br><span class="line">nothing to commit, working tree clean</span><br></pre></td></tr></table></figure>
<h2 id="ä¿®æ”¹æœ€åä¸€æ¬¡æäº¤æ—¥å¿—ä¿¡æ¯"><a href="#ä¿®æ”¹æœ€åä¸€æ¬¡æäº¤æ—¥å¿—ä¿¡æ¯" class="headerlink" title="ä¿®æ”¹æœ€åä¸€æ¬¡æäº¤æ—¥å¿—ä¿¡æ¯"></a>ä¿®æ”¹æœ€åä¸€æ¬¡æäº¤æ—¥å¿—ä¿¡æ¯</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ vim README.md</span><br><span class="line">[1]: https://symfony.com</span><br><span class="line">$ git add README.md</span><br><span class="line">$ git commit -m <span class="string">&quot;Add symfony link&quot;</span></span><br><span class="line">[master 98a19c3] Add symfony link</span><br><span class="line"> 1 file changed, 1 insertion(+)</span><br><span class="line">$ git commit --amend</span><br><span class="line">Add symfony website link <span class="comment"># ç¼–è¾‘æ­¤ä¿¡æ¯</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Please enter the commit message for your changes. Lines starting</span></span><br><span class="line"><span class="comment"># with &#x27;#&#x27; will be ignored, and an empty message aborts the commit.</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Date:      Sun Dec 30 19:22:08 2018 +0800</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># On branch master</span></span><br><span class="line"><span class="comment"># Changes to be committed:</span></span><br><span class="line"><span class="comment">#  modified:   README.md</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line">[master abe0281] Add symfony website link</span><br><span class="line"> Date: Sun Dec 30 19:22:08 2018 +0800</span><br><span class="line"> 1 file changed, 1 insertion(+)</span><br></pre></td></tr></table></figure>
<h2 id="ä¿®æ”¹æœ€åä¸€æ¬¡æäº¤è®°å½•æ—¶çš„ç”¨æˆ·ä¿¡æ¯"><a href="#ä¿®æ”¹æœ€åä¸€æ¬¡æäº¤è®°å½•æ—¶çš„ç”¨æˆ·ä¿¡æ¯" class="headerlink" title="ä¿®æ”¹æœ€åä¸€æ¬¡æäº¤è®°å½•æ—¶çš„ç”¨æˆ·ä¿¡æ¯"></a>ä¿®æ”¹æœ€åä¸€æ¬¡æäº¤è®°å½•æ—¶çš„ç”¨æˆ·ä¿¡æ¯</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ git commit --amend --author=<span class="string">&quot;peter &lt;peter@dot.org&gt;&quot;</span></span><br><span class="line">[master facc111] Add symfony website link</span><br><span class="line"> Author: peter &lt;peter@dot.org&gt;</span><br><span class="line"> Date: Sun Dec 30 19:22:08 2018 +0800</span><br><span class="line"> 1 file changed, 1 insertion(+)</span><br></pre></td></tr></table></figure>
<h2 id="æ’¤é”€å¯¹æ–‡ä»¶å†…å®¹çš„æ›´æ”¹"><a href="#æ’¤é”€å¯¹æ–‡ä»¶å†…å®¹çš„æ›´æ”¹" class="headerlink" title="æ’¤é”€å¯¹æ–‡ä»¶å†…å®¹çš„æ›´æ”¹"></a>æ’¤é”€å¯¹æ–‡ä»¶å†…å®¹çš„æ›´æ”¹</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ vim README.md</span><br><span class="line">[1]: https://symfony.com</span><br><span class="line">[2]: https://symfony.com/projects</span><br><span class="line">$ git status</span><br><span class="line">On branch master</span><br><span class="line">Changes not staged <span class="keyword">for</span> commit:</span><br><span class="line">  (use <span class="string">&quot;git add &lt;file&gt;...&quot;</span> to update what will be committed)</span><br><span class="line">  (use <span class="string">&quot;git checkout -- &lt;file&gt;...&quot;</span> to discard changes <span class="keyword">in</span> working directory)</span><br><span class="line"></span><br><span class="line">    modified:   README.md</span><br><span class="line"></span><br><span class="line">no changes added to commit (use <span class="string">&quot;git add&quot;</span> and/or <span class="string">&quot;git commit -a&quot;</span>)</span><br><span class="line">$ git checkout -- README.md</span><br></pre></td></tr></table></figure>
<h2 id="æäº¤æ–‡ä»¶å˜æ›´åˆ°ä»“åº“"><a href="#æäº¤æ–‡ä»¶å˜æ›´åˆ°ä»“åº“" class="headerlink" title="æäº¤æ–‡ä»¶å˜æ›´åˆ°ä»“åº“"></a>æäº¤æ–‡ä»¶å˜æ›´åˆ°ä»“åº“</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ vim README.md</span><br><span class="line">[1]: https://symfony.com</span><br><span class="line">[2]: https://symfony.com/projects</span><br><span class="line">$ git status</span><br><span class="line">On branch master</span><br><span class="line">Changes not staged <span class="keyword">for</span> commit:</span><br><span class="line">  (use <span class="string">&quot;git add &lt;file&gt;...&quot;</span> to update what will be committed)</span><br><span class="line">  (use <span class="string">&quot;git checkout -- &lt;file&gt;...&quot;</span> to discard changes <span class="keyword">in</span> working directory)</span><br><span class="line"></span><br><span class="line">    modified:   README.md</span><br><span class="line"></span><br><span class="line">no changes added to commit (use <span class="string">&quot;git add&quot;</span> and/or <span class="string">&quot;git commit -a&quot;</span>)</span><br><span class="line">$ git add README.md</span><br><span class="line">$ git commit -m <span class="string">&quot;Add projects link&quot;</span></span><br><span class="line">[master 7d8fcb9] Add projects link</span><br><span class="line"> 1 file changed, 1 insertion(+)</span><br></pre></td></tr></table></figure>
<h2 id="å›æ»šä»“åº“åˆ°æŸä¸ªæäº¤"><a href="#å›æ»šä»“åº“åˆ°æŸä¸ªæäº¤" class="headerlink" title="å›æ»šä»“åº“åˆ°æŸä¸ªæäº¤"></a>å›æ»šä»“åº“åˆ°æŸä¸ªæäº¤</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ git <span class="built_in">log</span> --oneline</span><br><span class="line">7d8fcb9 (HEAD -&gt; master) Add projects link</span><br><span class="line">facc111 Add symfony website link</span><br><span class="line">a384a2b Add README.md</span><br><span class="line">$ git reset --hard facc111</span><br><span class="line">HEAD is now at facc111 Add symfony website link</span><br><span class="line">$ git <span class="built_in">log</span> --oneline</span><br><span class="line">facc111 (HEAD -&gt; master) Add symfony website link</span><br><span class="line">a384a2b Add README.md</span><br></pre></td></tr></table></figure>
<h2 id="æ’¤é”€å·¥ä½œåŒºå’Œæš‚å­˜åŒº"><a href="#æ’¤é”€å·¥ä½œåŒºå’Œæš‚å­˜åŒº" class="headerlink" title="æ’¤é”€å·¥ä½œåŒºå’Œæš‚å­˜åŒº"></a>æ’¤é”€å·¥ä½œåŒºå’Œæš‚å­˜åŒº</h2><blockquote>
<ul>
<li><code>--soft</code>ï¼šå½“å‰åˆ†æ”¯é‡ç½®åˆ°æŒ‡å®š commit è®°å½•ä½ç½®ï¼Œç´¢å¼•å’Œå·¥ä½œæ ‘ä¸å˜</li>
<li><code>--mixed</code>ï¼šå½“å‰åˆ†æ”¯é‡ç½®åˆ°æŒ‡å®š commit è®°å½•ä½ç½®ï¼Œç´¢å¼•è¢«æ›´æ–°ï¼Œå·¥ä½œæ ‘ä¸å˜</li>
<li><code>--hard</code>ï¼šå½“å‰åˆ†æ”¯é‡ç½®åˆ°æŒ‡å®š commit è®°å½•ä½ç½®ï¼Œç´¢å¼•å’Œå·¥ä½œæ ‘éƒ½æ›´æ–°</li>
</ul>
</blockquote>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ touch index.&#123;html,js,css&#125;</span><br><span class="line">$ git status</span><br><span class="line">On branch master</span><br><span class="line">Untracked files:</span><br><span class="line">  (use <span class="string">&quot;git add &lt;file&gt;...&quot;</span> to include <span class="keyword">in</span> what will be committed)</span><br><span class="line"></span><br><span class="line">    index.css</span><br><span class="line">    index.html</span><br><span class="line">    index.js</span><br><span class="line"></span><br><span class="line">nothing added to commit but untracked files present (use <span class="string">&quot;git add&quot;</span> to track)</span><br><span class="line">$ $ git add .</span><br><span class="line">$ git status</span><br><span class="line">On branch master</span><br><span class="line">Changes to be committed:</span><br><span class="line">  (use <span class="string">&quot;git reset HEAD &lt;file&gt;...&quot;</span> to unstage)</span><br><span class="line"></span><br><span class="line">    new file:   index.css</span><br><span class="line">    new file:   index.html</span><br><span class="line">    new file:   index.js</span><br><span class="line"></span><br><span class="line">// åªæ’¤é”€æš‚å­˜åŒº</span><br><span class="line">$ git reset HEAD</span><br><span class="line"></span><br><span class="line">// å…¨éƒ¨æ’¤é”€</span><br><span class="line">$ git reset --hard HEAD</span><br><span class="line">HEAD is now at facc111 Add symfony website lin</span><br></pre></td></tr></table></figure>
<h2 id="æŸ¥çœ‹å·²æš‚å­˜å’Œæœªæš‚å­˜çš„æ›´æ–°"><a href="#æŸ¥çœ‹å·²æš‚å­˜å’Œæœªæš‚å­˜çš„æ›´æ–°" class="headerlink" title="æŸ¥çœ‹å·²æš‚å­˜å’Œæœªæš‚å­˜çš„æ›´æ–°"></a>æŸ¥çœ‹å·²æš‚å­˜å’Œæœªæš‚å­˜çš„æ›´æ–°</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ vim README.md</span><br><span class="line">[1]: https://symfony.com</span><br><span class="line">[2]: https://symfony.com/projects</span><br><span class="line">$ git add README.md</span><br><span class="line">$ vim README.md</span><br><span class="line">[1]: https://symfony.com</span><br><span class="line">[2]: https://symfony.com/projects</span><br><span class="line">[3]: https://symfony.com/doc/current/reference/requirements.html</span><br><span class="line"></span><br><span class="line">// æ¯”è¾ƒå·¥ä½œç›®å½•ä¸­å½“å‰æ–‡ä»¶å’Œæš‚å­˜åŒºåŸŸå¿«ç…§ä¹‹é—´çš„å·®å¼‚ï¼Œä¹Ÿå°±æ˜¯ä¿®æ”¹ä¹‹åè¿˜æ²¡æœ‰æš‚å­˜èµ·æ¥çš„å˜åŒ–å†…å®¹</span><br><span class="line">$ git diff</span><br><span class="line">diff --git a/README.md b/README.md</span><br><span class="line">index 56737ed..4a93303 100644</span><br><span class="line">--- a/README.md</span><br><span class="line">+++ b/README.md</span><br><span class="line">@@ -1,2 +1,3 @@</span><br><span class="line"> [1]: https://symfony.com</span><br><span class="line"> [2]: https://symfony.com/projects</span><br><span class="line">+[3]: https://symfony.com/doc/current/reference/requirements.html</span><br><span class="line"></span><br><span class="line">// æŸ¥çœ‹å·²ç»æš‚å­˜èµ·æ¥çš„æ–‡ä»¶å’Œä¸Šæ¬¡æäº¤æ—¶çš„å¿«ç…§ä¹‹é—´çš„å·®å¼‚</span><br><span class="line">$ git diff --cached</span><br><span class="line">diff --git a/README.md b/README.md</span><br><span class="line">index 55c6709..56737ed 100644</span><br><span class="line">--- a/README.md</span><br><span class="line">+++ b/README.md</span><br><span class="line">@@ -1 +1,2 @@</span><br><span class="line"> [1]: https://symfony.com</span><br><span class="line">+[2]: https://symfony.com/projects</span><br><span class="line"></span><br><span class="line">æˆ–è€…</span><br><span class="line"></span><br><span class="line">// æŸ¥çœ‹å·²ç»æš‚å­˜èµ·æ¥çš„æ–‡ä»¶å’Œä¸Šæ¬¡æäº¤æ—¶çš„å¿«ç…§ä¹‹é—´çš„å·®å¼‚</span><br><span class="line">$ git diff --staged</span><br><span class="line">diff --git a/README.md b/README.md</span><br><span class="line">index 55c6709..56737ed 100644</span><br><span class="line">--- a/README.md</span><br><span class="line">+++ b/README.md</span><br><span class="line">@@ -1 +1,2 @@</span><br><span class="line"> [1]: https://symfony.com</span><br><span class="line">+[2]: https://symfony.com/projects</span><br><span class="line"></span><br><span class="line">// è·³è¿‡ä½¿ç”¨æš‚å­˜åŒºåŸŸï¼Œgit ä¼šè‡ªåŠ¨æŠŠæ‰€æœ‰å·²ç»è·Ÿè¸ªè¿‡çš„æ–‡ä»¶æš‚å­˜èµ·æ¥ä¸€å¹¶æäº¤ï¼Œä»è€Œè·³è¿‡ git add æ­¥éª¤</span><br><span class="line">$ git status</span><br><span class="line">On branch master</span><br><span class="line">Changes to be committed:</span><br><span class="line">  (use <span class="string">&quot;git reset HEAD &lt;file&gt;...&quot;</span> to unstage)</span><br><span class="line"></span><br><span class="line">    modified:   README.md</span><br><span class="line"></span><br><span class="line">Changes not staged <span class="keyword">for</span> commit:</span><br><span class="line">  (use <span class="string">&quot;git add &lt;file&gt;...&quot;</span> to update what will be committed)</span><br><span class="line">  (use <span class="string">&quot;git checkout -- &lt;file&gt;...&quot;</span> to discard changes <span class="keyword">in</span> working directory)</span><br><span class="line"></span><br><span class="line">    modified:   README.md</span><br><span class="line">$ git commit -am <span class="string">&quot;Add projects and requirements link&quot;</span></span><br><span class="line">[master 7778db8] Add projects and requirements link</span><br><span class="line"> 1 file changed, 2 insertions(+)</span><br><span class="line">$ git status</span><br><span class="line">On branch master</span><br><span class="line">nothing to commit, working tree clean</span><br></pre></td></tr></table></figure>
<h2 id="ç§»é™¤æ–‡ä»¶"><a href="#ç§»é™¤æ–‡ä»¶" class="headerlink" title="ç§»é™¤æ–‡ä»¶"></a>ç§»é™¤æ–‡ä»¶</h2><p><img src="https://inotes.oss-cn-beijing.aliyuncs.com/git/201901/git-remove-file.webp" alt="git-remove-file.webp"></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// è¯¯åˆ äº†æ–‡ä»¶ï¼ŒæœŸæœ›ä¸äº§ç”Ÿæäº¤è®°å½•å°±æŠŠæ–‡ä»¶å¹²æ‰ï¼ˆæ­¤æ–‡ä»¶ä»æ¥æ²¡æäº¤åˆ°ä»“åº“ä¸­ï¼‰ï¼Œé€šè¿‡ä»¥ä¸‹çš„æ“ä½œå°±å¯ä»¥çœ‹åˆ°æ­¤æ–‡ä»¶æ¢å¤åˆ°ä¹‹å‰åˆ›å»ºæ—¶çš„çŠ¶æ€ï¼Œæ­¤æ—¶ä½ å¯ä»¥è€ƒè™‘åˆ é™¤æˆ–è€…åšå…¶å®ƒæ›´æ”¹</span><br><span class="line">$ touch index.html &amp;&amp; git add index.html &amp;&amp; rm index.html</span><br><span class="line">remove index.html? y</span><br><span class="line">$ git status</span><br><span class="line">On branch master</span><br><span class="line">Changes to be committed:</span><br><span class="line">  (use <span class="string">&quot;git reset HEAD &lt;file&gt;...&quot;</span> to unstage)</span><br><span class="line"></span><br><span class="line">    new file:   index.html</span><br><span class="line"></span><br><span class="line">Changes not staged <span class="keyword">for</span> commit:</span><br><span class="line">  (use <span class="string">&quot;git add/rm &lt;file&gt;...&quot;</span> to update what will be committed)</span><br><span class="line">  (use <span class="string">&quot;git checkout -- &lt;file&gt;...&quot;</span> to discard changes <span class="keyword">in</span> working directory)</span><br><span class="line"></span><br><span class="line">    deleted:    index.html</span><br><span class="line">$ git checkout -- index.html</span><br><span class="line">$ git status</span><br><span class="line">On branch master</span><br><span class="line">Changes to be committed:</span><br><span class="line">  (use <span class="string">&quot;git reset HEAD &lt;file&gt;...&quot;</span> to unstage)</span><br><span class="line"></span><br><span class="line">    new file:   index.html</span><br><span class="line">$ git reset HEAD index.html</span><br><span class="line">$ git status</span><br><span class="line">On branch master</span><br><span class="line">Untracked files:</span><br><span class="line">  (use <span class="string">&quot;git add &lt;file&gt;...&quot;</span> to include <span class="keyword">in</span> what will be committed)</span><br><span class="line"></span><br><span class="line">    index.html</span><br><span class="line"></span><br><span class="line">nothing added to commit but untracked files present (use <span class="string">&quot;git add&quot;</span> to track)</span><br><span class="line"></span><br><span class="line">// æŠŠæ–‡ä»¶ä»æš‚å­˜åŒºåŸŸç§»é™¤ï¼Œä½†ä»ç„¶å¸Œæœ›ä¿ç•™åœ¨å½“å‰å·¥ä½œåŒº</span><br><span class="line">$ git add index.html</span><br><span class="line">$ git status</span><br><span class="line">On branch master</span><br><span class="line">Changes to be committed:</span><br><span class="line">  (use <span class="string">&quot;git reset HEAD &lt;file&gt;...&quot;</span> to unstage)</span><br><span class="line"></span><br><span class="line">    new file:   index.html</span><br><span class="line">$ git rm --cached index.html</span><br><span class="line">$ git status</span><br><span class="line">On branch master</span><br><span class="line">Untracked files:</span><br><span class="line">  (use <span class="string">&quot;git add &lt;file&gt;...&quot;</span> to include <span class="keyword">in</span> what will be committed)</span><br><span class="line"></span><br><span class="line">  index.html</span><br><span class="line"></span><br><span class="line">nothing added to commit but untracked files present (use <span class="string">&quot;git add&quot;</span> to track)</span><br><span class="line"></span><br><span class="line">// å°†æœªåŠ å…¥æš‚å­˜åŒºçš„æ–‡ä»¶å…¨éƒ¨æ¸…ç†æ‰ï¼Œå³å°†å·¥ä½œåŒºçš„å˜æ›´å…¨éƒ¨æ¸…ç†æ‰ï¼Œéœ€è¦è°¨æ…æ“ä½œ</span><br><span class="line">$ git clean -df</span><br><span class="line">Removing index.html</span><br></pre></td></tr></table></figure>
<h2 id="ç§»åŠ¨æˆ–è€…é‡å‘½åæ–‡ä»¶"><a href="#ç§»åŠ¨æˆ–è€…é‡å‘½åæ–‡ä»¶" class="headerlink" title="ç§»åŠ¨æˆ–è€…é‡å‘½åæ–‡ä»¶"></a>ç§»åŠ¨æˆ–è€…é‡å‘½åæ–‡ä»¶</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ touch index.php</span><br><span class="line">$ git add index.php</span><br><span class="line">$ git commit -m <span class="string">&quot;Add index.php&quot;</span></span><br><span class="line">[master da3c74c] Add index.php</span><br><span class="line"> 1 file changed, 0 insertions(+), 0 deletions(-)</span><br><span class="line"> create mode 100644 index.php</span><br><span class="line">$ git mv index.php index.html</span><br><span class="line">$ git status</span><br><span class="line">On branch master</span><br><span class="line">Changes to be committed:</span><br><span class="line">  (use <span class="string">&quot;git reset HEAD &lt;file&gt;...&quot;</span> to unstage)</span><br><span class="line"></span><br><span class="line">  renamed:    index.php -&gt; index.html</span><br></pre></td></tr></table></figure>
<h2 id="å·®å¼‚æ¯”è¾ƒ"><a href="#å·®å¼‚æ¯”è¾ƒ" class="headerlink" title="å·®å¼‚æ¯”è¾ƒ"></a>å·®å¼‚æ¯”è¾ƒ</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// æ¯”è¾ƒä¸¤ä¸ªåˆ†æ”¯çš„æ‰€æœ‰å·®å¼‚</span><br><span class="line">$ git diff master develop</span><br><span class="line">diff --git a/.editorconfig b/.editorconfig</span><br><span class="line">deleted file mode 100644</span><br><span class="line">index e69de29..0000000</span><br><span class="line">diff --git a/README.md b/README.md</span><br><span class="line">index f6f24a8..c0cd272 100644</span><br><span class="line">--- a/README.md</span><br><span class="line">+++ b/README.md</span><br><span class="line">@@ -3,4 +3,3 @@</span><br><span class="line"> [3]: https://symfony.com/doc/current/reference/requirements.html</span><br><span class="line"> [4]: https://symfony.com/doc/current/setup.html</span><br><span class="line"> [5]: http://semver.org</span><br><span class="line">-[6]: https://symfony.com/doc/current/contributing/community/releases.html</span><br><span class="line"></span><br><span class="line">// æ¯”è¾ƒä¸¤ä¸ªæäº¤è®°å½•çš„æ‰€æœ‰å·®å¼‚</span><br><span class="line">$ git diff fe3b3cf 688088f</span><br><span class="line">diff --git a/.editorconfig b/.editorconfig</span><br><span class="line">deleted file mode 100644</span><br><span class="line">index e69de29..0000000</span><br><span class="line">diff --git a/README.md b/README.md</span><br><span class="line">index f6f24a8..c0cd272 100644</span><br><span class="line">--- a/README.md</span><br><span class="line">+++ b/README.md</span><br><span class="line">@@ -3,4 +3,3 @@</span><br><span class="line"> [3]: https://symfony.com/doc/current/reference/requirements.html</span><br><span class="line"> [4]: https://symfony.com/doc/current/setup.html</span><br><span class="line"> [5]: http://semver.org</span><br><span class="line">-[6]: https://symfony.com/doc/current/contributing/community/releases.html</span><br><span class="line"></span><br><span class="line">// æ¯”è¾ƒä¸¤ä¸ªæäº¤ä¸­çš„æŸä¸ªæ–‡ä»¶çš„å·®å¼‚</span><br><span class="line">$ git diff fe3b3cf 688088f -- README.md</span><br><span class="line">diff --git a/README.md b/README.md</span><br><span class="line">index f6f24a8..c0cd272 100644</span><br><span class="line">--- a/README.md</span><br><span class="line">+++ b/README.md</span><br><span class="line">@@ -3,4 +3,3 @@</span><br><span class="line"> [3]: https://symfony.com/doc/current/reference/requirements.html</span><br><span class="line"> [4]: https://symfony.com/doc/current/setup.html</span><br><span class="line"> [5]: http://semver.org</span><br><span class="line">-[6]: https://symfony.com/doc/current/contributing/community/releases.html</span><br></pre></td></tr></table></figure>
<h2 id="å‚¨è—"><a href="#å‚¨è—" class="headerlink" title="å‚¨è—"></a>å‚¨è—</h2><p>å½“ä½ æ­£åœ¨è¿›è¡Œé¡¹ç›®ä¸­æŸä¸€éƒ¨åˆ†çš„å·¥ä½œï¼Œé‡Œé¢çš„ä¸œè¥¿å¤„äºä¸€ä¸ªæ¯”è¾ƒæ‚ä¹±çš„çŠ¶æ€ï¼Œè€Œä½ æƒ³è½¬åˆ°å…¶ä»–åˆ†æ”¯ä¸Šè¿›è¡Œä¸€äº›å·¥ä½œã€‚é—®é¢˜æ˜¯ï¼Œä½ ä¸æƒ³æäº¤è¿›è¡Œäº†ä¸€åŠçš„å·¥ä½œï¼Œå¦åˆ™ä»¥åä½ æ— æ³•å›åˆ°è¿™ä¸ªå·¥ä½œç‚¹ã€‚<code>git stash</code> å°±æ˜¯è§£å†³è¿™ç§é—®é¢˜çš„ã€‚</p>
<h3 id="å‚¨è—ä»»åŠ¡"><a href="#å‚¨è—ä»»åŠ¡" class="headerlink" title="å‚¨è—ä»»åŠ¡"></a>å‚¨è—ä»»åŠ¡</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// å‡è®¾ç›®å‰å·¥ä½œè¿›è¡Œäº†ä¸€æ®µæ—¶é—´åï¼Œä»“åº“çš„ç›®å‰çš„çŠ¶æ€</span><br><span class="line">$ git status</span><br><span class="line">On branch master</span><br><span class="line">Changes to be committed:</span><br><span class="line">  (use <span class="string">&quot;git reset HEAD &lt;file&gt;...&quot;</span> to unstage)</span><br><span class="line"></span><br><span class="line">  modified:   index.css</span><br><span class="line">  modified:   index.html</span><br><span class="line">  modified:   index.js</span><br><span class="line"></span><br><span class="line">Changes not staged <span class="keyword">for</span> commit:</span><br><span class="line">  (use <span class="string">&quot;git add &lt;file&gt;...&quot;</span> to update what will be committed)</span><br><span class="line">  (use <span class="string">&quot;git checkout -- &lt;file&gt;...&quot;</span> to discard changes <span class="keyword">in</span> working directory)</span><br><span class="line"></span><br><span class="line">  modified:   index.html</span><br><span class="line"></span><br><span class="line">// æ­¤æ—¶ç”±äºç´§æ€¥çš„ä»»åŠ¡æˆ–è€… bug éœ€è¦è§£å†³ï¼Œæš‚æ—¶å°†ä¹‹å‰åšçš„ä»»åŠ¡æš‚å­˜èµ·æ¥</span><br><span class="line">$ git stash</span><br><span class="line">Saved working directory and index state WIP on master: fe3b3cf Integrating submission logs</span><br><span class="line"></span><br><span class="line">// è·å–ä¸€ä¸ªå¹²å‡€çš„å·¥ä½œç›®å½•</span><br><span class="line">$ git status</span><br><span class="line">On branch master</span><br><span class="line">nothing to commit, working tree clean</span><br></pre></td></tr></table></figure>
<h3 id="æŸ¥çœ‹å‚¨è—ä»»åŠ¡åˆ—è¡¨"><a href="#æŸ¥çœ‹å‚¨è—ä»»åŠ¡åˆ—è¡¨" class="headerlink" title="æŸ¥çœ‹å‚¨è—ä»»åŠ¡åˆ—è¡¨"></a>æŸ¥çœ‹å‚¨è—ä»»åŠ¡åˆ—è¡¨</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ git stash list</span><br><span class="line">stash@&#123;0&#125;: WIP on master: fe3b3cf Integrating submission logs</span><br><span class="line">stash@&#123;1&#125;: WIP on master: fe3b3cf Integrating submission logs</span><br></pre></td></tr></table></figure>
<h3 id="åº”ç”¨æœ€è¿‘çš„å‚¨è—"><a href="#åº”ç”¨æœ€è¿‘çš„å‚¨è—" class="headerlink" title="åº”ç”¨æœ€è¿‘çš„å‚¨è—"></a>åº”ç”¨æœ€è¿‘çš„å‚¨è—</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// apply é€‰é¡¹å¹¶ä¸ä¼šåˆ é™¤å‚¨è—</span><br><span class="line">$ git stash apply</span><br><span class="line">æˆ–</span><br><span class="line">$ git stash apply stash@&#123;0&#125;</span><br><span class="line">On branch master</span><br><span class="line">Changes not staged <span class="keyword">for</span> commit:</span><br><span class="line">  (use <span class="string">&quot;git add &lt;file&gt;...&quot;</span> to update what will be committed)</span><br><span class="line">  (use <span class="string">&quot;git checkout -- &lt;file&gt;...&quot;</span> to discard changes <span class="keyword">in</span> working directory)</span><br><span class="line"></span><br><span class="line">  modified:   README.md</span><br><span class="line"></span><br><span class="line">no changes added to commit (use <span class="string">&quot;git add&quot;</span> and/or <span class="string">&quot;git commit -a&quot;</span>)</span><br><span class="line"></span><br><span class="line">// æ­¤æ—¶åº”ç”¨å‚¨è—æ—¶ä¸ä¹‹å‰å‚¨è—æ—¶çš„æ–‡ä»¶çŠ¶æ€ä¸ä¸€è‡´</span><br><span class="line">$ git stash apply stash@&#123;1&#125;</span><br><span class="line">On branch master</span><br><span class="line">Changes not staged <span class="keyword">for</span> commit:</span><br><span class="line">  (use <span class="string">&quot;git add &lt;file&gt;...&quot;</span> to update what will be committed)</span><br><span class="line">  (use <span class="string">&quot;git checkout -- &lt;file&gt;...&quot;</span> to discard changes <span class="keyword">in</span> working directory)</span><br><span class="line"></span><br><span class="line">  modified:   index.css</span><br><span class="line">  modified:   index.html <span class="comment"># çœ‹è¿™ä¸ªæ–‡ä»¶ä¹‹å‰å‚¨è—æ—¶çš„çŠ¶æ€</span></span><br><span class="line">  modified:   index.js</span><br><span class="line"></span><br><span class="line">// å¸¦ä¸Šä¸€ä¸ª --index çš„é€‰é¡¹æ¥å‘Šè¯‰å‘½ä»¤é‡æ–°åº”ç”¨è¢«æš‚å­˜çš„å˜æ›´</span><br><span class="line">$ git stash apply stash@&#123;0&#125; --index</span><br><span class="line">On branch master</span><br><span class="line">Changes to be committed:</span><br><span class="line">  (use <span class="string">&quot;git reset HEAD &lt;file&gt;...&quot;</span> to unstage)</span><br><span class="line"></span><br><span class="line">  modified:   index.css</span><br><span class="line">  modified:   index.html</span><br><span class="line">  modified:   index.js</span><br><span class="line"></span><br><span class="line">Changes not staged <span class="keyword">for</span> commit:</span><br><span class="line">  (use <span class="string">&quot;git add &lt;file&gt;...&quot;</span> to update what will be committed)</span><br><span class="line">  (use <span class="string">&quot;git checkout -- &lt;file&gt;...&quot;</span> to discard changes <span class="keyword">in</span> working directory)</span><br><span class="line"></span><br><span class="line">  modified:   index.html <span class="comment"># æ–‡ä»¶æš‚å­˜çŠ¶æ€æ¢å¤äº†</span></span><br><span class="line"></span><br><span class="line">// åº”ç”¨å‚¨è—åç«‹å³åˆ é™¤å‚¨è—</span><br><span class="line">$ git stash pop --index</span><br><span class="line">On branch master</span><br><span class="line">Changes to be committed:</span><br><span class="line">  (use <span class="string">&quot;git reset HEAD &lt;file&gt;...&quot;</span> to unstage)</span><br><span class="line"></span><br><span class="line">  modified:   index.css</span><br><span class="line">  modified:   index.html</span><br><span class="line">  modified:   index.js</span><br><span class="line"></span><br><span class="line">Changes not staged <span class="keyword">for</span> commit:</span><br><span class="line">  (use <span class="string">&quot;git add &lt;file&gt;...&quot;</span> to update what will be committed)</span><br><span class="line">  (use <span class="string">&quot;git checkout -- &lt;file&gt;...&quot;</span> to discard changes <span class="keyword">in</span> working directory)</span><br><span class="line"></span><br><span class="line">  modified:   index.html</span><br><span class="line"></span><br><span class="line">Dropped refs/stash@&#123;0&#125; (5c5c3fe5374020b5d4a1b0d5303b0cb932227134)</span><br></pre></td></tr></table></figure>
<h3 id="åˆ é™¤å‚¨è—"><a href="#åˆ é™¤å‚¨è—" class="headerlink" title="åˆ é™¤å‚¨è—"></a>åˆ é™¤å‚¨è—</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ git stash drop stash@&#123;0&#125;</span><br><span class="line">Dropped stash@&#123;0&#125; (e2ffa6a2b49d31703266cf6668f2b51f94e9d62f)</span><br></pre></td></tr></table></figure>
<h3 id="å–æ¶ˆå‚¨è—"><a href="#å–æ¶ˆå‚¨è—" class="headerlink" title="å–æ¶ˆå‚¨è—"></a>å–æ¶ˆå‚¨è—</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œä½ å¯èƒ½æƒ³åº”ç”¨å‚¨è—çš„ä¿®æ”¹ï¼Œåœ¨è¿›è¡Œäº†ä¸€äº›å…¶ä»–çš„ä¿®æ”¹åï¼Œåˆè¦å–æ¶ˆä¹‹å‰æ‰€åº”ç”¨å‚¨è—çš„ä¿®æ”¹</span><br><span class="line">$ git status</span><br><span class="line">On branch master</span><br><span class="line">Changes not staged <span class="keyword">for</span> commit:</span><br><span class="line">  (use <span class="string">&quot;git add &lt;file&gt;...&quot;</span> to update what will be committed)</span><br><span class="line">  (use <span class="string">&quot;git checkout -- &lt;file&gt;...&quot;</span> to discard changes <span class="keyword">in</span> working directory)</span><br><span class="line"></span><br><span class="line">  modified:   index.html</span><br><span class="line"></span><br><span class="line">no changes added to commit (use <span class="string">&quot;git add&quot;</span> and/or <span class="string">&quot;git commit -a&quot;</span>)</span><br><span class="line">$ git stash</span><br><span class="line">Saved working directory and index state WIP on master: fe3b3cf Integrating submission logs</span><br><span class="line">$ git stash list</span><br><span class="line">stash@&#123;0&#125;: WIP on master: fe3b3cf Integrating submission logs</span><br><span class="line">$ git stash apply stash@&#123;0&#125; --index</span><br><span class="line">On branch master</span><br><span class="line">Changes not staged <span class="keyword">for</span> commit:</span><br><span class="line">  (use <span class="string">&quot;git add &lt;file&gt;...&quot;</span> to update what will be committed)</span><br><span class="line">  (use <span class="string">&quot;git checkout -- &lt;file&gt;...&quot;</span> to discard changes <span class="keyword">in</span> working directory)</span><br><span class="line"></span><br><span class="line">  modified:   index.html</span><br><span class="line"></span><br><span class="line">no changes added to commit (use <span class="string">&quot;git add&quot;</span> and/or <span class="string">&quot;git commit -a&quot;</span>)</span><br><span class="line"></span><br><span class="line">// å–æ¶ˆåº”ç”¨çš„å‚¨è—ï¼Œæ²¡æœ‰æŒ‡å®šé»˜è®¤ä¸ºæœ€è¿‘ä¸€æ¬¡å‚¨è—</span><br><span class="line">$ git stash show -p stash@&#123;0&#125; | git apply -R</span><br><span class="line">æˆ–</span><br><span class="line">$ git stash show -p | git apply -R</span><br></pre></td></tr></table></figure>
<h3 id="ä»å‚¨è—ä¸­åˆ›å»ºåˆ†æ”¯"><a href="#ä»å‚¨è—ä¸­åˆ›å»ºåˆ†æ”¯" class="headerlink" title="ä»å‚¨è—ä¸­åˆ›å»ºåˆ†æ”¯"></a>ä»å‚¨è—ä¸­åˆ›å»ºåˆ†æ”¯</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ git stash branch testchanges</span><br><span class="line">Switched to a new branch <span class="string">&#x27;testchanges&#x27;</span></span><br><span class="line">On branch testchanges</span><br><span class="line">Changes to be committed:</span><br><span class="line">  (use <span class="string">&quot;git reset HEAD &lt;file&gt;...&quot;</span> to unstage)</span><br><span class="line"></span><br><span class="line">  modified:   index.css</span><br><span class="line">  modified:   index.html</span><br><span class="line">  modified:   index.js</span><br><span class="line"></span><br><span class="line">Changes not staged <span class="keyword">for</span> commit:</span><br><span class="line">  (use <span class="string">&quot;git add &lt;file&gt;...&quot;</span> to update what will be committed)</span><br><span class="line">  (use <span class="string">&quot;git checkout -- &lt;file&gt;...&quot;</span> to discard changes <span class="keyword">in</span> working directory)</span><br><span class="line"></span><br><span class="line">  modified:   index.html</span><br><span class="line"></span><br><span class="line">Dropped refs/stash@&#123;0&#125; (9d514109f5cf6c23c75297af595189d5af839693)</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>git</category>
      </categories>
      <tags>
        <tag>git</tag>
      </tags>
  </entry>
  <entry>
    <title>Git ä¸­ä¸€ä¸ªå®¢æˆ·ç«¯è®¾ç½®å¤šä¸ªè´¦å·</title>
    <url>/2018/01/27/git-multiple-accounts/</url>
    <content><![CDATA[<p>ğŸ˜¢ æœ€è¿‘é‡åˆ°è¿™æ ·çš„éœ€æ±‚ï¼Œéœ€è¦åœ¨ä¸€å°ç”µè„‘ä¸ŠåŒæ—¶ä½¿ç”¨ä¸¤ä¸ª <code>github</code> è´¦å·ï¼Œè´Ÿè´£ä¸åŒçš„ç”¨é€”ï¼Œæ¯”å¦‚ï¼šä¸€ä¸ªç”¨æ¥å†™ä¸ªäººé¡¹ç›®ï¼Œä¸€ä¸ªç”¨æ¥å†™å…¬å¸çš„é¡¹ç›®ã€‚</p>
<span id="more"></span>
<ul>
<li><a href="https://imajinyun.xyz/2018/01/22/git-started/"><code>Git èµ·æ­¥</code></a></li>
<li><a href="https://imajinyun.xyz/2018/01/23/git-basic/"><code>Git åŸºæœ¬æ“ä½œ</code></a></li>
<li><a href="https://imajinyun.xyz/2018/01/24/git-log/"><code>Git æŸ¥çœ‹æ—¥å¿—</code></a></li>
<li><a href="https://imajinyun.xyz/2018/01/25/git-branch/"><code>Git åˆ†æ”¯</code></a></li>
<li><a href="https://imajinyun.xyz/2018/01/27/git-multiple-accounts/"><strong>Git ä¸­ä¸€ä¸ªå®¢æˆ·ç«¯è®¾ç½®å¤šä¸ªè´¦å·</strong></a></li>
<li><a href="https://imajinyun.xyz/2018/05/01/git-workflow/"><code>Git Workflow</code></a></li>
<li><a href="https://imajinyun.xyz/2020/09/07/git-collection-command/"><code>Git å‘½ä»¤å¤§å…¨</code></a></li>
</ul>
<h1 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h1><h2 id="æ³¨å†Œä¸¤ä¸ª-git-è´¦å·"><a href="#æ³¨å†Œä¸¤ä¸ª-git-è´¦å·" class="headerlink" title="æ³¨å†Œä¸¤ä¸ª git è´¦å·"></a>æ³¨å†Œä¸¤ä¸ª git è´¦å·</h2><blockquote>
<p>é€‰æ‹©ä¸€ä¸ªå¹³å°æ³¨å†Œä¸¤ä¸ªè´¦å·å³å¯ã€‚</p>
</blockquote>
<ul>
<li><a href="https://github.com/"><code>GitHub</code></a></li>
<li><a href="https://gitee.com/"><code>Gitee</code></a></li>
<li><a href="https://coding.net/"><code>Coding</code></a></li>
<li><a href="https://bitbucket.org/"><code>Bitbucket</code></a></li>
<li><a href="https://gitlab.com/explore"><code>GitLab</code></a></li>
</ul>
<h2 id="å–æ¶ˆå…¨å±€è®¾ç½®çš„ç”¨æˆ·åå’Œé‚®ç®±"><a href="#å–æ¶ˆå…¨å±€è®¾ç½®çš„ç”¨æˆ·åå’Œé‚®ç®±" class="headerlink" title="å–æ¶ˆå…¨å±€è®¾ç½®çš„ç”¨æˆ·åå’Œé‚®ç®±"></a>å–æ¶ˆå…¨å±€è®¾ç½®çš„ç”¨æˆ·åå’Œé‚®ç®±</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// å–æ¶ˆå…¨å±€ç”¨æˆ·åå’Œé‚®ç®±</span><br><span class="line">$ git config --global --<span class="built_in">unset</span> user.name</span><br><span class="line">$ git config --global --<span class="built_in">unset</span> user.email</span><br></pre></td></tr></table></figure>
<h1 id="SSH-é…ç½®"><a href="#SSH-é…ç½®" class="headerlink" title="SSH é…ç½®"></a>SSH é…ç½®</h1><h2 id="ç”Ÿæˆç§é’¥å’Œå…¬é’¥"><a href="#ç”Ÿæˆç§é’¥å’Œå…¬é’¥" class="headerlink" title="ç”Ÿæˆç§é’¥å’Œå…¬é’¥"></a>ç”Ÿæˆç§é’¥å’Œå…¬é’¥</h2><blockquote>
<p>å¦‚æœç”¨æˆ·å®¶ç›®å½•ä¸‹æ²¡æœ‰ <code>.ssh</code> ç›®å½•ï¼Œè¯·è‡ªè¡Œåˆ›å»º<br>ç”±äºæˆ‘æ³¨å†Œå¤šå®¶å¹³å°çš„ <code>git</code> è´¦å·ï¼Œæ‰€ä»¥å¯¹å…¶è¿›è¡Œäº†ä¸€ä¸ªæ–‡ä»¶ç›®å½•åˆ†ç±»</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ mkdir -pv ~/.ssh/github <span class="comment"># gitee|coding|bitbucket|gitlab</span></span><br><span class="line">$ ssh-keygen -t rsa -C <span class="string">&quot;myfirst@gmail.com&quot;</span> <span class="comment"># åœ¨å›è½¦æç¤ºä¸­è¾“å…¥å®Œæ•´è·¯å¾„ï¼Œå¦‚ï¼š/path/to/user/.ssh/github/id_myfirst_rsa</span></span><br><span class="line">Generating public/private rsa key pair.</span><br><span class="line">Enter file <span class="keyword">in</span> <span class="built_in">which</span> to save the key (/path/to/user/.ssh/id_rsa):/path/to/user/.ssh/github/id_myfirst_rsa</span><br><span class="line">$ ssh-keygen -t rsa -C <span class="string">&quot;mysecond@gmail.com&quot;</span> <span class="comment"># åœ¨å›è½¦æç¤ºä¸­è¾“å…¥å®Œæ•´è·¯å¾„ï¼Œå¦‚ï¼š/path/to/user/.ssh/github/id_mysecond_rsa</span></span><br><span class="line">Generating public/private rsa key pair.</span><br><span class="line">Enter file <span class="keyword">in</span> <span class="built_in">which</span> to save the key (/path/to/user/.ssh/id_rsa):/path/to/user/.ssh/github/id_mysecond_rsa</span><br></pre></td></tr></table></figure>
<h2 id="åˆ†åˆ«é…ç½®ä¸¤ä¸ªè´¦å·çš„-SSH-and-GPG-keys"><a href="#åˆ†åˆ«é…ç½®ä¸¤ä¸ªè´¦å·çš„-SSH-and-GPG-keys" class="headerlink" title="åˆ†åˆ«é…ç½®ä¸¤ä¸ªè´¦å·çš„ SSH and GPG keys"></a>åˆ†åˆ«é…ç½®ä¸¤ä¸ªè´¦å·çš„ SSH and GPG keys</h2><p>åœ¨ <code>Settings</code> æ§åˆ¶é¢æ¿ä¸­æ‰¾åˆ° <code>SSH and GPG keys</code>ï¼Œç‚¹å‡» <code>New SSH Key</code> è¿›è¡Œæ·»åŠ ï¼Œ<code>Title</code> è¯·è‡ªè¡Œå†³å®šã€‚</p>
<p><img src="https://inotes.oss-cn-beijing.aliyuncs.com/git/201901/github-new-ssh-key.jpg" alt="github-new-ssh-key.jpg"></p>
<h2 id="å°†å¯†é’¥æ·»åŠ åˆ°-ssh-agent-çš„ä¼šè¯ä¸­"><a href="#å°†å¯†é’¥æ·»åŠ åˆ°-ssh-agent-çš„ä¼šè¯ä¸­" class="headerlink" title="å°†å¯†é’¥æ·»åŠ åˆ° ssh-agent çš„ä¼šè¯ä¸­"></a>å°†å¯†é’¥æ·»åŠ åˆ° ssh-agent çš„ä¼šè¯ä¸­</h2><blockquote>
<p>å¦‚æœæ‰§è¡Œ <code>ssh-add</code> æ—¶æ˜¾ç¤ºé”™è¯¯ <code>Could not open a connection to your authentication agent.</code> é‚£ä¹ˆæ‰§è¡Œ <code>eval ssh-agent -s</code>ã€‚</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ ssh-add -K ~/.ssh/github/id_myfirst_rsa</span><br><span class="line">Identity added: /path/to/.ssh/github/id_myfirst_rsa (/path/to/.ssh/github/id_myfirst_rsa)</span><br><span class="line">$ ssh-add -K ~/.ssh/github/id_mysecond_rsa</span><br><span class="line">Identity added: /path/to/.ssh/github/id_mysecond_rsa (/path/to/.ssh/github/id_mysecond_rsa)</span><br></pre></td></tr></table></figure>
<h2 id="æŸ¥çœ‹-ssh-key-çš„è®¾ç½®"><a href="#æŸ¥çœ‹-ssh-key-çš„è®¾ç½®" class="headerlink" title="æŸ¥çœ‹ ssh key çš„è®¾ç½®"></a>æŸ¥çœ‹ ssh key çš„è®¾ç½®</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ ssh-add -l</span><br><span class="line">2048 SHA256:ai3jRoAfkqgB2LYtJuQR8QZN1F5XXXXXXXXXXXXXXXX /path/to/.ssh/github/id_myfirst_rsa (RSA)</span><br><span class="line">2048 SHA256:AL2jRoAfkqgB2LYtJuQR8QZN1F5XXXXXXXXXXXXXXXX /path/to/.ssh/github/id_mysecond_rsa (RSA)</span><br></pre></td></tr></table></figure>
<h2 id="ä¿®æ”¹-ssh-config-æ–‡ä»¶"><a href="#ä¿®æ”¹-ssh-config-æ–‡ä»¶" class="headerlink" title="ä¿®æ”¹ ssh config æ–‡ä»¶"></a>ä¿®æ”¹ ssh config æ–‡ä»¶</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ vim ~/.ssh/config</span><br><span class="line">Host *</span><br><span class="line">    KexAlgorithms +diffie-hellman-group1-sha1</span><br><span class="line"><span class="comment"># default: myfirst</span></span><br><span class="line">Host github.com</span><br><span class="line">    HostName github.com</span><br><span class="line">    User myfirst</span><br><span class="line">    PreferredAuthentications publickey</span><br><span class="line">    IdentityFile ~/.ssh/github/id_myfirst_rsa</span><br><span class="line"><span class="comment"># mysecond</span></span><br><span class="line">Host mysecond.github.com</span><br><span class="line">    HostName github.com</span><br><span class="line">    User mysecond</span><br><span class="line">    PreferredAuthentications publickey</span><br><span class="line">    IdentityFile ~/.ssh/github/id_mysecond_rsa</span><br></pre></td></tr></table></figure>
<h2 id="æµ‹è¯•è¿é€šæ€§"><a href="#æµ‹è¯•è¿é€šæ€§" class="headerlink" title="æµ‹è¯•è¿é€šæ€§"></a>æµ‹è¯•è¿é€šæ€§</h2><blockquote>
<p><code>mysecond.github.com</code> éœ€è¦é…ç½® <code>GitHub</code> çš„ <code>Host</code>ã€‚</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// æµ‹è¯•é»˜è®¤ç”¨æˆ· myfirst çš„è¿æ¥æ€§</span><br><span class="line">$ ssh -T git@github.com</span><br><span class="line">Hi myfirst! You\<span class="string">&#x27;ve successfully authenticated, but GitHub does not provide shell access.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">// æµ‹è¯•å¦ä¸€ä¸ªç”¨æˆ· mysecond çš„è¿æ¥æ€§</span></span><br><span class="line"><span class="string">$ ssh -T git@mysecond.github.com</span></span><br><span class="line"><span class="string">Hi mysecond! You\&#x27;</span>ve successfully authenticated, but GitHub does not provide shell access.</span><br></pre></td></tr></table></figure>
<h1 id="é¡¹ç›®æµ‹è¯•"><a href="#é¡¹ç›®æµ‹è¯•" class="headerlink" title="é¡¹ç›®æµ‹è¯•"></a>é¡¹ç›®æµ‹è¯•</h1><h2 id="åˆ›å»ºä¸¤ä¸ªé¡¹ç›®ç›®å½•"><a href="#åˆ›å»ºä¸¤ä¸ªé¡¹ç›®ç›®å½•" class="headerlink" title="åˆ›å»ºä¸¤ä¸ªé¡¹ç›®ç›®å½•"></a>åˆ›å»ºä¸¤ä¸ªé¡¹ç›®ç›®å½•</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> ~/ &amp;&amp; mkdir -pv &#123;a,b&#125;</span><br></pre></td></tr></table></figure>
<h2 id="åˆå§‹åŒ–é¡¹ç›®-a"><a href="#åˆå§‹åŒ–é¡¹ç›®-a" class="headerlink" title="åˆå§‹åŒ–é¡¹ç›® a"></a>åˆå§‹åŒ–é¡¹ç›® a</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> ~/a</span><br><span class="line">$ git init</span><br><span class="line">$ <span class="built_in">echo</span> <span class="string">&quot;myfirst&quot;</span> &gt; README.md</span><br><span class="line">$ git add README.md</span><br><span class="line">$ git config user.name <span class="string">&quot;myfirst&quot;</span></span><br><span class="line">$ git config user.email <span class="string">&quot;myfirst@gmail.com&quot;</span></span><br><span class="line">$ git remote add github git@github.com:myfirst/test.git</span><br><span class="line">$ git push -u github master</span><br><span class="line">Counting objects: 3, <span class="keyword">done</span>.</span><br><span class="line">Writing objects: 100% (3/3), 213 bytes | 213.00 KiB/s, <span class="keyword">done</span>.</span><br><span class="line">Total 3 (delta 0), reused 0 (delta 0)</span><br><span class="line">To github.com:myfirst/test.git</span><br><span class="line"> * [new branch]      master -&gt; master</span><br><span class="line">Branch master <span class="built_in">set</span> up to track remote branch master from github.</span><br></pre></td></tr></table></figure>
<h2 id="åˆå§‹åŒ–é¡¹ç›®-b"><a href="#åˆå§‹åŒ–é¡¹ç›®-b" class="headerlink" title="åˆå§‹åŒ–é¡¹ç›® b"></a>åˆå§‹åŒ–é¡¹ç›® b</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> ~/b</span><br><span class="line">$ git init</span><br><span class="line">$ <span class="built_in">echo</span> <span class="string">&quot;mysecond&quot;</span> &gt; README.md</span><br><span class="line">$ git add README.md</span><br><span class="line">$ git config user.name <span class="string">&quot;mysecond&quot;</span></span><br><span class="line">$ git config user.email <span class="string">&quot;mysecond@gmail.com&quot;</span></span><br><span class="line">$ git remote add github git@mysecond.github.com:mysecond/test.git</span><br><span class="line">$ git push -u github master</span><br><span class="line">Counting objects: 3, <span class="keyword">done</span>.</span><br><span class="line">Writing objects: 100% (3/3), 218 bytes | 218.00 KiB/s, <span class="keyword">done</span>.</span><br><span class="line">Total 3 (delta 0), reused 0 (delta 0)</span><br><span class="line">To mysecond.github.com:mysecond/test.git</span><br><span class="line"> * [new branch]      master -&gt; master</span><br><span class="line">Branch master <span class="built_in">set</span> up to track remote branch master from github.</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>git</category>
      </categories>
      <tags>
        <tag>git</tag>
      </tags>
  </entry>
  <entry>
    <title>Git èµ·æ­¥</title>
    <url>/2018/01/22/git-started/</url>
    <content><![CDATA[<p>ğŸ¯ Git æ˜¯ä¸€ç§åœ¨å…¨çƒèŒƒå›´éƒ½å¹¿å—æ¬¢è¿çš„ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿã€‚åœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œä¸ºäº†è·Ÿè¸ªä»£ç ï¼Œæ–‡æ¡£ï¼Œé¡¹ç›®ç­‰ä¿¡æ¯ä¸­çš„å˜åŒ–ï¼Œç‰ˆæœ¬æ§åˆ¶å˜å¾—å‰æ‰€æœªæœ‰çš„é‡è¦ã€‚ä½†è·Ÿè¸ªå˜åŒ–è¿œè¿œä¸èƒ½æ»¡è¶³ç°ä»£è½¯ä»¶å¼€å‘è¡Œä¸šçš„ååŒéœ€æ±‚ï¼ŒåŸºäº Git çš„ Workflow æ»¡è¶³äº†åˆä½œç¼–ç¨‹çš„éœ€æ±‚ï¼Œè®©å¼€å‘ä»æ­¤å˜å¾—æ›´åŠ é«˜æ•ˆå’Œæœ‰è¶£ã€‚ç›¸æ¯”é›†ä¸­å¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿå¦‚ SVN ï¼Œåˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿ Git æ‹¥æœ‰æ›´å¼ºå¤§çš„åˆ†æ”¯ç®¡ç†ä¸åˆå¹¶èƒ½åŠ›ï¼Œæ”¯æŒç¦»çº¿å¼€å‘ï¼Œå¹¶è‰¯å¥½åœ°ä¿ç•™äº†æäº¤è¿‡ç¨‹ï¼Œè®©æ‚¨å’Œæ‚¨çš„å›¢é˜Ÿåœ¨å¼€å‘è¿‡ç¨‹ä¸­å¦‚è™æ·»ç¿¼ã€‚</p>
<span id="more"></span>
<ul>
<li><a href="https://imajinyun.xyz/2018/01/22/git-started/"><strong>Git èµ·æ­¥</strong></a></li>
<li><a href="https://imajinyun.xyz/2018/01/23/git-basic/"><code>Git åŸºæœ¬æ“ä½œ</code></a></li>
<li><a href="https://imajinyun.xyz/2018/01/24/git-log/"><code>Git æŸ¥çœ‹æ—¥å¿—</code></a></li>
<li><a href="https://imajinyun.xyz/2018/01/25/git-branch/"><code>Git åˆ†æ”¯</code></a></li>
<li><a href="https://imajinyun.xyz/2018/01/27/git-multiple-accounts/"><code>Git ä¸­ä¸€ä¸ªå®¢æˆ·ç«¯è®¾ç½®å¤šä¸ªè´¦å·</code></a></li>
<li><a href="https://imajinyun.xyz/2018/05/01/git-workflow/"><code>Git Workflow</code></a></li>
<li><a href="https://imajinyun.xyz/2020/09/07/git-collection-command/"><code>Git å‘½ä»¤å¤§å…¨</code></a></li>
</ul>
<h1 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h1><h2 id="è®¾è®¡åˆè¡·"><a href="#è®¾è®¡åˆè¡·" class="headerlink" title="è®¾è®¡åˆè¡·"></a>è®¾è®¡åˆè¡·</h2><ul>
<li>ä¸ºé€Ÿåº¦è€Œç”Ÿ</li>
<li>ç®€å•çš„è®¾è®¡</li>
<li>å¯¹éçº¿æ€§å¼€å‘æ¨¡å¼çš„å¼ºåŠ›æ”¯æŒï¼ˆå…è®¸ä¸Šåƒä¸ªå¹¶è¡Œå¼€å‘çš„åˆ†æ”¯ï¼‰</li>
<li>å®Œå…¨åˆ†å¸ƒå¼</li>
<li>æœ‰èƒ½åŠ›é«˜æ•ˆç®¡ç†ç±»ä¼¼ <code>Linux</code> å†…æ ¸ä¸€æ ·çš„è¶…å¤§è§„æ¨¡çš„é¡¹ç›®ï¼ˆé€Ÿåº¦å’Œæ•°é‡ï¼‰</li>
</ul>
<h2 id="ä¸€äº›ç‰¹æ€§"><a href="#ä¸€äº›ç‰¹æ€§" class="headerlink" title="ä¸€äº›ç‰¹æ€§"></a>ä¸€äº›ç‰¹æ€§</h2><ul>
<li>ä¼˜è¶Šçš„å­˜å‚¨èƒ½åŠ›</li>
<li>ç›´æ¥è®°å½•å¿«ç…§ï¼Œè€Œéå·®å¼‚æ¯”è¾ƒ</li>
<li>ç¦»çº¿æ“ä½œï¼Œå‡ ä¹æ‰€æœ‰æ“ä½œéƒ½æ˜¯æœ¬åœ°æ‰§è¡Œ</li>
<li>æ—¶åˆ»ä¿æŒæ•°æ®å®Œæ•´æ€§</li>
<li>å¤šæ•°æ“ä½œä»…æ·»åŠ æ•°æ®</li>
<li>å¼€æº</li>
</ul>
<p><code>git</code> ä¸­æ–‡ä»¶çš„ä¸‰ç§çŠ¶æ€ï¼šå·¥ä½œç›®å½•ï¼Œæš‚å­˜åŒºåŸŸå’Œæœ¬åœ°ä»“åº“ï¼š</p>
<p><img src="https://inotes.oss-cn-beijing.aliyuncs.com/git/201812/git-three-status.png" alt="git-three-status.png"></p>
<h2 id="å·¥ä½œæµç¨‹"><a href="#å·¥ä½œæµç¨‹" class="headerlink" title="å·¥ä½œæµç¨‹"></a>å·¥ä½œæµç¨‹</h2><ul>
<li>åœ¨å·¥ä½œç›®å½•ä¸­ä¿®æ”¹æŸäº›æ–‡ä»¶</li>
<li>å¯¹ä¿®æ”¹åçš„æ–‡ä»¶è¿›è¡Œå¿«ç…§ï¼Œç„¶åä¿å­˜åˆ°æš‚å­˜åŒºåŸŸ</li>
<li>æäº¤æ›´æ–°ï¼Œå°†ä¿å­˜åœ¨æš‚å­˜åŒºåŸŸçš„æ–‡ä»¶å¿«ç…§æ°¸ä¹…è½¬å‚¨åˆ° <code>git</code> ç›®å½•ä¸­</li>
</ul>
<h1 id="å…³äºç‰ˆæœ¬æ§åˆ¶"><a href="#å…³äºç‰ˆæœ¬æ§åˆ¶" class="headerlink" title="å…³äºç‰ˆæœ¬æ§åˆ¶"></a>å…³äºç‰ˆæœ¬æ§åˆ¶</h1><h2 id="é›†ä¸­åŒ–çš„ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿ"><a href="#é›†ä¸­åŒ–çš„ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿ" class="headerlink" title="é›†ä¸­åŒ–çš„ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿ"></a>é›†ä¸­åŒ–çš„ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿ</h2><p><code>CVCS - Centralized Version Control Systems</code></p>
<p><img src="https://inotes.oss-cn-beijing.aliyuncs.com/git/201812/centralized-vcs.png" alt="centralized-vcs.png"></p>
<h2 id="åˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿ"><a href="#åˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿ" class="headerlink" title="åˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿ"></a>åˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿ</h2><p><code>DVCS - Distributed Version Control System</code></p>
<p><img src="https://inotes.oss-cn-beijing.aliyuncs.com/git/201812/distributed-vcs.png" alt="distributed-vcs.png"></p>
<h1 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h1><h2 id="Linux-å®‰è£…"><a href="#Linux-å®‰è£…" class="headerlink" title="Linux å®‰è£…"></a>Linux å®‰è£…</h2><h3 id="å®‰è£…ä¾èµ–"><a href="#å®‰è£…ä¾èµ–" class="headerlink" title="å®‰è£…ä¾èµ–"></a>å®‰è£…ä¾èµ–</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// CentOS</span><br><span class="line">$ sudo yum install curl-devel expat-devel gettext-devel openssl-devel zlib-devel</span><br><span class="line"></span><br><span class="line">// Ubuntu</span><br><span class="line">$ sudo apt-get install libcurl4-gnutls-dev libexpat1-dev gettext libz-dev libssl-dev</span><br></pre></td></tr></table></figure>
<h3 id="æ‰‹åŠ¨ç¼–è¯‘å®‰è£…"><a href="#æ‰‹åŠ¨ç¼–è¯‘å®‰è£…" class="headerlink" title="æ‰‹åŠ¨ç¼–è¯‘å®‰è£…"></a>æ‰‹åŠ¨ç¼–è¯‘å®‰è£…</h3><blockquote>
<p><a href="https://github.com/git/git/releases">å»è¿™é‡Œä¸‹è½½ <code>git</code></a></p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// è§£å‹åè¿›è¡Œç¼–è¯‘å®‰è£…</span><br><span class="line">$ tar -zxf v2.16.1.tar.gz</span><br><span class="line">$ <span class="built_in">cd</span> v2.16.1</span><br><span class="line">$ make prefix=/usr/<span class="built_in">local</span> all</span><br><span class="line">$ sudo make prefix=/usr/<span class="built_in">local</span> install</span><br></pre></td></tr></table></figure>
<h3 id="åŒ…ç®¡ç†å™¨å®‰è£…"><a href="#åŒ…ç®¡ç†å™¨å®‰è£…" class="headerlink" title="åŒ…ç®¡ç†å™¨å®‰è£…"></a>åŒ…ç®¡ç†å™¨å®‰è£…</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// CentOS</span><br><span class="line">$ yum install git-core</span><br><span class="line"></span><br><span class="line">// Ubuntu</span><br><span class="line">$ apt-get install git</span><br></pre></td></tr></table></figure>
<h2 id="Mac-å®‰è£…"><a href="#Mac-å®‰è£…" class="headerlink" title="Mac å®‰è£…"></a>Mac å®‰è£…</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// ä½¿ç”¨ brew å®‰è£… git</span><br><span class="line">$ brew install git</span><br></pre></td></tr></table></figure>
<h2 id="Windows-å®‰è£…"><a href="#Windows-å®‰è£…" class="headerlink" title="Windows å®‰è£…"></a>Windows å®‰è£…</h2><blockquote>
<p><a href="http://gitforwindows.org/"><code>We bring the awesome Git SCM to Windows</code></a></p>
</blockquote>
<h1 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h1><h2 id="ä¸‰ç§é…ç½®"><a href="#ä¸‰ç§é…ç½®" class="headerlink" title="ä¸‰ç§é…ç½®"></a>ä¸‰ç§é…ç½®</h2><ul>
<li>å…¨å±€é…ç½®ï¼šå½“å‰ç”¨æˆ·çš„æ‰€æœ‰ä»“åº“æœ‰æ•ˆï¼Œå­˜å‚¨é…ç½®çš„æ–‡ä»¶ä¸º <code>~/.gitconfig</code></li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// æŸ¥çœ‹å…¨å±€é…ç½®</span><br><span class="line">$ git config --global -l</span><br><span class="line">æˆ–</span><br><span class="line">$ git config --list --global</span><br></pre></td></tr></table></figure>
<ul>
<li>å±€éƒ¨é…ç½®ï¼šå½“å‰ç”¨æˆ·çš„æŸä¸ªä»“åº“æœ‰æ•ˆï¼Œå­˜å‚¨é…ç½®çš„æ–‡ä»¶ä¸º <code>.git/config</code></li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// æŸ¥çœ‹å±€éƒ¨é…ç½®</span><br><span class="line">$ git config --<span class="built_in">local</span> -l</span><br><span class="line">æˆ–</span><br><span class="line">$ git config --list --<span class="built_in">local</span></span><br></pre></td></tr></table></figure>
<ul>
<li>ç³»ç»Ÿé…ç½®ï¼šç³»ç»Ÿæ‰€æœ‰ç”¨æˆ·æœ‰æ•ˆï¼Œå­˜å‚¨é…ç½®çš„æ–‡ä»¶ä¸º <code>/etc/gitconfig</code></li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// æŸ¥çœ‹ç³»ç»Ÿé…ç½®</span><br><span class="line">$ git config --system -l</span><br><span class="line">æˆ–</span><br><span class="line">$ git config --list --system</span><br></pre></td></tr></table></figure>
<h2 id="ç”¨æˆ·ä¿¡æ¯"><a href="#ç”¨æˆ·ä¿¡æ¯" class="headerlink" title="ç”¨æˆ·ä¿¡æ¯"></a>ç”¨æˆ·ä¿¡æ¯</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// é…ç½®å…¨å±€çš„ç”¨æˆ·åç§°</span><br><span class="line">$ git config --global user.name <span class="string">&quot;Your Name&quot;</span></span><br><span class="line"></span><br><span class="line">// é…ç½®å…¨å±€çš„é‚®ç®±åœ°å€</span><br><span class="line">$ git config --global user.email <span class="string">&quot;Your Email&quot;</span></span><br><span class="line"></span><br><span class="line">// å–æ¶ˆå…¨å±€é…ç½®çš„ç”¨æˆ·åç§°</span><br><span class="line">$ git config --global --<span class="built_in">unset</span> user.name</span><br><span class="line"></span><br><span class="line">// å–æ¶ˆå…¨å±€é…ç½®çš„é‚®ç®±åœ°å€</span><br><span class="line">$ git config --global --<span class="built_in">unset</span> user.email</span><br><span class="line"></span><br><span class="line">// é…ç½®æŸä¸ªä»“åº“çš„ç”¨æˆ·åç§°</span><br><span class="line">$ git config --<span class="built_in">local</span> user.name <span class="string">&quot;Your Name&quot;</span></span><br><span class="line"></span><br><span class="line">// é…ç½®æŸä¸ªä»“åº“çš„é‚®ç®±åœ°å€</span><br><span class="line">$ git config --<span class="built_in">local</span> user.email <span class="string">&quot;Your Email&quot;</span></span><br></pre></td></tr></table></figure>
<h2 id="æ–‡æœ¬ç¼–è¾‘å™¨"><a href="#æ–‡æœ¬ç¼–è¾‘å™¨" class="headerlink" title="æ–‡æœ¬ç¼–è¾‘å™¨"></a>æ–‡æœ¬ç¼–è¾‘å™¨</h2><blockquote>
<p><a href="https://github.com/VundleVim/Vundle.vim/issues/167"><code>Git Commit Problem: &quot;error: There was a problem with the editor &#39;vi&#39;&quot;</code></a></p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// é…ç½® vim ä¸º git é»˜è®¤çš„ç¼–è¾‘å™¨ï¼Œä¸ºæ»¡è¶³åœ¨ git ä¸­è¾“å…¥ä¸€äº›é¢å¤–æ¶ˆæ¯çš„æ—¶å€™ï¼Œè‡ªåŠ¨è°ƒç”¨ä¸€ä¸ªå¤–éƒ¨æ–‡æœ¬ç¼–è¾‘å™¨çš„éœ€è¦</span><br><span class="line">$ git config --global core.editor $(<span class="built_in">which</span> vim)</span><br></pre></td></tr></table></figure>
<h2 id="å·®å¼‚åˆ†æå·¥å…·"><a href="#å·®å¼‚åˆ†æå·¥å…·" class="headerlink" title="å·®å¼‚åˆ†æå·¥å…·"></a>å·®å¼‚åˆ†æå·¥å…·</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// é…ç½®è§£å†³åˆå¹¶å†²çªæ—¶ä½¿ç”¨å“ªç§å·®å¼‚åˆ†æå·¥å…·</span><br><span class="line">$ git config --global merge.tool vimdiff</span><br></pre></td></tr></table></figure>
<h2 id="æ¢è¡Œç¬¦é…ç½®"><a href="#æ¢è¡Œç¬¦é…ç½®" class="headerlink" title="æ¢è¡Œç¬¦é…ç½®"></a>æ¢è¡Œç¬¦é…ç½®</h2><blockquote>
<p>æ“ä½œç³»ç»Ÿå¯¹å›è½¦ <code>CR</code> å’Œæ¢è¡Œ <code>LF</code> å®šä¹‰æ˜¯æœ‰å·®å¼‚çš„ã€‚</p>
</blockquote>
<h3 id="AutoCRLF"><a href="#AutoCRLF" class="headerlink" title="AutoCRLF"></a>AutoCRLF</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// æäº¤æ—¶è½¬æ¢ä¸º LFï¼Œæ£€å‡ºæ—¶è½¬æ¢ä¸º CRLF</span><br><span class="line">$ git config --global core.autocrlf <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">// æäº¤æ—¶è½¬æ¢ä¸º LFï¼Œæ£€å‡ºæ—¶ä¸è½¬æ¢</span><br><span class="line">$ git config --global core.autocrlf input</span><br><span class="line"></span><br><span class="line">// æäº¤æ£€å‡ºå‡ä¸è½¬æ¢</span><br><span class="line">$ git config --global core.autocrlf <span class="literal">false</span></span><br></pre></td></tr></table></figure>
<h3 id="SafeCRLF"><a href="#SafeCRLF" class="headerlink" title="SafeCRLF"></a>SafeCRLF</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// æ‹’ç»æäº¤åŒ…å«æ··åˆæ¢è¡Œç¬¦çš„æ–‡ä»¶</span><br><span class="line">$ git config --global core.safecrlf <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">// å…è®¸æäº¤åŒ…å«æ··åˆæ¢è¡Œç¬¦çš„æ–‡ä»¶</span><br><span class="line">$ git config --global core.safecrlf <span class="literal">false</span></span><br><span class="line"></span><br><span class="line">// æäº¤åŒ…å«æ··åˆæ¢è¡Œç¬¦çš„æ–‡ä»¶æ—¶ç»™å‡ºè­¦å‘Š</span><br><span class="line">$ git config --global core.safecrlf warn</span><br></pre></td></tr></table></figure>
<h2 id="ä¿®æ­£ç©ºç™½ç¬¦"><a href="#ä¿®æ­£ç©ºç™½ç¬¦" class="headerlink" title="ä¿®æ­£ç©ºç™½ç¬¦"></a>ä¿®æ­£ç©ºç™½ç¬¦</h2><p><code>git</code> é¢„å…ˆè®¾ç½®äº†ä¸€äº›é€‰é¡¹æ¥æ¢æµ‹å’Œä¿®æ­£ç©ºç™½é—®é¢˜</p>
<blockquote>
<ul>
<li>é»˜è®¤æ‰“å¼€çš„ <code>2</code> ä¸ªé€‰é¡¹æ˜¯ <code>trailing-space</code> å’Œ <code>space-before-tab</code>ï¼Œ<code>trailing-space</code> ä¼šæŸ¥æ‰¾æ¯è¡Œç»“å°¾çš„ç©ºæ ¼ï¼Œ<code>space-before-tab</code> ä¼šæŸ¥æ‰¾æ¯è¡Œå¼€å¤´çš„åˆ¶è¡¨ç¬¦å‰çš„ç©ºæ ¼</li>
<li>é»˜è®¤å…³é—­çš„ <code>2</code> ä¸ªé€‰é¡¹æ˜¯ <code>indent-with-non-tab</code> å’Œ <code>cr-at-eol</code>ï¼Œ<code>indent-with-non-tab</code> ä¼šæŸ¥æ‰¾ <code>8</code> ä¸ªä»¥ä¸Šç©ºæ ¼ï¼ˆéåˆ¶è¡¨ç¬¦ï¼‰å¼€å¤´çš„è¡Œï¼Œ<code>cr-at-eol</code> è®© <code>git</code> çŸ¥é“è¡Œå°¾å›è½¦ç¬¦æ˜¯åˆæ³•çš„</li>
</ul>
</blockquote>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// å…¨å±€é…ç½®ä¿®æ­£ç©ºç™½ç¬¦</span><br><span class="line">$ git config --global core.whitespace trailing-space,space-before-tab</span><br></pre></td></tr></table></figure>
<h2 id="é…ç½®å¿«æ·æ“ä½œ"><a href="#é…ç½®å¿«æ·æ“ä½œ" class="headerlink" title="é…ç½®å¿«æ·æ“ä½œ"></a>é…ç½®å¿«æ·æ“ä½œ</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// ä¸º git å‘½ä»¤åˆ›å»ºä¸€ä¸ªå¿«æ·æ–¹å¼</span><br><span class="line">$ git config --global <span class="built_in">alias</span>.&lt;alias-name&gt; &lt;git-command&gt;</span><br><span class="line"></span><br><span class="line">// æ£€å‡ºå¿«æ·æ–¹å¼è®¾ç½®</span><br><span class="line">$ git config --global alias.co checkout</span><br><span class="line"></span><br><span class="line">// æäº¤å¿«æ·æ–¹å¼è®¾ç½®</span><br><span class="line">$ git config --global alias.ci commit</span><br><span class="line"></span><br><span class="line">// çŠ¶æ€å¿«æ·æ–¹å¼è®¾ç½®</span><br><span class="line">$ git config --global alias.st status</span><br><span class="line"></span><br><span class="line">// åˆ†æ”¯å¿«æ·æ–¹å¼è®¾ç½®</span><br><span class="line">$ git config --global alias.br branch</span><br></pre></td></tr></table></figure>
<h2 id="é…ç½®åœ¨-Windows-ä¸‹-ASCII-å­—ç¬¦çš„æ–‡ä»¶åæ­£ç¡®æ˜¾ç¤º"><a href="#é…ç½®åœ¨-Windows-ä¸‹-ASCII-å­—ç¬¦çš„æ–‡ä»¶åæ­£ç¡®æ˜¾ç¤º" class="headerlink" title="é…ç½®åœ¨ Windows ä¸‹ ASCII å­—ç¬¦çš„æ–‡ä»¶åæ­£ç¡®æ˜¾ç¤º"></a>é…ç½®åœ¨ Windows ä¸‹ ASCII å­—ç¬¦çš„æ–‡ä»¶åæ­£ç¡®æ˜¾ç¤º</h2><p><a href="https://blog.zengrong.net/post/1249.html">git ä¹±ç è§£å†³æ–¹æ¡ˆæ±‡æ€»</a></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// ä¸€ä¸ªæ˜¾ç¤ºä¹±ç çš„å®ä¾‹</span><br><span class="line">$ git status</span><br><span class="line">On branch master</span><br><span class="line">Your branch is up to date with <span class="string">&#x27;gitee/master&#x27;</span>.</span><br><span class="line"></span><br><span class="line">Changes not staged <span class="keyword">for</span> commit:</span><br><span class="line">  (use <span class="string">&quot;git add/rm &lt;file&gt;...&quot;</span> to update what will be committed)</span><br><span class="line">  (use <span class="string">&quot;git checkout -- &lt;file&gt;...&quot;</span> to discard changes <span class="keyword">in</span> working directory)</span><br><span class="line">  (commit or discard the untracked or modified content <span class="keyword">in</span> submodules)</span><br><span class="line"></span><br><span class="line">   deleted:    <span class="string">&quot;xxx-\345\210\235\350\257\206.xx&quot;</span> // ä¸­æ–‡æ–‡ä»¶åæ˜¾ç¤ºä¸æ­£å¸¸</span><br><span class="line"></span><br><span class="line">Untracked files:</span><br><span class="line">  (use <span class="string">&quot;git add &lt;file&gt;...&quot;</span> to include <span class="keyword">in</span> what will be committed)</span><br><span class="line"></span><br><span class="line">// å…¨å±€é…ç½®ä»¥è§£å†³ Windows Git Bashã€Linux ä¸‹çš„ä¸­æ–‡è½¬ç é—®é¢˜</span><br><span class="line">$ git config --global core.quotepath <span class="literal">false</span></span><br></pre></td></tr></table></figure>
<h2 id="é…ç½®å¯¹å¤§å°å†™æ•æ„Ÿ"><a href="#é…ç½®å¯¹å¤§å°å†™æ•æ„Ÿ" class="headerlink" title="é…ç½®å¯¹å¤§å°å†™æ•æ„Ÿ"></a>é…ç½®å¯¹å¤§å°å†™æ•æ„Ÿ</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// å…¨å±€é…ç½®å¯¹å¤§å°å†™æ•æ„Ÿï¼Œä¿æŒ Mac/Win/Linux ä¸€è‡´æ€§</span><br><span class="line">$ git config --global core.ignorecase <span class="literal">false</span></span><br></pre></td></tr></table></figure>
<h2 id="é…ç½®èœè‰²æ˜¾ç¤º"><a href="#é…ç½®èœè‰²æ˜¾ç¤º" class="headerlink" title="é…ç½®èœè‰²æ˜¾ç¤º"></a>é…ç½®èœè‰²æ˜¾ç¤º</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// å…¨å±€é…ç½®èœè‰²æ˜¾ç¤º</span><br><span class="line">$ git config --global color.ui auto</span><br></pre></td></tr></table></figure>
<h2 id="ä»¥-https-æ–¹å¼è¿›è¡Œè¿æ¥æ—¶ï¼Œè®°ä½å¯†ç "><a href="#ä»¥-https-æ–¹å¼è¿›è¡Œè¿æ¥æ—¶ï¼Œè®°ä½å¯†ç " class="headerlink" title="ä»¥ https æ–¹å¼è¿›è¡Œè¿æ¥æ—¶ï¼Œè®°ä½å¯†ç "></a>ä»¥ https æ–¹å¼è¿›è¡Œè¿æ¥æ—¶ï¼Œè®°ä½å¯†ç </h2><blockquote>
<p>ä¸ºå½“å‰ä»“åº“è®¾ç½®è®°ä½å¯†ç ï¼Œè®¾ç½®åï¼Œåªè¦åœ¨æ¨é€ä¸€æ¬¡ï¼Œä»¥åå°±ä¸éœ€è¦ç”¨æˆ·åå’Œå¯†ç äº†</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// è®¾ç½®ä¿å­˜å¯†ç åˆ°ç¡¬ç›˜ï¼Œå¦‚æœæ˜¯ macOSï¼Œé€‰é¡¹å¯ä»¥æ”¹ä¸º osxkeychain</span><br><span class="line">$ git config credential.helper store</span><br><span class="line"></span><br><span class="line">// è®¾ç½®ä¿å­˜å¯†ç çš„è¶…æ—¶æ—¶é—´</span><br><span class="line">$ git config credential.helper <span class="string">&#x27;cache --timeout=36000&#x27;</span></span><br><span class="line"></span><br><span class="line">// æŸ¥çœ‹å¯†ç æ–‡ä»¶ï¼ˆä»¥æ˜æ–‡çš„æ–¹å¼ä¿å­˜çš„ï¼‰</span><br><span class="line">$ cat ~/.git-credentials</span><br></pre></td></tr></table></figure>
<h2 id="æŸ¥çœ‹é…ç½®ä¿¡æ¯"><a href="#æŸ¥çœ‹é…ç½®ä¿¡æ¯" class="headerlink" title="æŸ¥çœ‹é…ç½®ä¿¡æ¯"></a>æŸ¥çœ‹é…ç½®ä¿¡æ¯</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ git config --list</span><br><span class="line">æˆ–</span><br><span class="line">$ git config -l</span><br></pre></td></tr></table></figure>
<h2 id="è§£å†³ç›®å½•å¡é¡¿é—®é¢˜"><a href="#è§£å†³ç›®å½•å¡é¡¿é—®é¢˜" class="headerlink" title="è§£å†³ç›®å½•å¡é¡¿é—®é¢˜"></a>è§£å†³ç›®å½•å¡é¡¿é—®é¢˜</h2><p>ä¸»è¦è§£å†³åœ¨ <code>zsh</code> ä¸‹ï¼Œåœ¨ <code>git</code> ç‰ˆæœ¬æ§åˆ¶çš„ç›®å½•è¾“å…¥å‘½ä»¤æ‰§è¡Œç¼“æ…¢çš„é—®é¢˜ã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// ä¸è¯»å–æ–‡ä»¶å˜åŒ–ä¿¡æ¯ï¼ˆé’ˆå¯¹å½“å‰ç”¨æˆ·å½“å‰é¡¹ç›®ï¼‰</span><br><span class="line">$ git config --add oh-my-zsh.hide-dirty 1</span><br></pre></td></tr></table></figure>
<p><img src="https://inotes.oss-cn-beijing.aliyuncs.com/git/201812/git-zsh-dirty.png" alt="git-zsh-dirty.png"></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// ä¸è¯»å–ä»»ä½• git ä¿¡æ¯ï¼ˆé’ˆå¯¹å½“å‰ç”¨æˆ·æ‰€æœ‰é¡¹ç›®ï¼‰</span><br><span class="line">$ git config --global --add oh-my-zsh.hide-status 1</span><br></pre></td></tr></table></figure>
<p><img src="https://inotes.oss-cn-beijing.aliyuncs.com/git/201812/git-zsh-status.png" alt="git-zsh-status.png"></p>
<h2 id="å¸®åŠ©å‘½ä»¤"><a href="#å¸®åŠ©å‘½ä»¤" class="headerlink" title="å¸®åŠ©å‘½ä»¤"></a>å¸®åŠ©å‘½ä»¤</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ git <span class="built_in">help</span> &lt;verb&gt;</span><br><span class="line">æˆ–</span><br><span class="line">$ git &lt;verb&gt; --<span class="built_in">help</span></span><br><span class="line">æˆ–</span><br><span class="line">$ man git</span><br><span class="line"></span><br><span class="line">// æŸ¥çœ‹å¸®åŠ©å‘½ä»¤</span><br><span class="line">$ git --<span class="built_in">help</span></span><br><span class="line">usage: git [--version] [--<span class="built_in">help</span>] [-C &lt;path&gt;] [-c &lt;name&gt;=&lt;value&gt;]</span><br><span class="line">           [--exec-path[=&lt;path&gt;]] [--html-path] [--man-path] [--info-path]</span><br><span class="line">           [-p | --paginate | --no-pager] [--no-replace-objects] [--bare]</span><br><span class="line">           [--git-dir=&lt;path&gt;] [--work-tree=&lt;path&gt;] [--namespace=&lt;name&gt;]</span><br><span class="line">           &lt;<span class="built_in">command</span>&gt; [&lt;args&gt;]</span><br><span class="line"></span><br><span class="line">These are common Git commands used <span class="keyword">in</span> various situations:</span><br><span class="line"></span><br><span class="line">start a working area (see also: git <span class="built_in">help</span> tutorial)</span><br><span class="line">   <span class="built_in">clone</span>      Clone a repository into a new directory</span><br><span class="line">   init       Create an empty Git repository or reinitialize an existing one</span><br><span class="line"></span><br><span class="line">work on the current change (see also: git <span class="built_in">help</span> everyday)</span><br><span class="line">   add        Add file contents to the index</span><br><span class="line">   mv         Move or rename a file, a directory, or a symlink</span><br><span class="line">   reset      Reset current HEAD to the specified state</span><br><span class="line">   rm         Remove files from the working tree and from the index</span><br><span class="line"></span><br><span class="line">examine the <span class="built_in">history</span> and state (see also: git <span class="built_in">help</span> revisions)</span><br><span class="line">   bisect     Use binary search to find the commit that introduced a bug</span><br><span class="line">   grep       Print lines matching a pattern</span><br><span class="line">   <span class="built_in">log</span>        Show commit logs</span><br><span class="line">   show       Show various types of objects</span><br><span class="line">   status     Show the working tree status</span><br><span class="line"></span><br><span class="line">grow, mark and tweak your common <span class="built_in">history</span></span><br><span class="line">   branch     List, create, or delete branches</span><br><span class="line">   checkout   Switch branches or restore working tree files</span><br><span class="line">   commit     Record changes to the repository</span><br><span class="line">   diff       Show changes between commits, commit and working tree, etc</span><br><span class="line">   merge      Join two or more development histories together</span><br><span class="line">   rebase     Reapply commits on top of another base tip</span><br><span class="line">   tag        Create, list, delete or verify a tag object signed with GPG</span><br><span class="line"></span><br><span class="line">collaborate (see also: git <span class="built_in">help</span> workflows)</span><br><span class="line">   fetch      Download objects and refs from another repository</span><br><span class="line">   pull       Fetch from and integrate with another repository or a <span class="built_in">local</span> branch</span><br><span class="line">   push       Update remote refs along with associated objects</span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;git help -a&#x27;</span> and <span class="string">&#x27;git help -g&#x27;</span> list available subcommands and some</span><br><span class="line">concept guides. See <span class="string">&#x27;git help &lt;command&gt;&#x27;</span> or <span class="string">&#x27;git help &lt;concept&gt;&#x27;</span></span><br><span class="line">to <span class="built_in">read</span> about a specific subcommand or concept.</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>git</category>
      </categories>
      <tags>
        <tag>git</tag>
      </tags>
  </entry>
  <entry>
    <title>Git Workflow</title>
    <url>/2018/05/01/git-workflow/</url>
    <content><![CDATA[<p>ğŸ¢ å·¥ä½œæµ - <code>Workflow</code>ï¼šæ˜¯å¯¹å·¥ä½œæµç¨‹åŠå…¶å„æ“ä½œæ­¥éª¤ä¹‹é—´ä¸šåŠ¡è§„åˆ™çš„æŠ½è±¡ã€æ¦‚æ‹¬æè¿°ã€‚å·¥ä½œæµå»ºæ¨¡ï¼Œå³å°†å·¥ä½œæµç¨‹ä¸­çš„å·¥ä½œå¦‚ä½•å‰åç»„ç»‡åœ¨ä¸€èµ·çš„é€»è¾‘å’Œè§„åˆ™ï¼Œåœ¨è®¡ç®—æœºä¸­ä»¥æ°å½“çš„æ¨¡å‹è¡¨è¾¾å¹¶å¯¹å…¶å®æ–½è®¡ç®—ã€‚å·¥ä½œæµè¦è§£å†³çš„ä¸»è¦é—®é¢˜æ˜¯ï¼šä¸ºå®ç°æŸä¸ªä¸šåŠ¡ç›®æ ‡ï¼Œåˆ©ç”¨è®¡ç®—æœºåœ¨å¤šä¸ªå‚ä¸è€…ä¹‹é—´æŒ‰æŸç§é¢„å®šè§„åˆ™è‡ªåŠ¨ä¼ é€’æ–‡æ¡£ã€ä¿¡æ¯æˆ–è€…ä»»åŠ¡ã€‚</p>
<span id="more"></span>
<ul>
<li><a href="https://imajinyun.xyz/2018/01/22/git-started/"><code>Git èµ·æ­¥</code></a></li>
<li><a href="https://imajinyun.xyz/2018/01/23/git-basic/"><code>Git åŸºæœ¬æ“ä½œ</code></a></li>
<li><a href="https://imajinyun.xyz/2018/01/24/git-log/"><code>Git æŸ¥çœ‹æ—¥å¿—</code></a></li>
<li><a href="https://imajinyun.xyz/2018/01/25/git-branch/"><code>Git åˆ†æ”¯</code></a></li>
<li><a href="https://imajinyun.xyz/2018/01/27/git-multiple-accounts/"><code>Git ä¸­ä¸€ä¸ªå®¢æˆ·ç«¯è®¾ç½®å¤šä¸ªè´¦å·</code></a></li>
<li><a href="https://imajinyun.xyz/2018/05/01/git-workflow/"><strong>Git Workflow</strong></a></li>
<li><a href="https://imajinyun.xyz/2020/09/07/git-collection-command/"><code>Git å‘½ä»¤å¤§å…¨</code></a></li>
</ul>
<h1 id="Git-Workflow"><a href="#Git-Workflow" class="headerlink" title="Git Workflow"></a>Git Workflow</h1><p>ä¸ºäº†è®©å¤§å®¶æœ‰æ•ˆåœ°åˆä½œï¼Œä½¿å¾—é¡¹ç›®äº•äº•æœ‰æ¡åœ°å‘å±•ä¸‹å»è€ŒæŠ½è±¡å‡ºæ¥çš„ä¸€ç³»åˆ— <code>git</code> æ“ä½œæ­¥éª¤åŠæµç¨‹ï¼Œæ²¡é”™ï¼Œæ˜¯é’ˆå¯¹ <code>git</code> çš„æ“ä½œä½¿ç”¨æµç¨‹ã€‚</p>
<h1 id="å¸¸è§çš„å·¥ä½œæµ"><a href="#å¸¸è§çš„å·¥ä½œæµ" class="headerlink" title="å¸¸è§çš„å·¥ä½œæµ"></a>å¸¸è§çš„å·¥ä½œæµ</h1><h2 id="é›†ä¸­å¼å·¥ä½œæµ"><a href="#é›†ä¸­å¼å·¥ä½œæµ" class="headerlink" title="é›†ä¸­å¼å·¥ä½œæµ"></a>é›†ä¸­å¼å·¥ä½œæµ</h2><blockquote>
<p><a href="https://www.atlassian.com/git/tutorials/comparing-workflows#centralized-workflow">é›†ä¸­å¼å·¥ä½œæµ - <code>Centralized Workflow</code></a></p>
</blockquote>
<p><img src="https://inotes.oss-cn-beijing.aliyuncs.com/git/201812/1006-centralized-workflow.svg" alt="1006-centralized-workflow.svg"></p>
<h3 id="åˆ›å»ºä¸­å¤®ä»“åº“"><a href="#åˆ›å»ºä¸­å¤®ä»“åº“" class="headerlink" title="åˆ›å»ºä¸­å¤®ä»“åº“"></a>åˆ›å»ºä¸­å¤®ä»“åº“</h3><p>å‡å®š <code>git</code> åˆ›å»ºäº†ä¸€ä¸ªè£¸ä»“åº“ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ ssh git@host</span><br><span class="line">$ <span class="built_in">cd</span> ~ &amp;&amp; mkdir -pv repository</span><br><span class="line"></span><br><span class="line">// åˆ›å»ºä¸€ä¸ªè£¸ä»“åº“ï¼ŒæŒ‰ç…§çº¦å®šï¼ŒåŠ ä¸Š .git æ‰©å±•å</span><br><span class="line">$ git init --bare /home/git/repository/repo.git</span><br></pre></td></tr></table></figure>
<h3 id="å¼€å‘äººå‘˜ä»‹å…¥"><a href="#å¼€å‘äººå‘˜ä»‹å…¥" class="headerlink" title="å¼€å‘äººå‘˜ä»‹å…¥"></a>å¼€å‘äººå‘˜ä»‹å…¥</h3><h4 id="ç¬¬ä¸€é˜¶æ®µï¼šæœ¬åœ°è‡ªå—¨"><a href="#ç¬¬ä¸€é˜¶æ®µï¼šæœ¬åœ°è‡ªå—¨" class="headerlink" title="ç¬¬ä¸€é˜¶æ®µï¼šæœ¬åœ°è‡ªå—¨"></a>ç¬¬ä¸€é˜¶æ®µï¼šæœ¬åœ°è‡ªå—¨</h4><div class="note info">
            <p>è¿™ä¸€é˜¶æ®µï¼Œ<code>qwert</code> å¯ä»¥æŒ‰è‡ªå·±éœ€æ±‚åå¤æ“ä½œå¤šæ¬¡ï¼Œè€Œä¸ç”¨æ‹…å¿ƒä¸­å¤®ä»“åº“ä¸Šæœ‰äº†ä»€ä¹ˆæ“ä½œï¼ŒåŒæ ·çš„æƒ…å†µä¹Ÿé€‚ç”¨äº <code>poiuy</code></p>
          </div>
<p>å¼€å‘è€… <code>qwert</code></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// æ‹‰å–ä»£ç </span><br><span class="line">$ <span class="built_in">cd</span> ~ &amp;&amp; git <span class="built_in">clone</span> ssh://git@host/home/git/repository/repo.git</span><br><span class="line"></span><br><span class="line">// æŸ¥çœ‹çŠ¶æ€</span><br><span class="line">$ git status</span><br><span class="line"></span><br><span class="line">// åˆ›å»º README.md æ–‡ä»¶</span><br><span class="line">$ touch README.md</span><br><span class="line"></span><br><span class="line">// å°† README.md æ–‡ä»¶åŠ å…¥æš‚å­˜åŒº</span><br><span class="line">$ git add README.md</span><br><span class="line"></span><br><span class="line">// è®¾ç½®ç”¨æˆ·åå’Œé‚®ç®±</span><br><span class="line">$ git config user.email <span class="string">&quot;qwert@example.com&quot;</span></span><br><span class="line">$ git config user.name <span class="string">&quot;qwert&quot;</span></span><br><span class="line"></span><br><span class="line">// æäº¤ä»£ç åˆ°æœ¬åœ°ä»“åº“</span><br><span class="line">$ git commit -m <span class="string">&quot;Add README.md&quot;</span></span><br></pre></td></tr></table></figure>
<p>å¼€å‘è€… <code>poiuy</code></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// æ‹‰å–ä»£ç </span><br><span class="line">$ <span class="built_in">cd</span> ~ &amp;&amp; git <span class="built_in">clone</span> ssh://git@host/home/git/repository/repo.git</span><br><span class="line"></span><br><span class="line">// æŸ¥çœ‹çŠ¶æ€</span><br><span class="line">$ git status</span><br><span class="line"></span><br><span class="line">// åˆ›å»º README.md æ–‡ä»¶</span><br><span class="line">$ touch README.md</span><br><span class="line"></span><br><span class="line">// å°† README.md æ–‡ä»¶åŠ å…¥æš‚å­˜åŒº</span><br><span class="line">$ git add README.md</span><br><span class="line">$ vim README.md</span><br><span class="line">1. this is the first commit.</span><br><span class="line"></span><br><span class="line">// è®¾ç½®ç”¨æˆ·åå’Œé‚®ç®±</span><br><span class="line">$ git config user.email <span class="string">&quot;poiuy@example.com&quot;</span></span><br><span class="line">$ git config user.name <span class="string">&quot;poiuy&quot;</span></span><br><span class="line"></span><br><span class="line">// æäº¤ä»£ç åˆ°æœ¬åœ°ä»“åº“</span><br><span class="line">$ git commit -m <span class="string">&quot;Add README.md&quot;</span></span><br></pre></td></tr></table></figure>
<p>ç›´åˆ°è¿™æ—¶ä¸¤ä¸ªäººéƒ½ç›¸å®‰æ— äº‹ï¼Œåœ¨å„è‡ªçš„æœ¬åœ°ä»“åº“ç©çš„å°½å¿ƒã€‚ä½†äº‹æƒ…ä¸ä¼šå°±è¿™æ ·äº†ç»“äº†ï¼Œå¦åˆ™ï¼Œæˆ‘å°±æ²¡æ³•å¾€ä¸‹å†™äº†ã€‚</p>
<h4 id="ç¬¬äºŒé˜¶æ®µï¼šè¿œç¨‹æ··æˆ˜"><a href="#ç¬¬äºŒé˜¶æ®µï¼šè¿œç¨‹æ··æˆ˜" class="headerlink" title="ç¬¬äºŒé˜¶æ®µï¼šè¿œç¨‹æ··æˆ˜"></a>ç¬¬äºŒé˜¶æ®µï¼šè¿œç¨‹æ··æˆ˜</h4><p>è¿™æ—¶èµ·ï¼Œæƒ…å†µå°±å˜çš„æœ‰äº›å¤æ‚äº†ï¼Œè¿˜å¥½å±€é¢å¯æ§ã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// qwert æäº¤ä»£ç åˆ°è¿œç¨‹ä»“åº“</span><br><span class="line">$ git push origin master</span><br><span class="line"></span><br><span class="line">// æ¥ä¸‹æ¥ï¼Œpoiuy ä¹Ÿå°†ä»£ç æäº¤åˆ°è¿œç¨‹ä»“åº“ï¼Œè¿™æ—¶çœŸæ­£çš„æ‚²å‰§äº§ç”Ÿäº†</span><br><span class="line">$ git push origin master</span><br><span class="line">To ssh://git@host/home/git/repository/repo.git</span><br><span class="line"> ! [rejected]        master -&gt; master (fetch first)</span><br><span class="line">error: failed to push some refs to <span class="string">&#x27;ssh://git@host/home/git/repository/repo.git&#x27;</span></span><br><span class="line">hint: Updates were rejected because the remote contains work that you <span class="keyword">do</span></span><br><span class="line">hint: not have locally. This is usually caused by another repository pushing</span><br><span class="line">hint: to the same ref. You may want to first merge the remote changes (e.g.,</span><br><span class="line">hint: <span class="string">&#x27;git pull&#x27;</span>) before pushing again.</span><br><span class="line">hint: See the <span class="string">&#x27;Note about fast-forwards&#x27;</span> <span class="keyword">in</span> <span class="string">&#x27;git push --help&#x27;</span> <span class="keyword">for</span> details.</span><br><span class="line"></span><br><span class="line">// ä¹Ÿå°±æ˜¯è¯´ï¼Œpoiuy å¾—å…ˆæ‹‰ä¸€ä¸‹è¿œç¨‹ä»“åº“çš„ä»£ç åˆ°æœ¬åœ°ï¼Œå†è¿›è¡Œæäº¤ï¼Œå› ä¸ºä½ åœ¨äººå®¶ push åé¢è¿›è¡Œ push çš„ï¼Œè¿™ä¸æ€ªä½ </span><br><span class="line">$ git pull --rebase origin master</span><br><span class="line">warning: no common commits</span><br><span class="line">remote: Counting objects: 3, <span class="keyword">done</span>.</span><br><span class="line">remote: Total 3 (delta 0), reused 0 (delta 0)</span><br><span class="line">Unpacking objects: 100% (3/3), <span class="keyword">done</span>.</span><br><span class="line">From ssh://host/home/git/repository/repo</span><br><span class="line"> * branch            master     -&gt; FETCH_HEAD</span><br><span class="line">First, rewinding head to replay your work on top of it...</span><br><span class="line">Applying: Add README.md</span><br><span class="line">Using index info to reconstruct a base tree...</span><br><span class="line">Falling back to patching base and 3-way merge...</span><br><span class="line">Auto-merging README.md</span><br></pre></td></tr></table></figure>
<div class="note danger">
            <p><code>--rebase</code>ï¼šè¿™ä¸ªé€‰é¡¹å°±æ˜¯å‘Šè¯‰ <code>Git</code> æŠŠ <code>poiuy</code> çš„æäº¤ç§»åˆ°åŒæ­¥äº†ä¸­å¤®ä»“åº“ä¿®æ”¹åçš„ <code>master</code> åˆ†æ”¯çš„é¡¶éƒ¨ã€‚å¦‚æœä½ å¿˜åŠ äº†è¿™ä¸ªé€‰é¡¹ï¼Œ<code>pull</code> æ“ä½œä»ç„¶å¯ä»¥å®Œæˆï¼Œä½†æ¯æ¬¡ <code>pull</code> æ“ä½œè¦åŒæ­¥ä¸­å¤®ä»“åº“ä¸­åˆ«äººä¿®æ”¹æ—¶ï¼Œæäº¤å†å²ä¼šä»¥ä¸€ä¸ªå¤šä½™çš„ã€åˆå¹¶æäº¤ã€ç»“å°¾ã€‚å¯¹äºé›†ä¸­å¼å·¥ä½œæµï¼Œæœ€å¥½æ˜¯ä½¿ç”¨ <code>rebase</code> è€Œä¸æ˜¯ç”Ÿæˆä¸€ä¸ªåˆå¹¶æäº¤ã€‚</p>
          </div>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// qwert ç»­ç»­ç¼–è¾‘æ–‡ä»¶ README.md å¹¶æäº¤æ¨é€åˆ°è¿œç¨‹</span><br><span class="line">$ vim README.md</span><br><span class="line">1. this is the second commit. <span class="comment"># åªå°†å•è¯ first æ”¹ä¸º second</span></span><br><span class="line">$ git add README.md</span><br><span class="line">$ git commit -m <span class="string">&quot;Update README.md&quot;</span></span><br><span class="line">$ git push origin master</span><br><span class="line"></span><br><span class="line">// poiuy ä½¿ç”¨ git pull åŒæ­¥è¿œç¨‹ä»£ç åˆ°æœ¬åœ°ï¼Œè¿™å°†äº§ç”Ÿä¸€ä¸ªå†²çª</span><br><span class="line">$ git pull origin master</span><br><span class="line">remote: Counting objects: 5, <span class="keyword">done</span>.</span><br><span class="line">remote: Total 3 (delta 0), reused 0 (delta 0)</span><br><span class="line">Unpacking objects: 100% (3/3), <span class="keyword">done</span>.</span><br><span class="line">From ssh://host/home/git/repository/repo</span><br><span class="line"> * [new branch]      master     -&gt; origin/master</span><br><span class="line">Auto-merging README.md</span><br><span class="line">CONFLICT (content): Merge conflict <span class="keyword">in</span> README.md</span><br><span class="line">Automatic merge failed; fix conflicts and <span class="keyword">then</span> commit the result.</span><br><span class="line"></span><br><span class="line">// poiuy ä½¿ç”¨ git pull --rebase åŒæ­¥è¿œç¨‹ä»£ç åˆ°æœ¬åœ°ï¼Œæ‰˜ --rebase çš„ç¦æ²¡æœ‰äº§ç”Ÿå†²çª</span><br><span class="line">$ git pull --rebase origin master</span><br><span class="line">From ssh://host/home/git/repository/repo</span><br><span class="line"> * branch            master     -&gt; FETCH_HEAD</span><br><span class="line">First, rewinding head to replay your work on top of it...</span><br><span class="line">Fast-forwarded master to 3a24fcf204956f97a7499393fbca68e3a77df040.</span><br><span class="line"></span><br><span class="line">// poiuy ç»§ç»­ç¼–è¾‘ README.md</span><br><span class="line">$ vim README.md</span><br><span class="line">1. this is the second commit.</span><br><span class="line">2. poiuy <span class="comment"># æ–°å¢ä¸€è¡Œ</span></span><br><span class="line">$ git add .</span><br><span class="line">$ git commit -m <span class="string">&quot;Update README.md&quot;</span></span><br><span class="line">$ git push origin master</span><br><span class="line"></span><br><span class="line">// qwert ç»§ç»­ç¼–è¾‘ README.md</span><br><span class="line">$ vim README.md</span><br><span class="line">1. this is the second commit.</span><br><span class="line">2. qwert <span class="comment"># æ–°å¢ä¸€è¡Œ</span></span><br><span class="line">$ git add .</span><br><span class="line">$ git commit -m <span class="string">&quot;Update README.md&quot;</span></span><br><span class="line">$ git push origin master <span class="comment"># è¿™æ—¶è¿œç¨‹ä»“åº“æ‹’ç» qwert çš„æäº¤ï¼Œå› ä¸º poiuy å·²ç»å°†æœ€æ–°æ”¹åŠ¨æäº¤åˆ°è¿œç¨‹äº†ï¼Œqwert å¿…é¡»å°†è¿œç¨‹åŒæ­¥åˆ°æœ¬åœ°</span></span><br><span class="line">To ssh://git@host/home/git/repository/repo.git</span><br><span class="line"> ! [rejected]        master -&gt; master (fetch first)</span><br><span class="line">error: failed to push some refs to <span class="string">&#x27;ssh://git@host/home/git/repository/repo.git&#x27;</span></span><br><span class="line">hint: Updates were rejected because the remote contains work that you <span class="keyword">do</span></span><br><span class="line">hint: not have locally. This is usually caused by another repository pushing</span><br><span class="line">hint: to the same ref. You may want to first merge the remote changes (e.g.,</span><br><span class="line">hint: <span class="string">&#x27;git pull&#x27;</span>) before pushing again.</span><br><span class="line">hint: See the <span class="string">&#x27;Note about fast-forwards&#x27;</span> <span class="keyword">in</span> <span class="string">&#x27;git push --help&#x27;</span> <span class="keyword">for</span> details.</span><br><span class="line">$ git pull --rebase origin master <span class="comment"># ä¸æ˜¯è¯´æ‹‰å–çš„å§¿åŠ¿ä¸å¯¹ï¼Œè€Œæ˜¯ä¸¤è€…éƒ½å¯¹åŒä¸€è¡Œå†…å®¹è¿›è¡Œç¼–è¾‘ï¼Œå†²çªæ— ç–‘å‘€</span></span><br><span class="line">remote: Counting objects: 5, <span class="keyword">done</span>.</span><br><span class="line">remote: Total 3 (delta 0), reused 0 (delta 0)</span><br><span class="line">Unpacking objects: 100% (3/3), <span class="keyword">done</span>.</span><br><span class="line">From ssh://host/home/git/repository/repo</span><br><span class="line"> * branch            master     -&gt; FETCH_HEAD</span><br><span class="line">First, rewinding head to replay your work on top of it...</span><br><span class="line">Applying: Update README.md</span><br><span class="line">Using index info to reconstruct a base tree...</span><br><span class="line">M  README.md</span><br><span class="line">Falling back to patching base and 3-way merge...</span><br><span class="line">Auto-merging README.md</span><br><span class="line">CONFLICT (content): Merge conflict <span class="keyword">in</span> README.md</span><br><span class="line">Failed to merge <span class="keyword">in</span> the changes.</span><br><span class="line">Patch failed at 0001 Update README.md</span><br><span class="line">The copy of the patch that failed is found <span class="keyword">in</span>:</span><br><span class="line">   /home/qwert/repo/.git/rebase-apply/patch</span><br><span class="line"></span><br><span class="line">When you have resolved this problem, run <span class="string">&quot;git rebase --continue&quot;</span>.</span><br><span class="line">If you prefer to skip this patch, run <span class="string">&quot;git rebase --skip&quot;</span> instead.</span><br><span class="line">To check out the original branch and stop rebasing, run <span class="string">&quot;git rebase --abort&quot;</span>.</span><br><span class="line"></span><br><span class="line">// qwert è§£å†³å†²çªï¼Œè§£å†³ä¸€ä¸ªå†²çª</span><br><span class="line">$ git add &lt;conflict-to-resolve-file&gt;</span><br><span class="line">$ git rebase --<span class="built_in">continue</span> <span class="comment"># ç›´åˆ°å‡ºç° No rebase in progress?</span></span><br><span class="line"></span><br><span class="line">// qwert åœ¨è§£å†³å†²çªçš„è¿‡ç¨‹ä¸­ï¼Œå‘ç°æœ‰äº›æä¸å®šï¼Œå¼„ä¹±äº†ï¼Œè¿˜å¯ä»¥æ’¤é”€</span><br><span class="line">$ git rebase --abort</span><br><span class="line"></span><br><span class="line">// å¦‚æœ qwert é¡ºåˆ©è§£å†³äº†æ‰€æœ‰å†²çªï¼Œå°±æ„‰å¿«åœ°å‘å¸ƒä»–çš„ä¿®æ”¹</span><br><span class="line">$ git push origin master</span><br></pre></td></tr></table></figure>
<p>æ­£å¦‚å¼•ç”¨æ–‡ç« ä¸­æåˆ°çš„ï¼Œä»…ä½¿ç”¨å‡ ä¸ª <code>Git</code> å‘½ä»¤æˆ‘ä»¬å°±å¯ä»¥æ¨¡æ‹Ÿå‡ºä¼ ç»Ÿ <code>Subversion</code> å¼€å‘ç¯å¢ƒã€‚å¯¹äºè¦ä» <code>SVN</code> è¿ç§»è¿‡æ¥çš„å›¢é˜Ÿæ¥è¯´è¿™å¤ªå¥½äº†ï¼Œä½†æ²¡æœ‰å‘æŒ¥å‡º <code>Git</code> åˆ†å¸ƒå¼æœ¬è´¨çš„ä¼˜åŠ¿ã€‚</p>
<p>é›†ä¸­å¼å·¥ä½œæµçš„ä½¿ç”¨åœºæ™¯ï¼š</p>
<ul>
<li>å›¢é˜Ÿäººæ•°å°‘</li>
<li>å¼€å‘ä¸æ˜¯å¾ˆé¢‘ç¹</li>
<li>å›¢é˜Ÿæ²Ÿé€šæ–¹ä¾¿</li>
<li>ä¸éœ€åŒæ—¶ç»´æŠ¤å¤šä¸ªç‰ˆæœ¬</li>
</ul>
<h2 id="Gitflow-å·¥ä½œæµ"><a href="#Gitflow-å·¥ä½œæµ" class="headerlink" title="Gitflow å·¥ä½œæµ"></a>Gitflow å·¥ä½œæµ</h2><blockquote>
<p><a href="https://www.atlassian.com/git/tutorials/comparing-workflows/gitflow-workflow">Gitflow å·¥ä½œæµ - <code>Gitflow Workflow</code></a></p>
</blockquote>
<p><img src="https://inotes.oss-cn-beijing.aliyuncs.com/git/201812/1007-gitflow-workflow.png" alt="1007-gitflow-workflow.png"></p>
<h3 id="æ‹‰å–è¿œç¨‹ä»“åº“"><a href="#æ‹‰å–è¿œç¨‹ä»“åº“" class="headerlink" title="æ‹‰å–è¿œç¨‹ä»“åº“"></a>æ‹‰å–è¿œç¨‹ä»“åº“</h3><p><code>Gitflow</code> å·¥ä½œæµä»ç„¶ç”¨ä¸­å¤®ä»“åº“ä½œä¸ºæ‰€æœ‰å¼€å‘è€…çš„äº¤äº’ä¸­å¿ƒã€‚è¿™é‡Œæˆ‘æ²¿ç”¨é›†ä¸­å¼å·¥ä½œæµä¸­åˆ›å»ºçš„ä»“åº“ã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// qwert å·¥ä½œå‡†å¤‡</span><br><span class="line">$ ssh qwert@host &amp;&amp; <span class="built_in">cd</span> ~ &amp;&amp; git <span class="built_in">clone</span> ssh://git@host/home/git/repository/repo.git</span><br><span class="line">$ git config user.name <span class="string">&quot;qwert&quot;</span></span><br><span class="line">$ git config user.email <span class="string">&quot;qwert@example.com&quot;</span></span><br><span class="line"></span><br><span class="line">// poiuy å·¥ä½œå‡†å¤‡</span><br><span class="line">$ ssh poiuy@host &amp;&amp; <span class="built_in">cd</span> ~ &amp;&amp; git <span class="built_in">clone</span> ssh://git@host/home/git/repository/repo.git</span><br><span class="line">$ git config user.name <span class="string">&quot;poiuy&quot;</span></span><br><span class="line">$ git config user.email <span class="string">&quot;poiuy@example.com&quot;</span></span><br></pre></td></tr></table></figure>
<h3 id="Gitflow-å·¥å…·å®‰è£…"><a href="#Gitflow-å·¥å…·å®‰è£…" class="headerlink" title="Gitflow å·¥å…·å®‰è£…"></a>Gitflow å·¥å…·å®‰è£…</h3><blockquote>
<ul>
<li><a href="https://github.com/petervanderdoes/gitflow-avh/wiki/Installation">AVH Edition å®‰è£…è¯´æ˜</a></li>
<li><a href="https://danielkummer.github.io/git-flow-cheatsheet/index.zh_CN.html">git-flow å¤‡å¿˜æ¸…å•</a></li>
</ul>
</blockquote>
<p>Gitflow ä¸¤ä¸ªé•¿æœŸåˆ†æ”¯ï¼š</p>
<ul>
<li>ä¸»åˆ†æ”¯ <code>master</code></li>
<li>å¼€å‘åˆ†æ”¯ <code>develop</code></li>
</ul>
<p>Gitflow ä¸‰ä¸ªçŸ­æœŸåˆ†æ”¯ï¼š</p>
<ul>
<li>åŠŸèƒ½åˆ†æ”¯ <code>feature branch</code></li>
<li>è¡¥ä¸åˆ†æ”¯ <code>hotfix branch</code></li>
<li>é¢„å‘åˆ†æ”¯ <code>release branch</code></li>
</ul>
<p>å…³äº <code>git-flow</code> è¿™ç¯‡ <a href="https://www.git-tower.com/learn/git/ebook/cn/command-line/advanced-topics/git-flow">Learn Version Control with Git</a> è¯´çš„éå¸¸åˆ°ä½ã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// Linux ä¸‹å®‰è£…</span><br><span class="line">$ curl --insecure --silent --location  https://raw.githubusercontent.com/petervanderdoes/gitflow-avh/develop/contrib/gitflow-installer.sh --output ./gitflow-installer.sh</span><br><span class="line">$ chmod +x ./gitflow-installer.sh</span><br><span class="line">$ sudo ./gitflow-installer.sh install stable</span><br></pre></td></tr></table></figure>
<h3 id="Gitflow-åˆå§‹åŒ–"><a href="#Gitflow-åˆå§‹åŒ–" class="headerlink" title="Gitflow åˆå§‹åŒ–"></a>Gitflow åˆå§‹åŒ–</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// qwert ç”¨æˆ·åˆå§‹åŒ– git-flow</span><br><span class="line">$ git flow init</span><br><span class="line"></span><br><span class="line">Which branch should be used <span class="keyword">for</span> bringing forth production releases?</span><br><span class="line">   - master</span><br><span class="line">Branch name <span class="keyword">for</span> production releases: [master]</span><br><span class="line">Branch name <span class="keyword">for</span> <span class="string">&quot;next release&quot;</span> development: [develop]</span><br><span class="line"></span><br><span class="line">How to name your supporting branch prefixes?</span><br><span class="line">Feature branches? [feature/]</span><br><span class="line">Bugfix branches? [bugfix/]</span><br><span class="line">Release branches? [release/]</span><br><span class="line">Hotfix branches? [hotfix/]</span><br><span class="line">Support branches? [support/]</span><br><span class="line">Version tag prefix? []</span><br><span class="line">Hooks and filters directory? [/home/qwert/repo/.git/hooks]</span><br><span class="line">$ git push -u origin develop <span class="comment"># å°† develop åˆ†æ”¯æäº¤åˆ°è¿œç¨‹ä»“åº“</span></span><br><span class="line"></span><br><span class="line">// poiuy ç”¨æˆ·åˆå§‹åŒ– git-flow</span><br><span class="line">$ git flow init</span><br><span class="line"></span><br><span class="line">Which branch should be used <span class="keyword">for</span> bringing forth production releases?</span><br><span class="line">   - master</span><br><span class="line">Branch name <span class="keyword">for</span> production releases: [master]</span><br><span class="line">Branch name <span class="keyword">for</span> <span class="string">&quot;next release&quot;</span> development: [develop]</span><br><span class="line"></span><br><span class="line">How to name your supporting branch prefixes?</span><br><span class="line">Feature branches? [feature/]</span><br><span class="line">Bugfix branches? [bugfix/]</span><br><span class="line">Release branches? [release/]</span><br><span class="line">Hotfix branches? [hotfix/]</span><br><span class="line">Support branches? [support/]</span><br><span class="line">Version tag prefix? []</span><br><span class="line">Hooks and filters directory? [/home/poiuy/repo/.git/hooks]</span><br></pre></td></tr></table></figure>
<h3 id="å¼€å‘é˜¶æ®µ"><a href="#å¼€å‘é˜¶æ®µ" class="headerlink" title="å¼€å‘é˜¶æ®µ"></a>å¼€å‘é˜¶æ®µ</h3><p>å¼€å‘è€… <code>qwert</code>ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// qwert å¼€å¯ä¸€ä¸ªåŠŸèƒ½åˆ†æ”¯ï¼Œè¿›è¡Œé¡¹ç›®æŸä¸ªåŠŸèƒ½å¼€å‘</span><br><span class="line">$ git flow feature start feature-qwert</span><br><span class="line">Switched to a new branch <span class="string">&#x27;feature/feature-qwert&#x27;</span></span><br><span class="line"></span><br><span class="line">Summary of actions:</span><br><span class="line">- A new branch <span class="string">&#x27;feature/feature-qwert&#x27;</span> was created, based on <span class="string">&#x27;develop&#x27;</span></span><br><span class="line">- You are now on branch <span class="string">&#x27;feature/feature-qwert&#x27;</span></span><br><span class="line"></span><br><span class="line">Now, start committing on your feature. When <span class="keyword">done</span>, use:</span><br><span class="line"></span><br><span class="line">     git flow feature finish feature-qwert</span><br><span class="line"></span><br><span class="line">// qwert æ“ä½œ</span><br><span class="line">$ vim README.md</span><br><span class="line">1. this is the second commit.</span><br><span class="line">2. poiuy</span><br><span class="line">3. qwert</span><br><span class="line">4. qwert feature start.</span><br><span class="line">$ git add README.md</span><br><span class="line">$ git commit -m <span class="string">&quot;Update README.md&quot;</span></span><br><span class="line">$ git flow feature finish feature-qwert <span class="comment"># æ­¤æ—¶ qwert å°†å®Œæˆå¼€å‘ç»“æŸä»»åŠ¡ï¼Œfeature-qwert åˆ†æ”¯çš„ä½¿å‘½å°±æ­¤å®Œç»“</span></span><br><span class="line">Switched to branch <span class="string">&#x27;develop&#x27;</span></span><br><span class="line">Updating d62035e..ced573c</span><br><span class="line">Fast-forward</span><br><span class="line"> README.md | 1 +</span><br><span class="line"> 1 file changed, 1 insertion(+)</span><br><span class="line">Deleted branch feature/feature-qwert (was ced573c).</span><br><span class="line"></span><br><span class="line">Summary of actions:</span><br><span class="line">- The feature branch <span class="string">&#x27;feature/feature-qwert&#x27;</span> was merged into <span class="string">&#x27;develop&#x27;</span></span><br><span class="line">- Feature branch <span class="string">&#x27;feature/feature-qwert&#x27;</span> has been locally deleted</span><br><span class="line">- You are now on branch <span class="string">&#x27;develop&#x27;</span></span><br><span class="line">$ git push origin develop <span class="comment"># å°† develop åˆ†æ”¯æäº¤åˆ°è¿œç¨‹ä»“åº“</span></span><br></pre></td></tr></table></figure>
<p>å¼€å‘è€… <code>poiuy</code>ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// poiuy å¼€å¯ä¸€ä¸ªåŠŸèƒ½åˆ†æ”¯ï¼Œè¿›è¡Œé¡¹ç›®å¦ä¸€ä¸ªåŠŸèƒ½å¼€å‘</span><br><span class="line">$ git flow feature start feature-poiuy</span><br><span class="line">Switched to a new branch <span class="string">&#x27;feature/feature-poiuy&#x27;</span></span><br><span class="line"></span><br><span class="line">Summary of actions:</span><br><span class="line">- A new branch <span class="string">&#x27;feature/feature-poiuy&#x27;</span> was created, based on <span class="string">&#x27;develop&#x27;</span></span><br><span class="line">- You are now on branch <span class="string">&#x27;feature/feature-poiuy&#x27;</span></span><br><span class="line"></span><br><span class="line">Now, start committing on your feature. When <span class="keyword">done</span>, use:</span><br><span class="line"></span><br><span class="line">     git flow feature finish feature-poiuy</span><br><span class="line"></span><br><span class="line">// poiuy æ“ä½œ</span><br><span class="line">$ vim README.md</span><br><span class="line">1. this is the second commit.</span><br><span class="line">2. poiuy</span><br><span class="line">3. qwert</span><br><span class="line">4. poiuy feature start.</span><br><span class="line">$ git README.md</span><br><span class="line">$ git commit -m <span class="string">&quot;Update README.md&quot;</span></span><br><span class="line">$ git flow feature finish feature-poiuy <span class="comment"># æ­¤æ—¶ poiuy å°†å®Œæˆå¼€å‘ç»“æŸä»»åŠ¡ï¼Œfeature-poiuy åˆ†æ”¯çš„ä½¿å‘½å°±æ­¤å®Œç»“</span></span><br><span class="line"></span><br><span class="line">// poiuy è·Ÿè¸ªè¿œç¨‹åˆ†æ”¯</span><br><span class="line">$ git branch --set-upstream-to=origin/develop develop</span><br><span class="line">Branch develop <span class="built_in">set</span> up to track remote branch develop from origin.</span><br><span class="line">$ git push origin develop <span class="comment"># poiuy å°†å¼€å‘å¥½çš„åŠŸèƒ½æ¨é€åˆ°è¿œç¨‹ï¼Œä½†æŠ±æ­‰çš„æ—¶ï¼Œæ­¤æ—¶è¿œç¨‹ develop å·²ç»å‘å‰æ»šåŠ¨ï¼Œå› ä¸ºä¸åªæ˜¯ä½ ä¸€ä¸ªäººåœ¨å¼€å‘</span></span><br><span class="line">To ssh://git@host/home/git/repository/repo.git</span><br><span class="line"> ! [rejected]        develop -&gt; develop (non-fast-forward)</span><br><span class="line">error: failed to push some refs to <span class="string">&#x27;ssh://git@host/home/git/repository/repo.git&#x27;</span></span><br><span class="line">hint: Updates were rejected because the tip of your current branch is behind</span><br><span class="line">hint: its remote counterpart. Merge the remote changes (e.g. <span class="string">&#x27;git pull&#x27;</span>)</span><br><span class="line">hint: before pushing again.</span><br><span class="line">hint: See the <span class="string">&#x27;Note about fast-forwards&#x27;</span> <span class="keyword">in</span> <span class="string">&#x27;git push --help&#x27;</span> <span class="keyword">for</span> details.</span><br><span class="line">$ git pull origin develop <span class="comment"># é‚£å°±å…ˆæ‹‰å–ä¸€ä¸‹ï¼Œè¿™æ—¶å¦‚æœå’Œå…¶å®ƒäººå¯¹åŒä¸€å—å†…å®¹åšè¿‡æ”¹åŠ¨ï¼Œå†²çªæ˜¯æ²¡æœ‰æ‚¬å¿µçš„</span></span><br><span class="line">From ssh://host/home/git/repository/repo</span><br><span class="line"> * branch            develop    -&gt; FETCH_HEAD</span><br><span class="line">Auto-merging README.md</span><br><span class="line">CONFLICT (content): Merge conflict <span class="keyword">in</span> README.md</span><br><span class="line">Automatic merge failed; fix conflicts and <span class="keyword">then</span> commit the result.</span><br><span class="line">$ git push origin develop <span class="comment"># poiuy åªèƒ½å­å“§å­å“§è§£å†³å®Œå†²çªï¼Œå†æ¨é€åˆ°è¿œç¨‹</span></span><br></pre></td></tr></table></figure>
<p>è¿™æ—¶ï¼Œå¼€å‘è€… <code>qwert</code> åˆå¼€å‘å®Œä¸€ä¸ªæ–°çš„åŠŸèƒ½ï¼Œå‡†å¤‡è¦å‘å¸ƒ</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// åœ¨å¼€å¯æ–°çš„åŠŸèƒ½åˆ†æ”¯ä¹‹å‰ï¼Œå…ˆä» develop åˆ†æ”¯æ‹‰å–æœ€æ–°çš„ä»£ç </span><br><span class="line">$ git pull origin develop</span><br><span class="line"></span><br><span class="line">// å¼€å¯æ–°çš„åŠŸèƒ½åˆ†æ”¯</span><br><span class="line">$ git flow feature start feature-something</span><br><span class="line">$ vim README.md</span><br><span class="line">1. this is the second commit.</span><br><span class="line">2. poiuy</span><br><span class="line">3. qwert</span><br><span class="line">4. qwert feature start.</span><br><span class="line">5. poiuy feature start.</span><br><span class="line">6. qwert another feature start.</span><br><span class="line">$ git add README.md</span><br><span class="line">$ git commit -m <span class="string">&quot;Update README.md&quot;</span></span><br><span class="line"></span><br><span class="line">// å°†å¼€å‘å®Œçš„æ–°åŠŸèƒ½åˆ†æ”¯å‘å¸ƒåˆ°è¿œç¨‹ä»“åº“ï¼Œè¿™ä¸ªåˆ†æ”¯å¯ä»¥å‘å¸ƒåˆ°æµ‹è¯•æˆ–è€…ä»¿çœŸç¯å¢ƒè¿›è¡Œæµ‹è¯•</span><br><span class="line">$ git flow feature publish feature-something</span><br><span class="line">Counting objects: 5, <span class="keyword">done</span>.</span><br><span class="line">Compressing objects: 100% (2/2), <span class="keyword">done</span>.</span><br><span class="line">Writing objects: 100% (3/3), 303 bytes | 0 bytes/s, <span class="keyword">done</span>.</span><br><span class="line">Total 3 (delta 1), reused 0 (delta 0)</span><br><span class="line">To ssh://git@host/home/git/repository/repo.git</span><br><span class="line"> * [new branch]      feature/feature-something -&gt; feature/feature-something</span><br><span class="line">Branch feature/feature-something <span class="built_in">set</span> up to track remote branch feature/feature-something from origin.</span><br><span class="line">Already on <span class="string">&#x27;feature/feature-something&#x27;</span></span><br><span class="line"></span><br><span class="line">Summary of actions:</span><br><span class="line">- The remote branch <span class="string">&#x27;feature/feature-something&#x27;</span> was created or updated</span><br><span class="line">- The <span class="built_in">local</span> branch <span class="string">&#x27;feature/feature-something&#x27;</span> was configured to track the remote branch</span><br><span class="line">- You are now on branch <span class="string">&#x27;feature/feature-something&#x27;</span></span><br><span class="line"></span><br><span class="line">// å¦‚æœè¿™ä¸ªåŠŸèƒ½æœ‰å¤šä¸ªäººå‘˜å‚ä¸ï¼Œé‚£ä¹ˆå…¶å®ƒäººå¯ä»¥æ‹‰å–è¿™ä¸ªæ–°åŠŸèƒ½åˆ†æ”¯è¿›è¡Œç›¸å…³çš„å¼€å‘</span><br><span class="line">$ git flow feature pull origin feature-something</span><br><span class="line"></span><br><span class="line">// ä¹Ÿå¯ä»¥è·Ÿè¸ªåœ¨ origin ä¸Šçš„æ–°åŠŸèƒ½åˆ†æ”¯</span><br><span class="line">$ git flow feature track feature-something</span><br><span class="line"></span><br><span class="line">// ç»è¿‡æµ‹è¯•å‘ç°è¿™ä¸ªæ–°åŠŸèƒ½åˆ†æ”¯æ²¡ä»€ä¹ˆå¤§çš„é—®é¢˜ï¼Œå¼€å‘è€…å°†å®Œæˆçš„æ–°åŠŸèƒ½åˆå¹¶åˆ° develop åˆ†æ”¯å¹¶åˆ é™¤æ–°åŠŸèƒ½åˆ†æ”¯</span><br><span class="line">$ git flow feature finish feature-something</span><br><span class="line"></span><br><span class="line">// å¼€å§‹ä» develop å‡†å¤‡ release ç‰ˆæœ¬</span><br><span class="line">$ git flow release start v1.0</span><br><span class="line"></span><br><span class="line">// åˆ›å»ºä¹‹åå¯ä»¥ç«‹å³å‘å¸ƒå…è®¸å…¶å®ƒç”¨æˆ·å‘è¿™ä¸ª release åˆ†æ”¯æäº¤å†…å®¹ï¼Œå°†è¿™ä¸ª release å‘å¸ƒå‡ºå»ï¼Œå…è®¸æ›´æ–°æäº¤ï¼Œç¡®ä¿æ–°åŠŸèƒ½æ­£å¸¸ï¼Œä¸‡ä¸€æ–°åŠŸèƒ½æœ‰éšæ‚£çš„ bugï¼Œå¯ä»¥å°±è¿‘ä¿®å¤</span><br><span class="line">$ git flow release publish v1.0</span><br><span class="line"></span><br><span class="line">// poiuy å¯ä»¥é€šè¿‡ track å‘½ä»¤ç­¾å‡º release ç‰ˆæœ¬çš„è¿œç¨‹å˜æ›´</span><br><span class="line">$ git flow release track v1.0</span><br><span class="line">$ vim README.md <span class="comment"># poiuy è·Ÿè¸ª release v1.0 ç‰ˆæœ¬åï¼Œåˆè¿›è¡Œäº†ä¸€äº›æäº¤</span></span><br><span class="line">1. this is the second commit.</span><br><span class="line">2. poiuy</span><br><span class="line">3. qwert</span><br><span class="line">4. qwert feature start.</span><br><span class="line">5. poiuy feature start.</span><br><span class="line">6. qwert another feature start.</span><br><span class="line">7. poiuy tract release v1.0</span><br><span class="line"></span><br><span class="line">// ç»è¿‡ç°åº¦çš„æµ‹è¯•åï¼Œå‘å¸ƒçš„ release ç¬¦åˆä¸Šçº¿çš„è¦æ±‚ï¼Œqwert æ‹‰å– release v1.0 çš„æ›´æ–°ï¼Œå®Œæˆ release ç‰ˆæœ¬ã€‚è‡³æ­¤æ–°åŠŸèƒ½æ‰èƒ½ç®—æ˜¯ä¸Šçº¿äº†</span><br><span class="line">$ git flow release finish v1.0</span><br><span class="line">Branches <span class="string">&#x27;develop&#x27;</span> and <span class="string">&#x27;origin/develop&#x27;</span> have diverged.</span><br><span class="line">And <span class="built_in">local</span> branch <span class="string">&#x27;develop&#x27;</span> is ahead of <span class="string">&#x27;origin/develop&#x27;</span>.</span><br><span class="line">Switched to branch <span class="string">&#x27;master&#x27;</span></span><br><span class="line">Merge made by the <span class="string">&#x27;recursive&#x27;</span> strategy.</span><br><span class="line"> README.md | 4 ++++</span><br><span class="line"> 1 file changed, 4 insertions(+)</span><br><span class="line">Already on <span class="string">&#x27;master&#x27;</span></span><br><span class="line">Your branch is ahead of <span class="string">&#x27;origin/master&#x27;</span> by 6 commits.</span><br><span class="line">  (use <span class="string">&quot;git push&quot;</span> to publish your <span class="built_in">local</span> commits)</span><br><span class="line">Switched to branch <span class="string">&#x27;develop&#x27;</span></span><br><span class="line">Your branch is ahead of <span class="string">&#x27;origin/develop&#x27;</span> by 1 commit.</span><br><span class="line">  (use <span class="string">&quot;git push&quot;</span> to publish your <span class="built_in">local</span> commits)</span><br><span class="line">Merge made by the <span class="string">&#x27;recursive&#x27;</span> strategy.</span><br><span class="line"> README.md | 1 +</span><br><span class="line"> 1 file changed, 1 insertion(+)</span><br><span class="line">To ssh://git@host/home/git/repository/repo.git</span><br><span class="line"> - [deleted]         release/v1.0</span><br><span class="line">Deleted branch release/v1.0 (was 77da54a).</span><br><span class="line"></span><br><span class="line">Summary of actions:</span><br><span class="line">- Release branch <span class="string">&#x27;release/v1.0&#x27;</span> has been merged into <span class="string">&#x27;master&#x27;</span></span><br><span class="line">- The release was tagged <span class="string">&#x27;v1.0&#x27;</span></span><br><span class="line">- Release tag <span class="string">&#x27;v1.0&#x27;</span> has been back-merged into <span class="string">&#x27;develop&#x27;</span></span><br><span class="line">- Release branch <span class="string">&#x27;release/v1.0&#x27;</span> has been locally deleted; it has been remotely deleted from <span class="string">&#x27;origin&#x27;</span></span><br><span class="line">- You are now on branch <span class="string">&#x27;develop&#x27;</span></span><br><span class="line"></span><br><span class="line">// å°† tag æ¨é€åˆ°è¿œç¨‹ä»“åº“</span><br><span class="line">$ git push origin --tags</span><br><span class="line"></span><br><span class="line">// æ²¡è¿‡å¤šä¹…ï¼Œç”Ÿäº§ç¯å¢ƒå‡ºç°äº†ä¸€ä¸ªè‡´å‘½çš„ bug éœ€è¦ç´§æ€¥ä¿®å¤ï¼Œqwert å¼€å¯ä¸€ä¸ªä¿®å¤åˆ†æ”¯</span><br><span class="line">$ git flow hotfix start issue-1</span><br><span class="line">Branches <span class="string">&#x27;master&#x27;</span> and <span class="string">&#x27;origin/master&#x27;</span> have diverged.</span><br><span class="line">And <span class="built_in">local</span> branch <span class="string">&#x27;master&#x27;</span> is ahead of <span class="string">&#x27;origin/master&#x27;</span>.</span><br><span class="line">Switched to a new branch <span class="string">&#x27;hotfix/issue-1&#x27;</span></span><br><span class="line"></span><br><span class="line">Summary of actions:</span><br><span class="line">- A new branch <span class="string">&#x27;hotfix/issue-1&#x27;</span> was created, based on <span class="string">&#x27;master&#x27;</span></span><br><span class="line">- You are now on branch <span class="string">&#x27;hotfix/issue-1&#x27;</span></span><br><span class="line"></span><br><span class="line">Follow-up actions:</span><br><span class="line">- Start committing your hot fixes</span><br><span class="line">- Bump the version number now!</span><br><span class="line">- When <span class="keyword">done</span>, run:</span><br><span class="line"></span><br><span class="line">     git flow hotfix finish <span class="string">&#x27;issue-1&#x27;</span></span><br><span class="line"></span><br><span class="line">// qwert å¼€å§‹ä¿®å¤ bugï¼Œå®Œæˆåç»“æŸ hotfix åˆ†æ”¯</span><br><span class="line">$ vim README.md</span><br><span class="line">1. this is the second commit.</span><br><span class="line">2. poiuy</span><br><span class="line">3. qwert</span><br><span class="line">4. qwert feature start.</span><br><span class="line">5. poiuy feature start.</span><br><span class="line">6. qwert another feature start.</span><br><span class="line">7. poiuy tract release v1.0</span><br><span class="line">8. qwert hotfix start.</span><br><span class="line">$ git add README.md</span><br><span class="line">$ git commit -m <span class="string">&quot;Update README.md&quot;</span></span><br><span class="line">$ git flow hotfix finish <span class="string">&#x27;issue-1&#x27;</span> <span class="comment"># ç»“æŸ hotfix åˆ†æ”¯çš„ bug ä¿®å¤</span></span><br><span class="line">Branches <span class="string">&#x27;master&#x27;</span> and <span class="string">&#x27;origin/master&#x27;</span> have diverged.</span><br><span class="line">And <span class="built_in">local</span> branch <span class="string">&#x27;master&#x27;</span> is ahead of <span class="string">&#x27;origin/master&#x27;</span>.</span><br><span class="line">Branches <span class="string">&#x27;develop&#x27;</span> and <span class="string">&#x27;origin/develop&#x27;</span> have diverged.</span><br><span class="line">And <span class="built_in">local</span> branch <span class="string">&#x27;develop&#x27;</span> is ahead of <span class="string">&#x27;origin/develop&#x27;</span>.</span><br><span class="line">Switched to branch <span class="string">&#x27;master&#x27;</span></span><br><span class="line">Your branch is ahead of <span class="string">&#x27;origin/master&#x27;</span> by 6 commits.</span><br><span class="line">  (use <span class="string">&quot;git push&quot;</span> to publish your <span class="built_in">local</span> commits)</span><br><span class="line">Merge made by the <span class="string">&#x27;recursive&#x27;</span> strategy.</span><br><span class="line"> README.md | 1 +</span><br><span class="line"> 1 file changed, 1 insertion(+)</span><br><span class="line">Switched to branch <span class="string">&#x27;develop&#x27;</span></span><br><span class="line">Your branch is ahead of <span class="string">&#x27;origin/develop&#x27;</span> by 3 commits.</span><br><span class="line">  (use <span class="string">&quot;git push&quot;</span> to publish your <span class="built_in">local</span> commits)</span><br><span class="line">Merge made by the <span class="string">&#x27;recursive&#x27;</span> strategy.</span><br><span class="line"> README.md | 1 +</span><br><span class="line"> 1 file changed, 1 insertion(+)</span><br><span class="line">Deleted branch hotfix/issue-1 (was e4ac4c3).</span><br><span class="line"></span><br><span class="line">Summary of actions:</span><br><span class="line">- Hotfix branch <span class="string">&#x27;hotfix/issue-1&#x27;</span> has been merged into <span class="string">&#x27;master&#x27;</span></span><br><span class="line">- The hotfix was tagged <span class="string">&#x27;issue-1&#x27;</span></span><br><span class="line">- Hotfix tag <span class="string">&#x27;issue-1&#x27;</span> has been back-merged into <span class="string">&#x27;develop&#x27;</span></span><br><span class="line">- Hotfix branch <span class="string">&#x27;hotfix/issue-1&#x27;</span> has been locally deleted</span><br><span class="line">- You are now on branch <span class="string">&#x27;develop&#x27;</span></span><br><span class="line"></span><br><span class="line">// æäº¤ä¿®å¤çš„ä»£ç åˆ°è¿œç¨‹ develop åˆ†æ”¯</span><br><span class="line">$ git push origin develop</span><br><span class="line"></span><br><span class="line">// å°†ä¿®å¤åçš„ tag æäº¤åˆ°è¿œç¨‹ä»“åº“ï¼Œè¿™æ ·ç”Ÿäº§ç¯å¢ƒå°±å¯ä»¥æ‹‰å– issue-1 æ ‡ç­¾ä¿®å¤ä¹‹å‰çš„ bug</span><br><span class="line">$ git push origin --tags</span><br></pre></td></tr></table></figure>
<p>ä»¥ä¸‹çš„è¿™å‰¯å›¾å°±æ˜¯å¯¹ <code>git flow</code> é‡è¦å‘½ä»¤çš„è¯ é‡Šï¼š</p>
<p><img src="https://inotes.oss-cn-beijing.aliyuncs.com/git/201812/1008-gitflow-commands.png" alt="1008-gitflow-commands.png"></p>
<p>é€šè¿‡è¿™äº›æ“ä½œï¼Œæˆ‘ä»¬çœ‹åˆ° <code>Gitflow</code> å·¥ä½œæµè‡ªå§‹è‡³ç»ˆä¸€ç›´ç»´æŠ¤ <code>master</code> å’Œ <code>develop</code> åˆ†æ”¯ï¼Œè€Œ <code>feature</code> å’Œ <code>hotfix</code> åˆ†æ”¯åªæ˜¯çŸ­æš‚çš„å‡ºç°ï¼Œå¾…åŠŸèƒ½å®Œæˆååˆå¹¶åˆ° <code>develop</code> åˆ†æ”¯ï¼Œä¿®å¤å®Œæˆåï¼ŒåŒæ—¶åˆå¹¶åˆ° <code>master</code> å’Œ <code>develop</code> åˆ†æ”¯ã€‚åŒæ—¶æˆ‘ä»¬ä¹Ÿçœ‹åˆ°æ–°åŠŸèƒ½æäº¤ä»ä¸ç›´æ¥ä¸ <code>master</code> åˆ†æ”¯äº¤äº’ï¼Œæ‰€æœ‰çš„åŠŸèƒ½åˆ†æ”¯éƒ½åŸºäº <code>develop</code> åˆ†æ”¯ï¼Œå½“ <code>feature</code> è¾¾åˆ°ä¸Šçº¿çš„è¦æ±‚åï¼Œæ‰ç»“æŸ <code>feature</code>ï¼Œå¹¶å°† <code>feature</code> åˆ†æ”¯åˆå¹¶å› <code>master</code> å’Œ <code>develop</code> åˆ†æ”¯ï¼Œé‡Šæ”¾å‡ºä¸€ä¸ªç‰ˆæœ¬ä¾›ç”Ÿäº§å‘å¸ƒã€‚è¿™æ ·æ˜æ™°çš„åŠŸèƒ½åˆ†æ”¯æä¾›äº†ä¸€ä¸ªå¥å£®çš„ç”¨äºç®¡ç†å¤§å‹é¡¹ç›®çš„æ¡†æ¶ã€‚å½“ç„¶ï¼Œè¦é•¿æœŸç»´æŠ¤ä¸¤ä¸ªåˆ†æ”¯ä¹Ÿæ¯”è¾ƒéº»çƒ¦ï¼Œå¤§å¤šæ•°ç®¡ç†å·¥å…·éƒ½å°† <code>master</code> å½“ä½œé»˜è®¤åˆ†æ”¯ï¼Œå¯æ˜¯å¼€å‘æ˜¯åœ¨ <code>develop</code> åˆ†æ”¯è¿›è¡Œçš„ï¼Œè¿™å¯¼è‡´ç»å¸¸è¦åˆ‡æ¢åˆ†æ”¯ï¼Œç¨ä¸æ³¨æ„å°±å¼„é”™åˆ†æ”¯ï¼Œéå¸¸æ¼äººï¼Œä¹Ÿè¯´æ˜äº†è¿™ç§å·¥ä½œæµç¨‹ç»ˆç©¶æ˜¯ä¸åˆé€‚å°å›¢é˜Ÿçš„ä¸­å°å‹é¡¹ç›®ã€‚</p>
<p><code>Gitflow</code> å·¥ä½œæµçš„ä½¿ç”¨åœºæ™¯ï¼š</p>
<ul>
<li>è®¤ä¸ºé¢å¤–å­¦ä¹  <code>Gitflow</code> ä¸æ˜¯ä»€ä¹ˆé—®é¢˜çš„</li>
<li>æœ‰ä¸“é—¨çš„ä»£ç ä»“åº“ç®¡ç†å‘˜çš„</li>
<li>å¼€å‘å›¢é˜Ÿç›¸å¯¹å›ºå®šï¼Œè€Œä¸”æœ‰ä¸€å®šè§„æ¨¡</li>
<li>å¸¸å¸¸æœ‰å¹¶è¡Œå¼€å‘éœ€æ±‚</li>
<li>å›¢é˜Ÿå¯¹äº <code>Release</code>ã€<code>Bug</code>ã€<code>Feature</code> è¿™äº›æ¦‚å¿µæœ‰ç»Ÿä¸€å®šä¹‰æ ‡å‡†çš„</li>
</ul>
<h2 id="Forking-å·¥ä½œæµ"><a href="#Forking-å·¥ä½œæµ" class="headerlink" title="Forking å·¥ä½œæµ"></a>Forking å·¥ä½œæµ</h2><blockquote>
<p><a href="https://github.com/oldratlee/translations/blob/master/git-workflows-and-tutorials/workflow-forking.md">Forking Workflow</a></p>
</blockquote>
<p><img src="https://inotes.oss-cn-beijing.aliyuncs.com/git/201812/1009-git-forking-workflow.png" alt="1009-git-forking-workflow.png"></p>
<p>ä¸ºäº†æ¼”ç¤º <code>Forking Workflow</code> çš„å·¥ä½œæµç¨‹ï¼Œæˆ‘å‡†å¤‡äº†ä¸‰ä¸ª <code>github</code> è´¦å·ï¼Œå‡è®¾ä¸ºç»´æŠ¤è€… <code>git</code>ã€å¼€å‘è€… <code>qwert</code> å’Œ <code>poiuy</code>ã€‚</p>
<h3 id="åˆ›å»ºè¿œç¨‹ä»“åº“"><a href="#åˆ›å»ºè¿œç¨‹ä»“åº“" class="headerlink" title="åˆ›å»ºè¿œç¨‹ä»“åº“"></a>åˆ›å»ºè¿œç¨‹ä»“åº“</h3><p>ç»´æŠ¤è€… <code>git</code> åˆ›å»ºä¸€ä¸ªå…¬å¼€çš„è¿œç¨‹ä»“åº“ï¼š</p>
<p><img src="https://inotes.oss-cn-beijing.aliyuncs.com/git/201812/1010-git-forking-create.jpg" alt="1010-git-forking-create.jpg"></p>
<p>å¼€å‘è€… <code>qwert</code> å» <code>Fork</code> ç»´æŠ¤è€… <code>git</code> åˆ›å»ºçš„é¡¹ç›®ï¼Œå½“ç„¶ï¼Œå¼€å‘è€… <code>poiuy</code> ä¹Ÿå’Œ <code>qwert</code> ä¸€æ ·å» <code>Fork</code> ä»“åº“ï¼š</p>
<p><img src="https://inotes.oss-cn-beijing.aliyuncs.com/git/201812/1011-git-forking-repo.jpg" alt="1011-git-forking-repo.jpg"></p>
<p>å®Œæˆä¹‹åï¼Œ<code>qwert</code> å’Œ <code>poiuy</code> ç›¸å½“äºæŠŠè¿œç¨‹ <code>git</code> åˆ›å»ºçš„é¡¹ç›®å…‹éš†åˆ°å„è‡ªçš„è¿œç¨‹ä»“åº“</p>
<h3 id="åŠŸèƒ½å¼€å‘"><a href="#åŠŸèƒ½å¼€å‘" class="headerlink" title="åŠŸèƒ½å¼€å‘"></a>åŠŸèƒ½å¼€å‘</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// qwert æ‹‰å–è¿œç¨‹ä»“åº“ä»£ç åˆ°æœ¬åœ°</span><br><span class="line">$ git <span class="built_in">clone</span> https://github.com/qwert/repo.git</span><br><span class="line">$ git config user.name <span class="string">&quot;qwert&quot;</span></span><br><span class="line">$ git config user.email <span class="string">&quot;qwert@example.com&quot;</span></span><br><span class="line">$ vim README.md</span><br><span class="line"><span class="comment"># repo</span></span><br><span class="line">This is a forking workflow\<span class="string">&#x27;s demo.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">## Develop Feature</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">1. this is written by Quert.</span></span><br><span class="line"><span class="string">$ git add README.md</span></span><br><span class="line"><span class="string">$ git commit -m &quot;Update README.md&quot;</span></span><br><span class="line"><span class="string">$ git push -u origin master</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">// poiuy æ‹‰å–è¿œç¨‹ä»“åº“ä»£ç åˆ°æœ¬åœ°</span></span><br><span class="line"><span class="string">$ git clone https://github.com/poiuy/repo.git</span></span><br><span class="line"><span class="string">$ git config user.name &quot;poiuy&quot;</span></span><br><span class="line"><span class="string">$ git config user.email &quot;poiuy@example.com&quot;</span></span><br><span class="line"><span class="string">$ vim README.md</span></span><br><span class="line"><span class="string"># repo</span></span><br><span class="line"><span class="string">This is a forking workflow\&#x27;</span>s demo.</span><br><span class="line"></span><br><span class="line"><span class="comment">## Develop Feature</span></span><br><span class="line"></span><br><span class="line">1. this is written by Poiuy.</span><br><span class="line">$ git add README.md</span><br><span class="line">$ git commit -m <span class="string">&quot;Update README.md&quot;</span></span><br><span class="line">$ git push -u origin master</span><br></pre></td></tr></table></figure>
<h3 id="å‘èµ·-Pull-Request"><a href="#å‘èµ·-Pull-Request" class="headerlink" title="å‘èµ· Pull Request"></a>å‘èµ· Pull Request</h3><p><img src="https://inotes.oss-cn-beijing.aliyuncs.com/git/201812/1012-git-forking-pr-create.jpg" alt="1012-git-forking-pr-create.jpg"></p>
<p><img src="https://inotes.oss-cn-beijing.aliyuncs.com/git/201812/1013-git-forking-pr-open.jpg" alt="1013-git-forking-pr-open.jpg"></p>
<p><img src="https://inotes.oss-cn-beijing.aliyuncs.com/git/201812/1014-git-forking-pr-show.jpg" alt="1014-git-forking-pr-show.jpg"></p>
<p>å¯ä»¥çœ‹åˆ°å¼€å‘è€… <code>qwert</code> æ²¡æœ‰æƒé™åˆå¹¶ä»£ç ï¼Œæ­¤æ—¶åªæœ‰ç»´æŠ¤è€… <code>git</code> æ‰èƒ½åˆå¹¶ä»£ç ï¼Œç»´æŠ¤è€… <code>git</code> å»åˆå¹¶ä»£ç ï¼š</p>
<p><img src="https://inotes.oss-cn-beijing.aliyuncs.com/git/201812/1015-git-forking-merged.jpg" alt="1015-git-forking-merged.jpg"></p>
<p>å¼€å‘è€… <code>poiuy</code> ä¹Ÿé‡‡å–å’Œ <code>qwert</code> ä¸€æ ·çš„æµç¨‹ï¼Œä½†æ˜¯å½“ä»–ç”³è¯·åˆå¹¶æ—¶ï¼Œå‡ºç°äº†å†²çªï¼Œè¿™æ˜¯é¢„ç§‘ä¸­çš„äº‹ï¼Œå› ä¸ºä¸¤äººåŒæ—¶å¯¹ä¸€ä¸ªæ–‡ä»¶ç›¸åŒçš„åŒºåŸŸè¿›è¡Œäº†ç¼–è¾‘ï¼š</p>
<p><img src="https://inotes.oss-cn-beijing.aliyuncs.com/git/201812/1016-git-forking-conflicts.jpg" alt="1016-git-forking-conflicts.jpg"></p>
<p><code>poiuy</code> å»è§£å†³å†²çªï¼š</p>
<p><img src="https://inotes.oss-cn-beijing.aliyuncs.com/git/201812/1017-git-forking-resolved-conflicts.jpg" alt="1017-git-forking-resolved-conflicts.jpg"></p>
<p><img src="https://inotes.oss-cn-beijing.aliyuncs.com/git/201812/1018-git-forking-mark-resolved.jpg" alt="1018-git-forking-mark-resolved.jpg"></p>
<p><img src="https://inotes.oss-cn-beijing.aliyuncs.com/git/201812/1019-git-forking-resolved-conflicts-merged.jpg" alt="1019-git-forking-resolved-conflicts-merged.jpg"></p>
<p>å¯ä»¥çœ‹åˆ°å¼€å‘è€… <code>poiuy</code> ä¹Ÿæ²¡æœ‰æƒé™åˆå¹¶ä»£ç ï¼Œæ­¤æ—¶ä¹Ÿåªæœ‰ç»´æŠ¤è€… <code>git</code> æ‰èƒ½åˆå¹¶ä»£ç ï¼š</p>
<p><img src="https://inotes.oss-cn-beijing.aliyuncs.com/git/201812/1020-forking-feature-merged.jpg" alt="1020-git-forking-feature-merged.jpg"></p>
<p><img src="https://inotes.oss-cn-beijing.aliyuncs.com/git/201812/1021-forking-close-merged.jpg" alt="1021-forking-close-merged.jpg"></p>
<p><img src="https://inotes.oss-cn-beijing.aliyuncs.com/git/201812/1022-forking-feature.jpg" alt="1022-forking-feature.jpg"></p>
<p>è‡³æ­¤ï¼Œ<code>qwert</code> å’Œ <code>poiuy</code> å¼€å‘çš„æ–°åŠŸèƒ½éƒ½åˆå¹¶åˆ°è¿œç¨‹ç»´æŠ¤è€…çš„ <code>master</code> åˆ†æ”¯ï¼Œè¿™ä¸€é˜¶æ®µçš„å¼€å‘å‘Šä¸€æ®µè½ã€‚</p>
<p><code>Forking</code> å·¥ä½œæµçš„ä½¿ç”¨åœºæ™¯ï¼š</p>
<ul>
<li>å¸¸ç”¨äºå¼€æºè½¯ä»¶</li>
<li>å¼€å‘è€…æœ‰éœ€è¦è¡ç”Ÿå‡ºè‡ªå·±çš„è¡ç”Ÿç‰ˆçš„</li>
<li>å¼€å‘è€…ä¸å›ºå®šï¼Œå¯èƒ½æ˜¯ä»»æ„ä¸€ä¸ªè¿œç¨‹å·¥ä½œè€…</li>
</ul>
<h2 id="Feature-branching-å·¥ä½œæµ"><a href="#Feature-branching-å·¥ä½œæµ" class="headerlink" title="Feature branching å·¥ä½œæµ"></a>Feature branching å·¥ä½œæµ</h2><blockquote>
<p><a href="https://github.com/oldratlee/translations/blob/master/git-workflows-and-tutorials/workflow-feature-branch.md">Feature Branching Workflow</a></p>
</blockquote>
<p><img src="https://inotes.oss-cn-beijing.aliyuncs.com/git/201812/1023-feature-branch-workflow.png" alt="1023-feature-branch-workflow.png"></p>
<p>è¿™ä¸ªæµç¨‹å¤§æ¦‚ç®—æ˜¯ <code>Gitflow</code> çš„ç®€åŒ–ç‰ˆï¼Œä¸å†éœ€è¦å®‰è£…é¢å¤– <code>Git</code> æ’ä»¶ï¼Œè¿™ä¸ªæµç¨‹é…åˆä¸€äº›ä»£ç æ‰˜ç®¡å¹³å°å¯ä»¥ç©çš„é£ç”Ÿæ°´èµ·ã€‚</p>
<h3 id="ç‰¹æ€§åˆ†æ”¯ä¸‹æ‹‰å–è¿œç¨‹ä»“åº“"><a href="#ç‰¹æ€§åˆ†æ”¯ä¸‹æ‹‰å–è¿œç¨‹ä»“åº“" class="headerlink" title="ç‰¹æ€§åˆ†æ”¯ä¸‹æ‹‰å–è¿œç¨‹ä»“åº“"></a>ç‰¹æ€§åˆ†æ”¯ä¸‹æ‹‰å–è¿œç¨‹ä»“åº“</h3><p>åŠŸèƒ½åˆ†æ”¯å·¥ä½œæµä¸­æˆ‘ä»¬ä»ç„¶ä½¿ç”¨ä¹‹å‰åˆ›å»ºçš„ä¸­å¤®ä»“åº“ï¼Œå¹¶ä¸” <code>master</code> åˆ†æ”¯è¿˜æ˜¯ä»£è¡¨äº†æ­£å¼é¡¹ç›®çš„å†å²ã€‚è¿™ç§å·¥ä½œæµä¸æ˜¯ç›´æ¥æäº¤æœ¬åœ°å†å²åˆ°å„è‡ªçš„æœ¬åœ° <code>master</code> åˆ†æ”¯ï¼Œå¼€å‘è€…æ¯æ¬¡åœ¨å¼€å§‹æ–°åŠŸèƒ½å‰å…ˆåŸºäº <code>master</code> åˆ›å»ºä¸€ä¸ªæ–°åˆ†æ”¯ï¼Œç»™åˆ†æ”¯èµ·ä¸€ä¸ªæè¿°æ€§çš„åç§°ï¼Œè¿™æ ·åˆ†æ”¯ç”¨é€”å°±æ¯”è¾ƒæ˜æ˜¾ã€‚</p>
<p>å‡†å¤‡å·¥ä½œè¿˜æ˜¯è€å¥—è·¯</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// qwert å·¥ä½œå‡†å¤‡</span><br><span class="line">$ ssh qwert@host &amp;&amp; <span class="built_in">cd</span> ~ &amp;&amp; git <span class="built_in">clone</span> ssh://git@host/home/git/repository/repo.git</span><br><span class="line">$ git config user.name <span class="string">&quot;qwert&quot;</span></span><br><span class="line">$ git config user.email <span class="string">&quot;qwert@example.com&quot;</span></span><br><span class="line"></span><br><span class="line">// poiuy å·¥ä½œå‡†å¤‡</span><br><span class="line">$ ssh poiuy@host &amp;&amp; <span class="built_in">cd</span> ~ &amp;&amp; git <span class="built_in">clone</span> ssh://git@host/home/git/repository/repo.git</span><br><span class="line">$ git config user.name <span class="string">&quot;poiuy&quot;</span></span><br><span class="line">$ git config user.email <span class="string">&quot;poiuy@example.com&quot;</span></span><br></pre></td></tr></table></figure>
<h3 id="åŠŸæ€§åˆ†æ”¯ä¸‹å¼€å‘é˜¶æ®µ"><a href="#åŠŸæ€§åˆ†æ”¯ä¸‹å¼€å‘é˜¶æ®µ" class="headerlink" title="åŠŸæ€§åˆ†æ”¯ä¸‹å¼€å‘é˜¶æ®µ"></a>åŠŸæ€§åˆ†æ”¯ä¸‹å¼€å‘é˜¶æ®µ</h3><p>å¼€å‘è€… <code>qwert</code>ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// åˆ›å»ºåŠŸèƒ½åˆ†æ”¯</span><br><span class="line">$ git checkout -b dev-user-menu</span><br><span class="line">$ vim README.md</span><br><span class="line">1. this is the second commit.</span><br><span class="line">2. poiuy</span><br><span class="line">3. qwert</span><br><span class="line">4. qwert feature start.</span><br><span class="line">5. poiuy feature start.</span><br><span class="line">6. qwert another feature start.</span><br><span class="line">7. poiuy tract release v1.0</span><br><span class="line">8. qwert hotfix start.</span><br><span class="line">9. qwert develop user menu.</span><br><span class="line">$ git add README.md</span><br><span class="line">$ git commit -m <span class="string">&quot;Develop user menu.&quot;</span></span><br><span class="line">$ git push -u origin master</span><br></pre></td></tr></table></figure>
<p>å¼€å‘è€… <code>poiuy</code>ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// åˆ›å»ºåŠŸèƒ½åˆ†æ”¯</span><br><span class="line">$ git checkout -b dev-user-auth</span><br><span class="line">$ vim README.md</span><br><span class="line">1. this is the second commit.</span><br><span class="line">2. poiuy</span><br><span class="line">3. qwert</span><br><span class="line">4. qwert feature start.</span><br><span class="line">5. poiuy feature start.</span><br><span class="line">6. qwert another feature start.</span><br><span class="line">7. poiuy tract release v1.0</span><br><span class="line">8. qwert hotfix start.</span><br><span class="line">9. poiuy develop user auth.</span><br><span class="line">$ git add README.md</span><br><span class="line">$ git commit -m <span class="string">&quot;Develop user auth&quot;</span></span><br><span class="line">$ git push -u origin dev-user-auth</span><br></pre></td></tr></table></figure>
<p>ä¸€æ®µæ—¶é—´ä»¥åï¼Œ<code>qwert</code> å’Œ <code>poiuy</code> éƒ½å£°ç§°æŠŠå„ä¸ªè´Ÿè´£çš„åŠŸèƒ½å¼€å‘å®Œæˆï¼Œå¹¶æäº¤åˆ°è¿œç¨‹ä»“åº“äº†</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// å‘å¸ƒå¼€å‘è€… qwert çš„åŠŸèƒ½åˆ°æµ‹è¯•ç¯å¢ƒæµ‹è¯•ï¼Œæµ‹è¯•é€šè¿‡ååˆå¹¶åˆ° master åˆ†æ”¯</span><br><span class="line">$ git checkout master</span><br><span class="line">$ git pull <span class="comment"># æ‹‰å–å…¶å®ƒå¼€å‘è€…çš„æ›´æ–°</span></span><br><span class="line">remote: Counting objects: 5, <span class="keyword">done</span>.</span><br><span class="line">remote: Compressing objects: 100% (2/2), <span class="keyword">done</span>.</span><br><span class="line">remote: Total 3 (delta 1), reused 0 (delta 0)</span><br><span class="line">Unpacking objects: 100% (3/3), <span class="keyword">done</span>.</span><br><span class="line">From ssh://host/home/git/repository/repo</span><br><span class="line"> * [new branch]      dev-user-auth -&gt; origin/dev-user-auth</span><br><span class="line">Already up-to-date.</span><br><span class="line">$ git checkout dev-user-menu</span><br><span class="line">$ git rebase master <span class="comment"># ç”¨ rebase åˆå¹¶ä¸»å¹²çš„ä¿®æ”¹ï¼Œå¦‚æœæœ‰å†²çªåœ¨æ­¤æ—¶è§£å†³</span></span><br><span class="line">$ git checkout master</span><br><span class="line"></span><br><span class="line">// å°† qwert æ–°å¼€å‘çš„åŠŸèƒ½åˆå¹¶åˆ° master åˆ†æ”¯</span><br><span class="line">$ git merge dev-user-menu</span><br><span class="line">Updating 40e19f1..4f92cff</span><br><span class="line">Fast-forward</span><br><span class="line"> README.md | 1 +</span><br><span class="line"> 1 file changed, 1 insertion(+)</span><br><span class="line">$ git push origin master <span class="comment"># å°†åˆå¹¶åçš„æäº¤åˆ°è¿œç¨‹ master åˆ†æ”¯</span></span><br><span class="line"></span><br><span class="line">// å¼€å‘è€… poiuy çš„ä¹Ÿé€šè¿‡æµ‹è¯•ï¼Œéœ€è¦å°†ä»£ç åˆå¹¶åˆ° master åˆ†æ”¯</span><br><span class="line">$ git checkout master</span><br><span class="line">Switched to branch <span class="string">&#x27;master&#x27;</span></span><br><span class="line">Your branch is behind <span class="string">&#x27;origin/master&#x27;</span> by 1 commit, and can be fast-forwarded.</span><br><span class="line">  (use <span class="string">&quot;git pull&quot;</span> to update your <span class="built_in">local</span> branch)</span><br><span class="line">$ git pull</span><br><span class="line">From ssh://host/home/git/repository/repo</span><br><span class="line">   40e19f1..4f92cff  master     -&gt; origin/master</span><br><span class="line">Updating 40e19f1..4f92cff</span><br><span class="line">Fast-forward</span><br><span class="line"> README.md | 1 +</span><br><span class="line"> 1 file changed, 1 insertion(+)</span><br><span class="line"></span><br><span class="line">// åˆ‡æ¢åˆ°åŠŸèƒ½åˆ†æ”¯ï¼Œç”¨ rebase åˆå¹¶ä¸»å¹²çš„ä¿®æ”¹ï¼Œä¹‹å‰ç”±äº qwert å’Œ poiuy ç¼–è¾‘åŒä¸€ä¸ªåŒºåŸŸï¼Œæ— ç–‘ä¼šäº§ç”Ÿå†²çª</span><br><span class="line">$ git checkout dev-user-auth</span><br><span class="line">$ git rebase master <span class="comment"># ç”¨ rebase åˆå¹¶ä¸»å¹²çš„ä¿®æ”¹ï¼Œå¦‚æœæœ‰å†²çªåœ¨æ­¤æ—¶è§£å†³</span></span><br><span class="line">First, rewinding head to replay your work on top of it...</span><br><span class="line">Applying: Develop user auth</span><br><span class="line">Using index info to reconstruct a base tree...</span><br><span class="line">M  README.md</span><br><span class="line">Falling back to patching base and 3-way merge...</span><br><span class="line">Auto-merging README.md</span><br><span class="line">CONFLICT (content): Merge conflict <span class="keyword">in</span> README.md</span><br><span class="line">Failed to merge <span class="keyword">in</span> the changes.</span><br><span class="line">Patch failed at 0001 Develop user auth</span><br><span class="line">The copy of the patch that failed is found <span class="keyword">in</span>:</span><br><span class="line">   /home/poiuy/repo/.git/rebase-apply/patch</span><br><span class="line"></span><br><span class="line">When you have resolved this problem, run <span class="string">&quot;git rebase --continue&quot;</span>.</span><br><span class="line">If you prefer to skip this patch, run <span class="string">&quot;git rebase --skip&quot;</span> instead.</span><br><span class="line">To check out the original branch and stop rebasing, run <span class="string">&quot;git rebase --abort&quot;</span>.</span><br><span class="line">$ git rebase --<span class="built_in">continue</span> <span class="comment"># åŠ¨ç”¨ rebase --continue å‘½ä»¤é€ä¸ªä¿®å¤å†²çªæ–‡ä»¶ï¼Œç›´åˆ° No rebase in progress? ä¸ºæ­¢</span></span><br><span class="line">$ git add README.md</span><br><span class="line">$ git commit -m <span class="string">&quot;Conflict resolution&quot;</span></span><br><span class="line">$ git push origin dev-user-auth</span><br><span class="line">Counting objects: 10, <span class="keyword">done</span>.</span><br><span class="line">Compressing objects: 100% (4/4), <span class="keyword">done</span>.</span><br><span class="line">Writing objects: 100% (6/6), 679 bytes | 0 bytes/s, <span class="keyword">done</span>.</span><br><span class="line">Total 6 (delta 1), reused 0 (delta 0)</span><br><span class="line">To ssh://git@host/home/git/repository/repo.git</span><br><span class="line">   ccbab61..f0aea38  dev-user-auth -&gt; dev-user-auth</span><br><span class="line"></span><br><span class="line">// å¼€å‘è€… poiuy åˆ‡æ¢åˆ° master åˆ†æ”¯ï¼Œå°†å†²çªåçš„ä¿®å¤åˆå¹¶å› master</span><br><span class="line">$ git checkou master</span><br><span class="line">$ git merge dev-user-auth</span><br><span class="line">Updating 4f92cff..f0aea38</span><br><span class="line">Fast-forward</span><br><span class="line"> README.md | 5 +++++</span><br><span class="line"> 1 file changed, 5 insertions(+)</span><br><span class="line">$ git push origin master</span><br><span class="line"></span><br><span class="line">// æ­¤æ—¶ qwert å†åˆ‡æ¢åˆ° master è¿›è¡Œæ‹‰å–ï¼Œè‡³æ­¤ä¸¤ä¸ªå¼€å‘è€…çš„å„ä¸ªåŠŸèƒ½éƒ½åˆå¹¶åˆ° master åˆ†æ”¯äº†ï¼Œå¯ä»¥å‘å¸ƒ release äº†</span><br><span class="line">$ git checkou master</span><br><span class="line">$ git pull</span><br><span class="line">remote: Counting objects: 10, <span class="keyword">done</span>.</span><br><span class="line">remote: Compressing objects: 100% (4/4), <span class="keyword">done</span>.</span><br><span class="line">remote: Total 6 (delta 1), reused 0 (delta 0)</span><br><span class="line">Unpacking objects: 100% (6/6), <span class="keyword">done</span>.</span><br><span class="line">From ssh://localhost/home/git/repository/repo</span><br><span class="line">   4f92cff..f0aea38  master     -&gt; origin/master</span><br><span class="line">   ccbab61..f0aea38  dev-user-auth -&gt; origin/dev-user-auth</span><br><span class="line">Updating 4f92cff..f0aea38</span><br><span class="line">Fast-forward</span><br><span class="line"> README.md | 5 +++++</span><br><span class="line"> 1 file changed, 5 insertions(+)</span><br></pre></td></tr></table></figure>
<p>æ˜¾è€Œæ˜“è§ï¼Œè¿™ä¸ªåˆ†æ”¯åªéœ€è¦ç»´æŠ¤ <code>master</code> åˆ†æ”¯å°±å¯ä»¥äº†ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨åˆå¹¶åˆ° <code>master</code> åˆ†æ”¯ä¹‹å‰ï¼Œéœ€è¦ç¡®ä¿å¯¹åŠŸèƒ½è¿›è¡Œå……åˆ†çš„æµ‹è¯•ï¼Œå› ä¸º <code>master</code> åˆ†æ”¯æ˜¯å¯ä»¥éšæ—¶ <code>release</code> çš„ï¼Œè€Œå‘å¸ƒå’Œç›¸å…³çš„è¡¥ä¸éƒ½åŸºäº <code>master</code> åˆ†æ”¯ï¼Œæ‰€ä»¥åœ¨åˆ†æ”¯è¾¾åˆ°ç”Ÿäº§è¦æ±‚åï¼Œå°±è¦ç«‹å³åˆå¹¶åˆ° <code>master</code> åˆ†æ”¯ï¼Œåˆ é™¤åŠŸèƒ½åˆ†æ”¯ï¼Œå†åŸºäº <code>master</code> åˆ†æ”¯åˆ›å»ºæ–°çš„åˆ†æ”¯è¿›è¡Œæ–°ä¸€è½®çš„å¼€å‘ã€‚å½“ç„¶ï¼Œè¿™ä¸ªæµç¨‹æœ‰ä¸ªå¼Šç«¯å°±æ˜¯ï¼Œå½“æˆ‘ä»¬ <code>Code Review</code> ä¹‹åï¼Œå‡†å¤‡åœ¨ <code>master</code> é‡Šæ”¾ <code>release</code> æ—¶ï¼Œåˆæœ‰äººå‘ <code>master</code> åˆ†æ”¯æäº¤äº†æ–°çš„å®ŒæˆåŠŸèƒ½ï¼Œæˆ–è€…æœ‰äº›å…¬å¸æŒ‡å®šæ—¥æœŸæ—¶é—´å‘å¸ƒï¼Œç­‰åˆ°æŒ‡å®šçš„é‚£ä¸ªæ—¶é—´ï¼Œ<code>master</code> åˆ†æ”¯å·²ç»æœ‰äº†æ–°çš„åˆå¹¶è€Œæ‰“ä¹±æœ€åˆçš„å‘å¸ƒæ„å›¾ã€‚å› ä¸ºè¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬çš„æœ¬æ„æ˜¯æŠŠä¸Šä¸€ä¸ªåŠŸèƒ½å®Œå…¨å‘å¸ƒåå†è¿›è¡Œä¸‹ä¸€ä¸ªç‰ˆæœ¬çš„å‘å¸ƒã€‚ä¸ºäº†åº”ä»˜è¿™ç§æƒ…å†µï¼Œå°±éœ€è¦åœ¨ <code>master</code> åˆ†æ”¯ä»¥å¤–ï¼Œæ–°å»ºä¸€ä¸ª <code>production</code> åˆ†æ”¯æ¥è·Ÿè¸ªçº¿ä¸Šç‰ˆæœ¬ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨ <code>git</code> è¿™å„¿æ²¡æœ‰ä»€ä¹ˆæ˜¯ä¸€ä¸ªåˆ†æ”¯æä¸å®šçš„ï¼Œå¦‚æœæœ‰ï¼Œå“ªå°±å†åˆ›å»ºä¸€ä¸ªåˆ†æ”¯ã€‚</p>
<p>åŠŸèƒ½åˆ†æ”¯å·¥ä½œæµçš„ä½¿ç”¨åœºæ™¯ï¼š</p>
<ul>
<li>å¼€å‘å›¢é˜Ÿç›¸å¯¹å›ºå®šï¼Œè€Œä¸”æœ‰ä¸€å®šè§„æ¨¡</li>
<li>å¸¸å¸¸æœ‰å¤šä¸ªåŠŸèƒ½ï¼Œå¤šä¸ªé—®é¢˜å¹¶è¡Œå¼€å‘</li>
<li>å¯¹ä»£ç å®¡æŸ¥æœ‰è¾ƒé«˜è¦æ±‚</li>
<li>æ›´æ³¨é‡å›¢é˜Ÿæ•ˆç‡</li>
</ul>
<h3 id="é€šè¿‡-Pull-Requests-è®¨è®º"><a href="#é€šè¿‡-Pull-Requests-è®¨è®º" class="headerlink" title="é€šè¿‡ Pull Requests è®¨è®º"></a>é€šè¿‡ Pull Requests è®¨è®º</h3><blockquote>
<p>ä¸€æ—¦æŸä¸ªå¼€å‘è€…å®Œæˆä¸€ä¸ªåŠŸèƒ½ï¼Œä¸æ˜¯ç«‹å³åˆå¹¶åˆ° <code>master</code>ï¼Œè€Œæ˜¯ <code>push</code> åˆ°è¿œç¨‹ä»“åº“çš„åŠŸèƒ½åˆ†æ”¯ä¸Šå¹¶å‘èµ·ä¸€ä¸ª <code>Pull Request</code> è¯·æ±‚å»åˆå¹¶ä¿®æ”¹åˆ° <code>master</code>ã€‚åœ¨ä¿®æ”¹æˆä¸ºä¸»å¹²ä»£ç å‰ï¼Œè¿™è®©å…¶å®ƒçš„å¼€å‘è€…æœ‰æœºä¼šå…ˆå» <code>Review</code> å˜æ›´ã€‚</p>
</blockquote>
<p><code>Pull Request</code> å¯ä»¥å’Œ <code>feature</code> åˆ†æ”¯å·¥ä½œæµã€<code>Gitflow</code> å·¥ä½œæµæˆ–è€… <code>Forking</code> å·¥ä½œæµä¸€èµ·ä½¿ç”¨ã€‚ä½† <code>Pull Request</code> éœ€è¦ä¸¤ä¸ªä¸åŒçš„åˆ†æ”¯æˆ–æ˜¯ä¸¤ä¸ªä¸åŒçš„ä»“åº“ï¼Œå› æ­¤å®ƒä»¬ä¸èƒ½å’Œä¸­å¿ƒåŒ–çš„å·¥ä½œæµä¸€èµ·ä½¿ç”¨ã€‚åœ¨ä¸åŒçš„å·¥ä½œæµä¸­ä½¿ç”¨ <code>Pull Request</code> æœ‰äº›ä¸åŒï¼Œä½†å¤§è‡´çš„æµç¨‹å¦‚ä¸‹ï¼š</p>
<ul>
<li>å¼€å‘è€…åœ¨ä»–ä»¬çš„æœ¬åœ°ä»“åº“ä¸­ä¸ºæŸä¸ªåŠŸèƒ½åˆ›å»ºä¸€ä¸ªä¸“é—¨çš„åˆ†æ”¯</li>
<li>å¼€å‘è€…å°†åˆ†æ”¯æ¨é€åˆ°å…¬å…±çš„ <code>GitHub</code> ä»“åº“</li>
<li>å¼€å‘è€…ç”¨ <code>GitHub</code> å‘èµ·ä¸€ä¸ª <code>Pull Request</code></li>
<li>å…¶ä½™çš„å›¢é˜Ÿæˆå‘˜å®¡æŸ¥ä»£ç ï¼Œè®¨è®ºå¹¶ä¸”åšå‡ºä¿®æ”¹</li>
<li>é¡¹ç›®ç»´æŠ¤è€…å°†è¿™ä¸ªåŠŸèƒ½å¹¶å…¥å®˜æ–¹çš„ä»“åº“ï¼Œç„¶åå…³é—­è¿™ä¸ª <code>Pull Request</code></li>
</ul>
<p>ä¸ºäº†æ¼”ç¤ºè¿™ä¸ªåŠŸèƒ½ï¼Œæˆ‘æ³¨å†Œäº†ä¸¤ä¸ª <code>GitHub</code> æ¥è¯´æ˜è¿™ä¸ªæƒ…å†µï¼Œå‡è®¾ <code>qwert</code> å’Œ <code>poiuy</code> æ˜¯ä¸¤ä¸ª <code>GitHub</code> ç”¨æˆ·ï¼Œå¹¶ä¸”å·²ç»æ³¨å†Œ</p>
<ul>
<li>åˆ›å»ºé¡¹ç›®</li>
</ul>
<p><code>qwert</code> åˆ›å»ºä¸€ä¸ªé¡¹ç›®</p>
<p><img src="https://inotes.oss-cn-beijing.aliyuncs.com/git/201812/1024-fb-pr-pro-create.jpg" alt="1024-fb-pr-pro-create.jpg"></p>
<p>éšå <code>qwert</code> é‚€è¯· <code>poiuy</code> åŠ å…¥</p>
<p><img src="https://inotes.oss-cn-beijing.aliyuncs.com/git/201812/1025-fb-pr-collaborator.jpg" alt="1025-fb-pr-collaborator.jpg"></p>
<p><code>poiuy</code> æ¥å—é‚€è¯·</p>
<p><img src="https://inotes.oss-cn-beijing.aliyuncs.com/git/201812/1026-fb-pr-invitation.jpg" alt="1026-fb-pr-invitation.jpg"></p>
<ul>
<li>æ‹‰å–é¡¹ç›®</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// qwert æ‹‰å–é¡¹ç›®</span><br><span class="line">$ git <span class="built_in">clone</span> https://github.com/imajinyun/test.git</span><br><span class="line"></span><br><span class="line">// qwert è®¾ç½®ç”¨æˆ·åé‚®ç®±</span><br><span class="line">$ <span class="built_in">cd</span> <span class="built_in">test</span></span><br><span class="line">$ git config user.name <span class="string">&quot;qwert&quot;</span></span><br><span class="line">$ git config user.email <span class="string">&quot;qwert@example.com&quot;</span></span><br><span class="line"></span><br><span class="line">// qwert åˆå§‹åŒ–é¡¹ç›®</span><br><span class="line">$ <span class="built_in">echo</span> <span class="string">&quot;1. initialize project.&quot;</span> &gt;&gt; README.md</span><br><span class="line">$ git add README.md</span><br><span class="line">$ git commit -m <span class="string">&quot;Add README.md&quot;</span></span><br><span class="line">$ git push -u origin master</span><br><span class="line"></span><br><span class="line">// poiuy æ‹‰å–é¡¹ç›®</span><br><span class="line">$ git <span class="built_in">clone</span> https://github.com/imajinyun/test.git</span><br><span class="line"></span><br><span class="line">// poiuy è®¾ç½®ç”¨æˆ·åé‚®ç®±</span><br><span class="line">$ <span class="built_in">cd</span> <span class="built_in">test</span></span><br><span class="line">$ git config user.name <span class="string">&quot;poiuy&quot;</span></span><br><span class="line">$ git config user.email <span class="string">&quot;poiuy@example.com&quot;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>åŠŸèƒ½å¼€å‘</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// qwert å¼€å‘æŸä¸ªåŠŸèƒ½</span><br><span class="line">$ git pull</span><br><span class="line">$ git checkou -b dev-user-menu</span><br><span class="line">$ vim README.md</span><br><span class="line">1. initialize project.</span><br><span class="line">2. qwert develop user menu.</span><br><span class="line">$ git commit -m <span class="string">&quot;Develop user menu.&quot;</span></span><br><span class="line">$ git push -u origin dev-user-menu</span><br><span class="line"></span><br><span class="line">// poiuy å¼€å‘æŸä¸ªåŠŸèƒ½</span><br><span class="line">$ git pull</span><br><span class="line">$ git checkou -b dev-user-auth</span><br><span class="line">$ vim README.md</span><br><span class="line">1. initialize project.</span><br><span class="line">2. poiuy develop user auth.</span><br><span class="line">$ git commit -m <span class="string">&quot;Develop user auth.&quot;</span></span><br><span class="line">$ git push -u origin dev-user-auth</span><br></pre></td></tr></table></figure>
<ul>
<li>å„è‡ªå‘èµ· <code>Pull Request</code></li>
</ul>
<p><img src="https://inotes.oss-cn-beijing.aliyuncs.com/git/201812/1027-fb-pr-new.jpg" alt="1027-fb-pr-new.jpg"></p>
<p><img src="https://inotes.oss-cn-beijing.aliyuncs.com/git/201812/1028-fb-pr-finish.jpg" alt="1028-fb-pr-finish.jpg"></p>
<p><img src="https://inotes.oss-cn-beijing.aliyuncs.com/git/201812/1029-fb-pr-open.jpg" alt="1029-fb-pr-open.jpg"></p>
<ul>
<li><code>qwert</code> å¯¹å‘èµ·çš„ <code>Pull Request</code> è¿›è¡Œåˆå¹¶</li>
</ul>
<p><img src="https://inotes.oss-cn-beijing.aliyuncs.com/git/201812/1030-fb-pr-merged-by-qwert.jpg" alt="1030-fb-pr-merged-by-qwert.jpg"></p>
<ul>
<li><code>poiuy</code> å¯¹å‘èµ·çš„ <code>Pull Request</code> è¿›è¡Œåˆå¹¶</li>
</ul>
<p><img src="https://inotes.oss-cn-beijing.aliyuncs.com/git/201812/1031-fb-pr-resolved-by-poiuy.jpg" alt="1031-fb-pr-resolved-by-poiuy.jpg"></p>
<p>è¿™æ—¶æˆ‘ä»¬å‘ç°å†²çªäº†ï¼Œéœ€è¦å…ˆè§£å†³å†²çªå†åˆå¹¶ï¼š</p>
<p><img src="https://inotes.oss-cn-beijing.aliyuncs.com/git/201812/1032-fb-pr-mark-resolved.jpg" alt="1032-fb-pr-mark-resolved.jpg"></p>
<p><code>poiuy</code> è§£å†³å®Œå†²çªè¿›è¡Œåˆå¹¶ï¼š</p>
<p><img src="https://inotes.oss-cn-beijing.aliyuncs.com/git/201812/1033-fb-pr-resolved-conflicts.jpg" alt="1033-fb-pr-resolved-conflicts.jpg"></p>
<p><img src="https://inotes.oss-cn-beijing.aliyuncs.com/git/201812/1034-fb-pr-resolved-conflicts-merged.jpg" alt="1034-fb-pr-resolved-conflicts-merged.jpg"></p>
<p>ç»ˆäºä¸¤ä¸ªåŠŸèƒ½éƒ½åˆå¹¶åˆ° <code>master</code> åˆ†æ”¯äº†ã€‚</p>
<p><img src="https://inotes.oss-cn-beijing.aliyuncs.com/git/201812/1035-fb-pr-master.jpg" alt="1035-fb-pr-master.jpg"></p>
<p>è‡³æ­¤ <code>Pull Request</code> ç®—æ˜¯å®Œç»“äº†ï¼Œè‡³äºå…¶å®ƒä¸¤ä¸ªå·¥ä½œæµç¨‹ä¸Šéƒ½å·®ä¸å¤šï¼Œå°±ä¸å†èµ˜è¿°äº†ã€‚</p>
<p>ç”¨ä¸€ç¯‡æ–‡ç« è¯´æ¸…æ¥š <code>Git Workflow</code> æ˜¯ä¸å¤ªç°å®çš„ï¼Œæˆ‘å­å“§å­å“§çš„å†™äº†ä¸€å †ï¼Œä»…ä»£è¡¨æˆ‘å¯¹ <code>Git Workflow</code> çš„ç†è§£å’Œä½¿ç”¨æ–¹æ³•ã€‚å¦‚æœä½ æœ‰æ›´å¥½çš„æ–¹å¼ï¼Œå’±ä»¬ç•™è¨€åŒºè§ã€‚</p>
]]></content>
      <categories>
        <category>git</category>
      </categories>
      <tags>
        <tag>git</tag>
      </tags>
  </entry>
  <entry>
    <title>Go è¿æ¥å­—ç¬¦ä¸²</title>
    <url>/2021/07/25/go-concat-string/</url>
    <content><![CDATA[<p>ğŸ¹ Go ä¸­è¿æ¥å­—ç¬¦ä¸²çš„æ–¹æ³•æœ‰å¾ˆå¤šç§ï¼Œå…¶å®æŒæ¡ä¸€ä¸¤ç§è¾ƒä¸ºé«˜æ•ˆçš„æ–¹æ³•å°±è¶³å¤Ÿäº†ï¼Œå…¶å®ƒæƒå½“çœ‹çƒ­é—¹ã€‚</p>
<span id="more"></span>
<ul>
<li><a href="https://imajinyun.xyz/2021/06/26/go-get-started/">Go èµ·æ­¥</a></li>
<li><a href="https://imajinyun.xyz/2021/07/02/go-data-type/">Go æ•°æ®ç±»å‹</a></li>
<li><a href="https://imajinyun.xyz/2021/07/11/go-date-time/">Go æ—¥æœŸæ—¶é—´</a></li>
<li><a href="https://imajinyun.xyz/2021/07/14/go-random-number/">Go éšæœºæ•°</a></li>
<li><a href="https://imajinyun.xyz/2021/07/16/go-unit-test/">Go å•å…ƒæµ‹è¯•</a></li>
<li><a href="https://imajinyun.xyz/2021/07/17/go-benchmark-test/">Go åŸºå‡†æµ‹è¯•</a></li>
<li><a href="https://imajinyun.xyz/2021/07/22/go-other-test/">Go å…¶å®ƒæµ‹è¯•</a></li>
<li><a href="https://imajinyun.xyz/2021/07/24/go-correct-posture/">Go æ­£ç¡®å§¿åŠ¿</a></li>
<li><strong>Go è¿æ¥å­—ç¬¦ä¸²</strong></li>
</ul>
<h2 id="å‡ ç§è¿æ¥æ–¹å¼"><a href="#å‡ ç§è¿æ¥æ–¹å¼" class="headerlink" title="å‡ ç§è¿æ¥æ–¹å¼"></a>å‡ ç§è¿æ¥æ–¹å¼</h2><h3 id="Concat"><a href="#Concat" class="headerlink" title="Concat"></a>Concat</h3><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> hello</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;testing&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">=== RUN   TestStringConcat</span></span><br><span class="line"><span class="comment">    /Users/xxx/Codes/go/src/github.com/xxx/hello/hello_test.go:20: Hello World!</span></span><br><span class="line"><span class="comment">--- PASS: TestStringConcat (0.00s)</span></span><br><span class="line"><span class="comment">PASS</span></span><br><span class="line"><span class="comment">ok  	example.com/hello	0.014s</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestStringConcat</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line">  s := <span class="string">&quot;Hello &quot;</span></span><br><span class="line">  s += <span class="string">&quot;World!&quot;</span></span><br><span class="line">  t.Log(s)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Sprintf"><a href="#Sprintf" class="headerlink" title="Sprintf"></a>Sprintf</h3><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> hello</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">  <span class="string">&quot;fmt&quot;</span></span><br><span class="line">  <span class="string">&quot;testing&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">=== RUN   TestStringSprintf</span></span><br><span class="line"><span class="comment">    /Users/xxx/Codes/go/src/github.com/xxx/hello/hello_test.go:18: Hello World!</span></span><br><span class="line"><span class="comment">--- PASS: TestStringSprintf (0.00s)</span></span><br><span class="line"><span class="comment">PASS</span></span><br><span class="line"><span class="comment">ok  	example.com/hello	0.010s</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestStringSprintf</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line">  s := <span class="string">&quot;Hello &quot;</span></span><br><span class="line">  s = fmt.Sprintf(<span class="string">&quot;%s%s&quot;</span>, s, <span class="string">&quot;World!&quot;</span>)</span><br><span class="line">  t.Log(s)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Join"><a href="#Join" class="headerlink" title="Join"></a>Join</h3><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> hello</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">  <span class="string">&quot;strings&quot;</span></span><br><span class="line">  <span class="string">&quot;testing&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">=== RUN   TestStringJoin</span></span><br><span class="line"><span class="comment">    /Users/xxx/Codes/go/src/github.com/xxx/hello/hello_test.go:18: Hello World!</span></span><br><span class="line"><span class="comment">--- PASS: TestStringJoin (0.00s)</span></span><br><span class="line"><span class="comment">PASS</span></span><br><span class="line"><span class="comment">ok  	example.com/hello	0.008s</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestStringJoin</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line">  s := <span class="string">&quot;Hello &quot;</span></span><br><span class="line">  s = strings.Join([]<span class="keyword">string</span>&#123;s, <span class="string">&quot;World!&quot;</span>&#125;, <span class="string">&quot;&quot;</span>)</span><br><span class="line">  t.Log(s)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Buffer-Write"><a href="#Buffer-Write" class="headerlink" title="Buffer Write"></a>Buffer Write</h3><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> hello</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">  <span class="string">&quot;bytes&quot;</span></span><br><span class="line">  <span class="string">&quot;testing&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">=== RUN   TestBufferWrite</span></span><br><span class="line"><span class="comment">    /Users/xxx/Codes/go/src/github.com/xxx/hello/hello_test.go:20: Hello World!</span></span><br><span class="line"><span class="comment">--- PASS: TestBufferWrite (0.00s)</span></span><br><span class="line"><span class="comment">PASS</span></span><br><span class="line"><span class="comment">ok  	example.com/hello	0.010s</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestBufferWrite</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line">  buf := <span class="built_in">new</span>(bytes.Buffer)</span><br><span class="line">  buf.WriteString(<span class="string">&quot;Hello &quot;</span>)</span><br><span class="line">  buf.WriteString(<span class="string">&quot;World!&quot;</span>)</span><br><span class="line">  s := buf.String()</span><br><span class="line">  t.Log(s)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Bytes-Append"><a href="#Bytes-Append" class="headerlink" title="Bytes Append"></a>Bytes Append</h3><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> hello</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;testing&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">=== RUN   TestBytesAppend</span></span><br><span class="line"><span class="comment">    /Users/xxx/Codes/go/src/github.com/xxx/hello/hello_test.go:18: Hello</span></span><br><span class="line"><span class="comment">--- PASS: TestBytesAppend (0.00s)</span></span><br><span class="line"><span class="comment">PASS</span></span><br><span class="line"><span class="comment">ok  	example.com/hello</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestBytesAppend</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line">  <span class="keyword">var</span> b []<span class="keyword">byte</span></span><br><span class="line">  s := <span class="string">&quot;Hello &quot;</span></span><br><span class="line">  b = <span class="built_in">append</span>(b, <span class="string">&quot;World!&quot;</span>...)</span><br><span class="line">  t.Log(<span class="keyword">string</span>(s))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Copy"><a href="#Copy" class="headerlink" title="Copy"></a>Copy</h3><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> hello</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;testing&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">=== RUN   TestStringCopy</span></span><br><span class="line"><span class="comment">    /Users/xxx/Codes/go/src/github.com/xxx/hello/hello_test.go:18: Hello World!</span></span><br><span class="line"><span class="comment">--- PASS: TestStringCopy (0.00s)</span></span><br><span class="line"><span class="comment">PASS</span></span><br><span class="line"><span class="comment">ok  	example.com/hello	(cached)</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestStringCopy</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line">  b := <span class="built_in">make</span>([]<span class="keyword">byte</span>, <span class="number">0</span>)</span><br><span class="line">  b = mycopy(b, <span class="string">&quot;Hello &quot;</span>)</span><br><span class="line">  b = mycopy(b, <span class="string">&quot;World!&quot;</span>)</span><br><span class="line">  t.Log(<span class="keyword">string</span>(b))</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">mycopy</span><span class="params">(b []<span class="keyword">byte</span>, s <span class="keyword">string</span>)</span> []<span class="title">byte</span></span> &#123;</span><br><span class="line">  n := <span class="built_in">len</span>(b)</span><br><span class="line">  <span class="keyword">if</span> n+<span class="built_in">len</span>(s) &gt; <span class="built_in">cap</span>(b) &#123;</span><br><span class="line">    t := <span class="built_in">make</span>([]<span class="keyword">byte</span>, <span class="number">2</span>*<span class="built_in">cap</span>(b)+<span class="built_in">len</span>(s))</span><br><span class="line">    <span class="built_in">copy</span>(t, b)</span><br><span class="line">    b = t</span><br><span class="line">  &#125;</span><br><span class="line">  b = b[<span class="number">0</span> : n+<span class="built_in">len</span>(s)]</span><br><span class="line">  <span class="built_in">copy</span>(b[n:], s)</span><br><span class="line">  <span class="keyword">return</span> b</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="String-Builder"><a href="#String-Builder" class="headerlink" title="String Builder"></a>String Builder</h3><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> hello</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">  <span class="string">&quot;strings&quot;</span></span><br><span class="line">  <span class="string">&quot;testing&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">=== RUN   TestStringBuilder</span></span><br><span class="line"><span class="comment">    /Users/xxx/Codes/go/src/github.com/xxx/hello/hello_test.go:20: Hello World!</span></span><br><span class="line"><span class="comment">--- PASS: TestStringBuilder (0.00s)</span></span><br><span class="line"><span class="comment">PASS</span></span><br><span class="line"><span class="comment">ok  	example.com/hello	0.013s</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestStringBuilder</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line">  <span class="keyword">var</span> builder strings.Builder</span><br><span class="line">  builder.WriteString(<span class="string">&quot;Hello &quot;</span>)</span><br><span class="line">  builder.WriteString(<span class="string">&quot;World!&quot;</span>)</span><br><span class="line">  s := builder.String()</span><br><span class="line">  t.Log(s)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="æ€§èƒ½æµ‹è¯•"><a href="#æ€§èƒ½æµ‹è¯•" class="headerlink" title="æ€§èƒ½æµ‹è¯•"></a>æ€§èƒ½æµ‹è¯•</h2><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> hello</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">  <span class="string">&quot;bytes&quot;</span></span><br><span class="line">  <span class="string">&quot;fmt&quot;</span></span><br><span class="line">  <span class="string">&quot;strings&quot;</span></span><br><span class="line">  <span class="string">&quot;testing&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> (</span><br><span class="line">  src = <span class="string">&quot;Hello World!&quot;</span></span><br><span class="line">  cnt = <span class="number">10000</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> expected = strings.Repeat(src, cnt)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">mycopy</span><span class="params">(b []<span class="keyword">byte</span>, s <span class="keyword">string</span>)</span> []<span class="title">byte</span></span> &#123;</span><br><span class="line">  n := <span class="built_in">len</span>(b)</span><br><span class="line">  <span class="keyword">if</span> n+<span class="built_in">len</span>(s) &gt; <span class="built_in">cap</span>(b) &#123;</span><br><span class="line">    t := <span class="built_in">make</span>([]<span class="keyword">byte</span>, <span class="number">2</span>*<span class="built_in">cap</span>(b)+<span class="built_in">len</span>(s))</span><br><span class="line">    <span class="built_in">copy</span>(t, b)</span><br><span class="line">    b = t</span><br><span class="line">  &#125;</span><br><span class="line">  b = b[<span class="number">0</span> : n+<span class="built_in">len</span>(s)]</span><br><span class="line">  <span class="built_in">copy</span>(b[n:], s)</span><br><span class="line">  <span class="keyword">return</span> b</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">BenchmarkStringConcat</span><span class="params">(b *testing.B)</span></span> &#123;</span><br><span class="line">  <span class="keyword">var</span> res <span class="keyword">string</span></span><br><span class="line">  <span class="keyword">for</span> n := <span class="number">0</span>; n &lt; b.N; n++ &#123;</span><br><span class="line">    <span class="keyword">var</span> str <span class="keyword">string</span></span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">0</span>; i &lt; cnt; i++ &#123;</span><br><span class="line">      str += src</span><br><span class="line">    &#125;</span><br><span class="line">    res = str</span><br><span class="line">  &#125;</span><br><span class="line">  b.StopTimer()</span><br><span class="line">  <span class="keyword">if</span> res != expected &#123;</span><br><span class="line">    b.Errorf(<span class="string">&quot;got=%s, want=%s&quot;</span>, <span class="keyword">string</span>(res), expected)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">BenchmarkStringSprintf</span><span class="params">(b *testing.B)</span></span> &#123;</span><br><span class="line">  <span class="keyword">var</span> res <span class="keyword">string</span></span><br><span class="line">  <span class="keyword">for</span> n := <span class="number">0</span>; n &lt; b.N; n++ &#123;</span><br><span class="line">    <span class="keyword">var</span> str <span class="keyword">string</span></span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">0</span>; i &lt; cnt; i++ &#123;</span><br><span class="line">      str = fmt.Sprintf(<span class="string">&quot;%s%s&quot;</span>, str, src)</span><br><span class="line">    &#125;</span><br><span class="line">    res = str</span><br><span class="line">  &#125;</span><br><span class="line">  b.StopTimer()</span><br><span class="line">  <span class="keyword">if</span> res != expected &#123;</span><br><span class="line">    b.Errorf(<span class="string">&quot;got=%s, want=%s&quot;</span>, <span class="keyword">string</span>(res), expected)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">BenchmarkStringJoin</span><span class="params">(b *testing.B)</span></span> &#123;</span><br><span class="line">  <span class="keyword">var</span> res <span class="keyword">string</span></span><br><span class="line">  <span class="keyword">for</span> n := <span class="number">0</span>; n &lt; b.N; n++ &#123;</span><br><span class="line">    <span class="keyword">var</span> str <span class="keyword">string</span></span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">0</span>; i &lt; cnt; i++ &#123;</span><br><span class="line">      str = strings.Join([]<span class="keyword">string</span>&#123;str, src&#125;, <span class="string">&quot;&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    res = str</span><br><span class="line">  &#125;</span><br><span class="line">  b.StopTimer()</span><br><span class="line">  <span class="keyword">if</span> res != expected &#123;</span><br><span class="line">    b.Errorf(<span class="string">&quot;got=%s, want=%s&quot;</span>, res, expected)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">BenchmarkBufferWrite</span><span class="params">(b *testing.B)</span></span> &#123;</span><br><span class="line">  <span class="keyword">var</span> res <span class="keyword">string</span></span><br><span class="line">  <span class="keyword">for</span> n := <span class="number">0</span>; n &lt; b.N; n++ &#123;</span><br><span class="line">    buf := <span class="built_in">new</span>(bytes.Buffer)</span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">0</span>; i &lt; cnt; i++ &#123;</span><br><span class="line">      buf.WriteString(src)</span><br><span class="line">    &#125;</span><br><span class="line">    res = buf.String()</span><br><span class="line">  &#125;</span><br><span class="line">  b.StopTimer()</span><br><span class="line">  <span class="keyword">if</span> res != expected &#123;</span><br><span class="line">    b.Errorf(<span class="string">&quot;got=%s, want=%s&quot;</span>, <span class="keyword">string</span>(res), expected)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">BenchmarkBytesAppend</span><span class="params">(b *testing.B)</span></span> &#123;</span><br><span class="line">  <span class="keyword">var</span> res <span class="keyword">string</span></span><br><span class="line">  <span class="keyword">for</span> n := <span class="number">0</span>; n &lt; b.N; n++ &#123;</span><br><span class="line">    <span class="keyword">var</span> bytes []<span class="keyword">byte</span></span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">0</span>; i &lt; cnt; i++ &#123;</span><br><span class="line">      bytes = <span class="built_in">append</span>(bytes, src...)</span><br><span class="line">    &#125;</span><br><span class="line">    res = <span class="keyword">string</span>(bytes)</span><br><span class="line">  &#125;</span><br><span class="line">  b.StopTimer()</span><br><span class="line">  <span class="keyword">if</span> res != expected &#123;</span><br><span class="line">    b.Errorf(<span class="string">&quot;got=%s, want=%s&quot;</span>, <span class="keyword">string</span>(res), expected)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">BenchmarkStringCopy</span><span class="params">(b *testing.B)</span></span> &#123;</span><br><span class="line">  <span class="keyword">var</span> res <span class="keyword">string</span></span><br><span class="line">  <span class="keyword">for</span> n := <span class="number">0</span>; n &lt; b.N; n++ &#123;</span><br><span class="line">    data := <span class="built_in">make</span>([]<span class="keyword">byte</span>, <span class="number">0</span>, <span class="number">64</span>) <span class="comment">// same size as bootstrap array of bytes.Buffer</span></span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">0</span>; i &lt; cnt; i++ &#123;</span><br><span class="line">      data = mycopy(data, src)</span><br><span class="line">    &#125;</span><br><span class="line">    res = <span class="keyword">string</span>(data)</span><br><span class="line">  &#125;</span><br><span class="line">  b.StopTimer()</span><br><span class="line">  <span class="keyword">if</span> res != expected &#123;</span><br><span class="line">      b.Errorf(<span class="string">&quot;got=%s, want=%s&quot;</span>, <span class="keyword">string</span>(res), expected)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">BenchmarkStringCopy2</span><span class="params">(b *testing.B)</span></span> &#123;</span><br><span class="line">  <span class="keyword">var</span> res <span class="keyword">string</span></span><br><span class="line">  <span class="keyword">for</span> n := <span class="number">0</span>; n &lt; b.N; n++ &#123;</span><br><span class="line">    b := <span class="built_in">make</span>([]<span class="keyword">byte</span>, <span class="number">0</span>, <span class="number">64</span>) <span class="comment">// same size as bootstrap array of bytes.Buffer</span></span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">0</span>; i &lt; cnt; i++ &#123;</span><br><span class="line">      l := <span class="built_in">len</span>(b)</span><br><span class="line">      <span class="keyword">if</span> l+<span class="built_in">len</span>(src) &gt; <span class="built_in">cap</span>(b) &#123;</span><br><span class="line">        t := <span class="built_in">make</span>([]<span class="keyword">byte</span>, <span class="number">2</span>*<span class="built_in">cap</span>(b)+<span class="built_in">len</span>(src))</span><br><span class="line">        <span class="built_in">copy</span>(t, b)</span><br><span class="line">        b = t</span><br><span class="line">      &#125;</span><br><span class="line">      b = b[<span class="number">0</span> : l+<span class="built_in">len</span>(src)]</span><br><span class="line">      <span class="built_in">copy</span>(b[l:], src)</span><br><span class="line">    &#125;</span><br><span class="line">    res = <span class="keyword">string</span>(b)</span><br><span class="line">  &#125;</span><br><span class="line">  b.StopTimer()</span><br><span class="line">  <span class="keyword">if</span> res != expected &#123;</span><br><span class="line">    b.Errorf(<span class="string">&quot;got=%s, want=%s&quot;</span>, <span class="keyword">string</span>(res), expected)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">BenchmarkStringBuilder</span><span class="params">(b *testing.B)</span></span> &#123;</span><br><span class="line">  <span class="keyword">var</span> res <span class="keyword">string</span></span><br><span class="line">  <span class="keyword">for</span> n := <span class="number">0</span>; n &lt; b.N; n++ &#123;</span><br><span class="line">    <span class="keyword">var</span> builder strings.Builder</span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">0</span>; i &lt; cnt; i++ &#123;</span><br><span class="line">      builder.WriteString(src)</span><br><span class="line">    &#125;</span><br><span class="line">    res = builder.String()</span><br><span class="line">  &#125;</span><br><span class="line">  b.StopTimer()</span><br><span class="line">  <span class="keyword">if</span> res != expected &#123;</span><br><span class="line">    b.Errorf(<span class="string">&quot;got=%s, want=%s&quot;</span>, <span class="keyword">string</span>(res), expected)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åœ¨æˆ‘æœ¬æœºçš„æµ‹è¯•ç»“æœå¦‚ä¸‹ï¼Œå¯¹äºè¿™ä¸ªæµ‹è¯•ç»“æœæˆ‘è¡¨ç¤ºä¹Ÿæ²¡æƒ³åˆ°ï¼Œä½†æ˜¯æˆ‘å·²ç»çŸ¥é“ä»¥åè¯¥æ€ä¹ˆåšäº†ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ go <span class="built_in">test</span> -v -benchmem -run=^$ -bench <span class="string">&#x27;^(BenchmarkStringConcat|BenchmarkStringSprintf|BenchmarkStringJoin|BenchmarkBufferWrite|BenchmarkBytesAppend|BenchmarkStringCopy|BenchmarkStringCopy2|BenchmarkStringBuilder)$&#x27;</span> example.com/hello</span><br><span class="line">goos: darwin</span><br><span class="line">goarch: amd64</span><br><span class="line">pkg: example.com/hello</span><br><span class="line">cpu: Intel(R) Core(TM) i5-5257U CPU @ 2.70GHz</span><br><span class="line">BenchmarkStringConcat</span><br><span class="line">BenchmarkStringConcat-4                8         131090517 ns/op        632845121 B/op     10004 allocs/op</span><br><span class="line">BenchmarkStringSprintf</span><br><span class="line">BenchmarkStringSprintf-4               4         295268326 ns/op        1075561174 B/op    29686 allocs/op</span><br><span class="line">BenchmarkStringJoin</span><br><span class="line">BenchmarkStringJoin-4                  6         287073860 ns/op        632845282 B/op     10008 allocs/op</span><br><span class="line">BenchmarkBufferWrite</span><br><span class="line">BenchmarkBufferWrite-4              5631            210591 ns/op          441616 B/op         13 allocs/op</span><br><span class="line">BenchmarkBytesAppend</span><br><span class="line">BenchmarkBytesAppend-4              7819            152409 ns/op          628720 B/op         25 allocs/op</span><br><span class="line">BenchmarkStringCopy</span><br><span class="line">BenchmarkStringCopy-4               8820            118761 ns/op          441552 B/op         12 allocs/op</span><br><span class="line">BenchmarkStringCopy2</span><br><span class="line">BenchmarkStringCopy2-4              9598            135427 ns/op          441552 B/op         12 allocs/op</span><br><span class="line">BenchmarkStringBuilder</span><br><span class="line">BenchmarkStringBuilder-4            7729            156815 ns/op          505840 B/op         24 allocs/op</span><br><span class="line">PASS</span><br><span class="line">ok      example.com/hello       17.512s</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>go</category>
      </categories>
      <tags>
        <tag>go</tag>
      </tags>
  </entry>
  <entry>
    <title>Go åŸºå‡†æµ‹è¯•</title>
    <url>/2021/07/17/go-benchmark-test/</url>
    <content><![CDATA[<p>ğŸƒâ€â™‚ï¸ Go è¯­è¨€æ ‡å‡†åº“å†…ç½®çš„ testing æµ‹è¯•æ¡†æ¶æä¾›äº†åŸºå‡†æµ‹è¯•ï¼ˆbenchmarkï¼‰çš„èƒ½åŠ›ï¼Œèƒ½è®©æˆ‘ä»¬å¾ˆå®¹æ˜“åœ°å¯¹æŸä¸€æ®µä»£ç è¿›è¡Œæ€§èƒ½æµ‹è¯•ã€‚åŸºå‡†æµ‹è¯•ä¸»è¦æ˜¯é€šè¿‡æµ‹è¯• CPU å’Œ Memory çš„æ•ˆç‡é—®é¢˜ï¼Œæ¥è¯„ä¼°è¢«æµ‹è¯•ä»£ç çš„æ€§èƒ½ï¼Œè¿›è€Œæ‰¾åˆ°æ›´å¥½çš„è§£å†³æ–¹æ¡ˆã€‚</p>
<span id="more"></span>
<ul>
<li><a href="https://imajinyun.xyz/2021/06/26/go-get-started/"><code>Go èµ·æ­¥</code></a></li>
<li><a href="https://imajinyun.xyz/2021/07/02/go-data-type/"><code>Go æ•°æ®ç±»å‹</code></a></li>
<li><a href="https://imajinyun.xyz/2021/07/11/go-date-time/"><code>Go æ—¥æœŸæ—¶é—´</code></a></li>
<li><a href="https://imajinyun.xyz/2021/07/14/go-random-number/"><code>Go éšæœºæ•°</code></a></li>
<li><a href="https://imajinyun.xyz/2021/07/16/go-unit-test/"><code>Go å•å…ƒæµ‹è¯•</code></a></li>
<li><strong>Go åŸºå‡†æµ‹è¯•</strong></li>
<li><a href="https://imajinyun.xyz/2021/07/22/go-other-test/"><code>Go å…¶å®ƒæµ‹è¯•</code></a></li>
<li><a href="https://imajinyun.xyz/2021/07/24/go-correct-posture/"><code>Go æ­£ç¡®å§¿åŠ¿</code></a></li>
<li><a href="https://imajinyun.xyz/2021/07/25/go-concat-string/"><code>Go è¿æ¥å­—ç¬¦ä¸²</code></a></li>
</ul>
<h2 id="åŸºå‡†æµ‹è¯•å‘½ä»¤"><a href="#åŸºå‡†æµ‹è¯•å‘½ä»¤" class="headerlink" title="åŸºå‡†æµ‹è¯•å‘½ä»¤"></a>åŸºå‡†æµ‹è¯•å‘½ä»¤</h2><h3 id="åŸºå‡†æµ‹è¯•å‘½ä»¤å®ä¾‹"><a href="#åŸºå‡†æµ‹è¯•å‘½ä»¤å®ä¾‹" class="headerlink" title="åŸºå‡†æµ‹è¯•å‘½ä»¤å®ä¾‹"></a>åŸºå‡†æµ‹è¯•å‘½ä»¤å®ä¾‹</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ go <span class="built_in">test</span> -v -bench=.</span><br><span class="line">$ go <span class="built_in">test</span> -v -bench=<span class="string">&#x27;Fib$&#x27;</span> -benchtime=5s .</span><br><span class="line">$ go <span class="built_in">test</span> -v -bench=<span class="string">&#x27;Fib$&#x27;</span> -benchtime=1000x .</span><br><span class="line">$ go <span class="built_in">test</span> -v -bench=<span class="string">&#x27;Fib$&#x27;</span> -benchtime=1000x -count=5 .</span><br><span class="line">$ go <span class="built_in">test</span> -v -bench=<span class="string">&#x27;Fib$&#x27;</span> -cpu=2,4,8,16,32,64,128,256,512,1024,2048,4096 .</span><br><span class="line">$ go <span class="built_in">test</span> -v -benchmem -run=^$ -bench <span class="string">&#x27;^(BenchmarkFib)$&#x27;</span> example.com/hello .</span><br></pre></td></tr></table></figure>
<h2 id="åŸºå‡†æµ‹è¯•å‡½æ•°"><a href="#åŸºå‡†æµ‹è¯•å‡½æ•°" class="headerlink" title="åŸºå‡†æµ‹è¯•å‡½æ•°"></a>åŸºå‡†æµ‹è¯•å‡½æ•°</h2><h3 id="åŸºå‡†æµ‹è¯•å‡½æ•°æ ¼å¼"><a href="#åŸºå‡†æµ‹è¯•å‡½æ•°æ ¼å¼" class="headerlink" title="åŸºå‡†æµ‹è¯•å‡½æ•°æ ¼å¼"></a>åŸºå‡†æµ‹è¯•å‡½æ•°æ ¼å¼</h3><div class="note danger">
            <p><code>BenchmarkXxx</code> ä¸­ <code>Xxx</code> å¯ä»¥æ˜¯ä»»ä½•å­—æ¯æ•°å­—å­—ç¬¦ä¸²ï¼Œä½†æ˜¯ç¬¬ä¸€ä¸ªå­—æ¯ä¸èƒ½æ˜¯å°å†™å­—æ¯ã€‚</p>
          </div>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">BenchmarkXxx</span><span class="params">(t *testing.T)</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ä»¥ä¸‹å‘½åæ˜¯åˆæ³•çš„</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Benchmark123</span><span class="params">(t *testing.T)</span></span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Benchmark</span>ä¸­å›½<span class="params">(t *testing.T)</span></span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">BenchmarkMac</span><span class="params">(t *testing.T)</span></span></span><br></pre></td></tr></table></figure>
<p>åŸºå‡†æµ‹è¯•ç”¨ä¾‹å‡½æ•°éœ€è¦ä»¥ <code>Benchmark</code> ä¸ºå‰ç¼€ï¼š</p>
<ul>
<li>å‰ç¼€ç”¨ä¾‹æ–‡ä»¶ä¸ä¼šå‚ä¸æ­£å¸¸æºç ç¼–è¯‘ï¼Œä¸ä¼šè¢«åŒ…å«åˆ°å¯æ‰§è¡Œæ–‡ä»¶ä¸­ï¼›</li>
<li>åŸºå‡†æµ‹è¯•ç”¨ä¾‹ä½¿ç”¨ <code>go test -bench=.</code> æŒ‡ä»¤æ¥æ‰§è¡Œï¼Œæ²¡æœ‰ä¹Ÿä¸éœ€è¦ <code>main()</code> ä½œä¸ºå‡½æ•°å…¥å£ã€‚æ‰€æœ‰ä»¥ <code>_test</code> ç»“å°¾çš„æºç å†…ä»¥ <code>Benchmark</code> å¼€å¤´çš„å‡½æ•°ä¼šè¢«è‡ªåŠ¨æ‰§è¡Œï¼›</li>
<li>åŸºå‡†æµ‹è¯•å‡½æ•°çš„å‚æ•° <code>b *test.B</code> å¿…é¡»ä¼ å…¥ï¼Œå¦åˆ™ä¼šæŠ¥å‡½æ•°ç­¾åé”™è¯¯ï¼Œå³ï¼š<code>wrong signature for BenchmarkXxx, must be: func BenchmarkXxx(b \*testing.B)</code>ï¼›</li>
</ul>
<p>è¦ç¼–å†™ä¸€ä¸ªæ–°çš„åŸºå‡†æµ‹è¯•ï¼Œéœ€è¦åˆ›å»ºä¸€ä¸ªåç§°ä»¥ <code>_test.go</code> ç»“å°¾çš„æ–‡ä»¶ï¼Œè¯¥æ–‡ä»¶åŒ…å« <code>BenchmarkXxx</code> å‡½æ•°ã€‚</p>
<h2 id="åŸºå‡†æµ‹è¯•ç”¨ä¾‹"><a href="#åŸºå‡†æµ‹è¯•ç”¨ä¾‹" class="headerlink" title="åŸºå‡†æµ‹è¯•ç”¨ä¾‹"></a>åŸºå‡†æµ‹è¯•ç”¨ä¾‹</h2><h3 id="ç®€å•åŸºå‡†æµ‹è¯•"><a href="#ç®€å•åŸºå‡†æµ‹è¯•" class="headerlink" title="ç®€å•åŸºå‡†æµ‹è¯•"></a>ç®€å•åŸºå‡†æµ‹è¯•</h3><p>å¾…æµ‹ä»£ç ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> hello</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Fib</span><span class="params">(n <span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line">  <span class="keyword">switch</span> n &#123;</span><br><span class="line">  <span class="keyword">case</span> <span class="number">0</span>:</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">  <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span></span><br><span class="line">  <span class="keyword">default</span>:</span><br><span class="line">    <span class="keyword">return</span> Fib(n<span class="number">-1</span>) + Fib(n<span class="number">-2</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æµ‹è¯•ä»£ç ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> hello</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">  <span class="string">&quot;testing&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">BenchmarkFib</span><span class="params">(b *testing.B)</span></span> &#123;</span><br><span class="line">  <span class="keyword">for</span> n := <span class="number">0</span>; n &lt; b.N; n++ &#123;</span><br><span class="line">    Fib(<span class="number">15</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ go <span class="built_in">test</span> -v -benchmem -run=^$ -bench <span class="string">&#x27;^(BenchmarkFib)$&#x27;</span> example.com/hello</span><br><span class="line"></span><br><span class="line">goos: darwin</span><br><span class="line">goarch: amd64</span><br><span class="line">pkg: example.com/hello</span><br><span class="line">cpu: Intel(R) Core(TM) i5-5257U CPU @ 2.70GHz</span><br><span class="line">BenchmarkFib</span><br><span class="line">BenchmarkFib-4   	  238396	      4793 ns/op	       0 B/op	       0 allocs/op</span><br><span class="line">PASS</span><br><span class="line">ok  	example.com/hello	2.190s</span><br></pre></td></tr></table></figure>
<p>åŸºå‡†å‡½æ•°ä¼šè¿è¡Œç›®æ ‡ä»£ç  <code>b.N</code> æ¬¡ã€‚åœ¨åŸºå‡†æ‰§è¡ŒæœŸé—´ï¼Œç¨‹åºä¼šè‡ªåŠ¨è°ƒæ•´ <code>b.N</code> ç›´åˆ°åŸºå‡†æµ‹è¯•å‡½æ•°æŒç»­è¶³å¤Ÿé•¿çš„æ—¶é—´ã€‚<code>b.N</code> å¯¹äºæ¯ä¸ªç”¨ä¾‹éƒ½æ˜¯ä¸ä¸€æ ·çš„ã€‚<code>b.N</code> ä» <code>1</code> å¼€å§‹ï¼Œå¦‚æœè¯¥ç”¨ä¾‹èƒ½å¤Ÿåœ¨ <code>1s</code> å†…å®Œæˆï¼Œ<code>b.N</code> çš„å€¼ä¾¿ä¼šå¢åŠ ï¼Œå†æ¬¡æ‰§è¡Œã€‚<code>b.N</code> çš„å€¼å¤§æ¦‚ä»¥ <code>1, 2, 3, 5, 10, 20, 30, 50, 100</code> è¿™æ ·çš„åºåˆ—é€’å¢ï¼Œè¶Šåˆ°åé¢ï¼Œå¢åŠ å¾—è¶Šå¿«ã€‚</p>
<h3 id="æå‡å‡†ç¡®åº¦"><a href="#æå‡å‡†ç¡®åº¦" class="headerlink" title="æå‡å‡†ç¡®åº¦"></a>æå‡å‡†ç¡®åº¦</h3><ul>
<li><code>Benchmark</code> çš„é»˜è®¤æ—¶é—´æ˜¯ <code>1s</code>ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>-benchtime</code> æŒ‡å®šä¸º <code>5s</code>ï¼š</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// æ²¿ç”¨å®ä¾‹ä¸€çš„ä»£ç åšåŸºå‡†æµ‹è¯•</span><br><span class="line">$ go <span class="built_in">test</span> -v -benchtime=5s -benchmem -run=^$ -bench <span class="string">&#x27;^(BenchmarkFib)$&#x27;</span> example.com/hello</span><br><span class="line">goos: darwin</span><br><span class="line">goarch: amd64</span><br><span class="line">pkg: example.com/hello</span><br><span class="line">cpu: Intel(R) Core(TM) i5-5257U CPU @ 2.70GHz</span><br><span class="line">BenchmarkFib</span><br><span class="line">BenchmarkFib-4           1290742              4529 ns/op               0 B/op          0 allocs/op</span><br><span class="line">PASS</span><br><span class="line">ok      example.com/hello       10.375s</span><br></pre></td></tr></table></figure>
<blockquote>
<p>å®é™…æ‰§è¡Œçš„æ—¶é—´æ˜¯ <code>10.375s</code>ï¼Œæ¯” <code>benchtime</code> çš„ <code>5s</code> è¦é•¿ï¼Œæµ‹è¯•ç”¨ä¾‹ç¼–è¯‘ã€æ‰§è¡Œã€é”€æ¯ç­‰æ˜¯éœ€è¦æ—¶é—´çš„ã€‚</p>
</blockquote>
<ul>
<li><code>Benchmark</code> çš„ <code>-benchtime</code> çš„å€¼é™¤äº†æ˜¯æ—¶é—´å¤–ï¼Œè¿˜å¯ä»¥æ˜¯å…·ä½“çš„æ¬¡æ•°ï¼š</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// æ²¿ç”¨å®ä¾‹ä¸€çš„ä»£ç åšåŸºå‡†æµ‹è¯•</span><br><span class="line">$ go <span class="built_in">test</span> -v -benchtime=50x -benchmem -run=^$ -bench <span class="string">&#x27;^(BenchmarkFib)$&#x27;</span> example.com/hello</span><br><span class="line">goos: darwin</span><br><span class="line">goarch: amd64</span><br><span class="line">pkg: example.com/hello</span><br><span class="line">cpu: Intel(R) Core(TM) i5-5257U CPU @ 2.70GHz</span><br><span class="line">BenchmarkFib</span><br><span class="line">BenchmarkFib-4                50              4556 ns/op               0 B/op          0 allocs/op</span><br><span class="line">PASS</span><br><span class="line">ok      example.com/hello       0.010s</span><br></pre></td></tr></table></figure>
<ul>
<li><code>Benchmark</code> çš„ <code>-count</code> å‚æ•°å¯ä»¥ç”¨æ¥è®¾ç½®è½®æ•°ï¼š</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// æ²¿ç”¨å®ä¾‹ä¸€çš„ä»£ç åšåŸºå‡†æµ‹è¯•</span><br><span class="line">$ go <span class="built_in">test</span> -v -count=3 -benchmem -run=^$ -bench <span class="string">&#x27;^(BenchmarkFib)$&#x27;</span> example.com/hello</span><br><span class="line">goos: darwin</span><br><span class="line">goarch: amd64</span><br><span class="line">pkg: example.com/hello</span><br><span class="line">cpu: Intel(R) Core(TM) i5-5257U CPU @ 2.70GHz</span><br><span class="line">BenchmarkFib</span><br><span class="line">BenchmarkFib-4            226737              4483 ns/op               0 B/op          0 allocs/op</span><br><span class="line">BenchmarkFib-4            226686              5645 ns/op               0 B/op          0 allocs/op</span><br><span class="line">BenchmarkFib-4            226284              4485 ns/op               0 B/op          0 allocs/op</span><br><span class="line">PASS</span><br><span class="line">ok      example.com/hello       3.489s</span><br></pre></td></tr></table></figure>
<h3 id="å†…å­˜åˆ†é…æƒ…å†µ"><a href="#å†…å­˜åˆ†é…æƒ…å†µ" class="headerlink" title="å†…å­˜åˆ†é…æƒ…å†µ"></a>å†…å­˜åˆ†é…æƒ…å†µ</h3><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> hello</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">  <span class="string">&quot;math/rand&quot;</span></span><br><span class="line">  <span class="string">&quot;testing&quot;</span></span><br><span class="line">  <span class="string">&quot;time&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">genWithCap</span><span class="params">(n <span class="keyword">int</span>)</span> []<span class="title">int</span></span> &#123;</span><br><span class="line">  rand.Seed(time.Now().UnixNano())</span><br><span class="line">  nums := <span class="built_in">make</span>([]<span class="keyword">int</span>, <span class="number">0</span>, n)</span><br><span class="line">  <span class="keyword">for</span> i := <span class="number">0</span>; i &lt; n; i++ &#123;</span><br><span class="line">    nums = <span class="built_in">append</span>(nums, rand.Int())</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> nums</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">genWithoutCap</span><span class="params">(n <span class="keyword">int</span>)</span> []<span class="title">int</span></span> &#123;</span><br><span class="line">  rand.Seed(time.Now().UnixNano())</span><br><span class="line">  nums := <span class="built_in">make</span>([]<span class="keyword">int</span>, <span class="number">0</span>)</span><br><span class="line">  <span class="keyword">for</span> i := <span class="number">0</span>; i &lt; n; i++ &#123;</span><br><span class="line">    nums = <span class="built_in">append</span>(nums, rand.Int())</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> nums</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">BenchmarkGenWithCap</span><span class="params">(b *testing.B)</span></span> &#123;</span><br><span class="line">  <span class="keyword">for</span> n := <span class="number">0</span>; n &lt; b.N; n++ &#123;</span><br><span class="line">    genWithCap(<span class="number">1000000</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">BenchmarkGenWithoutCap</span><span class="params">(b *testing.B)</span></span> &#123;</span><br><span class="line">  <span class="keyword">for</span> n := <span class="number">0</span>; n &lt; b.N; n++ &#123;</span><br><span class="line">    genWithoutCap(<span class="number">1000000</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ go <span class="built_in">test</span> -v -benchmem -run=^$ -bench <span class="string">&#x27;^BenchmarkGen&#x27;</span> example.com/hello</span><br><span class="line">goos: darwin</span><br><span class="line">goarch: amd64</span><br><span class="line">pkg: example.com/hello</span><br><span class="line">cpu: Intel(R) Core(TM) i5-5257U CPU @ 2.70GHz</span><br><span class="line">BenchmarkGenWithCap</span><br><span class="line">BenchmarkGenWithCap-4                 40          28733419 ns/op         8003585 B/op          1 allocs/op</span><br><span class="line">BenchmarkGenWithoutCap</span><br><span class="line">BenchmarkGenWithoutCap-4              26          38608707 ns/op        45188404 B/op         40 allocs/op</span><br><span class="line">PASS</span><br><span class="line">ok      example.com/hello       3.167s</span><br></pre></td></tr></table></figure>
<p>å¯ä»¥çœ‹åˆ° <code>genWithoutCap</code> åˆ†é…çš„å†…å­˜ç©ºé—´æ˜¯ <code>genWithCap</code> çš„ <code>45188404/8003585 â‰ˆ 5.6</code> å€ï¼Œè®¾ç½®äº†åˆ‡ç‰‡å®¹é‡ï¼Œå†…å­˜åªåˆ†é…ä¸€æ¬¡ï¼Œè€Œä¸è®¾ç½®åˆ‡ç‰‡å®¹é‡ï¼Œå†…å­˜åˆ†é…äº† <code>40</code> æ¬¡ã€‚</p>
<h3 id="æµ‹è¯•è¾“å…¥è§„æ¨¡"><a href="#æµ‹è¯•è¾“å…¥è§„æ¨¡" class="headerlink" title="æµ‹è¯•è¾“å…¥è§„æ¨¡"></a>æµ‹è¯•è¾“å…¥è§„æ¨¡</h3><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> hello</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">  <span class="string">&quot;math/rand&quot;</span></span><br><span class="line">  <span class="string">&quot;testing&quot;</span></span><br><span class="line">  <span class="string">&quot;time&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">gen</span><span class="params">(n <span class="keyword">int</span>)</span> []<span class="title">int</span></span> &#123;</span><br><span class="line">  rand.Seed(time.Now().UnixNano())</span><br><span class="line">  nums := <span class="built_in">make</span>([]<span class="keyword">int</span>, <span class="number">0</span>)</span><br><span class="line">  <span class="keyword">for</span> i := <span class="number">0</span>; i &lt; n; i++ &#123;</span><br><span class="line">    nums = <span class="built_in">append</span>(nums, rand.Int())</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> nums</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">helper</span><span class="params">(i <span class="keyword">int</span>, b *testing.B)</span></span> &#123;</span><br><span class="line">  <span class="keyword">for</span> n := <span class="number">0</span>; n &lt; b.N; n++ &#123;</span><br><span class="line">    gen(i)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">BenchmarkGen10</span><span class="params">(b *testing.B)</span></span>      &#123; helper(<span class="number">10</span>, b) &#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">BenchmarkGen100</span><span class="params">(b *testing.B)</span></span>     &#123; helper(<span class="number">100</span>, b) &#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">BenchmarkGen1000</span><span class="params">(b *testing.B)</span></span>    &#123; helper(<span class="number">1000</span>, b) &#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">BenchmarkGen10000</span><span class="params">(b *testing.B)</span></span>   &#123; helper(<span class="number">10000</span>, b) &#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">BenchmarkGen100000</span><span class="params">(b *testing.B)</span></span>  &#123; helper(<span class="number">100000</span>, b) &#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">BenchmarkGen1000000</span><span class="params">(b *testing.B)</span></span> &#123; helper(<span class="number">1000000</span>, b) &#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ go <span class="built_in">test</span> -v -benchmem -run=^$ -bench <span class="string">&#x27;^(BenchmarkGen10|BenchmarkGen100|BenchmarkGen1000|BenchmarkGen10000|BenchmarkGen100000|BenchmarkGen1000000)$&#x27;</span> example.com/hello</span><br><span class="line"></span><br><span class="line">goos: darwin</span><br><span class="line">goarch: amd64</span><br><span class="line">pkg: example.com/hello</span><br><span class="line">cpu: Intel(R) Core(TM) i5-5257U CPU @ 2.70GHz</span><br><span class="line">BenchmarkGen10</span><br><span class="line">BenchmarkGen10-4        	   85984	     12604 ns/op	     248 B/op	       5 allocs/op</span><br><span class="line">BenchmarkGen100</span><br><span class="line">BenchmarkGen100-4       	   89773	     14911 ns/op	    2040 B/op	       8 allocs/op</span><br><span class="line">BenchmarkGen1000</span><br><span class="line">BenchmarkGen1000-4      	   28988	     38968 ns/op	   16376 B/op	      11 allocs/op</span><br><span class="line">BenchmarkGen10000</span><br><span class="line">BenchmarkGen10000-4     	    3843	    326670 ns/op	  386296 B/op	      20 allocs/op</span><br><span class="line">BenchmarkGen100000</span><br><span class="line">BenchmarkGen100000-4    	     357	   3429826 ns/op	 4654346 B/op	      30 allocs/op</span><br><span class="line">BenchmarkGen1000000</span><br><span class="line">BenchmarkGen1000000-4   	      37	  35700196 ns/op	45188381 B/op	      40 allocs/op</span><br><span class="line">PASS</span><br><span class="line">ok  	example.com/hello	9.278s</span><br></pre></td></tr></table></figure>
<p>é€šè¿‡æµ‹è¯•ç»“æœå¯ä»¥å‘ç°ï¼Œè¾“å…¥å˜ä¸ºåŸæ¥çš„ <code>10</code> å€ï¼Œå‡½æ•°æ¯æ¬¡è°ƒç”¨çš„æ—¶é•¿ä¹Ÿå·®ä¸å¤šæ˜¯åŸæ¥çš„ <code>10</code> å€ï¼Œè¿™è¯´æ˜å¤æ‚åº¦æ˜¯çº¿æ€§çš„ã€‚</p>
<h2 id="B-ç±»å‹"><a href="#B-ç±»å‹" class="headerlink" title="B ç±»å‹"></a>B ç±»å‹</h2><h3 id="æŠ¥å‘Šæ–¹æ³•"><a href="#æŠ¥å‘Šæ–¹æ³•" class="headerlink" title="æŠ¥å‘Šæ–¹æ³•"></a>æŠ¥å‘Šæ–¹æ³•</h3><p>åŸºå‡†æµ‹è¯•ä¸­ï¼Œä¼ é€’ç»™åŸºå‡†æµ‹è¯•å‡½æ•°çš„å‚æ•°æ˜¯ <code>*testing.B</code> ç±»å‹ã€‚<code>B</code> æ˜¯ä¼ é€’ç»™åŸºå‡†æµ‹è¯•å‡½æ•°çš„ä¸€ç§ç±»å‹ï¼Œå®ƒç”¨äºç®¡ç†åŸºå‡†æµ‹è¯•çš„è®¡æ—¶è¡Œä¸ºï¼Œå¹¶æŒ‡ç¤ºåº”è¯¥è¿­ä»£åœ°è¿è¡Œæµ‹è¯•å¤šå°‘æ¬¡ã€‚</p>
<p>è·Ÿå•å…ƒæµ‹è¯•ä¸€æ ·ï¼ŒåŸºå‡†æµ‹è¯•ä¼šåœ¨æ‰§è¡Œçš„è¿‡ç¨‹ä¸­ç§¯ç´¯æ—¥å¿—ï¼Œå¹¶åœ¨æµ‹è¯•å®Œæ¯•æ—¶å°†æ—¥å¿—è½¬å‚¨åˆ°æ ‡å‡†é”™è¯¯ã€‚ä½†è·Ÿå•å…ƒæµ‹è¯•ä¸ä¸€æ ·çš„æ˜¯ï¼Œä¸ºäº†é¿å…åŸºå‡†æµ‹è¯•çš„ç»“æœå—åˆ°æ—¥å¿—æ‰“å°æ“ä½œçš„å½±å“ï¼ŒåŸºå‡†æµ‹è¯•æ€»æ˜¯ä¼šæŠŠæ—¥å¿—æ‰“å°å‡ºæ¥ã€‚</p>
<p><code>B</code> ç±»å‹ä¸­çš„æŠ¥å‘Šæ–¹æ³•ä½¿ç”¨æ–¹å¼å’Œ <code>T</code> ç±»å‹æ˜¯ä¸€æ ·çš„ï¼Œä¸€èˆ¬æ¥è¯´ï¼ŒåŸºå‡†æµ‹è¯•ä¸­ä¹Ÿä¸éœ€è¦ä½¿ç”¨ï¼Œæ¯•ç«Ÿä¸»è¦æ˜¯æµ‹æ€§èƒ½ã€‚</p>
<h3 id="è®¡æ—¶æ–¹æ³•"><a href="#è®¡æ—¶æ–¹æ³•" class="headerlink" title="è®¡æ—¶æ–¹æ³•"></a>è®¡æ—¶æ–¹æ³•</h3><ul>
<li><code>StartTimer</code>ï¼šå¼€å§‹å¯¹æµ‹è¯•è¿›è¡Œè®¡æ—¶ã€‚è¯¥æ–¹æ³•ä¼šåœ¨åŸºå‡†æµ‹è¯•å¼€å§‹æ—¶è‡ªåŠ¨è¢«è°ƒç”¨ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨è°ƒç”¨ <code>StopTimer</code> ä¹‹åæ¢å¤è®¡æ—¶ï¼›</li>
<li><code>StopTimer</code>ï¼šåœæ­¢å¯¹æµ‹è¯•è¿›è¡Œè®¡æ—¶ã€‚å½“ä½ éœ€è¦æ‰§è¡Œä¸€äº›å¤æ‚çš„åˆå§‹åŒ–æ“ä½œï¼Œå¹¶ä¸”ä½ ä¸æƒ³å¯¹è¿™äº›æ“ä½œè¿›è¡Œæµ‹é‡æ—¶ï¼Œå°±å¯ä»¥ä½¿ç”¨è¿™ä¸ªæ–¹æ³•æ¥æš‚æ—¶åœ°åœæ­¢è®¡æ—¶ï¼›</li>
<li><code>ResetTimer</code>ï¼šå¯¹å·²ç»é€å»çš„åŸºå‡†æµ‹è¯•æ—¶é—´ä»¥åŠå†…å­˜åˆ†é…è®¡æ•°å™¨è¿›è¡Œæ¸…é›¶ã€‚å¯¹äºæ­£åœ¨è¿è¡Œä¸­çš„è®¡æ—¶å™¨ï¼Œè¿™ä¸ªæ–¹æ³•ä¸ä¼šäº§ç”Ÿä»»ä½•æ•ˆæœï¼›</li>
</ul>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> hello</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">  <span class="string">&quot;testing&quot;</span></span><br><span class="line">  <span class="string">&quot;time&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">fib</span><span class="params">(n <span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line">  <span class="keyword">if</span> n == <span class="number">0</span> || n == <span class="number">1</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> n</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> fib(n<span class="number">-2</span>) + fib(n<span class="number">-1</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">BenchmarkFib</span><span class="params">(b *testing.B)</span></span> &#123;</span><br><span class="line">  time.Sleep(time.Second * <span class="number">3</span>)</span><br><span class="line">  <span class="comment">// b.ResetTimer()</span></span><br><span class="line">  <span class="keyword">for</span> n := <span class="number">0</span>; n &lt; b.N; n++ &#123;</span><br><span class="line">    fib(<span class="number">30</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// æ³¨é‡Š b.ResetTimer()</span><br><span class="line">$ go <span class="built_in">test</span> -v -benchtime=50x -benchmem -run=^$ -bench <span class="string">&#x27;^(BenchmarkFib)$&#x27;</span> example.com/hello</span><br><span class="line">goos: darwin</span><br><span class="line">goarch: amd64</span><br><span class="line">pkg: example.com/hello</span><br><span class="line">cpu: Intel(R) Core(TM) i5-5257U CPU @ 2.70GHz</span><br><span class="line">BenchmarkFib</span><br><span class="line">BenchmarkFib-4   	      50	  66575387 ns/op	       1 B/op	       0 allocs/op</span><br><span class="line">PASS</span><br><span class="line">ok  	example.com/hello	6.358s</span><br><span class="line"></span><br><span class="line">// æ‰“å¼€ b.ResetTimer()</span><br><span class="line">$ go <span class="built_in">test</span> -v -benchtime=50x -benchmem -run=^$ -bench <span class="string">&#x27;^(BenchmarkFib)$&#x27;</span> example.com/hello</span><br><span class="line">goos: darwin</span><br><span class="line">goarch: amd64</span><br><span class="line">pkg: example.com/hello</span><br><span class="line">cpu: Intel(R) Core(TM) i5-5257U CPU @ 2.70GHz</span><br><span class="line">BenchmarkFib</span><br><span class="line">BenchmarkFib-4   	      50	   6419112 ns/op	       0 B/op	       0 allocs/op</span><br><span class="line">PASS</span><br><span class="line">ok  	example.com/hello	6.344s</span><br></pre></td></tr></table></figure>
<p>å¯ä»¥çœ‹åˆ°ï¼Œå½“æ³¨é‡Š <code>b.ResetTimer()</code> åï¼Œæ¯æ¬¡æ‰§è¡Œéœ€è¦ <code>66575387/1000000000=0.06657539â‰ˆ0.067</code> ç§’ï¼›å½“æ‰“å¼€ <code>b.ResetTimer()</code> åï¼Œæ¯æ¬¡æ‰§è¡Œéœ€è¦ <code>6419112/1000000000=0.00641911â‰ˆ0.006</code> ç§’ã€‚æ‰€ä»¥ä½¿ç”¨ <code>b.ResetTimer()</code> é‡ç½®å®šæ—¶å™¨åå¿«äº† <code>0.067/0.006=11.16666667â‰ˆ11</code> å€ã€‚</p>
<p>åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œæ¯æ¬¡è°ƒç”¨å‡½æ•°å‰åéœ€è¦ä¸€äº›å‡†å¤‡å·¥ä½œå’Œæ¸…ç†å·¥ä½œï¼Œå¯ä»¥ä½¿ç”¨ <code>StopTimer</code> æš‚åœè®¡æ—¶ä»¥åŠä½¿ç”¨ <code>StartTimer</code> å¼€å§‹è®¡æ—¶ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> hello</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">  <span class="string">&quot;math/rand&quot;</span></span><br><span class="line">  <span class="string">&quot;testing&quot;</span></span><br><span class="line">  <span class="string">&quot;time&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">genWithCap</span><span class="params">(n <span class="keyword">int</span>)</span> []<span class="title">int</span></span> &#123;</span><br><span class="line">  rand.Seed(time.Now().UnixNano())</span><br><span class="line">  nums := <span class="built_in">make</span>([]<span class="keyword">int</span>, <span class="number">0</span>, n)</span><br><span class="line">  <span class="keyword">for</span> i := <span class="number">0</span>; i &lt; n; i++ &#123;</span><br><span class="line">    nums = <span class="built_in">append</span>(nums, rand.Int())</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> nums</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">bubbleSort</span><span class="params">(nums []<span class="keyword">int</span>)</span></span> &#123;</span><br><span class="line">  <span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="built_in">len</span>(nums); i++ &#123;</span><br><span class="line">    <span class="keyword">for</span> j := <span class="number">1</span>; j &lt; <span class="built_in">len</span>(nums)-i; j++ &#123;</span><br><span class="line">      <span class="keyword">if</span> nums[j] &lt; nums[j<span class="number">-1</span>] &#123;</span><br><span class="line">        nums[j], nums[j<span class="number">-1</span>] = nums[j<span class="number">-1</span>], nums[j]</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">BenchmarkBubbleSort</span><span class="params">(b *testing.B)</span></span> &#123;</span><br><span class="line">  <span class="keyword">for</span> n := <span class="number">0</span>; n &lt; b.N; n++ &#123;</span><br><span class="line">    b.StopTimer()</span><br><span class="line">    nums := genWithCap(<span class="number">10000</span>)</span><br><span class="line">    b.StartTimer()</span><br><span class="line">    bubbleSort(nums)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ go <span class="built_in">test</span> -v -benchtime=50x -benchmem -run=^$ -bench <span class="string">&#x27;^(BenchmarkBubbleSort)$&#x27;</span> example.com/hello</span><br><span class="line">goos: darwin</span><br><span class="line">goarch: amd64</span><br><span class="line">pkg: example.com/hello</span><br><span class="line">cpu: Intel(R) Core(TM) i5-5257U CPU @ 2.70GHz</span><br><span class="line">BenchmarkBubbleSort</span><br><span class="line">BenchmarkBubbleSort-4   	      50	 124283402 ns/op	       0 B/op	       0 allocs/op</span><br><span class="line">PASS</span><br><span class="line">ok  	example.com/hello	6.380s</span><br></pre></td></tr></table></figure>
<h3 id="å¹¶è¡Œæ‰§è¡Œ"><a href="#å¹¶è¡Œæ‰§è¡Œ" class="headerlink" title="å¹¶è¡Œæ‰§è¡Œ"></a>å¹¶è¡Œæ‰§è¡Œ</h3><p>é€šè¿‡ <code>RunParallel</code> æ–¹æ³•èƒ½å¤Ÿå¹¶è¡Œåœ°æ‰§è¡Œç»™å®šçš„åŸºå‡†æµ‹è¯•ã€‚<code>RunParallel</code> ä¼šåˆ›å»ºå‡ºå¤šä¸ª <code>goroutine</code>ï¼Œå¹¶å°† <code>b.N</code> åˆ†é…ç»™è¿™äº› <code>goroutine</code> æ‰§è¡Œï¼Œå…¶ä¸­ <code>goroutine</code> æ•°é‡çš„é»˜è®¤å€¼ä¸º <code>GOMAXPROCS</code>ã€‚ç”¨æˆ·å¦‚æœæƒ³è¦å¢åŠ é <code>CPU</code> å—é™ï¼ˆnon-CPU-boundï¼‰åŸºå‡†æµ‹è¯•çš„å¹¶è¡Œæ€§ï¼Œé‚£ä¹ˆå¯ä»¥åœ¨ <code>RunParallel</code> ä¹‹å‰è°ƒç”¨ <code>SetParallelism</code>ï¼ˆå¦‚ï¼š<code>SetParallelism(2)</code>ï¼Œåˆ™ <code>goroutine</code> æ•°é‡ä¸º <code>2*GOMAXPROCS</code>ï¼‰ã€‚<code>RunParallel</code> é€šå¸¸ä¼šä¸ <code>-cpu</code> æ ‡å¿—ä¸€åŒä½¿ç”¨ã€‚</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> hello</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">  <span class="string">&quot;bytes&quot;</span></span><br><span class="line">  <span class="string">&quot;testing&quot;</span></span><br><span class="line">  <span class="string">&quot;text/template&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">BenchmarkTemplateParallel</span><span class="params">(b *testing.B)</span></span> &#123;</span><br><span class="line">  tpl := template.Must(template.New(<span class="string">&quot;test&quot;</span>).Parse(<span class="string">&quot;Hello, &#123;&#123;.&#125;&#125;!&quot;</span>))</span><br><span class="line">  <span class="comment">// RunParallel will create GOMAXPROCS goroutines and distribute work among them.</span></span><br><span class="line">  b.RunParallel(<span class="function"><span class="keyword">func</span><span class="params">(pb *testing.PB)</span></span> &#123;</span><br><span class="line">    <span class="comment">// Each goroutine has its own bytes.Buffer.</span></span><br><span class="line">    <span class="keyword">var</span> buf bytes.Buffer</span><br><span class="line">    <span class="keyword">for</span> pb.Next() &#123;</span><br><span class="line">    <span class="comment">// The loop body is executed b.N times total across all goroutines.</span></span><br><span class="line">      buf.Reset()</span><br><span class="line">      tpl.Execute(&amp;buf, <span class="string">&quot;World&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ go <span class="built_in">test</span> -v -benchmem -run=^$ -bench <span class="string">&#x27;^(BenchmarkTemplateParallel)$&#x27;</span> example.com/hello</span><br><span class="line"></span><br><span class="line">goos: darwin</span><br><span class="line">goarch: amd64</span><br><span class="line">pkg: example.com/hello</span><br><span class="line">cpu: Intel(R) Core(TM) i5-5257U CPU @ 2.70GHz</span><br><span class="line">BenchmarkTemplateParallel</span><br><span class="line">BenchmarkTemplateParallel-4   	 7044910	       198.2 ns/op	      48 B/op	       1 allocs/op</span><br><span class="line">PASS</span><br><span class="line">ok  	example.com/hello	1.581s</span><br></pre></td></tr></table></figure>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> hello</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">  <span class="string">&quot;testing&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">BenchmarkSelectNonblock</span><span class="params">(b *testing.B)</span></span> &#123;</span><br><span class="line">  ch1 := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="keyword">int</span>)</span><br><span class="line">  ch2 := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="keyword">int</span>)</span><br><span class="line">  ch3 := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="keyword">int</span>, <span class="number">1</span>)</span><br><span class="line">  ch4 := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="keyword">int</span>, <span class="number">1</span>)</span><br><span class="line">  b.RunParallel(<span class="function"><span class="keyword">func</span><span class="params">(pb *testing.PB)</span></span> &#123;</span><br><span class="line">    <span class="keyword">for</span> pb.Next() &#123;</span><br><span class="line">      <span class="keyword">select</span> &#123;</span><br><span class="line">        <span class="keyword">case</span> &lt;-ch1:</span><br><span class="line">        <span class="keyword">default</span>:</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">select</span> &#123;</span><br><span class="line">        <span class="keyword">case</span> ch2 &lt;- <span class="number">0</span>:</span><br><span class="line">        <span class="keyword">default</span>:</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">select</span> &#123;</span><br><span class="line">        <span class="keyword">case</span> &lt;-ch3:</span><br><span class="line">        <span class="keyword">default</span>:</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">select</span> &#123;</span><br><span class="line">        <span class="keyword">case</span> ch4 &lt;- <span class="number">0</span>:</span><br><span class="line">        <span class="keyword">default</span>:</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ go <span class="built_in">test</span> -v -benchmem -run=^$ -bench <span class="string">&#x27;^(BenchmarkSelectNonblock)$&#x27;</span> example.com/hello</span><br><span class="line"></span><br><span class="line">goos: darwin</span><br><span class="line">goarch: amd64</span><br><span class="line">pkg: example.com/hello</span><br><span class="line">cpu: Intel(R) Core(TM) i5-5257U CPU @ 2.70GHz</span><br><span class="line">BenchmarkSelectNonblock</span><br><span class="line">BenchmarkSelectNonblock-4   	96872894	        13.02 ns/op	       0 B/op	       0 allocs/op</span><br><span class="line">PASS</span><br><span class="line">ok  	example.com/hello	1.286s</span><br></pre></td></tr></table></figure>
<h3 id="å†…å­˜ç»Ÿè®¡"><a href="#å†…å­˜ç»Ÿè®¡" class="headerlink" title="å†…å­˜ç»Ÿè®¡"></a>å†…å­˜ç»Ÿè®¡</h3><p><code>ReportAllocs</code> æ–¹æ³•ç”¨äºæ‰“å¼€å½“å‰åŸºå‡†æµ‹è¯•çš„å†…å­˜ç»Ÿè®¡åŠŸèƒ½ï¼Œ ä¸ <code>go test</code> ä½¿ç”¨ <code>-benchmem</code> æ ‡å¿—ç±»ä¼¼ï¼Œä½† <code>ReportAllocs</code> åªå½±å“é‚£äº›è°ƒç”¨äº†è¯¥å‡½æ•°çš„åŸºå‡†æµ‹è¯•ã€‚</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> hello</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">  <span class="string">&quot;bytes&quot;</span></span><br><span class="line">  <span class="string">&quot;html/template&quot;</span></span><br><span class="line">  <span class="string">&quot;testing&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">BenchmarkTmplExucte</span><span class="params">(b *testing.B)</span></span> &#123;</span><br><span class="line">  b.ReportAllocs()</span><br><span class="line">  tpl := template.Must(template.New(<span class="string">&quot;test&quot;</span>).Parse(<span class="string">&quot;Hello, &#123;&#123;.&#125;&#125;!&quot;</span>))</span><br><span class="line">  b.RunParallel(<span class="function"><span class="keyword">func</span><span class="params">(pb *testing.PB)</span></span> &#123;</span><br><span class="line">    <span class="comment">// Each goroutine has its own bytes.Buffer.</span></span><br><span class="line">    <span class="keyword">var</span> buf bytes.Buffer</span><br><span class="line">    <span class="keyword">for</span> pb.Next() &#123;</span><br><span class="line">      <span class="comment">// The loop body is executed b.N times total across all goroutines.</span></span><br><span class="line">      buf.Reset()</span><br><span class="line">      tpl.Execute(&amp;buf, <span class="string">&quot;World&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ go <span class="built_in">test</span> -v -benchmem -run=^$ -bench <span class="string">&#x27;^(BenchmarkTplExucte)$&#x27;</span> example.com/hello</span><br><span class="line"></span><br><span class="line">goos: darwin</span><br><span class="line">goarch: amd64</span><br><span class="line">pkg: example.com/hello</span><br><span class="line">cpu: Intel(R) Core(TM) i5-5257U CPU @ 2.70GHz</span><br><span class="line">BenchmarkTmplExucte</span><br><span class="line">BenchmarkTmplExucte-4</span><br><span class="line"> 1525129	       875.6 ns/op	     240 B/op	       8 allocs/op</span><br><span class="line">PASS</span><br><span class="line">ok  	example.com/hello	2.152s</span><br></pre></td></tr></table></figure>
<h3 id="åŸºå‡†æµ‹è¯•ç»“æœ"><a href="#åŸºå‡†æµ‹è¯•ç»“æœ" class="headerlink" title="åŸºå‡†æµ‹è¯•ç»“æœ"></a>åŸºå‡†æµ‹è¯•ç»“æœ</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// å¾ªç¯æ‰§è¡Œäº† 238396 æ¬¡ï¼Œæ¯æ¬¡å¾ªç¯èŠ±è´¹ 4793 ns</span><br><span class="line">BenchmarkFib-4   	  238396	      4793 ns/op	       0 B/op	       0 allocs/op</span><br></pre></td></tr></table></figure>
<ul>
<li><code>BenchmarkFib-4</code>ï¼š<code>BenchmarkFib-8</code> ä¸­çš„ <code>-8</code> å³ <code>GOMAXPROCS</code>ï¼Œé»˜è®¤ç­‰äº CPU æ ¸æ•°ã€‚å¯ä»¥é€šè¿‡ <code>-cpu</code> å‚æ•°æ”¹å˜ <code>GOMAXPROCS</code>ï¼Œ<code>-cpu</code> æ”¯æŒä¼ å…¥ä¸€ä¸ªåˆ—è¡¨ä½œä¸ºå‚æ•°ï¼ˆæ¯”å¦‚ï¼š<code>-cpu=2,4,8,...</code>ï¼‰ï¼›</li>
<li><code>238396</code>ï¼šåŸºå‡†æµ‹è¯•çš„è¿­ä»£æ€»æ¬¡æ•° <code>b.N</code>ï¼›</li>
<li><code>4793 ns/op</code>ï¼šå¹³å‡æ¯æ¬¡è¿­ä»£æ‰€æ¶ˆè€—çš„çº³ç§’æ•°ï¼›</li>
<li><code>0 B/op</code>ï¼šå¹³å‡æ¯æ¬¡è¿­ä»£å†…å­˜æ‰€åˆ†é…çš„å­—èŠ‚æ•°ï¼›</li>
<li><code>0 allocs/op</code>ï¼šå¹³å‡æ¯æ¬¡è¿­ä»£çš„å†…å­˜åˆ†é…æ¬¡æ•°ï¼›</li>
</ul>
<p>åœ¨ <code>testing</code> åŒ…ä¸­çš„ <a href="https://github.com/golang/go/blob/master/src/testing/benchmark.go#L353~L363">BenchmarkResult</a> ç±»å‹ä¿å­˜äº†åŸºå‡†æµ‹è¯•çš„ç»“æœï¼Œå®šä¹‰å¦‚ä¸‹ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="comment">// BenchmarkResult contains the results of a benchmark run.</span></span><br><span class="line"><span class="keyword">type</span> BenchmarkResult <span class="keyword">struct</span> &#123;</span><br><span class="line">  N         <span class="keyword">int</span>           <span class="comment">// The number of iterations.</span></span><br><span class="line">  T         time.Duration <span class="comment">// The total time taken.</span></span><br><span class="line">  Bytes     <span class="keyword">int64</span>         <span class="comment">// Bytes processed in one iteration.</span></span><br><span class="line">  MemAllocs <span class="keyword">uint64</span>        <span class="comment">// The total number of memory allocations.</span></span><br><span class="line">  MemBytes  <span class="keyword">uint64</span>        <span class="comment">// The total number of bytes allocated.</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// Extra records additional metrics reported by ReportMetric.</span></span><br><span class="line">  Extra <span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">float64</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;bytes&quot;</span></span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;testing&quot;</span></span><br><span class="line">	<span class="string">&quot;text/template&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">  res := testing.Benchmark(<span class="function"><span class="keyword">func</span><span class="params">(b *testing.B)</span></span> &#123;</span><br><span class="line">    tpl := template.Must(template.New(<span class="string">&quot;test&quot;</span>).Parse(<span class="string">&quot;Hello, &#123;&#123;.&#125;&#125;!&quot;</span>))</span><br><span class="line">    b.RunParallel(<span class="function"><span class="keyword">func</span><span class="params">(pb *testing.PB)</span></span> &#123;</span><br><span class="line">      <span class="keyword">var</span> buf bytes.Buffer</span><br><span class="line">      <span class="keyword">for</span> pb.Next() &#123;</span><br><span class="line">        buf.Reset()</span><br><span class="line">        tpl.Execute(&amp;buf, <span class="string">&quot;World&quot;</span>)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;)</span><br><span class="line">  fmt.Printf(<span class="string">&quot;%8d\t%10d ns/op\t%10d B/op\t%10d allocs/op\n&quot;</span>,</span><br><span class="line">    res.N,</span><br><span class="line">    res.NsPerOp(),</span><br><span class="line">    res.AllocedBytesPerOp(),</span><br><span class="line">    res.AllocsPerOp(),</span><br><span class="line">  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ go run main.go</span><br><span class="line"> 5220064	       196 ns/op	        48 B/op	         1 allocs/op</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>go</category>
      </categories>
      <tags>
        <tag>go</tag>
      </tags>
  </entry>
  <entry>
    <title>Go æ•°æ®ç±»å‹</title>
    <url>/2021/07/02/go-data-type/</url>
    <content><![CDATA[<p>ğŸ¦‹ Go æ˜¯é™æ€ç±»å‹çš„ç¼–ç¨‹è¯­è¨€ï¼Œè¿™æ„å‘³ç€æ¯ä¸ªå˜é‡éƒ½æœ‰ä¸€ç§ç±»å‹ã€‚ä»å¤§çš„æ–¹é¢æ¥è¯´ Go æœ‰ä¸¤ç§ç±»å‹ï¼Œå³åŸºæœ¬ç±»å‹å’Œç»„åˆç±»å‹ã€‚æ•°æ®ç±»å‹æŒ‡å®šæœ‰æ•ˆçš„ Go å˜é‡å¯ä»¥ä¿æŒçš„æ•°æ®ç±»å‹ã€‚</p>
<span id="more"></span>
<ul>
<li><a href="https://imajinyun.xyz/2021/06/26/go-get-started/">Go èµ·æ­¥</a></li>
<li><strong>Go æ•°æ®ç±»å‹</strong></li>
<li><a href="https://imajinyun.xyz/2021/07/11/go-date-time/">Go æ—¥æœŸæ—¶é—´</a></li>
<li><a href="https://imajinyun.xyz/2021/07/14/go-random-number/">Go éšæœºæ•°</a></li>
<li><a href="https://imajinyun.xyz/2021/07/16/go-unit-test/">Go å•å…ƒæµ‹è¯•</a></li>
<li><a href="https://imajinyun.xyz/2021/07/17/go-benchmark-test/">Go åŸºå‡†æµ‹è¯•</a></li>
<li><a href="https://imajinyun.xyz/2021/07/22/go-other-test/">Go å…¶å®ƒæµ‹è¯•</a></li>
<li><a href="https://imajinyun.xyz/2021/07/24/go-correct-posture/">Go æ­£ç¡®å§¿åŠ¿</a></li>
<li><a href="https://imajinyun.xyz/2021/07/25/go-concat-string/">Go è¿æ¥å­—ç¬¦ä¸²</a></li>
</ul>
<h2 id="æŒ‰åŸºæœ¬æ•°æ®ç±»å‹åˆ†ç±»"><a href="#æŒ‰åŸºæœ¬æ•°æ®ç±»å‹åˆ†ç±»" class="headerlink" title="æŒ‰åŸºæœ¬æ•°æ®ç±»å‹åˆ†ç±»"></a>æŒ‰åŸºæœ¬æ•°æ®ç±»å‹åˆ†ç±»</h2><h3 id="åŸºæœ¬ç±»å‹"><a href="#åŸºæœ¬ç±»å‹" class="headerlink" title="åŸºæœ¬ç±»å‹"></a>åŸºæœ¬ç±»å‹</h3><h4 id="å¸ƒå°”å‹"><a href="#å¸ƒå°”å‹" class="headerlink" title="å¸ƒå°”å‹"></a>å¸ƒå°”å‹</h4><div class="note info">
            <p><code>bool</code> çš„é›¶å€¼ä¸º <code>false</code>ã€‚</p>
          </div>
<p>ä»…èµ‹å€¼ä¸º <code>true</code> å’Œ <code>false</code> æ¥è¡¨ç¤ºçœŸå‡ã€‚Go æ²¡æœ‰å®šä¹‰å¸ƒå°”ç±»å‹çš„å­—é¢é‡å½¢å¼ï¼Œå¯ä»¥å°† <code>true</code> å’Œ <code>false</code> è¿™ä¸¤ä¸ªé¢„å£°æ˜çš„æœ‰åå¸¸é‡å½“ä½œå¸ƒå°”ç±»å‹çš„å­—é¢é‡å½¢å¼ã€‚</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">  <span class="string">&quot;fmt&quot;</span></span><br><span class="line">  <span class="string">&quot;reflect&quot;</span></span><br><span class="line">  <span class="string">&quot;unsafe&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> b1 <span class="keyword">bool</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">  b2 := <span class="literal">true</span></span><br><span class="line">  fmt.Printf(<span class="string">&quot;b1: %s type, %d bytes\n&quot;</span>, reflect.TypeOf(b1), unsafe.Sizeof(b1))</span><br><span class="line">  fmt.Printf(<span class="string">&quot;b2: %s type, %d bytes\n\n&quot;</span>, reflect.TypeOf(b2), unsafe.Sizeof(b2))</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">b1: bool type, 1 bytes</span></span><br><span class="line"><span class="comment">b2: bool type, 1 bytes</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>
<h4 id="æ•°å€¼ç±»å‹"><a href="#æ•°å€¼ç±»å‹" class="headerlink" title="æ•°å€¼ç±»å‹"></a>æ•°å€¼ç±»å‹</h4><div class="note info">
            <p><code>numeric</code> çš„é›¶å€¼ä¸º <code>0</code>ï¼ˆä½†æ˜¯ä¸åŒç±»å‹çš„é›¶å€¼åœ¨å†…å­˜ä¸­å ç”¨çš„ç©ºé—´å¯èƒ½ä¸åŒï¼‰ã€‚</p>
          </div>
<h5 id="æ•´æ•°å‹"><a href="#æ•´æ•°å‹" class="headerlink" title="æ•´æ•°å‹"></a>æ•´æ•°å‹</h5><blockquote>
<p>åŒ…æ‹¬æœ‰ç¬¦å·ï¼ˆSignedï¼‰å’Œæ— ç¬¦å·ï¼ˆUnsignedï¼‰ç±»å‹ã€‚</p>
</blockquote>
<table>
<thead>
<tr>
<th>Type</th>
<th>Size</th>
<th>Range</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>int8</code></td>
<td><code>1</code></td>
<td><code>-128~127</code> or <code>-2^7~2^7-1</code></td>
<td>æœ‰ç¬¦å· 8 ä½æ•´å½¢</td>
</tr>
<tr>
<td><code>uint8</code></td>
<td><code>1</code></td>
<td><code>0~255</code> or <code>2^8</code></td>
<td>æ— ç¬¦å· 8 ä½æ•´å½¢</td>
</tr>
<tr>
<td><code>int16</code></td>
<td><code>2</code></td>
<td><code>-32768~32767</code> or <code>-2^15~2^15-1</code></td>
<td>æœ‰ç¬¦å· 16 ä½æ•´å½¢</td>
</tr>
<tr>
<td><code>uint16</code></td>
<td><code>2</code></td>
<td><code>0~65535</code> or <code>2^16</code></td>
<td>æ— ç¬¦å· 16 ä½æ•´å½¢</td>
</tr>
<tr>
<td><code>int32</code></td>
<td><code>4</code></td>
<td><code>-2147483648~2147483647</code> or <code>-2^31~2^31-1</code></td>
<td>æœ‰ç¬¦å· 32 ä½æ•´å½¢</td>
</tr>
<tr>
<td><code>uint32</code></td>
<td><code>4</code></td>
<td><code>0~4294967295</code> or <code>2^31</code></td>
<td>æ— ç¬¦å· 32 ä½æ•´å½¢</td>
</tr>
<tr>
<td><code>int64</code></td>
<td><code>8</code></td>
<td><code>-9223372036854775808~9223372036854775807</code> or <code>-2^63~2^63-1</code></td>
<td>æœ‰ç¬¦å· 64 ä½æ•´å½¢</td>
</tr>
<tr>
<td><code>uint64</code></td>
<td><code>8</code></td>
<td><code>0~18446744073709551615</code> or <code>0~2^64</code></td>
<td>æ— ç¬¦å· 64 ä½æ•´å½¢</td>
</tr>
<tr>
<td><code>int</code></td>
<td><code>4 or 8</code></td>
<td>Platform dependent</td>
<td>æœ‰ç¬¦å· 32 æˆ– 64 ä½æ•´å½¢</td>
</tr>
<tr>
<td><code>uint</code></td>
<td><code>4 or 8</code></td>
<td>Platform dependent</td>
<td>æ— ç¬¦å· 32 æˆ– 64 ä½æ•´å½¢</td>
</tr>
<tr>
<td><code>uintptr</code></td>
<td><code>4 or 8</code></td>
<td>Platform dependent</td>
<td>ç”¨äºå­˜æ”¾ä¸€ä¸ªæŒ‡é’ˆ</td>
</tr>
</tbody>
</table>
<div class="note info">
            <p><code>uintptr</code> ç‰¹æ€§ï¼š</p><ul><li>å¯ä»¥è¢«è½¬æ¢ä¸º <code>unsafe.Pointer</code>ï¼Œåä¹‹äº¦ç„¶ï¼›</li><li>å¯ä»¥åœ¨å…¶ä¸Šæ‰§è¡Œç®—æœ¯è¿ç®—ï¼›</li><li>å³ä½¿åŒ…å«æŒ‡é’ˆåœ°å€ï¼Œä¹Ÿåªæ˜¯ä¸€ä¸ªå€¼ï¼Œä¹Ÿä¸å¼•ç”¨ä»»ä½•å¯¹è±¡ã€‚æ‰€ä»¥ï¼š<ul><li>å¦‚æœç›¸åº”å¯¹è±¡ç§»åŠ¨ï¼Œåˆ™ä¸ä¼šæ›´æ–°å…¶å€¼ã€‚ä¾‹å¦‚ï¼šå½“ Goroutine å †æ ˆå‘ç”Ÿå˜åŒ–æ—¶ï¼›</li><li>ç›¸åº”çš„å¯¹è±¡å¯ä»¥æ˜¯è¢«æ”¶é›†çš„åƒåœ¾ï¼›</li></ul></li></ul><p><code>uintptr</code> åœºæ™¯ï¼š</p><ul><li>å…¶ä¸Šçš„æ˜¯ä¸ <code>unsafe.Pointer</code> ä¸€èµ·ä¸»è¦ç”¨äºä¸å®‰å…¨çš„å†…å­˜è®¿é—®ï¼›</li><li>å½“ä½ æƒ³è¦ä¿å­˜æŒ‡é’ˆåœ°å€å€¼ä»¥è¿›è¡Œæ‰“å°æˆ–å­˜å‚¨å®ƒã€‚ç”±äºåœ°å€åˆšåˆšå­˜å‚¨å¹¶ä¸”ä¸å¼•ç”¨ä»»ä½•å†…å®¹ï¼Œå› æ­¤ç›¸åº”çš„å¯¹è±¡å¯ä»¥æ˜¯åƒåœ¾æ”¶é›†çš„ï¼›</li></ul>
          </div>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">  <span class="string">&quot;fmt&quot;</span></span><br><span class="line">  <span class="string">&quot;math/bits&quot;</span></span><br><span class="line">  <span class="string">&quot;reflect&quot;</span></span><br><span class="line">  <span class="string">&quot;unsafe&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> (</span><br><span class="line">  i8 <span class="keyword">int8</span></span><br><span class="line">  u8 <span class="keyword">uint8</span></span><br><span class="line"></span><br><span class="line">  i16 <span class="keyword">int16</span></span><br><span class="line">  u16 <span class="keyword">uint16</span></span><br><span class="line"></span><br><span class="line">  i32 <span class="keyword">int32</span></span><br><span class="line">  u32 <span class="keyword">uint32</span></span><br><span class="line"></span><br><span class="line">  i64 <span class="keyword">int64</span></span><br><span class="line">  u64 <span class="keyword">uint64</span></span><br><span class="line"></span><br><span class="line">  i <span class="keyword">int</span></span><br><span class="line">  u <span class="keyword">uint</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> student <span class="keyword">struct</span> &#123;</span><br><span class="line">  name <span class="keyword">string</span></span><br><span class="line">  age  <span class="keyword">int</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">  fmt.Printf(<span class="string">&quot;i8: %d bits, %s type, %d bytes\n&quot;</span>, bits.UintSize, reflect.TypeOf(i8), unsafe.Sizeof(i8))</span><br><span class="line">  fmt.Printf(<span class="string">&quot;u8: %d bits, %s type, %d bytes\n\n&quot;</span>, bits.UintSize, reflect.TypeOf(u8), unsafe.Sizeof(u8))</span><br><span class="line"></span><br><span class="line">  fmt.Printf(<span class="string">&quot;i16: %d bits, %s type, %d bytes\n&quot;</span>, bits.UintSize, reflect.TypeOf(i16), unsafe.Sizeof(i16))</span><br><span class="line">  fmt.Printf(<span class="string">&quot;u16: %d bits, %s type, %d bytes\n\n&quot;</span>, bits.UintSize, reflect.TypeOf(u16), unsafe.Sizeof(u16))</span><br><span class="line"></span><br><span class="line">  fmt.Printf(<span class="string">&quot;i32: %d bits, %s type, %d bytes\n&quot;</span>, bits.UintSize, reflect.TypeOf(i32), unsafe.Sizeof(i32))</span><br><span class="line">  fmt.Printf(<span class="string">&quot;u32: %d bits, %s type, %d bytes\n\n&quot;</span>, bits.UintSize, reflect.TypeOf(u32), unsafe.Sizeof(u32))</span><br><span class="line"></span><br><span class="line">  fmt.Printf(<span class="string">&quot;i64: %d bits, %s type, %d bytes\n&quot;</span>, bits.UintSize, reflect.TypeOf(i64), unsafe.Sizeof(i64))</span><br><span class="line">  fmt.Printf(<span class="string">&quot;u64: %d bits, %s type, %d bytes\n\n&quot;</span>, bits.UintSize, reflect.TypeOf(u64), unsafe.Sizeof(u64))</span><br><span class="line"></span><br><span class="line">  fmt.Printf(<span class="string">&quot;i: %d bits, %s type, %d bytes\n&quot;</span>, bits.UintSize, reflect.TypeOf(i), unsafe.Sizeof(i))</span><br><span class="line">  fmt.Printf(<span class="string">&quot;u: %d bits, %s type, %d bytes\n\n&quot;</span>, bits.UintSize, reflect.TypeOf(u), unsafe.Sizeof(u))</span><br><span class="line"></span><br><span class="line">  s := &amp;student&#123;name: <span class="string">&quot;tony&quot;</span>, age: <span class="number">18</span>&#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Get the address of field name in struct s</span></span><br><span class="line">  p := unsafe.Pointer(<span class="keyword">uintptr</span>(unsafe.Pointer(s)) + unsafe.Offsetof(s.name))</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Typecast it to a string pointer and print the value of it</span></span><br><span class="line">  fmt.Printf(<span class="string">&quot;p: %s&quot;</span>, *(*<span class="keyword">string</span>)(p))</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">i8: 64 bits, int8 type, 1 bytes</span></span><br><span class="line"><span class="comment">u8: 64 bits, uint8 type, 1 bytes</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">i16: 64 bits, int16 type, 2 bytes</span></span><br><span class="line"><span class="comment">u16: 64 bits, uint16 type, 2 bytes</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">i32: 64 bits, int32 type, 4 bytes</span></span><br><span class="line"><span class="comment">u32: 64 bits, uint32 type, 4 bytes</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">i64: 64 bits, int64 type, 8 bytes</span></span><br><span class="line"><span class="comment">u64: 64 bits, uint64 type, 8 bytes</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">i: 64 bits, int type, 8 bytes</span></span><br><span class="line"><span class="comment">u: 64 bits, uint type, 8 bytes</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">p: tony</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>
<div class="note info">
            <p><code>byte</code> ä¸º <code>uint8</code> çš„åˆ«åã€‚å› æ­¤å®ƒæ˜¯ä¸€ä¸ªæ•´æ•°å€¼ï¼Œæ­¤æ•´æ•°å€¼ä¸º 8 ä½ï¼Œå®ƒè¡¨ç¤º 0~255 ä¹‹é—´çš„ä¸€ä¸ªå­—èŠ‚ã€‚å•ä¸ªå­—èŠ‚å¯ä»¥ä»£è¡¨ ASCII å­—ç¬¦ã€‚Go æ²¡æœ‰ä»»ä½• <code>char</code> æ•°æ®ç±»å‹ï¼Œå› æ­¤å­—èŠ‚ç”¨äºè¡¨ç¤º ASCII å­—ç¬¦ã€‚</p>
          </div>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">  <span class="string">&quot;fmt&quot;</span></span><br><span class="line">  <span class="string">&quot;reflect&quot;</span></span><br><span class="line">  <span class="string">&quot;unsafe&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">  <span class="keyword">var</span> char <span class="keyword">byte</span> = <span class="string">&#x27;a&#x27;</span></span><br><span class="line"></span><br><span class="line">  fmt.Printf(<span class="string">&quot;Type: %s, Size: %d\n&quot;</span>, reflect.TypeOf(char), unsafe.Sizeof(char))</span><br><span class="line">  fmt.Printf(<span class="string">&quot;Character: %c\n&quot;</span>, char)</span><br><span class="line"></span><br><span class="line">  s := <span class="string">&quot;abc&quot;</span></span><br><span class="line">  fmt.Println([]<span class="keyword">byte</span>(s))</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">Type: uint8, Size: 1</span></span><br><span class="line"><span class="comment">Character: a</span></span><br><span class="line"><span class="comment">[97 98 99]</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>
<div class="note info">
            <p><code>rune</code> ä¸º <code>int32</code> çš„åˆ«åã€‚å› æ­¤å®ƒæ˜¯ä¸€ä¸ªæ•´æ•°å€¼ï¼Œæ­¤æ•´æ•°å€¼æ—¨åœ¨è¡¨ç¤º Unicode Code Pointã€‚å…³äº Unicode å’Œå­—ç¬¦é›†è¯·æˆ³ <a href="https://www.joelonsoftware.com/2003/10/08/the-absolute-minimum-every-software-developer-absolutely-positively-must-know-about-unicode-and-character-sets-no-excuses/">The Absolute Minimum Every Software Developer Absolutely, Positively. Must Know About Unicode and Character Sets(No Excuses!)</a>ã€‚</p>
          </div>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">  <span class="string">&quot;fmt&quot;</span></span><br><span class="line">  <span class="string">&quot;reflect&quot;</span></span><br><span class="line">  <span class="string">&quot;unsafe&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">  char := <span class="string">&#x27;a&#x27;</span></span><br><span class="line"></span><br><span class="line">  fmt.Printf(<span class="string">&quot;Type: %s, Size: %d\n&quot;</span>, reflect.TypeOf(char), unsafe.Sizeof(char))</span><br><span class="line">  fmt.Printf(<span class="string">&quot;Character: %c\n&quot;</span>, char)</span><br><span class="line">  fmt.Printf(<span class="string">&quot;Unicode Code Point: %U\n&quot;</span>, char)</span><br><span class="line"></span><br><span class="line">  s := <span class="string">&quot;0bâ„¢&quot;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// This will print the Unicode Code Point</span></span><br><span class="line">  fmt.Printf(<span class="string">&quot;%U\n&quot;</span>, []<span class="keyword">rune</span>(s))</span><br><span class="line"></span><br><span class="line">  <span class="comment">// This will the decimal value of Unicode Code Point</span></span><br><span class="line">  fmt.Println([]<span class="keyword">rune</span>(s))</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">Type: int32, Size: 4</span></span><br><span class="line"><span class="comment">Character: a</span></span><br><span class="line"><span class="comment">Unicode Code Point: U+0061</span></span><br><span class="line"><span class="comment">[U+0030 U+0062 U+2122]</span></span><br><span class="line"><span class="comment">[48 98 8482]</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>
<p>æ•´æ•°ç±»å‹æœ‰å››ç§å­—é¢é‡å½¢å¼ï¼šåè¿›åˆ¶å½¢å¼ï¼ˆDecimalï¼‰ã€å…«è¿›åˆ¶å½¢å¼ï¼ˆOctalï¼‰ã€åå…­è¿›åˆ¶å½¢å¼ï¼ˆHexï¼‰å’ŒäºŒè¿›åˆ¶å½¢å¼ï¼ˆBinaryï¼‰ï¼›</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// åå…­è¿›åˆ¶è¡¨ç¤º</span><br><span class="line">0xF</span><br><span class="line">0XF</span><br><span class="line"></span><br><span class="line">// å…«è¿›åˆ¶è¡¨ç¤ºï¼ˆ0o æˆ– 0O å¼€å¤´çš„å…«è¿›åˆ¶å½¢å¼ä» Go 1.13 æ‰å¼€å§‹æ”¯æŒï¼‰</span><br><span class="line">017</span><br><span class="line">0o17</span><br><span class="line">0O17</span><br><span class="line"></span><br><span class="line">// äºŒè¿›åˆ¶è¡¨ç¤º</span><br><span class="line">0b1011</span><br><span class="line">0B1011</span><br><span class="line"></span><br><span class="line">// åè¿›åˆ¶è¡¨ç¤º</span><br><span class="line">32</span><br></pre></td></tr></table></figure>
<h5 id="æµ®ç‚¹å‹"><a href="#æµ®ç‚¹å‹" class="headerlink" title="æµ®ç‚¹å‹"></a>æµ®ç‚¹å‹</h5><blockquote>
<p>åœ¨å†…å­˜ä¸­ï¼Œæ‰€æœ‰çš„æµ®ç‚¹æ•°éƒ½æ˜¯ä½¿ç”¨ <a href="https://zh.wikipedia.org/wiki/IEEE_754">IEEE-754</a> æ ¼å¼å­˜å‚¨çš„ã€‚</p>
</blockquote>
<table>
<thead>
<tr>
<th>Type</th>
<th>Size</th>
<th>Range</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>float32</code></td>
<td><code>4</code></td>
<td><code>æ­£è´Ÿ1.18*10^-38~æ­£è´Ÿ3.40*10^38</code></td>
<td>32 ä½çš„æµ®ç‚¹å‹</td>
</tr>
<tr>
<td><code>float64</code></td>
<td><code>8</code></td>
<td><code>æ­£è´Ÿ2.23*10^-308~æ­£è´Ÿ1.80*10^308</code></td>
<td>64 ä½çš„æµ®ç‚¹å‹</td>
</tr>
</tbody>
</table>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">  <span class="string">&quot;fmt&quot;</span></span><br><span class="line">  <span class="string">&quot;reflect&quot;</span></span><br><span class="line">  <span class="string">&quot;unsafe&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> f32 <span class="keyword">float32</span></span><br><span class="line"><span class="keyword">var</span> f64 <span class="keyword">float64</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">  <span class="keyword">var</span> f1 <span class="keyword">float32</span></span><br><span class="line">  f1 = <span class="number">3.1415926</span></span><br><span class="line">  f2 := <span class="number">3.1415926</span> <span class="comment">// Default is float64</span></span><br><span class="line">  fmt.Printf(<span class="string">&quot;f32: %s type, %d bytes\n&quot;</span>, reflect.TypeOf(f32), unsafe.Sizeof(f32))</span><br><span class="line">  fmt.Printf(<span class="string">&quot;f64: %s type, %d bytes\n\n&quot;</span>, reflect.TypeOf(f64), unsafe.Sizeof(f64))</span><br><span class="line">  fmt.Printf(<span class="string">&quot;f1: %s type, %d bytes\n&quot;</span>, reflect.TypeOf(f1), unsafe.Sizeof(f1))</span><br><span class="line">  fmt.Printf(<span class="string">&quot;f2: %s type, %d bytes\n\n&quot;</span>, reflect.TypeOf(f2), unsafe.Sizeof(f2))</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">f32: float32 type, 4 bytes</span></span><br><span class="line"><span class="comment">f64: float64 type, 8 bytes</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">f1: float32 type, 4 bytes</span></span><br><span class="line"><span class="comment">f2: float64 type, 8 bytes</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>
<p>æµ®ç‚¹æ•°ç±»å‹å€¼çš„å­—é¢é‡å½¢å¼ï¼šä¸€ä¸ªæµ®ç‚¹æ•°çš„å®Œæ•´åè¿›åˆ¶å­—é¢é‡å½¢å¼å¯èƒ½åŒ…å«ä¸€ä¸ªåè¿›åˆ¶æ•´æ•°éƒ¨åˆ†ã€ä¸€ä¸ªå°æ•°ç‚¹ã€ä¸€ä¸ªåè¿›åˆ¶å°æ•°éƒ¨åˆ†å’Œä¸€ä¸ªä»¥ 10 ä¸ºåº•æ•°çš„æ•´æ•°æŒ‡æ•°éƒ¨åˆ†ã€‚æ•´æ•°æŒ‡æ•°éƒ¨åˆ†å­—æ¯ <code>e</code> æˆ– <code>E</code> å¸¦ä¸€ä¸ªåè¿›åˆ¶çš„æ•´æ•°å­—é¢é‡ç»„æˆï¼ˆ<code>xEn</code> è¡¨ç¤º <code>x</code> ä¹˜ä»¥ <code>10^n</code>ï¼Œè€Œ <code>xE-n</code> è¡¨ç¤º <code>x</code> é™¤ä»¥ <code>10^n</code>ï¼‰ã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">10.1234</span><br><span class="line">03.1415 // 3.1415</span><br><span class="line">.88</span><br><span class="line">99.</span><br><span class="line"></span><br><span class="line">1.23e2 // 123.0</span><br><span class="line">123E2 // 12300.0</span><br><span class="line">123.E+2 // 12300.0</span><br><span class="line">1e-1 // 0.1</span><br><span class="line">.1e0 // 0.1</span><br><span class="line">0010e-2 // 0.1</span><br><span class="line">0e+5 // 0.0</span><br></pre></td></tr></table></figure>
<p>ä¸€äº›åˆæ³•çš„æµ®ç‚¹æ•°çš„åå…­è¿›åˆ¶å­—é¢é‡ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">0x1p-2     // == 1.0/4 = 0.25</span><br><span class="line">0x2.p10    // == 2.0 * 1024 == 2048.0</span><br><span class="line">0x1.Fp+0   // == 1+15.0/16 == 1.9375</span><br><span class="line">0X.8p1     // == 8.0/16 * 2 == 1.0</span><br><span class="line">0X1FFFP-16 // == 0.1249847412109375</span><br></pre></td></tr></table></figure>
<h5 id="å¤æ•°å‹"><a href="#å¤æ•°å‹" class="headerlink" title="å¤æ•°å‹"></a>å¤æ•°å‹</h5><table>
<thead>
<tr>
<th>Type</th>
<th>Size</th>
<th>Range</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>complex64</code></td>
<td><code>8</code></td>
<td>N/A</td>
<td>64 ä½çš„å¤æ•°å‹ï¼Œç”± float32 ä½çš„å®éƒ¨å’Œè™šéƒ¨è”åˆè¡¨ç¤º</td>
</tr>
<tr>
<td><code>complex128</code></td>
<td><code>16</code></td>
<td>N/A</td>
<td>128 ä½çš„å¤æ•°å‹ï¼Œç”± float64 ä½çš„å®éƒ¨å’Œè™šéƒ¨è”åˆè¡¨ç¤º</td>
</tr>
</tbody>
</table>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">  <span class="string">&quot;fmt&quot;</span></span><br><span class="line">  <span class="string">&quot;reflect&quot;</span></span><br><span class="line">  <span class="string">&quot;unsafe&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">  <span class="keyword">var</span> a <span class="keyword">float32</span> = <span class="number">3</span></span><br><span class="line">  <span class="keyword">var</span> b <span class="keyword">float32</span> = <span class="number">5</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> m <span class="keyword">float64</span> = <span class="number">3</span></span><br><span class="line">  <span class="keyword">var</span> n <span class="keyword">float64</span> = <span class="number">5</span></span><br><span class="line"></span><br><span class="line">  c := <span class="built_in">complex</span>(a, b)</span><br><span class="line">  <span class="keyword">var</span> d <span class="keyword">complex64</span></span><br><span class="line">  d = <span class="number">4</span> + <span class="number">5i</span></span><br><span class="line"></span><br><span class="line">  p := <span class="built_in">complex</span>(m, n)</span><br><span class="line">  q := <span class="number">4</span> + <span class="number">5i</span> <span class="comment">// When don&#x27;t specify a type, the default type will be complex128</span></span><br><span class="line"></span><br><span class="line">  fmt.Printf(<span class="string">&quot;c: %s type, %d bytes\n&quot;</span>, reflect.TypeOf(c), unsafe.Sizeof(c))</span><br><span class="line">  fmt.Printf(<span class="string">&quot;d: %s type, %d bytes\n&quot;</span>, reflect.TypeOf(d), unsafe.Sizeof(d))</span><br><span class="line">  fmt.Println(c+d, c-d, c*d, c/d)</span><br><span class="line"></span><br><span class="line">  fmt.Println()</span><br><span class="line"></span><br><span class="line">  fmt.Printf(<span class="string">&quot;p: %s type, %d bytes\n&quot;</span>, reflect.TypeOf(p), unsafe.Sizeof(p))</span><br><span class="line">  fmt.Printf(<span class="string">&quot;q: %s type, %d bytes\n&quot;</span>, reflect.TypeOf(q), unsafe.Sizeof(q))</span><br><span class="line">  fmt.Println(p+q, p-q, p*q, p/q)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">c: complex64 type, 8 bytes</span></span><br><span class="line"><span class="comment">d: complex64 type, 8 bytes</span></span><br><span class="line"><span class="comment">(7+10i) (-1+0i) (-13+35i) (0.902439+0.12195122i)</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">p: complex128 type, 16 bytes</span></span><br><span class="line"><span class="comment">q: complex128 type, 16 bytes</span></span><br><span class="line"><span class="comment">(7+10i) (-1+0i) (-13+35i) (0.902439024390244+0.12195121951219513i)</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>
<p>å¤æ•°è™šéƒ¨å­—é¢é‡å½¢å¼ï¼šä¸€ä¸ªè™šéƒ¨å€¼çš„å­—é¢é‡å½¢å¼ç”±ä¸€ä¸ªæµ®ç‚¹æ•°å­—é¢é‡æˆ–è€…ä¸€ä¸ªæ•´æ•°å­—é¢é‡å’Œå…¶åè·Ÿéšçš„ä¸€ä¸ªå°å†™çš„å­—æ¯ <code>i</code> ç»„æˆã€‚ åœ¨ Go 1.13 ä¹‹å‰ï¼Œå¦‚æœè™šéƒ¨ä¸­ <code>i</code> å‰çš„éƒ¨åˆ†ä¸ºä¸€ä¸ªæ•´æ•°å­—é¢é‡ï¼Œåˆ™å…¶å¿…é¡»ä¸ºå¹¶ä¸”æ€»æ˜¯è¢«è§†ä¸ºåè¿›åˆ¶å½¢å¼ã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">1.23i</span><br><span class="line">1.i</span><br><span class="line">.23i</span><br><span class="line">123i</span><br><span class="line">0123i   // == 123iï¼ˆå…¼å®¹æ€§ä½¿ç„¶ã€‚è§ä¸‹ï¼‰</span><br><span class="line">1.23E2i // == 123i</span><br><span class="line">1e-1i</span><br><span class="line">011i   // == 11iï¼ˆå…¼å®¹æ€§ä½¿ç„¶ã€‚è§ä¸‹ï¼‰</span><br><span class="line">00011i // == 11iï¼ˆå…¼å®¹æ€§ä½¿ç„¶ã€‚è§ä¸‹ï¼‰</span><br><span class="line"></span><br><span class="line">// ä¸‹é¢è¿™å‡ è¡Œä» Go 1.13 å¼€å§‹æ‰èƒ½ç¼–è¯‘é€šè¿‡</span><br><span class="line">0o11i    // == 9i</span><br><span class="line">0x11i    // == 17i</span><br><span class="line">0b11i    // == 3i</span><br><span class="line">0X.8p-0i // == 0.5i</span><br></pre></td></tr></table></figure>
<h5 id="å­—ç¬¦ä¸²å‹"><a href="#å­—ç¬¦ä¸²å‹" class="headerlink" title="å­—ç¬¦ä¸²å‹"></a>å­—ç¬¦ä¸²å‹</h5><div class="note info">
            <p><code>string</code> çš„é›¶å€¼ä¸º <code>&quot;&quot;</code>ï¼Œå³ç©ºå­—ç¬¦ä¸²ã€‚</p>
          </div>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">  <span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">  x := <span class="string">&quot;hello\nworld&quot;</span></span><br><span class="line">  fmt.Printf(<span class="string">&quot;x: %s\n&quot;</span>, x)</span><br><span class="line"></span><br><span class="line">  y := <span class="string">`Hello\nWorld`</span></span><br><span class="line">  fmt.Printf(<span class="string">&quot;y: %s\n&quot;</span>, y)</span><br><span class="line"></span><br><span class="line">  s := <span class="string">&quot;Â¡Qâ„¢&quot;</span></span><br><span class="line">  fmt.Printf(<span class="string">&quot;s: %s\n&quot;</span>, s)</span><br><span class="line">  fmt.Printf(<span class="string">&quot;s length is: %d\n&quot;</span>, <span class="built_in">len</span>(s))</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> _, c := <span class="keyword">range</span> s &#123;</span><br><span class="line">    fmt.Println(<span class="keyword">string</span>(c))</span><br><span class="line">  &#125;</span><br><span class="line">  fmt.Println(<span class="string">&quot;ğŸš€&quot;</span> + <span class="string">&quot; &quot;</span> + <span class="string">&quot;Hello World!&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">x: hello</span></span><br><span class="line"><span class="comment">world</span></span><br><span class="line"><span class="comment">y: Hello\nWorld</span></span><br><span class="line"><span class="comment">s: Â¡Qâ„¢</span></span><br><span class="line"><span class="comment">s length is: 6</span></span><br><span class="line"><span class="comment">Â¡</span></span><br><span class="line"><span class="comment">Q</span></span><br><span class="line"><span class="comment">â„¢</span></span><br><span class="line"><span class="comment">ğŸš€ Hello World!</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>
<p>Go å­—ç¬¦ä¸²çš„å­—é¢é‡å½¢å¼æœ‰ä¸¤ç§ï¼šä¸€ç§æ˜¯è§£é‡Šå‹å­—é¢è¡¨ç¤ºï¼ˆInterpreted String Literalï¼ŒåŒå¼•å·é£æ ¼ï¼‰ã€‚ å¦ä¸€ç§æ˜¯ç›´ç™½å­—é¢è¡¨ç¤ºï¼ˆRaw String Literalï¼Œåå¼•å·é£æ ¼ï¼‰ã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// è§£é‡Šå½¢å¼</span><br><span class="line"><span class="string">&quot;Hello World!\n&quot;</span></span><br><span class="line"></span><br><span class="line">// ç›´ç™½å½¢å¼</span><br><span class="line">`Hello World!`</span><br></pre></td></tr></table></figure>
<h3 id="ç»„åˆç±»å‹"><a href="#ç»„åˆç±»å‹" class="headerlink" title="ç»„åˆç±»å‹"></a>ç»„åˆç±»å‹</h3><h4 id="éå¼•ç”¨ç±»å‹"><a href="#éå¼•ç”¨ç±»å‹" class="headerlink" title="éå¼•ç”¨ç±»å‹"></a>éå¼•ç”¨ç±»å‹</h4><h5 id="æ•°ç»„"><a href="#æ•°ç»„" class="headerlink" title="æ•°ç»„"></a>æ•°ç»„</h5><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">  <span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">  <span class="keyword">var</span> arr1 [<span class="number">2</span>]<span class="keyword">string</span></span><br><span class="line">  arr1[<span class="number">0</span>] = <span class="string">&quot;a&quot;</span></span><br><span class="line">  arr1[<span class="number">1</span>] = <span class="string">&quot;b&quot;</span></span><br><span class="line">  dump(<span class="string">&quot;arr1&quot;</span>, arr1)</span><br><span class="line"></span><br><span class="line">  arr2 := [<span class="number">2</span>]<span class="keyword">string</span>&#123;<span class="string">&quot;Hello&quot;</span>, <span class="string">&quot;World&quot;</span>&#125;</span><br><span class="line">  dump(<span class="string">&quot;arr2&quot;</span>, arr2)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">dump</span><span class="params">(name <span class="keyword">string</span>, array [2]<span class="keyword">string</span>)</span></span> &#123;</span><br><span class="line">  fmt.Printf(<span class="string">&quot;%s: %v\n&quot;</span>, name, array)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">arr1: [a b]</span></span><br><span class="line"><span class="comment">arr2: [Hello World]</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>
<h5 id="ç»“æ„ä½“"><a href="#ç»“æ„ä½“" class="headerlink" title="ç»“æ„ä½“"></a>ç»“æ„ä½“</h5><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">  <span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> employee <span class="keyword">struct</span> &#123;</span><br><span class="line">  name   <span class="keyword">string</span></span><br><span class="line">  age    <span class="keyword">int</span></span><br><span class="line">  salary <span class="keyword">float64</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">  e1 := employee&#123;<span class="string">&quot;John&quot;</span>, <span class="number">28</span>, <span class="number">12000.00</span>&#125;</span><br><span class="line">  fmt.Printf(<span class="string">&quot;e1: %v\n&quot;</span>, e1)</span><br><span class="line"></span><br><span class="line">  e2 := employee&#123;name: <span class="string">&quot;Jack&quot;</span>, age: <span class="number">26</span>, salary: <span class="number">8000.00</span>&#125;</span><br><span class="line">  fmt.Printf(<span class="string">&quot;e2: %v\n&quot;</span>, e2)</span><br><span class="line"></span><br><span class="line">  e3 := employee&#123;name: <span class="string">&quot;Pony&quot;</span>, age: <span class="number">27</span>&#125;</span><br><span class="line">  fmt.Printf(<span class="string">&quot;e3: %v\n&quot;</span>, e3)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">e1: &#123;John 28 12000&#125;</span></span><br><span class="line"><span class="comment">e2: &#123;Jack 26 8000&#125;</span></span><br><span class="line"><span class="comment">e3: &#123;Pony 27 0&#125;</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>
<h4 id="å¼•ç”¨ç±»å‹"><a href="#å¼•ç”¨ç±»å‹" class="headerlink" title="å¼•ç”¨ç±»å‹"></a>å¼•ç”¨ç±»å‹</h4><h5 id="åˆ‡ç‰‡"><a href="#åˆ‡ç‰‡" class="headerlink" title="åˆ‡ç‰‡"></a>åˆ‡ç‰‡</h5><p>åˆ‡ç‰‡æ˜¯åŠ¨æ€å¤§å°çš„ï¼Œæ•°ç»„æ˜¯å›ºå®šå¤§å°çš„ï¼Œå› æ­¤åˆ‡ç‰‡æä¾›æ›´çµæ´»çš„æ¥å£ã€‚åˆ‡ç‰‡æ˜¯å¼•ç”¨ç±»å‹ï¼Œå› ä¸ºå®ƒåœ¨å†…éƒ¨å¼•ç”¨æ•°ç»„ã€‚å®ƒçš„å†…éƒ¨è¡¨ç¤ºé€šè¿‡ä¸‰ä¸ªå­—æ®µï¼š</p>
<ul>
<li>åº•å±‚æ•°ç»„çš„åœ°å€ï¼›</li>
<li>åˆ‡ç‰‡çš„é•¿åº¦ï¼›</li>
<li>åˆ‡ç‰‡çš„å®¹é‡ï¼›</li>
</ul>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">  <span class="string">&quot;fmt&quot;</span></span><br><span class="line">  <span class="string">&quot;reflect&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">  s := <span class="built_in">make</span>([]<span class="keyword">string</span>, <span class="number">2</span>, <span class="number">3</span>)</span><br><span class="line">  fmt.Printf(<span class="string">&quot;Slice: %v, Type: %s, Len: %d, Cap: %d\n&quot;</span>, s, reflect.TypeOf(s), <span class="built_in">len</span>(s), <span class="built_in">cap</span>(s))</span><br><span class="line"></span><br><span class="line">  p := []<span class="keyword">string</span>&#123;<span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span>, <span class="string">&quot;c&quot;</span>&#125;</span><br><span class="line">  fmt.Printf(<span class="string">&quot;Slice: %v, Type: %s, Len: %d, Cap: %d\n&quot;</span>, p, reflect.TypeOf(p), <span class="built_in">len</span>(p), <span class="built_in">cap</span>(s))</span><br><span class="line"></span><br><span class="line">  p = <span class="built_in">append</span>(p, <span class="string">&quot;d&quot;</span>)</span><br><span class="line">  fmt.Printf(<span class="string">&quot;Slice: %v, Type: %s, Len: %d, Cap: %d\n&quot;</span>, p, reflect.TypeOf(p), <span class="built_in">len</span>(p), <span class="built_in">cap</span>(s))</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> _, v := <span class="keyword">range</span> p &#123;</span><br><span class="line">    fmt.Println(v)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">Slice: [ ], Type: []string, Len: 2, Cap: 3</span></span><br><span class="line"><span class="comment">Slice: [a b c], Type: []string, Len: 3, Cap: 3</span></span><br><span class="line"><span class="comment">Slice: [a b c d], Type: []string, Len: 4, Cap: 3</span></span><br><span class="line"><span class="comment">a</span></span><br><span class="line"><span class="comment">b</span></span><br><span class="line"><span class="comment">c</span></span><br><span class="line"><span class="comment">d</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>
<h5 id="æ˜ å°„"><a href="#æ˜ å°„" class="headerlink" title="æ˜ å°„"></a>æ˜ å°„</h5><div class="note info">
            <p><code>map</code> çš„é›¶å€¼æ˜¯ <code>nil</code>ã€‚</p>
          </div>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">  <span class="string">&quot;fmt&quot;</span></span><br><span class="line">  <span class="string">&quot;reflect&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">  <span class="keyword">var</span> student <span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">interface</span>&#123;&#125;</span><br><span class="line">  fmt.Printf(<span class="string">&quot;Type: %s, Value: %v\n&quot;</span>, reflect.TypeOf(student), student)</span><br><span class="line"></span><br><span class="line">  stu1 := <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">int</span>)</span><br><span class="line">  fmt.Printf(<span class="string">&quot;Type: %s, Value: %v\n&quot;</span>, reflect.TypeOf(stu1), stu1)</span><br><span class="line"></span><br><span class="line">  stu2 := <span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">int</span>&#123;<span class="string">&quot;John&quot;</span>: <span class="number">18</span>, <span class="string">&quot;Jack&quot;</span>: <span class="number">20</span>&#125;</span><br><span class="line">  stu2[<span class="string">&quot;Carl&quot;</span>] = <span class="number">28</span></span><br><span class="line"></span><br><span class="line">  fmt.Printf(<span class="string">&quot;John age is %d\n&quot;</span>, stu2[<span class="string">&quot;John&quot;</span>])</span><br><span class="line">  <span class="built_in">delete</span>(stu2, <span class="string">&quot;Carl&quot;</span>)</span><br><span class="line"></span><br><span class="line">  fmt.Printf(<span class="string">&quot;\nPrint stu2 map:&quot;</span>)</span><br><span class="line">  fmt.Println(stu2)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">Type: map[string]interface &#123;&#125;, Value: map[]</span></span><br><span class="line"><span class="comment">Type: map[string]int, Value: map[]</span></span><br><span class="line"><span class="comment">John age is 18</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">Print stu2 map:map[Jack:20 John:18]</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>
<h5 id="é€šé“"><a href="#é€šé“" class="headerlink" title="é€šé“"></a>é€šé“</h5><div class="note info">
            <p>é€šé“æä¾› <code>Goroutine</code> ä¹‹é—´çš„åŒæ­¥å’Œé€šä¿¡ã€‚ä½ å¯ä»¥å°†å…¶è§†ä¸ºç®¡é“ï¼Œ<code>Goroutine</code> å¯ä»¥å‘é€å€¼å’Œæ¥æ”¶å€¼ã€‚æ“ä½œ <code>&lt;-</code> ç”¨äºå‘é€æˆ–æ¥æ”¶ï¼Œå¹¶æŒ‡å®šæ•°æ®æµåŠ¨æ–¹å‘çš„ç®­å¤´æ–¹å‘ã€‚</p><p>ä¸¤ç§ç±»å‹çš„é€šé“ï¼š</p><ul><li>æ— ç¼“å†²é€šé“ï¼ˆUnbuffered Channelï¼‰ï¼šå®ƒæ²¡æœ‰ä»»ä½•å®¹çº³èƒ½åŠ›å’Œå€¼ï¼š<ul><li>é™¤éæœ‰å¦ä¸€ä¸ª <code>Goroutine</code> æ¥æ”¶ï¼Œå¦åˆ™å‘é€åœ¨é¢‘é“ä¸Šæ˜¯é˜»å¡çš„ï¼›</li><li>æ¥æ”¶æ˜¯é˜»å¡çš„ï¼Œç›´åˆ°å¦ä¸€ä¸ª <code>Goroutine</code> åœ¨ä¸€è¾¹å»å‘é€ï¼›</li></ul></li><li>å¸¦ç¼“å†²é€šé“ï¼ˆBuffered Channelï¼‰ï¼šå¯ä»¥åœ¨æ­¤å¤„æŒ‡å®šç¼“å†²åŒºçš„å¤§å°ï¼š<ul><li>å¦‚æœç¼“å†²åŒºå·²æ»¡ï¼Œåˆ™ä»…å‘é€é˜»å¡çš„ç¼“å†²é€šé“ï¼›</li><li>æ¥æ”¶å”¯ä¸€çš„é˜»å¡æ˜¯é€šé“çš„ç¼“å†²åŒºæ˜¯ç©ºçš„ï¼›</li></ul></li></ul>
          </div>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">  <span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">  <span class="comment">// Creating a buffered channel of length 4</span></span><br><span class="line">  bufChan := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="keyword">string</span>, <span class="number">4</span>)</span><br><span class="line">  bufChan &lt;- <span class="string">&quot;ğŸš€ Hello &quot;</span></span><br><span class="line">  bufChan &lt;- <span class="string">&quot;World, &quot;</span></span><br><span class="line">  bufChan &lt;- <span class="string">&quot;Hello &quot;</span></span><br><span class="line">  bufChan &lt;- <span class="string">&quot;Go!\n&quot;</span></span><br><span class="line"></span><br><span class="line">  <span class="built_in">close</span>(bufChan)</span><br><span class="line">  <span class="keyword">for</span> ch := <span class="keyword">range</span> bufChan &#123;</span><br><span class="line">    fmt.Print(ch)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Creating a unbuffered channel</span></span><br><span class="line">  unbufChan := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="keyword">string</span>)</span><br><span class="line">  <span class="keyword">go</span> sendChan(unbufChan)</span><br><span class="line">  <span class="keyword">for</span> ch := <span class="keyword">range</span> unbufChan &#123;</span><br><span class="line">    fmt.Print(ch)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">sendChan</span><span class="params">(ch <span class="keyword">chan</span>&lt;- <span class="keyword">string</span>)</span></span> &#123;</span><br><span class="line">  ch &lt;- <span class="string">&quot;ğŸš€ Hello &quot;</span></span><br><span class="line">  ch &lt;- <span class="string">&quot;World, &quot;</span></span><br><span class="line">  ch &lt;- <span class="string">&quot;Hello &quot;</span></span><br><span class="line">  ch &lt;- <span class="string">&quot;Go!&quot;</span></span><br><span class="line">  <span class="built_in">close</span>(ch)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">ğŸš€ Hello World, Hello Go!</span></span><br><span class="line"><span class="comment">ğŸš€ Hello World, Hello Go!</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>
<h5 id="å‡½æ•°"><a href="#å‡½æ•°" class="headerlink" title="å‡½æ•°"></a>å‡½æ•°</h5><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">  add := <span class="function"><span class="keyword">func</span><span class="params">(x, y <span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line">    <span class="keyword">return</span> x + y</span><br><span class="line">  &#125;</span><br><span class="line">  fmt.Println(doExecute(add, <span class="number">10</span>, <span class="number">20</span>))</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">doExecute</span><span class="params">(fn <span class="keyword">func</span>(<span class="keyword">int</span>, <span class="keyword">int</span>)</span> <span class="title">int</span>, <span class="title">x</span>, <span class="title">y</span> <span class="title">int</span>) <span class="title">int</span></span> &#123;</span><br><span class="line">  <span class="keyword">return</span> fn(x, y)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">30</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>
<h5 id="æŒ‡é’ˆ"><a href="#æŒ‡é’ˆ" class="headerlink" title="æŒ‡é’ˆ"></a>æŒ‡é’ˆ</h5><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">  <span class="keyword">var</span> b *<span class="keyword">int</span></span><br><span class="line">  a := <span class="number">88</span></span><br><span class="line">  b = &amp;a</span><br><span class="line">  fmt.Printf(<span class="string">&quot;b: %v, *b: %v\n&quot;</span>, b, *b)</span><br><span class="line"></span><br><span class="line">  b = <span class="built_in">new</span>(<span class="keyword">int</span>)</span><br><span class="line">  *b = <span class="number">99</span></span><br><span class="line">  fmt.Printf(<span class="string">&quot;b: %v, *b: %v\n&quot;</span>, b, *b)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">b: 0xc0000ac008, *b: 88</span></span><br><span class="line"><span class="comment">b: 0xc0000ac018, *b: 99</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>
<h4 id="Interface"><a href="#Interface" class="headerlink" title="Interface"></a>Interface</h4><div class="note info">
            <p><code>interface</code> çš„é›¶å€¼æ˜¯ <code>nil</code>ã€‚</p>
          </div>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> shape <span class="keyword">interface</span> &#123;</span><br><span class="line">  area() <span class="keyword">float64</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> square <span class="keyword">struct</span> &#123;</span><br><span class="line">  side <span class="keyword">float64</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> triangle <span class="keyword">struct</span> &#123;</span><br><span class="line">  bottom <span class="keyword">float64</span></span><br><span class="line">  height <span class="keyword">float64</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(s *square)</span> <span class="title">area</span><span class="params">()</span> <span class="title">float64</span></span> &#123;</span><br><span class="line">  <span class="keyword">return</span> s.side * s.side</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(t *triangle)</span> <span class="title">area</span><span class="params">()</span> <span class="title">float64</span></span> &#123;</span><br><span class="line">  <span class="keyword">return</span> (t.bottom * t.height) / <span class="number">2</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">  <span class="keyword">var</span> s shape</span><br><span class="line">  s = &amp;square&#123;side: <span class="number">4</span>&#125;</span><br><span class="line">  fmt.Printf(<span class="string">&quot;Square area is %v\n&quot;</span>, s.area())</span><br><span class="line"></span><br><span class="line">  t := &amp;triangle&#123;bottom: <span class="number">10</span>, height: <span class="number">12</span>&#125;</span><br><span class="line">  fmt.Printf(<span class="string">&quot;Triangle area is %v\n&quot;</span>, t.area())</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">Square area is 16</span></span><br><span class="line"><span class="comment">Triangle area is 60</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>
<p>ç©ºæ¥å£çš„ç‰¹æ®Šæƒ…å†µï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">  <span class="keyword">var</span> a = [<span class="number">2</span>]<span class="keyword">string</span>&#123;<span class="string">&quot;go&quot;</span>, <span class="string">&quot;js&quot;</span>&#125;</span><br><span class="line">  <span class="keyword">var</span> m = <span class="keyword">map</span>[<span class="keyword">int</span>]<span class="keyword">string</span>&#123;<span class="number">1</span>: <span class="string">&quot;hello&quot;</span>, <span class="number">2</span>: <span class="string">&quot;world&quot;</span>&#125;</span><br><span class="line">  dump(<span class="string">&quot;ğŸš€ Hello World, Hello Go!&quot;</span>)</span><br><span class="line">  dump(<span class="number">123456780</span>)</span><br><span class="line">  dump(<span class="literal">true</span>)</span><br><span class="line">  dump(a)</span><br><span class="line">  dump(m)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">dump</span><span class="params">(v <span class="keyword">interface</span>&#123;&#125;)</span></span> &#123;</span><br><span class="line">  fmt.Printf(<span class="string">&quot;Type: %T, Value: %v\n&quot;</span>, v, v)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">Type: string, Value: ğŸš€ Hello World, Hello Go!</span></span><br><span class="line"><span class="comment">Type: int, Value: 123456780</span></span><br><span class="line"><span class="comment">Type: bool, Value: true</span></span><br><span class="line"><span class="comment">Type: [2]string, Value: [go js]</span></span><br><span class="line"><span class="comment">Type: map[int]string, Value: map[1:hello 2:world]</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>
<h2 id="æ•°å€¼ç±»å‹è¿ç®—ç¬¦"><a href="#æ•°å€¼ç±»å‹è¿ç®—ç¬¦" class="headerlink" title="æ•°å€¼ç±»å‹è¿ç®—ç¬¦"></a>æ•°å€¼ç±»å‹è¿ç®—ç¬¦</h2><ul>
<li>ç®—æœ¯è¿ç®—ç¬¦ï¼š<code>+</code>ã€<code>-</code>ã€<code>*</code>ã€<code>/</code>ã€<code>%</code></li>
<li>æ¯”è¾ƒè¿ç®—ç¬¦ï¼š<code>==</code>ã€<code>!=</code>ã€<code>&gt;</code>ã€<code>&gt;=</code>ã€<code>&lt;=</code>ã€<code>&lt;</code></li>
<li>é€»è¾‘è¿ç®—ç¬¦ï¼š<code>&amp;&amp;</code>ã€<code>||</code>ã€<code>!</code></li>
<li>å¢å‡è¿ç®—ç¬¦ï¼š<code>++</code>ã€<code>--</code></li>
<li>æŒ‰ä½è¿ç®—ç¬¦ï¼š<code>&amp;</code>ã€<code>|</code>ã€<code>^</code>ã€<code>&lt;&lt;</code>ã€<code>&gt;&gt;</code>ã€<code>&amp;^</code></li>
<li>èµ‹å€¼è¿ç®—ç¬¦ï¼š<code>+=</code>ã€<code>-=</code>ã€<code>*=</code>ã€<code>/=</code>ã€<code>%=</code>ã€<code>&lt;&lt;=</code>ã€<code>&gt;&gt;=</code>ã€<code>&amp;=</code>ã€<code>|=</code>ã€<code>^=</code></li>
</ul>
<h2 id="è¿ç®—ç¬¦ä¼˜åŒ–çº§"><a href="#è¿ç®—ç¬¦ä¼˜åŒ–çº§" class="headerlink" title="è¿ç®—ç¬¦ä¼˜åŒ–çº§"></a>è¿ç®—ç¬¦ä¼˜åŒ–çº§</h2><table>
<thead>
<tr>
<th>Priority</th>
<th>Category</th>
<th>Operator</th>
<th>Associativity</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>Postfix</td>
<td><code>() [] -&gt; . ++ --</code></td>
<td>Left to right</td>
</tr>
<tr>
<td>2</td>
<td>Unary</td>
<td><code>+ - ! ~ ++ -- (type)* &amp; sizeof</code></td>
<td>Right to left</td>
</tr>
<tr>
<td>3</td>
<td>Multiplicative</td>
<td><code>* / %</code></td>
<td>Left to right</td>
</tr>
<tr>
<td>4</td>
<td>Additive</td>
<td><code>+ -</code></td>
<td>Left to right</td>
</tr>
<tr>
<td>5</td>
<td>Shift</td>
<td><code>&lt;&lt; &gt;&gt;</code></td>
<td>Left to right</td>
</tr>
<tr>
<td>6</td>
<td>Relational</td>
<td><code>&lt; &lt;= &gt;= &gt;</code></td>
<td>Left to right</td>
</tr>
<tr>
<td>7</td>
<td>Equality</td>
<td><code>== !=</code></td>
<td>Left to right</td>
</tr>
<tr>
<td>8</td>
<td>Bitwise AND</td>
<td><code>&amp;</code></td>
<td>Left to right</td>
</tr>
<tr>
<td>9</td>
<td>Bitwise XOR</td>
<td><code>^</code></td>
<td>Left to right</td>
</tr>
<tr>
<td>10</td>
<td>Bitwise OR</td>
<td><code>â®</code></td>
<td>Left to right</td>
</tr>
<tr>
<td>11</td>
<td>Logical AND</td>
<td><code>&amp;&amp;</code></td>
<td>Left to right</td>
</tr>
<tr>
<td>12</td>
<td>Logical OR</td>
<td><code>â®â®</code></td>
<td>Left to right</td>
</tr>
<tr>
<td>13</td>
<td>Assignment</td>
<td><code>= += -= *= /= %= = &gt;&gt;= &lt;&lt;= &amp;= ^= â®=</code></td>
<td>Right to right</td>
</tr>
<tr>
<td>14</td>
<td>Comma</td>
<td><code>,</code></td>
<td>Left to right</td>
</tr>
</tbody>
</table>
]]></content>
      <categories>
        <category>go</category>
      </categories>
      <tags>
        <tag>go</tag>
      </tags>
  </entry>
  <entry>
    <title>Go èµ·æ­¥</title>
    <url>/2021/06/26/go-get-started/</url>
    <content><![CDATA[<p>ğŸš€ Go æ˜¯äº’è”ç½‘æ—¶ä»£çš„ C è¯­è¨€ï¼Œæ­¤è¨€éè™šï¼Œä½†å‡¡çœ‹çœ‹å¸‚åœºçš„æ‹›è˜éœ€æ±‚ï¼Œä¸å¾—ä¸è®©äººè·ƒè·ƒæ¬²è¯•ï¼Œä¸å…¶è¯´æ˜¯ä¸»åŠ¨å‡ºå‡»ï¼Œå€’ä¸å¦‚è¯´æ˜¯è£¹æŒŸå‰è¿›ã€‚å¥½å§ï¼Œæˆ‘è¡¨ç¤ºå­¦ä¸åŠ¨äº†ã€‚</p>
<span id="more"></span>
<ul>
<li><strong>Go èµ·æ­¥</strong></li>
<li><a href="https://imajinyun.xyz/2021/07/02/go-data-type/">Go æ•°æ®ç±»å‹</a></li>
<li><a href="https://imajinyun.xyz/2021/07/11/go-date-time/">Go æ—¥æœŸæ—¶é—´</a></li>
<li><a href="https://imajinyun.xyz/2021/07/14/go-random-number/">Go éšæœºæ•°</a></li>
<li><a href="https://imajinyun.xyz/2021/07/16/go-unit-test/">Go å•å…ƒæµ‹è¯•</a></li>
<li><a href="https://imajinyun.xyz/2021/07/17/go-benchmark-test/">Go åŸºå‡†æµ‹è¯•</a></li>
<li><a href="https://imajinyun.xyz/2021/07/22/go-other-test/">Go å…¶å®ƒæµ‹è¯•</a></li>
<li><a href="https://imajinyun.xyz/2021/07/24/go-correct-posture/">Go æ­£ç¡®å§¿åŠ¿</a></li>
<li><a href="https://imajinyun.xyz/2021/07/25/go-concat-string/">Go è¿æ¥å­—ç¬¦ä¸²</a></li>
</ul>
<blockquote>
<p>Go is an open source programming language that makes it easy to build simple, reliable, and efficient software.</p>
</blockquote>
<p>Go æ˜¯æœ‰è¡¨ç°åŠ›çš„ã€ç®€æ´çš„ã€å¹²å‡€çš„å’Œé«˜æ•ˆçš„ã€‚å®ƒçš„å¹¶å‘æœºåˆ¶ä½¿ç¼–å†™ç¨‹åºæ›´å®¹æ˜“ï¼Œä»¥æœ€å¤§é™åº¦åœ°åˆ©ç”¨å¤šæ ¸å’Œè”ç½‘æœºå™¨ï¼Œè€Œå…¶æ–°é¢–çš„ç±»å‹ç³»ç»Ÿä½¿ç¨‹åºæ„é€ çµæ´»å’Œæ¨¡å—åŒ–ã€‚Go å¯ä»¥å¿«é€Ÿç¼–è¯‘æˆæœºå™¨ç ï¼ŒåŒæ—¶è¿˜å…·æœ‰åƒåœ¾æ”¶é›†çš„ä¾¿åˆ©å’Œè¿è¡Œæ—¶åå°„çš„å¼ºå¤§åŠŸèƒ½ã€‚å®ƒæ˜¯ä¸€ç§å¿«é€Ÿã€é™æ€ç±»å‹çš„ç¼–è¯‘è¯­è¨€ï¼Œæ„Ÿè§‰å°±åƒä¸€ç§åŠ¨æ€ç±»å‹çš„è§£é‡Šè¯­è¨€ã€‚</p>
<p>Go æœ‰å¾ˆå¤šç‰¹æ€§ï¼Œæœ‰ä¸€äº›æ˜¯ç‹¬ç‰¹çš„ï¼Œæœ‰ä¸€äº›æ˜¯å€Ÿé‰´å…¶å®ƒç¼–ç¨‹è¯­è¨€çš„ï¼š</p>
<ul>
<li>å†…ç½®å¹¶å‘ç¼–ç¨‹æ”¯æŒï¼š<ul>
<li>ä½¿ç”¨åç¨‹ï¼ˆGoroutineï¼‰åšä¸ºåŸºæœ¬çš„è®¡ç®—å•å…ƒã€‚è½»æ¾åœ°åˆ›å»ºåå’Œï¼›</li>
<li>ä½¿ç”¨é€šé“ï¼ˆChannelï¼‰æ¥å®ç°åç¨‹é—´çš„åŒæ­¥å’Œé€šä¿¡ï¼›</li>
</ul>
</li>
<li>å†…ç½®äº†æ˜ å°„ï¼ˆMapï¼‰å’Œåˆ‡ç‰‡ï¼ˆSliceï¼‰ç±»å‹ï¼›</li>
<li>æ”¯æŒå¤šæ€ï¼ˆPolymorphismï¼‰ï¼›</li>
<li>ä½¿ç”¨æ¥å£ï¼ˆInterfaceï¼‰æ¥å®ç°è£…ç›’ï¼ˆValue Boxingï¼‰å’Œåå°„ï¼ˆReflectionï¼‰ï¼›</li>
<li>æ”¯æŒæŒ‡é’ˆï¼ˆPointerï¼‰ï¼›</li>
<li>æ”¯æŒå‡½æ•°é—­åŒ…ï¼ˆClosureï¼‰ï¼›</li>
<li>æ”¯æŒæ–¹æ³•ï¼ˆMethodï¼‰ï¼›</li>
<li>æ”¯æŒå»¶è¿Ÿå‡½æ•°è°ƒç”¨ï¼ˆDeferï¼‰ï¼›</li>
<li>æ”¯æŒç±»å‹å†…åµŒï¼ˆType Embedingï¼‰ï¼›</li>
<li>æ”¯æŒç±»å‹æ¨æ–­ï¼ˆType Deduction or Type Inferenceï¼‰ï¼›</li>
<li>å†…å­˜å®‰å…¨ï¼›</li>
<li>è‡ªåŠ¨åƒåœ¾å›æ”¶ï¼›</li>
<li>è‰¯å¥½çš„ä»£ç è·¨å¹³å°ï¼›</li>
<li>æ¯”è¾ƒç®€æ´çš„è¯­æ³•ï¼›</li>
<li>æ¯”è¾ƒé½å…¨çš„æ ‡å‡†åº“ï¼›</li>
<li>æ´»è·ƒå’Œå¿«é€Ÿå“åº”çš„ç¤¾åŒºï¼Œ<a href="https://github.com/avelino/awesome-go">ç¤¾åŒºä¸‰æ–¹åŒ…å’Œåº”ç”¨</a></li>
<li>è¿˜æœ‰ä¸€ä¸ªç»Ÿä¸€çš„ç§°å· <code>gopher - [&#39;É¡oÊŠfÉ™]</code>ï¼Œå³ <strong>åœ°é¼ </strong>ï¼Œå°½ç®¡å…¶å®ƒè¯­è¨€ä¹Ÿæœ‰ç±»ä¼¼çš„ï¼›</li>
</ul>
<h2 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><p><a href="https://golang.org/doc/install">Go installer</a></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// é€šè¿‡ brew å‘½ä»¤å®‰è£… Go</span><br><span class="line">&gt; brew install go</span><br><span class="line"></span><br><span class="line">// éªŒè¯å·²ç»å®‰è£…çš„ Go ç‰ˆæœ¬</span><br><span class="line">&gt; go version</span><br><span class="line">go version go1.17.2 darwin/arm64</span><br></pre></td></tr></table></figure>
<h2 id="å‘½ä»¤"><a href="#å‘½ä»¤" class="headerlink" title="å‘½ä»¤"></a>å‘½ä»¤</h2><p>Go è¯­è¨€å†…ç½®çš„æ‰€æœ‰å‘½ä»¤ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">Go is a tool <span class="keyword">for</span> managing Go <span class="built_in">source</span> code.</span><br><span class="line"></span><br><span class="line">Usage:</span><br><span class="line"></span><br><span class="line">	go &lt;<span class="built_in">command</span>&gt; [arguments]</span><br><span class="line"></span><br><span class="line">The commands are:</span><br><span class="line"></span><br><span class="line">	bug         start a bug report</span><br><span class="line">	build       compile packages and dependencies</span><br><span class="line">	clean       remove object files and cached files</span><br><span class="line">	doc         show documentation <span class="keyword">for</span> package or symbol</span><br><span class="line">	env         <span class="built_in">print</span> Go environment information</span><br><span class="line">	fix         update packages to use new APIs</span><br><span class="line">	fmt         gofmt (reformat) package sources</span><br><span class="line">	generate    generate Go files by processing <span class="built_in">source</span></span><br><span class="line">	get         add dependencies to current module and install them</span><br><span class="line">	install     compile and install packages and dependencies</span><br><span class="line">	list        list packages or modules</span><br><span class="line">	mod         module maintenance</span><br><span class="line">	run         compile and run Go program</span><br><span class="line">	<span class="built_in">test</span>        <span class="built_in">test</span> packages</span><br><span class="line">	tool        run specified go tool</span><br><span class="line">	version     <span class="built_in">print</span> Go version</span><br><span class="line">	vet         report likely mistakes <span class="keyword">in</span> packages</span><br><span class="line"></span><br><span class="line">Use <span class="string">&quot;go help &lt;command&gt;&quot;</span> <span class="keyword">for</span> more information about a <span class="built_in">command</span>.</span><br><span class="line"></span><br><span class="line">Additional <span class="built_in">help</span> topics:</span><br><span class="line"></span><br><span class="line">	buildconstraint build constraints</span><br><span class="line">	buildmode       build modes</span><br><span class="line">	c               calling between Go and C</span><br><span class="line">	cache           build and <span class="built_in">test</span> caching</span><br><span class="line">	environment     environment variables</span><br><span class="line">	filetype        file types</span><br><span class="line">	go.mod          the go.mod file</span><br><span class="line">	gopath          GOPATH environment variable</span><br><span class="line">	gopath-get      legacy GOPATH go get</span><br><span class="line">	goproxy         module proxy protocol</span><br><span class="line">	importpath      import path syntax</span><br><span class="line">	modules         modules, module versions, and more</span><br><span class="line">	module-get      module-aware go get</span><br><span class="line">	module-auth     module authentication using go.sum</span><br><span class="line">	packages        package lists and patterns</span><br><span class="line">	private         configuration <span class="keyword">for</span> downloading non-public code</span><br><span class="line">	testflag        testing flags</span><br><span class="line">	testfunc        testing <span class="built_in">functions</span></span><br><span class="line">	vcs             controlling version control with GOVCS</span><br><span class="line"></span><br><span class="line">Use <span class="string">&quot;go help &lt;topic&gt;&quot;</span> <span class="keyword">for</span> more information about that topic.</span><br></pre></td></tr></table></figure>
<h2 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h2><ul>
<li>é…ç½® Go PATH è·¯å¾„ï¼š</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// æ‰“å¼€ .zshrc æˆ–è€… .bashrcï¼Œä¹‹æ‰€ä»¥è¿™æ ·è®¾ç½®æ˜¯å› ä¸ºæœ¬äººä¸å–œæ¬¢ go ç›®å½•ç›´æ¥è®¾ç½®åˆ° <span class="variable">$HOME</span> ä¸‹ï¼Œä»…æ­¤è€Œå·²</span><br><span class="line">&gt; vim ~/.zshrc</span><br><span class="line"><span class="built_in">export</span> GOPATH=<span class="string">&quot;<span class="variable">$HOME</span>/Codes/go&quot;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>é…ç½® Go ENV ç¯å¢ƒå˜é‡ï¼š</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// å¼€å¯ GO111MODULE</span><br><span class="line">&gt; go env -w GO111MODULE=on</span><br><span class="line"></span><br><span class="line">// é…ç½®ä»£ç†ï¼Œä»…é™å¤§é™†åœ°åŒº</span><br><span class="line">&gt; go env -w GOPROXY=https://goproxy.cn,https://goproxy.io,direct</span><br><span class="line"></span><br><span class="line">// æŸ¥çœ‹ç¯å¢ƒå˜é‡</span><br><span class="line">&gt; go evn</span><br><span class="line">GO111MODULE=<span class="string">&quot;on&quot;</span></span><br><span class="line">GOARCH=<span class="string">&quot;arm64&quot;</span></span><br><span class="line">GOBIN=<span class="string">&quot;&quot;</span></span><br><span class="line">GOCACHE=<span class="string">&quot;/Users/xxx/Library/Caches/go-build&quot;</span></span><br><span class="line">GOENV=<span class="string">&quot;/Users/xxx/Library/Application Support/go/env&quot;</span></span><br><span class="line">GOEXE=<span class="string">&quot;&quot;</span></span><br><span class="line">GOEXPERIMENT=<span class="string">&quot;&quot;</span></span><br><span class="line">GOFLAGS=<span class="string">&quot;&quot;</span></span><br><span class="line">GOHOSTARCH=<span class="string">&quot;arm64&quot;</span></span><br><span class="line">GOHOSTOS=<span class="string">&quot;darwin&quot;</span></span><br><span class="line">GOINSECURE=<span class="string">&quot;&quot;</span></span><br><span class="line">GOMODCACHE=<span class="string">&quot;/Users/xxx/Codes/go/pkg/mod&quot;</span></span><br><span class="line">GONOPROXY=<span class="string">&quot;&quot;</span></span><br><span class="line">GONOSUMDB=<span class="string">&quot;&quot;</span></span><br><span class="line">GOOS=<span class="string">&quot;darwin&quot;</span></span><br><span class="line">GOPATH=<span class="string">&quot;/Users/xxx/Codes/go&quot;</span></span><br><span class="line">GOPRIVATE=<span class="string">&quot;&quot;</span></span><br><span class="line">GOPROXY=<span class="string">&quot;https://proxy.golang.org,direct&quot;</span></span><br><span class="line">GOROOT=<span class="string">&quot;/opt/homebrew/Cellar/go/1.17.2/libexec&quot;</span></span><br><span class="line">GOSUMDB=<span class="string">&quot;sum.golang.org&quot;</span></span><br><span class="line">GOTMPDIR=<span class="string">&quot;&quot;</span></span><br><span class="line">GOTOOLDIR=<span class="string">&quot;/opt/homebrew/Cellar/go/1.17.2/libexec/pkg/tool/darwin_arm64&quot;</span></span><br><span class="line">GOVCS=<span class="string">&quot;&quot;</span></span><br><span class="line">GOVERSION=<span class="string">&quot;go1.17.2&quot;</span></span><br><span class="line">GCCGO=<span class="string">&quot;gccgo&quot;</span></span><br><span class="line">AR=<span class="string">&quot;ar&quot;</span></span><br><span class="line">CC=<span class="string">&quot;clang&quot;</span></span><br><span class="line">CXX=<span class="string">&quot;clang++&quot;</span></span><br><span class="line">CGO_ENABLED=<span class="string">&quot;1&quot;</span></span><br><span class="line">GOMOD=<span class="string">&quot;/dev/null&quot;</span></span><br><span class="line">CGO_CFLAGS=<span class="string">&quot;-g -O2&quot;</span></span><br><span class="line">CGO_CPPFLAGS=<span class="string">&quot;&quot;</span></span><br><span class="line">CGO_CXXFLAGS=<span class="string">&quot;-g -O2&quot;</span></span><br><span class="line">CGO_FFLAGS=<span class="string">&quot;-g -O2&quot;</span></span><br><span class="line">CGO_LDFLAGS=<span class="string">&quot;-g -O2&quot;</span></span><br><span class="line">PKG_CONFIG=<span class="string">&quot;pkg-config&quot;</span></span><br><span class="line">GOGCCFLAGS=<span class="string">&quot;-fPIC -arch arm64 -pthread -fno-caret-diagnostics -Qunused-arguments -fmessage-length=0 -fdebug-prefix-map=/var/folders/nk/dtkbhx993b57y5kt49l4qsb40000gn/T/go-build1748431349=/tmp/go-build -gno-record-gcc-switches -fno-common&quot;</span></span><br></pre></td></tr></table></figure>
<h2 id="è¿è¡Œ"><a href="#è¿è¡Œ" class="headerlink" title="è¿è¡Œ"></a>è¿è¡Œ</h2><ul>
<li>åˆ‡æ¢åˆ°æŸä¸ªç›®å½•ï¼š</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cd</span> /path/to</span><br></pre></td></tr></table></figure>
<ul>
<li>åˆ›å»º Go çš„æºä»£ç ç›®å½•ï¼š</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">&gt; mkdir hello</span><br><span class="line">&gt; <span class="built_in">cd</span> hello</span><br></pre></td></tr></table></figure>
<ul>
<li>å¯ç”¨ä¾èµ–ç®¡ç†ï¼š</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">&gt; go mod init github.com/xxx/hello/</span><br><span class="line">go: creating new go.mod: module github.com/xxx/hello</span><br></pre></td></tr></table></figure>
<ul>
<li>åˆ›å»ºç¨‹åºæ–‡ä»¶ï¼š</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">&gt; touch main.go</span><br><span class="line">&gt; vim main.go</span><br></pre></td></tr></table></figure>
<ul>
<li>ç¼–å†™ç®€å•ç¨‹åºï¼š</li>
</ul>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">  fmt.Println(<span class="string">&quot;Hello World, Hello Go!&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>ç¼–è¯‘å¹¶è¿è¡Œç¨‹åºï¼š</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">&gt; go build -o main ./main.go</span><br><span class="line">&gt; go run .</span><br><span class="line">æˆ–è€…</span><br><span class="line">&gt; go run main.go</span><br><span class="line">Hello World, Hello Go!</span><br></pre></td></tr></table></figure>
<p>è‡³æ­¤ï¼Œä¸€ä¸ª <code>Hello World</code> çš„ Go ç¨‹åºå·²ç»è·‘èµ·æ¥äº†ï¼</p>
<h2 id="æ¨¡å—"><a href="#æ¨¡å—" class="headerlink" title="æ¨¡å—"></a>æ¨¡å—</h2><ul>
<li>åœ¨æ‰§è¡Œæ„å»ºå‰è‡ªåŠ¨åˆ†ææºç ä¸­çš„ä¾èµ–å˜åŒ–ï¼Œè¯†åˆ«æ–°å¢ä¾èµ–é¡¹å¹¶ä¸‹è½½ï¼š</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">&gt; go mod tidy</span><br></pre></td></tr></table></figure>
<ul>
<li>æŸ¥è¯¢å‘å¸ƒç‰ˆæœ¬ï¼š</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">&gt; go list -m -versions github.com/sirupsen/logrus</span><br><span class="line">github.com/sirupsen/logrus v0.1.0 v0.1.1 v0.2.0 v0.3.0 v0.4.0 v0.4.1 v0.5.0 v0.5.1 v0.6.0 v0.6.1 v0.6.2 v0.6.3 v0.6.4 v0.6.5 v0.6.6 v0.7.0 v0.7.1 v0.7.2 v0.7.3 v0.8.0 v0.8.1 v0.8.2 v0.8.3 v0.8.4 v0.8.5 v0.8.6 v0.8.7 v0.9.0 v0.10.0 v0.11.0 v0.11.1 v0.11.2 v0.11.3 v0.11.4 v0.11.5 v1.0.0 v1.0.1 v1.0.3 v1.0.4 v1.0.5 v1.0.6 v1.1.0 v1.1.1 v1.2.0 v1.3.0 v1.4.0 v1.4.1 v1.4.2 v1.5.0 v1.6.0 v1.7.0 v1.7.1 v1.8.0 v1.8.1</span><br></pre></td></tr></table></figure>
<ul>
<li>å®‰è£…æœ€æ–°ç‰ˆæœ¬ï¼š</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">&gt; go get github.com/sirupsen/logrus</span><br></pre></td></tr></table></figure>
<ul>
<li>å®‰è£…æŒ‡å®šç‰ˆæœ¬ï¼š</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">&gt; go get github.com/sirupsen/logrus@v1.7.0</span><br></pre></td></tr></table></figure>
<ul>
<li>ä½¿ç”¨ <code>go mod edit</code> æŒ‡å®šç‰ˆæœ¬ï¼ˆå‡å¦‚è¦ä¿®æ”¹å¤šä¸ªåŒ…ç‰ˆæœ¬ï¼‰å¹¶ç”¨ <code>go mod tidy</code> æ‰¹é‡æ›´æ–°ï¼š</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">&gt; go mod edit -require=github.com/sirupsen/logrus@v1.7.0</span><br><span class="line">&gt; go mod tidy</span><br></pre></td></tr></table></figure>
<ul>
<li>æŸ¥è¯¢å½“å‰é¡¹ç›®çš„æ‰€æœ‰ä¾èµ–ï¼š</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">&gt; go list -m all</span><br></pre></td></tr></table></figure>
<ul>
<li>é¡¹ç›®å»ºç«‹ <code>vendor</code> ä¾èµ–ç›®å½•ï¼Œå¦‚æœåŸºäº <code>vendor</code> æ„å»ºï¼Œéœ€è¦åœ¨ <code>go build</code> åé¢åŠ ä¸Š <code>-mod=vendor</code> å‚æ•°ï¼š</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">&gt; go mod vendor</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>go</category>
      </categories>
      <tags>
        <tag>go</tag>
      </tags>
  </entry>
  <entry>
    <title>Go å…¶å®ƒæµ‹è¯•</title>
    <url>/2021/07/22/go-other-test/</url>
    <content><![CDATA[<p>Go çš„ testing åŒ…é™¤äº†æµ‹è¯•ï¼Œè¿˜æä¾›äº†è¿è¡Œå¹¶éªŒè¯ç¤ºä¾‹çš„åŠŸèƒ½ã€‚ä¸€æ–¹é¢æ˜¯æ–‡æ¡£çš„æ•ˆæœï¼Œæ˜¯å…³äºæŸä¸ªåŠŸèƒ½çš„ä½¿ç”¨ä¾‹å­ï¼›å¦ä¸€æ–¹é¢ï¼Œå¯ä»¥è¢«å½“åšæµ‹è¯•è¿è¡Œã€‚</p>
<span id="more"></span>
<ul>
<li><a href="https://imajinyun.xyz/2021/06/26/go-get-started/">Go èµ·æ­¥</a></li>
<li><a href="https://imajinyun.xyz/2021/07/02/go-data-type/">Go æ•°æ®ç±»å‹</a></li>
<li><a href="https://imajinyun.xyz/2021/07/11/go-date-time/">Go æ—¥æœŸæ—¶é—´</a></li>
<li><a href="https://imajinyun.xyz/2021/07/14/go-random-number/">Go éšæœºæ•°</a></li>
<li><a href="https://imajinyun.xyz/2021/07/16/go-unit-test/">Go å•å…ƒæµ‹è¯•</a></li>
<li><a href="https://imajinyun.xyz/2021/07/17/go-benchmark-test/">Go åŸºå‡†æµ‹è¯•</a></li>
<li><strong>Go å…¶å®ƒæµ‹è¯•</strong></li>
<li><a href="https://imajinyun.xyz/2021/07/24/go-correct-posture/">Go æ­£ç¡®å§¿åŠ¿</a></li>
<li><a href="https://imajinyun.xyz/2021/07/25/go-concat-string/">Go è¿æ¥å­—ç¬¦ä¸²</a></li>
</ul>
<h2 id="ç¤ºä¾‹æµ‹è¯•"><a href="#ç¤ºä¾‹æµ‹è¯•" class="headerlink" title="ç¤ºä¾‹æµ‹è¯•"></a>ç¤ºä¾‹æµ‹è¯•</h2><h3 id="ç¤ºä¾‹æµ‹è¯•å‡½æ•°æ ¼å¼"><a href="#ç¤ºä¾‹æµ‹è¯•å‡½æ•°æ ¼å¼" class="headerlink" title="ç¤ºä¾‹æµ‹è¯•å‡½æ•°æ ¼å¼"></a>ç¤ºä¾‹æµ‹è¯•å‡½æ•°æ ¼å¼</h3><p>Go è¯­è¨€é€šè¿‡å¤§é‡çš„å‘½åçº¦å®šæ¥ç®€åŒ–å·¥å…·çš„å¤æ‚åº¦ï¼Œè§„èŒƒä»£ç çš„é£æ ¼ã€‚å¯¹ç¤ºä¾‹å‡½æ•°çš„å‘½åæœ‰å¦‚ä¸‹çº¦å®šï¼š</p>
<ul>
<li>åŒ…çº§åˆ«çš„ç¤ºä¾‹å‡½æ•°ï¼Œç›´æ¥å‘½åä¸ºï¼š<code>func Example() &#123; ... &#125;</code>ï¼›</li>
<li>å‡½æ•° <code>F</code> çš„ç¤ºä¾‹ï¼Œå‘½åä¸ºï¼š<code>func ExampleF() &#123; ... &#125;</code>ï¼›</li>
<li>ç±»å‹ <code>T</code> çš„ç¤ºä¾‹ï¼Œå‘½åä¸ºï¼š<code>func ExampleT() &#123; ... &#125;</code>ï¼›</li>
<li>ç±»å‹ <code>T</code> ä¸Šçš„æ–¹æ³• <code>M</code> çš„ç¤ºä¾‹ï¼Œå‘½åä¸ºï¼š<code>func ExampleT_M() &#123; ... &#125;</code>ï¼›</li>
</ul>
<p>æœ‰æ—¶ï¼Œæˆ‘ä»¬æƒ³è¦ç»™ <code>åŒ…/ç±»å‹/å‡½æ•°/æ–¹æ³•</code> æä¾›å¤šä¸ªç¤ºä¾‹ï¼Œå¯ä»¥é€šè¿‡åœ¨ç¤ºä¾‹å‡½æ•°åç§°åé™„åŠ ä¸€ä¸ªä¸åŒçš„åç¼€æ¥å®ç°ï¼Œä½†è¿™ç§åç¼€å¿…é¡»ä»¥å°å†™å­—æ¯å¼€å¤´ï¼Œå¦‚ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Example_suffix</span><span class="params">()</span></span>    &#123; ... &#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">ExampleF_suffix</span><span class="params">()</span></span>   &#123; ... &#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">ExampleT_suffix</span><span class="params">()</span></span>   &#123; ... &#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">ExampleT_M_suffix</span><span class="params">()</span></span> &#123; ... &#125;</span><br></pre></td></tr></table></figure>
<h3 id="ç¤ºä¾‹æµ‹è¯•å®ä¾‹"><a href="#ç¤ºä¾‹æµ‹è¯•å®ä¾‹" class="headerlink" title="ç¤ºä¾‹æµ‹è¯•å®ä¾‹"></a>ç¤ºä¾‹æµ‹è¯•å®ä¾‹</h3><h4 id="ç¤ºä¾‹ä¸€"><a href="#ç¤ºä¾‹ä¸€" class="headerlink" title="ç¤ºä¾‹ä¸€"></a>ç¤ºä¾‹ä¸€</h4><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> hello</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">  <span class="string">&quot;fmt&quot;</span></span><br><span class="line">  <span class="string">&quot;strings&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">ExampleToUpper</span><span class="params">()</span></span> &#123;</span><br><span class="line">  fmt.Println(strings.ToUpper(<span class="string">&quot;foo&quot;</span>))</span><br><span class="line">  <span class="comment">// Output: FOO</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">ExampleToUpperFail</span><span class="params">()</span></span> &#123;</span><br><span class="line">  fmt.Println(strings.ToUpper(<span class="string">&quot;bar&quot;</span>))</span><br><span class="line">  <span class="comment">// Output: Bar</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ go <span class="built_in">test</span> -v -timeout 30s -run <span class="string">&#x27;^(ExampleToUpper|ExampleToUpperFail)$&#x27;</span> example.com/hello</span><br><span class="line"></span><br><span class="line">=== RUN   ExampleToUpper</span><br><span class="line">--- PASS: ExampleToUpper (0.00s)</span><br><span class="line">=== RUN   ExampleToUpperFail</span><br><span class="line">--- FAIL: ExampleToUpperFail (0.00s)</span><br><span class="line">got:</span><br><span class="line">BAR</span><br><span class="line">want:</span><br><span class="line">Bar</span><br><span class="line">FAIL</span><br><span class="line">FAIL	example.com/hello	0.008s</span><br></pre></td></tr></table></figure>
<h4 id="ç¤ºä¾‹äºŒ"><a href="#ç¤ºä¾‹äºŒ" class="headerlink" title="ç¤ºä¾‹äºŒ"></a>ç¤ºä¾‹äºŒ</h4><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> hello</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">  <span class="string">&quot;fmt&quot;</span></span><br><span class="line">  <span class="string">&quot;sort&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Person <span class="keyword">struct</span> &#123;</span><br><span class="line">  Name <span class="keyword">string</span></span><br><span class="line">  Age  <span class="keyword">int</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(p Person)</span> <span class="title">String</span><span class="params">()</span> <span class="title">string</span></span> &#123;</span><br><span class="line">  <span class="keyword">return</span> fmt.Sprintf(<span class="string">&quot;%s: %d&quot;</span>, p.Name, p.Age)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ByAge implements sort.Interface for []Person based on the Age field.</span></span><br><span class="line"><span class="keyword">type</span> SortByAge []Person</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(a SortByAge)</span> <span class="title">Len</span><span class="params">()</span> <span class="title">int</span></span>           &#123; <span class="keyword">return</span> <span class="built_in">len</span>(a) &#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(a SortByAge)</span> <span class="title">Swap</span><span class="params">(i, j <span class="keyword">int</span>)</span></span>      &#123; a[i], a[j] = a[j], a[i] &#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(a SortByAge)</span> <span class="title">Less</span><span class="params">(i, j <span class="keyword">int</span>)</span> <span class="title">bool</span></span> &#123; <span class="keyword">return</span> a[i].Age &lt; a[j].Age &#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Example</span><span class="params">()</span></span> &#123;</span><br><span class="line">  people := []Person&#123;</span><br><span class="line">    &#123;<span class="string">&quot;Jack&quot;</span>, <span class="number">31</span>&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;John&quot;</span>, <span class="number">42</span>&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;Acme&quot;</span>, <span class="number">17</span>&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;Pony&quot;</span>, <span class="number">26</span>&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;Wise&quot;</span>, <span class="number">33</span>&#125;,</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  fmt.Println(people)</span><br><span class="line">  sort.Sort(SortByAge(people))</span><br><span class="line">  fmt.Println(people)</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Output:</span></span><br><span class="line">  <span class="comment">// [Jack: 31 John: 42 Acme: 17 Pony: 26 Wise: 33]</span></span><br><span class="line">  <span class="comment">// [Acme: 17 Pony: 26 Jack: 31 Wise: 33 John: 42]</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ go <span class="built_in">test</span> -v -timeout 30s example.com/hello</span><br><span class="line"></span><br><span class="line">=== RUN   Example</span><br><span class="line">--- PASS: Example (0.00s)</span><br><span class="line">PASS</span><br><span class="line">ok  	example.com/hello	0.007s</span><br></pre></td></tr></table></figure>
<h3 id="å®ä¾‹ä¸‰"><a href="#å®ä¾‹ä¸‰" class="headerlink" title="å®ä¾‹ä¸‰"></a>å®ä¾‹ä¸‰</h3><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> hello</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">  <span class="string">&quot;go/ast&quot;</span></span><br><span class="line">  <span class="string">&quot;go/parser&quot;</span></span><br><span class="line">  <span class="string">&quot;log&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">ExampleAST</span><span class="params">()</span></span> &#123;</span><br><span class="line">  expr, err := parser.ParseExpr(<span class="string">&quot;9 / (2 + 1)&quot;</span>)</span><br><span class="line">  <span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">    log.Fatal(err)</span><br><span class="line">  &#125;</span><br><span class="line">  ast.Print(<span class="literal">nil</span>, expr)</span><br><span class="line">  <span class="comment">// Output: 0  *ast.BinaryExpr &#123;</span></span><br><span class="line">  <span class="comment">//      1  .  X: *ast.BasicLit &#123;</span></span><br><span class="line">  <span class="comment">//      2  .  .  ValuePos: 1</span></span><br><span class="line">  <span class="comment">//      3  .  .  Kind: INT</span></span><br><span class="line">  <span class="comment">//      4  .  .  Value: &quot;9&quot;</span></span><br><span class="line">  <span class="comment">//      5  .  &#125;</span></span><br><span class="line">  <span class="comment">//      6  .  OpPos: 3</span></span><br><span class="line">  <span class="comment">//      7  .  Op: /</span></span><br><span class="line">  <span class="comment">//      8  .  Y: *ast.ParenExpr &#123;</span></span><br><span class="line">  <span class="comment">//      9  .  .  Lparen: 5</span></span><br><span class="line">  <span class="comment">//     10  .  .  X: *ast.BinaryExpr &#123;</span></span><br><span class="line">  <span class="comment">//     11  .  .  .  X: *ast.BasicLit &#123;</span></span><br><span class="line">  <span class="comment">//     12  .  .  .  .  ValuePos: 6</span></span><br><span class="line">  <span class="comment">//     13  .  .  .  .  Kind: INT</span></span><br><span class="line">  <span class="comment">//     14  .  .  .  .  Value: &quot;2&quot;</span></span><br><span class="line">  <span class="comment">//     15  .  .  .  &#125;</span></span><br><span class="line">  <span class="comment">//     16  .  .  .  OpPos: 8</span></span><br><span class="line">  <span class="comment">//     17  .  .  .  Op: +</span></span><br><span class="line">  <span class="comment">//     18  .  .  .  Y: *ast.BasicLit &#123;</span></span><br><span class="line">  <span class="comment">//     19  .  .  .  .  ValuePos: 10</span></span><br><span class="line">  <span class="comment">//     20  .  .  .  .  Kind: INT</span></span><br><span class="line">  <span class="comment">//     21  .  .  .  .  Value: &quot;1&quot;</span></span><br><span class="line">  <span class="comment">//     22  .  .  .  &#125;</span></span><br><span class="line">  <span class="comment">//     23  .  .  &#125;</span></span><br><span class="line">  <span class="comment">//     24  .  .  Rparen: 11</span></span><br><span class="line">  <span class="comment">//     25  .  &#125;</span></span><br><span class="line">  <span class="comment">//     26  &#125;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ go <span class="built_in">test</span> -v -timeout 30s -run <span class="string">&#x27;^ExampleAST$&#x27;</span> example.com/hello</span><br><span class="line"></span><br><span class="line">=== RUN   ExampleAST</span><br><span class="line">--- PASS: ExampleAST (0.00s)</span><br><span class="line">PASS</span><br><span class="line">ok  	example.com/hello	(cached)</span><br></pre></td></tr></table></figure>
<h2 id="ä¸»å‡½æ•°æµ‹è¯•"><a href="#ä¸»å‡½æ•°æµ‹è¯•" class="headerlink" title="ä¸»å‡½æ•°æµ‹è¯•"></a>ä¸»å‡½æ•°æµ‹è¯•</h2><div class="note danger">
            <p>æ³¨æ„ï¼šåœ¨ <code>TestMain</code> å‡½æ•°çš„æœ€åï¼Œåº”è¯¥ä½¿ç”¨ <code>m.Run</code> çš„è¿”å›å€¼ä½œä¸ºå‚æ•°å»è°ƒç”¨ <code>os.Exit</code>ã€‚</p>
          </div>
<p>åœ¨å†™æµ‹è¯•æ—¶ï¼Œæœ‰æ—¶éœ€è¦åœ¨æµ‹è¯•ä¹‹å‰æˆ–ä¹‹åè¿›è¡Œé¢å¤–çš„è®¾ç½®ï¼ˆsetupï¼‰æˆ–æ‹†å¸ï¼ˆteardownï¼‰ï¼›æœ‰æ—¶ï¼Œæµ‹è¯•è¿˜éœ€è¦æ§åˆ¶åœ¨ä¸»çº¿ç¨‹ä¸Šè¿è¡Œçš„ä»£ç ã€‚ä¸ºäº†æ”¯æŒè¿™äº›éœ€æ±‚ï¼Œ<code>testing</code> åŒ…æä¾›äº† <code>TestMain</code> å‡½æ•°ï¼ˆé™„ä¸Š <a href="https://github.com/golang/go/blob/master/src/net/http/main_test.go">å®˜æ–¹ TestMain ä½¿ç”¨å§¿åŠ¿</a>ï¼‰ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestMain</span><span class="params">(m *testing.M)</span></span></span><br></pre></td></tr></table></figure>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> hello</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">  <span class="string">&quot;log&quot;</span></span><br><span class="line">  <span class="string">&quot;os&quot;</span></span><br><span class="line">  <span class="string">&quot;testing&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestMain</span><span class="params">(m *testing.M)</span></span> &#123;</span><br><span class="line">  log.Println(<span class="string">&quot;Do stuff BEFORE the tests!&quot;</span>)</span><br><span class="line">  exit := m.Run()</span><br><span class="line">  log.Println(<span class="string">&quot;Do stuff AFTER the tests!&quot;</span>)</span><br><span class="line"></span><br><span class="line">  os.Exit(exit)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestA</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line">  log.Println(<span class="string">&quot;TestA running&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestB</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line">  log.Println(<span class="string">&quot;TestB running&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ go <span class="built_in">test</span> -v -timeout 30s -run <span class="string">&#x27;^(TestMain|TestA|TestB)$&#x27;</span> example.com/hello</span><br><span class="line"></span><br><span class="line">2021/07/22 20:07:25 Do stuff BEFORE the tests!</span><br><span class="line">=== RUN   TestA</span><br><span class="line">2021/07/22 20:07:25 TestA running</span><br><span class="line">--- PASS: TestA (0.00s)</span><br><span class="line">=== RUN   TestB</span><br><span class="line">2021/07/22 20:07:25 TestB running</span><br><span class="line">--- PASS: TestB (0.00s)</span><br><span class="line">PASS</span><br><span class="line">2021/07/22 20:07:25 Do stuff AFTER the tests!</span><br><span class="line">ok  	example.com/hello	(cached)</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>go</category>
      </categories>
      <tags>
        <tag>go</tag>
      </tags>
  </entry>
  <entry>
    <title>Go æ­£ç¡®å§¿åŠ¿</title>
    <url>/2021/07/24/go-correct-posture/</url>
    <content><![CDATA[<p>ğŸ™ åœ¨ç¼–å†™ Go ä»£ç ä¹‹æ—¶ï¼Œæˆ‘è·Ÿå¾ˆå¤šæ–°æ‰‹ä¸€æ ·è¸©äº†ä¸å°‘å‘ï¼Œæ„Ÿè§‰éå¸¸æœ‰å¿…è¦å°†é‚£äº›è¸©è¿‡çš„å‘è®°å½•ä¸‹æ¥ä»¥é¿å…ä¸‹æ¬¡çŠ¯é”™ã€‚å¾ˆå¤šäººè¯´ Go ç®€å•æ˜“å­¦ï¼Œä¸Šæ‰‹å®¹æ˜“ï¼Œå¯æƒœæˆ‘ä¸æ˜¯é‚£äº›å¾ˆå¤šäººä¸­çš„ä¸€ä¸ªï¼Œå¤©èµ„æ„šé’å¦‚æ­¤ï¼Œæˆ‘åªèƒ½åå¤å­¦ä¹ äº†ã€‚</p>
<span id="more"></span>
<ul>
<li><a href="https://imajinyun.xyz/2021/06/26/go-get-started/">Go èµ·æ­¥</a></li>
<li><a href="https://imajinyun.xyz/2021/07/02/go-data-type/">Go æ•°æ®ç±»å‹</a></li>
<li><a href="https://imajinyun.xyz/2021/07/11/go-date-time/">Go æ—¥æœŸæ—¶é—´</a></li>
<li><a href="https://imajinyun.xyz/2021/07/14/go-random-number/">Go éšæœºæ•°</a></li>
<li><a href="https://imajinyun.xyz/2021/07/16/go-unit-test/">Go å•å…ƒæµ‹è¯•</a></li>
<li><a href="https://imajinyun.xyz/2021/07/17/go-benchmark-test/">Go åŸºå‡†æµ‹è¯•</a></li>
<li><a href="https://imajinyun.xyz/2021/07/22/go-other-test/">Go å…¶å®ƒæµ‹è¯•</a></li>
<li><strong>Go æ­£ç¡®å§¿åŠ¿</strong></li>
<li><a href="https://imajinyun.xyz/2021/07/25/go-concat-string/">Go è¿æ¥å­—ç¬¦ä¸²</a></li>
</ul>
<h2 id="å¸¸è§é”™è¯¯ä¸çº æ­£"><a href="#å¸¸è§é”™è¯¯ä¸çº æ­£" class="headerlink" title="å¸¸è§é”™è¯¯ä¸çº æ­£"></a>å¸¸è§é”™è¯¯ä¸çº æ­£</h2><h3 id="assignment-to-entry-in-nil-map"><a href="#assignment-to-entry-in-nil-map" class="headerlink" title="assignment to entry in nil map"></a>assignment to entry in nil map</h3><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> hello</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">  <span class="string">&quot;testing&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">=== RUN   TestWrongUsage</span></span><br><span class="line"><span class="comment">--- FAIL: TestWrongUsage (0.00s)</span></span><br><span class="line"><span class="comment">panic: assignment to entry in nil map [recovered]</span></span><br><span class="line"><span class="comment">	panic: assignment to entry in nil map</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestWrongUsage</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line">  <span class="keyword">var</span> m <span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">float64</span></span><br><span class="line">  m[<span class="string">&quot;pi&quot;</span>] = <span class="number">3.1416</span></span><br><span class="line">  t.Log(m)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">=== RUN   TestRightUsage</span></span><br><span class="line"><span class="comment">    /Users/xxx/Codes/go/src/github.com/xxx/hello/hello_test.go:39: map[pi:3.1416]</span></span><br><span class="line"><span class="comment">--- PASS: TestRightUsage (0.00s)</span></span><br><span class="line"><span class="comment">PASS</span></span><br><span class="line"><span class="comment">ok  	example.com/hello	0.012s</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestRightUsage</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line">  m := <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">float64</span>)</span><br><span class="line">  m[<span class="string">&quot;pi&quot;</span>] = <span class="number">3.1416</span></span><br><span class="line">  t.Log(m)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="invalid-memory-address-or-nil-pointer-dereference"><a href="#invalid-memory-address-or-nil-pointer-dereference" class="headerlink" title="invalid memory address or nil pointer dereference"></a>invalid memory address or nil pointer dereference</h3><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> hello</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">  <span class="string">&quot;math&quot;</span></span><br><span class="line">  <span class="string">&quot;testing&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Point <span class="keyword">struct</span> &#123;</span><br><span class="line">  X, Y <span class="keyword">float64</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(p *Point)</span> <span class="title">Abs</span><span class="params">()</span> <span class="title">float64</span></span> &#123;</span><br><span class="line">  <span class="keyword">return</span> math.Sqrt(p.X*p.X + p.Y*p.Y)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">=== RUN   TestWrongUsage</span></span><br><span class="line"><span class="comment">--- FAIL: TestWrongUsage (0.00s)</span></span><br><span class="line"><span class="comment">panic: runtime error: invalid memory address or nil pointer dereference [recovered]</span></span><br><span class="line"><span class="comment">	panic: runtime error: invalid memory address or nil pointer dereference</span></span><br><span class="line"><span class="comment">[signal SIGSEGV: segmentation violation code=0x1 addr=0x0 pc=0x110a643]</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestWrongUsage</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line">  <span class="keyword">var</span> p *Point</span><br><span class="line">  t.Log(p.Abs())</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">=== RUN   TestRightUsage</span></span><br><span class="line"><span class="comment">    /Users/xxx/Codes/go/src/github.com/xxx/hello/hello_test.go:26: &amp;&#123;0 0&#125;</span></span><br><span class="line"><span class="comment">    /Users/xxx/Codes/go/src/github.com/xxx/hello/hello_test.go:29: 0</span></span><br><span class="line"><span class="comment">--- PASS: TestRightUsage (0.00s)</span></span><br><span class="line"><span class="comment">PASS</span></span><br><span class="line"><span class="comment">ok  	example.com/hello	0.009s</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestRightUsage</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line">  <span class="keyword">var</span> p *Point = <span class="built_in">new</span>(Point)</span><br><span class="line">  t.Log(p)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> q Point <span class="comment">// has zero value Point&#123;X:0, Y:0&#125;</span></span><br><span class="line">  t.Log(q.Abs())</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="array-wonâ€™t-change"><a href="#array-wonâ€™t-change" class="headerlink" title="array wonâ€™t change"></a>array wonâ€™t change</h3><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> hello</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">  <span class="string">&quot;testing&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Foo</span><span class="params">(a [2]<span class="keyword">int</span>)</span></span> &#123;</span><br><span class="line">  a[<span class="number">0</span>] = <span class="number">8</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Bar</span><span class="params">(a []<span class="keyword">int</span>)</span></span> &#123;</span><br><span class="line">  <span class="keyword">if</span> <span class="built_in">len</span>(a) &gt; <span class="number">0</span> &#123;</span><br><span class="line">    a[<span class="number">0</span>] = <span class="number">8</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">=== RUN   TestWrongUsage</span></span><br><span class="line"><span class="comment">    /Users/xxx/Codes/go/src/github.com/xxx/hello/hello_test.go:20: [1 2]</span></span><br><span class="line"><span class="comment">--- PASS: TestWrongUsage (0.00s)</span></span><br><span class="line"><span class="comment">PASS</span></span><br><span class="line"><span class="comment">ok  	example.com/hello	0.008s</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestWrongUsage</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line">  a := [<span class="number">2</span>]<span class="keyword">int</span>&#123;<span class="number">1</span>, <span class="number">2</span>&#125;</span><br><span class="line">  Foo(a)</span><br><span class="line">  t.Log(a)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">=== RUN   TestRightUsage</span></span><br><span class="line"><span class="comment">    /Users/xxx/Codes/go/src/github.com/xxx/hello/hello_test.go:40: [8 2]</span></span><br><span class="line"><span class="comment">--- PASS: TestRightUsage (0.00s)</span></span><br><span class="line"><span class="comment">PASS</span></span><br><span class="line"><span class="comment">ok  	example.com/hello	0.013s</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestRightUsage</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line">  a := []<span class="keyword">int</span>&#123;<span class="number">1</span>, <span class="number">2</span>&#125;</span><br><span class="line">  Bar(a)</span><br><span class="line">  t.Log(a)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="shadowed-variables"><a href="#shadowed-variables" class="headerlink" title="shadowed variables"></a>shadowed variables</h3><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> hello</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;testing&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">=== RUN   TestWrongUsage</span></span><br><span class="line"><span class="comment">    /Users/xxx/Codes/go/src/github.com/xxx/hello/hello_test.go:20: 0</span></span><br><span class="line"><span class="comment">--- PASS: TestWrongUsage (0.00s)</span></span><br><span class="line"><span class="comment">PASS</span></span><br><span class="line"><span class="comment">ok  	example.com/hello	0.007s</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestWrongUsage</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line">  n := <span class="number">0</span></span><br><span class="line">  <span class="keyword">if</span> <span class="literal">true</span> &#123;</span><br><span class="line">    n := <span class="number">1</span></span><br><span class="line">    n++</span><br><span class="line">  &#125;</span><br><span class="line">  t.Log(n)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">=== RUN   TestRightUsage</span></span><br><span class="line"><span class="comment">    /Users/xxx/Codes/go/src/github.com/xxx/hello/hello_test.go:36: 2</span></span><br><span class="line"><span class="comment">--- PASS: TestRightUsage (0.00s)</span></span><br><span class="line"><span class="comment">PASS</span></span><br><span class="line"><span class="comment">ok  	example.com/hello	(cached)</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestRightUsage</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line">  n := <span class="number">0</span></span><br><span class="line">  <span class="keyword">if</span> <span class="literal">true</span> &#123;</span><br><span class="line">    n = <span class="number">1</span></span><br><span class="line">    n++</span><br><span class="line">  &#125;</span><br><span class="line">  t.Log(n)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å®‰è£… <a href="https://pkg.go.dev/golang.org/x/tools#readme-download-install">Go Tools</a>ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ go get -u golang.org/x/tools/...</span><br></pre></td></tr></table></figure>
<p>æ£€æµ‹éšè—å˜é‡ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ go vet -vettool=$(<span class="built_in">which</span> shadow) -strict</span><br><span class="line"><span class="comment"># example.com/hello</span></span><br><span class="line">./hello_test.go:17:3: declaration of <span class="string">&quot;n&quot;</span> shadows declaration at line 15</span><br></pre></td></tr></table></figure>
<h3 id="immutable-strings"><a href="#immutable-strings" class="headerlink" title="immutable strings"></a>immutable strings</h3><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> hello</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">  <span class="string">&quot;testing&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"># example.com/hello [example.com/hello.test]</span></span><br><span class="line"><span class="comment">/Users/xxx/Codes/go/src/github.com/xxx/hello/hello_test.go:16:7: cannot assign to s[0] (strings are immutable)</span></span><br><span class="line"><span class="comment">FAIL	example.com/hello [build failed]</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestWrongUsage</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line">  s := <span class="string">&quot;hello&quot;</span></span><br><span class="line">  s[<span class="number">0</span>] = <span class="string">&#x27;H&#x27;</span> <span class="comment">// IDE ä¼šæç¤ºï¼šcannot assign to s[0] (value of type byte)compilerUnassignableOperand</span></span><br><span class="line">  t.Log(s)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">=== RUN   TestRightUsage</span></span><br><span class="line"><span class="comment">    /Users/xxx/Codes/go/src/github.com/xxx/hello/hello_test.go:29: Hello</span></span><br><span class="line"><span class="comment">--- PASS: TestRightUsage (0.00s)</span></span><br><span class="line"><span class="comment">PASS</span></span><br><span class="line"><span class="comment">ok  	example.com/hello	0.007s</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestRightUsage</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line">  buf := []<span class="keyword">rune</span>(<span class="string">&quot;hello&quot;</span>)</span><br><span class="line">  buf[<span class="number">0</span>] = <span class="string">&#x27;H&#x27;</span></span><br><span class="line">  s := <span class="keyword">string</span>(buf)</span><br><span class="line">  t.Log(s)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="characters-add"><a href="#characters-add" class="headerlink" title="characters add"></a>characters add</h3><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> hello</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">  <span class="string">&quot;fmt&quot;</span></span><br><span class="line">  <span class="string">&quot;strconv&quot;</span></span><br><span class="line">  <span class="string">&quot;testing&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">=== RUN   TestWrongUsage</span></span><br><span class="line"><span class="comment">    /Users/xxx/Codes/go/src/github.com/xxx/hello/hello_test.go:13: Ta</span></span><br><span class="line"><span class="comment">    /Users/xxx/Codes/go/src/github.com/xxx/hello/hello_test.go:14: 181</span></span><br><span class="line"><span class="comment">--- PASS: TestWrongUsage (0.00s)</span></span><br><span class="line"><span class="comment">PASS</span></span><br><span class="line"><span class="comment">ok  	example.com/hello	0.014s</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestWrongUsage</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line">  t.Log(<span class="string">&quot;T&quot;</span> + <span class="string">&quot;a&quot;</span>)</span><br><span class="line">  t.Log(<span class="string">&#x27;T&#x27;</span> + <span class="string">&#x27;a&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">=== RUN   TestRightUsage</span></span><br><span class="line"><span class="comment">    /Users/xxx/Codes/go/src/github.com/imajinyun/hello/hello_test.go:30: 84a</span></span><br><span class="line"><span class="comment">    /Users/xxx/Codes/go/src/github.com/imajinyun/hello/hello_test.go:31: Ta</span></span><br><span class="line"><span class="comment">--- PASS: TestRightUsage (0.00s)</span></span><br><span class="line"><span class="comment">PASS</span></span><br><span class="line"><span class="comment">ok  	example.com/hello	0.012s</span></span><br><span class="line"><span class="comment">PASS</span></span><br><span class="line"><span class="comment">ok  	example.com/hello	0.012s</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestRightUsage</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line">  t.Log(strconv.Itoa(<span class="number">84</span>) + <span class="keyword">string</span>(<span class="string">&#x27;a&#x27;</span>))</span><br><span class="line">  t.Log(fmt.Sprintf(<span class="string">&quot;%c%c&quot;</span>, <span class="number">84</span>, <span class="string">&#x27;a&#x27;</span>))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="trim-string"><a href="#trim-string" class="headerlink" title="trim string"></a>trim string</h3><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> hello</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">  <span class="string">&quot;strings&quot;</span></span><br><span class="line">  <span class="string">&quot;testing&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">=== RUN   TestWrongUsage</span></span><br><span class="line"><span class="comment">    /Users/xxx/Codes/go/src/github.com/xxx/hello/hello_test.go:17: true</span></span><br><span class="line"><span class="comment">    /Users/xxx/Codes/go/src/github.com/xxx/hello/hello_test.go:18: true</span></span><br><span class="line"><span class="comment">--- PASS: TestWrongUsage (0.00s)</span></span><br><span class="line"><span class="comment">PASS</span></span><br><span class="line"><span class="comment">ok  	example.com/hello	0.009s</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestWrongUsage</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line">  t.Log(<span class="string">&quot; hello world &quot;</span> == strings.TrimRight(<span class="string">&quot; hello world &quot;</span>, <span class="string">&quot;hello&quot;</span>))</span><br><span class="line">  t.Log(<span class="string">&quot;hello  world&quot;</span> == strings.TrimLeft(<span class="string">&quot;hello  world&quot;</span>, <span class="string">&quot;world&quot;</span>))</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">=== RUN   TestRightUsage</span></span><br><span class="line"><span class="comment">    /Users/xxx/Codes/go/src/github.com/xxx/hello/hello_test.go:33: true</span></span><br><span class="line"><span class="comment">    /Users/xxx/Codes/go/src/github.com/xxx/hello/hello_test.go:34: true</span></span><br><span class="line"><span class="comment">    /Users/xxx/Codes/go/src/github.com/xxx/hello/hello_test.go:35: true</span></span><br><span class="line"><span class="comment">    /Users/xxx/Codes/go/src/github.com/xxx/hello/hello_test.go:36: true</span></span><br><span class="line"><span class="comment">--- PASS: TestRightUsage (0.00s)</span></span><br><span class="line"><span class="comment">PASS</span></span><br><span class="line"><span class="comment">ok  	example.com/hello	0.008s</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestRightUsage</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line">  t.Log(<span class="string">&quot;hello&quot;</span> == strings.TrimSpace(<span class="string">&quot;  hello  &quot;</span>))</span><br><span class="line">  t.Log(<span class="string">&quot;hello \t world&quot;</span> == strings.TrimSpace(<span class="string">&quot; \t hello \t world \t &quot;</span>))</span><br><span class="line">  t.Log(<span class="string">&quot; world&quot;</span> == strings.TrimPrefix(<span class="string">&quot;hello world&quot;</span>, <span class="string">&quot;hello&quot;</span>))</span><br><span class="line">  t.Log(<span class="string">&quot;hello &quot;</span> == strings.TrimSuffix(<span class="string">&quot;hello world&quot;</span>, <span class="string">&quot;world&quot;</span>))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="elements-copy"><a href="#elements-copy" class="headerlink" title="elements copy"></a>elements copy</h3><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> hello</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">  <span class="string">&quot;testing&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">=== RUN   TestWrongUsage</span></span><br><span class="line"><span class="comment">    /Users/xxx/Codes/go/src/github.com/xxx/hello/hello_test.go:18: dst: []</span></span><br><span class="line"><span class="comment">--- PASS: TestWrongUsage (0.00s)</span></span><br><span class="line"><span class="comment">PASS</span></span><br><span class="line"><span class="comment">ok  	example.com/hello	(cached)</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestWrongUsage</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line">  <span class="keyword">var</span> src, dst []<span class="keyword">int</span></span><br><span class="line">  src = []<span class="keyword">int</span>&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>&#125;</span><br><span class="line">  <span class="built_in">copy</span>(dst, src) <span class="comment">// Copy elements to dst from src.</span></span><br><span class="line">  t.Log(<span class="string">&quot;dst:&quot;</span>, dst)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">=== RUN   TestRightUsage</span></span><br><span class="line"><span class="comment">    /Users/xxx/Codes/go/src/github.com/xxx/hello/hello_test.go:36: dst: [1 2 3] (copied 3 numbers)</span></span><br><span class="line"><span class="comment">--- PASS: TestRightUsage (0.00s)</span></span><br><span class="line"><span class="comment">PASS</span></span><br><span class="line"><span class="comment">ok  	example.com/hello	0.008s</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestRightUsage</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line">  <span class="keyword">var</span> src, dst []<span class="keyword">int</span></span><br><span class="line">  src = []<span class="keyword">int</span>&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>&#125;</span><br><span class="line">  dst = <span class="built_in">make</span>([]<span class="keyword">int</span>, <span class="built_in">len</span>(src))</span><br><span class="line">  n := <span class="built_in">copy</span>(dst, src)</span><br><span class="line">  t.Log(<span class="string">&quot;dst:&quot;</span>, dst, <span class="string">&quot;(copied&quot;</span>, n, <span class="string">&quot;numbers)&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">=== RUN   TestRight2Usage</span></span><br><span class="line"><span class="comment">    /Users/xxx/Codes/go/src/github.com/xxx/hello/hello_test.go:40: dst: [1 2 3]</span></span><br><span class="line"><span class="comment">--- PASS: TestRight2Usage (0.00s)</span></span><br><span class="line"><span class="comment">PASS</span></span><br><span class="line"><span class="comment">ok  	example.com/hello	0.016s</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestRight2Usage</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line">  <span class="keyword">var</span> src, dst []<span class="keyword">int</span></span><br><span class="line">  src = []<span class="keyword">int</span>&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>&#125;</span><br><span class="line">  dst = <span class="built_in">append</span>(dst, src...)</span><br><span class="line">  t.Log(<span class="string">&quot;dst:&quot;</span>, dst)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="canâ€™t-change-entries-in-range-loop"><a href="#canâ€™t-change-entries-in-range-loop" class="headerlink" title="canâ€™t change entries in range loop"></a>canâ€™t change entries in range loop</h3><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> hello</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;testing&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">=== RUN   TestWrongUsage</span></span><br><span class="line"><span class="comment">    /Users/xxx/Codes/go/src/github.com/xxx/hello/hello_test.go:21: [1 1 1]</span></span><br><span class="line"><span class="comment">--- PASS: TestWrongUsage (0.00s)</span></span><br><span class="line"><span class="comment">PASS</span></span><br><span class="line"><span class="comment">ok  	example.com/hello	0.011s</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestWrongUsage</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line">  s := []<span class="keyword">int</span>&#123;<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>&#125;</span><br><span class="line">  <span class="keyword">for</span> _, n := <span class="keyword">range</span> s &#123;</span><br><span class="line">    n += <span class="number">1</span></span><br><span class="line">  &#125;</span><br><span class="line">  t.Log(s)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">=== RUN   TestRightUsage</span></span><br><span class="line"><span class="comment">    /Users/xxx/Codes/go/src/github.com/xxx/hello/hello_test.go:36: [2 2 2]</span></span><br><span class="line"><span class="comment">--- PASS: TestRightUsage (0.00s)</span></span><br><span class="line"><span class="comment">PASS</span></span><br><span class="line"><span class="comment">ok  	example.com/hello	0.013s</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestRightUsage</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line">  s := []<span class="keyword">int</span>&#123;<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>&#125;</span><br><span class="line">  <span class="keyword">for</span> i := <span class="keyword">range</span> s &#123;</span><br><span class="line">    s[i] += <span class="number">1</span></span><br><span class="line">  &#125;</span><br><span class="line">  t.Log(s)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="iteration-variable-doesnâ€™t-see-change-in-range-loop"><a href="#iteration-variable-doesnâ€™t-see-change-in-range-loop" class="headerlink" title="iteration variable doesnâ€™t see change in range loop"></a>iteration variable doesnâ€™t see change in range loop</h3><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> hello</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">  <span class="string">&quot;fmt&quot;</span></span><br><span class="line">  <span class="string">&quot;testing&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">=== RUN   TestWrongUsage</span></span><br><span class="line"><span class="comment">x = 0</span></span><br><span class="line"><span class="comment">x = 0</span></span><br><span class="line"><span class="comment">    /Users/xxx/Codes/go/src/github.com/xxx/hello/hello_test.go:21: [0 8]</span></span><br><span class="line"><span class="comment">--- PASS: TestWrongUsage (0.00s)</span></span><br><span class="line"><span class="comment">PASS</span></span><br><span class="line"><span class="comment">ok  	example.com/hello	0.013s</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestWrongUsage</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line">  <span class="keyword">var</span> a [<span class="number">2</span>]<span class="keyword">int</span></span><br><span class="line">  <span class="keyword">for</span> _, x := <span class="keyword">range</span> a &#123;</span><br><span class="line">    fmt.Println(<span class="string">&quot;x =&quot;</span>, x)</span><br><span class="line">    a[<span class="number">1</span>] = <span class="number">8</span></span><br><span class="line">  &#125;</span><br><span class="line">  t.Log(a)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">=== RUN   TestRightUsage</span></span><br><span class="line"><span class="comment">x = 0</span></span><br><span class="line"><span class="comment">x = 8</span></span><br><span class="line"><span class="comment">    /Users/xxx/Codes/go/src/github.com/xxx/hello/hello_test.go:39: [0 8]</span></span><br><span class="line"><span class="comment">--- PASS: TestRightUsage (0.00s)</span></span><br><span class="line"><span class="comment">PASS</span></span><br><span class="line"><span class="comment">ok  	example.com/hello	0.009s</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestRightUsage</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line">  <span class="keyword">var</span> a [<span class="number">2</span>]<span class="keyword">int</span></span><br><span class="line">  <span class="keyword">for</span> _, x := <span class="keyword">range</span> a[:] &#123;</span><br><span class="line">    fmt.Println(<span class="string">&quot;x =&quot;</span>, x)</span><br><span class="line">    a[<span class="number">1</span>] = <span class="number">8</span></span><br><span class="line">  &#125;</span><br><span class="line">  t.Log(a)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="iteration-variables-and-closures"><a href="#iteration-variables-and-closures" class="headerlink" title="iteration variables and closures"></a>iteration variables and closures</h3><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> hello</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">  <span class="string">&quot;sync&quot;</span></span><br><span class="line">  <span class="string">&quot;testing&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">=== RUN   TestWrongUsage</span></span><br><span class="line"><span class="comment">    /Users/xxx/Codes/go/src/github.com/xxx/hello/hello_test.go:23: 5</span></span><br><span class="line"><span class="comment">    /Users/xxx/Codes/go/src/github.com/xxx/hello/hello_test.go:23: 5</span></span><br><span class="line"><span class="comment">    /Users/xxx/Codes/go/src/github.com/xxx/hello/hello_test.go:23: 5</span></span><br><span class="line"><span class="comment">    /Users/xxx/Codes/go/src/github.com/xxx/hello/hello_test.go:23: 5</span></span><br><span class="line"><span class="comment">    /Users/xxx/Codes/go/src/github.com/xxx/hello/hello_test.go:23: 5</span></span><br><span class="line"><span class="comment">--- PASS: TestWrongUsage (0.00s)</span></span><br><span class="line"><span class="comment">PASS</span></span><br><span class="line"><span class="comment">ok  	example.com/hello	0.013s</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestWrongUsage</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line">  <span class="keyword">var</span> wg sync.WaitGroup</span><br><span class="line">  <span class="keyword">var</span> n <span class="keyword">int</span> = <span class="number">5</span></span><br><span class="line">  wg.Add(n)</span><br><span class="line">  <span class="keyword">for</span> i := <span class="number">0</span>; i &lt; n; i++ &#123;</span><br><span class="line">    <span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">      t.Log(i)</span><br><span class="line">      wg.Done()</span><br><span class="line">    &#125;()</span><br><span class="line">  &#125;</span><br><span class="line">  wg.Wait()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">=== RUN   TestRightUsage</span></span><br><span class="line"><span class="comment">    /Users/xxx/Codes/go/src/github.com/xxx/hello/hello_test.go:47: 4</span></span><br><span class="line"><span class="comment">    /Users/xxx/Codes/go/src/github.com/xxx/hello/hello_test.go:47: 1</span></span><br><span class="line"><span class="comment">    /Users/xxx/Codes/go/src/github.com/xxx/hello/hello_test.go:47: 0</span></span><br><span class="line"><span class="comment">    /Users/xxx/Codes/go/src/github.com/xxx/hello/hello_test.go:47: 3</span></span><br><span class="line"><span class="comment">    /Users/xxx/Codes/go/src/github.com/xxx/hello/hello_test.go:47: 2</span></span><br><span class="line"><span class="comment">--- PASS: TestRightUsage (0.00s)</span></span><br><span class="line"><span class="comment">PASS</span></span><br><span class="line"><span class="comment">ok  	example.com/hello	0.009s</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestRightUsage</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line">  <span class="keyword">var</span> wg sync.WaitGroup</span><br><span class="line">  <span class="keyword">var</span> n <span class="keyword">int</span> = <span class="number">5</span></span><br><span class="line">  wg.Add(n)</span><br><span class="line">  <span class="keyword">for</span> i := <span class="number">0</span>; i &lt; n; i++ &#123;</span><br><span class="line">    x := i <span class="comment">// Create a unique variable for each closure.</span></span><br><span class="line">    <span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">      t.Log(x)</span><br><span class="line">      wg.Done()</span><br><span class="line">    &#125;()</span><br><span class="line">  &#125;</span><br><span class="line">  wg.Wait()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="å¸¸ç”¨çš„ä¸€äº›å†™æ³•"><a href="#å¸¸ç”¨çš„ä¸€äº›å†™æ³•" class="headerlink" title="å¸¸ç”¨çš„ä¸€äº›å†™æ³•"></a>å¸¸ç”¨çš„ä¸€äº›å†™æ³•</h2><h3 id="æ£€æŸ¥å­—å…¸ä¸­æ˜¯å¦å­˜åœ¨æŒ‡å®šé”®"><a href="#æ£€æŸ¥å­—å…¸ä¸­æ˜¯å¦å­˜åœ¨æŒ‡å®šé”®" class="headerlink" title="æ£€æŸ¥å­—å…¸ä¸­æ˜¯å¦å­˜åœ¨æŒ‡å®šé”®"></a>æ£€æŸ¥å­—å…¸ä¸­æ˜¯å¦å­˜åœ¨æŒ‡å®šé”®</h3><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> hello</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;testing&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">=== RUN   TestIfKeyExistInMap</span></span><br><span class="line"><span class="comment">    /Users/xxx/Codes/go/src/github.com/xxx/hello/hello_test.go:12: value: 100</span></span><br><span class="line"><span class="comment">--- PASS: TestIfKeyExistInMap (0.00s)</span></span><br><span class="line"><span class="comment">PASS</span></span><br><span class="line"><span class="comment">ok  	example.com/hello	0.009s</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestIfKeyExistInMap</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line">  dict := <span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">int</span>&#123;<span class="string">&quot;foo&quot;</span>: <span class="number">100</span>, <span class="string">&quot;bar&quot;</span>: <span class="number">200</span>&#125;</span><br><span class="line">  value, ok := dict[<span class="string">&quot;foo&quot;</span>]</span><br><span class="line">  <span class="keyword">if</span> ok &#123;</span><br><span class="line">    t.Log(<span class="string">&quot;value:&quot;</span>, value)</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    t.Log(<span class="string">&quot;Key not found&quot;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="è¿æ¥ä¸¤ä¸ªåˆ‡ç‰‡"><a href="#è¿æ¥ä¸¤ä¸ªåˆ‡ç‰‡" class="headerlink" title="è¿æ¥ä¸¤ä¸ªåˆ‡ç‰‡"></a>è¿æ¥ä¸¤ä¸ªåˆ‡ç‰‡</h3><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> hello</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;testing&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">=== RUN   TestCombineTwoSlice</span></span><br><span class="line"><span class="comment">    /Users/xxx/Codes/go/src/github.com/xxx/hello/hello_test.go:17: [1 2 3 4]</span></span><br><span class="line"><span class="comment">--- PASS: TestCombineTwoSlice (0.00s)</span></span><br><span class="line"><span class="comment">PASS</span></span><br><span class="line"><span class="comment">ok  	example.com/hello	0.007s</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestCombineTwoSlice</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line">  slice := <span class="built_in">append</span>([]<span class="keyword">int</span>&#123;<span class="number">1</span>, <span class="number">2</span>&#125;, []<span class="keyword">int</span>&#123;<span class="number">3</span>, <span class="number">4</span>&#125;...)</span><br><span class="line">  t.Log(slice)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="å°†-byte-è½¬æ¢ä¸º-string"><a href="#å°†-byte-è½¬æ¢ä¸º-string" class="headerlink" title="å°† byte è½¬æ¢ä¸º string"></a>å°† byte è½¬æ¢ä¸º string</h3><p>æ ‡å‡†è½¬æ¢ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> hello</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;testing&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">=== RUN   TestByteToStr</span></span><br><span class="line"><span class="comment">    /Users/xxx/Codes/go/src/github.com/xxx/hello/hello_test.go:16:</span></span><br><span class="line"><span class="comment">        [72 101 108 108 111 32 87 111 114 108 100]</span></span><br><span class="line"><span class="comment">        Hello World</span></span><br><span class="line"><span class="comment">--- PASS: TestByteToStr (0.00s)</span></span><br><span class="line"><span class="comment">PASS</span></span><br><span class="line"><span class="comment">ok  	example.com/hello	0.007s</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestByteToStr</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line">  b := []<span class="keyword">byte</span>(<span class="string">&quot;Hello World&quot;</span>)</span><br><span class="line">  t.Logf(<span class="string">&quot;\n%v\n%v&quot;</span>, b, <span class="keyword">string</span>(b))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¼ºåˆ¶è½¬æ¢ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> hello</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">  <span class="string">&quot;reflect&quot;</span></span><br><span class="line">  <span class="string">&quot;testing&quot;</span></span><br><span class="line">  <span class="string">&quot;unsafe&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">=== RUN   TestByteToString</span></span><br><span class="line"><span class="comment">    /Users/xxx/Codes/go/src/github.com/xxx/hello/hello_test.go:19:</span></span><br><span class="line"><span class="comment">        [72 101 108 108 111 32 87 111 114 108 100]</span></span><br><span class="line"><span class="comment">        &quot;Hello World&quot;</span></span><br><span class="line"><span class="comment">        Hello World</span></span><br><span class="line"><span class="comment">--- PASS: TestByteToString (0.00s)</span></span><br><span class="line"><span class="comment">PASS</span></span><br><span class="line"><span class="comment">ok  	example.com/hello	0.008s</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestByteToString</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line">  b := []<span class="keyword">byte</span>&#123;<span class="number">72</span>, <span class="number">101</span>, <span class="number">108</span>, <span class="number">108</span>, <span class="number">111</span>, <span class="number">32</span>, <span class="number">87</span>, <span class="number">111</span>, <span class="number">114</span>, <span class="number">108</span>, <span class="number">100</span>&#125;</span><br><span class="line">  s := byteToString(b)</span><br><span class="line">  t.Logf(<span class="string">&quot;\n%v\n%#v\n%v&quot;</span>, b, s, s)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">byteToString</span><span class="params">(b []<span class="keyword">byte</span>)</span> <span class="params">(s <span class="keyword">string</span>)</span></span> &#123;</span><br><span class="line">  data := <span class="built_in">make</span>([]<span class="keyword">byte</span>, <span class="built_in">len</span>(b))</span><br><span class="line">  <span class="keyword">for</span> i, c := <span class="keyword">range</span> b &#123;</span><br><span class="line">    data[i] = c</span><br><span class="line">  &#125;</span><br><span class="line">  hdr := (*reflect.StringHeader)(unsafe.Pointer(&amp;s))</span><br><span class="line">  hdr.Data = <span class="keyword">uintptr</span>(unsafe.Pointer(&amp;data[<span class="number">0</span>]))</span><br><span class="line">  hdr.Len = <span class="built_in">len</span>(b)</span><br><span class="line">  <span class="keyword">return</span> s</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="å°†-string-è½¬æ¢ä¸º-byte"><a href="#å°†-string-è½¬æ¢ä¸º-byte" class="headerlink" title="å°† string è½¬æ¢ä¸º byte"></a>å°† string è½¬æ¢ä¸º byte</h3><p>æ ‡å‡†è½¬æ¢ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> hello</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;testing&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">=== RUN   TestStringToByte</span></span><br><span class="line"><span class="comment">    /Users/xxx/Codes/go/src/github.com/xxx/hello/hello_test.go:18:</span></span><br><span class="line"><span class="comment">        Hello World</span></span><br><span class="line"><span class="comment">        [72 101 108 108 111 32 87 111 114 108 100]</span></span><br><span class="line"><span class="comment">--- PASS: TestStringToByte (0.00s)</span></span><br><span class="line"><span class="comment">PASS</span></span><br><span class="line"><span class="comment">ok  	example.com/hello	0.008s</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestStringToByte</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line">  s := <span class="string">&quot;Hello World&quot;</span></span><br><span class="line">  t.Logf(<span class="string">&quot;\n%v\n%v&quot;</span>, s, []<span class="keyword">byte</span>(s))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¼ºåˆ¶è½¬æ¢ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> hello</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;testing&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">=== RUN   TestStringToByte</span></span><br><span class="line"><span class="comment">    /Users/xxx/Codes/go/src/github.com/xxx/hello/hello_test.go:19:</span></span><br><span class="line"><span class="comment">        Hello World</span></span><br><span class="line"><span class="comment">        [72 101 108 108 111 32 87 111 114 108 100]</span></span><br><span class="line"><span class="comment">--- PASS: TestStringToByte (0.00s)</span></span><br><span class="line"><span class="comment">PASS</span></span><br><span class="line"><span class="comment">ok  	example.com/hello	0.012s</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestStringToByte</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line">  s := <span class="string">&quot;Hello World&quot;</span></span><br><span class="line">  b := stringToByte(s)</span><br><span class="line">  t.Logf(<span class="string">&quot;\n%v\n%v\n&quot;</span>, s, b)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">stringToByte</span><span class="params">(s <span class="keyword">string</span>)</span> []<span class="title">byte</span></span> &#123;</span><br><span class="line">  b := <span class="built_in">make</span>([]<span class="keyword">byte</span>, <span class="built_in">len</span>(s))</span><br><span class="line">  <span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="built_in">len</span>(s); i++ &#123;</span><br><span class="line">    c := s[i]</span><br><span class="line">    b[i] = c</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> b</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="å°†-rune-è½¬æ¢ä¸º-string"><a href="#å°†-rune-è½¬æ¢ä¸º-string" class="headerlink" title="å°† rune è½¬æ¢ä¸º string"></a>å°† rune è½¬æ¢ä¸º string</h3><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> hello</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;testing&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">=== RUN   TestRuneToString</span></span><br><span class="line"><span class="comment">    /Users/xxx/Codes/go/src/github.com/xxx/hello/hello_test.go:8:</span></span><br><span class="line"><span class="comment">        r = [72 101 108 108 111 32 87 111 114 108 100 33]</span></span><br><span class="line"><span class="comment">        r = [U+0048 U+0065 U+006C U+006C U+006F U+0020 U+0057 U+006F U+0072 U+006C U+0064 U+0021]</span></span><br><span class="line"><span class="comment">        s = Hello World!</span></span><br><span class="line"><span class="comment">--- PASS: TestRuneToString (0.00s)</span></span><br><span class="line"><span class="comment">PASS</span></span><br><span class="line"><span class="comment">ok  	example.com/hello</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestRuneToString</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line">  r := []<span class="keyword">rune</span>&#123;<span class="number">72</span>, <span class="number">101</span>, <span class="number">108</span>, <span class="number">108</span>, <span class="number">111</span>, <span class="number">32</span>, <span class="number">87</span>, <span class="number">111</span>, <span class="number">114</span>, <span class="number">108</span>, <span class="number">100</span>, <span class="number">33</span>&#125;</span><br><span class="line">  s := <span class="keyword">string</span>(r)</span><br><span class="line">  t.Logf(<span class="string">&quot;\nr = %v\nr = %U\ns = %v&quot;</span>, r, r, s)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="å°†-string-è½¬æ¢ä¸º-rune"><a href="#å°†-string-è½¬æ¢ä¸º-rune" class="headerlink" title="å°† string è½¬æ¢ä¸º rune"></a>å°† string è½¬æ¢ä¸º rune</h3><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> hello</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;testing&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">=== RUN   TestStringToRune</span></span><br><span class="line"><span class="comment">    /Users/xxx/Codes/go/src/github.com/xxx/hello/hello_test.go:14:</span></span><br><span class="line"><span class="comment">        s = Hello World!</span></span><br><span class="line"><span class="comment">        r = [72 101 108 108 111 32 87 111 114 108 100 33]</span></span><br><span class="line"><span class="comment">        r = [U+0048 U+0065 U+006C U+006C U+006F U+0020 U+0057 U+006F U+0072 U+006C U+0064 U+0021]</span></span><br><span class="line"><span class="comment">--- PASS: TestStringToRune (0.00s)</span></span><br><span class="line"><span class="comment">PASS</span></span><br><span class="line"><span class="comment">ok  	example.com/hello	0.016s</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestStringToRune</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line">  s := <span class="string">&quot;Hello World!&quot;</span></span><br><span class="line">  r := []<span class="keyword">rune</span>(s)</span><br><span class="line">  t.Logf(<span class="string">&quot;\ns = %v\nr = %v\nr = %U&quot;</span>, s, r, r)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="ç»“æ„ä½“æ¯”è¾ƒ"><a href="#ç»“æ„ä½“æ¯”è¾ƒ" class="headerlink" title="ç»“æ„ä½“æ¯”è¾ƒ"></a>ç»“æ„ä½“æ¯”è¾ƒ</h3><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> hello</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">  <span class="string">&quot;reflect&quot;</span></span><br><span class="line">  <span class="string">&quot;testing&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Devloper <span class="keyword">struct</span> &#123;</span><br><span class="line">  Name <span class="keyword">string</span></span><br><span class="line">  Lang <span class="keyword">string</span></span><br><span class="line">  Age  <span class="keyword">int</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">=== RUN   TestCompareStruct</span></span><br><span class="line"><span class="comment">    /Users/xxx/Codes/go/src/github.com/xxx/hello/hello_test.go:18: false</span></span><br><span class="line"><span class="comment">    /Users/xxx/Codes/go/src/github.com/xxx/hello/hello_test.go:19: true</span></span><br><span class="line"><span class="comment">--- PASS: TestCompareStruct (0.00s)</span></span><br><span class="line"><span class="comment">PASS</span></span><br><span class="line"><span class="comment">ok  	example.com/hello</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestCompareStruct</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line">  d1 := Devloper&#123;<span class="string">&quot;Foo&quot;</span>, <span class="string">&quot;Java&quot;</span>, <span class="number">26</span>&#125;</span><br><span class="line">  d2 := Devloper&#123;<span class="string">&quot;Bar&quot;</span>, <span class="string">&quot;Go&quot;</span>, <span class="number">28</span>&#125;</span><br><span class="line">  d3 := Devloper&#123;<span class="string">&quot;Bar&quot;</span>, <span class="string">&quot;Go&quot;</span>, <span class="number">28</span>&#125;</span><br><span class="line">  t.Log(reflect.DeepEqual(d1, d2))</span><br><span class="line">  t.Log(reflect.DeepEqual(d2, d3))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>go</category>
      </categories>
      <tags>
        <tag>go</tag>
      </tags>
  </entry>
  <entry>
    <title>Go éšæœºæ•°</title>
    <url>/2021/07/14/go-random-number/</url>
    <content><![CDATA[<p>ğŸ¥³ åœ¨ Go ä¸­çš„ç”Ÿæˆçš„éšæœºæ•°æ ¹æœ¬å°±ä¸æ˜¯éšæœºçš„ï¼Œå«ä¼ªéšæœºæ•°ã€‚å®ƒä»¬æ˜¯ç”¨å›ºå®šçš„å†³å®šè®ºç®—æ³•è®¡ç®—çš„ã€‚</p>
<span id="more"></span>
<ul>
<li><a href="https://imajinyun.xyz/2021/06/26/go-get-started/">Go èµ·æ­¥</a></li>
<li><a href="https://imajinyun.xyz/2021/07/02/go-data-type/">Go æ•°æ®ç±»å‹</a></li>
<li><a href="https://imajinyun.xyz/2021/07/11/go-date-time/">Go æ—¥æœŸæ—¶é—´</a></li>
<li><strong>Go éšæœºæ•°</strong></li>
<li><a href="https://imajinyun.xyz/2021/07/16/go-unit-test/">Go å•å…ƒæµ‹è¯•</a></li>
<li><a href="https://imajinyun.xyz/2021/07/17/go-benchmark-test/">Go åŸºå‡†æµ‹è¯•</a></li>
<li><a href="https://imajinyun.xyz/2021/07/22/go-other-test/">Go å…¶å®ƒæµ‹è¯•</a></li>
<li><a href="https://imajinyun.xyz/2021/07/24/go-correct-posture/">Go æ­£ç¡®å§¿åŠ¿</a></li>
<li><a href="https://imajinyun.xyz/2021/07/25/go-concat-string/">Go è¿æ¥å­—ç¬¦ä¸²</a></li>
</ul>
<h2 id="ç”Ÿæˆä¼ªéšæœºæ•°"><a href="#ç”Ÿæˆä¼ªéšæœºæ•°" class="headerlink" title="ç”Ÿæˆä¼ªéšæœºæ•°"></a>ç”Ÿæˆä¼ªéšæœºæ•°</h2><div class="note danger">
            <p>å¦‚æœåˆå§‹åŒ–æ—¶æ²¡æœ‰è°ƒç”¨ <code>rand.Seed</code> æ–¹æ³•ï¼Œä½ æ¯æ¬¡è¿è¡Œç¨‹åºéƒ½ä¼šå¾—åˆ°ç›¸åŒçš„æ•°å­—åºåˆ—ã€‚</p>
          </div>
<p>ä½¿ç”¨ <code>math/rand</code> åŒ…ä¸­çš„ <code>rand.Seed</code> å’Œ <code>rand.Int63</code> æ–¹æ³•å»ç”Ÿæˆ <code>int64</code> ç±»å‹çš„çš„éè´Ÿä¼ªéšæœºæ•°ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">rand.Seed(time.Now().UnixNano())</span><br><span class="line">n := rand.Int63() <span class="comment">// 4394549077322118751</span></span><br></pre></td></tr></table></figure>
<p>ä½¿ç”¨ <code>rand.Float64</code> ç”Ÿæˆä¸€ä¸ªæµ®ç‚¹ä¼ªéšæœºæ•° <code>x</code>ï¼Œå…¶ä¸­ <code>0 &lt;= x &lt;= 1</code>ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">rand.Seed(time.Now().UnixNano())</span><br><span class="line">n := rand.Float64() <span class="comment">// 0.41473976189141065</span></span><br></pre></td></tr></table></figure>
<p><code>math/rand</code> åŒ…ä¸­çš„å‡½æ•°éƒ½ä½¿ç”¨å•ä¸ªéšæœºæºï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">generator := rand.New(rand.NewSource(time.Now().UnixNano()))</span><br><span class="line">x := generator.Int63() <span class="comment">// 1449278222774694185</span></span><br><span class="line">y := generator.Float64() <span class="comment">// 0.947309190343705</span></span><br></pre></td></tr></table></figure>
<h2 id="ç”ŸæˆæŒ‡å®šèŒƒå›´éšæœºæ•°"><a href="#ç”ŸæˆæŒ‡å®šèŒƒå›´éšæœºæ•°" class="headerlink" title="ç”ŸæˆæŒ‡å®šèŒƒå›´éšæœºæ•°"></a>ç”ŸæˆæŒ‡å®šèŒƒå›´éšæœºæ•°</h2><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="comment">// a &lt;= n &lt;= b</span></span><br><span class="line">a, b := <span class="number">0</span>, <span class="number">100</span></span><br><span class="line">generator := rand.New(rand.NewSource(time.Now().UnixNano()))</span><br><span class="line">n := a + generator.Intn(b-a+<span class="number">1</span>) <span class="comment">// 0 &lt;= n &lt;= 100</span></span><br></pre></td></tr></table></figure>
<h2 id="ç”ŸæˆæŒ‡å®šèŒƒå›´éšæœºå­—ç¬¦"><a href="#ç”ŸæˆæŒ‡å®šèŒƒå›´éšæœºå­—ç¬¦" class="headerlink" title="ç”ŸæˆæŒ‡å®šèŒƒå›´éšæœºå­—ç¬¦"></a>ç”ŸæˆæŒ‡å®šèŒƒå›´éšæœºå­—ç¬¦</h2><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="comment">// &#x27;a&#x27; &lt;= n &lt;= &#x27;z&#x27;</span></span><br><span class="line"><span class="keyword">var</span> (</span><br><span class="line">  x = <span class="string">&#x27;a&#x27;</span></span><br><span class="line">  y = <span class="string">&#x27;z&#x27;</span></span><br><span class="line">)</span><br><span class="line">generator := rand.New(rand.NewSource(time.Now().UnixNano()))</span><br><span class="line">n := x + <span class="keyword">rune</span>(generator.Intn(<span class="keyword">int</span>(y)-<span class="keyword">int</span>(x)+<span class="number">1</span>)) <span class="comment">// 97 &lt;= n &lt;= 122</span></span><br><span class="line">m := <span class="string">&#x27;a&#x27;</span> + <span class="keyword">rune</span>(generator.Intn(<span class="string">&#x27;z&#x27;</span>-<span class="string">&#x27;a&#x27;</span>+<span class="number">1</span>))     <span class="comment">// 92 &lt;= m &lt;= 122</span></span><br></pre></td></tr></table></figure>
<h2 id="ç”Ÿæˆéšæœºå­—ç¬¦ä¸²"><a href="#ç”Ÿæˆéšæœºå­—ç¬¦ä¸²" class="headerlink" title="ç”Ÿæˆéšæœºå­—ç¬¦ä¸²"></a>ç”Ÿæˆéšæœºå­—ç¬¦ä¸²</h2><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">  <span class="string">&quot;fmt&quot;</span></span><br><span class="line">  <span class="string">&quot;math/rand&quot;</span></span><br><span class="line">  <span class="string">&quot;time&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">init</span><span class="params">()</span></span> &#123;</span><br><span class="line">  rand.Seed(time.Now().UnixNano())</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">  <span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="number">10</span>; i++ &#123;</span><br><span class="line">    fmt.Println(randomString(<span class="number">10</span>))</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">randomString</span><span class="params">(size <span class="keyword">int</span>)</span> <span class="title">string</span></span> &#123;</span><br><span class="line">  bytes := <span class="built_in">make</span>([]<span class="keyword">byte</span>, size)</span><br><span class="line">  <span class="keyword">for</span> i := <span class="number">0</span>; i &lt; size; i++ &#123;</span><br><span class="line">    bytes[i] = <span class="keyword">byte</span>(randInt(<span class="number">97</span>, <span class="number">122</span>))</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">string</span>(bytes)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">randInt</span><span class="params">(min, max <span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line">  <span class="keyword">return</span> min + rand.Intn(max-min+<span class="number">1</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">tcjrkupnct</span></span><br><span class="line"><span class="comment">twdvwjihfb</span></span><br><span class="line"><span class="comment">lkemigoqne</span></span><br><span class="line"><span class="comment">vqxyasbrqx</span></span><br><span class="line"><span class="comment">iwdncpibxg</span></span><br><span class="line"><span class="comment">ugtsutgmjt</span></span><br><span class="line"><span class="comment">namoonwvyh</span></span><br><span class="line"><span class="comment">mcxnbbjfgf</span></span><br><span class="line"><span class="comment">ufradkxsjq</span></span><br><span class="line"><span class="comment">blnweycudh</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>
<h2 id="ä»åˆ‡ç‰‡ä¸­è·å–éšæœºå…ƒç´ "><a href="#ä»åˆ‡ç‰‡ä¸­è·å–éšæœºå…ƒç´ " class="headerlink" title="ä»åˆ‡ç‰‡ä¸­è·å–éšæœºå…ƒç´ "></a>ä»åˆ‡ç‰‡ä¸­è·å–éšæœºå…ƒç´ </h2><p>å®ä¾‹ä¸€ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">  <span class="string">&quot;fmt&quot;</span></span><br><span class="line">  <span class="string">&quot;math/rand&quot;</span></span><br><span class="line">  <span class="string">&quot;time&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">init</span><span class="params">()</span></span> &#123;</span><br><span class="line">  rand.Seed(time.Now().UnixNano())</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">  runes := []<span class="keyword">rune</span>(<span class="string">&quot;Aâ„¢BÂ£CÂ¢&quot;</span>)</span><br><span class="line">  char := runes[rand.Intn(<span class="built_in">len</span>(runes))]</span><br><span class="line"></span><br><span class="line">  fmt.Println(<span class="keyword">string</span>(char)) <span class="comment">// Â£</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å®ä¾‹äºŒï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">  <span class="string">&quot;fmt&quot;</span></span><br><span class="line">  <span class="string">&quot;math/rand&quot;</span></span><br><span class="line">  <span class="string">&quot;time&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">init</span><span class="params">()</span></span> &#123;</span><br><span class="line">  rand.Seed(time.Now().UnixNano())</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">  slices := <span class="built_in">make</span>([]<span class="keyword">string</span>, <span class="number">0</span>)</span><br><span class="line">  slices = <span class="built_in">append</span>(slices, <span class="string">&quot;Apple&quot;</span>, <span class="string">&quot;Google&quot;</span>, <span class="string">&quot;Microsoft&quot;</span>, <span class="string">&quot;Amazon&quot;</span>, <span class="string">&quot;Facebook&quot;</span>)</span><br><span class="line">  element := slices[rand.Intn(<span class="built_in">len</span>(slices))]</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Get random element from slices: Amazon</span></span><br><span class="line">  fmt.Println(fmt.Sprintf(<span class="string">&quot;Get random element from slices: %v&quot;</span>, element))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="ç”Ÿæˆå®‰å…¨çš„éšæœºæ•°"><a href="#ç”Ÿæˆå®‰å…¨çš„éšæœºæ•°" class="headerlink" title="ç”Ÿæˆå®‰å…¨çš„éšæœºæ•°"></a>ç”Ÿæˆå®‰å…¨çš„éšæœºæ•°</h2><figure class="highlight go"><table><tr><td class="code"><pre><span class="line">randomCrypto, _ := rand.Prime(rand.Reader, <span class="number">128</span>)</span><br><span class="line">fmt.Println(randomCrypto) <span class="comment">// 332362372159551722027736589221875117617</span></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>go</category>
      </categories>
      <tags>
        <tag>go</tag>
      </tags>
  </entry>
  <entry>
    <title>Go æ—¥æœŸæ—¶é—´</title>
    <url>/2021/07/11/go-date-time/</url>
    <content><![CDATA[<p>ğŸ•¢ Go ä¸­çš„æ—¥æœŸæ—¶é—´ä½¿ç”¨å¸ƒå±€æ¥æ ¼å¼åŒ–ï¼Œé€šè¿‡å¸ƒå±€æ¥å®Œæˆæ—¥æœŸæ—¶é—´çš„æ ¼å¼åŒ–å’Œè§£æã€‚</p>
<span id="more"></span>
<ul>
<li><a href="https://imajinyun.xyz/2021/06/26/go-get-started/"><code>Go èµ·æ­¥</code></a></li>
<li><a href="https://imajinyun.xyz/2021/07/02/go-data-type/"><code>Go æ•°æ®ç±»å‹</code></a></li>
<li><strong>Go æ—¥æœŸæ—¶é—´</strong></li>
<li><a href="https://imajinyun.xyz/2021/07/14/go-random-number/"><code>Go éšæœºæ•°</code></a></li>
<li><a href="https://imajinyun.xyz/2021/07/16/go-unit-test/"><code>Go å•å…ƒæµ‹è¯•</code></a></li>
<li><a href="https://imajinyun.xyz/2021/07/17/go-benchmark-test/"><code>Go åŸºå‡†æµ‹è¯•</code></a></li>
<li><a href="https://imajinyun.xyz/2021/07/22/go-other-test/"><code>Go å…¶å®ƒæµ‹è¯•</code></a></li>
<li><a href="https://imajinyun.xyz/2021/07/24/go-correct-posture/"><code>Go æ­£ç¡®å§¿åŠ¿</code></a></li>
<li><a href="https://imajinyun.xyz/2021/07/25/go-concat-string/"><code>Go è¿æ¥å­—ç¬¦ä¸²</code></a></li>
</ul>
<h1 id="å½“å‰æ—¥æœŸæ—¶é—´"><a href="#å½“å‰æ—¥æœŸæ—¶é—´" class="headerlink" title="å½“å‰æ—¥æœŸæ—¶é—´"></a>å½“å‰æ—¥æœŸæ—¶é—´</h1><h2 id="æ ‡å‡†æ—¥æœŸæ—¶é—´æ ¼å¼"><a href="#æ ‡å‡†æ—¥æœŸæ—¶é—´æ ¼å¼" class="headerlink" title="æ ‡å‡†æ—¥æœŸæ—¶é—´æ ¼å¼"></a>æ ‡å‡†æ—¥æœŸæ—¶é—´æ ¼å¼</h2><p>å¸ƒå±€æ ¼å¼ï¼š</p>
<table>
<thead>
<tr>
<th>Layout</th>
<th>Note</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>January 2, 2006</code></td>
<td>Date</td>
</tr>
<tr>
<td><code>01/02/06</code></td>
<td>Date</td>
</tr>
<tr>
<td><code>Jan-02-06</code></td>
<td>Date</td>
</tr>
<tr>
<td><code>15:04:05</code></td>
<td>Time</td>
</tr>
<tr>
<td><code>3:04:05 PM</code></td>
<td>Time</td>
</tr>
<tr>
<td><code>Jan _2 15:04:05</code></td>
<td>Timestamp</td>
</tr>
<tr>
<td><code>Jan _2 15:04:05.000000</code></td>
<td>With microseconds</td>
</tr>
<tr>
<td><code>2006-01-02T15:04:05-0700</code></td>
<td><a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601</a>(<a href="https://www.ietf.org/rfc/rfc3339.txt">RFC 3339</a>)</td>
</tr>
<tr>
<td><code>2006-01-02</code></td>
<td><a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601</a>(<a href="https://www.ietf.org/rfc/rfc3339.txt">RFC 3339</a>)</td>
</tr>
<tr>
<td><code>15:04:05</code></td>
<td><a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601</a>(<a href="https://www.ietf.org/rfc/rfc3339.txt">RFC 3339</a>)</td>
</tr>
<tr>
<td><code>02 Jan 06 15:04 MST</code></td>
<td><a href="https://www.ietf.org/rfc/rfc822.txt">RFC 822</a></td>
</tr>
<tr>
<td><code>02 Jan 06 15:04 -0700</code></td>
<td>With numeric zone</td>
</tr>
<tr>
<td><code>Mon, 02 Jan 2006 15:04:05 MST</code></td>
<td><a href="https://www.ietf.org/rfc/rfc1123.txt">RFC 1123</a></td>
</tr>
<tr>
<td><code>Mon, 02 Jan 2006 15:04:05 -0700</code></td>
<td>With numeric zone</td>
</tr>
</tbody>
</table>
<p>å¸ƒå±€é€‰é¡¹ï¼š</p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Options</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>Year</code></td>
<td><code>06</code> <code>2006</code></td>
</tr>
<tr>
<td><code>Month</code></td>
<td><code>01</code> <code>1</code> <code>Jan</code> <code>January</code></td>
</tr>
<tr>
<td><code>Day</code></td>
<td><code>02</code> <code>2</code> <code>_2</code>(width two, right justified)</td>
</tr>
<tr>
<td><code>Weekday</code></td>
<td><code>Mon</code> <code>Monday</code></td>
</tr>
<tr>
<td><code>Hours</code></td>
<td><code>03</code> <code>3</code> <code>15</code></td>
</tr>
<tr>
<td><code>Minutes</code></td>
<td><code>04</code> <code>4</code></td>
</tr>
<tr>
<td><code>Seconds</code></td>
<td><code>05</code> <code>5</code></td>
</tr>
<tr>
<td><code>ms us ns</code></td>
<td><code>.000</code> <code>.000000</code> <code>.000000000</code></td>
</tr>
<tr>
<td><code>ms us ns</code></td>
<td><code>.999</code> <code>.999999</code> <code>.999999999</code>(trailing zeros removed)</td>
</tr>
<tr>
<td><code>am/pm</code></td>
<td><code>AM</code> <code>am</code> <code>PM</code> <code>pm</code></td>
</tr>
<tr>
<td><code>Timezone</code></td>
<td><code>MST</code></td>
</tr>
<tr>
<td><code>Offset</code></td>
<td><code>-0700</code> <code>-07</code> <code>-07:00</code> <code>Z0700</code> <code>Z07:00</code></td>
</tr>
</tbody>
</table>
<p>ä»¥ä¸‹æ˜¯ Go æºç ä¸­é¢„å®šä¹‰æ—¥æœŸå’Œæ—¶é—´æ ¼å¼å¸¸é‡ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="comment">// These are predefined layouts for use in Time.Format and time.Parse.</span></span><br><span class="line"><span class="comment">// The reference time used in the layouts is the specific time:</span></span><br><span class="line"><span class="comment">//	Mon Jan 2 15:04:05 MST 2006</span></span><br><span class="line"><span class="comment">// which is Unix time 1136239445. Since MST is GMT-0700,</span></span><br><span class="line"><span class="comment">// the reference time can be thought of as</span></span><br><span class="line"><span class="comment">//	01/02 03:04:05PM &#x27;06 -0700</span></span><br><span class="line"><span class="comment">// To define your own format, write down what the reference time would look</span></span><br><span class="line"><span class="comment">// like formatted your way; see the values of constants like ANSIC,</span></span><br><span class="line"><span class="comment">// StampMicro or Kitchen for examples. The model is to demonstrate what the</span></span><br><span class="line"><span class="comment">// reference time looks like so that the Format and Parse methods can apply</span></span><br><span class="line"><span class="comment">// the same transformation to a general time value.</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// Some valid layouts are invalid time values for time.Parse, due to formats</span></span><br><span class="line"><span class="comment">// such as _ for space padding and Z for zone information.</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// Within the format string, an underscore _ represents a space that may be</span></span><br><span class="line"><span class="comment">// replaced by a digit if the following number (a day) has two digits; for</span></span><br><span class="line"><span class="comment">// compatibility with fixed-width Unix time formats.</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// A decimal point followed by one or more zeros represents a fractional</span></span><br><span class="line"><span class="comment">// second, printed to the given number of decimal places. A decimal point</span></span><br><span class="line"><span class="comment">// followed by one or more nines represents a fractional second, printed to</span></span><br><span class="line"><span class="comment">// the given number of decimal places, with trailing zeros removed.</span></span><br><span class="line"><span class="comment">// When parsing (only), the input may contain a fractional second</span></span><br><span class="line"><span class="comment">// field immediately after the seconds field, even if the layout does not</span></span><br><span class="line"><span class="comment">// signify its presence. In that case a decimal point followed by a maximal</span></span><br><span class="line"><span class="comment">// series of digits is parsed as a fractional second.</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// Numeric time zone offsets format as follows:</span></span><br><span class="line"><span class="comment">//	-0700  Â±hhmm</span></span><br><span class="line"><span class="comment">//	-07:00 Â±hh:mm</span></span><br><span class="line"><span class="comment">//	-07    Â±hh</span></span><br><span class="line"><span class="comment">// Replacing the sign in the format with a Z triggers</span></span><br><span class="line"><span class="comment">// the ISO 8601 behavior of printing Z instead of an</span></span><br><span class="line"><span class="comment">// offset for the UTC zone. Thus:</span></span><br><span class="line"><span class="comment">//	Z0700  Z or Â±hhmm</span></span><br><span class="line"><span class="comment">//	Z07:00 Z or Â±hh:mm</span></span><br><span class="line"><span class="comment">//	Z07    Z or Â±hh</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// The recognized day of week formats are &quot;Mon&quot; and &quot;Monday&quot;.</span></span><br><span class="line"><span class="comment">// The recognized month formats are &quot;Jan&quot; and &quot;January&quot;.</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// The formats 2, _2, and 02 are unpadded, space-padded, and zero-padded</span></span><br><span class="line"><span class="comment">// day of month. The formats __2 and 002 are space-padded and zero-padded</span></span><br><span class="line"><span class="comment">// three-character day of year; there is no unpadded day of year format.</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// Text in the format string that is not recognized as part of the reference</span></span><br><span class="line"><span class="comment">// time is echoed verbatim during Format and expected to appear verbatim</span></span><br><span class="line"><span class="comment">// in the input to Parse.</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// The executable example for Time.Format demonstrates the working</span></span><br><span class="line"><span class="comment">// of the layout string in detail and is a good reference.</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// Note that the RFC822, RFC850, and RFC1123 formats should be applied</span></span><br><span class="line"><span class="comment">// only to local times. Applying them to UTC times will use &quot;UTC&quot; as the</span></span><br><span class="line"><span class="comment">// time zone abbreviation, while strictly speaking those RFCs require the</span></span><br><span class="line"><span class="comment">// use of &quot;GMT&quot; in that case.</span></span><br><span class="line"><span class="comment">// In general RFC1123Z should be used instead of RFC1123 for servers</span></span><br><span class="line"><span class="comment">// that insist on that format, and RFC3339 should be preferred for new protocols.</span></span><br><span class="line"><span class="comment">// RFC3339, RFC822, RFC822Z, RFC1123, and RFC1123Z are useful for formatting;</span></span><br><span class="line"><span class="comment">// when used with time.Parse they do not accept all the time formats</span></span><br><span class="line"><span class="comment">// permitted by the RFCs and they do accept time formats not formally defined.</span></span><br><span class="line"><span class="comment">// The RFC3339Nano format removes trailing zeros from the seconds field</span></span><br><span class="line"><span class="comment">// and thus may not sort correctly once formatted.</span></span><br><span class="line"><span class="keyword">const</span> (</span><br><span class="line">  ANSIC       = <span class="string">&quot;Mon Jan _2 15:04:05 2006&quot;</span></span><br><span class="line">  UnixDate    = <span class="string">&quot;Mon Jan _2 15:04:05 MST 2006&quot;</span></span><br><span class="line">  RubyDate    = <span class="string">&quot;Mon Jan 02 15:04:05 -0700 2006&quot;</span></span><br><span class="line">  RFC822      = <span class="string">&quot;02 Jan 06 15:04 MST&quot;</span></span><br><span class="line">  RFC822Z     = <span class="string">&quot;02 Jan 06 15:04 -0700&quot;</span> <span class="comment">// RFC822 with numeric zone</span></span><br><span class="line">  RFC850      = <span class="string">&quot;Monday, 02-Jan-06 15:04:05 MST&quot;</span></span><br><span class="line">  RFC1123     = <span class="string">&quot;Mon, 02 Jan 2006 15:04:05 MST&quot;</span></span><br><span class="line">  RFC1123Z    = <span class="string">&quot;Mon, 02 Jan 2006 15:04:05 -0700&quot;</span> <span class="comment">// RFC1123 with numeric zone</span></span><br><span class="line">  RFC3339     = <span class="string">&quot;2006-01-02T15:04:05Z07:00&quot;</span></span><br><span class="line">  RFC3339Nano = <span class="string">&quot;2006-01-02T15:04:05.999999999Z07:00&quot;</span></span><br><span class="line">  Kitchen     = <span class="string">&quot;3:04PM&quot;</span></span><br><span class="line">  <span class="comment">// Handy time stamps.</span></span><br><span class="line">  Stamp      = <span class="string">&quot;Jan _2 15:04:05&quot;</span></span><br><span class="line">  StampMilli = <span class="string">&quot;Jan _2 15:04:05.000&quot;</span></span><br><span class="line">  StampMicro = <span class="string">&quot;Jan _2 15:04:05.000000&quot;</span></span><br><span class="line">  StampNano  = <span class="string">&quot;Jan _2 15:04:05.000000000&quot;</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<h2 id="è·å–å½“å‰æ—¥æœŸæ—¶é—´"><a href="#è·å–å½“å‰æ—¥æœŸæ—¶é—´" class="headerlink" title="è·å–å½“å‰æ—¥æœŸæ—¶é—´"></a>è·å–å½“å‰æ—¥æœŸæ—¶é—´</h2><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">  <span class="string">&quot;fmt&quot;</span></span><br><span class="line">  <span class="string">&quot;time&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">  now := time.Now()</span><br><span class="line">  fmt.Printf(<span class="string">&quot;å½“å‰æ—¥æœŸæ—¶é—´ï¼š%v\n&quot;</span>, now)</span><br><span class="line">  fmt.Printf(<span class="string">&quot;å¹´ï¼š%v\n&quot;</span>, now.Year())</span><br><span class="line">  fmt.Printf(<span class="string">&quot;æœˆï¼š%v\n&quot;</span>, now.Month())</span><br><span class="line">  fmt.Printf(<span class="string">&quot;æ—¥ï¼š%v\n&quot;</span>, now.Day())</span><br><span class="line">  fmt.Printf(<span class="string">&quot;æ—¶ï¼š%v\n&quot;</span>, now.Hour())</span><br><span class="line">  fmt.Printf(<span class="string">&quot;åˆ†ï¼š%v\n&quot;</span>, now.Minute())</span><br><span class="line">  fmt.Printf(<span class="string">&quot;ç§’ï¼š%v\n&quot;</span>, now.Second())</span><br><span class="line">  fmt.Printf(<span class="string">&quot;çº³ç§’ï¼š%v\n&quot;</span>, now.Nanosecond())</span><br><span class="line">  fmt.Printf(<span class="string">&quot;\n&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">å½“å‰æ—¥æœŸæ—¶é—´ï¼š2021-07-11 11:12:59.787921 +0800 CST m=+0.000104353</span></span><br><span class="line"><span class="comment">å¹´ï¼š2021</span></span><br><span class="line"><span class="comment">æœˆï¼šJuly</span></span><br><span class="line"><span class="comment">æ—¥ï¼š11</span></span><br><span class="line"><span class="comment">æ—¶ï¼š11</span></span><br><span class="line"><span class="comment">åˆ†ï¼š12</span></span><br><span class="line"><span class="comment">ç§’ï¼š59</span></span><br><span class="line"><span class="comment">çº³ç§’ï¼š787921000</span></span><br><span class="line"><span class="comment">/*</span></span><br></pre></td></tr></table></figure>
<h2 id="è·å–å½“å‰æ—¶é—´æˆ³"><a href="#è·å–å½“å‰æ—¶é—´æˆ³" class="headerlink" title="è·å–å½“å‰æ—¶é—´æˆ³"></a>è·å–å½“å‰æ—¶é—´æˆ³</h2><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">  <span class="string">&quot;fmt&quot;</span></span><br><span class="line">  <span class="string">&quot;time&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	now := time.Now()</span><br><span class="line">	fmt.Printf(<span class="string">&quot;å½“å‰æ—¶é—´æˆ³ï¼ˆå•ä½ä¸ºç§’ï¼‰ï¼š%v\n&quot;</span>, now.Unix())</span><br><span class="line">	fmt.Printf(<span class="string">&quot;å½“å‰æ—¶é—´æˆ³ï¼ˆå•ä½ä¸ºçº³ç§’ï¼‰ï¼š%v\n&quot;</span>, now.UnixNano())</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">å½“å‰æ—¶é—´æˆ³ï¼ˆå•ä½ä¸ºç§’ï¼‰ï¼š1625973361</span></span><br><span class="line"><span class="comment">å½“å‰æ—¶é—´æˆ³ï¼ˆå•ä½ä¸ºçº³ç§’ï¼‰ï¼š1625973361766745000</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>
<h2 id="è·å–å½“å‰æ—¶é—´çš„å­—ç¬¦ä¸²æ ¼å¼"><a href="#è·å–å½“å‰æ—¶é—´çš„å­—ç¬¦ä¸²æ ¼å¼" class="headerlink" title="è·å–å½“å‰æ—¶é—´çš„å­—ç¬¦ä¸²æ ¼å¼"></a>è·å–å½“å‰æ—¶é—´çš„å­—ç¬¦ä¸²æ ¼å¼</h2><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">  <span class="string">&quot;fmt&quot;</span></span><br><span class="line">  <span class="string">&quot;time&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">  now := time.Now()</span><br><span class="line">  fmt.Printf(<span class="string">&quot;å½“å‰æ—¥æœŸæ—¶é—´ï¼š%v\n&quot;</span>, now.Format(time.RFC3339))</span><br><span class="line">  fmt.Printf(<span class="string">&quot;å½“å‰æ—¥æœŸæ—¶é—´ï¼š%v\n&quot;</span>, now.Format(<span class="string">&quot;2006-01-02 15:04:05&quot;</span>))</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">å½“å‰æ—¥æœŸæ—¶é—´ï¼š2021-07-11T11:42:19+08:00</span></span><br><span class="line"><span class="comment">å½“å‰æ—¥æœŸæ—¶é—´ï¼š2021-07-11 11:42:19</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>
<h1 id="æŒ‡å®šæ—¶åŒºè·å–æ—¥æœŸæ—¶é—´"><a href="#æŒ‡å®šæ—¶åŒºè·å–æ—¥æœŸæ—¶é—´" class="headerlink" title="æŒ‡å®šæ—¶åŒºè·å–æ—¥æœŸæ—¶é—´"></a>æŒ‡å®šæ—¶åŒºè·å–æ—¥æœŸæ—¶é—´</h1><h2 id="ä½¿ç”¨-FixedZone-æŒ‡å®š"><a href="#ä½¿ç”¨-FixedZone-æŒ‡å®š" class="headerlink" title="ä½¿ç”¨ FixedZone æŒ‡å®š"></a>ä½¿ç”¨ FixedZone æŒ‡å®š</h2><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">  <span class="string">&quot;testing&quot;</span></span><br><span class="line">  <span class="string">&quot;time&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> TheCSTLayout = <span class="string">&quot;2006-01-02T15:04:05&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> theCSTZone *time.Location</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">init</span><span class="params">()</span></span> &#123;</span><br><span class="line">  theCSTZone = time.FixedZone(<span class="string">&quot;CST&quot;</span>, <span class="number">8</span>*<span class="number">3600</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestNowDateTime</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line">  dateTime := time.Now().In(theCSTZone).Format(TheCSTLayout)</span><br><span class="line">  t.Logf(<span class="string">&quot;The date time: %v&quot;</span>, dateTime)</span><br><span class="line">  now, _ := time.ParseInLocation(TheCSTLayout, dateTime, theCSTZone)</span><br><span class="line">  t.Logf(<span class="string">&quot;Now date time: %v&quot;</span>, now)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">$ go test -v -timeout 30s -run ^TestNowDateTime$ example.org/hello/v2</span></span><br><span class="line"><span class="comment">=== RUN   TestNowDateTime</span></span><br><span class="line"><span class="comment">    main_test.go:18: The date time: 2021-09-25T09:02:03</span></span><br><span class="line"><span class="comment">    main_test.go:20: Now date time: 2021-09-25 09:02:03 +0800 CST</span></span><br><span class="line"><span class="comment">--- PASS: TestNowDateTime (0.00s)</span></span><br><span class="line"><span class="comment">PASS</span></span><br><span class="line"><span class="comment">ok      example.org/hello/v2    0.234s</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>
<h2 id="ä½¿ç”¨-LoadLocation-æŒ‡å®š"><a href="#ä½¿ç”¨-LoadLocation-æŒ‡å®š" class="headerlink" title="ä½¿ç”¨ LoadLocation æŒ‡å®š"></a>ä½¿ç”¨ LoadLocation æŒ‡å®š</h2><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">  <span class="string">&quot;log&quot;</span></span><br><span class="line">  <span class="string">&quot;testing&quot;</span></span><br><span class="line">  <span class="string">&quot;time&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> TheCSTLayout = <span class="string">&quot;2006-01-02T15:04:05&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> theCSTLocation *time.Location</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">init</span><span class="params">()</span></span> &#123;</span><br><span class="line">  <span class="keyword">var</span> err error</span><br><span class="line">  theCSTLocation, err = time.LoadLocation(<span class="string">&quot;Asia/Shanghai&quot;</span>)</span><br><span class="line">  <span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">    log.Fatalf(<span class="string">&quot;Load location failed, %v&quot;</span>, err)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestNowDateTime</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line">  dateTime := time.Now().In(theCSTLocation).Format(TheCSTLayout)</span><br><span class="line">  t.Logf(<span class="string">&quot;The date time: %v&quot;</span>, dateTime)</span><br><span class="line">  now, _ := time.ParseInLocation(TheCSTLayout, dateTime, theCSTLocation)</span><br><span class="line">  t.Logf(<span class="string">&quot;Now date time: %v&quot;</span>, now)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">$ go test -v -timeout 30s -run ^TestNowDateTime$ example.org/hello/v2</span></span><br><span class="line"><span class="comment">=== RUN   TestNowDateTime</span></span><br><span class="line"><span class="comment">    main_test.go:23: The date time: 2021-09-25T09:39:02</span></span><br><span class="line"><span class="comment">    main_test.go:25: Now date time: 2021-09-25 09:39:02 +0800 CST</span></span><br><span class="line"><span class="comment">--- PASS: TestNowDateTime (0.00s)</span></span><br><span class="line"><span class="comment">PASS</span></span><br><span class="line"><span class="comment">ok      example.org/hello/v2    1.777s</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>
<h1 id="å¸¸ç”¨æ—¥æœŸæ—¶é—´è½¬æ¢"><a href="#å¸¸ç”¨æ—¥æœŸæ—¶é—´è½¬æ¢" class="headerlink" title="å¸¸ç”¨æ—¥æœŸæ—¶é—´è½¬æ¢"></a>å¸¸ç”¨æ—¥æœŸæ—¶é—´è½¬æ¢</h1><h2 id="æ—¶é—´æˆ³è½¬æ—¥æœŸæ—¶é—´å­—ç¬¦ä¸²"><a href="#æ—¶é—´æˆ³è½¬æ—¥æœŸæ—¶é—´å­—ç¬¦ä¸²" class="headerlink" title="æ—¶é—´æˆ³è½¬æ—¥æœŸæ—¶é—´å­—ç¬¦ä¸²"></a>æ—¶é—´æˆ³è½¬æ—¥æœŸæ—¶é—´å­—ç¬¦ä¸²</h2><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">  <span class="string">&quot;fmt&quot;</span></span><br><span class="line">  <span class="string">&quot;strconv&quot;</span></span><br><span class="line">  <span class="string">&quot;time&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">  layout := <span class="string">&quot;2006-01-02 15:04:05&quot;</span></span><br><span class="line">  now := time.Now().Unix()</span><br><span class="line">  fmt.Printf(<span class="string">&quot;è½¬æ¢åçš„æ—¥æœŸæ—¶é—´ï¼š%v\n&quot;</span>, time.Unix(now, <span class="number">0</span>).Format(layout))</span><br><span class="line"></span><br><span class="line">  a, b := <span class="number">1626005415</span>, <span class="string">&quot;1626005415&quot;</span></span><br><span class="line">  c, _ := strconv.ParseInt(b, <span class="number">10</span>, <span class="number">64</span>)</span><br><span class="line">  fmt.Printf(<span class="string">&quot;è½¬æ¢åçš„æ—¥æœŸæ—¶é—´ï¼š%v\n&quot;</span>, time.Unix(<span class="keyword">int64</span>(a), <span class="number">0</span>).Format(layout))</span><br><span class="line">  fmt.Printf(<span class="string">&quot;è½¬æ¢åçš„æ—¥æœŸæ—¶é—´ï¼š%v\n&quot;</span>, time.Unix(c, <span class="number">0</span>).Format(layout))</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">è½¬æ¢åçš„æ—¥æœŸæ—¶é—´ï¼š2021-07-11 20:35:31</span></span><br><span class="line"><span class="comment">è½¬æ¢åçš„æ—¥æœŸæ—¶é—´ï¼š2021-07-11 20:10:15</span></span><br><span class="line"><span class="comment">è½¬æ¢åçš„æ—¥æœŸæ—¶é—´ï¼š2021-07-11 20:10:15</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>
<h2 id="æ—¥æœŸæ—¶é—´å­—ç¬¦ä¸²è½¬æ—¶é—´æˆ³"><a href="#æ—¥æœŸæ—¶é—´å­—ç¬¦ä¸²è½¬æ—¶é—´æˆ³" class="headerlink" title="æ—¥æœŸæ—¶é—´å­—ç¬¦ä¸²è½¬æ—¶é—´æˆ³"></a>æ—¥æœŸæ—¶é—´å­—ç¬¦ä¸²è½¬æ—¶é—´æˆ³</h2><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">  <span class="string">&quot;fmt&quot;</span></span><br><span class="line">  <span class="string">&quot;time&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> (</span><br><span class="line">  ChinaFormat = <span class="string">&quot;2006-01-02 15:04:05&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">  a, b := <span class="string">&quot;2021-07-11 20:27:33&quot;</span>, <span class="string">&quot;Sun, 11 Jul 2021 15:04:05 UTC&quot;</span></span><br><span class="line">  at1, _ := time.Parse(ChinaFormat, a)</span><br><span class="line">  at2, _ := time.Parse(time.RFC1123, b)</span><br><span class="line">  fmt.Printf(<span class="string">&quot;è½¬æ¢åçš„æ—¶é—´æˆ³ï¼š%v\n&quot;</span>, at1.Unix())</span><br><span class="line">  fmt.Printf(<span class="string">&quot;è½¬æ¢åçš„æ—¶é—´æˆ³ï¼š%v\n&quot;</span>, at2.Unix())</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">è½¬æ¢åçš„æ—¶é—´æˆ³ï¼š1626035253</span></span><br><span class="line"><span class="comment">è½¬æ¢åçš„æ—¶é—´æˆ³ï¼š1626015845</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>
<h2 id="æ—¥æœŸæ—¶é—´å­—ç¬¦ä¸²è½¬æ—¶é—´å¯¹è±¡"><a href="#æ—¥æœŸæ—¶é—´å­—ç¬¦ä¸²è½¬æ—¶é—´å¯¹è±¡" class="headerlink" title="æ—¥æœŸæ—¶é—´å­—ç¬¦ä¸²è½¬æ—¶é—´å¯¹è±¡"></a>æ—¥æœŸæ—¶é—´å­—ç¬¦ä¸²è½¬æ—¶é—´å¯¹è±¡</h2><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">  <span class="string">&quot;fmt&quot;</span></span><br><span class="line">  <span class="string">&quot;time&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">  str := <span class="string">&quot;2008-08-08 08:08:08&quot;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// Parse the date string into Go&#x27;s time object</span></span><br><span class="line">  at, _ := time.Parse(<span class="string">&quot;2006-01-02 15:04:05&quot;</span>, str)</span><br><span class="line">  fmt.Printf(<span class="string">&quot;è½¬æ¢åçš„æ—¥æœŸæ—¶é—´ï¼š%v\n&quot;</span>, at)</span><br><span class="line">  fmt.Println(at.Date())</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">è½¬æ¢åçš„æ—¥æœŸæ—¶é—´ï¼š2008-08-08 08:08:08 +0000 UTC</span></span><br><span class="line"><span class="comment">2008 August 8</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>
<h1 id="å¸¸ç”¨æ—¥æœŸæ—¶é—´è®¡ç®—"><a href="#å¸¸ç”¨æ—¥æœŸæ—¶é—´è®¡ç®—" class="headerlink" title="å¸¸ç”¨æ—¥æœŸæ—¶é—´è®¡ç®—"></a>å¸¸ç”¨æ—¥æœŸæ—¶é—´è®¡ç®—</h1><h2 id="è®¡ç®—ä¸¤ä¸ªç»™å®šæ—¥æœŸä¹‹å‰ç›¸å·®çš„å¤©æ•°"><a href="#è®¡ç®—ä¸¤ä¸ªç»™å®šæ—¥æœŸä¹‹å‰ç›¸å·®çš„å¤©æ•°" class="headerlink" title="è®¡ç®—ä¸¤ä¸ªç»™å®šæ—¥æœŸä¹‹å‰ç›¸å·®çš„å¤©æ•°"></a>è®¡ç®—ä¸¤ä¸ªç»™å®šæ—¥æœŸä¹‹å‰ç›¸å·®çš„å¤©æ•°</h2><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">  <span class="string">&quot;fmt&quot;</span></span><br><span class="line">  <span class="string">&quot;time&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">  t1, t2 := Date(<span class="number">2020</span>, <span class="number">1</span>, <span class="number">1</span>), Date(<span class="number">2021</span>, <span class="number">1</span>, <span class="number">1</span>)</span><br><span class="line">  days := t2.Sub(t1).Hours() / <span class="number">24</span></span><br><span class="line">  fmt.Printf(<span class="string">&quot;ä¸¤ä¸ªç»™å®šæ—¥æœŸä¹‹å‰ç›¸å·®çš„å¤©æ•°ä¸ºï¼š%v\n&quot;</span>, days)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Date</span><span class="params">(year, month, day <span class="keyword">int</span>)</span> <span class="title">time</span>.<span class="title">Time</span></span> &#123;</span><br><span class="line">  <span class="keyword">return</span> time.Date(year, time.Month(month), day, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, time.UTC)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">ä¸¤ä¸ªç»™å®šæ—¥æœŸä¹‹å‰ç›¸å·®çš„å¤©æ•°ä¸ºï¼š366</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>
<h2 id="ç»Ÿè®¡ä»£ç è¿è¡Œæ—¶é—´"><a href="#ç»Ÿè®¡ä»£ç è¿è¡Œæ—¶é—´" class="headerlink" title="ç»Ÿè®¡ä»£ç è¿è¡Œæ—¶é—´"></a>ç»Ÿè®¡ä»£ç è¿è¡Œæ—¶é—´</h2><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">  <span class="string">&quot;fmt&quot;</span></span><br><span class="line">  <span class="string">&quot;time&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">  fn := TimeSpent(execSlowFunc)</span><br><span class="line">  fmt.Printf(<span class="string">&quot;Exec result: %v\n&quot;</span>, fn(<span class="number">9999</span>))</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">execSlowFunc</span><span class="params">(x <span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line">  time.Sleep(<span class="number">3</span> * time.Second)</span><br><span class="line">  <span class="keyword">return</span> x + <span class="number">1</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TimeSpent</span><span class="params">(fn <span class="keyword">func</span>(x <span class="keyword">int</span>)</span> <span class="title">int</span>) <span class="title">func</span><span class="params">(n <span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">func</span><span class="params">(x <span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line">    start := time.Now()</span><br><span class="line">    ret := fn(x)</span><br><span class="line">    fmt.Println(<span class="string">&quot;Time spent:&quot;</span>, time.Since(start).Seconds())</span><br><span class="line">    <span class="keyword">return</span> ret</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">Time spent: 3.004356442</span></span><br><span class="line"><span class="comment">Exec result: 10000</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">  <span class="string">&quot;log&quot;</span></span><br><span class="line">  <span class="string">&quot;time&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">  <span class="keyword">defer</span> TimeSpent(execSlowFunc(<span class="string">&quot;Hello World!&quot;</span>))</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">execSlowFunc</span><span class="params">(s <span class="keyword">string</span>)</span> <span class="params">(<span class="keyword">string</span>, time.Time)</span></span> &#123;</span><br><span class="line">  time.Sleep(<span class="number">1</span> * time.Second)</span><br><span class="line">  <span class="keyword">return</span> s + <span class="string">&quot; ğŸŒğŸŒˆğŸ’«ğŸ”¥ğŸ‰ğŸš€ğŸ™&quot;</span>, time.Now()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TimeSpent</span><span class="params">(s <span class="keyword">string</span>, start time.Time)</span></span> &#123;</span><br><span class="line">  log.Printf(<span class="string">&quot;%v: %v\n&quot;</span>, s, time.Since(start))</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">2021/07/14 08:22:38 Hello World! ğŸŒğŸŒˆğŸ’«ğŸ”¥ğŸ‰ğŸš€ğŸ™: 4.582Âµs</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>go</category>
      </categories>
      <tags>
        <tag>go</tag>
      </tags>
  </entry>
  <entry>
    <title>Hello World - Hello Notes</title>
    <url>/2018/01/11/hello-world/</url>
    <content><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is my very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p>
<span id="more"></span>
<h1 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h1><h2 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// Create a new post.</span><br><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p>
<h2 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// Start the server.</span><br><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p>
<h2 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// Generate static files.</span><br><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p>
<h2 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// Deploy your website.</span><br><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/deployment.html">Deployment</a></p>
<h1 id="Help"><a href="#Help" class="headerlink" title="Help"></a>Help</h1><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo --<span class="built_in">help</span></span><br><span class="line">Usage: hexo &lt;<span class="built_in">command</span>&gt;</span><br><span class="line"></span><br><span class="line">Commands:</span><br><span class="line">  algolia     Index your content <span class="keyword">in</span> Algolia Search API</span><br><span class="line">  clean       Remove generated files and cache.</span><br><span class="line">  config      Get or <span class="built_in">set</span> configurations.</span><br><span class="line">  deploy      Deploy your website.</span><br><span class="line">  generate    Generate static files.</span><br><span class="line">  <span class="built_in">help</span>        Get <span class="built_in">help</span> on a <span class="built_in">command</span>.</span><br><span class="line">  init        Create a new Hexo folder.</span><br><span class="line">  lc-counter  hexo-leancloud-counter-security</span><br><span class="line">  list        List the information of the site</span><br><span class="line">  migrate     Migrate your site from other system to Hexo.</span><br><span class="line">  new         Create a new post.</span><br><span class="line">  publish     Moves a draft post from _drafts to _posts folder.</span><br><span class="line">  render      Render files with renderer plugins.</span><br><span class="line">  server      Start the server.</span><br><span class="line">  version     Display version information.</span><br><span class="line"></span><br><span class="line">Global Options:</span><br><span class="line">  --config  Specify config file instead of using _config.yml</span><br><span class="line">  --cwd     Specify the CWD</span><br><span class="line">  --debug   Display all verbose messages <span class="keyword">in</span> the terminal</span><br><span class="line">  --draft   Display draft posts</span><br><span class="line">  --safe    Disable all plugins and scripts</span><br><span class="line">  --silent  Hide output on console</span><br><span class="line"></span><br><span class="line">For more <span class="built_in">help</span>, you can use <span class="string">&#x27;hexo help [command]&#x27;</span> <span class="keyword">for</span> the detailed information</span><br><span class="line">or you can check the docs: http://hexo.io/docs/</span><br></pre></td></tr></table></figure>
]]></content>
      <tags>
        <tag>other</tag>
      </tags>
  </entry>
  <entry>
    <title>Go å•å…ƒæµ‹è¯•</title>
    <url>/2021/07/16/go-unit-test/</url>
    <content><![CDATA[<p>ğŸ‹ï¸â€â™‚ï¸ Go è¯­è¨€ä»å¼€å‘åˆæœŸå°±æ³¨æ„äº†æµ‹è¯•ç”¨ä¾‹çš„ç¼–å†™ã€‚ç‰¹åˆ«æ˜¯é™æ€è¯­è¨€ï¼Œç”±äºè°ƒè¯•æ²¡æœ‰åŠ¨æ€è¯­è¨€é‚£ä¹ˆæ–¹ä¾¿ï¼Œæ‰€ä»¥èƒ½æœ€å¿«æœ€æ–¹ä¾¿åœ°ç¼–å†™ä¸€ä¸ªæµ‹è¯•ç”¨ä¾‹å°±æ˜¾å¾—éå¸¸é‡è¦äº†ã€‚</p>
<span id="more"></span>
<ul>
<li><a href="https://imajinyun.xyz/2021/06/26/go-get-started/">Go èµ·æ­¥</a></li>
<li><a href="https://imajinyun.xyz/2021/07/02/go-data-type/">Go æ•°æ®ç±»å‹</a></li>
<li><a href="https://imajinyun.xyz/2021/07/11/go-date-time/">Go æ—¥æœŸæ—¶é—´</a></li>
<li><a href="https://imajinyun.xyz/2021/07/14/go-random-number/">Go éšæœºæ•°</a></li>
<li><strong>Go å•å…ƒæµ‹è¯•</strong></li>
<li><a href="https://imajinyun.xyz/2021/07/17/go-benchmark-test/">Go åŸºå‡†æµ‹è¯•</a></li>
<li><a href="https://imajinyun.xyz/2021/07/22/go-other-test/">Go å…¶å®ƒæµ‹è¯•</a></li>
<li><a href="https://imajinyun.xyz/2021/07/24/go-correct-posture/">Go æ­£ç¡®å§¿åŠ¿</a></li>
<li><a href="https://imajinyun.xyz/2021/07/25/go-concat-string/">Go è¿æ¥å­—ç¬¦ä¸²</a></li>
</ul>
<h2 id="å•å…ƒæµ‹è¯•å‘½ä»¤"><a href="#å•å…ƒæµ‹è¯•å‘½ä»¤" class="headerlink" title="å•å…ƒæµ‹è¯•å‘½ä»¤"></a>å•å…ƒæµ‹è¯•å‘½ä»¤</h2><h3 id="å•å…ƒæµ‹è¯•å‘½ä»¤å®ä¾‹"><a href="#å•å…ƒæµ‹è¯•å‘½ä»¤å®ä¾‹" class="headerlink" title="å•å…ƒæµ‹è¯•å‘½ä»¤å®ä¾‹"></a>å•å…ƒæµ‹è¯•å‘½ä»¤å®ä¾‹</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ go <span class="built_in">test</span> -v hello.go hello_test.go</span><br><span class="line">$ go <span class="built_in">test</span> -v .</span><br><span class="line">$ go <span class="built_in">test</span> -v -run TestFib .</span><br><span class="line">$ go <span class="built_in">test</span> -v -timeout 30s -run <span class="string">&#x27;^TestFib$&#x27;</span> example.com/hello .</span><br></pre></td></tr></table></figure>
<h3 id="ä¸€äº›æµ‹è¯•é€‰é¡¹"><a href="#ä¸€äº›æµ‹è¯•é€‰é¡¹" class="headerlink" title="ä¸€äº›æµ‹è¯•é€‰é¡¹"></a>ä¸€äº›æµ‹è¯•é€‰é¡¹</h3><ul>
<li><code>-bench regexp</code>ï¼šæ‰§è¡Œç›¸åº”çš„ <code>benchmarks</code>ï¼Œä¾‹å¦‚ï¼š<code>-bench=.</code>ï¼›</li>
<li><code>-cover</code>ï¼šå¼€æˆ·æµ‹è¯•è¦†ç›–ç‡ï¼›</li>
<li><code>-run regexp</code>ï¼šåªè¿è¡Œ <code>regexp</code> åŒ¹é…çš„å‡½æ•°ï¼Œä¾‹å¦‚ï¼š<code>-run=Array</code> ä»…æ‰§è¡ŒåŒ…å«æœ‰ <code>Array</code> å¼€å¤´çš„å‡½æ•°ï¼›</li>
<li><code>-v</code>ï¼šæ˜¾ç¤ºæµ‹è¯•çš„è¯¦ç»†å‘½ä»¤ï¼›</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ go <span class="built_in">test</span> -v -timeout 10s -run <span class="string">&#x27;^TestFib$&#x27;</span> example.com/hello .</span><br><span class="line">=== RUN   TestFib</span><br><span class="line">--- PASS: TestFib (0.00s)</span><br><span class="line">PASS</span><br><span class="line">ok      example.com/hello       0.006s</span><br></pre></td></tr></table></figure>
<h2 id="å•å…ƒæµ‹è¯•å‡½æ•°"><a href="#å•å…ƒæµ‹è¯•å‡½æ•°" class="headerlink" title="å•å…ƒæµ‹è¯•å‡½æ•°"></a>å•å…ƒæµ‹è¯•å‡½æ•°</h2><h3 id="å•å…ƒæµ‹è¯•å‡½æ•°æ ¼å¼"><a href="#å•å…ƒæµ‹è¯•å‡½æ•°æ ¼å¼" class="headerlink" title="å•å…ƒæµ‹è¯•å‡½æ•°æ ¼å¼"></a>å•å…ƒæµ‹è¯•å‡½æ•°æ ¼å¼</h3><div class="note danger">
            <p><code>TestXxx</code> ä¸­ <code>Xxx</code> å¯ä»¥æ˜¯ä»»ä½•å­—æ¯æ•°å­—å­—ç¬¦ä¸²ï¼Œä½†æ˜¯ç¬¬ä¸€ä¸ªå­—æ¯ä¸èƒ½æ˜¯å°å†™å­—æ¯ã€‚</p>
          </div>
<p>å•å…ƒæµ‹è¯•æºç æ–‡ä»¶å¯ä»¥ç”±å¤šä¸ªæµ‹è¯•ç”¨ä¾‹ç»„æˆï¼Œæ¯ä¸ªæµ‹è¯•ç”¨ä¾‹å‡½æ•°éœ€è¦ä»¥ <code>Test</code> ä¸ºå‰ç¼€ï¼š</p>
<ul>
<li>å‰ç¼€ç”¨ä¾‹æ–‡ä»¶ä¸ä¼šå‚ä¸æ­£å¸¸æºç ç¼–è¯‘ï¼Œä¸ä¼šè¢«åŒ…å«åˆ°å¯æ‰§è¡Œæ–‡ä»¶ä¸­ï¼›</li>
<li>å•å…ƒæµ‹è¯•ç”¨ä¾‹ä½¿ç”¨ <code>go test</code> æŒ‡ä»¤æ¥æ‰§è¡Œï¼Œæ²¡æœ‰ä¹Ÿä¸éœ€è¦ <code>main()</code> ä½œä¸ºå‡½æ•°å…¥å£ã€‚æ‰€æœ‰ä»¥ <code>_test</code> ç»“å°¾çš„æºç å†…ä»¥ <code>Test</code> å¼€å¤´çš„å‡½æ•°ä¼šè¢«è‡ªåŠ¨æ‰§è¡Œï¼›</li>
<li>å•å…ƒæµ‹è¯•å‡½æ•°çš„å‚æ•° <code>t *test.T</code> å¿…é¡»ä¼ å…¥ï¼Œå¦åˆ™ä¼šæŠ¥å‡½æ•°ç­¾åé”™è¯¯ï¼Œå³ï¼š<code>wrong signature for TestXxx, must be: func TestXxx(t *testing.T)</code>ï¼›</li>
</ul>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestXxx</span><span class="params">(t *testing.T)</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ä»¥ä¸‹å‘½åæ˜¯åˆæ³•çš„</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Test123</span><span class="params">(t *testing.T)</span></span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Test</span>ä¸­å›½<span class="params">(t *testing.T)</span></span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestMac</span><span class="params">(t *testing.T)</span></span></span><br></pre></td></tr></table></figure>
<p>è¦ç¼–å†™ä¸€ä¸ªæ–°çš„æµ‹è¯•å¥—ä»¶ï¼Œéœ€è¦åˆ›å»ºä¸€ä¸ªåç§°ä»¥ <code>_test.go</code> ç»“å°¾çš„æ–‡ä»¶ï¼Œè¯¥æ–‡ä»¶åŒ…å« <code>TestXxx</code> å‡½æ•°ã€‚</p>
<h3 id="å„ç§ä¸åŒæµ‹è¯•ç”¨ä¾‹"><a href="#å„ç§ä¸åŒæµ‹è¯•ç”¨ä¾‹" class="headerlink" title="å„ç§ä¸åŒæµ‹è¯•ç”¨ä¾‹"></a>å„ç§ä¸åŒæµ‹è¯•ç”¨ä¾‹</h3><ul>
<li><code>TestSomething(t *testing.T)</code>ï¼šåŸºæœ¬æµ‹è¯•ç”¨ä¾‹ï¼›</li>
<li><code>BenchmarkSomething(b *testing.B)</code>ï¼šåŸºå‡†æµ‹è¯•ç”¨ä¾‹ï¼›</li>
<li><code>ExampleSomething()</code>ï¼šæ§åˆ¶å°æµ‹è¯•ç”¨ä¾‹ï¼›</li>
<li><code>TestMain(m *testing.M)</code>ï¼šä¸»å‡½æ•°æµ‹è¯•ç”¨ä¾‹ï¼›</li>
</ul>
<h2 id="å•å…ƒæµ‹è¯•ç”¨ä¾‹"><a href="#å•å…ƒæµ‹è¯•ç”¨ä¾‹" class="headerlink" title="å•å…ƒæµ‹è¯•ç”¨ä¾‹"></a>å•å…ƒæµ‹è¯•ç”¨ä¾‹</h2><h3 id="åŸºæœ¬æµ‹è¯•å®ä¾‹"><a href="#åŸºæœ¬æµ‹è¯•å®ä¾‹" class="headerlink" title="åŸºæœ¬æµ‹è¯•å®ä¾‹"></a>åŸºæœ¬æµ‹è¯•å®ä¾‹</h3><p>å¾…æµ‹ä»£ç ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Fib</span><span class="params">(n <span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line">  <span class="keyword">if</span> n &lt; <span class="number">2</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> n</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> Fib(n<span class="number">-1</span>) + Fib(n<span class="number">-2</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æµ‹è¯•ä»£ç ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestFib</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line">  <span class="keyword">var</span> (</span><br><span class="line">    in = <span class="number">7</span></span><br><span class="line">    expect = <span class="number">13</span></span><br><span class="line">  )</span><br><span class="line">  actual := Fib(in)</span><br><span class="line">  <span class="keyword">if</span> actual != expect &#123;</span><br><span class="line">    t.Errorf(<span class="string">&quot;Fib(%d) = %d; want %d&quot;</span>, in, actual, expect)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ go <span class="built_in">test</span> -v -timeout 30s -run <span class="string">&#x27;^TestFib$&#x27;</span> example.com/hello</span><br><span class="line"></span><br><span class="line">=== RUN   TestFib</span><br><span class="line">--- PASS: TestFib (0.00s)</span><br><span class="line">PASS</span><br><span class="line">ok  	example.com/hello	0.007s</span><br></pre></td></tr></table></figure>
<h3 id="è¡¨é©±åŠ¨æµ‹è¯•å®ä¾‹"><a href="#è¡¨é©±åŠ¨æµ‹è¯•å®ä¾‹" class="headerlink" title="è¡¨é©±åŠ¨æµ‹è¯•å®ä¾‹"></a>è¡¨é©±åŠ¨æµ‹è¯•å®ä¾‹</h3><p>Table-Driven çš„æµ‹è¯•æ–¹å¼åœ¨ Go çš„æºç ä¸­å¸ç©ºè§æƒ¯ï¼Œæ¯”å¦‚ï¼š<a href="https://github.com/golang/go/blob/master/src/time/time_test.go">time_test.go</a>ã€‚</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestFib</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line">  <span class="keyword">var</span> fibTests = []<span class="keyword">struct</span> &#123;</span><br><span class="line">    in     <span class="keyword">int</span></span><br><span class="line">    expect <span class="keyword">int</span></span><br><span class="line">  &#125;&#123;</span><br><span class="line">    &#123;<span class="number">1</span>, <span class="number">1</span>&#125;,</span><br><span class="line">    &#123;<span class="number">2</span>, <span class="number">1</span>&#125;,</span><br><span class="line">    &#123;<span class="number">3</span>, <span class="number">2</span>&#125;,</span><br><span class="line">    &#123;<span class="number">4</span>, <span class="number">3</span>&#125;,</span><br><span class="line">    &#123;<span class="number">5</span>, <span class="number">5</span>&#125;,</span><br><span class="line">    &#123;<span class="number">6</span>, <span class="number">8</span>&#125;,</span><br><span class="line">    &#123;<span class="number">7</span>, <span class="number">13</span>&#125;,</span><br><span class="line">    &#123;<span class="number">8</span>, <span class="number">21</span>&#125;,</span><br><span class="line">    &#123;<span class="number">9</span>, <span class="number">34</span>&#125;,</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">for</span> i, tt := <span class="keyword">range</span> fibTests &#123;</span><br><span class="line">    actual := Fib(tt.in)</span><br><span class="line">    <span class="keyword">if</span> actual != tt.expect &#123;</span><br><span class="line">      t.Errorf(<span class="string">&quot;#%d: Fib(%d) = %d; want %d&quot;</span>, i, tt.in, actual, tt.expect)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ go <span class="built_in">test</span> -v -timeout 30s -run <span class="string">&#x27;^TestFib$&#x27;</span> example.com/hello</span><br><span class="line"></span><br><span class="line">=== RUN   TestFib</span><br><span class="line">--- PASS: TestFib (0.00s)</span><br><span class="line">PASS</span><br><span class="line">ok  	example.com/hello	(cached)</span><br></pre></td></tr></table></figure>
<h3 id="å­æµ‹è¯•å®ä¾‹"><a href="#å­æµ‹è¯•å®ä¾‹" class="headerlink" title="å­æµ‹è¯•å®ä¾‹"></a>å­æµ‹è¯•å®ä¾‹</h3><p>å¾…æµ‹ä»£ç ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> hello</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Add</span><span class="params">(x, y <span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line">  <span class="keyword">return</span> x + y</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æµ‹è¯•ä»£ç ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> hello</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;testing&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestAll</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line">  <span class="keyword">var</span> positiveNumberTests = []<span class="keyword">struct</span> &#123;</span><br><span class="line">    name           <span class="keyword">string</span></span><br><span class="line">    x, y, expected <span class="keyword">int</span></span><br><span class="line">  &#125;&#123;</span><br><span class="line">    &#123;<span class="string">&quot;positive number&quot;</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">2</span>&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;negative number&quot;</span>, <span class="number">0</span>, <span class="number">9</span>, <span class="number">9</span>&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;zero number&quot;</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>&#125;,</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> _, tt := <span class="keyword">range</span> positiveNumberTests &#123;</span><br><span class="line">    t.Run(tt.name, <span class="function"><span class="keyword">func</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line">      <span class="keyword">if</span> actual := Add(tt.x, tt.y); actual != tt.expected &#123;</span><br><span class="line">        t.Errorf(<span class="string">&quot;Add(%d, %d) = %d, want %d&quot;</span>, tt.x, tt.y, actual, tt.expected)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ go <span class="built_in">test</span> -v -timeout 30s -run <span class="string">&#x27;^TestAll$&#x27;</span> example.com/hello</span><br><span class="line"></span><br><span class="line">=== RUN   TestAll</span><br><span class="line">=== RUN   TestAll/positive_number</span><br><span class="line">=== RUN   TestAll/negative_number</span><br><span class="line">=== RUN   TestAll/zero_number</span><br><span class="line">--- PASS: TestAll (0.00s)</span><br><span class="line">    --- PASS: TestAll/positive_number (0.00s)</span><br><span class="line">    --- PASS: TestAll/negative_number (0.00s)</span><br><span class="line">    --- PASS: TestAll/zero_number (0.00s)</span><br><span class="line">PASS</span><br><span class="line">ok  	example.com/hello	0.013s</span><br></pre></td></tr></table></figure>
<h3 id="æ¨¡ä»¿æµ‹è¯•å®ä¾‹"><a href="#æ¨¡ä»¿æµ‹è¯•å®ä¾‹" class="headerlink" title="æ¨¡ä»¿æµ‹è¯•å®ä¾‹"></a>æ¨¡ä»¿æµ‹è¯•å®ä¾‹</h3><p>å¾…æµ‹ä»£ç ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> hello</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;context&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> API <span class="keyword">interface</span> &#123;</span><br><span class="line">  FetchPostByID(ctx context.Context, id <span class="keyword">int</span>) (*APIPost, error)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> APIPost <span class="keyword">struct</span> &#123;</span><br><span class="line">  ID     <span class="keyword">int</span>    <span class="string">`json:&quot;id&quot;`</span></span><br><span class="line">  UserID <span class="keyword">int</span>    <span class="string">`json:&quot;user_id&quot;`</span></span><br><span class="line">  Title  <span class="keyword">string</span> <span class="string">`json:&quot;title&quot;`</span></span><br><span class="line">  Body   <span class="keyword">string</span> <span class="string">`json:&quot;body&quot;`</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æµ‹è¯•ä»£ç ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> hello</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">  <span class="string">&quot;context&quot;</span></span><br><span class="line">  <span class="string">&quot;encoding/json&quot;</span></span><br><span class="line">  <span class="string">&quot;fmt&quot;</span></span><br><span class="line">  <span class="string">&quot;io&quot;</span></span><br><span class="line">  <span class="string">&quot;net/http&quot;</span></span><br><span class="line">  <span class="string">&quot;reflect&quot;</span></span><br><span class="line">  <span class="string">&quot;strings&quot;</span></span><br><span class="line">  <span class="string">&quot;testing&quot;</span></span><br><span class="line">  <span class="string">&quot;time&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> APIMock <span class="keyword">struct</span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(a *APIMock)</span> <span class="title">FetchPostByID</span><span class="params">(ctx context.Context, id <span class="keyword">int</span>)</span> <span class="params">(*APIPost, error)</span></span> &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="literal">nil</span>, fmt.Errorf(http.StatusText(http.StatusNotFound))</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> HTTPClient <span class="keyword">interface</span> &#123;</span><br><span class="line">  Do(*http.Request) (*http.Response, error)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> HTTPClientMock <span class="keyword">struct</span> &#123;</span><br><span class="line">  DoFunc <span class="function"><span class="keyword">func</span><span class="params">(*http.Request)</span> <span class="params">(*http.Response, error)</span></span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(h HTTPClientMock)</span> <span class="title">Do</span><span class="params">(r *http.Request)</span> <span class="params">(*http.Response, error)</span></span> &#123;</span><br><span class="line">  <span class="keyword">return</span> h.DoFunc(r)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">New</span><span class="params">(client HTTPClient, baseURL <span class="keyword">string</span>, timeout time.Duration)</span> <span class="title">API</span></span> &#123;</span><br><span class="line">  <span class="keyword">return</span> &amp;v1&#123;</span><br><span class="line">    c:       client,</span><br><span class="line">    baseURL: baseURL,</span><br><span class="line">    timeout: timeout,</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> v1 <span class="keyword">struct</span> &#123;</span><br><span class="line">  c       HTTPClient</span><br><span class="line">  baseURL <span class="keyword">string</span></span><br><span class="line">  timeout time.Duration</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(v v1)</span> <span class="title">FetchPostByID</span><span class="params">(ctx context.Context, id <span class="keyword">int</span>)</span> <span class="params">(*APIPost, error)</span></span> &#123;</span><br><span class="line">  u := fmt.Sprintf(<span class="string">&quot;%s/posts/%d&quot;</span>, v.baseURL, id)</span><br><span class="line">  ctx, cancel := context.WithTimeout(ctx, v.timeout)</span><br><span class="line">  <span class="keyword">defer</span> cancel()</span><br><span class="line"></span><br><span class="line">  req, err := http.NewRequestWithContext(ctx, http.MethodGet, u, <span class="literal">nil</span>)</span><br><span class="line">  <span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">nil</span>, err</span><br><span class="line">  &#125;</span><br><span class="line">  res, err := v.c.Do(req)</span><br><span class="line">  <span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">nil</span>, err</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">defer</span> res.Body.Close()</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> res.StatusCode != http.StatusOK &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">nil</span>, fmt.Errorf(http.StatusText(res.StatusCode))</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> result *APIPost</span><br><span class="line">  <span class="keyword">return</span> result, json.NewDecoder(res.Body).Decode(&amp;result)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> (</span><br><span class="line">  client = &amp;HTTPClientMock&#123;&#125;</span><br><span class="line">  api    = New(client, <span class="string">&quot;&quot;</span>, <span class="number">0</span>)</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestV1FetchPostByID</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line">  postTests := []<span class="keyword">struct</span> &#123;</span><br><span class="line">    Body       <span class="keyword">string</span></span><br><span class="line">    StatusCode <span class="keyword">int</span></span><br><span class="line">    Result     *APIPost</span><br><span class="line">    Error      error</span><br><span class="line">  &#125;&#123;</span><br><span class="line">    &#123;</span><br><span class="line">      Body:       <span class="string">`&#123;&quot;id&quot;:1,&quot;user_id&quot;:1001,&quot;title&quot;:&quot;title 1&quot;,&quot;body&quot;:&quot;body 1&quot;&#125;`</span>,</span><br><span class="line">      StatusCode: <span class="number">200</span>,</span><br><span class="line">      Result:     &amp;APIPost&#123;<span class="number">1</span>, <span class="number">1001</span>, <span class="string">&quot;title 1&quot;</span>, <span class="string">&quot;body 1&quot;</span>&#125;,</span><br><span class="line">      Error:      <span class="literal">nil</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      Body:       <span class="string">`&#123;&quot;id&quot;:2,&quot;user_id&quot;:1002,&quot;title&quot;:&quot;title 2&quot;,&quot;body&quot;:&quot;body 2&quot;&#125;`</span>,</span><br><span class="line">      StatusCode: <span class="number">200</span>,</span><br><span class="line">      Result:     &amp;APIPost&#123;<span class="number">2</span>, <span class="number">1002</span>, <span class="string">&quot;title 2&quot;</span>, <span class="string">&quot;body 2&quot;</span>&#125;,</span><br><span class="line">      Error:      <span class="literal">nil</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      Body:       <span class="string">``</span>,</span><br><span class="line">      StatusCode: http.StatusBadRequest,</span><br><span class="line">      Result:     <span class="literal">nil</span>,</span><br><span class="line">      Error:      fmt.Errorf(http.StatusText(http.StatusBadRequest)),</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      Body:       <span class="string">``</span>,</span><br><span class="line">      StatusCode: http.StatusBadRequest,</span><br><span class="line">      Result:     <span class="literal">nil</span>,</span><br><span class="line">      Error:      fmt.Errorf(http.StatusText(http.StatusBadRequest)),</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> _, tt := <span class="keyword">range</span> postTests &#123;</span><br><span class="line">    client.DoFunc = <span class="function"><span class="keyword">func</span><span class="params">(r *http.Request)</span> <span class="params">(*http.Response, error)</span></span> &#123;</span><br><span class="line">      <span class="keyword">return</span> &amp;http.Response&#123;</span><br><span class="line">        Body:       io.NopCloser(strings.NewReader(tt.Body)),</span><br><span class="line">        StatusCode: tt.StatusCode,</span><br><span class="line">      &#125;, <span class="literal">nil</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    post, err := api.FetchPostByID(context.Background(), <span class="number">0</span>)</span><br><span class="line">    <span class="keyword">if</span> err != <span class="literal">nil</span> &amp;&amp; err.Error() != tt.Error.Error() &#123;</span><br><span class="line">      t.Fatalf(<span class="string">&quot;want %v, got %v&quot;</span>, tt.Error, err)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> !reflect.DeepEqual(post, tt.Result) &#123;</span><br><span class="line">      t.Fatalf(<span class="string">&quot;want %v, got %v&quot;</span>, tt.Result, post)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ go <span class="built_in">test</span> -v -timeout 30s -run <span class="string">&#x27;^TestV1FetchPostByID$&#x27;</span> example.com/hello</span><br><span class="line"></span><br><span class="line">=== RUN   TestV1FetchPostByID</span><br><span class="line">--- PASS: TestV1FetchPostByID (0.00s)</span><br><span class="line">PASS</span><br><span class="line">ok  	example.com/hello	(cached)</span><br></pre></td></tr></table></figure>
<h2 id="T-ç±»å‹"><a href="#T-ç±»å‹" class="headerlink" title="T ç±»å‹"></a>T ç±»å‹</h2><p>å•å…ƒæµ‹è¯•ä¸­ï¼Œä¼ é€’ç»™æµ‹è¯•å‡½æ•°çš„å‚æ•°æ˜¯ <code>*testing.T</code> ç±»å‹ã€‚å®ƒç”¨äºç®¡ç†æµ‹è¯•çŠ¶æ€å¹¶æ”¯æŒæ ¼å¼åŒ–æµ‹è¯•æ—¥å¿—ã€‚æµ‹è¯•æ—¥å¿—ä¼šåœ¨æ‰§è¡Œæµ‹è¯•çš„è¿‡ç¨‹ä¸­ä¸æ–­ç´¯ç§¯ï¼Œå¹¶åœ¨æµ‹è¯•å®Œæˆæ—¶è½¬å‚¨è‡³æ ‡å‡†è¾“å‡ºã€‚</p>
<h3 id="æŠ¥å‘Šæ–¹æ³•"><a href="#æŠ¥å‘Šæ–¹æ³•" class="headerlink" title="æŠ¥å‘Šæ–¹æ³•"></a>æŠ¥å‘Šæ–¹æ³•</h3><h4 id="é”™è¯¯æ–¹æ³•"><a href="#é”™è¯¯æ–¹æ³•" class="headerlink" title="é”™è¯¯æ–¹æ³•"></a>é”™è¯¯æ–¹æ³•</h4><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> hello</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">  <span class="string">&quot;errors&quot;</span></span><br><span class="line">  <span class="string">&quot;testing&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestErrorFunc</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line">  t.Error(<span class="string">&quot;this is a error&quot;</span>)</span><br><span class="line">  t.Errorf(<span class="string">&quot;%s&quot;</span>, errors.New(<span class="string">&quot;this is a error&quot;</span>))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ go <span class="built_in">test</span> -v -timeout 30s -run <span class="string">&#x27;^TestErrorFunc$&#x27;</span> example.com/hello</span><br><span class="line"></span><br><span class="line">=== RUN   TestErrorFunc</span><br><span class="line">    /Users/majinyun/Codes/go/src/github.com/imajinyun/hello/hello_test.go:9: this is a error</span><br><span class="line">    /Users/majinyun/Codes/go/src/github.com/imajinyun/hello/hello_test.go:10: this is a error</span><br><span class="line">--- FAIL: TestErrorFunc (0.00s)</span><br><span class="line">FAIL</span><br><span class="line">FAIL	example.com/hello	0.010s</span><br></pre></td></tr></table></figure>
<h4 id="å¤±è´¥æ–¹æ³•"><a href="#å¤±è´¥æ–¹æ³•" class="headerlink" title="å¤±è´¥æ–¹æ³•"></a>å¤±è´¥æ–¹æ³•</h4><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> hello</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">  <span class="string">&quot;testing&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestFailFunc</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line">  t.Fail()</span><br><span class="line">  t.Log(<span class="string">&quot;see if this line will output #1&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestFailedFunc</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line">  t.Failed()</span><br><span class="line">  t.Log(<span class="string">&quot;see if this line will output #2&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestFailNowFunc</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line">  t.FailNow()</span><br><span class="line">  t.Log(<span class="string">&quot;see if this line will output #3&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ go <span class="built_in">test</span> -v -timeout 30s -run <span class="string">&#x27;^(TestFailFunc|TestFailedFunc|TestFailNowFunc)$&#x27;</span> example.com/hello</span><br><span class="line"></span><br><span class="line">=== RUN   TestFailFunc</span><br><span class="line">    /Users/majinyun/Codes/go/src/github.com/imajinyun/hello/hello_test.go:9: see <span class="keyword">if</span> this line will output <span class="comment">#1</span></span><br><span class="line">--- FAIL: TestFailFunc (0.00s)</span><br><span class="line">=== RUN   TestFailedFunc</span><br><span class="line">    /Users/majinyun/Codes/go/src/github.com/imajinyun/hello/hello_test.go:14: see <span class="keyword">if</span> this line will output <span class="comment">#2</span></span><br><span class="line">--- PASS: TestFailedFunc (0.00s)</span><br><span class="line">=== RUN   TestFailNowFunc</span><br><span class="line">--- FAIL: TestFailNowFunc (0.00s)</span><br><span class="line">FAIL</span><br><span class="line">FAIL	example.com/hello	0.008s</span><br></pre></td></tr></table></figure>
<h4 id="è‡´å‘½æ–¹æ³•"><a href="#è‡´å‘½æ–¹æ³•" class="headerlink" title="è‡´å‘½æ–¹æ³•"></a>è‡´å‘½æ–¹æ³•</h4><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> hello</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">  <span class="string">&quot;errors&quot;</span></span><br><span class="line">  <span class="string">&quot;testing&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestFatalFunc</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line">  t.Fatal(<span class="string">&quot;this is a fatal&quot;</span>)</span><br><span class="line">  t.Log(<span class="string">&quot;see if this line will output #1&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestFatalfFunc</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line">  t.Fatalf(<span class="string">&quot;%s&quot;</span>, errors.New(<span class="string">&quot;this is a fatal&quot;</span>))</span><br><span class="line">  t.Log(<span class="string">&quot;see if this line will output #2&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ go <span class="built_in">test</span> -v -timeout 30s -run <span class="string">&#x27;^(TestFatalFunc|TestFatalfFunc)$&#x27;</span> example.com/hello</span><br><span class="line"></span><br><span class="line">=== RUN   TestFatalFunc</span><br><span class="line">    /Users/majinyun/Codes/go/src/github.com/imajinyun/hello/hello_test.go:9: this is a fatal</span><br><span class="line">--- FAIL: TestFatalFunc (0.00s)</span><br><span class="line">=== RUN   TestFatalfFunc</span><br><span class="line">    /Users/majinyun/Codes/go/src/github.com/imajinyun/hello/hello_test.go:14: this is a fatal</span><br><span class="line">--- FAIL: TestFatalfFunc (0.00s)</span><br><span class="line">FAIL</span><br><span class="line">FAIL	example.com/hello	0.012s</span><br></pre></td></tr></table></figure>
<h4 id="æ—¥å¿—æ–¹æ³•"><a href="#æ—¥å¿—æ–¹æ³•" class="headerlink" title="æ—¥å¿—æ–¹æ³•"></a>æ—¥å¿—æ–¹æ³•</h4><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> hello</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">  <span class="string">&quot;errors&quot;</span></span><br><span class="line">  <span class="string">&quot;testing&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestLogFunc</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line">  t.Log(<span class="string">&quot;this is a log&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestLogfFunc</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line">  t.Logf(<span class="string">&quot;%s&quot;</span>, errors.New(<span class="string">&quot;this is a log&quot;</span>))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ go <span class="built_in">test</span> -v -timeout 30s -run <span class="string">&#x27;^(TestLogFunc|TestLogfFunc)$&#x27;</span> example.com/hello</span><br><span class="line"></span><br><span class="line">=== RUN   TestLogFunc</span><br><span class="line">    /Users/majinyun/Codes/go/src/github.com/imajinyun/hello/hello_test.go:9: this is a <span class="built_in">log</span></span><br><span class="line">--- PASS: TestLogFunc (0.00s)</span><br><span class="line">=== RUN   TestLogfFunc</span><br><span class="line">    /Users/majinyun/Codes/go/src/github.com/imajinyun/hello/hello_test.go:13: this is a <span class="built_in">log</span></span><br><span class="line">--- PASS: TestLogfFunc (0.00s)</span><br><span class="line">PASS</span><br><span class="line">ok  	example.com/hello	0.015s</span><br></pre></td></tr></table></figure>
<h4 id="è·³è¿‡æ–¹æ³•"><a href="#è·³è¿‡æ–¹æ³•" class="headerlink" title="è·³è¿‡æ–¹æ³•"></a>è·³è¿‡æ–¹æ³•</h4><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> hello</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">  <span class="string">&quot;errors&quot;</span></span><br><span class="line">  <span class="string">&quot;testing&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestSkipFunc</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line">  t.Skip(<span class="string">&quot;this is a skip&quot;</span>)</span><br><span class="line">  t.Log(<span class="string">&quot;see if this line will output #1&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestSkipfFunc</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line">  t.Logf(<span class="string">&quot;%s&quot;</span>, errors.New(<span class="string">&quot;this is a skip&quot;</span>))</span><br><span class="line">  t.Log(<span class="string">&quot;see if this line will output #2&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestSkipNowFunc</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line">  t.SkipNow()</span><br><span class="line">  t.Log(<span class="string">&quot;see if this line will output #3&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestSkippedFunc</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line">  <span class="keyword">if</span> t.Skipped() &#123;</span><br><span class="line">    t.Log(<span class="string">&quot;see if this line will output #4&quot;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ go <span class="built_in">test</span> -timeout 30s -run <span class="string">&#x27;^(TestSkipFunc|TestSkipfFunc|TestSkipNowFunc|TestSkippedFunc)$&#x27;</span> example.com/hello -v</span><br><span class="line"></span><br><span class="line">=== RUN   TestSkipFunc</span><br><span class="line">    /Users/majinyun/Codes/go/src/github.com/imajinyun/hello/hello_test.go:9: this is a skip</span><br><span class="line">--- SKIP: TestSkipFunc (0.00s)</span><br><span class="line">=== RUN   TestSkipfFunc</span><br><span class="line">    /Users/majinyun/Codes/go/src/github.com/imajinyun/hello/hello_test.go:14: this is a skip</span><br><span class="line">    /Users/majinyun/Codes/go/src/github.com/imajinyun/hello/hello_test.go:15: see <span class="keyword">if</span> this line will output <span class="comment">#2</span></span><br><span class="line">--- PASS: TestSkipfFunc (0.00s)</span><br><span class="line">=== RUN   TestSkipNowFunc</span><br><span class="line">--- SKIP: TestSkipNowFunc (0.00s)</span><br><span class="line">=== RUN   TestSkippedFunc</span><br><span class="line">--- PASS: TestSkippedFunc (0.00s)</span><br><span class="line">PASS</span><br><span class="line">ok  	example.com/hello	0.011s</span><br></pre></td></tr></table></figure>
<h3 id="å¹¶è¡Œæµ‹è¯•"><a href="#å¹¶è¡Œæµ‹è¯•" class="headerlink" title="å¹¶è¡Œæµ‹è¯•"></a>å¹¶è¡Œæµ‹è¯•</h3><p>é»˜è®¤æƒ…å†µä¸‹ï¼ŒæŒ‡å®šåŒ…çš„æµ‹è¯•æ˜¯æŒ‰ç…§é¡ºåºæ‰§è¡Œçš„ï¼Œä½†ä¹Ÿå¯ä»¥é€šè¿‡åœ¨æµ‹è¯•çš„å‡½æ•°å†…éƒ¨ä½¿ç”¨ <code>t.Parallel()</code> æ¥æ ‡å¿—æŸäº›æµ‹è¯•ä¹Ÿå¯ä»¥è¢«å®‰å…¨çš„å¹¶å‘æ‰§è¡Œï¼ˆå’Œé»˜è®¤çš„ä¸€æ ·ï¼Œå‡è®¾å‚æ•°åä¸º <code>t</code>ï¼‰ã€‚åœ¨å¹¶è¡Œæ‰§è¡Œçš„æƒ…å†µä¸‹ï¼Œåªæœ‰å½“é‚£äº›è¢«æ ‡è®°ä¸ºå¹¶è¡Œçš„æµ‹è¯•æ‰ä¼šè¢«å¹¶è¡Œæ‰§è¡Œï¼Œæ‰€ä»¥åªæœ‰ä¸€ä¸ªæµ‹è¯•å‡½æ•°æ—¶æ˜¯æ²¡æ„ä¹‰çš„ã€‚å®ƒåº”è¯¥åœ¨æµ‹è¯•å‡½æ•°ä½“ä¸­ç¬¬ä¸€ä¸ªè¢«è°ƒç”¨ï¼ˆåœ¨ä»»ä½•éœ€è¦è·³è¿‡çš„æ¡ä»¶ä¹‹åï¼‰ï¼Œå› ä¸ºå®ƒä¼šé‡ç½®æµ‹è¯•æ—¶é—´ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestParallel</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line">  t.Parallel()</span><br><span class="line">  <span class="comment">// actual test...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åœ¨å¹¶å‘æƒ…å†µä¸‹ï¼ŒåŒæ—¶è¿è¡Œçš„æµ‹è¯•çš„æ•°é‡é»˜è®¤å–å†³äº <code>GOMAXPROCS</code>ã€‚å®ƒå¯ä»¥é€šè¿‡ <code>-parallel n</code> è¢«æŒ‡å®šï¼ˆ<code>go test -parallel 4</code>ï¼‰ã€‚</p>
<p>å¦å¤–ä¸€ä¸ªå¯ä»¥å®ç°å¹¶è¡Œçš„æ–¹æ³•ï¼Œå°½ç®¡ä¸æ˜¯å‡½æ•°çº§ç²’åº¦ï¼Œä½†å´æ˜¯åŒ…çº§ç²’åº¦ï¼Œå°±æ˜¯ç±»ä¼¼è¿™æ ·æ‰§è¡Œ <code>go test p1 p2 p3</code>ï¼ˆä¹Ÿå°±æ˜¯è¯´ï¼ŒåŒæ—¶è°ƒç”¨å¤šä¸ªæµ‹è¯•åŒ…ï¼‰ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼ŒåŒ…ä¼šè¢«å…ˆç¼–è¯‘ï¼Œå¹¶åŒæ—¶è¢«æ‰§è¡Œã€‚å½“ç„¶ï¼Œè¿™å¯¹äºæ€»çš„æ—¶é—´æ¥è¯´æ˜¯æœ‰å¥½å¤„çš„ï¼Œä½†å®ƒä¹Ÿå¯èƒ½ä¼šå¯¼è‡´é”™è¯¯å˜å¾—å…·æœ‰ä¸å¯é¢„æµ‹æ€§ï¼Œæ¯”å¦‚ä¸€äº›èµ„æºè¢«å¤šä¸ªåŒ…åŒæ—¶ä½¿ç”¨æ—¶ï¼ˆä¾‹å¦‚ï¼Œä¸€äº›æµ‹è¯•éœ€è¦è®¿é—®æ•°æ®åº“ï¼Œå¹¶åˆ é™¤ä¸€äº›è¡Œï¼Œè€Œè¿™äº›è¡Œåˆåˆšå¥½è¢«å…¶ä»–çš„æµ‹è¯•åŒ…ä½¿ç”¨çš„è¯ï¼‰ã€‚</p>
<p>ä¸ºäº†ä¿æŒå¯æ§æ€§ï¼Œ<code>-p</code> æ ‡å¿—å¯ä»¥ç”¨æ¥æŒ‡å®šç¼–è¯‘å’Œæµ‹è¯•çš„å¹¶å‘æ•°ã€‚å½“ä»“åº“ä¸­æœ‰å¤šä¸ªæµ‹è¯•åŒ…ï¼Œå¹¶ä¸”æ¯ä¸ªåŒ…åœ¨ä¸åŒçš„å­ç›®å½•ä¸­ï¼Œä¸€ä¸ªå¯ä»¥æ‰§è¡Œæ‰€æœ‰åŒ…çš„å‘½ä»¤æ˜¯ <code>go test ./...</code>ï¼Œè¿™åŒ…å«å½“å‰ç›®å½•å’Œæ‰€æœ‰å­ç›®å½•ã€‚æ²¡æœ‰å¸¦ <code>-p</code> æ ‡å¿—æ‰§è¡Œæ—¶ï¼Œæ€»çš„è¿è¡Œæ—¶é—´åº”è¯¥æ¥è¿‘äºè¿è¡Œæ—¶é—´æœ€é•¿çš„åŒ…çš„æ—¶é—´ï¼ˆåŠ ä¸Šç¼–è¯‘æ—¶é—´ï¼‰ã€‚è¿è¡Œ <code>go test -p 1 ./...</code>ï¼Œä½¿ç¼–è¯‘å’Œæµ‹è¯•å·¥å…·åªèƒ½åœ¨ä¸€ä¸ªåŒ…ä¸­æ‰§è¡Œæ—¶ï¼Œæ€»çš„æ—¶é—´åº”è¯¥æ¥è¿‘äºæ‰€æœ‰ç‹¬ç«‹çš„åŒ…æµ‹è¯•çš„æ—¶é—´åŠ ä¸Šç¼–è¯‘çš„æ—¶é—´çš„æ€»å’Œã€‚å…·ä½“å¯ä»¥æ‰§è¡Œ <code>go test -p 3 ./...</code> æ¥çœ‹ä¸€ä¸‹å¯¹è¿è¡Œæ—¶é—´çš„å½±å“ã€‚</p>
<p>è¿˜æœ‰ï¼Œå¦å¤–ä¸€ä¸ªå¯ä»¥å¹¶è¡ŒåŒ–çš„åœ°æ–¹æ˜¯åœ¨åŒ…çš„ä»£ç é‡Œé¢ã€‚å¤šäºäº† Go éå¸¸æ£’çš„å¹¶è¡ŒåŸè¯­ï¼Œå®é™…ä¸Šï¼Œé™¤é <code>GOMAXPROCS</code> é€šè¿‡ç¯å¢ƒå˜é‡æˆ–è€…åœ¨ä»£ç ä¸­æ˜¾å¼è®¾ç½®ä¸º <code>GOMAXPROCS=1</code>ï¼Œå¦åˆ™ï¼ŒåŒ…ä¸­ä¸€ä¸ª <code>goroutines</code> éƒ½æ²¡æœ‰ç”¨æ˜¯ä¸å¤ªå¸¸è§çš„ã€‚æƒ³è¦ä½¿ç”¨ <code>2</code> ä¸ª <code>CPU</code>ï¼Œå¯ä»¥æ‰§è¡Œ <code>GOMAXPROCS=2 go test</code>ï¼Œæƒ³è¦ä½¿ç”¨ <code>4</code> ä¸ª <code>CPU</code>ï¼Œå¯ä»¥æ‰§è¡Œ <code>GOMAXPROCS=4 go test</code>ï¼Œä½†è¿˜æœ‰æ›´å¥½çš„æ–¹æ³•ï¼š<code>go test -cpu=1,2,4</code> å°†ä¼šæ‰§è¡Œ <code>3</code> æ¬¡ï¼Œå…¶ä¸­ <code>GOMAXPROCS</code> å€¼åˆ†åˆ«ä¸º <code>1,2,4</code>ã€‚</p>
<p>å¾…æµ‹ä»£ç ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> hello</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;sync&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> (</span><br><span class="line">  data   = <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">string</span>)</span><br><span class="line">  locker sync.RWMutex</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">SetToMap</span><span class="params">(k, v <span class="keyword">string</span>)</span></span> &#123;</span><br><span class="line">  locker.Lock()</span><br><span class="line">  <span class="keyword">defer</span> locker.Unlock()</span><br><span class="line">  data[k] = v</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">GetToMap</span><span class="params">(k <span class="keyword">string</span>)</span> <span class="title">string</span></span> &#123;</span><br><span class="line">  locker.Lock()</span><br><span class="line">  <span class="keyword">defer</span> locker.RUnlock()</span><br><span class="line">  <span class="keyword">return</span> data[k]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æµ‹è¯•ä»£ç ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> hello</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;testing&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> mapTests = []<span class="keyword">struct</span> &#123;</span><br><span class="line">  k, v <span class="keyword">string</span></span><br><span class="line">&#125;&#123;</span><br><span class="line">  &#123;<span class="string">&quot;name&quot;</span>, <span class="string">&quot;ğŸ‰ Hello World&quot;</span>&#125;,</span><br><span class="line">  &#123;<span class="string">&quot;nickname&quot;</span>, <span class="string">&quot;Golang&quot;</span>&#125;,</span><br><span class="line">  &#123;<span class="string">&quot;email&quot;</span>, <span class="string">&quot;example@golang.com&quot;</span>&#125;,</span><br><span class="line">  &#123;<span class="string">&quot;phone&quot;</span>, <span class="string">&quot;12311118888&quot;</span>&#125;,</span><br><span class="line">  &#123;<span class="string">&quot;address&quot;</span>, <span class="string">&quot;Nanyang Technological University&quot;</span>&#125;,</span><br><span class="line">  &#123;<span class="string">&quot;compony&quot;</span>, <span class="string">&quot;Amazon&quot;</span>&#125;,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestSetToMap</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line">  t.Parallel()</span><br><span class="line">  <span class="keyword">for</span> _, tt := <span class="keyword">range</span> mapTests &#123;</span><br><span class="line">    SetToMap(tt.k, tt.v)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestGetToMap</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line">  t.Parallel()</span><br><span class="line">  <span class="keyword">for</span> _, tt := <span class="keyword">range</span> mapTests &#123;</span><br><span class="line">    actual := GetToMap(tt.k)</span><br><span class="line">    <span class="keyword">if</span> actual != tt.v &#123;</span><br><span class="line">      t.Errorf(<span class="string">&quot;GetToMap(%s) = %v, want: %v&quot;</span>, tt.k, actual, tt.v)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ go <span class="built_in">test</span> -v -timeout 30s -run ^(TestSetToMap|TestGetToMap)$ example.com/hello</span><br><span class="line"></span><br><span class="line">=== RUN   TestSetToMap</span><br><span class="line">--- PASS: TestSetToMap (0.00s)</span><br><span class="line">=== RUN   TestGetToMap</span><br><span class="line">fatal error: sync: RUnlock of unlocked RWMutex</span><br><span class="line">...</span><br></pre></td></tr></table></figure>
<p>å› æ­¤ï¼Œå¦‚æœä»£ç èƒ½å¤Ÿè¿›è¡Œå¹¶è¡Œæµ‹è¯•ï¼Œåœ¨å†™æµ‹è¯•æ—¶ï¼Œå°½é‡åŠ ä¸Š <code>Parallel</code>ï¼Œè¿™æ ·å¯ä»¥æµ‹è¯•å‡ºä¸€äº›å¯èƒ½çš„é—®é¢˜ã€‚</p>
]]></content>
      <categories>
        <category>go</category>
      </categories>
      <tags>
        <tag>go</tag>
      </tags>
  </entry>
  <entry>
    <title>å‰ç«¯è·¨åŸŸæ–¹æ¡ˆ</title>
    <url>/2019/10/27/js-cross-domain/</url>
    <content><![CDATA[<p><img src="/images/2019/201910271121.png" alt="201910271121.png"></p>
<p>æ‰€è°“è·¨åŸŸï¼Œé¡¾åæ€ä¹‰ï¼Œè·¨åˆ°äº†å¦å¤–çš„åŸŸï¼ŒåŸŸä¸ä»…ä»…æŒ‡çš„æ˜¯ä¸åŒçš„åŸŸåç½‘ç«™ï¼Œå¯èƒ½åŒä¸€ä¸ªåŸŸåä¸åŒçš„ç«¯å£å·ä¹Ÿç®—ä¸åŒçš„åŸŸã€‚æµè§ˆå™¨æ˜¯æœ‰è§„åˆ™çš„ï¼Œåªè¦ <strong>åè®®</strong>ã€<strong>åŸŸå</strong>ã€<strong>ç«¯å£</strong> æœ‰ä»»ä½•ä¸€ä¸ªä¸åŒï¼Œéƒ½è¢«å½“ä½œæ˜¯ä¸åŒçš„åŸŸã€‚åè®®æŒ‡çš„æ˜¯ httpï¼Œæˆ–è€… https ç­‰ã€‚</p>
<span id="more"></span>
<h1 id="è·¨åŸŸæ¦‚å¿µ"><a href="#è·¨åŸŸæ¦‚å¿µ" class="headerlink" title="è·¨åŸŸæ¦‚å¿µ"></a>è·¨åŸŸæ¦‚å¿µ</h1><p>ä¸€ä¸ªåŸŸä¸‹çš„æ–‡æ¡£æˆ–è„šæœ¬è¯•å›¾å»è¯·æ±‚å¦ä¸€ä¸ªåŸŸä¸‹çš„èµ„æºã€‚</p>
<h2 id="è·¨åŸŸå½¢å¼"><a href="#è·¨åŸŸå½¢å¼" class="headerlink" title="è·¨åŸŸå½¢å¼"></a>è·¨åŸŸå½¢å¼</h2><ul>
<li><code>&lt;script src=&quot;...&quot;&gt;&lt;/script&gt;</code> æ ‡ç­¾åµŒå…¥è·¨åŸŸè„šæœ¬ã€‚è¯­æ³•é”™è¯¯ä¿¡æ¯åªèƒ½åœ¨åŒæºè„šæœ¬ä¸­æ•æ‰åˆ°</li>
<li><code>&lt;link rel=&quot;stylesheet&quot; href=&quot;...&quot;&gt;</code> æ ‡ç­¾åµŒå…¥ CSSã€‚ç”±äº CSS çš„æ¾æ•£çš„è¯­æ³•è§„åˆ™ï¼ŒCSS çš„è·¨åŸŸéœ€è¦ä¸€ä¸ªè®¾ç½®æ­£ç¡®çš„ Content-Type æ¶ˆæ¯å¤´ã€‚ä¸åŒæµè§ˆå™¨æœ‰ä¸åŒçš„é™åˆ¶ï¼šIEã€Firefoxã€Chromeã€Safariï¼ˆè·³è‡³CVE-2010-0051ï¼‰éƒ¨åˆ†å’Œ Opera</li>
<li><code>&lt;img&gt;</code> åµŒå…¥å›¾ç‰‡ã€‚æ”¯æŒçš„å›¾ç‰‡æ ¼å¼åŒ…æ‹¬ PNGã€JPEGã€GIFã€BMPã€SVGã€â€¦</li>
<li><code>&lt;video&gt;</code> å’Œ <code>&lt;audio&gt;</code> åµŒå…¥å¤šåª’ä½“èµ„æº</li>
<li><code>&lt;object&gt;</code>ã€<code>&lt;embed&gt;</code> å’Œ <code>&lt;applet&gt;</code> çš„æ’ä»¶</li>
<li><code>@font-face</code> å¼•å…¥çš„å­—ä½“ã€‚ä¸€äº›æµè§ˆå™¨å…è®¸è·¨åŸŸå­—ä½“ï¼ˆcross-origin fontsï¼‰ï¼Œä¸€äº›éœ€è¦åŒæºå­—ä½“ï¼ˆsame-origin fontsï¼‰</li>
<li><code>&lt;frame&gt;</code> å’Œ <code>&lt;iframe&gt;</code> è½½å…¥çš„ä»»ä½•èµ„æºã€‚ç«™ç‚¹å¯ä»¥ä½¿ç”¨ X-Frame-Options æ¶ˆæ¯å¤´æ¥é˜»æ­¢è¿™ç§å½¢å¼çš„è·¨åŸŸäº¤äº’</li>
</ul>
<h2 id="åŒæºç­–ç•¥"><a href="#åŒæºç­–ç•¥" class="headerlink" title="åŒæºç­–ç•¥"></a>åŒæºç­–ç•¥</h2><p><a href="https://en.wikipedia.org/wiki/Same-origin_policy">åŒæºç­–ç•¥-SOP</a>ï¼ˆSame Origin Policyï¼‰æ˜¯ä¸€ç§çº¦å®šï¼Œç”± Netscape å…¬å¸ 1995 å¹´å¼•å…¥æµè§ˆå™¨ï¼Œå®ƒæ˜¯æµè§ˆå™¨æœ€æ ¸å¿ƒä¹Ÿæœ€åŸºæœ¬çš„å®‰å…¨åŠŸèƒ½ï¼Œå¦‚æœç¼ºå°‘äº†åŒæºç­–ç•¥ï¼Œæµè§ˆå™¨å¾ˆå®¹æ˜“å—åˆ° XSSã€CSFR ç­‰æ”»å‡»ã€‚æ‰€è°“åŒæºæ˜¯æŒ‡ <code>åè®®+åŸŸå+ç«¯å£</code> ä¸‰è€…ç›¸åŒï¼Œå³ä¾¿ä¸¤ä¸ªä¸åŒçš„åŸŸåæŒ‡å‘åŒä¸€ä¸ª IP åœ°å€ï¼Œä¹ŸéåŒæºã€‚</p>
<ul>
<li>åè®®ç›¸åŒ</li>
<li>åŸŸåç›¸åŒ</li>
<li>ç«¯å£ç›¸åŒ</li>
</ul>
<h3 id="åŒæºç­–ç•¥ç›®çš„"><a href="#åŒæºç­–ç•¥ç›®çš„" class="headerlink" title="åŒæºç­–ç•¥ç›®çš„"></a>åŒæºç­–ç•¥ç›®çš„</h3><p>ä¸ºäº†ä¿è¯ç”¨æˆ·ä¿¡æ¯çš„å®‰å…¨ï¼Œé˜²æ­¢æ¶æ„çš„ç½‘ç«™çªƒå–æ•°æ®ã€‚</p>
<h3 id="åŒæºç­–ç•¥é™åˆ¶èŒƒå›´"><a href="#åŒæºç­–ç•¥é™åˆ¶èŒƒå›´" class="headerlink" title="åŒæºç­–ç•¥é™åˆ¶èŒƒå›´"></a>åŒæºç­–ç•¥é™åˆ¶èŒƒå›´</h3><ul>
<li>Cookieã€LocalStorage å’Œ IndexDB æ— æ³•è¯»å–</li>
<li>DOM æ— æ³•è·å¾—</li>
<li>AJAX è¯·æ±‚ä¸èƒ½å‘é€</li>
</ul>
<h1 id="è·¨åŸŸåœºæ™¯"><a href="#è·¨åŸŸåœºæ™¯" class="headerlink" title="è·¨åŸŸåœºæ™¯"></a>è·¨åŸŸåœºæ™¯</h1><table>
<thead>
<tr>
<th>URL</th>
<th>è¯´æ˜</th>
<th>æ˜¯å¦å…è®¸</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>http://www.example.com/a.js</code><br><code>http://www.example.com/b.js</code><br><code>http://www.example.com/src/c.js</code></td>
<td>åŒä¸€åŸŸåï¼Œä¸åŒæ–‡ä»¶æˆ–è·¯å¾„</td>
<td>OK</td>
</tr>
<tr>
<td><code>http://www.example.com:8001/a.js</code><br><code>http://www.example.com:8002/b.js</code></td>
<td>åŒä¸€åŸŸåï¼Œä¸åŒç«¯å£</td>
<td>NO</td>
</tr>
<tr>
<td><code>http://www.example.com/a.js</code><br><code>https://www.example.com/b.js</code></td>
<td>åŒä¸€åŸŸåï¼Œä¸åŒåè®®</td>
<td>NO</td>
</tr>
<tr>
<td><code>http://www.example.com/a.js</code><br><code>http://cdn.example.com/b.js</code></td>
<td>ç›¸åŒä¸»åŸŸï¼Œä¸åŒå­åŸŸ</td>
<td>NO</td>
</tr>
<tr>
<td><code>http://www.example.com/a.js</code><br><code>http://192.168.10.10/b.js</code></td>
<td>åŸŸåå¯¹åº” IP</td>
<td>NO</td>
</tr>
<tr>
<td><code>http://www.example.com/a.js</code><br><code>http://www.sample.com/b.js</code></td>
<td>ä¸åŒåŸŸå</td>
<td>NO</td>
</tr>
</tbody>
</table>
<h1 id="è·¨åŸŸè§£å†³æ–¹æ¡ˆ"><a href="#è·¨åŸŸè§£å†³æ–¹æ¡ˆ" class="headerlink" title="è·¨åŸŸè§£å†³æ–¹æ¡ˆ"></a>è·¨åŸŸè§£å†³æ–¹æ¡ˆ</h1><ul>
<li>jsonp è·¨åŸŸ</li>
<li>document.domain + iframe è·¨åŸŸ</li>
<li>location.hash + iframe è·¨åŸŸ</li>
<li>window.name + iframe è·¨åŸŸ</li>
<li>postMessage è·¨åŸŸ</li>
<li>è·¨åŸŸèµ„æºå…±äº«ï¼ˆCORSï¼‰</li>
<li>Nginx ä»£ç†è·¨åŸŸ</li>
<li>NodeJS ä¸­é—´ä»¶ä»£ç†è·¨åŸŸ</li>
<li>WebSocket åè®®è·¨åŸŸ</li>
</ul>
<h2 id="jsonp-è·¨åŸŸ"><a href="#jsonp-è·¨åŸŸ" class="headerlink" title="jsonp è·¨åŸŸ"></a>jsonp è·¨åŸŸ</h2><h3 id="åŸç”Ÿæ–¹æ¡ˆ"><a href="#åŸç”Ÿæ–¹æ¡ˆ" class="headerlink" title="åŸç”Ÿæ–¹æ¡ˆ"></a>åŸç”Ÿæ–¹æ¡ˆ</h3><p>å‰ç«¯ä»£ç ï¼š</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> script = <span class="built_in">document</span>.createElement(<span class="string">&#x27;script&#x27;</span>)</span><br><span class="line">script.type = <span class="string">&#x27;text/javascript&#x27;</span></span><br><span class="line">script.src = <span class="string">&#x27;http://www.sample.com/test?callback=mycallback&#x27;</span></span><br><span class="line"><span class="built_in">document</span>.head.appendChild(script)</span><br><span class="line"></span><br><span class="line"><span class="comment">// å›è°ƒå‡½æ•°</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">mycallback</span>(<span class="params">response</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(response)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åç«¯ä»£ç ï¼š</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">use</span> <span class="title">Psr</span>\<span class="title">Http</span>\<span class="title">Message</span>\<span class="title">RequestInterface</span> <span class="title">as</span> <span class="title">Request</span>;</span><br><span class="line"><span class="keyword">use</span> <span class="title">Psr</span>\<span class="title">Http</span>\<span class="title">Message</span>\<span class="title">ResponseInterface</span> <span class="title">as</span> <span class="title">Response</span>;</span><br><span class="line"><span class="keyword">use</span> <span class="title">Slim</span>\<span class="title">Factory</span>\<span class="title">AppFactory</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">require</span> <span class="keyword">__DIR__</span> . <span class="string">&#x27;/../vendor/autoload.php&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable">$app</span> = AppFactory::create();</span><br><span class="line"><span class="variable">$app</span>-&gt;get(<span class="string">&#x27;/test&#x27;</span>, <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> (<span class="params">Request <span class="variable">$request</span>, Response <span class="variable">$response</span>, <span class="keyword">array</span> <span class="variable">$args</span></span>) </span>&#123;</span><br><span class="line">    <span class="variable">$content</span> = [<span class="string">&#x27;status&#x27;</span> =&gt; <span class="literal">true</span>, <span class="string">&#x27;message&#x27;</span> =&gt; <span class="string">&#x27;OK&#x27;</span>, <span class="string">&#x27;result&#x27;</span> =&gt; []];</span><br><span class="line">    <span class="variable">$content</span> = json_encode(<span class="variable">$content</span>);</span><br><span class="line">    <span class="variable">$response</span>-&gt;getBody()-&gt;write(<span class="string">&quot;mycallback(<span class="subst">&#123;$content&#125;</span>)&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="variable">$response</span>;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="variable">$app</span>-&gt;run();</span><br></pre></td></tr></table></figure>
<h3 id="jQuery-Ajax-æ–¹æ¡ˆ"><a href="#jQuery-Ajax-æ–¹æ¡ˆ" class="headerlink" title="jQuery Ajax æ–¹æ¡ˆ"></a>jQuery Ajax æ–¹æ¡ˆ</h3><p>å‰ç«¯ä»£ç ï¼š</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">$.ajax(&#123;</span><br><span class="line">  <span class="attr">type</span>: <span class="string">&#x27;get&#x27;</span>,</span><br><span class="line">  <span class="attr">url</span>: <span class="string">&#x27;http://www.sample.com/test&#x27;</span>,</span><br><span class="line">  <span class="attr">dataType</span>: <span class="string">&#x27;jsonp&#x27;</span>,</span><br><span class="line">  <span class="attr">jsonpCallback</span>: <span class="string">&quot;mycallback&quot;</span>,</span><br><span class="line">  <span class="attr">data</span>: &#123; <span class="attr">hello</span>: <span class="string">&#x27;world&#x27;</span> &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">mycallback</span>(<span class="params">response</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(response)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åç«¯ä»£ç ï¼š</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">use</span> <span class="title">Psr</span>\<span class="title">Http</span>\<span class="title">Message</span>\<span class="title">RequestInterface</span> <span class="title">as</span> <span class="title">Request</span>;</span><br><span class="line"><span class="keyword">use</span> <span class="title">Psr</span>\<span class="title">Http</span>\<span class="title">Message</span>\<span class="title">ResponseInterface</span> <span class="title">as</span> <span class="title">Response</span>;</span><br><span class="line"><span class="keyword">use</span> <span class="title">Slim</span>\<span class="title">Factory</span>\<span class="title">AppFactory</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">require</span> <span class="keyword">__DIR__</span> . <span class="string">&#x27;/../vendor/autoload.php&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable">$app</span> = AppFactory::create();</span><br><span class="line"><span class="variable">$app</span>-&gt;get(<span class="string">&#x27;/test&#x27;</span>, <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> (<span class="params">Request <span class="variable">$request</span>, Response <span class="variable">$response</span>, <span class="keyword">array</span> <span class="variable">$args</span></span>) </span>&#123;</span><br><span class="line">    <span class="variable">$params</span> = <span class="variable">$request</span>-&gt;getQueryParams();</span><br><span class="line">    <span class="variable">$content</span> = [<span class="string">&#x27;status&#x27;</span> =&gt; <span class="literal">true</span>, <span class="string">&#x27;message&#x27;</span> =&gt; <span class="string">&#x27;OK&#x27;</span>, <span class="string">&#x27;result&#x27;</span> =&gt; [<span class="variable">$params</span>]];</span><br><span class="line">    <span class="variable">$payload</span> = json_encode(<span class="variable">$content</span>);</span><br><span class="line">    <span class="variable">$response</span>-&gt;getBody()-&gt;write(<span class="string">&quot;mycallback(<span class="subst">&#123;$payload&#125;</span>)&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="variable">$response</span>-&gt;withHeader(<span class="string">&#x27;Content-Type&#x27;</span>, <span class="string">&#x27;application/json&#x27;</span>)</span><br><span class="line">        -&gt;withStatus(<span class="number">200</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="variable">$app</span>-&gt;run();</span><br></pre></td></tr></table></figure>
<p>ä»¥ä¸Šçš„æ–¹å¼çœ‹èµ·æ¥ä¸é”™ï¼Œä½†é—æ†¾çš„æ˜¯ä»…æ”¯æŒ GET è¯·æ±‚ã€‚</p>
<h2 id="document-domain-iframe-è·¨åŸŸ"><a href="#document-domain-iframe-è·¨åŸŸ" class="headerlink" title="document.domain + iframe è·¨åŸŸ"></a>document.domain + iframe è·¨åŸŸ</h2><blockquote>
<p>è¿™ä¸ªè·¨åŸŸä»…é™ä¸»åŸŸç›¸åŒï¼Œå­åŸŸä¸åŒçš„è·¨åŸŸåº”ç”¨åœºæ™¯ã€‚</p>
</blockquote>
<p>ä¸¤ä¸ªé¡µé¢éƒ½é€šè¿‡ js å¼ºåˆ¶è®¾ç½® <code>document.domain</code> ä¸ºä¸»åŸŸï¼Œå°±å®ç°äº†åŒåŸŸã€‚</p>
<p>çˆ¶çª—å£ä»£ç ï¼š</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&lt;iframe src=<span class="string">&quot;http://sub.example.com&quot;</span> frameborder=<span class="string">&quot;0&quot;</span>&gt;&lt;/iframe&gt;</span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span></span><br><span class="line"><span class="javascript"><span class="xml">  <span class="built_in">document</span>.domain = <span class="string">&#x27;example.com&#x27;</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">  <span class="keyword">var</span> content = &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="attr">status</span>: <span class="literal">true</span>,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="attr">message</span>: <span class="string">&#x27;OK&#x27;</span>,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="attr">result</span>: &#123;&#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">  &#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>
<p>å­çª—å£ä»£ç ï¼š</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">document</span>.domain = <span class="string">&#x27;example.com&#x27;</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">window</span>.parent.content)</span><br></pre></td></tr></table></figure>
<h2 id="location-hash-iframe-è·¨åŸŸ"><a href="#location-hash-iframe-è·¨åŸŸ" class="headerlink" title="location.hash + iframe è·¨åŸŸ"></a>location.hash + iframe è·¨åŸŸ</h2><h2 id="window-name-iframe-è·¨åŸŸ"><a href="#window-name-iframe-è·¨åŸŸ" class="headerlink" title="window.name + iframe è·¨åŸŸ"></a>window.name + iframe è·¨åŸŸ</h2><h2 id="postMessage-è·¨åŸŸ"><a href="#postMessage-è·¨åŸŸ" class="headerlink" title="postMessage è·¨åŸŸ"></a>postMessage è·¨åŸŸ</h2><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Window/postMessage">window.postMessage()</a> æ–¹æ³•å¯ä»¥å®‰å…¨åœ°å®ç° Window å¯¹è±¡ä¹‹é—´çš„è·¨åŸŸé€šä¿¡ã€‚<code>postMessage()</code> æ–¹æ³•å…è®¸æ¥è‡ªä¸åŒæºçš„è„šæœ¬é‡‡ç”¨å¼‚æ­¥æ–¹å¼è¿›è¡Œæœ‰é™çš„é€šä¿¡ï¼Œå¯ä»¥å®ç°è·¨æ–‡æœ¬æ¡£ã€å¤šçª—å£ã€è·¨åŸŸæ¶ˆæ¯ä¼ é€’ã€‚</p>
<p>å‘é€ä»£ç ï¼š</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;ie=edge&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">iframe</span> <span class="attr">src</span>=<span class="string">&quot;http://www.sample.com/index.html&quot;</span> <span class="attr">id</span>=<span class="string">&quot;frame&quot;</span> <span class="attr">style</span>=<span class="string">&quot;display:none;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">iframe</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;message&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">    <span class="keyword">const</span> domain = <span class="string">&#x27;http://www.sample.com&#x27;</span></span></span><br><span class="line"><span class="javascript">    <span class="keyword">let</span> iframe = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;frame&#x27;</span>)</span></span><br><span class="line"><span class="javascript">    iframe.onload = <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">let</span> data = &#123; <span class="attr">message</span>: <span class="string">&#x27;Hello&#x27;</span> &#125;</span></span><br><span class="line"><span class="javascript">      iframe.contentWindow.postMessage(<span class="built_in">JSON</span>.stringify(data), domain)</span></span><br><span class="line"><span class="javascript">      <span class="built_in">console</span>.group(<span class="string">&#x27;Mesage request from &#x27;</span> + <span class="built_in">document</span>.location.href)</span></span><br><span class="line"><span class="javascript">      <span class="built_in">console</span>.log(data)</span></span><br><span class="line"><span class="javascript">      <span class="built_in">console</span>.groupEnd(<span class="string">&#x27;adsfa&#x27;</span>)</span></span><br><span class="line"><span class="javascript">    &#125;</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">    <span class="built_in">window</span>.addEventListener(<span class="string">&#x27;message&#x27;</span>, <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="javascript">      <span class="built_in">console</span>.group(<span class="string">&#x27;Mesage response from &#x27;</span> + e.origin)</span></span><br><span class="line"><span class="javascript">      <span class="built_in">console</span>.log(e.data)</span></span><br><span class="line"><span class="javascript">      <span class="built_in">console</span>.groupEnd()</span></span><br><span class="line"><span class="javascript">    &#125;, <span class="literal">false</span>)</span></span><br><span class="line"><span class="javascript">  </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>æ¥æ”¶ä»£ç ï¼š</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;ie=edge&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">    <span class="keyword">const</span> domain = <span class="string">&#x27;http://www.example.com&#x27;</span></span></span><br><span class="line"><span class="javascript">    <span class="built_in">window</span>.addEventListener(<span class="string">&#x27;message&#x27;</span>, <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">if</span> (e.origin !== domain) &#123;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">return</span></span></span><br><span class="line"><span class="javascript">      &#125;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">let</span> data = <span class="built_in">JSON</span>.parse(e.data)</span></span><br><span class="line"><span class="javascript">      data.status = <span class="literal">true</span>;</span></span><br><span class="line"><span class="javascript">      data.message += <span class="string">&#x27; World!&#x27;</span></span></span><br><span class="line"><span class="javascript">      data.result = &#123;&#125;</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">      <span class="built_in">window</span>.parent.postMessage(data, domain);</span></span><br><span class="line"><span class="javascript">    &#125;)</span></span><br><span class="line"><span class="javascript">  </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="WebSocket-åè®®è·¨åŸŸ"><a href="#WebSocket-åè®®è·¨åŸŸ" class="headerlink" title="WebSocket åè®®è·¨åŸŸ"></a>WebSocket åè®®è·¨åŸŸ</h2><p><a href="https://zh.wikipedia.org/wiki/WebSocket">WebSocket</a> æ˜¯ HTML5 çš„ä¸€ç§æ–°é€šä¿¡åè®®ï¼Œå®ƒå®ç°äº†æµè§ˆå™¨ä¸æœåŠ¡å™¨ä¹‹é—´çš„åŒå‘é€šè®¯ï¼Œå±äºåº”ç”¨å±‚åè®®ã€‚å®ƒåŸºäº TCP ä¼ è¾“åè®®ï¼Œå¹¶å¤ç”¨ HTTP çš„æ¡æ‰‹é€šé“ã€‚ç”±äºåŸç”Ÿ WebSocket API ä½¿ç”¨èµ·æ¥ä¸å¤ªæ–¹ä¾¿ï¼Œæˆ‘ä»¬ä½¿ç”¨ <a href="https://socket.io">Socket.IO</a>ï¼Œè€Œ Socket.IO æ˜¯ä¸€ä¸ªå®Œå…¨ç”± JavaScript å®ç°ã€åŸºäº Node.jsã€æ”¯æŒ WebSocket çš„åè®®ç”¨äºå®æ—¶é€šä¿¡ã€è·¨å¹³å°çš„å¼€æºæ¡†æ¶ï¼Œå®ƒåŒ…æ‹¬äº†å®¢æˆ·ç«¯çš„ JavaScript å’ŒæœåŠ¡å™¨ç«¯çš„ Node.jsã€‚Socket.IO é™¤äº†æ”¯æŒ WebSocket é€šè®¯åè®®å¤–ï¼Œè¿˜æ”¯æŒè®¸å¤šç§è½®è¯¢ï¼ˆPollingï¼‰æœºåˆ¶ä»¥åŠå…¶å®ƒå®æ—¶é€šä¿¡æ–¹å¼ï¼Œå¹¶å°è£…æˆäº†é€šç”¨çš„æ¥å£ï¼Œå¹¶ä¸”åœ¨æœåŠ¡ç«¯å®ç°äº†è¿™äº›å®æ—¶æœºåˆ¶çš„ç›¸åº”ä»£ç ã€‚Socket.IO å®ç°çš„ Polling é€šä¿¡æœºåˆ¶åŒ…æ‹¬ Adobe Flash Socketã€AJAX é•¿è½®è¯¢ã€AJAX multipart streamingã€æŒä¹… Iframeã€JSONP è½®è¯¢ç­‰ã€‚Socket.IO èƒ½å¤Ÿæ ¹æ®æµè§ˆå™¨å¯¹é€šè®¯æœºåˆ¶çš„æ”¯æŒæƒ…å†µè‡ªåŠ¨åœ°é€‰æ‹©æœ€ä½³çš„æ–¹å¼æ¥å®ç°ç½‘ç»œå®æ—¶åº”ç”¨ã€‚å®ƒçš„è®¾è®¡ç›®çš„æ˜¯æ„å»ºèƒ½å¤Ÿåœ¨ä¸åŒæµè§ˆå™¨å’Œç§»åŠ¨è®¾å¤‡ä¸Šè‰¯å¥½è¿è¡Œçš„å®æ—¶åº”ç”¨ï¼Œå¦‚å®æ—¶åˆ†æç³»ç»Ÿã€äºŒè¿›åˆ¶æµæ•°æ®å¤„ç†åº”ç”¨ã€åœ¨çº¿èŠå¤©å®¤ã€åœ¨çº¿å®¢æœç³»ç»Ÿã€è¯„è®ºç³»ç»Ÿã€WebIM ç­‰ã€‚</p>
<p>å‰ç«¯ä»£ç ï¼š</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;ie=edge&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span>Input: <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">id</span>=<span class="string">&quot;input&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.3.0/socket.io.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">    <span class="keyword">const</span> socket = io(<span class="string">&#x27;http://www.sample.com:6001&#x27;</span>);</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">    socket.on(<span class="string">&#x27;connect&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="javascript">      socket.on(<span class="string">&#x27;message&#x27;</span>, <span class="function">(<span class="params">message</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="javascript">        <span class="built_in">console</span>.group(<span class="string">&#x27;From server: &#x27;</span>)</span></span><br><span class="line"><span class="javascript">        <span class="built_in">console</span>.log(message)</span></span><br><span class="line"><span class="javascript">        <span class="built_in">console</span>.groupEnd()</span></span><br><span class="line"><span class="javascript">      &#125;)</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">      socket.on(<span class="string">&#x27;disconnect&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="javascript">        <span class="built_in">console</span>.log(<span class="string">&#x27;Server closed&#x27;</span>)</span></span><br><span class="line"><span class="javascript">      &#125;)</span></span><br><span class="line"><span class="javascript">    &#125;)</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">    <span class="built_in">document</span>.getElementById(<span class="string">&#x27;input&#x27;</span>).onblur = <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">let</span> value = e.target.value</span></span><br><span class="line"><span class="javascript">      <span class="built_in">console</span>.group(<span class="string">&#x27;Send message:&#x27;</span>)</span></span><br><span class="line"><span class="javascript">      <span class="built_in">console</span>.log(value)</span></span><br><span class="line"><span class="javascript">      <span class="built_in">console</span>.groupEnd();</span></span><br><span class="line"><span class="javascript">      socket.emit(<span class="string">&#x27;message&#x27;</span>, value);</span></span><br><span class="line"><span class="javascript">    &#125;</span></span><br><span class="line"><span class="javascript">  </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>åç«¯ä»£ç ï¼š</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">use</span> <span class="title">PHPSocketIO</span>\<span class="title">SocketIO</span>;</span><br><span class="line"><span class="keyword">use</span> <span class="title">Workerman</span>\<span class="title">Worker</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">require</span> <span class="keyword">__DIR__</span> . <span class="string">&#x27;/../vendor/autoload.php&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable">$socket</span> = <span class="keyword">new</span> SocketIO(<span class="number">6001</span>);</span><br><span class="line"><span class="variable">$socket</span>-&gt;on(<span class="string">&#x27;connection&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params"><span class="variable">$socket</span></span>) </span>&#123;</span><br><span class="line">    <span class="variable">$socket</span>-&gt;on(<span class="string">&#x27;message&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params"><span class="variable">$message</span></span>) <span class="keyword">use</span> (<span class="params"><span class="variable">$socket</span></span>) </span>&#123;</span><br><span class="line">        <span class="variable">$data</span> = [</span><br><span class="line">            <span class="string">&#x27;status&#x27;</span> =&gt; <span class="literal">true</span>,</span><br><span class="line">            <span class="string">&#x27;message&#x27;</span> =&gt; <span class="variable">$message</span>,</span><br><span class="line">            <span class="string">&#x27;result&#x27;</span> =&gt; [],</span><br><span class="line">        ];</span><br><span class="line">        <span class="variable">$socket</span>-&gt;emit(<span class="string">&#x27;message&#x27;</span>, <span class="variable">$data</span>);</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="variable">$socket</span>-&gt;on(<span class="string">&#x27;discount&#x27;</span>, <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">Worker::runAll();</span><br></pre></td></tr></table></figure>
<p>æœªå®Œå¾…ç»­ã€‚ã€‚ã€‚</p>
]]></content>
      <categories>
        <category>web</category>
      </categories>
      <tags>
        <tag>js</tag>
        <tag>web</tag>
      </tags>
  </entry>
  <entry>
    <title>Linux - å¸¸ç”¨å‘½ä»¤</title>
    <url>/2018/02/13/linux-common-commands/</url>
    <content><![CDATA[<p>ğŸ—‚ æ—¨åœ¨æ”¶é›†ä¸€äº›å¸¸ç”¨çš„ Linux å‘½ä»¤äºæ­¤ï¼Œæ–¹ä¾¿ä»¥åå¿«é€ŸæŸ¥è¯¢åŠä½¿ç”¨ã€‚å…¶ä¸­æœ‰äº›å‘½ä»¤åœ¨ CentOS 7 åŠä»¥ä¸Šçš„ç‰ˆæœ¬ä¸­å¹¶ä¸èƒ½æ­£å¸¸ä½¿ç”¨ï¼Œéœ€è¦å®‰è£…ç›¸åº”çš„åŒ…æ‰èƒ½å·¥ä½œã€‚</p>
<span id="more"></span>
<h1 id="å‘½ä»¤æŠ€å·§"><a href="#å‘½ä»¤æŠ€å·§" class="headerlink" title="å‘½ä»¤æŠ€å·§"></a>å‘½ä»¤æŠ€å·§</h1><h2 id="å‘½ä»¤å¸®åŠ©"><a href="#å‘½ä»¤å¸®åŠ©" class="headerlink" title="å‘½ä»¤å¸®åŠ©"></a>å‘½ä»¤å¸®åŠ©</h2><ul>
<li>è®°å¾—å…³é”®å­—çš„æƒ…å†µä¸‹ï¼Œé€šè¿‡ <code>man -k &lt;command keyword&gt;</code> æ¥æœç´¢</li>
<li>å‘½ä»¤ç®€è¦è¯´æ˜ä½¿ç”¨ <code>whatis &lt;command&gt;</code>ï¼›å‘½ä»¤è¯¦ç»†è¯´æ˜ä½¿ç”¨ <code>info &lt;command&gt;</code></li>
<li>æŸ¥çœ‹å‘½ä»¤ä½ç½®ä½¿ç”¨ <code>which &lt;command&gt;</code></li>
<li>å‘½ä»¤çš„å…·ä½“å‚æ•°å’Œä½¿ç”¨æ–¹æ³•ä½¿ç”¨ <code>man &lt;command&gt;</code></li>
</ul>
<h2 id="Bash-å¿«æ·é”®"><a href="#Bash-å¿«æ·é”®" class="headerlink" title="Bash å¿«æ·é”®"></a>Bash å¿«æ·é”®</h2><table>
<thead>
<tr>
<th>åç§°</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>Ctrl-U</code></td>
<td>åˆ é™¤å…‰æ ‡åˆ°è¡Œé¦–çš„æ‰€æœ‰å­—ç¬¦ï¼Œåœ¨æŸäº›è®¾ç½®ä¸‹ï¼Œåˆ é™¤å…¨è¡Œ</td>
</tr>
<tr>
<td><code>Ctrl-W</code></td>
<td>åˆ é™¤å½“å‰å…‰æ ‡åˆ°å‰è¾¹çš„æœ€è¿‘ä¸€ä¸ªç©ºæ ¼ä¹‹é—´çš„å­—ç¬¦</td>
</tr>
<tr>
<td><code>Ctrl-H</code></td>
<td>åˆ é™¤å…‰æ ‡å‰è¾¹çš„å­—ç¬¦</td>
</tr>
<tr>
<td><code>Ctrl-R</code></td>
<td>åŒ¹é…æœ€ç›¸è¿‘çš„ä¸€ä¸ªæ–‡ä»¶ï¼Œç„¶åè¾“å‡º</td>
</tr>
</tbody>
</table>
<h1 id="ç³»ç»Ÿå‘½ä»¤"><a href="#ç³»ç»Ÿå‘½ä»¤" class="headerlink" title="ç³»ç»Ÿå‘½ä»¤"></a>ç³»ç»Ÿå‘½ä»¤</h1><table>
<thead>
<tr>
<th>å‘½ä»¤</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>lspci -tv</code></td>
<td>åˆ—å‡ºæ‰€æœ‰ PCI è®¾å¤‡</td>
</tr>
<tr>
<td><code>lsusb -tv</code></td>
<td>åˆ—å‡ºæ‰€æœ‰ USB è®¾å¤‡</td>
</tr>
<tr>
<td><code>lsmod</code></td>
<td>åˆ—å‡ºåŠ è½½çš„å†…æ ¸æ¨¡å—</td>
</tr>
<tr>
<td><code>uname -a</code></td>
<td>æŸ¥çœ‹å†…æ ¸ï¼Œæ“ä½œç³»ç»Ÿï¼ŒCPU ä¿¡æ¯</td>
</tr>
<tr>
<td><code>head -n 1 /etc/issue</code></td>
<td>æŸ¥çœ‹æ“ä½œç³»ç»Ÿç‰ˆæœ¬</td>
</tr>
<tr>
<td><code>cat /proc/cpuinfo</code></td>
<td>æŸ¥çœ‹ CPU ä¿¡æ¯</td>
</tr>
<tr>
<td><code>grep â€œmodel nameâ€ /proc/cpuinfo &#124; wc -l</code></td>
<td>æŸ¥çœ‹ CPU æ•°é‡</td>
</tr>
<tr>
<td><code>hostname</code></td>
<td>æŸ¥çœ‹è®¡ç®—æœºå</td>
</tr>
<tr>
<td><code>env</code></td>
<td>æŸ¥çœ‹ç¯å¢ƒå˜é‡</td>
</tr>
<tr>
<td><code>free -m</code></td>
<td>æŸ¥çœ‹å†…å­˜ä½¿ç”¨é‡å’Œäº¤æ¢åŒºä½¿ç”¨é‡</td>
</tr>
<tr>
<td><code>df -h</code></td>
<td>æŸ¥çœ‹å„åˆ†åŒºä½¿ç”¨æƒ…å†µ</td>
</tr>
<tr>
<td><code>grep MemTotal /proc/meminfo</code></td>
<td>æŸ¥çœ‹å†…å­˜æ€»é‡</td>
</tr>
<tr>
<td><code>grep MemFree /proc/meminfo</code></td>
<td>æŸ¥çœ‹ç©ºé—²å†…å­˜é‡</td>
</tr>
<tr>
<td><code>uptime</code></td>
<td>æŸ¥çœ‹ç³»ç»Ÿè¿è¡Œæ—¶é—´ï¼Œç”¨æˆ·æ•°ï¼Œè´Ÿè½½</td>
</tr>
<tr>
<td><code>cat /proc/loadavg</code></td>
<td>æŸ¥çœ‹ç³»ç»Ÿè´Ÿè½½</td>
</tr>
<tr>
<td><code>lsof -i:3306</code></td>
<td>æŸ¥çœ‹ç«¯å£å ç”¨çš„è¿›ç¨‹çŠ¶æ€</td>
</tr>
<tr>
<td><code>kill -9 &lt;pid&gt;</code></td>
<td>å¼ºè¡Œä¸­æ­¢è¿›ç¨‹</td>
</tr>
<tr>
<td><code>ps -ef &#124; grep name &#124; awk â€˜&#123;print $2&#125;â€™ &#124; xargs kill -9</code></td>
<td>æŸ¥è¯¢æŒ‡å®šçš„è¿›ç¨‹å¹¶è¿›è¡Œä¸­æ­¢</td>
</tr>
<tr>
<td><code>ps -aux</code></td>
<td>æ˜¾ç¤ºæ‰€æœ‰ï¼ˆåŒ…å«å…¶ä»–ç”¨æˆ·ï¼‰çš„è¿›ç¨‹</td>
</tr>
<tr>
<td><code>ps -ef &#124; grep name</code></td>
<td>æŸ¥çœ‹æŒ‡å®šè¿›ç¨‹</td>
</tr>
<tr>
<td><code>ps -x -o pid,rss,vsz,command</code></td>
<td>æŸ¥çœ‹è¿›ç¨‹å ç”¨å†…å­˜ä¿¡æ¯</td>
</tr>
</tbody>
</table>
<h1 id="ç£ç›˜å‘½ä»¤"><a href="#ç£ç›˜å‘½ä»¤" class="headerlink" title="ç£ç›˜å‘½ä»¤"></a>ç£ç›˜å‘½ä»¤</h1><table>
<thead>
<tr>
<th>å‘½ä»¤</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>mount</code></td>
<td>è¾“å‡ºç³»ç»Ÿç›®å‰çš„æŒ‚è½½ä¿¡æ¯</td>
</tr>
<tr>
<td><code>mount /dev/sda1 /mnt</code></td>
<td>å°† sda1 æŒ‚è½½åˆ° /mnt ä¸­</td>
</tr>
<tr>
<td><code>mount &#124; column -t</code></td>
<td>æŸ¥çœ‹æŒ‚æ¥çš„åˆ†åŒºçŠ¶æ€</td>
</tr>
<tr>
<td><code>umount /mnt</code></td>
<td>å¸è½½ /mnt è¿™ä¸ªæŒ‚è½½ç‚¹çš„æ–‡ä»¶ç³»ç»Ÿ</td>
</tr>
<tr>
<td><code>umount -a</code></td>
<td>å¸è½½æ‰€æœ‰å·²æŒ‚è½½çš„æ–‡ä»¶ç³»ç»Ÿ</td>
</tr>
<tr>
<td><code>fdisk -l</code></td>
<td>æŸ¥çœ‹æ‰€æœ‰åˆ†åŒº</td>
</tr>
<tr>
<td><code>swapon -s</code></td>
<td>æŸ¥çœ‹æ‰€æœ‰äº¤æ¢åˆ†åŒº</td>
</tr>
<tr>
<td><code>dmesg &#124; grep IDE</code></td>
<td>æŸ¥çœ‹å¯åŠ¨æ—¶ IDE è®¾å¤‡æ£€æµ‹çŠ¶å†µ</td>
</tr>
<tr>
<td><code>iptables -L</code></td>
<td>æŸ¥çœ‹é˜²ç«å¢™è®¾ç½®</td>
</tr>
<tr>
<td><code>du -sh &lt;directory&gt;</code></td>
<td>æŸ¥çœ‹æŒ‡å®šç›®å½•çš„å¤§å°</td>
</tr>
<tr>
<td><code>du -sh ls &#124; sort</code></td>
<td>æŸ¥çœ‹å½“å‰ç›®å½•ä¸‹æ‰€æœ‰å­æ–‡ä»¶å¤¹æ’åºåçš„å¤§å°</td>
</tr>
</tbody>
</table>
<h1 id="ç½‘ç»œå‘½ä»¤"><a href="#ç½‘ç»œå‘½ä»¤" class="headerlink" title="ç½‘ç»œå‘½ä»¤"></a>ç½‘ç»œå‘½ä»¤</h1><table>
<thead>
<tr>
<th>å‘½ä»¤</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>ifconfig</code></td>
<td>æŸ¥çœ‹æ‰€æœ‰ç½‘ç»œæ¥å£çš„å±æ€§</td>
</tr>
<tr>
<td><code>ip addr show</code></td>
<td>æŸ¥çœ‹æ‰€æœ‰ç½‘ç»œæ¥å£çš„å±æ€§</td>
</tr>
<tr>
<td><code>route -n</code></td>
<td>æŸ¥çœ‹è·¯ç”±è¡¨</td>
</tr>
<tr>
<td><code>netstat -lntp</code></td>
<td>æŸ¥çœ‹æ‰€æœ‰ç›‘å¬çš„ç«¯å£</td>
</tr>
<tr>
<td><code>netstat -antp</code></td>
<td>æŸ¥çœ‹æ‰€æœ‰å·²ç»å»ºç«‹çš„è¿æ¥</td>
</tr>
<tr>
<td><code>netstat -s</code></td>
<td>æŸ¥çœ‹ç½‘ç»œç»Ÿè®¡ä¿¡æ¯</td>
</tr>
<tr>
<td><code>netstat -nap &#124; grep <port></code></td>
<td>å°†ä¼šæ˜¾ç¤ºä½¿ç”¨è¯¥ç«¯å£çš„åº”ç”¨ç¨‹åºçš„è¿›ç¨‹ ID</td>
</tr>
<tr>
<td><code>netstat -all</code> æˆ– <code>netstat -a</code></td>
<td>å°†ä¼šæ˜¾ç¤ºåŒ…æ‹¬ TCP å’Œ UDP çš„æ‰€æœ‰è¿æ¥</td>
</tr>
<tr>
<td><code>netstat --tcp</code> æˆ– <code>netstat -t</code></td>
<td>å°†ä¼šæ˜¾ç¤º TCP è¿æ¥</td>
</tr>
<tr>
<td><code>netstat --udp</code> æˆ– <code>netstat -u</code></td>
<td>å°†ä¼šæ˜¾ç¤º UDP è¿æ¥</td>
</tr>
<tr>
<td><code>netstat -g</code></td>
<td>å°†ä¼šæ˜¾ç¤ºè¯¥ä¸»æœºè®¢é˜…çš„æ‰€æœ‰å¤šæ’­ç½‘ç»œ</td>
</tr>
<tr>
<td><code>netstat -anpt &#124; grep â€˜:<port>â€˜</code></td>
<td>æ‰¾å‡ºè¿è¡Œåœ¨æŒ‡å®šç«¯å£çš„è¿›ç¨‹</td>
</tr>
<tr>
<td><code>netstat -an</td>
<td>awk â€˜/^tcp/&#123;+S[$NF]&#125; END &#123;for(a in S) print a,S[a]&#125;â€™</code></td>
<td>æŸ¥çœ‹æœåŠ¡å™¨ç½‘ç»œè¿æ¥çŠ¶æ€å¹¶æ±‡æ€»</td>
</tr>
<tr>
<td><code>ping -c 3 &lt;domain&gt;</code></td>
<td>æŒ‡å®šæ¬¡æ•°å Ping åŸŸå</td>
</tr>
</tbody>
</table>
<h2 id="wget"><a href="#wget" class="headerlink" title="wget"></a>wget</h2><blockquote>
<p><a href="https://www.thegeekstuff.com/2009/09/the-ultimate-wget-download-guide-with-15-awesome-examples/">The Ultimate Wget Download Guide With 15 Awesome Examples</a></p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// ä¸‹è½½å•ä¸ªæ–‡ä»¶</span><br><span class="line">$ wget https://dl.fedoraproject.org/pub/epel/epel-release-latest-7.noarch.rpm</span><br><span class="line"></span><br><span class="line">// ä¸‹è½½æ–‡ä»¶é‡å‘½å</span><br><span class="line">$ wget -O baidu.html http://www.baidu.com/index.html</span><br><span class="line"></span><br><span class="line">// é™åˆ¶ä¸‹è½½é€Ÿç‡</span><br><span class="line">$ wget --limit-rate=200k http://www.openss7.org/repos/tarballs/strx25-0.9.2.1.tar.bz2</span><br><span class="line"></span><br><span class="line">// æ–­ç‚¹ç»­ä¼ </span><br><span class="line">$ wget -c http://www.openss7.org/repos/tarballs/strx25-0.9.2.1.tar.bz2</span><br><span class="line"></span><br><span class="line">// åå°ä¸‹è½½</span><br><span class="line">$ wget -b http://www.openss7.org/repos/tarballs/strx25-0.9.2.1.tar.bz2</span><br><span class="line">$ tail -f wget-log <span class="comment"># æŸ¥çœ‹ä¸‹è½½è¿›åº¦</span></span><br></pre></td></tr></table></figure>
<h2 id="scp"><a href="#scp" class="headerlink" title="scp"></a>scp</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// æœ¬åœ°æ–‡ä»¶å¤åˆ¶åˆ°è¿œç¨‹æœåŠ¡å™¨</span><br><span class="line">$ scp -r test.sql user@ip:/home/user</span><br><span class="line"></span><br><span class="line">// è¿œç¨‹æœåŠ¡å™¨æ–‡ä»¶å¤åˆ¶åˆ°æœ¬åœ°</span><br><span class="line">$ scp -r user@ip:/home/user/test.sql ./</span><br></pre></td></tr></table></figure>
<h1 id="ç”¨æˆ·å‘½ä»¤"><a href="#ç”¨æˆ·å‘½ä»¤" class="headerlink" title="ç”¨æˆ·å‘½ä»¤"></a>ç”¨æˆ·å‘½ä»¤</h1><table>
<thead>
<tr>
<th>å‘½ä»¤</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>w</code></td>
<td>æŸ¥çœ‹æ´»åŠ¨ç”¨æˆ·</td>
</tr>
<tr>
<td><code>id &lt;username&gt;</code></td>
<td>æŸ¥çœ‹æŒ‡å®šç”¨æˆ·ä¿¡æ¯</td>
</tr>
<tr>
<td><code>last</code></td>
<td>æŸ¥çœ‹ç”¨æˆ·ç™»å½•æ—¥å¿—</td>
</tr>
<tr>
<td><code>cut -d: -f1 /etc/passwd</code></td>
<td>æŸ¥çœ‹ç³»ç»Ÿæ‰€æœ‰ç”¨æˆ·</td>
</tr>
<tr>
<td><code>cut -d: -f1 /etc/group</code></td>
<td>æŸ¥çœ‹ç³»ç»Ÿæ‰€æœ‰ç»„</td>
</tr>
<tr>
<td><code>crontab -l</code></td>
<td>æŸ¥çœ‹å½“å‰ç”¨æˆ·çš„è®¡åˆ’ä»»åŠ¡</td>
</tr>
</tbody>
</table>
<h1 id="æ–‡ä»¶å‘½ä»¤"><a href="#æ–‡ä»¶å‘½ä»¤" class="headerlink" title="æ–‡ä»¶å‘½ä»¤"></a>æ–‡ä»¶å‘½ä»¤</h1><table>
<thead>
<tr>
<th>å‘½ä»¤</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>ln source dest</code></td>
<td>ä¸º source åˆ›å»ºä¸€ä¸ªåä¸º dest çš„ç¡¬é“¾æ¥</td>
</tr>
<tr>
<td><code>ln -s source dest</code></td>
<td>ä¸º source åˆ›å»ºä¸€ä¸ªåä¸º dest çš„è½¯é“¾æ¥</td>
</tr>
<tr>
<td><code>tar -cvf filename.tar .</code></td>
<td>å°†å½“å‰ç›®å½•æ‰€æœ‰æ–‡ä»¶å½’æ¡£ï¼Œä½†ä¸å‹ç¼©</td>
</tr>
<tr>
<td><code>tar -xvf filename.tar</code></td>
<td>è§£å‹ filename.tar åˆ°å½“å‰æ–‡ä»¶å¤¹</td>
</tr>
<tr>
<td><code>tar -cvjf filename.tar.bz2 .</code></td>
<td>ä½¿ç”¨ bzip2 å‹ç¼©å½“å‰ç›®å½•</td>
</tr>
<tr>
<td><code>tar -xvjf filename.tar.bz2</code></td>
<td>è§£å‹ filename.tar.bz2 åˆ°å½“å‰ç›®å½•</td>
</tr>
<tr>
<td><code>tar -cvzf filename.tar.gz .</code></td>
<td>ä½¿ç”¨ gzip  å‹ç¼©å½“å‰ç›®å½•</td>
</tr>
<tr>
<td><code>tar -xvzf filename.tar.gz</code></td>
<td>è§£å‹ filename.tar.gz åˆ°å½“å‰æ–‡ä»¶å¤¹</td>
</tr>
<tr>
<td><code>tar -tf filename</code></td>
<td>åªæŸ¥çœ‹ filename å½’æ¡£ä¸­çš„æ–‡ä»¶ï¼Œä¸è§£å‹</td>
</tr>
<tr>
<td><code>chown user filename</code></td>
<td>æ”¹å˜ filename çš„æ‰€æœ‰è€…ä¸º user</td>
</tr>
<tr>
<td><code>chown user:group filename</code></td>
<td>æ”¹å˜ filename çš„æ‰€æœ‰è€…ä¸º userï¼Œç»„ä¸º group</td>
</tr>
<tr>
<td><code>chown -R root folder</code></td>
<td>æ”¹å˜ folder æ–‡ä»¶å¤¹åŠå…¶å­æ–‡ä»¶çš„æ‰€æœ‰è€…ä¸º root</td>
</tr>
<tr>
<td><code>chmod +x filename</code></td>
<td>ä¸º userï¼Œgroupï¼Œother æ·»åŠ æ‰§è¡Œæƒé™</td>
</tr>
<tr>
<td><code>chmod -x filename</code></td>
<td>å–æ¶ˆ userï¼Œgroupï¼Œother çš„æ‰§è¡Œæƒé™</td>
</tr>
<tr>
<td><code>chmod +w filename</code></td>
<td>ä¸º user æ·»åŠ å†™å…¥æƒé™</td>
</tr>
<tr>
<td><code>chmod ugo=rwx filename</code></td>
<td>è®¾ç½® userï¼Œgroupï¼Œother å…·æœ‰è¯»å–ã€å†™å…¥ã€æ‰§è¡Œæƒé™</td>
</tr>
<tr>
<td><code>chmod ug=rw filename</code></td>
<td>è®¾ç½® userï¼Œgroup æ·»åŠ è¯»å–ã€å†™å…¥æƒé™</td>
</tr>
<tr>
<td><code>chmod ugo=--- filename</code></td>
<td>å–æ¶ˆæ‰€æœ‰æƒé™</td>
</tr>
<tr>
<td><code>find . -name &lt;pattern&gt;</code></td>
<td>ä»å½“å‰ç›®å½•æŸ¥æ‰¾ç¬¦åˆ pattern çš„æ–‡ä»¶</td>
</tr>
<tr>
<td><code>find &lt;directory&gt; -name PATTERN -exec ls -l &#123;&#125; \;</code></td>
<td>ä»æŒ‡å®šæ–‡ä»¶æŸ¥æ‰¾æ‰€æœ‰ç¬¦åˆ pattern çš„æ–‡ä»¶ï¼Œå¹¶äº¤ç”± ls è¾“å‡ºè¯¦ç»†ä¿¡æ¯</td>
</tr>
<tr>
<td><code>find ./ -name &quot;*.txt&quot; -exec rm &#123;&#125; \;</code></td>
<td>é€’å½’å½“å‰ç›®å½•åŠå­ç›®å½•åˆ é™¤æ‰€æœ‰ .txt æ–‡ä»¶</td>
</tr>
<tr>
<td><code>find . \( -name &quot;*.txt&quot; -o -name &quot;*.pdf&quot; \) -print</code></td>
<td>åœ¨å½“å‰ç›®å½•ä¸‹é€’å½’æŸ¥æ‰¾ .txt å’Œ .pdf æ–‡ä»¶</td>
</tr>
<tr>
<td><code>find . -type d -print</code></td>
<td>é€’å½’åˆ—å‡ºå½“å‰ç›®å½•ä¸‹çš„æ‰€æœ‰ç›®å½•</td>
</tr>
<tr>
<td><code>find . -type f -size +5k</code></td>
<td>æŸ¥æ‰¾å¤§äºæŒ‡å®šå¤§å°çš„æ–‡ä»¶</td>
</tr>
<tr>
<td><code>find . -type f -name â€œ*.phpâ€ -print0 &#124; xargs -0 wc -l</code></td>
<td>ç»Ÿè®¡æŒ‡å®šç›®å½•ä¸‹çš„ç¨‹åºè¡Œæ•°</td>
</tr>
<tr>
<td><code>locate php.ini</code></td>
<td>æ›´å¿«çš„æŸ¥è¯¢æŒ‡å®šçš„æ–‡ä»¶ï¼Œéœ€è¦å®šæœŸæ‰§è¡Œæ›´æ–°å‘½ä»¤ updatedb æ¥æ›´æ–°ç´¢å¼•åº“</td>
</tr>
<tr>
<td><code>grep -r &quot;string&quot; /home/user/</code></td>
<td>ä»¥é€’å½’æ–¹å¼åœ¨æŒ‡å®šçš„æ–‡ä»¶ä¸­æœç´¢ç»™å®šçš„å­—ç¬¦ä¸²</td>
</tr>
<tr>
<td><code>grep -i &quot;the&quot; /home/user/.zshrc</code></td>
<td>åœ¨æŒ‡å®šçš„æ–‡ä»¶ä¸­æœç´¢ç»™å®šçš„å­—ç¬¦ä¸²</td>
</tr>
<tr>
<td><code>grep &quot;Controller&quot; . -R -n</code></td>
<td>åœ¨å¤šçº§ç›®å½•ä¸­å¯¹æŒ‡å®šçš„æ–‡æœ¬é€’å½’æœç´¢</td>
</tr>
<tr>
<td><code>diff -w ~/a.txt ~/b.txt</code></td>
<td>å¿½ç•¥ç©ºç™½åæ¯”è¾ƒä¸¤ä¸ªæ–‡ä»¶çš„å·®å¼‚</td>
</tr>
</tbody>
</table>
<h2 id="sed"><a href="#sed" class="headerlink" title="sed"></a>sed</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// å°† a.txt æ–‡ä»¶ä¸­çš„ php å­—ç¬¦ä¸²æ›¿æ¢æˆ javascript å­—ç¬¦ä¸²</span><br><span class="line">$ sed -i <span class="string">&quot;s/php/javascript/g&quot;</span> `grep php -rl ./a.txt`</span><br><span class="line"></span><br><span class="line">// ä»¥ç›¸åçš„é¡ºåºæ‰“å°æ–‡ä»¶å†…å®¹</span><br><span class="line">$ sed -n <span class="string">&#x27;1!G;h;$p&#x27;</span> /home/user/.zshrc</span><br></pre></td></tr></table></figure>
<h2 id="awk"><a href="#awk" class="headerlink" title="awk"></a>awk</h2><blockquote>
<p><a href="http://awk.readthedocs.io/en/latest/chapter-one.html">AWK ç¨‹åºè®¾è®¡è¯­è¨€</a></p>
</blockquote>
<table>
<thead>
<tr>
<th>åç§°</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>$0</code></td>
<td><code>å½“å‰è®°å½•(è¿™ä¸ªå˜é‡ä¸­å­˜æ”¾ç€æ•´ä¸ªè¡Œçš„å†…å®¹)</code></td>
</tr>
<tr>
<td><code>$1-$n</code></td>
<td><code>å½“å‰è®°å½•çš„ç¬¬ n ä¸ªå­—æ®µï¼Œå­—æ®µé—´ç”± FS åˆ†éš”</code></td>
</tr>
<tr>
<td><code>FS</code></td>
<td><code>è¾“å…¥å­—æ®µåˆ†éš”ç¬¦ï¼Œé»˜è®¤æ˜¯ç©ºæ ¼æˆ– Tab</code></td>
</tr>
<tr>
<td><code>NF</code></td>
<td><code>å½“å‰è®°å½•ä¸­çš„å­—æ®µä¸ªæ•°ï¼Œå°±æ˜¯æœ‰å¤šå°‘åˆ—</code></td>
</tr>
<tr>
<td><code>NR</code></td>
<td><code>å·²ç»è¯»å‡ºçš„è®°å½•æ•°ï¼Œå°±æ˜¯è¡Œå·ï¼Œä» 1 å¼€å§‹ï¼Œå¦‚æœæœ‰å¤šä¸ªæ–‡ä»¶è¯ï¼Œè¿™ä¸ªå€¼ä¹Ÿæ˜¯ä¸æ–­ç´¯åŠ ä¸­</code></td>
</tr>
<tr>
<td><code>FNR</code></td>
<td><code>å½“å‰è®°å½•æ•°ï¼Œä¸ NR ä¸åŒçš„æ˜¯ï¼Œè¿™ä¸ªå€¼ä¼šæ˜¯å„ä¸ªæ–‡ä»¶è‡ªå·±çš„è¡Œå·</code></td>
</tr>
<tr>
<td><code>RS</code></td>
<td><code>è¾“å…¥çš„è®°å½•åˆ†éš”ç¬¦ï¼Œé»˜è®¤ä¸ºæ¢è¡Œç¬¦</code></td>
</tr>
<tr>
<td><code>OFS</code></td>
<td><code>è¾“å‡ºå­—æ®µåˆ†éš”ç¬¦ï¼Œé»˜è®¤ä¸ºç©ºæ ¼</code></td>
</tr>
<tr>
<td><code>ORS</code></td>
<td><code>è¾“å‡ºçš„è®°å½•åˆ†éš”ç¬¦ï¼Œé»˜è®¤ä¸ºæ¢è¡Œç¬¦</code></td>
</tr>
<tr>
<td><code>FILENAME</code></td>
<td><code>å½“å‰è¾“å…¥æ–‡ä»¶çš„åå­—</code></td>
</tr>
</tbody>
</table>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// ç§»é™¤æŒ‡å®šæ–‡ä»¶ä¸­é‡å¤çš„è¡Œå¹¶æ˜¾ç¤ºå‡ºæ¥</span><br><span class="line">$ awk <span class="string">&#x27;!($0 in array) &#123; array[$0]; print &#125;&#x27;</span> a.txt</span><br><span class="line"></span><br><span class="line">// å°† uid å’Œ gid ç›¸åŒçš„è¡Œæ˜¾ç¤ºå‡ºæ¥</span><br><span class="line">$ awk -F <span class="string">&#x27;:&#x27;</span> <span class="string">&#x27;$3==$4&#x27;</span> /etc/passwd</span><br><span class="line"></span><br><span class="line">// å‡†å¤‡è¦æ“ä½œçš„æ•°æ®</span><br><span class="line">$ netstat -atlnpe &gt; netstat.log</span><br><span class="line"></span><br><span class="line">// è¾“å‡ºä¸‰åˆ—ï¼ˆ1ï¼Œ4ï¼Œ9ï¼‰</span><br><span class="line">$ awk <span class="string">&#x27;&#123;print $1, $4, $9&#125;&#x27;</span> netstat.log</span><br><span class="line"></span><br><span class="line">// æ ¼å¼åŒ–è¾“å‡º</span><br><span class="line">$ awk <span class="string">&#x27;&#123;printf &quot;%-8s %-8s %-8s %-25s %-25s %-15s\n&quot;,$1,$2,$3,$4,$5,$6&#125;&#x27;</span> netstat.log</span><br><span class="line"></span><br><span class="line">// ä»…æ˜¾ç¤ºç¬¬ 3 åˆ—çš„å€¼ä¸º 0 &amp;&amp; ç¬¬ 6 åˆ—çš„å€¼ä¸º LISTE</span><br><span class="line">$ awk <span class="string">&#x27;$3==0 &amp;&amp; $6==&quot;LISTEN&quot;&#x27;</span> netstat.log</span><br><span class="line"></span><br><span class="line">// ä»…æ˜¾ç¤ºç¬¬ 3 åˆ—çš„å€¼ä¸º 0 &amp;&amp; ç¬¬ 6 åˆ—çš„å€¼ä¸º LISTE, åŒæ—¶æŠŠè¡¨å¤´ä¹Ÿæ˜¾ç¤ºå‡ºæ¥</span><br><span class="line">$ awk <span class="string">&#x27;$3==0 &amp;&amp; $6==&quot;LISTEN&quot; || NR==2&#x27;</span> netstat.log</span><br><span class="line"></span><br><span class="line">// ä»…æ˜¾ç¤ºç¬¬ 3 åˆ—çš„å€¼ä¸º 0 &amp;&amp; ç¬¬ 6 åˆ—çš„å€¼ä¸º LISTE, åŒæ—¶æŠŠè¡¨å¤´ä¹Ÿæ˜¾ç¤ºå‡ºæ¥, å¹¶ä¸”æ ¼å¼åŒ–è¾“å‡ºä¸‰åˆ—(4, 5, 6)</span><br><span class="line">$ awk <span class="string">&#x27;$3==0 &amp;&amp; $6==&quot;LISTEN&quot; || NR==2 &#123;printf &quot;%-20s %-20s %s\n&quot;, $4 , $5, $6&#125;&#x27;</span> netstat.log</span><br><span class="line"></span><br><span class="line">// ä»…æ˜¾ç¤ºç¬¬ 3 åˆ—çš„å€¼ä¸º 0 &amp;&amp; ç¬¬ 6 åˆ—çš„å€¼ä¸º ESTABLISHED, åŒæ—¶æŠŠè¡¨å¤´ä¹Ÿæ˜¾ç¤ºå‡ºæ¥, å¹¶ä¸”æ ¼å¼åŒ–è¾“å‡ºä¸‰åˆ—(4, 5, 6)</span><br><span class="line">$ awk <span class="string">&#x27;$3==0 &amp;&amp; $6==&quot;ESTABLISHED&quot; || NR==2 &#123;printf &quot;%02s %s %-20s %-20s %s\n&quot;, NR, FNR, $4, $5, $6&#125;&#x27;</span> netstat.log</span><br><span class="line"></span><br><span class="line">// æŒ‡å®šåˆ†éš”ç¬¦</span><br><span class="line">$ awk <span class="string">&#x27;BEGIN&#123;FS=&quot;:&quot;&#125; &#123;print $1, $3, $6&#125;&#x27;</span> /etc/passwd</span><br><span class="line">æˆ–è€…</span><br><span class="line">$ awk -F: <span class="string">&#x27;&#123;print $1, $3, $6&#125;&#x27;</span> /etc/passwd</span><br><span class="line"></span><br><span class="line">// -t ä½œä¸ºåˆ†éš”ç¬¦</span><br><span class="line">$ awk -F: <span class="string">&#x27;&#123;print $1, $3, $6&#125;&#x27;</span> OFS=<span class="string">&quot;\t&quot;</span> /etc/passwd</span><br><span class="line"></span><br><span class="line">// åŒ¹é… LISTEN</span><br><span class="line">$ awk <span class="string">&#x27;$6 ~ /LISTEN/ || NR==2 &#123;print NR, $4, $5, $6&#125;&#x27;</span> OFS=<span class="string">&quot;\t&quot;</span> netstat.log</span><br><span class="line">æˆ–è€…</span><br><span class="line">$ awk <span class="string">&#x27;/LISTEN/&#x27;</span> netstat.log</span><br><span class="line"></span><br><span class="line">// åŒ¹é… ESTABLISHED</span><br><span class="line">$ awk <span class="string">&#x27;$6 ~ /ESTABLISHED/ || NR==2 &#123;print NR, $4, $5, $6&#125;&#x27;</span> OFS=<span class="string">&quot;\t&quot;</span> netstat.log</span><br><span class="line"></span><br><span class="line">// åŒ¹é… ESTABLISHED å–å</span><br><span class="line">$ awk <span class="string">&#x27;$6 !~ /ESTABLISHED/ || NR==2 &#123;print NR, $4, $5, $6&#125;&#x27;</span> OFS=<span class="string">&quot;\t&quot;</span> netstat.log</span><br><span class="line">æˆ–è€…</span><br><span class="line">$ awk <span class="string">&#x27;!/ESTABLISHED/&#x27;</span> netstat.log</span><br><span class="line"></span><br><span class="line">// æ‹†åˆ†æ–‡ä»¶</span><br><span class="line">$ awk <span class="string">&#x27;NR!=1 &amp;&amp; NR!=2 &#123;print &gt; $6&#125;&#x27;</span> netstat.log</span><br><span class="line"></span><br><span class="line">// åˆ¤æ–­åŒ¹é…æ‹†åˆ†æ–‡ä»¶</span><br><span class="line">$ awk <span class="string">&#x27;NR!=1 &#123; if ($6 ~ /TIME|ESTABLISHED/) print &gt; &quot;1.log&quot;; else if ($6 ~ /LISTEN/) print &gt; &quot;2.log&quot;; else print &gt; &quot;3.log&quot; &#125;&#x27;</span> netstat.log</span><br><span class="line"></span><br><span class="line">// æ±‚ *.php *.js æ–‡ä»¶å¤§å°æ€»å’Œ</span><br><span class="line">$ ls -l *.php *.js | awk <span class="string">&#x27;&#123;sum+=$5&#125; END &#123;print sum&#125;&#x27;</span></span><br><span class="line"></span><br><span class="line">// ç»Ÿè®¡æ¯ä¸ªç”¨æˆ·çš„è¿›ç¨‹çš„å äº†å¤šå°‘å†…å­˜</span><br><span class="line">$ ps aux | awk <span class="string">&#x27;NR!=1 &#123;a[$1]+=$6;&#125; END &#123; for(i in a) print i &quot;: &quot; a[i]&quot; KB&quot;; &#125;&#x27;</span></span><br><span class="line"></span><br><span class="line">// ä»æ–‡ä»¶ä¸­æ‰¾å‡ºé•¿åº¦å¤§äº 80 çš„è¡Œ</span><br><span class="line">$ awk <span class="string">&#x27;length&gt;80&#x27;</span> /etc/php.ini</span><br><span class="line"></span><br><span class="line">// æŒ‰è¿æ¥æ•°æŸ¥çœ‹å®¢æˆ·ç«¯ IP</span><br><span class="line">$ netstat -ntu | awk <span class="string">&#x27;&#123;print $5&#125;&#x27;</span> | cut -d: -f1 | sort | uniq -c | sort -nr</span><br><span class="line"></span><br><span class="line">// æ‰“å°ä¹ä¹ä¹˜æ³•è¡¨</span><br><span class="line">$ seq 9 | sed <span class="string">&#x27;H;g&#x27;</span> | awk -v RS=<span class="string">&#x27;&#x27;</span> <span class="string">&#x27;&#123; for(i=1;i&lt;=NF;i++)printf(&quot;%dx%d=%d%s&quot;, i, NR, i*NR, i==NR?&quot;\n&quot;:&quot;\t&quot;) &#125;&#x27;</span></span><br></pre></td></tr></table></figure>
<h2 id="wc"><a href="#wc" class="headerlink" title="wc"></a>wc</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// ç»Ÿè®¡ä¸€ä¸ªæ–‡ä»¶çš„è¡Œæ•°ï¼Œå­—æ•°ï¼Œå­—èŠ‚æ•°ï¼Œæ–‡ä»¶åç§°</span><br><span class="line">$ wc filename</span><br><span class="line"></span><br><span class="line">// ç»Ÿè®¡ä¸€ä¸ªæ–‡ä»¶çš„å­—ç¬¦æ•°</span><br><span class="line">$ wc -c filename</span><br><span class="line"></span><br><span class="line">// ç»Ÿè®¡ä¸€ä¸ªæ–‡ä»¶çš„å­—ç¬¦æ•°</span><br><span class="line">$ wc -m filename</span><br><span class="line"></span><br><span class="line">// ç»Ÿè®¡ä¸€ä¸ªæ–‡ä»¶çš„è¡Œæ•°</span><br><span class="line">$ wc -l filename</span><br><span class="line"></span><br><span class="line">// ç»Ÿè®¡ä¸€ä¸ªæ–‡ä»¶çš„å•è¯æ•°</span><br><span class="line">$ wc -w filename</span><br><span class="line"></span><br><span class="line">// ç»Ÿè®¡ç›®å½•ä¸‹çš„æ–‡ä»¶ä¸ªæ•°</span><br><span class="line">$ ll &lt;directory&gt; | wc -l</span><br></pre></td></tr></table></figure>
<p>æœ¬ç¯‡å†…å®¹ä¼šæŒç»­æ›´æ–°</p>
]]></content>
      <categories>
        <category>linux</category>
      </categories>
      <tags>
        <tag>linux</tag>
      </tags>
  </entry>
  <entry>
    <title>Linux ç½‘ç»œ IO æ¨¡å‹</title>
    <url>/2021/01/21/linux-network-io-model/</url>
    <content><![CDATA[<p><img src="/images/2021/202101210847.png" alt="202101210847.png"></p>
<p>ğŸ¹ Linux çš„å†…æ ¸å°†æ‰€æœ‰å¤–éƒ¨è®¾å¤‡éƒ½çœ‹åšä¸€ä¸ªæ–‡ä»¶æ¥æ“ä½œï¼ˆä¸€åˆ‡çš†æ–‡ä»¶ï¼‰ï¼Œå¯¹ä¸€ä¸ª <strong>File</strong> çš„è¯»å†™æ“ä½œä¼šè°ƒç”¨å†…æ ¸æä¾›çš„ç³»ç»Ÿå‘½ä»¤ï¼Œè¿”å›ä¸€ä¸ª <strong>File Descriptor</strong>ï¼ˆFD æ–‡ä»¶æè¿°ç¬¦ï¼‰ã€‚è€Œå¯¹ä¸€ä¸ª <strong>Socket</strong> çš„è¯»å†™ä¹Ÿä¼šæœ‰å“åº”çš„æè¿°ç¬¦ï¼Œç§°ä¸º <strong>Socket File Descriptor</strong>ï¼ˆSocket æ–‡ä»¶æè¿°ç¬¦ï¼‰ï¼Œæè¿°ç¬¦å°±æ˜¯ä¸€ä¸ªæ•°å­—ï¼ŒæŒ‡å‘å†…æ ¸ä¸­çš„ä¸€ä¸ªç»“æ„ä½“ï¼ˆæ–‡ä»¶è·¯å¾„ï¼Œæ•°æ®åŒºç­‰ä¸€äº›å±æ€§ï¼‰ã€‚</p>
<p>æ ¹æ® UNIX ç½‘ç»œç¼–ç¨‹å¯¹ IO æ¨¡å‹çš„åˆ†ç±»ï¼ŒUNIX æä¾›äº† 5 ç§ IO æ¨¡å‹ã€‚</p>
<span id="more"></span>
<h2 id="è®¾å¤‡å¤„ç†é€Ÿåº¦"><a href="#è®¾å¤‡å¤„ç†é€Ÿåº¦" class="headerlink" title="è®¾å¤‡å¤„ç†é€Ÿåº¦"></a>è®¾å¤‡å¤„ç†é€Ÿåº¦</h2><ul>
<li>å†…å­˜è¯»æ•°æ®ï¼šçº³ç§’çº§åˆ«ï¼›</li>
<li>åƒå…†ç½‘å¡è¯»æ•°æ®ï¼šå¾®å¦™çº§åˆ«ï¼Œ1 å¾®ç§’ç­‰äº 1000 çº³ç§’ï¼Œç½‘å¡æ¯”å†…å­˜æ…¢äº†åƒå€ï¼›</li>
<li>ç£ç›˜è¯»æ•°æ®ï¼šæ¯«ç§’çº§åˆ«ã€‚1 æ¯«ç§’ç­‰äº 10 ä¸‡çº³ç§’ ï¼Œç¡¬ç›˜æ¯”å†…å­˜æ…¢äº† 10 ä¸‡å€ï¼›</li>
<li>CPU ä¸€ä¸ªæ—¶é’Ÿå‘¨æœŸ 1 çº³ç§’ä¸Šä¸‹ï¼Œå†…å­˜ç®—æ˜¯æ¯”è¾ƒæ¥è¿‘ CPU çš„ï¼Œå…¶ä»–è®¾å¤‡éƒ½ç­‰ä¸èµ·ï¼›</li>
</ul>
<p>CPU å¤„ç†æ•°æ®çš„é€Ÿåº¦è¿œå¤§äº IO å‡†å¤‡æ•°æ®çš„é€Ÿåº¦ ã€‚æ‰€ä»¥ç†è®ºä¸Š <strong>ä»»ä½•ç¼–ç¨‹è¯­è¨€</strong> éƒ½ä¼šé‡åˆ°è¿™ç§ CPU å¤„ç†é€Ÿåº¦å’Œ IO é€Ÿåº¦ä¸åŒ¹é…çš„é—®é¢˜ï¼Œåœ¨ç½‘ç»œç¼–ç¨‹ä¸­å¦‚ä½•è¿›è¡Œç½‘ç»œ IO ä¼˜åŒ–ï¼Œæ€ä¹ˆé«˜æ•ˆåœ°åˆ©ç”¨ CPU è¿›è¡Œç½‘ç»œæ•°æ®å¤„ç†å°±å˜å¾—éå¸¸é‡è¦ã€‚</p>
<h2 id="ç¨‹åºç©ºé—´ä¸å†…æ ¸ç©ºé—´"><a href="#ç¨‹åºç©ºé—´ä¸å†…æ ¸ç©ºé—´" class="headerlink" title="ç¨‹åºç©ºé—´ä¸å†…æ ¸ç©ºé—´"></a>ç¨‹åºç©ºé—´ä¸å†…æ ¸ç©ºé—´</h2><p>äº”ç§æ¨¡å‹ç»å†çš„ä¸¤ä¸ªé˜¶æ®µï¼š</p>
<ul>
<li>ç­‰å¾…æ•°æ®å‡†å¤‡å¥½ï¼ˆWaiting for the data to be readyï¼‰ï¼›</li>
<li>å°†å‡†å¤‡å¥½çš„æ•°æ®ï¼Œä»å†…æ ¸ç©ºé—´å¤åˆ¶åˆ°è¿›ç¨‹ç©ºé—´ï¼ˆCopying the data from the kernel to the processï¼‰ï¼›</li>
</ul>
<h2 id="äº”ç§æ¨¡å‹æ¦‚å¿µ"><a href="#äº”ç§æ¨¡å‹æ¦‚å¿µ" class="headerlink" title="äº”ç§æ¨¡å‹æ¦‚å¿µ"></a>äº”ç§æ¨¡å‹æ¦‚å¿µ</h2><p>Linux åœ¨å¤„ç†æ–‡ä»¶å’Œç½‘ç»œè¿æ¥æ—¶ï¼Œéƒ½éœ€è¦æ‰“å¼€å’Œå…³é—­ FDï¼ˆFile Descriptorï¼‰ã€‚æ¯ä¸ªè¿›ç¨‹éƒ½ä¼šæœ‰é»˜è®¤çš„ FDï¼š</p>
<ul>
<li>0ï¼šæ ‡å‡†è¾“å…¥ stdinï¼›</li>
<li>1ï¼šæ ‡å‡†è¾“å‡º stdoutï¼›</li>
<li>2ï¼šé”™è¯¯è¾“å‡º stderrï¼›</li>
</ul>
<h3 id="é˜»å¡-IO-æ¨¡å‹"><a href="#é˜»å¡-IO-æ¨¡å‹" class="headerlink" title="é˜»å¡ IO æ¨¡å‹"></a>é˜»å¡ IO æ¨¡å‹</h3><p>é˜»å¡ IO æ¨¡å‹ï¼ˆBlocking IOï¼‰æ˜¯æœ€å¸¸ç”¨çš„ IO æ¨¡å‹ï¼Œç¼ºçœæƒ…å†µä¸‹ï¼Œæ‰€æœ‰æ–‡ä»¶æ“ä½œéƒ½æ˜¯é˜»å¡çš„ã€‚ä»¥å¥—æ¥å­—ä¸ºä¾‹ï¼šåœ¨è¿›ç¨‹ç©ºé—´ä¸­è°ƒç”¨ recvfromï¼Œå…¶ç³»ç»Ÿè°ƒç”¨ç›´åˆ°æ•°æ®åŒ…åˆ°è¾¾ä¸”è¢«å¤åˆ¶åˆ°åº”ç”¨è¿›ç¨‹çš„ç¼“å†²åŒºä¸­æˆ–å‘ç”Ÿé”™è¯¯æ—¶æ‰è¿”å›ã€‚åœ¨æ­¤æœŸé—´ä¸€ç›´ä¼šç­‰å¾…ï¼Œè¿›ç¨‹ä»è°ƒç”¨ recvfrom å¼€å§‹åˆ°å®ƒè¿”å›çš„æ•´æ®µæ—¶é—´éƒ½æ˜¯è¢«é˜»å¡çš„ã€‚å³ recvfrom çš„è°ƒç”¨ä¼šè¢«é˜»å¡ã€‚</p>
<h3 id="éé˜»å¡-IO-æ¨¡å‹"><a href="#éé˜»å¡-IO-æ¨¡å‹" class="headerlink" title="éé˜»å¡ IO æ¨¡å‹"></a>éé˜»å¡ IO æ¨¡å‹</h3><p>éé˜»å¡ IO æ¨¡å‹ï¼ˆNon-blocking IOï¼‰ï¼Œrecvfrom ä»åº”ç”¨å±‚åˆ°å†…æ ¸çš„æ—¶å€™ï¼Œå¦‚æœç¼“å†²åŒºæ²¡æœ‰æ•°æ®çš„è¯ï¼Œå°±ç›´æ¥è¿”å›ä¸€ä¸ª EWOULDBLOCK é”™è¯¯ï¼Œä¸€èˆ¬å¯¹éé˜»å¡ IO æ¨¡å‹è¿›è¡Œè½®è¯¢æ£€æŸ¥è¿™ä¸ªçŠ¶æ€ï¼Œçœ‹å†…æ ¸æ˜¯ä¸æ˜¯æœ‰æ•°æ®åˆ°æ¥ã€‚å³åå¤è°ƒç”¨ recvfrom ç­‰å¾…æˆåŠŸæŒ‡ç¤ºï¼ˆè½®è¯¢ï¼‰ã€‚</p>
<h3 id="IO-å¤ç”¨æ¨¡å‹"><a href="#IO-å¤ç”¨æ¨¡å‹" class="headerlink" title="IO å¤ç”¨æ¨¡å‹"></a>IO å¤ç”¨æ¨¡å‹</h3><p>IO å¤ç”¨æ¨¡å‹ï¼ˆIO Multiplexingï¼‰ï¼ŒLinux æä¾› select/pollï¼Œè¿›ç¨‹é€šè¿‡å°†ä¸€ä¸ªæˆ–è€…å¤šä¸ª fd ä¼ é€’ç»™ select æˆ– poll ç³»ç»Ÿè°ƒç”¨ï¼Œé˜»å¡åœ¨ select æ“ä½œä¸Šï¼Œé˜»å¡åœ¨ select æ“ä½œä¸Šï¼Œè¿™æ · select/poll å¯ä»¥å¸®æˆ‘ä»¬ä¾¦æµ‹åˆ°å¤šä¸ª fd æ˜¯å¦å¤„äºå°±ç»ªçŠ¶æ€ã€‚select/poll æ˜¯é¡ºåºæ‰«æ fd æ˜¯å¦å°±ç»ªï¼Œè€Œä¸”æ”¯æŒçš„ fd æ•°é‡æœ‰é™ï¼Œå› æ­¤å®ƒçš„ä½¿ç”¨å—åˆ°äº†ä¸€äº›åˆ¶çº¦ã€‚Linux è¿˜æä¾›äº† epoll ç³»ç»Ÿè°ƒç”¨ï¼Œepoll ä½¿ç”¨åŸºäºäº‹ä»¶é©±åŠ¨æ–¹å¼ä»£æ›¿é¡ºåºæ‰«æï¼Œå› æ­¤æ€§èƒ½æ›´é«˜ã€‚å½“æœ‰ fd å°±ç»ªæ—¶ï¼Œç«‹å³å›è°ƒå‡½æ•° callbackã€‚å³é˜»å¡åœ¨ select/poll/epollï¼Œä»¥åŠæ•°æ®å¤åˆ¶æ‹·è´çš„è¿™æ®µæ—¶é—´ã€‚</p>
<h3 id="ä¿¡å·é©±åŠ¨-IO-æ¨¡å‹"><a href="#ä¿¡å·é©±åŠ¨-IO-æ¨¡å‹" class="headerlink" title="ä¿¡å·é©±åŠ¨ IO æ¨¡å‹"></a>ä¿¡å·é©±åŠ¨ IO æ¨¡å‹</h3><p>ä¿¡å·é©±åŠ¨ IO æ¨¡å‹ï¼ˆSignal Driven IOï¼‰ï¼Œé¦–å…ˆå¼€å¯ä¿¡å·æ›²é©±åŠ¨ IO åŠŸèƒ½ï¼Œå¹¶é€šè¿‡ç³»ç»Ÿè°ƒç”¨ Sigaction æ‰§è¡Œä¸€ä¸ªä¿¡å·å¤„ç†å‡½æ•°ï¼ˆæ­¤ç³»ç»Ÿè°ƒç”¨ç«‹å³è¿”å›ï¼Œè¿›ç¨‹ç»§ç»­å·¥ä½œï¼Œå®ƒæ˜¯éé˜»å¡çš„ï¼‰ã€‚å½“æ•°æ®å‡†å¤‡å°±ç»ªæ—¶ï¼Œå°±ä¸ºè¯¥è¿›ç¨‹ç”Ÿæˆä¸€ä¸ª SIGIO ä¿¡å·ï¼Œé€šè¿‡ä¿¡å·å›è°ƒé€šçŸ¥åº”ç”¨ç¨‹åºè°ƒç”¨ recvfrom æ¥è¯»å–æ•°æ®ï¼Œå¹¶é€šçŸ¥ä¸»å¾ªç¯å‡½æ•°å¤„ç†æ•°æ®ã€‚å³é˜»å¡åœ¨æ•°æ®å¤åˆ¶æ‹·è´çš„è¿™æ®µæ—¶é—´ã€‚</p>
<h3 id="å¼‚æ­¥-IO"><a href="#å¼‚æ­¥-IO" class="headerlink" title="å¼‚æ­¥ IO"></a>å¼‚æ­¥ IO</h3><p>å¼‚æ­¥ IOï¼ˆAsynchronous IOï¼‰ï¼Œå‘ŠçŸ¥å†…æ ¸å¯åŠ¨æŸä¸ªæ–‡ä»¶ï¼Œå¹¶è®©å†…æ ¸æ•´ä¸ªæ“ä½œå®Œæˆåï¼ˆåŒ…æ‹¬å°†æ•°æ®ä»å†…æ ¸å¤åˆ¶åˆ°ç”¨æˆ·è‡ªå·±çš„ç¼“å†²åŒºï¼‰é€šçŸ¥æˆ‘ä»¬ã€‚è¿™ç§æ¨¡å‹ä¸ä¿¡å·æ¨¡å‹çš„ç»„è¦åŒºåˆ«æ˜¯ï¼šä¿¡å·é©±åŠ¨ IO ç”±å†…æ ¸é€šçŸ¥æˆ‘ä»¬ä½•æ—¶å¯ä»¥å¼€å§‹ä¸€ä¸ª IO æ“ä½œï¼šå¼‚æ­¥ IO æ¨¡å‹ç”±å†…æ ¸é€šçŸ¥æˆ‘ä»¬ IO æ“ä½œä½•æ—¶å·²å®Œæˆã€‚</p>
<h2 id="äº”ç§æ¨¡å‹çš„åŒºåˆ«"><a href="#äº”ç§æ¨¡å‹çš„åŒºåˆ«" class="headerlink" title="äº”ç§æ¨¡å‹çš„åŒºåˆ«"></a>äº”ç§æ¨¡å‹çš„åŒºåˆ«</h2><ul>
<li>é˜»å¡ IOã€éé˜»å¡ IOã€å¤šè·¯å¤ç”¨ IOã€ä¿¡å·é©±åŠ¨ IO éƒ½æ˜¯åŒæ­¥ IOï¼Œäº”ç§æ¨¡å‹åœ¨å†…æ ¸æ•°æ® Copy åˆ°ç”¨æˆ·ç©ºé—´æ—¶éƒ½æ˜¯é˜»å¡çš„ã€‚</li>
<li>é˜»å¡ä¸éé˜»å¡ IOï¼šå‘èµ· IO è¯·æ±‚æ˜¯å¦ä¼šè¢«é˜»å¡ï¼Œå¦‚æœé˜»å¡å°±æ˜¯ä¼ ç»Ÿçš„é˜»å¡ IOï¼Œä¸å¦‚ä¸é˜»å¡å°±æ˜¯éé˜»å¡ IOï¼›</li>
<li>åŒæ­¥ä¸å¼‚æ­¥ IOï¼šå¦‚æœå®é™…çš„ IO è¯»å†™é˜»å¡è¯·æ±‚è¿‡ç¨‹ï¼Œé‚£ä¹ˆå°±æ˜¯åŒæ­¥ IOï¼Œå¦‚æœä¸é˜»å¡ï¼Œè€Œæ˜¯æ“ä½œç³»ç»ŸååŠ©åšå®Œ IO æ“ä½œå†å°†ç»“æœè¿”å›ç»™ä½ ï¼Œé‚£ä¹ˆå°±æ˜¯å¼‚æ­¥ IOï¼›</li>
</ul>
<h2 id="IO-å¤šè·¯å¤ç”¨æŠ€æœ¯"><a href="#IO-å¤šè·¯å¤ç”¨æŠ€æœ¯" class="headerlink" title="IO å¤šè·¯å¤ç”¨æŠ€æœ¯"></a>IO å¤šè·¯å¤ç”¨æŠ€æœ¯</h2><h3 id="åº”ç”¨åœºæ™¯"><a href="#åº”ç”¨åœºæ™¯" class="headerlink" title="åº”ç”¨åœºæ™¯"></a>åº”ç”¨åœºæ™¯</h3><blockquote>
<p>IO å¤šè·¯å¤ç”¨å°±æ˜¯é€šè¿‡ä¸€ç§æœºåˆ¶ï¼Œä¸€ä¸ªè¿›ç¨‹å¯ä»¥ç›‘è§†å¤šä¸ªæ–‡ä»¶æè¿°ç¬¦ï¼Œä¸€æ—¦æŸä¸ªæè¿°ç¬¦å°±ç»ªï¼ˆè¯»å°±ç»ªæˆ–å†™å°±ç»ªï¼‰ï¼Œèƒ½å¤Ÿé€šçŸ¥ç¨‹åºè¿›è¡Œç›¸åº”çš„è¯»å†™æ“ä½œã€‚</p>
</blockquote>
<ul>
<li>å½“å®¢æˆ·å¤„ç†å¤šä¸ªæè¿°å­—æ—¶ï¼ˆä¸€èˆ¬æ˜¯äº¤äº’å¼è¾“å…¥å’Œç½‘ç»œå¥—æ¥å£ï¼‰ï¼Œå¿…é¡»ä½¿ç”¨ IO å¤ç”¨ï¼›</li>
<li>å½“ä¸€ä¸ªå®¢æˆ·åŒæ—¶å¤„ç†å¤šä¸ªå¥—æ¥å£æ—¶ï¼Œè€Œè¿™ç§æƒ…å†µæ˜¯å¯èƒ½çš„ï¼Œä½†å¾ˆå°‘å‡ºç°ï¼›</li>
<li>æœåŠ¡å™¨éœ€è¦åŒæ—¶å¤„ç†å¤šä¸ªå¤„äºç›‘å¬çŠ¶æ€æˆ–å¤šä¸ªè¿æ¥çŠ¶æ€çš„å¥—æ¥å­—ï¼›</li>
<li>æœåŠ¡å™¨éœ€è¦åŒæ—¶å¤„ç†å¤šä¸ªæœåŠ¡æˆ–å¤šä¸ªåè®®çš„å¥—æ¥å­—ï¼›</li>
</ul>
<p>ä¸å¤šè¿›ç¨‹å’Œå¤šçº¿ç¨‹æŠ€æœ¯ç›¸æ¯”ï¼ŒIO å¤šè·¯å¤ç”¨æŠ€æœ¯çš„æœ€å¤§ä¼˜åŠ¿æ˜¯ç³»ç»Ÿå¼€é”€å°ï¼Œç³»ç»Ÿä¸å¿…åˆ›å»ºè¿›ç¨‹/çº¿ç¨‹ï¼Œä¹Ÿä¸å¿…ç»´æŠ¤è¿™äº›è¿›ç¨‹/çº¿ç¨‹ï¼Œä»è€Œå¤§å¤§å‡å°äº†ç³»ç»Ÿçš„å¼€é”€ã€‚</p>
<h3 id="ä½¿ç”¨æŠ€æœ¯"><a href="#ä½¿ç”¨æŠ€æœ¯" class="headerlink" title="ä½¿ç”¨æŠ€æœ¯"></a>ä½¿ç”¨æŠ€æœ¯</h3><h4 id="select"><a href="#select" class="headerlink" title="select"></a>select</h4><ul>
<li>è‰¯å¥½è·¨å¹³å°æ”¯æŒï¼›</li>
<li>å•ä¸ªè¿›ç¨‹å¯ç›‘è§†çš„ FD æ•°é‡è¢«é™åˆ¶ï¼Œå³èƒ½ç›‘å¬ç«¯å£çš„å¤§å°æœ‰é™ã€‚ä¸€èˆ¬æ¥è¯´è¿™ä¸ªæ•°ç›®å’Œç³»ç»Ÿå†…å­˜å…³ç³»å¾ˆå¤§ï¼Œå…·ä½“æ•°ç›®å¯ä»¥ <code>cat /proc/sys/fs/file-max</code> æŸ¥çœ‹ã€‚32 ä½æœºé»˜è®¤æ˜¯ 1024 ä¸ªã€‚64 ä½æœºé»˜è®¤æ˜¯ 2048 ä¸ªï¼›</li>
<li>å¯¹ Socket è¿›è¡Œæ‰«ææ—¶æ˜¯çº¿æ€§æ‰«æï¼Œå³é‡‡ç”¨è½®è¯¢çš„æ–¹æ³•ï¼Œæ•ˆç‡è¾ƒä½ï¼šå½“å¥—æ¥å­—æ¯”è¾ƒå¤šçš„æ—¶å€™ï¼Œæ¯æ¬¡ <code>select()</code> éƒ½è¦é€šè¿‡éå† FD_SETSIZE ä¸ª Socket æ¥å®Œæˆè°ƒåº¦,ä¸ç®¡å“ªä¸ª Socket æ˜¯æ´»è·ƒçš„ï¼Œéƒ½éå†ä¸€éã€‚è¿™ä¼šæµªè´¹å¾ˆå¤š CPU æ—¶é—´ã€‚å¦‚æœèƒ½ç»™å¥—æ¥å­—æ³¨å†ŒæŸä¸ªå›è°ƒå‡½æ•°ï¼Œå½“ä»–ä»¬æ´»è·ƒæ—¶ï¼Œè‡ªåŠ¨å®Œæˆç›¸å…³æ“ä½œï¼Œé‚£å°±é¿å…äº†è½®è¯¢ï¼Œè¿™æ­£æ˜¯ epoll ä¸ kqueue åšçš„ï¼›</li>
<li>éœ€è¦ç»´æŠ¤ä¸€ä¸ªç”¨æ¥å­˜æ”¾å¤§é‡ FD çš„æ•°æ®ç»“æ„ï¼Œè¿™æ ·ä¼šä½¿å¾—ç”¨æˆ·ç©ºé—´å’Œå†…æ ¸ç©ºé—´åœ¨ä¼ é€’è¯¥ç»“æ„æ—¶å¤åˆ¶å¼€é”€å¤§ï¼›</li>
<li>å¯ä»¥åœ¨ä¸€ä¸ªçº¿ç¨‹å†…åŒæ—¶å¤„ç†å¤šä¸ª Socket çš„ IO è¯·æ±‚ã€‚åœ¨ç½‘ç»œç¼–ç¨‹ä¸­ï¼Œå½“æ¶‰åŠåˆ°å¤šå®¢æˆ·è®¿é—®æœåŠ¡å™¨çš„æƒ…å†µï¼Œæˆ‘ä»¬é¦–å…ˆæƒ³åˆ°çš„åŠæ³•å°±æ˜¯ fork å‡ºå¤šä¸ªè¿›ç¨‹æ¥å¤„ç†æ¯ä¸ªå®¢æˆ·è¿æ¥ã€‚ç°åœ¨ï¼Œæˆ‘ä»¬åŒæ ·å¯ä»¥ä½¿ç”¨ select æ¥å¤„ç†å¤šå®¢æˆ·é—®é¢˜ï¼Œè€Œä¸ç”¨ forkï¼›</li>
</ul>
<p>ç”¨ select å¤„ç†å¸¦å¤–æ•°æ®ï¼Œç½‘ç»œç¨‹åºä¸­ï¼Œselect èƒ½å¤„ç†çš„å¼‚å¸¸æƒ…å†µåªæœ‰ä¸€ç§ï¼šsocket ä¸Šæ¥æ”¶åˆ°å¸¦å¤–æ•°æ®ã€‚</p>
<p>å¸¦å¤–æ•°æ®ï¼šå¸¦å¤–æ•°æ®ï¼ˆoutâ€”ofâ€”band dataï¼‰ï¼Œæœ‰æ—¶ä¹Ÿç§°ä¸ºåŠ é€Ÿæ•°æ®ï¼ˆexpedited dataï¼‰ï¼Œæ˜¯æŒ‡è¿æ¥åŒæ–¹ä¸­çš„ä¸€æ–¹å‘ç”Ÿé‡è¦äº‹æƒ…ï¼Œæƒ³è¦è¿…é€Ÿåœ°é€šçŸ¥å¯¹æ–¹ã€‚è¿™ç§é€šçŸ¥åœ¨å·²ç»æ’é˜Ÿç­‰å¾…å‘é€çš„ä»»ä½•æ™®é€šï¼ˆæœ‰æ—¶ç§°ä¸ºã€å¸¦å†…ã€ï¼‰æ•°æ®ä¹‹å‰å‘é€ã€‚å¸¦å¤–æ•°æ®è®¾è®¡ä¸ºæ¯”æ™®é€šæ•°æ®æœ‰æ›´é«˜çš„ä¼˜å…ˆçº§ã€‚å¸¦å¤–æ•°æ®æ˜¯æ˜ å°„åˆ°ç°æœ‰çš„è¿æ¥ä¸­çš„ï¼Œè€Œä¸æ˜¯åœ¨å®¢æˆ·æœºå’ŒæœåŠ¡å™¨é—´å†ç”¨ä¸€ä¸ªè¿æ¥ã€‚</p>
<h4 id="poll"><a href="#poll" class="headerlink" title="poll"></a>poll</h4><ul>
<li>æ²¡æœ‰æœ€å¤§æ–‡ä»¶æè¿°ç¬¦æ•°é‡çš„é™åˆ¶ï¼›</li>
<li>å’Œ select ä¸€æ ·ï¼ŒåŒ…å«å¤§é‡æ–‡ä»¶æè¿°ç¬¦çš„æ•°ç»„è¢«æ•´ä½“å¤åˆ¶äºç”¨æˆ·æ€å’Œå†…æ ¸çš„åœ°å€ç©ºé—´ä¹‹é—´ï¼Œè€Œä¸è®ºè¿™äº›æ–‡ä»¶æè¿°ç¬¦æ˜¯å¦å°±ç»ªï¼Œå®ƒçš„å¼€é”€éšç€æ–‡ä»¶æè¿°ç¬¦æ•°é‡çš„å¢åŠ è€Œçº¿æ€§å¢å¤§ï¼›</li>
<li>åŒ select ä¸€æ ·ï¼Œå†…æ ¸éœ€è¦å°†æ¶ˆæ¯ä¼ é€’åˆ°ç”¨æˆ·ç©ºé—´ï¼Œéƒ½éœ€è¦å†…æ ¸æ‹·è´åŠ¨ä½œï¼›</li>
</ul>
<h4 id="epoll"><a href="#epoll" class="headerlink" title="epoll"></a>epoll</h4><ul>
<li>æ²¡æœ‰æœ€å¤§å¹¶å‘è¿æ¥çš„é™åˆ¶ï¼Œèƒ½æ‰“å¼€çš„ FD çš„ä¸Šé™è¿œå¤§äº 1024ï¼ˆ1G çš„å†…å­˜ä¸Šèƒ½ç›‘å¬çº¦ 10 ä¸‡ä¸ªç«¯å£ï¼‰ï¼›</li>
<li>IO æ•ˆç‡ä¸ä¼šéšç€ FD æ•°ç›®çš„å¢åŠ è€Œçº¿æ€§ä¸‹å°†ï¼Œåªæœ‰æ´»è·ƒå¯ç”¨çš„ FD æ‰ä¼šè°ƒç”¨ callback å‡½æ•°ï¼›</li>
<li>å†…å­˜æ‹·è´ï¼Œåˆ©ç”¨ mmap æ–‡ä»¶æ˜ å°„å†…å­˜åŠ é€Ÿä¸å†…æ ¸ç©ºé—´çš„æ¶ˆæ¯ä¼ é€’ã€‚epoll ä½¿ç”¨ mmap å‡å°‘å¤åˆ¶å¼€é”€ï¼Œå³ epoll ä½¿ç”¨ä¸€ä¸ªæ–‡ä»¶æè¿°ç¬¦ç®¡ç†å¤šä¸ªæè¿°ç¬¦ï¼Œå°†ç”¨æˆ·å…³ç³»çš„æ–‡ä»¶æè¿°ç¬¦çš„äº‹ä»¶å­˜æ”¾åˆ°å†…æ ¸çš„ä¸€ä¸ªäº‹ä»¶è¡¨ä¸­ï¼Œè¿™æ ·åœ¨ç”¨æˆ·ç©ºé—´å’Œå†…æ ¸ç©ºé—´çš„ copy åªéœ€ä¸€æ¬¡ï¼›</li>
<li>é€šè¿‡å†…æ ¸å’Œç”¨æˆ·ç©ºé—´å…±äº«ä¸€å—å†…å­˜æ¥å®ç°ï¼Œä¸éœ€è¦å†…æ ¸æ‹·è´åŠ¨ä½œï¼›</li>
<li>epoll æ‹¥æœ‰æ›´åŠ ç®€å•çš„ APIï¼›</li>
</ul>
<p>epoll å¯¹æ–‡ä»¶æè¿°ç¬¦çš„æ“ä½œæœ‰ä¸¤ç§æ¨¡å¼ï¼š</p>
<ul>
<li>LTï¼ˆ<code>Level Trigger</code>ï¼Œæ°´å¹³è§¦å‘ï¼‰æ¨¡å¼ï¼šæ˜¯ç¼ºçœçš„å·¥ä½œæ–¹å¼ï¼Œå¹¶ä¸”åŒæ—¶æ”¯æŒ block å’Œ non-block socketã€‚å½“ epoll_wait æ£€æµ‹åˆ°æè¿°ç¬¦äº‹ä»¶å‘ç”Ÿå¹¶å°†æ­¤äº‹ä»¶é€šçŸ¥åº”ç”¨ç¨‹åºï¼Œåº”ç”¨ç¨‹åºå¯ä»¥ä¸ç«‹å³å¤„ç†è¯¥äº‹ä»¶ã€‚ä¸‹æ¬¡è°ƒç”¨ epoll_wait æ—¶ï¼Œä¼šå†æ¬¡å“åº”åº”ç”¨ç¨‹åºå¹¶é€šçŸ¥æ­¤äº‹ä»¶ï¼Œè¿™ç§æœºåˆ¶å¯ä»¥æ¯”è¾ƒå¥½çš„ä¿è¯æ¯ä¸ªæ•°æ®ç”¨æˆ·éƒ½å¤„ç†æ‰äº†ï¼›</li>
<li>ETï¼ˆ<code>Edge Trigger</code>ï¼Œè¾¹ç¼˜è§¦å‘ï¼‰æ¨¡å¼ï¼šæ˜¯é«˜é€Ÿå·¥ä½œæ–¹å¼ï¼Œåªæ”¯æŒ non-block socketã€‚,å½“ epoll_wait æ£€æµ‹åˆ°æè¿°ç¬¦äº‹ä»¶å‘ç”Ÿå¹¶å°†æ­¤äº‹ä»¶é€šçŸ¥åº”ç”¨ç¨‹åºï¼Œåº”ç”¨ç¨‹åºå¿…é¡»ç«‹å³å¤„ç†è¯¥äº‹ä»¶ã€‚å¦‚æœä¸å¤„ç†ï¼Œä¸‹æ¬¡è°ƒç”¨ epoll_wait æ—¶ï¼Œä¸ä¼šå†æ¬¡å“åº”åº”ç”¨ç¨‹åºå¹¶é€šçŸ¥æ­¤äº‹ä»¶ã€‚ç®€è€Œè¨€ä¹‹ï¼Œå°±æ˜¯å†…æ ¸é€šçŸ¥è¿‡çš„äº‹æƒ…ä¸ä¼šå†è¯´ç¬¬äºŒéï¼Œæ•°æ®é”™è¿‡æ²¡è¯»ï¼Œä½ è‡ªå·±è´Ÿè´£ã€‚è¿™ç§æœºåˆ¶ç¡®å®é€Ÿåº¦æé«˜äº†ï¼Œä½†æ˜¯é£é™©ç›¸ä¼´è€Œè¡Œï¼›</li>
</ul>
<p>ET æ¨¡å¼åœ¨å¾ˆå¤§ç¨‹åº¦ä¸Šå‡å°‘äº† epoll äº‹ä»¶è¢«é‡å¤è§¦å‘çš„æ¬¡æ•°ï¼Œå› æ­¤æ•ˆç‡è¦æ¯” LT æ¨¡å¼é«˜ã€‚epoll å·¥ä½œåœ¨ ET æ¨¡å¼çš„æ—¶å€™ï¼Œå¿…é¡»ä½¿ç”¨éé˜»å¡å¥—æ¥å£ï¼Œä»¥é¿å…ç”±äºä¸€ä¸ªæ–‡ä»¶å¥æŸ„çš„é˜»å¡è¯»/é˜»å¡å†™æ“ä½œæŠŠå¤„ç†å¤šä¸ªæ–‡ä»¶æè¿°ç¬¦çš„ä»»åŠ¡é¥¿æ­»ã€‚</p>
<h3 id="æŠ€æœ¯åŒºåˆ«"><a href="#æŠ€æœ¯åŒºåˆ«" class="headerlink" title="æŠ€æœ¯åŒºåˆ«"></a>æŠ€æœ¯åŒºåˆ«</h3><table>
<thead>
<tr>
<th></th>
<th>select</th>
<th>poll</th>
<th>epoll</th>
</tr>
</thead>
<tbody>
<tr>
<td>äº‹ä»¶é›†åˆ</td>
<td>é€šè¿‡ 3 ä¸ªå‚æ•°åˆ†åˆ«ä¼ å…¥æ„Ÿå…´è¶£çš„å¯è¯»å¯å†™åŠå¼‚å¸¸äº‹ä»¶ã€‚å†…æ ¸é€šè¿‡å¯¹è¿™äº›å‚æ•°çš„åœ¨çº¿ä¿®æ”¹æ¥åé¦ˆå…¶ä¸­çš„å°±ç»ªäº‹ä»¶ï¼Œè¿™è¿™ä½¿å¾—ç”¨æˆ·æ¯æ¬¡è°ƒç”¨ select éƒ½è¦é‡ç½®è¿™ 3 ä¸ª å‚æ•°</td>
<td>ç»Ÿä¸€å¤„ç†æ‰€æœ‰äº‹ä»¶ç±»å‹ï¼Œå› æ­¤åªéœ€è¦ä¸€ä¸ªäº‹ä»¶å‚æ•°ï¼Œç”¨æˆ·é€šè¿‡ pollfd.events ä¼ å…¥æ„Ÿå…´è¶£çš„äº‹ä»¶ï¼Œå†…æ ¸é€šè¿‡ä¿®æ”¹ pollfd.revents å‚æ•°åé¦ˆå…¶ä¸­å°±ç»ªçš„äº‹ä»¶</td>
<td>å†…æ ¸é€šè¿‡ä¸€ä¸ªäº‹ä»¶ç›´æ¥ç®¡ç†ç”¨æˆ·æ„Ÿå…´è¶£çš„æ‰€æœ‰äº‹ä»¶ï¼Œå› æ­¤æ¯æ¬¡è°ƒç”¨ epoll_wait æ—¶ï¼Œæ— éœ€åå¤ä¼ å…¥ç”¨æˆ·æ„Ÿå…´è¶£çš„äº‹ä»¶ï¼Œepoll_wait ç³»ç»Ÿè°ƒç”¨çš„å‚æ•° events ä»…ç”¨æ¥åé¦ˆå°±ç»ªçš„äº‹ä»¶</td>
</tr>
<tr>
<td>å·¥ä½œåŸåˆ™</td>
<td>é‡‡ç”¨è½®è¯¢æ–¹å¼æ£€æµ‹å°±ç»ªäº‹ä»¶ï¼Œæ—¶é—´å¤æ‚åº¦ï¼šO(n)</td>
<td>é‡‡ç”¨è½®è¯¢æ–¹å¼æ£€æµ‹å°±ç»ªäº‹ä»¶ï¼Œæ—¶é—´å¤æ‚åº¦ï¼šO(n)</td>
<td>é‡‡ç”¨å›è°ƒæ–¹å¼æ£€æµ‹å°±ç»ªäº‹ä»¶ï¼Œæ—¶é—´å¤æ‚åº¦ï¼šO(1)</td>
</tr>
<tr>
<td>æœ€å¤§è¿æ¥</td>
<td>1024</td>
<td>æ— ä¸Šé™</td>
<td>æ— ä¸Šé™</td>
</tr>
<tr>
<td>å·¥ä½œæ¨¡å¼</td>
<td>LT</td>
<td>LT</td>
<td>LT å’Œ ET</td>
</tr>
<tr>
<td>æ–‡ä»¶æè¿°</td>
<td>æ¯æ¬¡è°ƒç”¨ï¼Œæ¯æ¬¡æ‹·è´</td>
<td>æ¯æ¬¡è°ƒç”¨ï¼Œæ¯æ¬¡æ‹·è´</td>
<td>é€šè¿‡ mmap çš„å†…å­˜æ˜ å°„æŠ€æœ¯ï¼Œé™ä½æ‹·è´çš„èµ„æºæ¶ˆè€—</td>
</tr>
</tbody>
</table>
]]></content>
      <categories>
        <category>linux</category>
      </categories>
      <tags>
        <tag>linux</tag>
      </tags>
  </entry>
  <entry>
    <title>Linux crontab å‘½ä»¤</title>
    <url>/2019/12/29/linux-crontab-command/</url>
    <content><![CDATA[<p><img src="/images/2020/202003151156.jpeg" alt="202003151156.jpeg"></p>
<p>â™»ï¸ crontab å‘½ä»¤è¢«ç”¨æ¥æäº¤å’Œç®¡ç†ç”¨æˆ·çš„éœ€è¦å‘¨æœŸæ€§æ‰§è¡Œçš„ä»»åŠ¡ã€‚</p>
<span id="more"></span>
<h1 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h1><p>é€šè¿‡ <strong>crontab</strong> å‘½ä»¤ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å›ºå®šçš„é—´éš”æ—¶é—´æ‰§è¡ŒæŒ‡å®šçš„ç³»ç»ŸæŒ‡ä»¤æˆ– shell script è„šæœ¬ã€‚æ—¶é—´é—´éš”çš„å•ä½å¯ä»¥æ˜¯åˆ†é’Ÿã€å°æ—¶ã€æ—¥ã€æœˆã€å‘¨åŠä»¥ä¸Šçš„ä»»æ„ç»„åˆã€‚è¿™ä¸ªå‘½ä»¤éå¸¸é€‚åˆå‘¨æœŸæ€§çš„æ—¥å¿—åˆ†ææˆ–æ•°æ®å¤‡ä»½ç­‰å·¥ä½œã€‚</p>
<h1 id="é€‰é¡¹"><a href="#é€‰é¡¹" class="headerlink" title="é€‰é¡¹"></a>é€‰é¡¹</h1><ul>
<li><code>-e</code>ï¼šç¼–è¾‘è¯¥ç”¨æˆ·çš„è®¡æ—¶å™¨è®¾ç½®ï¼›</li>
<li><code>-l</code>ï¼šåˆ—å‡ºè¯¥ç”¨æˆ·çš„è®¡æ—¶å™¨è®¾ç½®ï¼›</li>
<li><code>-r</code>ï¼šåˆ é™¤è¯¥ç”¨æˆ·çš„è®¡æ—¶å™¨è®¾ç½®ï¼›</li>
<li><code>-u&lt;username&gt;</code>ï¼šæŒ‡å®šè¦è®¾å®šè®¡æ—¶å™¨çš„ç”¨æˆ·åç§°ã€‚</li>
</ul>
<h1 id="ä»»åŠ¡è°ƒåº¦"><a href="#ä»»åŠ¡è°ƒåº¦" class="headerlink" title="ä»»åŠ¡è°ƒåº¦"></a>ä»»åŠ¡è°ƒåº¦</h1><h2 id="ç³»ç»Ÿä»»åŠ¡è°ƒåº¦"><a href="#ç³»ç»Ÿä»»åŠ¡è°ƒåº¦" class="headerlink" title="ç³»ç»Ÿä»»åŠ¡è°ƒåº¦"></a>ç³»ç»Ÿä»»åŠ¡è°ƒåº¦</h2><p><strong>ç³»ç»Ÿä»»åŠ¡è°ƒåº¦</strong> æ˜¯ç³»ç»Ÿå‘¨æœŸæ€§æ‰€è¦æ‰§è¡Œçš„å·¥ä½œï¼Œæ¯”å¦‚å†™ç¼“å­˜æ•°æ®åˆ°ç¡¬ç›˜ã€æ—¥å¿—æ¸…ç†ç­‰ã€‚åœ¨ <code>/etc</code> ç›®å½•ä¸‹æœ‰ä¸€ä¸ª crontab æ–‡ä»¶ï¼Œè¿™ä¸ªå°±æ˜¯ç³»ç»Ÿä»»åŠ¡è°ƒåº¦çš„é…ç½®æ–‡ä»¶ã€‚</p>
<p><code>/etc/crontab</code> æ–‡ä»¶åŒ…æ‹¬ä¸‹é¢å‡ è¡Œï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">SHELL=/bin/bash <span class="comment"># SHELLå˜é‡æŒ‡å®šäº†ç³»ç»Ÿè¦ä½¿ç”¨å“ªä¸ª shellï¼Œè¿™é‡Œæ˜¯ bash</span></span><br><span class="line">PATH=/sbin:/bin:/usr/sbin:/usr/bin <span class="comment"># PATH å˜é‡æŒ‡å®šäº†ç³»ç»Ÿæ‰§è¡Œå‘½ä»¤çš„è·¯å¾„</span></span><br><span class="line">MAILTO=<span class="string">&quot;&quot;</span> <span class="comment"># MAILTO å˜é‡æŒ‡å®šäº† crond çš„ä»»åŠ¡æ‰§è¡Œä¿¡æ¯å°†é€šè¿‡ç”µå­é‚®ä»¶å‘é€ç»™ root ç”¨æˆ·ï¼Œå¦‚æœ MAILTO å˜é‡çš„å€¼ä¸ºç©ºï¼Œåˆ™è¡¨ç¤ºä¸å‘é€ä»»åŠ¡æ‰§è¡Œä¿¡æ¯ç»™ç”¨æˆ·</span></span><br><span class="line">HOME=/ <span class="comment"># HOME å˜é‡æŒ‡å®šäº†åœ¨æ‰§è¡Œå‘½ä»¤æˆ–è€…è„šæœ¬æ—¶ä½¿ç”¨çš„ä¸»ç›®å½•</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># run-parts</span></span><br><span class="line">51 * * * * root run-parts /etc/cron.hourly</span><br><span class="line">24 7 * * * root run-parts /etc/cron.daily</span><br><span class="line">22 4 * * 0 root run-parts /etc/cron.weekly</span><br><span class="line">42 4 1 * * root run-parts /etc/cron.monthly</span><br></pre></td></tr></table></figure>
<h2 id="ç”¨æˆ·ä»»åŠ¡è°ƒåº¦"><a href="#ç”¨æˆ·ä»»åŠ¡è°ƒåº¦" class="headerlink" title="ç”¨æˆ·ä»»åŠ¡è°ƒåº¦"></a>ç”¨æˆ·ä»»åŠ¡è°ƒåº¦</h2><p><strong>ç”¨æˆ·ä»»åŠ¡è°ƒåº¦</strong> æ˜¯ç”¨æˆ·å®šæœŸè¦æ‰§è¡Œçš„å·¥ä½œï¼Œæ¯”å¦‚ç”¨æˆ·æ•°æ®å¤‡ä»½ã€å®šæ—¶é‚®ä»¶æé†’ç­‰ã€‚ç”¨æˆ·å¯ä»¥ä½¿ç”¨ crontab å·¥å…·æ¥å®šåˆ¶è‡ªå·±çš„è®¡åˆ’ä»»åŠ¡ã€‚æ‰€æœ‰ç”¨æˆ·å®šä¹‰çš„ crontab æ–‡ä»¶éƒ½è¢«ä¿å­˜åœ¨ <code>/var/spool/cron</code> ç›®å½•ä¸­ã€‚å…¶æ–‡ä»¶åä¸ç”¨æˆ·åä¸€è‡´ï¼Œä½¿ç”¨è€…æƒé™æ–‡ä»¶å¦‚ä¸‹ï¼š</p>
<blockquote>
<ul>
<li>/etc/cron.deny è¯¥æ–‡ä»¶ä¸­æ‰€åˆ—ç”¨æˆ·ä¸å…è®¸ä½¿ç”¨ crontab å‘½ä»¤ï¼›</li>
<li>/etc/cron.allow è¯¥æ–‡ä»¶ä¸­æ‰€åˆ—ç”¨æˆ·å…è®¸ä½¿ç”¨ crontab å‘½ä»¤ï¼›</li>
<li>/var/spool/cron/ æ‰€æœ‰ç”¨æˆ· crontab æ–‡ä»¶å­˜æ”¾çš„ç›®å½•ï¼Œä»¥ç”¨æˆ·åå‘½åã€‚</li>
</ul>
</blockquote>
<h1 id="æ–‡ä»¶æ ¼å¼"><a href="#æ–‡ä»¶æ ¼å¼" class="headerlink" title="æ–‡ä»¶æ ¼å¼"></a>æ–‡ä»¶æ ¼å¼</h1><p><img src="https://inotes.oss-cn-beijing.aliyuncs.com/202003/202003151135.png" alt="202003151135.png"></p>
<p>åœ¨ä»¥ä¸Šå„ä¸ªå­—æ®µä¸­ï¼Œè¿˜å¯ä»¥ä½¿ç”¨ä»¥ä¸‹ç‰¹æ®Šå­—ç¬¦ï¼š</p>
<blockquote>
<ul>
<li><code>*</code>ï¼šä»£è¡¨æ‰€æœ‰å¯èƒ½çš„å€¼ï¼Œä¾‹å¦‚ month å­—æ®µå¦‚æœæ˜¯æ˜Ÿå·ï¼Œåˆ™è¡¨ç¤ºåœ¨æ»¡è¶³å…¶å®ƒå­—æ®µçš„åˆ¶çº¦æ¡ä»¶åæ¯æœˆéƒ½æ‰§è¡Œè¯¥å‘½ä»¤æ“ä½œï¼›</li>
<li><code>,</code>ï¼šå¯ä»¥ç”¨é€—å·éš”å¼€çš„å€¼æŒ‡å®šä¸€ä¸ªåˆ—è¡¨èŒƒå›´ï¼Œä¾‹å¦‚ï¼š<code>1,2,5,7,8,9</code>ï¼›</li>
<li><code>-</code>ï¼šå¯ä»¥ç”¨æ•´æ•°ä¹‹é—´çš„ä¸­æ è¡¨ç¤ºä¸€ä¸ªæ•´æ•°èŒƒå›´ï¼Œä¾‹å¦‚ï¼š<code>2-6</code> è¡¨ç¤º <code>2,3,4,5,6</code>ï¼›</li>
<li><code>/</code>ï¼šå¯ä»¥ç”¨æ­£æ–œçº¿æŒ‡å®šæ—¶é—´çš„é—´éš”é¢‘ç‡ï¼Œä¾‹å¦‚ï¼š<code>0-23/2</code> è¡¨ç¤ºæ¯ä¸¤å°æ—¶æ‰§è¡Œä¸€æ¬¡ã€‚åŒæ—¶æ­£æ–œçº¿å¯ä»¥å’Œæ˜Ÿå·ä¸€èµ·ä½¿ç”¨ï¼Œä¾‹å¦‚ï¼š<code>*/10</code>ï¼Œå¦‚æœç”¨åœ¨ minute å­—æ®µï¼Œè¡¨ç¤ºæ¯ååˆ†é’Ÿæ‰§è¡Œä¸€æ¬¡ã€‚</li>
</ul>
</blockquote>
<h1 id="ä½¿ç”¨å®ä¾‹"><a href="#ä½¿ç”¨å®ä¾‹" class="headerlink" title="ä½¿ç”¨å®ä¾‹"></a>ä½¿ç”¨å®ä¾‹</h1><div class="note info">
            <p>æœ€å¥½åœ¨ <code>crontab</code> æ–‡ä»¶çš„æ¯ä¸€ä¸ªæ¡ç›®ä¹‹ä¸ŠåŠ å…¥ä¸€æ¡æ³¨é‡Šï¼Œè¿™æ ·å°±å¯ä»¥çŸ¥é“å®ƒçš„åŠŸèƒ½ã€è¿è¡Œæ—¶é—´ï¼Œæ›´ä¸ºé‡è¦çš„æ˜¯ï¼ŒçŸ¥é“è¿™æ˜¯å“ªä½ç”¨æˆ·çš„å®šæ—¶ä½œä¸šã€‚</p>
          </div>
<h2 id="æ¯-1-åˆ†é’Ÿæ‰§è¡Œä¸€æ¬¡å‘½ä»¤"><a href="#æ¯-1-åˆ†é’Ÿæ‰§è¡Œä¸€æ¬¡å‘½ä»¤" class="headerlink" title="æ¯ 1 åˆ†é’Ÿæ‰§è¡Œä¸€æ¬¡å‘½ä»¤"></a>æ¯ 1 åˆ†é’Ÿæ‰§è¡Œä¸€æ¬¡å‘½ä»¤</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">* * * * * <span class="built_in">command</span></span><br></pre></td></tr></table></figure>
<h2 id="æ¯å°æ—¶çš„ç¬¬-3-å’Œç¬¬-15-åˆ†é’Ÿæ‰§è¡Œ"><a href="#æ¯å°æ—¶çš„ç¬¬-3-å’Œç¬¬-15-åˆ†é’Ÿæ‰§è¡Œ" class="headerlink" title="æ¯å°æ—¶çš„ç¬¬ 3 å’Œç¬¬ 15 åˆ†é’Ÿæ‰§è¡Œ"></a>æ¯å°æ—¶çš„ç¬¬ 3 å’Œç¬¬ 15 åˆ†é’Ÿæ‰§è¡Œ</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">3,15 * * * * <span class="built_in">command</span></span><br></pre></td></tr></table></figure>
<h2 id="ä¸Šåˆ-8-ç‚¹åˆ°-11-ç‚¹çš„ç¬¬-3-å’Œç¬¬-15-åˆ†é’Ÿæ‰§è¡Œ"><a href="#ä¸Šåˆ-8-ç‚¹åˆ°-11-ç‚¹çš„ç¬¬-3-å’Œç¬¬-15-åˆ†é’Ÿæ‰§è¡Œ" class="headerlink" title="ä¸Šåˆ 8 ç‚¹åˆ° 11 ç‚¹çš„ç¬¬ 3 å’Œç¬¬ 15 åˆ†é’Ÿæ‰§è¡Œ"></a>ä¸Šåˆ 8 ç‚¹åˆ° 11 ç‚¹çš„ç¬¬ 3 å’Œç¬¬ 15 åˆ†é’Ÿæ‰§è¡Œ</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">3,15 8-11 * * * <span class="built_in">command</span></span><br></pre></td></tr></table></figure>
<h2 id="æ¯éš”ä¸¤å¤©çš„ä¸Šåˆ-8-ç‚¹åˆ°-11-ç‚¹çš„ç¬¬-3-å’Œç¬¬-15-åˆ†é’Ÿæ‰§è¡Œ"><a href="#æ¯éš”ä¸¤å¤©çš„ä¸Šåˆ-8-ç‚¹åˆ°-11-ç‚¹çš„ç¬¬-3-å’Œç¬¬-15-åˆ†é’Ÿæ‰§è¡Œ" class="headerlink" title="æ¯éš”ä¸¤å¤©çš„ä¸Šåˆ 8 ç‚¹åˆ° 11 ç‚¹çš„ç¬¬ 3 å’Œç¬¬ 15 åˆ†é’Ÿæ‰§è¡Œ"></a>æ¯éš”ä¸¤å¤©çš„ä¸Šåˆ 8 ç‚¹åˆ° 11 ç‚¹çš„ç¬¬ 3 å’Œç¬¬ 15 åˆ†é’Ÿæ‰§è¡Œ</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">3,15 8-11 */2 * * <span class="built_in">command</span></span><br></pre></td></tr></table></figure>
<h2 id="æ¯ä¸ªæ˜ŸæœŸä¸€çš„ä¸Šåˆ-8-ç‚¹åˆ°-11-ç‚¹çš„ç¬¬-3-å’Œç¬¬-15-åˆ†é’Ÿæ‰§è¡Œ"><a href="#æ¯ä¸ªæ˜ŸæœŸä¸€çš„ä¸Šåˆ-8-ç‚¹åˆ°-11-ç‚¹çš„ç¬¬-3-å’Œç¬¬-15-åˆ†é’Ÿæ‰§è¡Œ" class="headerlink" title="æ¯ä¸ªæ˜ŸæœŸä¸€çš„ä¸Šåˆ 8 ç‚¹åˆ° 11 ç‚¹çš„ç¬¬ 3 å’Œç¬¬ 15 åˆ†é’Ÿæ‰§è¡Œ"></a>æ¯ä¸ªæ˜ŸæœŸä¸€çš„ä¸Šåˆ 8 ç‚¹åˆ° 11 ç‚¹çš„ç¬¬ 3 å’Œç¬¬ 15 åˆ†é’Ÿæ‰§è¡Œ</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">3,15 8-11 * * 1 <span class="built_in">command</span></span><br></pre></td></tr></table></figure>
<h2 id="æ¯æ™šçš„-21-30-é‡å¯-smb"><a href="#æ¯æ™šçš„-21-30-é‡å¯-smb" class="headerlink" title="æ¯æ™šçš„ 21:30 é‡å¯ smb"></a>æ¯æ™šçš„ 21:30 é‡å¯ smb</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">30 21 * * * /etc/init.d/smb restart</span><br></pre></td></tr></table></figure>
<h2 id="æ¯æœˆ-1ã€10ã€22-æ—¥çš„-4-45-é‡å¯-smb"><a href="#æ¯æœˆ-1ã€10ã€22-æ—¥çš„-4-45-é‡å¯-smb" class="headerlink" title="æ¯æœˆ 1ã€10ã€22 æ—¥çš„ 4:45 é‡å¯ smb"></a>æ¯æœˆ 1ã€10ã€22 æ—¥çš„ 4:45 é‡å¯ smb</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">45 4 1,10,22 * * /etc/init.d/smb restart</span><br></pre></td></tr></table></figure>
<h2 id="æ¯å‘¨å…­ã€å‘¨æ—¥çš„-1-10-é‡å¯-smb"><a href="#æ¯å‘¨å…­ã€å‘¨æ—¥çš„-1-10-é‡å¯-smb" class="headerlink" title="æ¯å‘¨å…­ã€å‘¨æ—¥çš„ 1:10 é‡å¯ smb"></a>æ¯å‘¨å…­ã€å‘¨æ—¥çš„ 1:10 é‡å¯ smb</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">10 1 * * 6,0 /etc/init.d/smb restart</span><br></pre></td></tr></table></figure>
<h2 id="æ¯å¤©-18-00-è‡³-23-00-ä¹‹é—´æ¯éš”-30-åˆ†é’Ÿé‡å¯-smb"><a href="#æ¯å¤©-18-00-è‡³-23-00-ä¹‹é—´æ¯éš”-30-åˆ†é’Ÿé‡å¯-smb" class="headerlink" title="æ¯å¤© 18:00 è‡³ 23:00 ä¹‹é—´æ¯éš” 30 åˆ†é’Ÿé‡å¯ smb"></a>æ¯å¤© 18:00 è‡³ 23:00 ä¹‹é—´æ¯éš” 30 åˆ†é’Ÿé‡å¯ smb</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">0,30 18-23 * * * /etc/init.d/smb restart</span><br></pre></td></tr></table></figure>
<h2 id="æ¯æ˜ŸæœŸå…­çš„æ™šä¸Š-11-00-PM-é‡å¯-smb"><a href="#æ¯æ˜ŸæœŸå…­çš„æ™šä¸Š-11-00-PM-é‡å¯-smb" class="headerlink" title="æ¯æ˜ŸæœŸå…­çš„æ™šä¸Š 11:00 PM é‡å¯ smb"></a>æ¯æ˜ŸæœŸå…­çš„æ™šä¸Š 11:00 PM é‡å¯ smb</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">0 23 * * 6 /etc/init.d/smb restart</span><br></pre></td></tr></table></figure>
<h2 id="æ¯ä¸€å°æ—¶é‡å¯-smb"><a href="#æ¯ä¸€å°æ—¶é‡å¯-smb" class="headerlink" title="æ¯ä¸€å°æ—¶é‡å¯ smb"></a>æ¯ä¸€å°æ—¶é‡å¯ smb</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">* */1 * * * /etc/init.d/smb restart</span><br></pre></td></tr></table></figure>
<h2 id="æ™šä¸Š-11-ç‚¹åˆ°æ—©ä¸Š-7-ç‚¹ä¹‹é—´ï¼Œæ¯éš”ä¸€å°æ—¶é‡å¯-smb"><a href="#æ™šä¸Š-11-ç‚¹åˆ°æ—©ä¸Š-7-ç‚¹ä¹‹é—´ï¼Œæ¯éš”ä¸€å°æ—¶é‡å¯-smb" class="headerlink" title="æ™šä¸Š 11 ç‚¹åˆ°æ—©ä¸Š 7 ç‚¹ä¹‹é—´ï¼Œæ¯éš”ä¸€å°æ—¶é‡å¯ smb"></a>æ™šä¸Š 11 ç‚¹åˆ°æ—©ä¸Š 7 ç‚¹ä¹‹é—´ï¼Œæ¯éš”ä¸€å°æ—¶é‡å¯ smb</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">* 23-7/1 * * * /etc/init.d/smb restart</span><br></pre></td></tr></table></figure>
<h2 id="æ¯æœˆçš„-4-å·ä¸æ¯å‘¨ä¸€åˆ°å‘¨ä¸‰çš„-11-ç‚¹é‡å¯-smb"><a href="#æ¯æœˆçš„-4-å·ä¸æ¯å‘¨ä¸€åˆ°å‘¨ä¸‰çš„-11-ç‚¹é‡å¯-smb" class="headerlink" title="æ¯æœˆçš„ 4 å·ä¸æ¯å‘¨ä¸€åˆ°å‘¨ä¸‰çš„ 11 ç‚¹é‡å¯ smb"></a>æ¯æœˆçš„ 4 å·ä¸æ¯å‘¨ä¸€åˆ°å‘¨ä¸‰çš„ 11 ç‚¹é‡å¯ smb</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">0 11 4 * mon-wed /etc/init.d/smb restart</span><br></pre></td></tr></table></figure>
<h2 id="ä¸€æœˆä¸€å·çš„-4-ç‚¹é‡å¯-smb"><a href="#ä¸€æœˆä¸€å·çš„-4-ç‚¹é‡å¯-smb" class="headerlink" title="ä¸€æœˆä¸€å·çš„ 4 ç‚¹é‡å¯ smb"></a>ä¸€æœˆä¸€å·çš„ 4 ç‚¹é‡å¯ smb</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">0 4 1 jan * /etc/init.d/smb restart</span><br></pre></td></tr></table></figure>
<h2 id="æ¯å°æ—¶æ‰§è¡Œ-etc-cron-hourly-ç›®å½•å†…çš„è„šæœ¬"><a href="#æ¯å°æ—¶æ‰§è¡Œ-etc-cron-hourly-ç›®å½•å†…çš„è„šæœ¬" class="headerlink" title="æ¯å°æ—¶æ‰§è¡Œ /etc/cron.hourly ç›®å½•å†…çš„è„šæœ¬"></a>æ¯å°æ—¶æ‰§è¡Œ /etc/cron.hourly ç›®å½•å†…çš„è„šæœ¬</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">01 * * * * root run-parts /etc/cron.hourly</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>linux</category>
      </categories>
      <tags>
        <tag>linux</tag>
      </tags>
  </entry>
  <entry>
    <title>Linux ç½‘ç»œé…ç½®å·¥å…·</title>
    <url>/2019/12/04/linux-network-configuration-tools/</url>
    <content><![CDATA[<p><img src="/images/2019/201912042040.png" alt="201912042040.png"></p>
<p>ğŸ§¬ æ˜¯æ—¶å€™ä½“éªŒä¸‹ iproute2 ç½‘ç»œé…ç½®å·¥å…·å…¨å®¶æ¡¶äº†ï¼Œnet-tools å®¶æ—æœ‰çš„ iproute2 ä¸€æ ·ä¹Ÿä¸å·®ã€‚æˆ‘èµ·åˆä¹Ÿä¸çŸ¥é“ï¼Œç›´åˆ°æ–°ä¹°çš„ç™¾åº¦äº‘æœåŠ¡å™¨æŸ¥çœ‹åœ°å€æ—¶å‡ºç°ã€command not foundã€ï¼Œæ‰æŸ¥é˜…èµ„æ–™äº†è§£äº†ä¸€ä¸‹ï¼ŒåŸæ¥ net-tools è¿™è´§å·²ç»å¯¿ç»ˆæ­£å¯äº†ã€‚Arch Linux å’Œ CentOS å·²ç»å®Œå…¨æŠ›å¼ƒäº† net-toolsï¼Œåªæ”¯æŒ iproute2ã€‚</p>
<span id="more"></span>
<h1 id="net-tools"><a href="#net-tools" class="headerlink" title="net-tools"></a>net-tools</h1><ul>
<li><a href="http://net-tools.sourceforge.net/">net-tools</a></li>
</ul>
<table>
<thead>
<tr>
<th>å‘½ä»¤</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>ifconfig -a</code></td>
<td>æ˜¾ç¤ºæ‰€æœ‰å·²è¿æ¥çš„ç½‘ç»œæ¥å£</td>
</tr>
<tr>
<td><code>sudo ifconfig eth1 up</code></td>
<td>æ¿€æ´»ç½‘ç»œæ¥å£</td>
</tr>
<tr>
<td><code>sudo ifconfig eth1 down</code></td>
<td>åœç”¨ç½‘ç»œæ¥å£</td>
</tr>
<tr>
<td><code>sudo ifconfig eth1 10.0.0.1/24</code></td>
<td>ä¸ºç½‘ç»œæ¥å£åˆ†é… IPv4 åœ°å€</td>
</tr>
<tr>
<td><code>sudo ifconfig eth1 0</code></td>
<td>ç§»é™¤ç½‘ç»œæ¥å£çš„ IPv4 åœ°å€</td>
</tr>
<tr>
<td><code>ifconfig eth1</code></td>
<td>æ˜¾ç¤ºç½‘ç»œæ¥å£çš„ IPv4 æˆ– IPv6 åœ°å€</td>
</tr>
<tr>
<td><code>sudo ifconfig eth1 inet6 add 2080::f816:3ea1:fe98:7b20/64</code></td>
<td>ä¸ºç½‘ç»œæ¥å£åˆ†é… IPv6 åœ°å€</td>
</tr>
<tr>
<td><code>sudo ifconfig eth1 inet6 del 2080::f816:3ea1:fe98:7b20/64</code></td>
<td>ç§»é™¤ç½‘ç»œè®¾å¤‡çš„ IPv6 åœ°å€</td>
</tr>
<tr>
<td><code>sudo ifconfig eth1 hw ether 00:16:3e:04:d9:97</code></td>
<td>æ”¹å˜ç½‘ç»œæ¥å£çš„ MAC åœ°å€</td>
</tr>
<tr>
<td><code>route -n</code> æˆ– <code>netstat -rn</code></td>
<td>æŸ¥çœ‹ IP è·¯ç”±è¡¨</td>
</tr>
<tr>
<td><code>sudo route add default gw 192.168.1.2 eth0</code></td>
<td>æ·»åŠ é»˜è®¤è·¯ç”±</td>
</tr>
<tr>
<td><code>sudo route del default gw 192.168.1.1 eth0</code></td>
<td>ä¿®æ”¹é»˜è®¤è·¯ç”±</td>
</tr>
<tr>
<td><code>sudo route add -net 172.16.32.0/24 gw 192.168.1.1 dev eth0</code></td>
<td>æ·»åŠ é™æ€è·¯ç”±</td>
</tr>
<tr>
<td><code>sudo route del -net 172.16.32.0/24</code></td>
<td>ç§»é™¤é™æ€è·¯ç”±</td>
</tr>
<tr>
<td><code>netstat</code> æˆ– <code>netstat -l</code></td>
<td>æŸ¥çœ‹å¥—æ¥å­—ç»Ÿè®¡ä¿¡æ¯</td>
</tr>
<tr>
<td><code>arp -an</code></td>
<td>æŸ¥çœ‹ ARP è¡¨</td>
</tr>
<tr>
<td><code>sudo arp -s 192.168.1.100 00:16:3e:04:d9:07</code></td>
<td>æ·»åŠ é™æ€ ARP é¡¹</td>
</tr>
<tr>
<td><code>sudo arp -d 192.168.1.100</code></td>
<td>åˆ é™¤é™æ€ ARP é¡¹</td>
</tr>
<tr>
<td><code>sudo ipmaddr add 33:44:00:00:00:01 dev eth0</code></td>
<td>æ·»åŠ å¤šæ’­åœ°å€</td>
</tr>
<tr>
<td><code>sudo ipmaddr del 33:44:00:00:00:01 dev eth0</code></td>
<td>åˆ é™¤å¤šæ’­åœ°å€</td>
</tr>
<tr>
<td><code>ipmaddr show dev eth0</code> æˆ– <code>netstat -g</code></td>
<td>æŸ¥çœ‹å¤šæ’­åœ°å€</td>
</tr>
</tbody>
</table>
<h1 id="iproute2"><a href="#iproute2" class="headerlink" title="iproute2"></a>iproute2</h1><ul>
<li><a href="https://wiki.linuxfoundation.org/networking/iproute2">iproute2</a></li>
<li><a href="https://github.com/shemminger/iproute2">Linux routing utilities</a></li>
</ul>
<table>
<thead>
<tr>
<th>å‘½ä»¤</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>ip link show</code></td>
<td>æ˜¾ç¤ºæ‰€æœ‰å·²è¿æ¥çš„ç½‘ç»œæ¥å£</td>
</tr>
<tr>
<td><code>sudo ip link set up eth1</code></td>
<td>æ¿€æ´»ç½‘ç»œæ¥å£</td>
</tr>
<tr>
<td><code>sudo ip link set down eth1</code></td>
<td>åœç”¨ç½‘ç»œæ¥å£</td>
</tr>
<tr>
<td><code>sudo ip addr add 10.0.0.1/24 dev eth1</code></td>
<td>ä¸ºç½‘ç»œæ¥å£åˆ†é… IPv4 åœ°å€</td>
</tr>
<tr>
<td><code>sudo ip addr del 10.0.0.1/24 dev eth1</code></td>
<td>ç§»é™¤ç½‘ç»œæ¥å£çš„ IPv4 åœ°å€</td>
</tr>
<tr>
<td><code>ip addr show dev eth1</code> æˆ– <code>ip -6 addr show dev eth1</code></td>
<td>æ˜¾ç¤ºç½‘ç»œæ¥å£çš„ IPv4 æˆ– IPv6 åœ°å€</td>
</tr>
<tr>
<td><code>sudo ip -6 addr add 2002:0db5:0:f102::1/64 dev eth1</code></td>
<td>ä¸ºç½‘ç»œæ¥å£åˆ†é… IPv6 åœ°å€</td>
</tr>
<tr>
<td><code>sudo ip -6 addr del 2002:0db5:0:f102::1/64 dev eth1</code></td>
<td>ç§»é™¤ç½‘ç»œè®¾å¤‡çš„ IPv6 åœ°å€</td>
</tr>
<tr>
<td><code>sudo ip link set dev eth1 address 00:16:3e:04:d9:97</code></td>
<td>æ”¹å˜ç½‘ç»œæ¥å£çš„ MAC åœ°å€</td>
</tr>
<tr>
<td><code>ip route show</code></td>
<td>æŸ¥çœ‹ IP è·¯ç”±è¡¨</td>
</tr>
<tr>
<td><code>sudo ip route add default via 192.168.1.2 dev eth0</code></td>
<td>æ·»åŠ é»˜è®¤è·¯ç”±</td>
</tr>
<tr>
<td><code>sudo ip route replace default via 192.168.1.2 dev eth0</code></td>
<td>ä¿®æ”¹é»˜è®¤è·¯ç”±</td>
</tr>
<tr>
<td><code>sudo ip route add 172.16.32.0/24 via 192.168.1.1 dev eth0</code></td>
<td>æ·»åŠ é™æ€è·¯ç”±</td>
</tr>
<tr>
<td><code>sudo ip route del 172.16.32.0/24</code></td>
<td>ç§»é™¤é™æ€è·¯ç”±</td>
</tr>
<tr>
<td><code>ss</code> æˆ– <code>ss -l</code></td>
<td>æŸ¥çœ‹å¥—æ¥å­—ç»Ÿè®¡ä¿¡æ¯</td>
</tr>
<tr>
<td><code>ip neigh</code></td>
<td>æŸ¥çœ‹ ARP è¡¨</td>
</tr>
<tr>
<td><code>sudo ip neigh add 192.168.1.100 lladdr 00:0c:29:c0:5a:ef dev eth0</code></td>
<td>æ·»åŠ é™æ€ ARP é¡¹</td>
</tr>
<tr>
<td><code>sudo ip neigh del 192.168.1.100 dev eth0</code></td>
<td>åˆ é™¤é™æ€ ARP é¡¹</td>
</tr>
<tr>
<td><code>sudo ip maddr add 33:44:00:00:00:01 dev eth0</code></td>
<td>æ·»åŠ å¤šæ’­åœ°å€</td>
</tr>
<tr>
<td><code>sudo ip maddr del 33:44:00:00:00:01 dev eth0</code></td>
<td>åˆ é™¤å¤šæ’­åœ°å€</td>
</tr>
<tr>
<td><code>ip maddr list dev eth0</code></td>
<td>æŸ¥çœ‹å¤šæ’­åœ°å€</td>
</tr>
</tbody>
</table>
<h1 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h1><p><a href="http://xmodulo.com/linux-tcpip-networking-net-tools-iproute2.html">Linux TCP/IP networking: net-tools vs. iproute2</a></p>
]]></content>
      <categories>
        <category>linux</category>
      </categories>
      <tags>
        <tag>linux</tag>
      </tags>
  </entry>
  <entry>
    <title>JavaScript Console ä¹‹æµè§ˆå™¨æ§åˆ¶å°</title>
    <url>/2018/01/31/js-chrome-console/</url>
    <content><![CDATA[<p><code>Chrome</code> å‡ ä¹æ˜¯æœ€å¥½çš„æµè§ˆå™¨ï¼Œæ˜¯çš„ï¼Œæˆ‘ä¸€ç›´è¿™ä¹ˆè®¤ä¸ºï¼Œå®ƒçš„å¼€å‘è€…å·¥å…·ä¹Ÿè§‰ä¸å«ç³Šï¼Œæ¥ï¼Œè¯•ä¸€è¯• <code>Console</code>ã€‚</p>
<span id="more"></span>
<h1 id="è¾“å‡ºä¿¡æ¯"><a href="#è¾“å‡ºä¿¡æ¯" class="headerlink" title="è¾“å‡ºä¿¡æ¯"></a>è¾“å‡ºä¿¡æ¯</h1><h2 id="è¾“å‡ºæ—¥å¿—ä¿¡æ¯"><a href="#è¾“å‡ºæ—¥å¿—ä¿¡æ¯" class="headerlink" title="è¾“å‡ºæ—¥å¿—ä¿¡æ¯"></a>è¾“å‡ºæ—¥å¿—ä¿¡æ¯</h2><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// æ™®é€šæ—¥å¿—ä¿¡æ¯</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;this is a log&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç®€å•æ ·å¼çš„æ—¥å¿—ä¿¡æ¯</span></span><br><span class="line"><span class="keyword">var</span> template = <span class="string">&#x27;%cHello World!&#x27;</span>, style = <span class="string">&#x27;font-size: 30px; color: blue;&#x27;</span>;</span><br><span class="line"><span class="built_in">console</span>.log(template, style);</span><br><span class="line"></span><br><span class="line"><span class="comment">// åä¸½æ ·å¼çš„æ—¥å¿—ä¿¡æ¯</span></span><br><span class="line"><span class="keyword">var</span> template = <span class="string">&#x27;%cHello World!&#x27;</span>, style = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">style += <span class="string">&#x27;background-image: -webkit-gradient(linear, left top, right top,&#x27;</span>;</span><br><span class="line">style += <span class="string">&#x27;color-stop(0, #f22), color-stop(0.15, #f2f), color-stop(0.3, #22f),&#x27;</span>;</span><br><span class="line">style += <span class="string">&#x27;color-stop(0.45, #2ff), color-stop(0.6, #2f2),color-stop(0.75, #2f2),&#x27;</span>;</span><br><span class="line">style += <span class="string">&#x27;color-stop(0.9, #ff2), color-stop(1, #f22));&#x27;</span>;</span><br><span class="line">style += <span class="string">&#x27;color: transparent; -webkit-background-clip: text; font-size: 6em;)&#x27;</span>;</span><br><span class="line"><span class="built_in">console</span>.log(template, style);</span><br><span class="line"></span><br><span class="line"><span class="comment">// å›¾ç‰‡æ—¥å¿—ä¿¡æ¯</span></span><br><span class="line"><span class="keyword">var</span> style = <span class="string">&#x27;padding: 150px 200px; line-height: 300px; background: url(http://www.wyzu.cn/data/uploadfile/200803/2008032812262650.gif) no-repeat;&#x27;</span>;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;%c&#x27;</span>, style);</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ¥å—ä¸å®šå‚æ•°</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;%cHello World!&#x27;</span>, <span class="string">&#x27;color: red;&#x27;</span>, <span class="string">&#x27;JavaScript&#x27;</span>, <span class="string">&#x27;Web Developer&#x27;</span>);</span><br></pre></td></tr></table></figure>
<h2 id="è¾“å‡ºæç¤ºä¿¡æ¯"><a href="#è¾“å‡ºæç¤ºä¿¡æ¯" class="headerlink" title="è¾“å‡ºæç¤ºä¿¡æ¯"></a>è¾“å‡ºæç¤ºä¿¡æ¯</h2><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">console</span>.info(<span class="string">&#x27;this is a info&#x27;</span>);</span><br></pre></td></tr></table></figure>
<h2 id="è¾“å‡ºè­¦å‘Šä¿¡æ¯"><a href="#è¾“å‡ºè­¦å‘Šä¿¡æ¯" class="headerlink" title="è¾“å‡ºè­¦å‘Šä¿¡æ¯"></a>è¾“å‡ºè­¦å‘Šä¿¡æ¯</h2><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">console</span>.warn(<span class="string">&#x27;this is a warn.&#x27;</span>);</span><br></pre></td></tr></table></figure>
<h2 id="è¾“å‡ºé”™è¯¯ä¿¡æ¯"><a href="#è¾“å‡ºé”™è¯¯ä¿¡æ¯" class="headerlink" title="è¾“å‡ºé”™è¯¯ä¿¡æ¯"></a>è¾“å‡ºé”™è¯¯ä¿¡æ¯</h2><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">console</span>.error(<span class="string">&#x27;this is a error&#x27;</span>);</span><br></pre></td></tr></table></figure>
<h2 id="è¾“å‡ºåˆ†ç»„ä¿¡æ¯"><a href="#è¾“å‡ºåˆ†ç»„ä¿¡æ¯" class="headerlink" title="è¾“å‡ºåˆ†ç»„ä¿¡æ¯"></a>è¾“å‡ºåˆ†ç»„ä¿¡æ¯</h2><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// æ™®é€šç»„</span></span><br><span class="line"><span class="built_in">console</span>.group(<span class="string">&#x27;App.log&#x27;</span>);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;this is a group log.&#x27;</span>);</span><br><span class="line"><span class="built_in">console</span>.groupEnd();</span><br><span class="line"><span class="built_in">console</span>.group(<span class="string">&#x27;App.info&#x27;</span>);</span><br><span class="line"><span class="built_in">console</span>.info(<span class="string">&#x27;this is a group info.&#x27;</span>);</span><br><span class="line"><span class="built_in">console</span>.groupEnd();</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»„åµŒå¥—</span></span><br><span class="line"><span class="keyword">var</span> user = <span class="string">&#x27;Atkinson&#x27;</span>, authenticated = <span class="literal">true</span>, authorized = <span class="literal">true</span>;</span><br><span class="line"><span class="built_in">console</span>.group(<span class="string">&quot;Authenticating user &#x27;%s&#x27;&quot;</span>, user);</span><br><span class="line"><span class="keyword">if</span> (authenticated) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;User &#x27;%s&#x27; was authenticated.&quot;</span>, user);</span><br><span class="line">    <span class="built_in">console</span>.group(<span class="string">&quot;Authorizing user &#x27;%s&#x27;.&quot;</span>, user);</span><br><span class="line">    <span class="keyword">if</span> (authorized) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&quot;User &#x27;%s&#x27; was authorized.&quot;</span>, user);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">console</span>.groupEnd();</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.groupEnd();</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;A nested group log trace.&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// æŠ˜å ç»„</span></span><br><span class="line"><span class="keyword">var</span> user = <span class="string">&#x27;Atkinson&#x27;</span>, authenticated = <span class="literal">true</span>, authorized = <span class="literal">true</span>;</span><br><span class="line"><span class="built_in">console</span>.groupCollapsed(<span class="string">&quot;Authenticating user &#x27;%s&#x27;&quot;</span>, user);</span><br><span class="line"><span class="keyword">if</span> (authenticated) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;User &#x27;%s&#x27; was authenticated.&quot;</span>, user);</span><br><span class="line">    <span class="built_in">console</span>.groupCollapsed(<span class="string">&quot;Authorizing user &#x27;%s&#x27;.&quot;</span>, user);</span><br><span class="line">    <span class="keyword">if</span> (authorized) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&quot;User &#x27;%s&#x27; was authorized.&quot;</span>, user);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">console</span>.groupEnd();</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.groupEnd();</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;A nested group log trace.&quot;</span>);</span><br></pre></td></tr></table></figure>
<h2 id="å­—ç¬¦ä¸²æ›¿æ¢å’Œæ ¼å¼"><a href="#å­—ç¬¦ä¸²æ›¿æ¢å’Œæ ¼å¼" class="headerlink" title="å­—ç¬¦ä¸²æ›¿æ¢å’Œæ ¼å¼"></a>å­—ç¬¦ä¸²æ›¿æ¢å’Œæ ¼å¼</h2><p>æ ¼å¼è¯´æ˜ç¬¦çš„å®Œæ•´åˆ—è¡¨</p>
<table>
<thead>
<tr>
<th>å ä½ç¬¦</th>
<th>è¾“å‡º</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>%s</code></td>
<td>æ ¼å¼çš„å€¼ä½œä¸ºä¸€ä¸ªå­—ç¬¦ä¸²</td>
</tr>
<tr>
<td><code>%i</code> æˆ– <code>%d</code></td>
<td>æ ¼å¼çš„å€¼ä¸ºæ•´æ•°</td>
</tr>
<tr>
<td><code>%f</code></td>
<td>æ ¼å¼çš„å€¼ä½œä¸ºä¸€ä¸ªæµ®ç‚¹å€¼</td>
</tr>
<tr>
<td><code>%o</code></td>
<td>æ ¼å¼çš„å€¼æ˜¯ä¸€ä¸ªå¯æ‰©å±•çš„ <code>DOM</code> å…ƒç´ , åœ¨å†…å®¹é¢æ¿ä¸­çœ‹åˆ°çš„</td>
</tr>
<tr>
<td><code>%O</code></td>
<td>æ ¼å¼çš„å€¼æ˜¯ä¸€ä¸ªå¯æ‰©å±•çš„ <code>JavaScript</code> å¯¹è±¡</td>
</tr>
<tr>
<td><code>%c</code></td>
<td>åº”ç”¨ <code>CSS</code> æ ·å¼è§„åˆ™è¾“å‡ºå­—ç¬¦ä¸²çš„äºŒå‚æ•°æŒ‡å®š</td>
</tr>
</tbody>
</table>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;Node count: %d, and the time is %f.&quot;</span>, <span class="built_in">document</span>.childNodes.length, <span class="built_in">Date</span>.now());</span><br></pre></td></tr></table></figure>
<h2 id="å°†-DOM-ç»“ç‚¹ä»¥-JavaScript-å¯¹è±¡çš„å½¢å¼è¾“å‡ºåˆ°æ§åˆ¶å°"><a href="#å°†-DOM-ç»“ç‚¹ä»¥-JavaScript-å¯¹è±¡çš„å½¢å¼è¾“å‡ºåˆ°æ§åˆ¶å°" class="headerlink" title="å°† DOM ç»“ç‚¹ä»¥ JavaScript å¯¹è±¡çš„å½¢å¼è¾“å‡ºåˆ°æ§åˆ¶å°"></a>å°† DOM ç»“ç‚¹ä»¥ JavaScript å¯¹è±¡çš„å½¢å¼è¾“å‡ºåˆ°æ§åˆ¶å°</h2><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">console</span>.dir(<span class="built_in">document</span>.body);</span><br><span class="line"><span class="built_in">console</span>.dir(<span class="built_in">document</span>.body.firstElementChild);</span><br></pre></td></tr></table></figure>
<h2 id="è¾“å‡ºè¡¨æ ¼ä¿¡æ¯"><a href="#è¾“å‡ºè¡¨æ ¼ä¿¡æ¯" class="headerlink" title="è¾“å‡ºè¡¨æ ¼ä¿¡æ¯"></a>è¾“å‡ºè¡¨æ ¼ä¿¡æ¯</h2><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// åŸºæœ¬è¡¨æ ¼</span></span><br><span class="line"><span class="keyword">var</span> table = [</span><br><span class="line">    &#123;<span class="string">&#x27;åç§°&#x27;</span>: <span class="string">&#x27;MacBook Pro&#x27;</span>, <span class="string">&#x27;æ•°é‡&#x27;</span>: <span class="number">2</span>, <span class="string">&#x27;å•ä½&#x27;</span>: <span class="string">&#x27;å°&#x27;</span>&#125;,</span><br><span class="line">    &#123;<span class="string">&#x27;åç§°&#x27;</span>: <span class="string">&#x27;ThinkPad&#x27;</span>, <span class="string">&#x27;æ•°é‡&#x27;</span>: <span class="number">10</span>, <span class="string">&#x27;å•ä½&#x27;</span>: <span class="string">&#x27;å°&#x27;</span>&#125;,</span><br><span class="line">    &#123;<span class="string">&#x27;åç§°&#x27;</span>: <span class="string">&#x27;JavaScript å·¥ç¨‹å¸ˆ&#x27;</span>, <span class="string">&#x27;æ•°é‡&#x27;</span>: <span class="number">2</span>, <span class="string">&#x27;å•ä½&#x27;</span>: <span class="string">&#x27;äºº&#x27;</span>&#125;,</span><br><span class="line">    &#123;<span class="string">&#x27;åç§°&#x27;</span>: <span class="string">&#x27;PHP å·¥ç¨‹å¸ˆ&#x27;</span>, <span class="string">&#x27;æ•°é‡&#x27;</span>: <span class="number">10</span>, <span class="string">&#x27;å•ä½&#x27;</span>: <span class="string">&#x27;äºº&#x27;</span>&#125;</span><br><span class="line">];</span><br><span class="line"><span class="built_in">console</span>.table(table);</span><br><span class="line"></span><br><span class="line"><span class="comment">// é«˜çº§è¡¨æ ¼</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name, email, age</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">this</span>.name = name;</span><br><span class="line">    <span class="built_in">this</span>.email = email;</span><br><span class="line">    <span class="built_in">this</span>.age = age;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> language = &#123;&#125;;</span><br><span class="line">language.c = <span class="keyword">new</span> Person(<span class="string">&#x27;C&#x27;</span>, <span class="string">&#x27;clang@gmail.com&#x27;</span>, <span class="number">40</span>);</span><br><span class="line">language.php = <span class="keyword">new</span> Person(<span class="string">&#x27;PHP&#x27;</span>, <span class="string">&#x27;php@gmail.com&#x27;</span>, <span class="number">25</span>);</span><br><span class="line">language.java = <span class="keyword">new</span> Person(<span class="string">&#x27;Java&#x27;</span>, <span class="string">&#x27;java@gmail.com&#x27;</span>, <span class="number">30</span>)</span><br><span class="line">language.javascript = <span class="keyword">new</span> Person(<span class="string">&#x27;JavaScript&#x27;</span>, <span class="string">&#x27;javascript@gmail.com&#x27;</span>, <span class="number">20</span>);</span><br><span class="line"><span class="built_in">console</span>.table(language, [<span class="string">&#x27;name&#x27;</span>, <span class="string">&#x27;email&#x27;</span>, <span class="string">&#x27;age&#x27;</span>]);</span><br></pre></td></tr></table></figure>
<h1 id="æ–­è¨€"><a href="#æ–­è¨€" class="headerlink" title="æ–­è¨€"></a>æ–­è¨€</h1><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// ä»£æ›¿ä¸‰ç›®è¿ç®—ï¼Œå…ˆå¯¹ä¼ å…¥çš„è¡¨è¾¾å¼è¿›è¡Œæ–­è¨€ï¼Œåªæœ‰è¡¨è¾¾å¼ä¸ºå‡æ—¶æ‰è¾“å‡ºä¿¡æ¯</span></span><br><span class="line"><span class="keyword">var</span> isDebug = <span class="literal">false</span>;</span><br><span class="line"><span class="built_in">console</span>.log(isDebug, <span class="string">&#x27;è¯·ç¨å€™, ç³»ç»Ÿæ­£åœ¨è°ƒè¯•ä¸­...&#x27;</span>);</span><br></pre></td></tr></table></figure>
<h1 id="å †æ ˆè·Ÿè¸ª"><a href="#å †æ ˆè·Ÿè¸ª" class="headerlink" title="å †æ ˆè·Ÿè¸ª"></a>å †æ ˆè·Ÿè¸ª</h1><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params">num</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (num &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="built_in">console</span>.trace(<span class="string">&#x27;recursion is function:&#x27;</span>, num);</span><br><span class="line">        <span class="keyword">return</span> num + add(num - <span class="number">1</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">add(<span class="number">3</span>);</span><br></pre></td></tr></table></figure>
<h1 id="è®¡æ•°"><a href="#è®¡æ•°" class="headerlink" title="è®¡æ•°"></a>è®¡æ•°</h1><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// ç»Ÿè®¡æŸæ®µä»£ç æ‰§è¡Œäº†å¤šå°‘æ¬¡</span></span><br><span class="line"><span class="keyword">var</span> Test = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> testFunc = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.count(<span class="string">&#x27;`testFunc()` å‡½æ•°è¢«æ‰§è¡Œçš„æ¬¡æ•°&#x27;</span>);</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        <span class="attr">init</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">            testFunc();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">var</span> f = <span class="keyword">new</span> Test();</span><br><span class="line">f.init(); <span class="comment">// `testFunc()` å‡½æ•°è¢«æ‰§è¡Œçš„æ¬¡æ•°ï¼š1</span></span><br><span class="line">f.init(); <span class="comment">// `testFunc()` å‡½æ•°è¢«æ‰§è¡Œçš„æ¬¡æ•°ï¼š2</span></span><br></pre></td></tr></table></figure>
<h1 id="ç»Ÿè®¡ä»»åŠ¡è€—æ—¶"><a href="#ç»Ÿè®¡ä»»åŠ¡è€—æ—¶" class="headerlink" title="ç»Ÿè®¡ä»»åŠ¡è€—æ—¶"></a>ç»Ÿè®¡ä»»åŠ¡è€—æ—¶</h1><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">console</span>.time(<span class="string">&#x27;Array initialize&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> array = <span class="keyword">new</span> <span class="built_in">Array</span>(<span class="number">1000000</span>);</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = array.length - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--) &#123;</span><br><span class="line">    array[i] = <span class="keyword">new</span> <span class="built_in">Object</span>();</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.timeEnd(<span class="string">&#x27;Array initialize&#x27;</span>); <span class="comment">// Array initialize: 1416.217ms</span></span><br></pre></td></tr></table></figure>
<h1 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h1><blockquote>
<ul>
<li><a href="https://developers.google.com/web/tools/chrome-devtools/debug/console/?hl=en">Using the Console</a></li>
<li><a href="http://www.cnblogs.com/Wayou/p/chrome-console-tips-and-tricks.html">Chrome æ§åˆ¶å°ä¸å®Œå…¨æŒ‡å—</a></li>
<li><a href="http://www.cnblogs.com/Wayou/p/things_you_dont_know_about_frontend.html">å‰ç«¯ä¸ä¸ºäººçŸ¥çš„ä¸€é¢â€“å‰ç«¯å†·çŸ¥è¯†é›†é”¦</a></li>
<li><a href="http://james.padolsey.com/javascript/parsing-urls-with-the-dom/">Parsing URLs with the DOM</a></li>
<li><a href="https://developer.chrome.com/devtools/docs/commandline-api">Command Line API Reference</a></li>
<li><a href="https://segmentfault.com/a/1190000007713707">ä¸€å¤©ç²¾é€š Chrome å¼€å‘</a></li>
</ul>
</blockquote>
]]></content>
      <categories>
        <category>javascript</category>
      </categories>
      <tags>
        <tag>javascript</tag>
      </tags>
  </entry>
  <entry>
    <title>Ubuntu å®‰è£…é…ç½® Shadowsocks</title>
    <url>/2019/01/02/linux-shadowsocks/</url>
    <content><![CDATA[<p><img src="/images/2019/201908191931.jpg" alt="201908191931.jpg"></p>
<p>ğŸŒShadowsocks æ˜¯ä¸€ç§åŸºäº Socks5 ä»£ç†æ–¹å¼çš„åŠ å¯†ä¼ è¾“åè®®ï¼Œä¹Ÿå¯ä»¥æŒ‡å®ç°è¿™ä¸ªåè®®çš„å„ç§å¼€å‘åŒ…ã€‚å½“å‰åŒ…ä½¿ç”¨ Pythonã€Cã€C++ã€C#ã€Go è¯­è¨€ç­‰ç¼–ç¨‹è¯­è¨€å¼€å‘ï¼Œå¤§éƒ¨åˆ†ä¸»è¦å®ç°ï¼ˆiOS å¹³å°çš„é™¤å¤–ï¼‰é‡‡ç”¨ Apache è®¸å¯è¯ã€GPLã€MIT è®¸å¯è¯ç­‰å¤šç§è‡ªç”±è½¯ä»¶è®¸å¯åè®®å¼€æ”¾æºä»£ç ã€‚Shadowsocks åˆ†ä¸ºæœåŠ¡å™¨ç«¯å’Œå®¢æˆ·ç«¯ï¼Œåœ¨ä½¿ç”¨ä¹‹å‰ï¼Œéœ€è¦å…ˆå°†æœåŠ¡å™¨ç«¯éƒ¨ç½²åˆ°æœåŠ¡å™¨ä¸Šé¢ï¼Œç„¶åé€šè¿‡å®¢æˆ·ç«¯è¿æ¥å¹¶åˆ›å»ºæœ¬åœ°ä»£ç†ã€‚ä¸å¤šè¯´ï¼Œä½ æ‡‚å¾—ã€‚</p>
<h1 id="æœåŠ¡ç«¯"><a href="#æœåŠ¡ç«¯" class="headerlink" title="æœåŠ¡ç«¯"></a>æœåŠ¡ç«¯</h1><h2 id="æœåŠ¡ç«¯å®‰è£…"><a href="#æœåŠ¡ç«¯å®‰è£…" class="headerlink" title="æœåŠ¡ç«¯å®‰è£…"></a>æœåŠ¡ç«¯å®‰è£…</h2><p><a href="https://shadowsocks.org/en/download/servers.html">å‚è§ä¸åŒæ”¯æŒè¯­è¨€çš„å®‰è£…æ–¹å¼</a></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// å®‰è£… pip3</span><br><span class="line">$ sudo apt install python3-pip</span><br><span class="line"></span><br><span class="line">// å®‰è£… shadowsocks</span><br><span class="line">$ pip3 install https://github.com/shadowsocks/shadowsocks/archive/master.zip</span><br><span class="line"></span><br><span class="line">// æ£€æŸ¥ shadowsocks ç‰ˆæœ¬</span><br><span class="line">$ ssserver --version</span><br><span class="line">Shadowsocks 3.0.0</span><br></pre></td></tr></table></figure>
<h2 id="æœåŠ¡ç«¯é…ç½®"><a href="#æœåŠ¡ç«¯é…ç½®" class="headerlink" title="æœåŠ¡ç«¯é…ç½®"></a>æœåŠ¡ç«¯é…ç½®</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ sudo mkdir /etc/shadowsocks</span><br><span class="line">$ sudo vim /etc/shadowsocks/shadowsocks.json</span><br><span class="line">&#123;</span><br><span class="line">    <span class="string">&quot;server&quot;</span>: <span class="string">&quot;server_ip&quot;</span>, // æœåŠ¡ç«¯ç›‘å¬ IP åœ°å€ï¼Œæœ‰äººå¡« 0.0.0.0 æ®è¯´ä¹Ÿå¯ä»¥</span><br><span class="line">    <span class="string">&quot;server_port&quot;</span>: 9009, // æœåŠ¡å™¨ç›‘å¬ç«¯å£å·ï¼Œä¸€èˆ¬è‡ªå®šä¹‰</span><br><span class="line">    <span class="string">&quot;local_address&quot;</span>: <span class="string">&quot;127.0.0.1&quot;</span>, // æœ¬åœ°ä»£ç† IP åœ°å€</span><br><span class="line">    <span class="string">&quot;local_port&quot;</span>: 1080, // æœ¬åœ°ä»£ç†ç«¯å£å·</span><br><span class="line">    <span class="string">&quot;password&quot;</span>: <span class="string">&quot;password&quot;</span>, // æœåŠ¡ç«¯å¯†ç </span><br><span class="line">    <span class="string">&quot;timeout&quot;</span>: 300, // è¶…æ—¶æ—¶é—´ï¼Œä»¥ç§’ä¸ºå•ä½</span><br><span class="line">    <span class="string">&quot;method&quot;</span>: <span class="string">&quot;aes-256-cfb&quot;</span>, // åŠ å¯†æ–¹å¼ï¼Œæ®è¯´ rc4-md5 çš„åŠ å¯†æ–¹å¼é€Ÿåº¦è¦å¿«</span><br><span class="line">    <span class="string">&quot;mode&quot;</span>: <span class="string">&quot;udp&quot;</span> // è¿è¡Œæ¨¡å¼</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="æœåŠ¡å¯åŠ¨"><a href="#æœåŠ¡å¯åŠ¨" class="headerlink" title="æœåŠ¡å¯åŠ¨"></a>æœåŠ¡å¯åŠ¨</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// åŠ è½½é…ç½®å¯åŠ¨æœåŠ¡</span><br><span class="line">$ sudo ssserver -c /etc/shadowsocks/shadowsocks.json -d start</span><br><span class="line">æˆ–</span><br><span class="line">$ sudo ssserver -s 0.0.0.0 -p 443 -k password -m rc4-md5 -t 300 --user nobody -d start</span><br><span class="line"></span><br><span class="line">// åå°ä¸€ç›´è¿è¡Œ Shadowsocks æœåŠ¡</span><br><span class="line">$ sudo nohup ssserver -c /etc/shadowsocks/shadowsocks.json &gt; /dev/null 2&gt;&amp;1 &amp;</span><br><span class="line"></span><br><span class="line">// åœæ­¢æœåŠ¡</span><br><span class="line">$ sudo ssserver -d stop</span><br><span class="line"></span><br><span class="line">// æŸ¥çœ‹æ—¥å¿—</span><br><span class="line">$ cat /var/<span class="built_in">log</span>/shadowsocks.log</span><br></pre></td></tr></table></figure>
<h2 id="å¼€æœºå¯åŠ¨é…ç½®"><a href="#å¼€æœºå¯åŠ¨é…ç½®" class="headerlink" title="å¼€æœºå¯åŠ¨é…ç½®"></a>å¼€æœºå¯åŠ¨é…ç½®</h2><h3 id="é…ç½®æ–‡ä»¶"><a href="#é…ç½®æ–‡ä»¶" class="headerlink" title="é…ç½®æ–‡ä»¶"></a>é…ç½®æ–‡ä»¶</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// åœ¨ /lib/systemd/system ä¸‹åˆ›å»ºæ–‡ä»¶å¹¶ç²˜è´´å¦‚ä¸‹å†…å®¹</span><br><span class="line">$ sudo vim /lib/systemd/system/shadowsocks.service</span><br><span class="line">[Unit]</span><br><span class="line">Description=Shadowsocks Server</span><br><span class="line">After=network.target</span><br><span class="line"></span><br><span class="line">[Service]</span><br><span class="line">ExecStart=/usr/<span class="built_in">local</span>/bin/ssserver -c /etc/shadowsocks/shadowsocks.json</span><br><span class="line">Restart=on-abort</span><br><span class="line"></span><br><span class="line">[Install]</span><br><span class="line">WantedBy=multi-user.target</span><br></pre></td></tr></table></figure>
<h3 id="è®¾ç½®å¯åŠ¨"><a href="#è®¾ç½®å¯åŠ¨" class="headerlink" title="è®¾ç½®å¯åŠ¨"></a>è®¾ç½®å¯åŠ¨</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// è®¾ç½®å¼€æœºå¯åŠ¨</span><br><span class="line">$ sudo systemctl <span class="built_in">enable</span> shadowsocks.service</span><br><span class="line"></span><br><span class="line">// å¯åŠ¨</span><br><span class="line">$ sudo systemctl start shadowsocks.service</span><br><span class="line"></span><br><span class="line">// çŠ¶æ€</span><br><span class="line">$ sudo systemctl status shadowsocks.service</span><br><span class="line">â— shadowsocks.service - Shadowsocks Server</span><br><span class="line">   Loaded: loaded (/lib/systemd/system/shadowsocks.service; enabled; vendor preset: enabled)</span><br><span class="line">   Active: active (running) since Tue 2019-01-01 21:45:35 EST; 48min ago</span><br><span class="line"> Main PID: 446 (ssserver)</span><br><span class="line">    Tasks: 1 (<span class="built_in">limit</span>: 1175)</span><br><span class="line">   CGroup: /system.slice/shadowsocks.service</span><br><span class="line">           â””â”€446 /usr/bin/python3 /usr/<span class="built_in">local</span>/bin/ssserver -c /etc/shadowsocks/shadowsocks.json</span><br><span class="line"></span><br><span class="line">// é‡å¯</span><br><span class="line">$ sudo systemctl restart shadowsocks.service</span><br><span class="line"></span><br><span class="line">// åœæ­¢</span><br><span class="line">$ sudo systemctl stop shadowsocks.service</span><br></pre></td></tr></table></figure>
<h1 id="å®¢æˆ·ç«¯"><a href="#å®¢æˆ·ç«¯" class="headerlink" title="å®¢æˆ·ç«¯"></a>å®¢æˆ·ç«¯</h1><h2 id="å®¢æˆ·ç«¯å®‰è£…"><a href="#å®¢æˆ·ç«¯å®‰è£…" class="headerlink" title="å®¢æˆ·ç«¯å®‰è£…"></a>å®¢æˆ·ç«¯å®‰è£…</h2><p><a href="https://shadowsocks.org/en/download/clients.html">ä¸‹è½½å¯¹åº”å¹³å°çš„å®‰è£…åŒ…å®‰è£…å³å¯</a></p>
<h2 id="å®¢æˆ·ç«¯é…ç½®"><a href="#å®¢æˆ·ç«¯é…ç½®" class="headerlink" title="å®¢æˆ·ç«¯é…ç½®"></a>å®¢æˆ·ç«¯é…ç½®</h2><p><img src="https://inotes.oss-cn-beijing.aliyuncs.com/linux/201901/shadowsocks-client-config.png" alt="shadowsocks-client-config.png"></p>
<h1 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h1><ul>
<li><a href="https://wiki.archlinux.org/index.php/Shadowsocks_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87">Shadowsocks (ç®€ä½“ä¸­æ–‡)</a>)</li>
<li><a href="https://leihungjyu.com/post/ubuntu-install-shadowsocks.html">Ubuntu 18.04å®‰è£…é…ç½®Shadowsockså®ç°ç§‘å­¦ä¸Šç½‘</a></li>
</ul>
]]></content>
      <categories>
        <category>linux</category>
      </categories>
      <tags>
        <tag>linux</tag>
        <tag>ubuntu</tag>
      </tags>
  </entry>
  <entry>
    <title>Mac å®ç”¨å‘½ä»¤æ”¶é›†äºŒ</title>
    <url>/2019/02/05/mac-common-commands-2/</url>
    <content><![CDATA[<p><img src="/images/2019/201908181828.jpg" alt="201908181828.jpg"></p>
<p>ğŸ˜­ è®°å½•ä¸€äº›ç»ˆç«¯ä¸­çš„æŠ€å·§å’Œå‘½ä»¤ï¼Œé‰´äºç»å¸¸ä½¿ç”¨ç»ˆç«¯ï¼Œåœ¨æŸä¸ªä¸ç»æ„çš„ç¬é—´å¿˜è®°äº†ã€è¿˜æœ‰è¿™ç§æ“ä½œã€ï¼Œç‰¹æ­¤è®°å½•ä»¥é£¨è‡ªå·±ã€‚</p>
<span id="more"></span>
<h2 id="ç§»é™¤æ‰“å¼€ç»ˆç«¯æ—¶çš„æç¤ºè¯­"><a href="#ç§»é™¤æ‰“å¼€ç»ˆç«¯æ—¶çš„æç¤ºè¯­" class="headerlink" title="ç§»é™¤æ‰“å¼€ç»ˆç«¯æ—¶çš„æç¤ºè¯­"></a>ç§»é™¤æ‰“å¼€ç»ˆç«¯æ—¶çš„æç¤ºè¯­</h2><ul>
<li><a href="http://osxdaily.com/2010/06/22/remove-the-last-login-message-from-the-terminal/">Remove theã€Last loginã€Message from the Terminal</a></li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// åˆ›å»º .hushlogin æ–‡ä»¶</span><br><span class="line">$ touch .hushlogin</span><br></pre></td></tr></table></figure>
<h2 id="ç»ˆç«¯ä¸­ä½¿ç”¨-telnet"><a href="#ç»ˆç«¯ä¸­ä½¿ç”¨-telnet" class="headerlink" title="ç»ˆç«¯ä¸­ä½¿ç”¨ telnet"></a>ç»ˆç«¯ä¸­ä½¿ç”¨ telnet</h2><ul>
<li><a href="http://osxdaily.com/2018/07/18/get-telnet-macos/">How to Get Telnet for MacOS in Mojave or High Sierra</a></li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// å®‰è£… telnet</span><br><span class="line">$ brew install telnet</span><br></pre></td></tr></table></figure>
<h2 id="ç»ˆç«¯ä¸­ä½¿ç”¨ä¸Šä¼ ä¸‹è½½"><a href="#ç»ˆç«¯ä¸­ä½¿ç”¨ä¸Šä¼ ä¸‹è½½" class="headerlink" title="ç»ˆç«¯ä¸­ä½¿ç”¨ä¸Šä¼ ä¸‹è½½"></a>ç»ˆç«¯ä¸­ä½¿ç”¨ä¸Šä¼ ä¸‹è½½</h2><ul>
<li><a href="https://gist.github.com/meowoodie/4bcf6d6ae81727b618bf">Set rz and sz on Mac</a></li>
<li><a href="https://www.jianshu.com/p/dd30b1fb31c3">macOS ä¸­ä½¿ç”¨ rzã€sz ä¼ è¾“æ–‡ä»¶</a></li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// å®‰è£… lrzsz</span><br><span class="line">$ brew install lrzsz</span><br></pre></td></tr></table></figure>
<h2 id="æ£€ç´¢æ–‡ä»¶"><a href="#æ£€ç´¢æ–‡ä»¶" class="headerlink" title="æ£€ç´¢æ–‡ä»¶"></a>æ£€ç´¢æ–‡ä»¶</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// æ›´æ–°ç´¢å¼•</span><br><span class="line">$ sudo /usr/libexec/locate.updatedb</span><br><span class="line"></span><br><span class="line">// æ£€ç´¢æ–‡ä»¶</span><br><span class="line">$ locate xxx.xxx</span><br></pre></td></tr></table></figure>
<h2 id="masOS-VSCode-Vim-æ¨¡å¼æ— æ³•æŒç»­æŒ‰é”®"><a href="#masOS-VSCode-Vim-æ¨¡å¼æ— æ³•æŒç»­æŒ‰é”®" class="headerlink" title="masOS VSCode Vim æ¨¡å¼æ— æ³•æŒç»­æŒ‰é”®"></a>masOS VSCode Vim æ¨¡å¼æ— æ³•æŒç»­æŒ‰é”®</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// For VSCode</span><br><span class="line">$ defaults write com.microsoft.VSCode ApplePressAndHoldEnabled -bool <span class="literal">false</span></span><br><span class="line"></span><br><span class="line">// For VSCode Insiders</span><br><span class="line">$ defaults write com.microsoft.VSCodeInsiders ApplePressAndHoldEnabled -bool <span class="literal">false</span></span><br><span class="line"></span><br><span class="line">// For VSCodium</span><br><span class="line">$ defaults write com.visualstudio.code.oss ApplePressAndHoldEnabled -bool <span class="literal">false</span></span><br><span class="line"></span><br><span class="line">// To <span class="built_in">enable</span> global key-repeat</span><br><span class="line">// this is helpful <span class="keyword">if</span> you\<span class="string">&#x27;re using Vim in a PWA like code-server</span></span><br><span class="line"><span class="string">$ defaults write -g ApplePressAndHoldEnabled -bool false</span></span><br><span class="line"><span class="string">OR</span></span><br><span class="line"><span class="string">$ defaults delete -g ApplePressAndHoldEnabled</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">// æŸ¥çœ‹å¯¹ com.microsoft.VSCode çš„è®¾ç½®</span></span><br><span class="line"><span class="string">$ defaults read com.microsoft.VSCode ApplePressAndHoldEnabled</span></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>mac</category>
      </categories>
      <tags>
        <tag>mac</tag>
      </tags>
  </entry>
  <entry>
    <title>Mac å®ç”¨å‘½ä»¤æ”¶é›†ä¸€</title>
    <url>/2019/02/04/mac-common-commands-1/</url>
    <content><![CDATA[<p><img src="/images/2019/201908181800.jpg" alt="201908181800.jpg"></p>
<p>ğŸ™ã€åƒé‡Œä¹‹è¡Œï¼Œå§‹äºè¶³ä¸‹ã€ï¼ŒæŒæ¡é«˜é¢‘ä½¿ç”¨çš„å‘½ä»¤ä¹Ÿä¸ä¾‹å¤–ã€‚ç§¯é“¢ç´¯å¯¸ï¼Œæ€»æœ‰ä¸€å¤©ï¼Œä½ ç»ˆä¼šåœ¨å‘½ä»¤è¡Œä¸­æ¸¸åˆƒæœ‰ä½™ã€‚</p>
<span id="more"></span>
<h2 id="è®©ç»ˆç«¯è¯´è‹±è¯­"><a href="#è®©ç»ˆç«¯è¯´è‹±è¯­" class="headerlink" title="è®©ç»ˆç«¯è¯´è‹±è¯­"></a>è®©ç»ˆç«¯è¯´è‹±è¯­</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ say hello</span><br><span class="line"></span><br><span class="line">// è®©ç¨‹åºæ‰§è¡Œå®Œäº†è¯´ä¸€å£°</span><br><span class="line">$ sleep 5 &amp;&amp; say <span class="string">&quot;this is a test&quot;</span></span><br></pre></td></tr></table></figure>
<h2 id="æ ‡è®°æ–‡ä»¶æˆ–è€…æ–‡ä»¶å¤¹ï¼Œç”¨-Spotlight-æ‰“å¼€"><a href="#æ ‡è®°æ–‡ä»¶æˆ–è€…æ–‡ä»¶å¤¹ï¼Œç”¨-Spotlight-æ‰“å¼€" class="headerlink" title="æ ‡è®°æ–‡ä»¶æˆ–è€…æ–‡ä»¶å¤¹ï¼Œç”¨ Spotlight æ‰“å¼€"></a>æ ‡è®°æ–‡ä»¶æˆ–è€…æ–‡ä»¶å¤¹ï¼Œç”¨ <code>Spotlight</code> æ‰“å¼€</h2><p>é€‰ä¸­ä¸€ä¸ªæ–‡ä»¶æˆ–è€…æ–‡ä»¶å¤¹ï¼Œ<code>Command+I</code> æ‰“å¼€ç®€ä»‹ï¼Œåœ¨æ·»åŠ æ ‡è®°ä¸­è¾“å…¥å…³é”®è¯ï¼Œå…³é—­ç®€ä»‹çª—å£ã€‚æ‰“å¼€ <code>Spotlight</code> è¾“å…¥åˆšæ‰çš„å…³é”®è¯ï¼Œå¯ä»¥å‡†ç¡®å®šä½</p>
<h2 id="ä½¿ç”¨-sips-å‘½ä»¤æ‰¹é‡å¤„ç†å›¾ç‰‡"><a href="#ä½¿ç”¨-sips-å‘½ä»¤æ‰¹é‡å¤„ç†å›¾ç‰‡" class="headerlink" title="ä½¿ç”¨ sips å‘½ä»¤æ‰¹é‡å¤„ç†å›¾ç‰‡"></a>ä½¿ç”¨ <code>sips</code> å‘½ä»¤æ‰¹é‡å¤„ç†å›¾ç‰‡</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// å°†å›¾ç‰‡å®½åº¦ç¼©å°ä¸º 800pxï¼Œé«˜åº¦æŒ‰æ¯”ä¾‹ç¼©æ”¾</span><br><span class="line">$ sips -Z 800 ~/001.jpg</span><br><span class="line"></span><br><span class="line">// é¡ºæ—¶é’ˆæ—‹è½¬ 90 åº¦</span><br><span class="line">$ sips -r 90 ~/001.jpg</span><br><span class="line"></span><br><span class="line">// å‚ç›´åè½¬</span><br><span class="line">$ sips -f vertical ~/001.jpg</span><br></pre></td></tr></table></figure>
<h2 id="æŠŠå½“å‰ç½‘é¡µé™„åŠ åˆ°å¾…å‘é€é‚®ä»¶ä¸­"><a href="#æŠŠå½“å‰ç½‘é¡µé™„åŠ åˆ°å¾…å‘é€é‚®ä»¶ä¸­" class="headerlink" title="æŠŠå½“å‰ç½‘é¡µé™„åŠ åˆ°å¾…å‘é€é‚®ä»¶ä¸­"></a>æŠŠå½“å‰ç½‘é¡µé™„åŠ åˆ°å¾…å‘é€é‚®ä»¶ä¸­</h2><p>åœ¨ <code>Safari</code> æµè§ˆå™¨ä¸­æµè§ˆç½‘é¡µæ—¶ï¼Œé€šè¿‡ <code>Command+I</code> å¯ä»¥ç›´æ¥æ‰“å¼€é‚®ä»¶å¹¶æŠŠå½“å‰ç½‘é¡µé™„åŠ åˆ°å¾…å‘é€çš„é‚®ä»¶ä¸­</p>
<h2 id="åˆ é™¤æ–‡ä»¶å’Œæ¸…ç©ºçº¸ç¯“"><a href="#åˆ é™¤æ–‡ä»¶å’Œæ¸…ç©ºçº¸ç¯“" class="headerlink" title="åˆ é™¤æ–‡ä»¶å’Œæ¸…ç©ºçº¸ç¯“"></a>åˆ é™¤æ–‡ä»¶å’Œæ¸…ç©ºçº¸ç¯“</h2><p>åˆ é™¤æ–‡ä»¶ï¼š<code>Command+Delete</code><br>å½»åº•åˆ é™¤ï¼š<code>Command+Alt+Delete</code></p>
<h2 id="å®‰è£…-Go2Shellï¼Œå¿«é€Ÿåœ¨å½“å‰ç›®å½•æ‰“å¼€ç»ˆç«¯çš„å·¥å…·"><a href="#å®‰è£…-Go2Shellï¼Œå¿«é€Ÿåœ¨å½“å‰ç›®å½•æ‰“å¼€ç»ˆç«¯çš„å·¥å…·" class="headerlink" title="å®‰è£… Go2Shellï¼Œå¿«é€Ÿåœ¨å½“å‰ç›®å½•æ‰“å¼€ç»ˆç«¯çš„å·¥å…·"></a>å®‰è£… <code>Go2Shell</code>ï¼Œå¿«é€Ÿåœ¨å½“å‰ç›®å½•æ‰“å¼€ç»ˆç«¯çš„å·¥å…·</h2><blockquote>
<p>é»˜è®¤æƒ…å†µä¸‹æ˜¯æ‰“å¼€ç³»ç»Ÿç»ˆç«¯ï¼Œè¿™é‡Œé…ç½®æˆç”¨ <code>iTerm2</code> æ‰“å¼€ç»ˆç«¯</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ open -a Go2Shell --args config</span><br></pre></td></tr></table></figure>
<h2 id="ä¿®æ”¹ç»ˆç«¯ç”µè„‘åç§°"><a href="#ä¿®æ”¹ç»ˆç«¯ç”µè„‘åç§°" class="headerlink" title="ä¿®æ”¹ç»ˆç«¯ç”µè„‘åç§°"></a>ä¿®æ”¹ç»ˆç«¯ç”µè„‘åç§°</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ sudo scutil --<span class="built_in">set</span> HostName your-host-name</span><br><span class="line">$ hostname // æŸ¥çœ‹ `hostname`</span><br></pre></td></tr></table></figure>
<h2 id="å¿«é€Ÿå¤åˆ¶å’Œç²˜è´´"><a href="#å¿«é€Ÿå¤åˆ¶å’Œç²˜è´´" class="headerlink" title="å¿«é€Ÿå¤åˆ¶å’Œç²˜è´´"></a>å¿«é€Ÿå¤åˆ¶å’Œç²˜è´´</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// å°†åˆ—å‡ºçš„ä¸»ç›®å½•å¤åˆ¶åˆ°å‰ªè´´æ¿</span><br><span class="line">$ ls ~ | pbcopy</span><br><span class="line"></span><br><span class="line">// æ–‡ä»¶çš„å†…å®¹è¯»å…¥å‰ªè´´æ¿</span><br><span class="line">$ pbcopy &lt; ~/.zshrc</span><br><span class="line"></span><br><span class="line">// å°†å‰ªè´´æ¿çš„å†…å®¹å†™å…¥åˆ°æ–‡ä»¶ä¸­</span><br><span class="line">$ pbpaste &gt;&gt; ~/demo.php</span><br></pre></td></tr></table></figure>
<h2 id="æ‰¾å›ä»»ä½•æ¥æºé€‰é¡¹"><a href="#æ‰¾å›ä»»ä½•æ¥æºé€‰é¡¹" class="headerlink" title="æ‰¾å›ä»»ä½•æ¥æºé€‰é¡¹"></a>æ‰¾å›ä»»ä½•æ¥æºé€‰é¡¹</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// æ‰¾å›å®‰å…¨ä¸éšç§ä¸­çš„ä¿¡ä»» <span class="string">&quot;ä»»ä½•æ¥æº&quot;</span> é€‰é¡¹</span><br><span class="line">$ sudo spctl --master-disable</span><br></pre></td></tr></table></figure>
<h2 id="å¿«é€ŸæŸ¥çœ‹æ—¥å†"><a href="#å¿«é€ŸæŸ¥çœ‹æ—¥å†" class="headerlink" title="å¿«é€ŸæŸ¥çœ‹æ—¥å†"></a>å¿«é€ŸæŸ¥çœ‹æ—¥å†</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ cal</span><br><span class="line">æˆ–</span><br><span class="line">$ cal 2018</span><br></pre></td></tr></table></figure>
<h2 id="Xcode-Command-Line-Tools"><a href="#Xcode-Command-Line-Tools" class="headerlink" title="Xcode Command Line Tools"></a>Xcode Command Line Tools</h2><h3 id="æ£€æŸ¥-Xcode-å®‰è£…åŒ…æ˜¯å¦å·²ç»è¢«å®‰è£…"><a href="#æ£€æŸ¥-Xcode-å®‰è£…åŒ…æ˜¯å¦å·²ç»è¢«å®‰è£…" class="headerlink" title="æ£€æŸ¥ Xcode å®‰è£…åŒ…æ˜¯å¦å·²ç»è¢«å®‰è£…"></a>æ£€æŸ¥ <code>Xcode</code> å®‰è£…åŒ…æ˜¯å¦å·²ç»è¢«å®‰è£…</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ xcode-select -p</span><br></pre></td></tr></table></figure>
<h3 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ xcode-select --install</span><br></pre></td></tr></table></figure>
<h2 id="Mac-çš„å¯åŠ¨ç»„åˆé”®"><a href="#Mac-çš„å¯åŠ¨ç»„åˆé”®" class="headerlink" title="Mac çš„å¯åŠ¨ç»„åˆé”®"></a>Mac çš„å¯åŠ¨ç»„åˆé”®</h2><blockquote>
<p>è¿™äº›ç»„åˆé”®é€‚ç”¨äº<a href="https://support.apple.com/zh-cn/HT201580">åŸºäº Intel çš„ Mac ç”µè„‘</a>ã€‚åœ¨ Mac å¯åŠ¨åï¼Œå¯ä»¥ä½¿ç”¨å…¶ä»– Mac é”®ç›˜å¿«æ·é”®</p>
</blockquote>
<table>
<thead>
<tr>
<th>å¿«æ·é”®</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>Shift (â‡§)</code></td>
<td>ä»¥<a href="https://support.apple.com/zh-cn/HT201262">å®‰å…¨æ¨¡å¼</a>å¯åŠ¨</td>
</tr>
<tr>
<td><code>Option (âŒ¥)</code></td>
<td>å¯åŠ¨è¿›å…¥<a href="https://support.apple.com/zh-cn/HT202796">å¯åŠ¨ç®¡ç†å™¨</a></td>
</tr>
<tr>
<td><code>D</code></td>
<td>ä»å†…å»ºçš„ <code>Apple Hardware Test</code> æˆ– <code>Apple Diagnostics</code> å®ç”¨å·¥å…·å¯åŠ¨ï¼Œå…·ä½“å–å†³äº <code>Mac</code> æœºå‹</td>
</tr>
<tr>
<td><code>N</code></td>
<td>ä»å…¼å®¹çš„ <code>NetBoot</code> æœåŠ¡å™¨ï¼ˆè‹¥å¯ç”¨ï¼‰å¯åŠ¨ã€‚è¦ä½¿ç”¨ <code>NetBoot</code> æœåŠ¡å™¨ä¸Šé»˜è®¤çš„å¼•å¯¼æ˜ åƒï¼Œåˆ™è¯·æŒ‰ä½ <code>Option-N</code></td>
</tr>
<tr>
<td><code>Command+R</code></td>
<td>ä»å†…å»ºçš„ <a href="https://support.apple.com/zh-cn/HT201314"><code>macOS</code> æ¢å¤</a>ç³»ç»Ÿå¯åŠ¨ã€‚æˆ–è€…å¯ä»¥ä½¿ç”¨ <code>Option+Command+R</code> æˆ– <code>Shift+Option+Command+R</code> ä»¥é€šè¿‡äº’è”ç½‘ä» <code>macOS</code> æ¢å¤åŠŸèƒ½å¯åŠ¨</td>
</tr>
<tr>
<td><code>Option+Command+P+R</code></td>
<td><a href="https://support.apple.com/zh-cn/HT204063">é‡ç½® <code>NVRAM</code></a>ï¼ˆæˆ– <code>PRAM</code>ï¼‰</td>
</tr>
<tr>
<td><code>Command+S</code></td>
<td>ä»¥<a href="https://support.apple.com/zh-cn/HT201573">å•ç”¨æˆ·æ¨¡å¼</a>å¯åŠ¨</td>
</tr>
<tr>
<td><code>T</code></td>
<td>ä»¥<a href="https://support.apple.com/zh-cn/HT201462">ç›®æ ‡ç£ç›˜æ¨¡å¼</a>å¯åŠ¨</td>
</tr>
<tr>
<td><code>Command+V</code></td>
<td>ä»¥<a href="https://support.apple.com/zh-cn/HT201573">è¯¦ç»†æ¨¡å¼</a>å¯åŠ¨</td>
</tr>
<tr>
<td>æ¨å‡ºé”® (â)ã€F12ã€é¼ æ ‡é”®æˆ–è§¦æ§æ¿æŒ‰é’®</td>
<td>æ¨å‡ºå¯ç§»åŠ¨ä»‹è´¨</td>
</tr>
</tbody>
</table>
<p>æœªå®Œå¾…ç»­â€¦â€¦</p>
]]></content>
      <categories>
        <category>mac</category>
      </categories>
      <tags>
        <tag>mac</tag>
      </tags>
  </entry>
  <entry>
    <title>Mac ç¼ºå¤±çš„åŒ…ç®¡ç† Homebrew</title>
    <url>/2018/01/26/mac-homebrew/</url>
    <content><![CDATA[<p>å®˜æ–¹çš„è¯´æ³•æ˜¯ <code>macOS</code> ç¼ºå¤±çš„è½¯ä»¶åŒ…ç®¡ç†å™¨ï¼Œä¸ªäººè®¤ä¸ºè¿™ä¹Ÿè®¸æ˜¯ <code>macOS</code> ä¸Šæœ€å¥½çš„åŒ…ç®¡ç†å™¨ã€‚</p>
<h2 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h2><blockquote>
<ul>
<li><a href="https://brew.sh/">Homebrew Website</a></li>
<li><a href="https://github.com/Homebrew/brew/">Homebrew Github</a></li>
<li><a href="https://docs.brew.sh/">Homebrew Documentation</a></li>
</ul>
</blockquote>
<p>The missing package manager for macOS.</p>
<h2 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ /usr/bin/ruby -e <span class="string">&quot;<span class="subst">$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)</span>&quot;</span></span><br></pre></td></tr></table></figure>
<h2 id="å¸è½½"><a href="#å¸è½½" class="headerlink" title="å¸è½½"></a>å¸è½½</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ ruby -e <span class="string">&quot;<span class="subst">$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/uninstall)</span>&quot;</span></span><br></pre></td></tr></table></figure>
<p>å½“ç„¶ä¹Ÿå¯ä»¥ä¸‹è½½ <a href="https://raw.githubusercontent.com/Homebrew/install/master/uninstall">å¸è½½è„šæœ¬</a>ï¼Œç„¶åè¿è¡Œ <code>./uninstall --help</code> å»æŸ¥çœ‹æ›´å¤šå¸è½½é€‰é¡¹ã€‚</p>
<h2 id="æ›´æ–°å…¬å¼"><a href="#æ›´æ–°å…¬å¼" class="headerlink" title="æ›´æ–°å…¬å¼"></a>æ›´æ–°å…¬å¼</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">brew update</span><br></pre></td></tr></table></figure>
<h2 id="å…¶å®ƒæ“ä½œ"><a href="#å…¶å®ƒæ“ä½œ" class="headerlink" title="å…¶å®ƒæ“ä½œ"></a>å…¶å®ƒæ“ä½œ</h2><h3 id="æŸ¥æ‰¾è¿‡æœŸçš„åŒ…"><a href="#æŸ¥æ‰¾è¿‡æœŸçš„åŒ…" class="headerlink" title="æŸ¥æ‰¾è¿‡æœŸçš„åŒ…"></a>æŸ¥æ‰¾è¿‡æœŸçš„åŒ…</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ brew outdated</span><br></pre></td></tr></table></figure>
<h3 id="å‡çº§åŒ…"><a href="#å‡çº§åŒ…" class="headerlink" title="å‡çº§åŒ…"></a>å‡çº§åŒ…</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// å‡çº§æ‰€æœ‰çš„åŒ…</span><br><span class="line">$ brew upgrade</span><br><span class="line">or</span><br><span class="line">// å‡çº§æŒ‡å®šçš„åŒ…</span><br><span class="line">$ brew upgrade &lt;formula&gt;</span><br></pre></td></tr></table></figure>
<h3 id="å®‰è£…æŸä¸ªåŒ…"><a href="#å®‰è£…æŸä¸ªåŒ…" class="headerlink" title="å®‰è£…æŸä¸ªåŒ…"></a>å®‰è£…æŸä¸ªåŒ…</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ brew install &lt;formula&gt;</span><br></pre></td></tr></table></figure>
<h3 id="å¸è½½æŸä¸ªåŒ…"><a href="#å¸è½½æŸä¸ªåŒ…" class="headerlink" title="å¸è½½æŸä¸ªåŒ…"></a>å¸è½½æŸä¸ªåŒ…</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ brew uninstall &lt;formula&gt;</span><br></pre></td></tr></table></figure>
<h3 id="æ¸…ç†"><a href="#æ¸…ç†" class="headerlink" title="æ¸…ç†"></a>æ¸…ç†</h3><blockquote>
<p>By default, Homebrew does not uninstall old versions of a formula, so over time you will accumulate old versions.</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// æ¸…ç†æŒ‡å®šçš„åŒ…</span><br><span class="line">$ brew cleanup &lt;formula&gt;</span><br><span class="line">or</span><br><span class="line">// æ¸…é™æ‰€æœ‰çš„åŒ…</span><br><span class="line">$ brew cleanup</span><br></pre></td></tr></table></figure>
<h3 id="ç ´åçš„é“¾æ¥æ¸…é™¤"><a href="#ç ´åçš„é“¾æ¥æ¸…é™¤" class="headerlink" title="ç ´åçš„é“¾æ¥æ¸…é™¤"></a>ç ´åçš„é“¾æ¥æ¸…é™¤</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ brew prune</span><br></pre></td></tr></table></figure>
<h3 id="å¿«é€Ÿé¢„è§ˆæ–‡ä»¶å†…å®¹æ’ä»¶"><a href="#å¿«é€Ÿé¢„è§ˆæ–‡ä»¶å†…å®¹æ’ä»¶" class="headerlink" title="å¿«é€Ÿé¢„è§ˆæ–‡ä»¶å†…å®¹æ’ä»¶"></a>å¿«é€Ÿé¢„è§ˆæ–‡ä»¶å†…å®¹æ’ä»¶</h3><blockquote>
<p><a href="https://github.com/sindresorhus/quick-look-plugins">Quick Look plugins</a></p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ brew cask install qlcolorcode qlstephen qlmarkdown quicklook-json qlprettypatch quicklook-csv betterzipql qlimagesize webpquicklook suspicious-package</span><br></pre></td></tr></table></figure>
<h3 id="ä¸èƒ½æ›´æ–°çš„é—®é¢˜"><a href="#ä¸èƒ½æ›´æ–°çš„é—®é¢˜" class="headerlink" title="ä¸èƒ½æ›´æ–°çš„é—®é¢˜"></a>ä¸èƒ½æ›´æ–°çš„é—®é¢˜</h3><p>Cannot â€œbrew updateâ€ anymore</p>
<blockquote>
<p><a href="https://github.com/Homebrew/legacy-homebrew/issues/11448">fails to git pull formulas</a></p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> `brew --prefix`</span><br><span class="line">$ git remote add origin https://github.com/mxcl/homebrew.git</span><br><span class="line">$ git fetch origin</span><br><span class="line">$ git reset --hard origin/master</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>mac</category>
      </categories>
      <tags>
        <tag>mac</tag>
      </tags>
  </entry>
  <entry>
    <title>Mac æ‰“é€  PHP å¼€å‘ç¯å¢ƒ</title>
    <url>/2018/01/21/mac-mnmp/</url>
    <content><![CDATA[<h2 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h2><blockquote>
<p><code>MNMP</code> æ˜¯ <code>macOS</code>, <code>Nginx</code>, <code>MySQL</code>, <code>PHP</code> ç»„åˆå¼€å‘ç¯å¢ƒçš„ç®€ç§°</p>
</blockquote>
<h2 id="Mac-å‡†å¤‡"><a href="#Mac-å‡†å¤‡" class="headerlink" title="Mac å‡†å¤‡"></a><code>Mac</code> å‡†å¤‡</h2><blockquote>
<p>è¯·å…ˆå®‰è£… <a href="https://brew.sh/"><code>Homebrew - The missing package manager for macOS</code></a></p>
</blockquote>
<h3 id="æ—§çš„å®‰è£…æ–¹å¼"><a href="#æ—§çš„å®‰è£…æ–¹å¼" class="headerlink" title="æ—§çš„å®‰è£…æ–¹å¼"></a>æ—§çš„å®‰è£…æ–¹å¼</h3><blockquote>
<p><a href="https://github.com/Homebrew/homebrew-php/issues/4721">Homebrew/php deprecation #4721</a></p>
</blockquote>
<p>è¿™ç§å®‰è£…æ–¹å¼å·²ç»ä¸è¢«æ¨èï¼Œç›¸å…³çš„ <code>Formula</code> å·²ç»è¢«è¿ç§»åˆ° <a href="https://github.com/Homebrew/homebrew-core">homebrew-core</a> ä¸‹</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ brew tap homebrew/dupes</span><br><span class="line">$ brew tap homebrew/versions</span><br><span class="line">$ brew tap homebrew/php</span><br><span class="line">$ brew tap homebrew/homebrew-php</span><br></pre></td></tr></table></figure>
<h3 id="æ–°çš„å®‰è£…æ–¹å¼"><a href="#æ–°çš„å®‰è£…æ–¹å¼" class="headerlink" title="æ–°çš„å®‰è£…æ–¹å¼"></a>æ–°çš„å®‰è£…æ–¹å¼</h3><blockquote>
<p><a href="https://github.com/Homebrew/homebrew-core/pull/16067">php: import from homebrew/php #16067</a></p>
</blockquote>
<ul>
<li>é»˜è®¤äº†ä¸€äº›å¿…è¦çš„æ‰©å±•ï¼ˆ<code>opcache/openssl</code> ç­‰ï¼‰</li>
<li>å…¶å®ƒæ‰©å±•é€šè¿‡ <code>pecl</code> å»å®‰è£…</li>
</ul>
<h2 id="Nginx-å®‰è£…"><a href="#Nginx-å®‰è£…" class="headerlink" title="Nginx å®‰è£…"></a><code>Nginx</code> å®‰è£…</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ brew info nginx</span><br><span class="line">$ brew install nginx</span><br></pre></td></tr></table></figure>
<h3 id="æ“ä½œ"><a href="#æ“ä½œ" class="headerlink" title="æ“ä½œ"></a>æ“ä½œ</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ sudo brew services start nginx</span><br><span class="line">$ sudo brew services restart nginx</span><br><span class="line">$ sudo brew services stop nginx</span><br></pre></td></tr></table></figure>
<h3 id="å¼€æœºè¿è¡Œ"><a href="#å¼€æœºè¿è¡Œ" class="headerlink" title="å¼€æœºè¿è¡Œ"></a>å¼€æœºè¿è¡Œ</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ cp /usr/<span class="built_in">local</span>/opt/nginx/homebrew.mxcl.nginx.plist ~/Library/LaunchAgents/</span><br><span class="line">$ launchctl load -w ~/Library/LaunchAgents/homebrew.mxcl.nginx.plist</span><br></pre></td></tr></table></figure>
<h3 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h3><blockquote>
<ul>
<li><a href="https://www.nginx.com/resources/wiki/start/topics/examples/full/">Full Example Configuration</a></li>
</ul>
</blockquote>
<h2 id="MySQL-å®‰è£…"><a href="#MySQL-å®‰è£…" class="headerlink" title="MySQL å®‰è£…"></a><code>MySQL</code> å®‰è£…</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ brew install mysql</span><br><span class="line">$ <span class="built_in">unset</span> TMPDIR</span><br><span class="line">$ mysqld --initialize-insecure --explicit_defaults_for_timestamp=1 --user=`whoami` --basedir=<span class="string">&quot;<span class="subst">$(brew --prefix mysql)</span>&quot;</span> --datadir=/usr/<span class="built_in">local</span>/var/mysql --tmpdir=/tmp</span><br><span class="line">$ mysql_secure_installation</span><br></pre></td></tr></table></figure>
<h2 id="PHP-å®‰è£…"><a href="#PHP-å®‰è£…" class="headerlink" title="PHP å®‰è£…"></a><code>PHP</code> å®‰è£…</h2><h3 id="æ—§çš„å®‰è£…æ–¹å¼-1"><a href="#æ—§çš„å®‰è£…æ–¹å¼-1" class="headerlink" title="æ—§çš„å®‰è£…æ–¹å¼"></a>æ—§çš„å®‰è£…æ–¹å¼</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ brew info php71</span><br><span class="line">$ brew install php71</span><br></pre></td></tr></table></figure>
<h3 id="æ–°çš„å®‰è£…æ–¹å¼-1"><a href="#æ–°çš„å®‰è£…æ–¹å¼-1" class="headerlink" title="æ–°çš„å®‰è£…æ–¹å¼"></a>æ–°çš„å®‰è£…æ–¹å¼</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ brew info php@7.1</span><br><span class="line">$ brew install php@7.1</span><br></pre></td></tr></table></figure>
<h3 id="PHP-FPM-Configuration-the-Listen-Directive"><a href="#PHP-FPM-Configuration-the-Listen-Directive" class="headerlink" title="PHP-FPM: Configuration the Listen Directive"></a>PHP-FPM: Configuration the Listen Directive</h3><blockquote>
<p><a href="https://serversforhackers.com/c/php-fpm-configuration-the-listen-directive">PHP-FPM: Configuration the Listen Directive</a></p>
</blockquote>
<h4 id="Unix-Sockets"><a href="#Unix-Sockets" class="headerlink" title="Unix Sockets"></a>Unix Sockets</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// www.conf</span><br><span class="line">listen = /var/run/php71-fpm.sock</span><br><span class="line">listen.owner = www-data</span><br><span class="line">listen.group = www-data</span><br><span class="line"></span><br><span class="line">// nginx.conf</span><br><span class="line">fastcgi_pass unix:/var/run/php71-fpm.sock;</span><br></pre></td></tr></table></figure>
<h4 id="TCP-Sockets"><a href="#TCP-Sockets" class="headerlink" title="TCP Sockets"></a>TCP Sockets</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// www.conf</span><br><span class="line">Listen 127.0.0.1:9000</span><br><span class="line">listen.allowed_clients = 127.0.0.1</span><br><span class="line"></span><br><span class="line">// nginx.conf</span><br><span class="line">fastcgi_pass 127.0.0.1:9000;</span><br></pre></td></tr></table></figure>
<h3 id="æ‰©å±•å®‰è£…"><a href="#æ‰©å±•å®‰è£…" class="headerlink" title="æ‰©å±•å®‰è£…"></a>æ‰©å±•å®‰è£…</h3><h4 id="æ—§çš„æ‰©å±•å®‰è£…æ–¹å¼"><a href="#æ—§çš„æ‰©å±•å®‰è£…æ–¹å¼" class="headerlink" title="æ—§çš„æ‰©å±•å®‰è£…æ–¹å¼"></a>æ—§çš„æ‰©å±•å®‰è£…æ–¹å¼</h4><ul>
<li>æ­£å¸¸æ‰©å±•çš„å®‰è£…</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// Redis</span><br><span class="line">$ brew install --HEAD homebrew/php/php71-redis</span><br><span class="line"></span><br><span class="line">// Memcached</span><br><span class="line">$ brew install --HEAD homebrew/php/php71-memcached</span><br><span class="line"></span><br><span class="line">// Opcache</span><br><span class="line">$ brew install php71-opcache</span><br><span class="line"></span><br><span class="line">// Phalcon</span><br><span class="line">$ brew install php71-phalcon</span><br><span class="line"></span><br><span class="line">// Mongodb</span><br><span class="line">$ brew install php71-mongodb</span><br></pre></td></tr></table></figure>
<ul>
<li>ç‰¹æ®Šæ‰©å±•çš„å®‰è£…</li>
</ul>
<p><code>Intl</code> æ‰©å±•å®‰è£…</p>
<blockquote>
<ul>
<li><a href="https://github.com/Homebrew/homebrew-php/issues/4386">#4386 php70-intl</a></li>
<li><a href="https://github.com/Homebrew/homebrew-php/issues/4139">#4139 php70-intl sierra bottle not installing config file</a></li>
<li><a href="https://github.com/Homebrew/homebrew-php/issues/2544">#2544 php**-intl broken after ï»¿ï»¿icu4c upgrade</a></li>
</ul>
</blockquote>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// php71</span><br><span class="line">$ brew install php71-intl</span><br><span class="line"></span><br><span class="line">// php70</span><br><span class="line">$ brew install -s php70-intl</span><br></pre></td></tr></table></figure>
<h5 id="æ–°çš„æ‰©å±•å®‰è£…æ–¹å¼"><a href="#æ–°çš„æ‰©å±•å®‰è£…æ–¹å¼" class="headerlink" title="æ–°çš„æ‰©å±•å®‰è£…æ–¹å¼"></a>æ–°çš„æ‰©å±•å®‰è£…æ–¹å¼</h5><ul>
<li>æ­£å¸¸æ‰©å±•çš„å®‰è£…</li>
</ul>
<blockquote>
<p>å¿…è¦æ˜¯è¯·ä½¿ç”¨ <code>sudo</code> æ‰§è¡Œ</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// Igbinary</span><br><span class="line">$ pecl install igbinary</span><br><span class="line"></span><br><span class="line">// Mongodb</span><br><span class="line">$ pecl install mongodb</span><br><span class="line"></span><br><span class="line">// Redis</span><br><span class="line">$ pecl install redis</span><br><span class="line"></span><br><span class="line">// Memcached</span><br><span class="line">$ pecl install memcached</span><br><span class="line"></span><br><span class="line">// Xdebug</span><br><span class="line">$ pecl install xdebug</span><br></pre></td></tr></table></figure>
<ul>
<li>ç‰¹æ®Šæ‰©å±•çš„å®‰è£…</li>
</ul>
<p><code>Phalcon</code> å®‰è£…</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ <span class="built_in">which</span> php</span><br><span class="line">$ git <span class="built_in">clone</span> https://github.com/phalcon/cphalcon</span><br><span class="line">$ <span class="built_in">cd</span> cphalcon/build/php7/64bits</span><br><span class="line">$ sudo /usr/<span class="built_in">local</span>/opt/php@7.1/bin/phpize</span><br><span class="line">$ sudo ./configure --with-php-config=/usr/<span class="built_in">local</span>/opt/php@7.1/bin/php-config</span><br><span class="line">$ <span class="built_in">cd</span> /usr/<span class="built_in">local</span>/include</span><br><span class="line">$ ls -s ../opt/openssl/include/openssl .</span><br><span class="line">$ <span class="built_in">cd</span> -</span><br><span class="line">$ sudo make</span><br><span class="line">$ sudo make install</span><br></pre></td></tr></table></figure>
<h3 id="è·¯å¾„"><a href="#è·¯å¾„" class="headerlink" title="è·¯å¾„"></a>è·¯å¾„</h3><p>å°†ç¯å¢ƒå˜é‡æ·»åŠ åˆ° <code>~/.zshrc</code> æˆ–è€… <code>~/.bashrc</code> ä¸­å¹¶è¿›è¡Œ <code>source ~/.zshrc</code> æˆ–è€… <code>source ~/.bashrc</code></p>
<h3 id="æ—§çš„è·¯å¾„"><a href="#æ—§çš„è·¯å¾„" class="headerlink" title="æ—§çš„è·¯å¾„"></a>æ—§çš„è·¯å¾„</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">export</span> PATH=<span class="string">&quot;<span class="subst">$(brew --prefix homebrew/php/php71)</span>/bin:<span class="variable">$PATH</span>&quot;</span></span><br><span class="line"><span class="built_in">export</span> PATH=<span class="string">&quot;<span class="subst">$(brew --prefix php71)</span>/sbin:<span class="variable">$PATH</span>&quot;</span></span><br></pre></td></tr></table></figure>
<h3 id="æ–°çš„è·¯å¾„"><a href="#æ–°çš„è·¯å¾„" class="headerlink" title="æ–°çš„è·¯å¾„"></a>æ–°çš„è·¯å¾„</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">export</span> PATH=<span class="string">&quot;/usr/local/opt/php@7.1/bin:<span class="variable">$PATH</span>&quot;</span></span><br><span class="line"><span class="built_in">export</span> PATH=<span class="string">&quot;/usr/local/opt/php@7.1/sbin:<span class="variable">$PATH</span>&quot;</span></span><br></pre></td></tr></table></figure>
<h3 id="æ“ä½œ-1"><a href="#æ“ä½œ-1" class="headerlink" title="æ“ä½œ"></a>æ“ä½œ</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ brew services start php71</span><br><span class="line">$ brew services restart php71</span><br><span class="line">$ brew services stop php71</span><br></pre></td></tr></table></figure>
<h3 id="å¼€æœºè¿è¡Œ-1"><a href="#å¼€æœºè¿è¡Œ-1" class="headerlink" title="å¼€æœºè¿è¡Œ"></a>å¼€æœºè¿è¡Œ</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ cp /usr/<span class="built_in">local</span>/opt/php71/homebrew.mxcl.php71.plist ~/Library/LaunchAgents/</span><br><span class="line">$ launchctl load -w ~/Library/LaunchAgents/homebrew.mxcl.php71.plist</span><br></pre></td></tr></table></figure>
<h3 id="å¤šç‰ˆæœ¬-PHP"><a href="#å¤šç‰ˆæœ¬-PHP" class="headerlink" title="å¤šç‰ˆæœ¬ PHP"></a>å¤šç‰ˆæœ¬ <code>PHP</code></h3><h4 id="å®‰è£…å¤šç‰ˆæœ¬-PHP"><a href="#å®‰è£…å¤šç‰ˆæœ¬-PHP" class="headerlink" title="å®‰è£…å¤šç‰ˆæœ¬ PHP"></a>å®‰è£…å¤šç‰ˆæœ¬ <code>PHP</code></h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ brew unlink php[55,56,70,71...]</span><br><span class="line">$ brew install php[55,56,70,71...]</span><br></pre></td></tr></table></figure>
<h4 id="åˆ‡æ¢-PHP-ç‰ˆæœ¬"><a href="#åˆ‡æ¢-PHP-ç‰ˆæœ¬" class="headerlink" title="åˆ‡æ¢ PHP ç‰ˆæœ¬"></a>åˆ‡æ¢ <code>PHP</code> ç‰ˆæœ¬</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ brew-php-switcher [55,56,70,71...] -s</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>php</category>
      </categories>
      <tags>
        <tag>php</tag>
        <tag>mnmp</tag>
      </tags>
  </entry>
  <entry>
    <title>Mac æ­å»º Homestead é›†æˆå¼€å‘ç¯å¢ƒ</title>
    <url>/2018/01/21/mac-homestead/</url>
    <content><![CDATA[<blockquote>
<ul>
<li><a href="https://laravel.com/docs/master/homestead">Homestead è‹±æ–‡å®˜ç½‘</a></li>
<li><a href="https://docs.golaravel.com/docs/5.0/homestead/">HomeStead ä¸­æ–‡ç½‘ç«™</a></li>
<li><a href="https://github.com/laravel/homestead">HomeStead GitHub</a></li>
</ul>
</blockquote>
<h1 id="ä»‹ç»"><a href="#ä»‹ç»" class="headerlink" title="ä»‹ç»"></a>ä»‹ç»</h1><p>Laravel è‡´åŠ›äºä½¿æ•´ä¸ª PHP å¼€å‘ä½“éªŒå˜å¾—æ„‰å¿«ï¼ŒåŒ…æ‹¬ä½ çš„æœ¬åœ°å¼€å‘ç¯å¢ƒã€‚<a href="https://www.vagrantup.com/"><code>Vagrant</code></a> æä¾›äº†ä¸€ä¸ªç®€å•ã€ä¼˜é›…çš„æ–¹å¼æ¥ç®¡ç†å’Œé…ç½®è™šæ‹Ÿæœºã€‚</p>
<p>Laravel Homestead æ˜¯ä¸€ä¸ªå®˜æ–¹é¢„è½½çš„ <code>Vagrant</code> ç›’å­ï¼Œæ—¨åœ¨æä¾›ä½ ä¸€ä¸ªç¾å¥½çš„å¼€å‘ç¯å¢ƒï¼Œè€Œä¸éœ€è¦åœ¨ä½ çš„æœ¬åœ°æœºå™¨ ä¸­å»å®‰è£… PHPï¼ŒWeb æœåŠ¡å™¨å’Œå…¶å®ƒä»»ä½•æœåŠ¡è½¯ä»¶ã€‚å†ä¹Ÿä¸ç”¨æ‹…å¿ƒä¼šæä¹±ä½ çš„æ“ä½œç³»ç»Ÿï¼Vagrant ç›’å­å®Œå…¨æ˜¯ä¸€æ¬¡æ€§çš„ã€‚å¦‚æœå‡ºç°é—®é¢˜ï¼Œä½ å¯ä»¥åœ¨å‡ åˆ†é’Ÿå†…é”€æ¯å¹¶é‡æ–°åˆ›å»ºå®ƒï¼</p>
<p>Homestead è¿è¡Œåœ¨ä»»ä½• Windowsï¼ŒMacï¼Œæˆ–è€… Linux ç³»ç»Ÿä¸Šï¼Œå¹¶åŒ…å« Nginx Web æœåŠ¡å™¨ï¼ŒPHP 7.2ï¼ŒPHP 7.1ï¼ŒPHP 5.6ï¼ŒMySQLï¼ŒRedisï¼ŒMemcachedï¼ŒNodeï¼Œä»¥åŠå¼€å‘ä»¤äººæƒŠå¹çš„ Laravel åº”ç”¨ç¨‹åºæ‰€éœ€çš„æ‰€æœ‰å…¶ä»–å¥½ä¸œè¥¿ã€‚</p>
<div class="note danger">
            <p>å¦‚æœä½ ä½¿ç”¨ Windowsï¼Œä½ éœ€è¦å¼€å¯ç¡¬ä»¶è™šæ‹ŸåŒ–ï¼ˆ<code>VT-x</code>ï¼‰ã€‚å®ƒé€šå¸¸æ˜¯é€šè¿‡ä½ çš„ BIOS å»å¼€å¯ã€‚å¦‚æœä½ åœ¨ä¸€ä¸ª UEFI ç³»ç»Ÿä¸Šä½¿ç”¨ Hyper-Vï¼Œä¸ºäº†è®¿é—® VT-xï¼Œä½ å¯èƒ½è¿˜éœ€è¦å»ç¦ç”¨ Hyper-Vã€‚</p>
          </div>
<h2 id="å†…ç½®è½¯ä»¶"><a href="#å†…ç½®è½¯ä»¶" class="headerlink" title="å†…ç½®è½¯ä»¶"></a>å†…ç½®è½¯ä»¶</h2><ul>
<li>Ubuntu 18.04</li>
<li>Git</li>
<li>PHP 7.2</li>
<li>PHP 7.1</li>
<li>PHP 7.0</li>
<li>PHP 5.6</li>
<li>Nginx</li>
<li>Apacheï¼ˆå¯é€‰ï¼‰</li>
<li>MySQL</li>
<li>MariaDBï¼ˆå¯é€‰ï¼‰</li>
<li>Sqlite3</li>
<li>PostgreSQL</li>
<li>Composer</li>
<li>Nodeï¼ˆYarnï¼ŒBowerï¼ŒGrunt å’Œ Gulpï¼‰</li>
<li>Redis</li>
<li>Memcached</li>
<li>Beanstalkd</li>
<li>Mailhog</li>
<li>Neo4jï¼ˆå¯é€‰ï¼‰</li>
<li>MongoDBï¼ˆå¯é€‰ï¼‰</li>
<li>Elasticsearchï¼ˆå¯é€‰ï¼‰</li>
<li>ngrok</li>
<li>wp-cli</li>
<li>Zend Z-Ray</li>
<li>Go</li>
<li>Minio</li>
</ul>
<p>æ€»ä¹‹ä¸€å¥è¯ï¼Œå·¨ç‰›é€¼ã€‚å¦‚æœè¿™äº›ä¸œè¥¿è®©ä½ è‡ªå·±æŠ˜è…¾ï¼Œæ€ä¹ˆç€ä¹Ÿå¾—å¤§åŠå¤©å§ã€‚æƒ³æƒ³æˆ‘æœè¿™ä¸ªç½‘ç»œï¼Œä½ èƒ½é¡ºåˆ©çš„æå®šé‚£ç®€ç›´å°±æ˜¯ç‰›é€¼ä¸­çš„æˆ˜æ–—æœºã€‚</p>
<h1 id="å®‰è£…ä¸é…ç½®"><a href="#å®‰è£…ä¸é…ç½®" class="headerlink" title="å®‰è£…ä¸é…ç½®"></a>å®‰è£…ä¸é…ç½®</h1><h2 id="èµ·æ­¥"><a href="#èµ·æ­¥" class="headerlink" title="èµ·æ­¥"></a>èµ·æ­¥</h2><p>åœ¨å¯åŠ¨ Homestead ç¯å¢ƒä¹‹å‰ï¼Œä½ å¿…é¡»å®‰è£… <a href="https://www.virtualbox.org/wiki/Downloads"><code>VirtualBox 5.2</code></a>ï¼Œ<a href="https://www.vmware.com/"><code>VMWare</code></a>ï¼Œ<a href="https://www.parallels.com/products/desktop/"><code>Parallels</code></a> æˆ–è€… <a href="https://docs.microsoft.com/en-us/virtualization/hyper-v-on-windows/quick-start/enable-hyper-v"><code>Hyper-V</code></a> ä»¥åŠ <a href="https://www.vagrantup.com/downloads.jhtml"><code>Vagrant</code></a>ã€‚æ‰€æœ‰è¿™äº›è½¯ä»¶åŒ…éƒ½ä¸ºæ‰€æœ‰æµè¡Œçš„æ“ä½œç³»ç»Ÿæä¾›äº†æ˜“äºä½¿ç”¨çš„å¯è§†åŒ–å®‰è£…ç¨‹åºã€‚</p>
<p>ä¸ºäº†ä½¿ç”¨ VMware æä¾›è€…ï¼Œä½ å°†éœ€è¦å»è´­ä¹° VMware Fusion / Workstation å’Œ <a href="https://www.vagrantup.com/vmware/"><code>VMware Vagrant plug-in</code></a>ã€‚å°½ç®¡å®ƒä¸æ˜¯å…è´¹çš„ï¼ŒVMware æ¯”å…¶å®ƒç›’å­èƒ½æä¾›æ›´å¿«çš„å…±äº«æ–‡ä»¶å¤¹æ€§èƒ½ã€‚</p>
<p>ä¸ºäº†ä½¿ç”¨ Parallels æä¾›è€…ï¼Œä½ å°†éœ€è¦å®‰è£… <a href="https://github.com/Parallels/vagrant-parallels"><code>Parallels Vagrant plug-in</code></a>ï¼Œå®ƒæ˜¯å…è´¹çš„ã€‚</p>
<p>å› ä¸º <a href="https://www.vagrantup.com/docs/hyperv/limitations.html"><code>Vagrant limitations</code></a>ï¼ŒHyper-V æä¾›è€…å°†å¿½ç•¥æ‰€æœ‰çš„ç½‘ç»œè®¾ç½®ã€‚</p>
<h3 id="å®‰è£…-Homestead-Vagrant-ç›’å­"><a href="#å®‰è£…-Homestead-Vagrant-ç›’å­" class="headerlink" title="å®‰è£… Homestead Vagrant ç›’å­"></a>å®‰è£… Homestead Vagrant ç›’å­</h3><p>ä¸€æ—¦ VirtualBox / VMware å’Œ Vagrant è¢«å®‰è£…ï¼Œä½ åº”å½“åœ¨ä½ çš„ç»ˆç«¯ä¸­ä½¿ç”¨å¦‚ä¸‹çš„å‘½ä»¤å°† <code>laravel/homestead</code> æ·»åŠ åˆ°ä½ çš„ Vagrant å®‰è£…ä¸­ã€‚ä¸‹è½½ç›’å­è€—è´¹çš„æ—¶é—´å–å†³äºä½ çš„ç½‘é€Ÿï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ vagrant box add laravel/homestead</span><br><span class="line">==&gt; vagrant: A new version of Vagrant is available: 2.1.4!</span><br><span class="line">==&gt; vagrant: To upgrade visit: https://www.vagrantup.com/downloads.html</span><br></pre></td></tr></table></figure>
<p>å¦‚æœæ­¤å‘½ä»¤å¤±è´¥ï¼Œç¡®ä¿ä½ å®‰è£…çš„ Vagrant æ˜¯æœ€æ–°çš„ã€‚</p>
<h3 id="å®‰è£…-Homestead"><a href="#å®‰è£…-Homestead" class="headerlink" title="å®‰è£… Homestead"></a>å®‰è£… Homestead</h3><p>ä½ å¯ä»¥å®‰è£… Homestead é€šè¿‡å…‹éš†ä»“åº“ã€‚è€ƒè™‘å…‹éš†ä»“åº“åˆ°ä½ çš„ã€homeã€ç›®å½•ä¸‹çš„ä¸€ä¸ª <code>Homestead</code> æ–‡ä»¶å¤¹ä¸‹ï¼Œè¿™æ · Homestead ç›’å­æœåŠ¡å°†ä½œä¸ºä½ çš„æ‰€æœ‰ Laravel é¡¹ç›®çš„ä¸»æœºï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ git <span class="built_in">clone</span> https://github.com/laravel/homestead.git ~/Homestead</span><br><span class="line">Cloning into <span class="string">&#x27;Homestead&#x27;</span>...</span><br></pre></td></tr></table></figure>
<p>ä½ åº”å½“æ£€æŸ¥ Homestead çš„æ ‡è®°ç‰ˆæœ¬ï¼Œå› ä¸º <code>master</code> åˆ†æ”¯ä¸æ€»æ˜¯ç¨³å®šçš„ã€‚ä½ èƒ½åœ¨ <a href="https://github.com/laravel/homestead/releases"><code>GitHub Release Page</code></a> æ‰¾åˆ°æœ€æ–°çš„ç¨³å®šç‰ˆï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> ~/Homestead</span><br><span class="line"></span><br><span class="line">// Clone the desired release...</span><br><span class="line">$ git checkout v7.14.2</span><br></pre></td></tr></table></figure>
<p>ä¸€æ—¦ä½ å…‹éš†å…‹éš†äº† Homestead ä»“åº“ï¼Œä» Homestead ç›®å½•è¿è¡Œ <code>bash init.sh</code> å‘½ä»¤å»åˆ›å»º <code>Homestead.yaml</code> é…ç½®æ–‡ä»¶ã€‚æ­¤ <code>Homestead.yaml</code> æ–‡ä»¶å°†ä½äº Homestead ç›®å½•ä¸­ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// Mac / Linux...</span><br><span class="line">$ bash init.sh</span><br><span class="line"></span><br><span class="line">// Windows...</span><br><span class="line">&gt; init.bat</span><br></pre></td></tr></table></figure>
<h2 id="é…ç½®-Homestead"><a href="#é…ç½®-Homestead" class="headerlink" title="é…ç½® Homestead"></a>é…ç½® Homestead</h2><h3 id="è®¾ç½®ä½ çš„æä¾›è€…"><a href="#è®¾ç½®ä½ çš„æä¾›è€…" class="headerlink" title="è®¾ç½®ä½ çš„æä¾›è€…"></a>è®¾ç½®ä½ çš„æä¾›è€…</h3><p>åœ¨ä½ çš„ <code>Homestead.yaml</code> æ–‡ä»¶ä¸­çš„ <code>provider</code> é”®åè¡¨ç¤ºå“ªä¸ª Vagrant æä¾›è€…åº”å½“è¢«ä½¿ç”¨ï¼š<code>virtualbox</code>ï¼Œ<code>vmware_fusion</code>ï¼Œ<code>vmware_workstation</code>ï¼Œ<code>parallels</code> æˆ–è€… <code>hyperv</code>ã€‚ä½ å¯ä»¥è®¾ç½®ä½ åå¥½çš„æä¾›è€…ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">provider: virtualbox</span><br></pre></td></tr></table></figure>
<h3 id="é…ç½®å…±äº«æ–‡ä»¶å¤¹"><a href="#é…ç½®å…±äº«æ–‡ä»¶å¤¹" class="headerlink" title="é…ç½®å…±äº«æ–‡ä»¶å¤¹"></a>é…ç½®å…±äº«æ–‡ä»¶å¤¹</h3><p><code>Homestead.yaml</code> æ–‡ä»¶ä¸­çš„ <code>folders</code> å±æ€§åˆ—å‡ºäº†ä½ å¸Œæœ›ä¸ä½ çš„ Homestead ç¯å¢ƒå…±äº«çš„æ‰€æœ‰æ–‡ä»¶å¤¹ã€‚åœ¨è¿™äº›æ–‡ä»¶å¤¹ä¸‹çš„æ–‡ä»¶å‘ç”Ÿæ”¹å˜æ—¶ï¼Œä»–ä»¬å°†åœ¨ä½ çš„æœ¬åœ°æœºå™¨å’Œ Homestead ç¯å¢ƒä¹‹é—´ä¿æŒåŒæ­¥ã€‚ä½ å¯ä»¥æ ¹æ®éœ€è¦å»é…ç½®ä»»æ„æ•°é‡çš„å…±äº«æ–‡ä»¶å¤¹ã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">folders:</span><br><span class="line">    - map: ~/code</span><br><span class="line">        to: /home/vagrant/code</span><br></pre></td></tr></table></figure>
<p>å¦‚æœä½ ä»…ä»…åˆ›å»ºä¸€äº›ç«™ç‚¹ï¼Œè¿™ä¸ªèƒ½ç”¨çš„æ˜ å°„å°†æ­£å¸¸å·¥ä½œã€‚ç„¶è€Œï¼Œéšç€ç«™ç‚¹æ•°é‡çš„ä¸æ–­å¢åŠ ï¼Œä½ å¯èƒ½ä¼šé‡åˆ°æ€§èƒ½é—®é¢˜ã€‚åœ¨åŒ…å«å¤§é‡æ–‡ä»¶çš„ä½ç«¯æœºå™¨æˆ–è€…é¡¹ç›®ä¸­ï¼Œè¿™ä¸ªé—®é¢˜å¯èƒ½éå¸¸æ˜æ˜¾ã€‚å¦‚æœä½ é‡åˆ°è¿™ä¸ªé—®é¢˜ï¼Œå°è¯•å°†æ¯ä¸ªé¡¹ç›®æ˜ å°„åˆ°å…¶è‡ªå·±çš„ Vagrant æ–‡ä»¶å¤¹ä¸‹ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">folders:</span><br><span class="line">    - map: ~/code/project1</span><br><span class="line">        to: /home/vagrant/code/project1</span><br><span class="line"></span><br><span class="line">    - map: ~/code/project2</span><br><span class="line">        to: /home/vagrant/code/project2</span><br></pre></td></tr></table></figure>
<p>è¦å¼€å¯ <a href="https://www.vagrantup.com/docs/synced-folders/nfs.html"><code>NFS</code></a>ï¼Œä½ ä»…ä»…éœ€è¦å¢åŠ ä¸€ä¸ªç®€å•çš„æ ‡å¿—åˆ°ä½ çš„åŒæ­¥æ–‡ä»¶é…ç½®ä¸­ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">folders:</span><br><span class="line">    - map: ~/code</span><br><span class="line">        to: /home/vagrant/code</span><br><span class="line">        <span class="built_in">type</span>: <span class="string">&quot;nfs&quot;</span></span><br></pre></td></tr></table></figure>
<div class="note danger">
            <p>å½“ä½¿ç”¨ NFS æ—¶ï¼Œä½ åº”å½“è€ƒè™‘å®‰è£… <a href="https://github.com/gael-ian/vagrant-bindfs"><code>vagrant-bindfs</code></a> æ’ä»¶ã€‚è¿™ä¸ªæ’ä»¶å°†ä¸º Homestead ç›’å­ä¸­çš„æ–‡ä»¶å’Œç›®å½•ç»´æŠ¤æ­£ç¡®çš„ user / group æƒé™ã€‚</p>
          </div>
<p>ä½ ä¹Ÿå¯ä»¥ä¼ é€’é€šè¿‡ <code>options</code> é”®ä¸‹åˆ—å‡ºå®ƒä»¬çš„ Vagrant çš„ <a href="https://www.vagrantup.com/docs/synced-folders/basic_usage.html"><code>Synced Folders</code></a> æ‰€æ”¯æŒçš„ä»»ä½•é€‰é¡¹ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">folders:</span><br><span class="line">    - map: ~/code</span><br><span class="line">    to: /home/vagrant/code</span><br><span class="line">    <span class="built_in">type</span>: <span class="string">&quot;rsync&quot;</span></span><br><span class="line">    options:</span><br><span class="line">        rsync__args: [<span class="string">&quot;--verbose&quot;</span>, <span class="string">&quot;--archive&quot;</span>, <span class="string">&quot;--delete&quot;</span>, <span class="string">&quot;-zz&quot;</span>]</span><br><span class="line">        rsync__exclude: [<span class="string">&quot;node_modules&quot;</span>]</span><br></pre></td></tr></table></figure>
<h3 id="é…ç½®-Nginx-ç«™ç‚¹"><a href="#é…ç½®-Nginx-ç«™ç‚¹" class="headerlink" title="é…ç½® Nginx ç«™ç‚¹"></a>é…ç½® Nginx ç«™ç‚¹</h3><p>ä¸ç†Ÿæ‚‰ Nginxï¼Ÿæ²¡é—®é¢˜ã€‚<code>sites</code> å±æ€§å…è®¸ä½ è½»æ¾æ˜ å°„ä¸€ä¸ªã€domainã€åˆ°ä½ çš„ Homestead ç¯å¢ƒçš„ä¸€ä¸ªæ–‡ä»¶å¤¹ã€‚åœ¨ <code>Homestead.yaml</code> æ–‡ä»¶ä¸­åŒ…å«ä¸€ä¸ªç¤ºä¾‹ç«™ç‚¹é…ç½®ï¼Œä½ å¯ä»¥æ ¹æ®éœ€è¦æ·»åŠ è®¸å¤šç«™ç‚¹åˆ°ä½ çš„ Homestead ç¯å¢ƒã€‚Homestead èƒ½ä½œä¸ºä¸€ä¸ªæ–¹ä¾¿çš„ï¼Œè™šæ‹ŸåŒ–çš„ç¯å¢ƒä¸ºä½ å·¥ä½œçš„æ¯ä¸€ä¸ª Laravel é¡¹ç›®æœåŠ¡ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sites:</span><br><span class="line">    - map: homestead.test</span><br><span class="line">        to: /home/vagrant/code/Laravel/public</span><br></pre></td></tr></table></figure>
<p>å¦‚æœä½ æ”¹å˜ <code>sites</code> å±æ€§åœ¨é…ç½® Homestead ç›’å­åï¼Œä½ åº”å½“é‡æ–°è¿è¡Œ <code>vagrant reload --provision</code> å»æ›´æ–°è™šæ‹Ÿæœºä¸­çš„ Nginx é…ç½®ã€‚</p>
<h3 id="ä¸»æœºæ–‡ä»¶"><a href="#ä¸»æœºæ–‡ä»¶" class="headerlink" title="ä¸»æœºæ–‡ä»¶"></a>ä¸»æœºæ–‡ä»¶</h3><p>ä½ å¿…é¡»åœ¨ä½ æœºå™¨çš„ <code>hosts</code> æ–‡ä»¶ä¸­ä¸º Nginx ç«™ç‚¹æ·»åŠ ã€domainsã€ã€‚<code>hosts</code> æ–‡ä»¶å°†æŠŠä½ çš„ Homestead ç«™ç‚¹è¯·æ±‚é‡å®šå‘åˆ°ä½ çš„ Homestead æœºå™¨ã€‚åœ¨ Mac å’Œ Linux ä¸­ï¼Œè¿™ä¸ªæ–‡ä»¶ä½äº <code>/etc/hosts</code>ã€‚åœ¨ Windows ä¸­ï¼Œä½äº <code>C:\Windows\System32\drivers\etc\hosts</code>ã€‚ä½ æ·»åŠ åˆ°æ­¤æ–‡ä»¶ä¸­çš„è¡Œçœ‹èµ·æ¥åƒå¦‚ä¸‹è¿™æ ·ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">192.168.10.10  homestead.test</span><br></pre></td></tr></table></figure>
<p>ç¡®ä¿åˆ—å‡ºçš„ IP åœ°å€æ˜¯ <code>Homestead.yaml</code> æ–‡ä»¶ä¸­è®¾ç½®çš„ IP åœ°å€ã€‚ä¸€æ—¦ä½ æ·»åŠ åŸŸååˆ°ä½ çš„ <code>hosts</code> æ–‡ä»¶ï¼Œå¯åŠ¨ Vagrant ç›’å­åä½ èƒ½åœ¨ä½ çš„ Web æµè§ˆå™¨ä¸­è®¿é—®å®ƒï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">http://homestead.test</span><br></pre></td></tr></table></figure>
<h2 id="å¯åŠ¨-Vagrant-ç›’å­"><a href="#å¯åŠ¨-Vagrant-ç›’å­" class="headerlink" title="å¯åŠ¨ Vagrant ç›’å­"></a>å¯åŠ¨ Vagrant ç›’å­</h2><p>ä¸€æ—¦ä½ æ ¹æ®ä½ çš„å–œå¥½ç¼–è¾‘ <code>Homestead.yaml</code> åï¼Œä»ä½ çš„ Homestead ç›®å½•è¿è¡Œ <code>vagrant up</code> å‘½ä»¤ã€‚Vagrant å°†å¯åŠ¨è™šæ‹Ÿæœºå¹¶è‡ªåŠ¨é…ç½®ä½ çš„å…±äº«æ–‡ä»¶å¤¹å’Œ Nginx ç«™ç‚¹ã€‚</p>
<p>åœ¨é”€æ¯è™šæ‹Ÿæœºï¼Œä½ å¯ä»¥ä½¿ç”¨ <code>vagrant destroy --force</code> å‘½ä»¤ã€‚</p>
<h2 id="æŒ‰é¡¹ç›®å®‰è£…"><a href="#æŒ‰é¡¹ç›®å®‰è£…" class="headerlink" title="æŒ‰é¡¹ç›®å®‰è£…"></a>æŒ‰é¡¹ç›®å®‰è£…</h2><p>ä½ å¯ä»¥ä¸ºä½ æ‰€ç®¡ç†çš„æ¯ä¸ªé¡¹ç›®é…ç½®é…ç½®ä¸€ä¸ª Homestead å®ä¾‹ï¼Œè€Œä¸æ˜¯åœ¨å…¨å±€èŒƒå›´å†…å®‰è£… Homestead å¹¶åœ¨æ‰€æœ‰çš„é¡¹ç›®ä¸­å…±äº«ç›¸åŒçš„ Homestead ç›’å­ã€‚å¦‚æœä½ å¸Œæœ›éšé¡¹ç›®ä¸€èµ·å‘é€ä¸€ä¸ª <code>Vagrantfile</code>ï¼Œé‚£ä¹ˆä¸ºæ¯ä¸ªé¡¹ç›®å®‰è£… Homestead å¯èƒ½æ˜¯å¤§æœ‰è£¨ç›Šçš„ï¼Œå…è®¸å…¶å®ƒäººåœ¨é¡¹ç›®ä¸­ <code>vagrant up</code> è¿›è¡Œå·¥ä½œã€‚</p>
<p>è¦ç›´æ¥å°† Homestead å®‰è£…åˆ°ä½ çš„é¡¹ç›®ï¼Œéœ€è¦ä½¿ç”¨ Composerï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ composer require laravel/homestead --dev</span><br></pre></td></tr></table></figure>
<p>ä¸€æ—¦ Homestead è¢«å®‰è£…ï¼Œä½¿ç”¨ <code>make</code> å‘½ä»¤å»ç”Ÿæˆ <code>Vagrantfile</code> å’Œ <code>Homestead.yaml</code> æ–‡ä»¶åœ¨ä½ çš„é¡¹ç›®æ ¹ç›®å½•ã€‚<code>make</code> å‘½ä»¤å°†è‡ªåŠ¨é…ç½® <code>site</code> å’Œ <code>folders</code> æŒ‡ä»¤åœ¨ <code>Homestead.yaml</code> æ–‡ä»¶ä¸­ã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// Mac / Linux</span><br><span class="line">$ php vendor/bin/homestead make</span><br><span class="line"></span><br><span class="line">// Windows</span><br><span class="line">$ vendor\\bin\\homestead make</span><br></pre></td></tr></table></figure>
<p>æ¥ä¸‹æ¥ï¼Œåœ¨ç»ˆç«¯ä¸­è¿è¡Œ <code>vagrant up</code> å‘½ä»¤å¹¶åœ¨æµè§ˆå™¨ä¸­è¾“å…¥ <code>http://homestead.test</code> å»è®¿é—®ä½ çš„é¡¹ç›®ã€‚è®°ä½ï¼Œä½ å°†éœ€è¦æ·»åŠ ä¸€ä¸ª <code>homestead.test</code> åˆ° <code>/etc/hosts</code> æ–‡ä»¶ä¸­æˆ–è€…ä½ è‡ªå®šä¹‰çš„åŸŸåã€‚</p>
<h2 id="å®‰è£…-MariaDB"><a href="#å®‰è£…-MariaDB" class="headerlink" title="å®‰è£… MariaDB"></a>å®‰è£… MariaDB</h2><p>å¦‚æœä½ åå¥½ä½¿ç”¨ MariaDB è€Œä¸æ˜¯ MySQLï¼Œä½ å¯ä»¥åœ¨ <code>Homestead.yaml</code> æ–‡ä»¶ä¸­æ·»åŠ  <code>mariadb</code> é€‰é¡¹ã€‚è¿™ä¸ªé€‰é¡¹å°†ç§»é™¤ MySQL å¹¶å®‰è£… MariaDBã€‚MariaDB æœåŠ¡ä½œä¸º MySQL çš„ä¸€ä¸ªæ›¿ä»£å“ï¼Œå› æ­¤ä½ ä»ç„¶åœ¨ä½ çš„åº”ç”¨ç¨‹åºæ•°æ®åº“é…ç½®ä¸­ä½¿ç”¨ <code>mysql</code> æ•°æ®åº“é©±åŠ¨ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">box: laravel/homestead</span><br><span class="line">ip: <span class="string">&quot;192.168.10.10&quot;</span></span><br><span class="line">memory: 2048</span><br><span class="line">cpus: 4</span><br><span class="line">provider: virtualbox</span><br><span class="line">mariadb: <span class="literal">true</span></span><br></pre></td></tr></table></figure>
<h2 id="å®‰è£…-MongoDB"><a href="#å®‰è£…-MongoDB" class="headerlink" title="å®‰è£… MongoDB"></a>å®‰è£… MongoDB</h2><p>è¦å®‰è£… MongoDB ç¤¾åŒºç‰ˆï¼Œæ›´æ–°ä½ çš„ <code>Homestead.yaml</code> æ–‡ä»¶ç”¨å¦‚ä¸‹çš„é…ç½®é€‰é¡¹ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">mongodb: <span class="literal">true</span></span><br></pre></td></tr></table></figure>
<p>é»˜è®¤çš„ MongoDB å®‰è£…å°†è®¾ç½®æ•°æ®åº“ç”¨æˆ·åä¸º <code>homestead</code>ï¼Œç›¸åº”åœ°å¯†ç ä¸º <code>secret</code>ã€‚</p>
<h2 id="å®‰è£…-Elasticsearch"><a href="#å®‰è£…-Elasticsearch" class="headerlink" title="å®‰è£… Elasticsearch"></a>å®‰è£… Elasticsearch</h2><p>è¦å®‰è£… Elasticsearchï¼Œæ·»åŠ  <code>elasticsearch</code> é€‰é¡¹åˆ°ä½ çš„ <code>Homestead.yaml</code> æ–‡ä»¶å¹¶æŒ‡å®šä¸€ä¸ªæ”¯æŒçš„ç‰ˆæœ¬ï¼Œè¯¥ç‰ˆæœ¬å¯èƒ½æ˜¯ä¸€ä¸ªä¸»ç‰ˆæœ¬æˆ–è€…ä¸€ä¸ªç²¾ç¡®çš„ç‰ˆæœ¬å·ï¼ˆä¸»ç‰ˆæœ¬å·.æ¬¡ç‰ˆæœ¬å·.ä¿®å¤ç‰ˆæœ¬å·ï¼‰ã€‚é»˜è®¤å®‰è£…å°†åˆ›å»ºä¸€ä¸ªåä¸º <code>homestead</code> çš„é›†ç¾¤ã€‚ä½ åº”å½“ä»ä¸ç»™ Elasticsearch è¶…è¿‡æ“ä½œç³»ç»Ÿä¸€åŠçš„å†…å­˜ï¼Œæ‰€ä»¥è¦ç¡®ä¿ä½ çš„ Homestead æœºå™¨è‡³å°‘æœ‰ä¸¤å€çš„ Elasticsearch åˆ†é…çš„å†…å­˜ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">box: laravel/homestead</span><br><span class="line">ip: <span class="string">&quot;192.168.10.10&quot;</span></span><br><span class="line">memory: 4096</span><br><span class="line">cpus: 4</span><br><span class="line">provider: virtualbox</span><br><span class="line">elasticsearch: 6</span><br></pre></td></tr></table></figure>
<div class="note info">
            <p>æŸ¥é˜… <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current">Elasticsearch documentation</a> å»å­¦ä¹ å¦‚ä½•è‡ªå®šä¹‰ä½ çš„é…ç½®ã€‚</p>
          </div>
<h2 id="å®‰è£…-Neo4j"><a href="#å®‰è£…-Neo4j" class="headerlink" title="å®‰è£… Neo4j"></a>å®‰è£… Neo4j</h2><p><code>Neo4j</code> æ˜¯ä¸€ä¸ªå›¾å½¢æ•°æ®åº“ç®¡ç†ç³»ç»Ÿã€‚è¦å®‰è£… Neo4j ç¤¾åŒºç‰ˆï¼Œæ›´æ–°ä½ çš„ <code>Homestead.yaml</code> æ–‡ä»¶ç”¨å¦‚ä¸‹çš„é…ç½®é€‰é¡¹ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">neo4j: <span class="literal">true</span></span><br></pre></td></tr></table></figure>
<p>é»˜è®¤çš„ Neo4j å®‰è£…å°†è®¾ç½®æ•°æ®åº“çš„ç”¨æˆ·åä¸º <code>homestead</code>ï¼Œç›¸åº”çš„å¯†ç ä¸º <code>secret</code>ã€‚è¦è®¿é—® Neo4jï¼Œç”¨æµè§ˆå™¨è®¿é—® <code>http://homestead.test:7474</code> åœ°å€ã€‚ä½ çš„ç«¯å£ <code>7687</code>ï¼ˆBoltï¼‰ï¼Œ<code>7474</code>ï¼ˆHTTPï¼‰ï¼Œ<code>7473</code>ï¼ˆHTTPSï¼‰æ˜¯å‡†å¤‡å¥½æœåŠ¡æ¥è‡ª Neo4j å®¢æˆ·ç«¯çš„è¯·æ±‚çš„ã€‚</p>
<h2 id="åˆ«å"><a href="#åˆ«å" class="headerlink" title="åˆ«å"></a>åˆ«å</h2><p>ä½ å¯ä»¥é€šè¿‡åœ¨ä½ çš„ Homestead ç›®å½•ä¸‹ä¿®æ”¹ <code>aliases</code> æ–‡ä»¶æ·»åŠ  Bash åˆ«ååˆ°ä½ çš„ Homestead æœºå™¨ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">alias</span> c=<span class="string">&#x27;clear&#x27;</span></span><br><span class="line"><span class="built_in">alias</span> ..=<span class="string">&#x27;cd ..&#x27;</span></span><br></pre></td></tr></table></figure>
<p>éšåä½ éœ€è¦æ›´æ–° <code>aliases</code> æ–‡ä»¶ï¼Œä½ åº”å½“ä½¿ç”¨ <code>vagrant reload --provision</code> å‘½ä»¤é‡æ–°é…ç½® Homestead æœºå™¨ã€‚è¿™å°†ç¡®ä¿åœ¨æœºå™¨ä¸­ä½ çš„æ–°åˆ«åå¯ç”¨ã€‚</p>
<h2 id="è¸©è¿‡çš„å‘"><a href="#è¸©è¿‡çš„å‘" class="headerlink" title="è¸©è¿‡çš„å‘"></a>è¸©è¿‡çš„å‘</h2><h3 id="è£…è½½-Homestead-é•œåƒ"><a href="#è£…è½½-Homestead-é•œåƒ" class="headerlink" title="è£…è½½ Homestead é•œåƒ"></a>è£…è½½ Homestead é•œåƒ</h3><p>å®˜æ–¹çš„å‘½ä»¤æ˜¯è¿™æ ·çš„ï¼Œå¦‚æœä½ è§‰å¾—æ‰§è¡Œä¸‹é¢å‘½ä»¤æ²¡é—®é¢˜ï¼Œé‚£ä½ çœŸæ˜¯ <code>too young too simple</code>ï¼Œæˆ‘å¯æ˜¯è¸©è¿‡å‘çš„ã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ vagrant box add laravel/homestead</span><br></pre></td></tr></table></figure>
<p>æ‰§è¡Œä¸Šé¢å‘½ä»¤åï¼Œä½ åœ¨ <code>vagrant up</code> æ˜¯æ—¶ä¼šé‡åˆ° <code>Box &#39;laravel/homestead&#39; could not be found</code> è¿™ä¸ªä¸æ˜¯é—®é¢˜çš„é—®é¢˜ï¼Œæ€ä¹ˆåŠï¼Œä¸èƒ½å‡‰æ‹Œå§ã€‚ä¹Ÿå¥½åŠï¼Œä¸å°±æœç´¢å—? åˆ«æœäº†ï¼Œè·Ÿæˆ‘ä¸Šï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ mkdir -pv ~/Homestead</span><br><span class="line">$ <span class="built_in">cd</span> ~/Homestead</span><br><span class="line">$ git <span class="built_in">clone</span> https://github.com/laravel/homestead.git</span><br></pre></td></tr></table></figure>
<p>æŸ¥çœ‹ä½ çš„ <code>box</code> åˆ—è¡¨</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// `virtualbox` ç‰ˆæœ¬ä¸º `0`</span><br><span class="line">$ vagrant box list</span><br><span class="line">laravel/homestead (virtualbox, 0)</span><br><span class="line"></span><br><span class="line">// åˆ é™¤è¿™ä¸ªæ·»åŠ çš„ `box`</span><br><span class="line">$ vagrant box remove laravel/homestead</span><br></pre></td></tr></table></figure>
<p>åœ¨ <code>~/Homestead/scripts/homestead.rb</code> æ–‡ä»¶ä¸­æœ‰è¿™ä¹ˆä¸€è¡Œï¼Œè¦æ±‚ç‰ˆæœ¬å¿…é¡»æ˜¯å¤§äº <code>4.0.0</code>ï¼Œæ€ä¹ˆæ ·ï¼Œæˆ‘æ²¡éª—ä½ å§ï¼Œç‰ˆæœ¬å±…ç„¶ä¸ä¸€è‡´ã€‚å°æ„æ€ï¼Œæ”¹ä¸‹ç‰ˆæœ¬å·å˜›ï¼Œå¯åˆ«ï¼Œå’±èƒ½ä¸ç¢°ä»£ç å°±ä¸ç¢°ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">config.vm.box_version = settings[<span class="string">&quot;version&quot;</span>] ||= <span class="string">&quot;&gt;= 4.0.0&quot;</span></span><br></pre></td></tr></table></figure>
<p>æ‰“å¼€å…‹éš†çš„é¡¹ç›®ï¼Œæ ¹ç›®å½•åˆ›å»º <code>Homestead.json</code> æ–‡ä»¶ï¼Œæ–‡ä»¶å¡«å…¥ä»¥ä¸‹å†…å®¹</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="string">&quot;name&quot;</span>: <span class="string">&quot;laravel/homestead&quot;</span>,</span><br><span class="line">    <span class="string">&quot;versions&quot;</span>: [&#123;</span><br><span class="line">        <span class="string">&quot;version&quot;</span>: <span class="string">&quot;5.0.1&quot;</span>,</span><br><span class="line">        <span class="string">&quot;providers&quot;</span>: [&#123;</span><br><span class="line">            <span class="string">&quot;name&quot;</span>: <span class="string">&quot;virtualbox&quot;</span>,</span><br><span class="line">            <span class="string">&quot;url&quot;</span>: <span class="string">&quot;file:///path/to/homestead-virtualbox.box&quot;</span></span><br><span class="line">        &#125;]</span><br><span class="line">    &#125;]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¥½äº†ï¼Œèµ°ä¸€ä¸ªè¯•è¯•</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ vagrant box add Homestead.json</span><br><span class="line">$ vagrant box list</span><br><span class="line">laravel/homestead (virtualbox, 5.0.1)</span><br></pre></td></tr></table></figure>
<p>å¿…é¡»å§æ§½å‘€ï¼Œç‰ˆæœ¬å·å›æ¥äº†ï¼Œå¥½äº†ï¼Œæˆ‘ä»¬å‡ºå‘</p>
<h3 id="ç”Ÿæˆ-key"><a href="#ç”Ÿæˆ-key" class="headerlink" title="ç”Ÿæˆ key"></a>ç”Ÿæˆ key</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ mkdir -pv ~/.ssh/homestead</span><br><span class="line"></span><br><span class="line">// æ–‡ä»¶è·¯å¾„åŠåç§°ä¸º: ~/.ssh/homestead/homestead_rsa</span><br><span class="line">$ ssh-keygen -t rsa -C <span class="string">&quot;lumen@homestead&quot;</span></span><br></pre></td></tr></table></figure>
<h3 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h3><p>è¿™ä¸ªåŸºæœ¬ä¸Šæ˜¯åœ¨ä¿®æ”¹ <code>~/Homestead/Vagrantfile</code> æ–‡ä»¶</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">---</span><br><span class="line">ip: <span class="string">&quot;192.168.10.10&quot;</span></span><br><span class="line">memory: 2048</span><br><span class="line">cpus: 1</span><br><span class="line">provider: virtualbox</span><br><span class="line"></span><br><span class="line">authorize: ~/.ssh/homestead/homestead_rsa.pub</span><br><span class="line"></span><br><span class="line">keys:</span><br><span class="line">    - ~/.ssh/homestead/homestead_rsa</span><br><span class="line"></span><br><span class="line">folders:</span><br><span class="line">    - map: ~/Codes</span><br><span class="line">      to: /home/vagrant/workspace</span><br><span class="line"></span><br><span class="line">sites:</span><br><span class="line">    - map: dev.lumen.com</span><br><span class="line">      to: /home/vagrant/workspace/lumen/public</span><br><span class="line"></span><br><span class="line">databases:</span><br><span class="line">    - homestead</span><br><span class="line"></span><br><span class="line"><span class="comment"># blackfire:</span></span><br><span class="line"><span class="comment">#     - id: foo</span></span><br><span class="line"><span class="comment">#       token: bar</span></span><br><span class="line"><span class="comment">#       client-id: foo</span></span><br><span class="line"><span class="comment">#       client-token: bar</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ports:</span></span><br><span class="line"><span class="comment">#     - send: 50000</span></span><br><span class="line"><span class="comment">#       to: 5000</span></span><br><span class="line"><span class="comment">#     - send: 7777</span></span><br><span class="line"><span class="comment">#       to: 777</span></span><br><span class="line"><span class="comment">#       protocol: udp</span></span><br></pre></td></tr></table></figure>
<h3 id="å¯åŠ¨å¹¶è¿›å…¥è™šæ‹Ÿæœº"><a href="#å¯åŠ¨å¹¶è¿›å…¥è™šæ‹Ÿæœº" class="headerlink" title="å¯åŠ¨å¹¶è¿›å…¥è™šæ‹Ÿæœº"></a>å¯åŠ¨å¹¶è¿›å…¥è™šæ‹Ÿæœº</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// å¯åŠ¨</span><br><span class="line">$ vagrant up</span><br><span class="line"></span><br><span class="line">// ç™»å½•è™šæ‹Ÿæœº</span><br><span class="line">$ vagrant ssh</span><br><span class="line">Welcome to Ubuntu 16.04.5 LTS (GNU/Linux 4.4.0-101-generic x86_64)</span><br><span class="line"></span><br><span class="line"> * Documentation:  https://help.ubuntu.com</span><br><span class="line"> * Management:     https://landscape.canonical.com</span><br><span class="line"> * Support:        https://ubuntu.com/advantage</span><br><span class="line"></span><br><span class="line">102 packages can be updated.</span><br><span class="line">29 updates are security updates.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Last login: Thu Aug 30 13:32:04 2018 from 10.0.2.2</span><br></pre></td></tr></table></figure>
<h1 id="æ—¥å¸¸æ“ä½œ"><a href="#æ—¥å¸¸æ“ä½œ" class="headerlink" title="æ—¥å¸¸æ“ä½œ"></a>æ—¥å¸¸æ“ä½œ</h1><h2 id="å…¨å±€è®¿é—®-Homestead"><a href="#å…¨å±€è®¿é—®-Homestead" class="headerlink" title="å…¨å±€è®¿é—® Homestead"></a>å…¨å±€è®¿é—® Homestead</h2><p>æœ‰æ—¶ä½ æƒ³æ–‡ä»¶ç³»ç»Ÿçš„ä»»ä½•åœ°æ–¹ <code>vagrant up</code> ä½ çš„ Homestead æœºå™¨ã€‚ä½ èƒ½è¿™æ ·åšï¼Œåœ¨ Mac / Linux ç³»ç»Ÿä¸Šé€šè¿‡æ·»åŠ ä¸€ä¸ª Bash å‡½æ•°åˆ°ä½ çš„ Bash ç®€ä»‹ä¸­ã€‚åœ¨ Windows ä¸­ï¼Œä½ å¯ä»¥é€šè¿‡æ·»åŠ ä¸€ä¸ªã€batchã€æ–‡ä»¶åˆ° <code>PATH</code> æ¥å®Œæˆè¿™ä¸ªæ“ä½œã€‚è¿™äº›è„šæœ¬å°†å…è®¸ä½ åœ¨ä½ çš„ç³»ç»Ÿçš„ä»»ä½•åœ°æ–¹è¿è¡Œä»»ä½• Vagrant å‘½ä»¤ï¼Œå¹¶è‡ªåŠ¨å°†è¯¥å‘½ä»¤æŒ‡å‘ä½ çš„ Homestead å®‰è£…ç›®å½•ï¼š</p>
<h3 id="Mac-Linux"><a href="#Mac-Linux" class="headerlink" title="Mac / Linux"></a>Mac / Linux</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">homestead</span></span>() &#123;</span><br><span class="line">    ( <span class="built_in">cd</span> ~/Homestead &amp;&amp; vagrant $* )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç¡®ä¿å‡½æ•°ä¸­çš„ <code>~/Homestead</code> è·¯å¾„è°ƒæ•´åˆ°å®é™… çš„ Homestead å®‰è£…çš„ä½ç½®ã€‚ä¸€æ—¦è¯¥å‡½æ•°è¢«å®‰è£…ï¼Œä½ å¯ä»¥ä»ä½ çš„ç³»ç»Ÿçš„ä»»ä½•ä½ç½®è¿è¡Œåƒ <code>homestead up</code> æˆ–è€… <code>homestead ssh</code> å‘½ä»¤ã€‚</p>
<h3 id="Windows"><a href="#Windows" class="headerlink" title="Windows"></a>Windows</h3><p>åœ¨ä½ çš„æœºå™¨çš„ä»»ä½•ä½ç½®åˆ›å»ºä¸€ä¸ªå¦‚ä¸‹å†…å®¹çš„ <code>homestead.bat</code> æ‰¹å¤„ç†æ–‡ä»¶ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">@<span class="built_in">echo</span> off</span><br><span class="line"></span><br><span class="line"><span class="built_in">set</span> cwd=%<span class="built_in">cd</span>%</span><br><span class="line"><span class="built_in">set</span> homesteadVagrant=C:\Homestead</span><br><span class="line"></span><br><span class="line"><span class="built_in">cd</span> /d %homesteadVagrant% &amp;&amp; vagrant %*</span><br><span class="line"><span class="built_in">cd</span> /d %cwd%</span><br><span class="line"></span><br><span class="line"><span class="built_in">set</span> cwd=</span><br><span class="line"><span class="built_in">set</span> homesteadVagrant=</span><br></pre></td></tr></table></figure>
<p>ç¡®ä¿åœ¨è„šæœ¬ä¸­çš„å®ä¾‹ <code>C:\Homestead</code> è·¯å¾„è°ƒæ•´ä¸º Homestead å®é™…å®‰è£…çš„ä½ç½®ã€‚åˆ›å»ºæ–‡ä»¶ä¹‹åï¼Œé’ˆæ–‡ä»¶æ·»åŠ åˆ° <code>PATH</code> ä¸­ã€‚ç„¶åï¼Œä½ å¯ä»¥åœ¨ä½ çš„ç³»ç»Ÿçš„ä»»ä½•åœ°æ–¹è¿è¡Œåƒ <code>homestead up</code> æˆ–è€… <code>homestead ssh</code> ä¹‹ç±»çš„å‘½ä»¤ã€‚</p>
<h2 id="é€šè¿‡-SSH-è¿æ¥"><a href="#é€šè¿‡-SSH-è¿æ¥" class="headerlink" title="é€šè¿‡ SSH è¿æ¥"></a>é€šè¿‡ SSH è¿æ¥</h2><p>ä½ èƒ½ä»ä½ çš„ Homestead ç›®å½•ä¸­é€šè¿‡åœ¨ç»ˆç«¯ä¸­å‘é€ <code>vagrant ssh</code> å‘½ä»¤æ¥ SSH åˆ°ä½ çš„è™šæ‹Ÿæœºä¸­ã€‚</p>
<p>ä½†æ˜¯ï¼Œç”±äºä½ å¯èƒ½éœ€è¦ç»å¸¸ SSH åˆ°ä½ çš„ Homestead æœºå™¨ï¼Œè€ƒè™‘å°†ä¸Šé¢çš„ã€functionã€ æ·»åŠ åˆ°ä¸»æœºä»¥å¿«é€Ÿ SSH åˆ° Homestead ç›’å­ä¸­ã€‚</p>
<h2 id="æ•°æ®åº“è¿æ¥"><a href="#æ•°æ®åº“è¿æ¥" class="headerlink" title="æ•°æ®åº“è¿æ¥"></a>æ•°æ®åº“è¿æ¥</h2><p>ä¸€ä¸ª <code>homestead</code> æ•°æ®åº“é…ç½®äº†å¼€ç®±å³ç”¨çš„ MySQL å’Œ PostgreSQLã€‚ä¸ºäº†æ›´åŠ æ–¹ä¾¿ï¼ŒLaravel çš„ <code>.env</code> æ–‡ä»¶é…ç½®åˆ°æ¡†æ¶ä»¥å¼€ç®±å³ç”¨æ­¤æ•°æ®åº“ã€‚</p>
<p>è¦ä»ä½ çš„ä¸»æœºçš„æ•°æ®åº“å®¢æˆ·ç«¯è¿æ¥åˆ°ä½ çš„ MySQL æˆ–è€… PostgreSQL æ•°æ®åº“ï¼Œä½ åº”å½“è¿æ¥ <code>127.0.0.1</code> å’Œç«¯å£ä¸º <code>33060</code>ï¼ˆMySQLï¼‰æˆ–è€… <code>54320</code>ï¼ˆPostgreSQLï¼‰ã€‚ä¸¤ä¸ªæ•°æ®åº“çš„ç”¨æˆ·åå’Œå¯†ç æ˜¯ <code>homestead</code> / <code>secret</code>ã€‚</p>
<div class="note danger">
            <p>å½“ä»ä½ çš„ä¸»æœºè¿æ¥åˆ°æ•°æ®åº“æ—¶ï¼Œä½ åº”å½“ä»…ä½¿ç”¨è¿™äº›éæ ‡å‡†ç«¯å£ã€‚ç”±äº Laravel åœ¨è™šæ‹Ÿæœºä¸­è¿è¡Œã€‚ä½ å°†åœ¨ä½ çš„ Laravel æ•°æ®åº“é…ç½®æ–‡ä»¶ä¸­ä½¿ç”¨é»˜è®¤çš„ 3306 å’Œ 5532 ç«¯å£ã€‚</p>
          </div>
<h2 id="æ•°æ®åº“å¤‡ä»½"><a href="#æ•°æ®åº“å¤‡ä»½" class="headerlink" title="æ•°æ®åº“å¤‡ä»½"></a>æ•°æ®åº“å¤‡ä»½</h2><p>å½“ä½ çš„ Vagrant ç›’å­é”€æ¯æ—¶ï¼ŒHomestead èƒ½è‡ªåŠ¨å¤‡ä»½ä½ çš„æ•°æ®åº“ã€‚ä¸ºäº†ä½¿ç”¨è¿™ä¸ªåŠŸèƒ½ï¼Œä½ å¿…é¡»ä½¿ç”¨ Vagrant 2.1.0 æˆ–è€…æ›´é«˜çš„ç‰ˆæœ¬ã€‚æˆ–è€…ï¼Œå¦‚æœä½ ä½¿ç”¨ä¸€ä¸ªæ—§ç‰ˆæœ¬çš„ Vagrantï¼Œä½ å¿…é¡»å®‰è£… <code>vagrant-triggers</code> æ’ä»¶ã€‚ä¸ºäº†å¼€å¯è‡ªåŠ¨æ•°æ®åº“å¤‡ä»½ï¼Œæ·»åŠ å¦‚ä¸‹çš„è¡Œåˆ°ä½ çš„ <code>Homestead.yaml</code> æ–‡ä»¶ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">backup: <span class="literal">true</span></span><br></pre></td></tr></table></figure>
<p>ä¸€æ—¦é…ç½®äº†ï¼Œå½“ <code>vagrant destroy</code> å‘½ä»¤è¢«æ‰§è¡Œæ—¶ï¼ŒHomestead å°†å¯¼å‡ºä½ çš„æ•°æ®åº“åˆ° <code>mysql_backup</code> å’Œ <code>postgres_backup</code> ç›®å½•ã€‚å¦‚æœä½ ä½¿ç”¨ <a href="https://laravel.com/docs/5.7/homestead#per-project-installation"><code>per project installation</code></a> æ–¹æ³•ï¼Œåˆ™å¯ä»¥åœ¨å…‹éš†çš„ Homestead æˆ–è€…åœ¨ä½ çš„é¡¹ç›®æ ¹ç›®å½•ä¸­æ‰¾åˆ°è¿™äº›ç›®å½•ã€‚</p>
<h2 id="æ·»åŠ é¢å¤–çš„ç«™ç‚¹"><a href="#æ·»åŠ é¢å¤–çš„ç«™ç‚¹" class="headerlink" title="æ·»åŠ é¢å¤–çš„ç«™ç‚¹"></a>æ·»åŠ é¢å¤–çš„ç«™ç‚¹</h2><p>ä¸€æ—¦ä½ çš„ Homestead ç¯å¢ƒå·²é…ç½®å¹¶è¿è¡Œï¼Œä½ å¯ä»¥ä¸ºä½ çš„ Laravel åº”ç”¨æ·»åŠ é¢å¤–çš„ Nginx ç«™ç‚¹ã€‚ä½ èƒ½åœ¨ä½ å¸Œæœ›çš„å•ä¸ª Homestead ç¯å¢ƒè¿è¡Œå¤šä¸ª Laravel å®‰è£…ã€‚è¦æ·»åŠ é¢å¤–çš„ç«™ç‚¹ï¼Œåœ¨ä½ çš„ <code>Homestead.yaml</code> æ–‡ä»¶ä¸­æ·»åŠ ç«™ç‚¹ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sites:</span><br><span class="line">    - map: homestead.test</span><br><span class="line">      to: /home/vagrant/code/Laravel/public</span><br><span class="line">    - map: another.test</span><br><span class="line">      to: /home/vagrant/code/another/public</span><br></pre></td></tr></table></figure>
<p>å¦‚æœ Vagrant ä¸èƒ½è‡ªåŠ¨ç®¡ç†ä½ çš„ã€hostsã€æ–‡ä»¶ï¼Œä½ å¯èƒ½è¿˜éœ€è¦æ·»åŠ æ–°çš„ç«™ç‚¹åˆ°è¯¥æ–‡ä»¶ä¸­ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">192.168.10.10  homestead.test</span><br><span class="line">192.168.10.10  another.test</span><br></pre></td></tr></table></figure>
<p>ä¸€æ—¦è¿™ä¸ªç«™ç‚¹è¢«æ·»åŠ ï¼Œä»ä½ çš„ Homestead ç›®å½•è¿è¡Œ <code>vagrant reload --provision</code> å‘½ä»¤ã€‚</p>
<h3 id="ç«™ç‚¹ç±»å‹"><a href="#ç«™ç‚¹ç±»å‹" class="headerlink" title="ç«™ç‚¹ç±»å‹"></a>ç«™ç‚¹ç±»å‹</h3><p>Homestead æ”¯æŒå¤šç§ç±»å‹çš„ç«™ç‚¹ï¼Œå…è®¸ä½ è½»æ¾è¿è¡Œä¸æ˜¯åŸºäº Laravel çš„é¡¹ç›®ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>symfony2</code> ç«™ç‚¹ç±»å‹è½»æ¾åœ°æ·»åŠ ä¸€ä¸ª Symfony åº”ç”¨åˆ° Homesteadï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sites:</span><br><span class="line">    - map: symfony2.test</span><br><span class="line">      to: /home/vagrant/code/Symfony/web</span><br><span class="line">      <span class="built_in">type</span>: <span class="string">&quot;symfony2&quot;</span></span><br></pre></td></tr></table></figure>
<p>å¯ç”¨çš„ç«™ç‚¹ç±»å‹æ˜¯ï¼š<code>apache</code>ï¼Œ<code>apigility</code>ï¼Œ<code>expressive</code>ï¼Œ<code>laravel</code>ï¼ˆé»˜è®¤ï¼‰ï¼Œ<code>proxy</code>ï¼Œ<code>silverstripe</code>ï¼Œ<code>statamic</code>ï¼Œ<code>symfony2</code>ï¼Œ<code>symfony4</code>ï¼Œå’Œ <code>zf</code>ã€‚</p>
<h3 id="ç«™ç‚¹å‚æ•°"><a href="#ç«™ç‚¹å‚æ•°" class="headerlink" title="ç«™ç‚¹å‚æ•°"></a>ç«™ç‚¹å‚æ•°</h3><p>ä½ å¯ä»¥é€šè¿‡ <code>params</code> ç«™ç‚¹æŒ‡ä»¤æ·»åŠ é¢å¤–çš„ Nginx <code>fastcgi_param</code> å€¼åˆ°ä½ çš„ç«™ç‚¹ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬æ·»åŠ ä¸€ä¸ªå€¼ä¸º <code>BAR</code> çš„ <code>Foo</code> å‚æ•°ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sites:</span><br><span class="line">    - map: homestead.test</span><br><span class="line">      to: /home/vagrant/code/Laravel/public</span><br><span class="line">      params:</span><br><span class="line">          - key: FOO</span><br><span class="line">            value: BAR</span><br></pre></td></tr></table></figure>
<h2 id="ç¯å¢ƒå˜é‡"><a href="#ç¯å¢ƒå˜é‡" class="headerlink" title="ç¯å¢ƒå˜é‡"></a>ç¯å¢ƒå˜é‡</h2><p>ä½ èƒ½é€šè¿‡æ·»åŠ å¦‚ä¸‹çš„å€¼åˆ° <code>Homestead.yaml</code> æ–‡ä»¶æ¥è®¾ç½®å…¨å±€ç¯å¢ƒå˜é‡ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">variables:</span><br><span class="line">    - key: APP_ENV</span><br><span class="line">      value: <span class="built_in">local</span></span><br><span class="line">    - key: FOO</span><br><span class="line">      value: bar</span><br></pre></td></tr></table></figure>
<p>æ›´æ–° <code>Homestead.yaml</code> æ–‡ä»¶ä¹‹åï¼Œç¡®ä¿é€šè¿‡è¿è¡Œ <code>vagrant reload --provision</code> å‘½ä»¤é‡æ–°é…ç½®æœºå™¨ã€‚è¿™ä¸ªå°†æ›´æ–°æ‰€æœ‰å®‰è£… çš„ PHP ç‰ˆæœ¬çš„ PHP-FPM é…ç½®å¹¶ä¸º <code>vagrant</code> ç”¨æˆ·æ›´æ–°ç¯å¢ƒã€‚</p>
<h2 id="é…ç½®å®šæ—¶è®¡åˆ’"><a href="#é…ç½®å®šæ—¶è®¡åˆ’" class="headerlink" title="é…ç½®å®šæ—¶è®¡åˆ’"></a>é…ç½®å®šæ—¶è®¡åˆ’</h2><p>Laravel æä¾›äº†ä¸€ç§é€šè¿‡å•ä¸ªè®¡åˆ’å°†æ¯åˆ†é’Ÿè¿è¡Œ <code>schedule:run</code> Artisan å‘½ä»¤ <a href="https://laravel.com/docs/5.7/scheduling"><code>schedule Cron jobs</code></a> çš„ä¾¿æ·æ–¹å¼ã€‚<code>schedule:run</code> å‘½ä»¤å°†æ£€æŸ¥åœ¨ä½ çš„ <code>App\Console\Kernel</code> ç±»ä¸­å®šä¹‰çš„è®¡åˆ’æ¥å†³å®šå“ªä¸ªå·¥ä½œåº”å½“è¢«è¿è¡Œã€‚</p>
<p>å¦‚æœä½ æƒ³ä¸ºä¸€ä¸ª Homestead ç«™ç‚¹çš„ <code>schedule:run</code> å‘½ä»¤å»è¿è¡Œï¼Œå½“å®šä¹‰ç«™ç‚¹æ—¶ï¼Œä½ å¯ä»¥è®¾ç½® <code>schedule</code> é€‰é¡¹ä¸º <code>true</code>ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sites:</span><br><span class="line">    - map: homestead.test</span><br><span class="line">      to: /home/vagrant/code/Laravel/public</span><br><span class="line">      schedule: <span class="literal">true</span></span><br></pre></td></tr></table></figure>
<p>ç«™ç‚¹çš„ Cron å·¥ä½œå°†è¢«å®šä¹‰åœ¨è™šæœºçš„ <code>/etc/cron.d</code> æ–‡ä»¶å¤¹ä¸‹ã€‚</p>
<h2 id="é…ç½®-Mailhog"><a href="#é…ç½®-Mailhog" class="headerlink" title="é…ç½® Mailhog"></a>é…ç½® Mailhog</h2><p>Mailhog å…è®¸ä½ è½»æ¾åœ°æ•è·å¤–å‘çš„ç”µå­é‚®ä»¶å¹¶è¿›è¡Œæ£€æŸ¥å®ƒï¼Œè€Œå®é™…ä¸Šæ²¡æœ‰å°†å‘é€é‚®ä»¶ç»™æ”¶ä»¶äººã€‚å¼€å§‹ä½¿ç”¨æ—¶ï¼Œæ›´æ–°ä½ çš„ <code>.env</code> æ–‡ä»¶ä»¥ä½¿ç”¨ä»¥ä¸‹çš„é‚®ä»¶è®¾ç½®ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">MAIL_DRIVER=smtp</span><br><span class="line">MAIL_HOST=localhost</span><br><span class="line">MAIL_PORT=1025</span><br><span class="line">MAIL_USERNAME=null</span><br><span class="line">MAIL_PASSWORD=null</span><br><span class="line">MAIL_ENCRYPTION=null</span><br></pre></td></tr></table></figure>
<h2 id="é…ç½®-Minio"><a href="#é…ç½®-Minio" class="headerlink" title="é…ç½® Minio"></a>é…ç½® Minio</h2><p>Minio æ˜¯ä¸€ä¸ªå¼€æºçš„å¯¹è±¡å­˜å‚¨æœåŠ¡å™¨ï¼Œå…·æœ‰ä¸ Amazon S3 å…¼å®¹çš„ APIã€‚è¦å®‰è£… Minioï¼Œç”¨ä»¥ä¸‹çš„é…ç½®é€‰é¡¹æ›´æ–°ä½ çš„ <code>Homestead.yaml</code> æ–‡ä»¶ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">minio: <span class="literal">true</span></span><br></pre></td></tr></table></figure>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼ŒMinio ä¸ºç«¯å£ 9600 ä¸Šå¯ç”¨ã€‚ä½ å¯ä»¥è®¿é—® Minio æ§åˆ¶é¢æ¿é€šè¿‡è®¿é—® <code>http://homestead:9600</code>ã€‚é»˜è®¤è®¿é—®çš„é”®åæ˜¯ <code>homestead</code>ï¼ŒåŒæ—¶é»˜è®¤çš„å¯†é’¥æ˜¯ <code>secretkey</code>ã€‚å½“è®¿é—® Minioï¼Œä½ åº”å½“æ€»æ˜¯ä½¿ç”¨ <code>us-east-1</code>ã€‚</p>
<p>ä¸ºäº†ä½¿ç”¨ Minioï¼Œä½ å°†éœ€è¦åœ¨ä½ çš„ <code>config/filesystems.php</code> é…ç½®æ–‡ä»¶ä¸­è°ƒæ•´ S3 ç£ç›˜é…ç½®ã€‚ä½ å°†éœ€è¦æ·»åŠ  <code>use_path_style_endpoint</code> é€‰é¡¹åˆ°ç£ç›˜é…ç½®ï¼Œå¹¶å°† <code>url</code> é”®æ›´æ”¹ä¸º <code>endpoint</code>ï¼š</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="string">&#x27;s3&#x27;</span> =&gt; [</span><br><span class="line">    <span class="string">&#x27;driver&#x27;</span> =&gt; <span class="string">&#x27;s3&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;key&#x27;</span> =&gt; env(<span class="string">&#x27;AWS_ACCESS_KEY_ID&#x27;</span>),</span><br><span class="line">    <span class="string">&#x27;secret&#x27;</span> =&gt; env(<span class="string">&#x27;AWS_SECRET_ACCESS_KEY&#x27;</span>),</span><br><span class="line">    <span class="string">&#x27;region&#x27;</span> =&gt; env(<span class="string">&#x27;AWS_DEFAULT_REGION&#x27;</span>),</span><br><span class="line">    <span class="string">&#x27;bucket&#x27;</span> =&gt; env(<span class="string">&#x27;AWS_BUCKET&#x27;</span>),</span><br><span class="line">    <span class="string">&#x27;endpoint&#x27;</span> =&gt; env(<span class="string">&#x27;AWS_URL&#x27;</span>),</span><br><span class="line">    <span class="string">&#x27;use_path_style_endpoint&#x27;</span> =&gt; <span class="literal">true</span></span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<p>æœ€åï¼Œç¡®ä¿ä½ çš„ <code>.env</code> æ–‡ä»¶æœ‰å¦‚ä¸‹çš„é€‰é¡¹ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">AWS_ACCESS_KEY_ID=homestead</span><br><span class="line">AWS_SECRET_ACCESS_KEY=secretkey</span><br><span class="line">AWS_DEFAULT_REGION=us-east-1</span><br><span class="line">AWS_URL=http://homestead:9600</span><br></pre></td></tr></table></figure>
<h2 id="ç«¯å£"><a href="#ç«¯å£" class="headerlink" title="ç«¯å£"></a>ç«¯å£</h2><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œå¦‚ä¸‹çš„ç«¯å£å°†è½¬å‘åˆ°ä½ çš„ Homestead ç¯å¢ƒï¼š</p>
<ul>
<li><strong>SSH</strong>ï¼š2222 -&gt; 22</li>
<li><strong>ngrok UI</strong>ï¼š4040 -&gt; 4040</li>
<li><strong>HTTP</strong>ï¼š8000 -&gt; 80</li>
<li><strong>HTTPS</strong>ï¼š44300 -&gt; 443</li>
<li><strong>MySQL</strong>ï¼š33060 -&gt; 3306</li>
<li><strong>PostgreSQL</strong>ï¼š54320 -&gt; 5432</li>
<li><strong>MongoDB</strong>ï¼š27017 -&gt; 27017</li>
<li><strong>Mailhog</strong>ï¼š8025 -&gt; 8025</li>
<li><strong>Minio</strong>ï¼š9600 -&gt; 9600</li>
</ul>
<h3 id="è½¬å‘é¢å¤–çš„ç«¯å£"><a href="#è½¬å‘é¢å¤–çš„ç«¯å£" class="headerlink" title="è½¬å‘é¢å¤–çš„ç«¯å£"></a>è½¬å‘é¢å¤–çš„ç«¯å£</h3><p>å¦‚æœä½ æ„¿æ„ï¼Œä½ å¯ä»¥è½¬å‘é¢å¤–çš„ç«¯å£åˆ° Vagrant ç›’å­ï¼ŒåŒæ—¶ä¹ŸæŒ‡å®šä»–ä»¬çš„åè®®ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">ports:</span><br><span class="line">    - send: 50000</span><br><span class="line">      to: 5000</span><br><span class="line">    - send: 7777</span><br><span class="line">      to: 777</span><br><span class="line">      protocol: udp</span><br></pre></td></tr></table></figure>
<h2 id="å…±äº«ä½ çš„ç¯å¢ƒ"><a href="#å…±äº«ä½ çš„ç¯å¢ƒ" class="headerlink" title="å…±äº«ä½ çš„ç¯å¢ƒ"></a>å…±äº«ä½ çš„ç¯å¢ƒ</h2><p>æœ‰æ—¶ä½ å¸Œæœ›å…±äº«ä½ å½“å‰å·¥ä½œçš„å†…å®¹è·ŸåŒäº‹æˆ–å®¢æˆ·ã€‚Vagrant æœ‰å†…ç½®çš„æ–¹æ³•é€šè¿‡ <code>vagrant share</code> å»æ”¯æŒè¿™ä¸ªï¼›ç„¶è€Œï¼Œå¦‚æœä½ æœ‰å¤šä¸ªç«™ç‚¹åœ¨ä½ çš„ <code>Homestead.yaml</code> æ–‡ä»¶ä¸­é…ç½®è¿‡ï¼Œè¿™ä¸ªå°†ä¸ä¼šå·¥ä½œã€‚</p>
<p>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒHomestead åŒ…å«å®ƒè‡ªå·±çš„ <code>share</code> å‘½ä»¤ã€‚å¼€å§‹ï¼Œé€šè¿‡ SSH å³ <code>vagrant ssh</code> å‘½ä»¤è¿›å…¥åˆ°ä½ çš„ Homestead æœºå™¨å¹¶è¿è¡Œ <code>share homestead.test</code>ã€‚è¿™ä¸ªå°†ä»ä½ çš„ <code>Homestead.yaml</code> é…ç½®æ–‡ä»¶ä¸­åˆ†äº« <code>homestead.test</code> ç«™ç‚¹ã€‚å½“ç„¶ï¼Œä½ å¯ä»¥å°†ä»»ä½•å…¶å®ƒé…ç½®çš„ç«™ç‚¹æ›¿æ¢ä¸º <code>homestead.test</code>ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">share homestead.test</span><br></pre></td></tr></table></figure>
<p>è¿è¡Œæ­¤å‘½ä»¤ä¹‹åï¼Œä½ å°†çœ‹åˆ°ä¸€ä¸ª Ngrok å±å¹•å‡ºç°ï¼Œå…¶ä¸­åŒ…å«äº†æ´»åŠ¨æ—¥å¿—å’Œå…±äº«ç«™ç‚¹çš„å¯è®¿é—®çš„ URLã€‚å¦‚æœä½ æƒ³æŒ‡å®šä¸€ä¸ªè‡ªå®šä¹‰çš„åŒºåŸŸï¼Œå­åŸŸï¼Œæˆ–è€…å…¶å®ƒ Ngrok è¿è¡Œæ—¶é€‰é¡¹ï¼Œä½ å¯ä»¥æ·»åŠ ä»–ä»¬åˆ°ä½ çš„ <code>share</code> å‘½ä»¤ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">share homestead.test -region=eu -subdomain=laravel</span><br></pre></td></tr></table></figure>
<div class="note danger">
            <p>è®°ä½ï¼ŒVagrant æœ¬è´¨ä¸Šæ˜¯ä¸å®‰å…¨çš„ï¼Œå¹¶ä¸”åœ¨è¿è¡Œ <code>share</code> æ—¶å°†è™šæ‹Ÿæœºæ˜¾éœ²ç»™äº’è”ç½‘ã€‚</p>
          </div>
<h2 id="å¤šç‰ˆæœ¬-PHP"><a href="#å¤šç‰ˆæœ¬-PHP" class="headerlink" title="å¤šç‰ˆæœ¬ PHP"></a>å¤šç‰ˆæœ¬ PHP</h2><div class="note danger">
            <p>è¿™ä¸ªåŠŸèƒ½ä»…å…¼å®¹ Nginxã€‚</p>
          </div>
<p>Homestead 6 åœ¨åŒä¸€ä¸ªè™šæ‹Ÿæœºä¸Šå¼•å…¥äº†å¯¹å¤šä¸ª PHP ç‰ˆæœ¬çš„æ”¯æŒã€‚ä½ å¯ä»¥åœ¨ä½ çš„ <code>Homestead.yaml</code> æ–‡ä»¶ä¸­æŒ‡å®šè¦ç”¨äºç»™å®šç«™ç‚¹çš„ PHP ç‰ˆæœ¬ã€‚å¯ç”¨çš„ PHP ç‰ˆæœ¬æ˜¯ï¼šã€5.6ã€ï¼Œã€7.0ã€ï¼Œã€7.1ã€å’Œã€7.2ã€ï¼ˆé»˜è®¤ï¼‰ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sites:</span><br><span class="line">    - map: homestead.test</span><br><span class="line">      to: /home/vagrant/code/Laravel/public</span><br><span class="line">      php: <span class="string">&quot;5.6&quot;</span></span><br></pre></td></tr></table></figure>
<p>å¦å¤–ï¼Œä½ å¯ä»¥é€šè¿‡ CLI ä½¿ç”¨ä»»ä½• PHP æ”¯æŒçš„ç‰ˆæœ¬ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">php5.6 artisan list</span><br><span class="line">php7.0 artisan list</span><br><span class="line">php7.1 artisan list</span><br><span class="line">php7.2 artisan list</span><br></pre></td></tr></table></figure>
<p>è®¾ç½® Cli ä¸‹é»˜è®¤çš„ PHP ç‰ˆæœ¬ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// æŸ¥çœ‹æ‰€æœ‰ php ç‰ˆæœ¬å’Œå½“å‰ç‰ˆæœ¬</span><br><span class="line">update-alternatives --display php</span><br><span class="line"></span><br><span class="line">// æ‰§è¡Œåï¼Œä¼šåˆ—å‡ºå½“å‰ php æ‰€æœ‰ç‰ˆæœ¬å’Œç¼–å·ï¼Œè¾“å…¥ç¼–å·ï¼Œåˆ‡æ¢åˆ°æ‰§è¡Œçš„ç‰ˆæœ¬</span><br><span class="line">update-alternatives --config php</span><br></pre></td></tr></table></figure>
<h2 id="Web-æœåŠ¡å™¨"><a href="#Web-æœåŠ¡å™¨" class="headerlink" title="Web æœåŠ¡å™¨"></a>Web æœåŠ¡å™¨</h2><p>é»˜è®¤æƒ…å†µä¸‹ï¼ŒHomestead ä½¿ç”¨ Nginx Web æœåŠ¡å™¨ã€‚ç„¶è€Œï¼Œå¦‚æœ <code>apache</code> æ˜¯æŒ‡å®šçš„ä¸€ä¸ªç«™ç‚¹ç±»å‹ï¼Œå®ƒèƒ½å®‰è£… Apacheã€‚åŒæ—¶ä¸¤ä¸ª Web æœåŠ¡å™¨åœ¨åŒæ—¶è¢«å®‰è£…ï¼Œä»–ä»¬ä¸èƒ½åŒæ—¶è¿è¡Œã€‚<code>flip</code> è„šæœ¬å‘½ä»¤å¯ç”¨æ¥æ˜“äºå¤„ç† Web æœåŠ¡å™¨ä¹‹é—´çš„åˆ‡æ¢ã€‚<code>flip</code> å‘½ä»¤è‡ªåŠ¨ç¡®å®šæ­£åœ¨è¿è¡Œçš„ Web æœåŠ¡å™¨ï¼Œå°†å…¶å…³é—­ã€‚ç„¶åå¯åŠ¨åˆ«ä¸€å°æœåŠ¡å™¨ã€‚è¦ä½¿ç”¨è¿™ä¸ªå‘½ä»¤ï¼ŒSSH è¿›å…¥åˆ°ä½ çš„ Homestead æœºå™¨å¹¶åœ¨ç»ˆç«¯è¿è¡Œå‘½ä»¤ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">flip</span><br></pre></td></tr></table></figure>
<h2 id="é‚®ä»¶"><a href="#é‚®ä»¶" class="headerlink" title="é‚®ä»¶"></a>é‚®ä»¶</h2><p>Homestead åŒ…æ‹¬ Postfix é‚®ä»¶ä¼ è¾“ä»£ç†ï¼Œé»˜è®¤ç›‘å¬ <code>1025</code> ç«¯å£ã€‚å› æ­¤ï¼Œä½ å¯ä»¥æŒ‡ç¤ºä½ çš„åº”ç”¨ç¨‹åºåœ¨ <code>localhost</code> ç«¯å£ <code>1025</code> ä¸Šä½¿ç”¨ <code>smtp</code> é‚®ä»¶é©±åŠ¨ã€‚æ‰€æœ‰å‘é€çš„é‚®ä»¶å°†ç”± Postfix å¤„ç†å¹¶ç”± Mailhog æ•è·ã€‚è¦æŸ¥çœ‹å·²å‘é€çš„é‚®ä»¶ï¼Œåœ¨ Web æµè§ˆå™¨ä¸­æ‰“å¼€ <code>http://localhost:8025</code>ã€‚</p>
<h1 id="ç½‘ç»œæ¥å£"><a href="#ç½‘ç»œæ¥å£" class="headerlink" title="ç½‘ç»œæ¥å£"></a>ç½‘ç»œæ¥å£</h1><p><code>Homestead.yaml</code> ä¸­çš„ <code>networks</code> å±æ€§ä¸ºä½ çš„ Homestead ç¯å¢ƒé…ç½®ç½‘ç»œæ¥å£ã€‚ä½ å¯ä»¥æ ¹æ®éœ€è¦é…ç½®å¤šä¸ªæ¥å£ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">networks:</span><br><span class="line">    - <span class="built_in">type</span>: <span class="string">&quot;private_network&quot;</span></span><br><span class="line">      ip: <span class="string">&quot;192.168.10.20&quot;</span></span><br></pre></td></tr></table></figure>
<p>è¦å¼€å¯ä¸€ä¸ª <a href="https://www.vagrantup.com/docs/networking/public_network.html"><code>bridged</code></a> æ¥å£ï¼Œé…ç½® <code>bridge</code> è®¾ç½®å¹¶æ”¹å˜ <code>public_network</code> ç½‘ç»œç±»å‹ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">networks:</span><br><span class="line">    - <span class="built_in">type</span>: <span class="string">&quot;public_network&quot;</span></span><br><span class="line">      ip: <span class="string">&quot;192.168.10.20&quot;</span></span><br><span class="line">      bridge: <span class="string">&quot;en1: Wi-Fi (AirPort)&quot;</span></span><br></pre></td></tr></table></figure>
<p>è¦å¼€å¯ <a href="https://www.vagrantup.com/docs/networking/public_network.html"><code>DHCP</code></a>ï¼Œä»…ä»ä½ çš„é…ç½®ä¸­ç§»é™¤ <code>ip</code> é€‰é¡¹ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">networks:</span><br><span class="line">    - <span class="built_in">type</span>: <span class="string">&quot;public_network&quot;</span></span><br><span class="line">      bridge: <span class="string">&quot;en1: Wi-Fi (AirPort)&quot;</span></span><br></pre></td></tr></table></figure>
<h1 id="æ›´æ–°-Homestead"><a href="#æ›´æ–°-Homestead" class="headerlink" title="æ›´æ–° Homestead"></a>æ›´æ–° Homestead</h1><p>ä½ èƒ½é€šè¿‡ä¸¤ä¸ªç®€å•çš„æ­¥éª¤æ›´æ–° Homesteadã€‚é¦–å…ˆï¼Œä½ åº”å½“æ›´æ–° Vagrant ç›’å­ä½¿ç”¨ <code>vagrant box update</code> å‘½ä»¤ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ vagrant box update</span><br></pre></td></tr></table></figure>
<p>æ¥ä¸‹æ¥ï¼Œä½ éœ€è¦å»æ›´æ–° Homestead æºä»£ç ã€‚å¦‚æœä½ å…‹éš†è¿‡ä»“åº“ï¼Œä½ èƒ½åœ¨æœ€åˆå…‹éš†ä»“åº“çš„ä½ç½® <code>git pull origin master</code>ã€‚</p>
<p>å¦‚æœä½ é€šè¿‡ä½ çš„é¡¹ç›®çš„ <code>composer.json</code> å®‰è£… Homesteadï¼Œä½ åº”å½“ç¡®ä¿ä½ çš„ <code>composer.json</code> åŒ…å« <code>&quot;laravel/homestead&quot;: &quot;^7&quot;</code> å¹¶æ›´æ–°ä½ çš„ä¾èµ–ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ composer update</span><br></pre></td></tr></table></figure>
<h1 id="æä¾›æŒ‡å®šçš„è®¾ç½®"><a href="#æä¾›æŒ‡å®šçš„è®¾ç½®" class="headerlink" title="æä¾›æŒ‡å®šçš„è®¾ç½®"></a>æä¾›æŒ‡å®šçš„è®¾ç½®</h1><h2 id="VirtualBox"><a href="#VirtualBox" class="headerlink" title="VirtualBox"></a>VirtualBox</h2><p>é»˜è®¤æƒ…å†µä¸‹ï¼ŒHomestead å°† <code>natdnshostresolver</code> é…ç½®è®¾ç½®ä¸º <code>on</code>ã€‚è¿™å…è®¸ Homestead å»ä½¿ç”¨ä½ çš„ä¸»æœºæ“ä½œç³»ç»Ÿçš„ DNS è®¾ç½®ã€‚å¦‚æœä½ ä¸æƒ³è¦†ç›–è¿™ä¸ªè¡Œä¸ºï¼Œæ·»åŠ å¦‚ä¸‹çš„è¡Œåˆ°ä½ çš„ <code>Homestead.yaml</code> æ–‡ä»¶ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">provider: virtualbox</span><br><span class="line">natdnshostresolver: off</span><br></pre></td></tr></table></figure>
<h3 id="ç¬¦å·é“¾æ¥åœ¨-Windows"><a href="#ç¬¦å·é“¾æ¥åœ¨-Windows" class="headerlink" title="ç¬¦å·é“¾æ¥åœ¨ Windows"></a>ç¬¦å·é“¾æ¥åœ¨ Windows</h3><p>å¦‚æœç¬¦å·é“¾æ¥åœ¨ä½ çš„ Windows æœºå™¨ä¸Šæ— æ³•æ­£å¸¸å·¥ä½œï¼Œä½ å¯èƒ½éœ€è¦æ·»åŠ ä»¥ä¸‹çš„å—åˆ° <code>Vagrantfile</code> æ–‡ä»¶ï¼š</p>
<figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line">config.vm.provider <span class="string">&quot;virtualbox&quot;</span> <span class="keyword">do</span> <span class="params">|v|</span></span><br><span class="line">    v.customize [<span class="string">&quot;setextradata&quot;</span>, <span class="symbol">:id</span>, <span class="string">&quot;VBoxInternal2/SharedFoldersEnableSymlinksCreate/v-root&quot;</span>, <span class="string">&quot;1&quot;</span>]</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>devtools</category>
      </categories>
      <tags>
        <tag>php</tag>
        <tag>linux</tag>
        <tag>mac</tag>
        <tag>devtools</tag>
      </tags>
  </entry>
  <entry>
    <title>Mac é‚£äº›å±…å®¶å¿…å¤‡çš„å·¥å…·</title>
    <url>/2018/02/04/mac-necessary-tools/</url>
    <content><![CDATA[<p>ä»¥å‰ç”¨ <code>Windows</code> çš„æ—¶å€™å‡ ä¹ä¸æ€ä¹ˆå…³æ³¨æ•ˆç‡ï¼Œä»€ä¹ˆä»€ä¹ˆè½¯ä»¶æœ‰å¤šç‰›é€¼å‘€è¿™ç§äº‹æƒ…ï¼ˆå½“ç„¶æˆ‘ä¸æ˜¯è¯´ <code>Windows</code> ä¸ç‰›é€¼ï¼Œä»–ä»¬éƒ½ç‰¹ä¹ˆç‰›é€¼ï¼‰åŸºæœ¬ä¸Šæ˜¯ä»¥å®Œæˆä»»åŠ¡ä¸ºç›®æ ‡ï¼Œé™¤äº†å¼€å‘å·¥å…·å…¶å®ƒçš„éƒ½ä¸æ€ä¹ˆæŠ˜è…¾ã€‚åæ¥æœ‰ä¸ªåŒäº‹åš <code>iOS</code> å¼€å‘çš„ï¼Œç”±äº <code>iOS</code> æ²¡æœ‰é¡¹ç›®å¯åšï¼Œå°±è½¬åš <code>PHP</code>ï¼Œå¶å°”å»ä»–å“ªå„¿è°ƒè¯•ä¸ªä¸œè¥¿ä»€ä¹ˆçš„ï¼Œè¿™æ ·ä¸€æ¥äºŒå»å°±æ‘¸åˆ°ä»–çš„ <code>Mac Book Pro</code>ï¼Œå½“æ—¶æˆ‘æƒ³å½“ç„¶çš„ <code>Ctrl+C</code> å’Œ <code>Ctrl+V</code>ï¼Œç‰¹ä¹ˆçš„ä¸èµ·ä½œç”¨ï¼Œä»€ä¹ˆæƒ…å†µï¼Ÿæ®è¯´æ˜¯å¿«æ·é”®ä¸ä¸€æ ·ï¼Œæœ¬æ¥æƒ³æ˜¾æ‘†ä¸€ä¸‹çš„ï¼Œç»“æœå¼„å·§æˆæ‹™äº†ï¼Œå°´å°¬å‘€ï¼ˆæ­¤å¤„ç•¥å»ä¸€ä¸‡ä¸ªå­—ï¼‰ï¼Œä½ çœ‹ï¼Œå³æ—¶è¿™æ ·ç®€å•çš„æ“ä½œä¹Ÿä¼šéš¾åˆ°ä¸€ä¸ªä¸€ç±³å…«çš„æ±‰å­ï¼Œå§æ§½ï¼Œè¿™è¿˜äº†å¾—ï¼Œè°èƒ½å‘Šè¯‰æˆ‘è¿™ä¸æ˜¯ <code>ğŸ</code> çš„é”™ï¼Ÿ</p>
<p>ä½ çœ‹ï¼Œäººæœ‰æ—¶å€™ä¼šåœ¨è¿™æ ·å¾®ä¸è¶³é“çš„åœ°æ–¹è·Ÿè‡ªå·±è¾ƒåŠ²çš„ï¼Œè¿™ç®—å¿ƒèƒ¸ç‹­éš˜ä¹ˆï¼Ÿäºæ˜¯æˆ‘å°±äº†è§£äº†ä¸‹è¿™ä¸ªå·ç§°åšä¸å¯æ‘§çš„ç¬”è®°æœ¬ï¼Œå·§çš„æ˜¯ï¼Œæˆ‘æœç´¢å‡ºäº†æ± å»ºå¼ºè€å¸ˆçš„åšå®¢ - <a href="http://macshuo.com/"><code>MacTalk-æ± å»ºå¼ºçš„éšæƒ³å½•</code></a>ï¼Œè¿™çœŸæ˜¯ <code>macOS</code> å½“ä»ä¸è®©çš„å¸ƒé“å¸ˆï¼Œè¿™ä¸ªå·ç§°ç«™åœ¨ç§‘æŠ€å’Œäººæ–‡è·¯å£çš„ 70 åæœ€ç¾çš„æœ€æœ‰é­…åŠ›çš„æœ€æœ‰æ‰åçš„æœ€æ½‡æ´’çš„è€ç¨‹åºå‘˜ç”¨ç”Ÿå‘½è°±å†™äº†ã€ŠMacTalkÂ·äººç”Ÿå…ƒç¼–ç¨‹ã€‹ã€ŠMacTalkÂ·è·¨è¶Šè¾¹ç•Œã€‹ï¼Œæˆ‘æƒ³é—®æ± è€æ‚¨å¼€çš„æ˜¯ä»€ä¹ˆæŒ‚ï¼Ÿ</p>
<p>å¯¹äº†ï¼Œå¤šè¯´ä¸€ä¸‹ï¼Œ2017å¹´7æœˆ31æ—¥ï¼Œæ± è€å‘å¸ƒäº†ä¸€æ¬¾ç»™ç¨‹åºå‘˜ä½¿ç”¨çš„æœç´¢å¼•æ“<a href="https://s.geekbang.org/">ã€Œæå®¢æœç´¢ã€</a>ï¼Œæ¯«ç§’çº§çš„é€Ÿåº¦ï¼Œå§æ§½ï¼Œè¿™ä¸ªé€Ÿåº¦åª²ç¾æ± è€çŠ€åˆ©çš„çœ¼ç¥å‘€ã€‚ä½ çœ‹ï¼Œè¿˜å¾—å¤šåƒæ± è€è¿™æ ·å¤šè¯»ä¹¦ï¼Œä¸ç„¶å°±åƒæˆ‘è¿™æ ·å¼ å£é—­å£åªæœ‰å§æ§½äº†</p>
<p>å°±è¿™æ ·ï¼Œæˆ‘é»˜é»˜åœ°é˜…å®Œæ± è€çš„ä¹¦ï¼Œç”¨ä¿¡ç”¨å¡åˆ·äº†äººç”Ÿçš„ç¬¬ä¸€å° <code>Mac Book Pro</code>ï¼Œæ˜¯ 13 å¯¸çš„ï¼Œç«¥åŸæ— æ¬ºï¼Œè¸ä¸Šäº† <code>macOS</code> çš„ä¸å½’è·¯ï¼Œè‡³ä»Šæœªæ›¾åæ‚”ã€‚</p>
<h2 id="å‘½ä»¤è¡Œå·¥å…·"><a href="#å‘½ä»¤è¡Œå·¥å…·" class="headerlink" title="å‘½ä»¤è¡Œå·¥å…·"></a>å‘½ä»¤è¡Œå·¥å…·</h2><h3 id="æ•ˆç‡å·¥å…·"><a href="#æ•ˆç‡å·¥å…·" class="headerlink" title="æ•ˆç‡å·¥å…·"></a>æ•ˆç‡å·¥å…·</h3><h4 id="Homebrew"><a href="#Homebrew" class="headerlink" title="Homebrew"></a>Homebrew</h4><blockquote>
<ul>
<li><a href="https://brew.sh/">Homebrew Website</a></li>
<li><a href="https://github.com/Homebrew/brew/">Homebrew GitHub</a></li>
<li><a href="https://docs.brew.sh/">Homebrew Documentation</a></li>
<li><a href="http://formulae.brew.sh/">Homebrew Formulae</a></li>
</ul>
</blockquote>
<p>The missing package manager for macOS.</p>
<p>å¯èƒ½æ˜¯ <code>macOS</code> æœ€å¥½ç”¨çš„åŒ…ç®¡ç†å™¨ï¼Œæˆ‘ä¸ç®¡ï¼Œæˆ‘å°±æ˜¯è¿™ä¹ˆè®¤ä¸ºçš„</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// å®‰è£…</span><br><span class="line">$ /usr/bin/ruby -e <span class="string">&quot;<span class="subst">$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)</span>&quot;</span></span><br><span class="line"></span><br><span class="line">// å¸è½½</span><br><span class="line">$ /usr/bin/ruby -e <span class="string">&quot;<span class="subst">$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/uninstall)</span>&quot;</span></span><br></pre></td></tr></table></figure>
<h4 id="Oh-My-Zsh"><a href="#Oh-My-Zsh" class="headerlink" title="Oh My Zsh"></a>Oh My Zsh</h4><blockquote>
<ul>
<li><a href="http://ohmyz.sh/">Oh My Zsh Website</a></li>
<li><a href="https://github.com/robbyrussell/oh-my-zsh">Oh My Zsh GitHub</a></li>
<li><a href="https://github.com/robbyrussell/oh-my-zsh/wiki">Oh My Zsh Documentation</a></li>
<li><a href="https://www.zhihu.com/question/21418449">ä¸ºä»€ä¹ˆè¯´ zsh æ˜¯ shell ä¸­çš„æå“ï¼Ÿ</a></li>
</ul>
</blockquote>
<p>Your terminal never felt this good before.</p>
<p>æ± è€è¯´è¿‡ï¼Œè¿™æ˜¯ç»ˆæ <code>shell</code>ï¼Œå¾ˆå¤šäººéƒ½è®¤ä¸ºå®ƒæ˜¯ <code>shell</code> ä¸­çš„æå“</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// å®‰è£…ï¼šcurl æˆ–è€… wget æ–¹å¼</span><br><span class="line">$ sh -c <span class="string">&quot;<span class="subst">$(curl -fsSL https://raw.githubusercontent.com/robbyrussell/oh-my-zsh/master/tools/install.sh)</span>&quot;</span></span><br><span class="line">æˆ–</span><br><span class="line">sh -c <span class="string">&quot;<span class="subst">$(wget https://raw.githubusercontent.com/robbyrussell/oh-my-zsh/master/tools/install.sh -O -)</span>&quot;</span></span><br><span class="line"></span><br><span class="line">// å¸è½½</span><br><span class="line">$ uninstall_oh_my_zsh</span><br></pre></td></tr></table></figure>
<h4 id="zsh-autosuggestions"><a href="#zsh-autosuggestions" class="headerlink" title="zsh-autosuggestions"></a>zsh-autosuggestions</h4><blockquote>
<ul>
<li><a href="https://github.com/zsh-users/zsh-autosuggestions">zsh-autosuggestions GitHub</a></li>
<li><a href="https://github.com/zsh-users/zsh-autosuggestions/blob/master/INSTALL.md">zsh-autosuggestions Documentation</a></li>
</ul>
</blockquote>
<p>å¼ºå¤§ <code>Zsh</code> çš„å‘½ä»¤æç¤ºã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ brew install zsh-autosuggestions</span><br><span class="line">$ vim ~/.zshrc</span><br><span class="line"><span class="built_in">source</span> /usr/<span class="built_in">local</span>/share/zsh-autosuggestions/zsh-autosuggestions.zsh</span><br><span class="line">$ <span class="built_in">source</span> ~/.zshrc</span><br></pre></td></tr></table></figure>
<h4 id="iTerm2"><a href="#iTerm2" class="headerlink" title="iTerm2"></a>iTerm2</h4><blockquote>
<ul>
<li><a href="https://www.iterm2.com/">iTerm2 Website</a></li>
<li><a href="https://github.com/gnachman/iTerm2">iTerm2 GitHub</a></li>
<li><a href="https://www.iterm2.com/documentation.html">iTerm2 Documentation</a></li>
<li><a href="http://iterm2.com/downloads.html">iTerm2 Downloads</a></li>
</ul>
</blockquote>
<p>iTerm2 is a terminal emulator for macOS that does amazing things.</p>
<p>ä¸èƒ½æ²¡æœ‰çš„ä»¿çœŸç»ˆç«¯ï¼Œè€Œä¸”è¿˜æ˜¯å…è´¹çš„ï¼Œè‰¯å¿ƒè½¯ä»¶å‘€ï¼</p>
<h4 id="Vim"><a href="#Vim" class="headerlink" title="Vim"></a>Vim</h4><blockquote>
<ul>
<li><a href="http://vim.spf13.com/">Ultimate Vim Website</a></li>
<li><a href="https://github.com/spf13/spf13-vim">Ultimate Vim GitHub</a></li>
<li><a href="https://github.com/spf13/spf13-vim/wiki">Ultimate Vim Documentation</a></li>
</ul>
</blockquote>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// å®‰è£…</span><br><span class="line">$ curl http://j.mp/spf13-vim3 -L -o - | sh</span><br><span class="line">æˆ–è€…</span><br><span class="line">$ curl https://j.mp/spf13-vim3 -L &gt; spf13-vim.sh &amp;&amp; sh spf13-vim.sh</span><br><span class="line"></span><br><span class="line">// å¸è½½</span><br><span class="line">$ sh ~/.spf13-vim-3/uninstall.sh</span><br></pre></td></tr></table></figure>
<p>The Ultimate Vim Distribution.</p>
<p>ç”¨è¿‡ <code>Vim</code>ï¼Œä½†æƒ³ç”¨ç»ˆçº§ <code>Vim</code>ï¼Œä½ å°±è¯•è¯•ã€‚</p>
<h3 id="å¼€å‘å·¥å…·"><a href="#å¼€å‘å·¥å…·" class="headerlink" title="å¼€å‘å·¥å…·"></a>å¼€å‘å·¥å…·</h3><h4 id="Git"><a href="#Git" class="headerlink" title="Git"></a>Git</h4><blockquote>
<p><a href="https://git-scm.com/"><code>Git</code></a> - Git is a <a href="https://git-scm.com/about/free-and-open-source">free and open source</a> distributed version control system designed to handle everything from small to very large projects with speed and efficiency. Git is <a href="https://git-scm.com/documentation">easy to learn</a> and has a <a href="https://git-scm.com/about/small-and-fast">tiny footprint with lightning fast performance</a>. It outclasses SCM tools like Subversion, CVS, Perforce, and ClearCase with features like <a href="https://git-scm.com/about/branching-and-merging">cheap local branching</a>, convenient <a href="https://git-scm.com/about/staging-area">staging areas</a>, and <a href="https://git-scm.com/about/distributed">multiple workflows</a>.</p>
</blockquote>
<p>è¿™ä¸ªå¹´å¤´ä½ è¦æ˜¯ä¸ä¼šç”¨ <code>git</code>ï¼Œå‡ºé—¨ä¼šè¢«äººå˜²ç¬‘çš„ï¼Œå°¤å…¶æ˜¯ç¨‹åºå‘˜ã€‚</p>
<div class="note warning">
            <p>ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œä¸éœ€è¦å®‰è£…ï¼Œå› ä¸º <code>Xcode Command Line Tools</code> å°±è‡ªå¸¦ã€‚</p>
          </div>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// å®‰è£…</span><br><span class="line">$ brew install git</span><br><span class="line"></span><br><span class="line">// å¸è½½</span><br><span class="line">$ brew uninstall git</span><br></pre></td></tr></table></figure>
<h4 id="Curl"><a href="#Curl" class="headerlink" title="Curl"></a>Curl</h4><blockquote>
<p><a href="https://curl.haxx.se/"><code>Curl</code></a> - Command line tool and library for transferring data with URLs. curl is used in command lines or scripts to transfer data. It is also used in cars, television sets, routers, printers, audio equipment, mobile phones, tablets, settop boxes, media players and is the internet transfer backbone for thousands of software applications affecting billions of humans daily.</p>
</blockquote>
<p>ä¸ä¼šä½¿ç”¨è¿™ä¸ªå·¥å…·ï¼Œä½ ä¹Ÿé…è°ˆäº’è”ç½‘ï¼Œåˆ«å›å¤´ï¼Œè¯´çš„å°±æ˜¯ä½ </p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// å®‰è£…</span><br><span class="line">$ brew install curl</span><br><span class="line"></span><br><span class="line">// å¸è½½</span><br><span class="line">$ brew uninstall curl</span><br></pre></td></tr></table></figure>
<h2 id="çª—ä½“å·¥å…·"><a href="#çª—ä½“å·¥å…·" class="headerlink" title="çª—ä½“å·¥å…·"></a>çª—ä½“å·¥å…·</h2><h3 id="æ•ˆç‡å·¥å…·-1"><a href="#æ•ˆç‡å·¥å…·-1" class="headerlink" title="æ•ˆç‡å·¥å…·"></a>æ•ˆç‡å·¥å…·</h3><blockquote>
<p><code>@hzlzh</code> å·²ç»åšè¿‡ä¸€ä¸ªéå¸¸ä¼˜ç§€çš„é£Ÿè°± - <a href="https://github.com/hzlzh/Best-App"><code>Best App</code></a>ï¼Œé‡Œé¢åˆ—å‡ºäº†å¾ˆå¤šä¼˜ç§€çš„è½¯ä»¶ï¼Œä½†æ˜¯å‘¢ï¼Œè¿™ä¸ªå¤ªå¤šäº†ï¼Œæˆ‘æ˜¯æ–­ä¸å¯èƒ½æŠŠè¿™ä¹ˆå¤šè½¯ä»¶éƒ½ç”¨çš„å‡ºç¥å…¥åŒ–ï¼Œèƒ½å¸¸ç”¨çš„å¯èƒ½çœŸæ²¡å‡ ä¸ªï¼Œä¹Ÿå¯èƒ½æ˜¯æˆ‘å­¤é™‹å¯¡é—»ï¼Œæ²¡è§è¿‡çœŸæ­£çš„å¤§ç¥æ˜¯æ€ä¹ˆæŠŠè¿™ä¹ˆå¤šå·¥å…·ç”¨çš„ç™»å³°é€ æçš„ï¼Œä¸è¿‡æ„Ÿè°¢ <code>@hzlzh</code> å’Œç»´æŠ¤è¿™ä»½é£Ÿè°±çš„ä¼™ä¼´ä»¬ï¼Œæœ‰ä½ ä»¬è¿™æ ·çš„æå®¢ï¼Œæ‰æˆå°±äº†æ›´å¤šäººçš„æ–¹ä¾¿</p>
</blockquote>
<h4 id="Alfred"><a href="#Alfred" class="headerlink" title="Alfred"></a>Alfred</h4><blockquote>
<p><a href="https://www.alfredapp.com"><code>Alfred</code></a> is an award-winning app for Mac OS X which boosts your efficiency with hotkeys, keywords, text expansion and more. Search your Mac and the web, and be more productive with custom actions to control your Mac.</p>
</blockquote>
<p><code>macOS</code> çš„ç¥å…µåˆ©å™¨ï¼Œè¿„ä»Šä¸ºæ­¢æœ€å…·æ•ˆç‡çš„è½¯ä»¶ï¼Œæ²¡æœ‰ä¹‹ä¸€ï¼Œä¸è§£é‡Š</p>
<p><code>Alfred Workflow</code> è®©ä½ éšå¿ƒæ‰€æ¬²ï¼š</p>
<ul>
<li><a href="https://www.zhihu.com/question/22301362">å¦‚ä½•ç¼–å†™ <code>Alfred</code> ä½¿ç”¨çš„ <code>Workflow</code>ï¼Œéœ€è¦æŒæ¡å“ªäº›çŸ¥è¯†ï¼Ÿ</a></li>
<li><a href="https://www.zhihu.com/question/20656680">å€ŸåŠ© <code>Alfred</code> çš„ <code>Workflows</code> åŠŸèƒ½å¯ä»¥åšå“ªäº›å¥½ç©çš„äº‹æƒ…ï¼Ÿ</a></li>
<li><a href="http://alfredworkflow.com">å†™ä¸äº† <code>Workflows</code> æˆ‘å°±ç”¨åˆ«äººçš„ <code>Workflows</code>ï¼Œæˆ‘æœ‰ç‚¹æ— è€»</a></li>
</ul>
<h4 id="1Password"><a href="#1Password" class="headerlink" title="1Password"></a>1Password</h4><blockquote>
<p><a href="https://1password.com"><code>1Password</code></a> remembers them all for you. Save your passwords and log in to sites with a single click. Itâ€™s that simple.</p>
</blockquote>
<p>åŸæ¥ç®¡ç†å¯†ç è´¦å·ä¹Ÿé‚£ä¹ˆè½»æ¾å‘€ï¼Œè°ç”¨è°çŸ¥é“ï¼Œä¸è§£é‡Š</p>
<h4 id="iStat-Menus-6"><a href="#iStat-Menus-6" class="headerlink" title="iStat Menus 6"></a>iStat Menus 6</h4><blockquote>
<p><a href="https://bjango.com/mac/istatmenus/"><code>iStat Menus 6</code></a> - An advanced Mac system monitor for your menubar.</p>
</blockquote>
<p>èœå•æ ç›‘è§†ç³»ç»Ÿè¿è¡ŒçŠ¶å†µï¼Œå¼ºè¿«ç—‡å¿…å¤‡</p>
<h4 id="Bartender-3"><a href="#Bartender-3" class="headerlink" title="Bartender 3"></a>Bartender 3</h4><blockquote>
<p><a href="https://www.macbartender.com"><code>Bartender 3</code></a> - Organize your menu bar apps. <code>Bartender 3</code> lets you organize your menu bar apps, by hiding them, rearranging them, or moving them to the Bartender Items. You can display the full menu bar, set options to have menu bar items show in the menu bar when they have updated, or have them visible in the Bartender Items whenever you want.</p>
</blockquote>
<p>èšåˆèœå•æ å›¾æ ‡ï¼Œå¼ºè¿«ç—‡å¿…å¤‡</p>
<h4 id="CleanMyMac-3"><a href="#CleanMyMac-3" class="headerlink" title="CleanMyMac 3"></a>CleanMyMac 3</h4><blockquote>
<p><a href="https://macpaw.com/cleanmymac"><code>CleanMyMac 3</code></a> - Clean, optimize, and maintain your Mac with the all-new CleanMyMac 3. It scans every inch of your system, removes gigabytes of junk in just two clicks, and monitors the health of your Mac.</p>
</blockquote>
<p>æ¸…ç†ã€ä¼˜åŒ–ã€ç»´æŠ¤ç³»ç»Ÿï¼Œä½†æ¯”æµæ°“çš„èŠ‚æ“è¦é«˜ï¼Œæœ‰åº•çº¿</p>
<h4 id="Paste"><a href="#Paste" class="headerlink" title="Paste"></a>Paste</h4><blockquote>
<p><a href="https://pasteapp.me"><code>Paste</code></a> - Never lose anything youâ€™ve copied on your Mac again. Paste automatically stores everything you copy across all your devices and keeps your clipboard history organized.</p>
</blockquote>
<p>è¿ç»´çš„æœ€çˆ±ï¼Œå½“ç„¶ï¼Œå®ƒä¹Ÿå¯ä»¥æ˜¯ä½ çš„çœŸçˆ±ï¼Œ<code>Time machine for your clipboard</code>ï¼Œä¸æ˜¯ç›–çš„ï¼Œä»æ­¤å¤åˆ¶ç²˜è´´å¦‚è¡Œäº‘æµæ°´</p>
<h4 id="aText"><a href="#aText" class="headerlink" title="aText"></a>aText</h4><blockquote>
<p><a href="http://www.trankynam.com/atext/"><code>aText Typing Accelerator</code></a> - aText accelerates your typing by replacing abbreviations with frequently used phrases you define.</p>
</blockquote>
<p>ç¾¡æ…•è¿‡åˆ«äººçš„è¾“å…¥é€Ÿåº¦ï¼Œä½ æ˜¯ä¸æ˜¯ä¹Ÿè ¢è ¢æ¬²åŠ¨ï¼Œtry ä¸€ä¸‹è¿™ä¸ªï¼Œä½ ä¹Ÿå¯ä»¥çš„</p>
<h4 id="MWeb"><a href="#MWeb" class="headerlink" title="MWeb"></a>MWeb</h4><blockquote>
<p><a href="http://zh.mweb.im"><code>Mweb</code></a> - <code>MWeb</code> for Mac, iPad and iPhoneï¼Œä¸“ä¸šçš„ <code>Markdown</code> å†™ä½œã€è®°ç¬”è®°ã€é™æ€åšå®¢ç”Ÿæˆè½¯ä»¶</p>
</blockquote>
<p>æœ€å¥½çš„ <code>Markdown</code> å†™ä½œè½¯ä»¶ä¹‹ä¸€</p>
<p>æ˜¯çš„ï¼Œ<code>Markdown</code> å†™ä½œè½¯ä»¶æ¯”è¾ƒå¤šï¼Œå„äººæœ‰å„äººçš„å–œå¥½å§ï¼Œåƒæˆ‘åçˆ± <code>Mweb</code> å¤šä¸€ç‚¹è€Œå·²ã€‚æ¯ä¸ªäººçš„ä½¿ç”¨åœºæ™¯ä¸å°½ç›¸åŒï¼Œæ‰€ä»¥å‘¢ï¼Œè‡ªå·±æŒ‘å§ï¼Œåæ­£æœ‰è¿™ä¹ˆå¤šé€‰æ‹©å‘¢ï¼Œå‹æƒ…æç¤ºï¼šä¸è¦æŒ‘èŠ±çœ¼äº†ï¼Œé€‰ä¸€ä¸¤ä¸ªå°±å¥½ï¼Œæ¯•ç«Ÿå†™æ‰æ˜¯ç›®çš„å˜›</p>
<p>åŒæ ·åœ¨ä½¿ç”¨åŒæ ·çš„å·¥å…·ï¼Œæœ‰äº›äººçœŸå°±æŠŠå·¥å…·ç”¨å‡ºäº†èŠ±ï¼Œè¿™ä¸ªå¢ƒç•Œï¼Œæˆ‘ä¹Ÿå¾—è¯•ä¸€ä¸‹</p>
<ul>
<li><a href="https://sspai.com/post/32483">ç å­—å¿…å¤‡ï¼š18 æ¬¾ä¼˜ç§€çš„ Markdown å†™ä½œå·¥å…· | 2015 å¹´åº¦ç›˜ç‚¹</a></li>
<li><a href="http://www.ifanr.com/app/665209">è®©ä½ çˆ±ä¸Šå†™ä½œçš„ 11 æ¬¾ Markdown å·¥å…· | ä¸“é¢˜ Â· å†™ä½œ</a></li>
<li><a href="https://www.zhihu.com/question/19637157">ç”¨ Markdown å†™ä½œç”¨ä»€ä¹ˆæ–‡æœ¬ç¼–è¾‘å™¨ï¼Ÿ</a></li>
</ul>
<h4 id="Quick-Look-Plugin"><a href="#Quick-Look-Plugin" class="headerlink" title="Quick Look Plugin"></a>Quick Look Plugin</h4><blockquote>
<p><a href="https://github.com/sindresorhus/quick-look-plugins"><code>Quick Look Plugin</code></a></p>
</blockquote>
<p>å¿«é€Ÿé¢„è§ˆçš„æ’ä»¶ï¼Œæ— è®ºå›¾ç‰‡ã€æ–‡æœ¬ï¼Œä¸è¯•ä¸€ä¸‹æ€ä¹ˆçŸ¥é“å‘¢ï¼Ÿè¯·å…ˆå®‰è£… <a href="https://caskroom.github.io/"><code>Homebrew Cask</code></a></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ brew cask install qlcolorcode qlstephen qlmarkdown quicklook-json qlimagesize webpquicklook suspicious-package quicklookase qlvideo</span><br></pre></td></tr></table></figure>
<h3 id="å¼€å‘å·¥å…·-1"><a href="#å¼€å‘å·¥å…·-1" class="headerlink" title="å¼€å‘å·¥å…·"></a>å¼€å‘å·¥å…·</h3><h4 id="JetBrains-IDE"><a href="#JetBrains-IDE" class="headerlink" title="JetBrains IDE"></a><code>JetBrains IDE</code></h4><blockquote>
<p><a href="https://www.jetbrains.com/products.html?fromMenu"><code>JetBrains</code> å…¨å®¶æ¡¶</a> - Whichever technologies you use, thereâ€™s a JetBrains tool to match.</p>
</blockquote>
<p>ä½ å°±å¯¹å·å…¥åº§å§ï¼Œæˆ‘æ˜¯ <code>PHPer</code>ï¼Œæˆ‘é€‰ <code>PhpStorm</code></p>
<h4 id="Visual-Studio-Code"><a href="#Visual-Studio-Code" class="headerlink" title="Visual Studio Code"></a><code>Visual Studio Code</code></h4><blockquote>
<p><a href="https://code.visualstudio.com/"><code>Visual Studio Code</code></a> - Code editing. Redefined. Free. Open source. Runs everywhere. Visual Studio Code is a lightweight but powerful source code editor which runs on your desktop and is available for Windows, macOS and Linux. It comes with built-in support for JavaScript, TypeScript and Node.js and has a rich ecosystem of extensions for other languages (such as C++, C#, Java, Python, PHP, Go) and runtimes (such as .NET and Unity). Begin your journey with VS Code with these <a href="https://code.visualstudio.com/docs/getstarted/introvideos">introductory videos</a>.</p>
</blockquote>
<p>å®‡å®™æœ€å¼ºçš„ç¼–è¾‘å™¨éš¾é“ä¸æ˜¯ <code>Vim or Emacs</code>ï¼Œ<code>NO NO NO</code>ï¼Œä½ ä¹Ÿçœ‹è§äº†ï¼Œå¾®è½¯å‘æ¥ä¸æœå‘€</p>
<h4 id="Sublime-Text-3"><a href="#Sublime-Text-3" class="headerlink" title="Sublime Text 3"></a><code>Sublime Text 3</code></h4><blockquote>
<p><a href="https://www.sublimetext.com/"><code>Sublime Text 3</code></a> - A sophisticated text editor for code, markup and prose.</p>
</blockquote>
<p>è¿™ä¸ªæˆ‘å°±ä¸è¯´äº†ï¼Œå¿«æ·é”®è®¾ç½®çš„æœ€ä¸ºä¼˜é›…ï¼Œæ‰€ä»¥æˆ‘æŠŠ <code>PhpStorm</code> å’Œ <code>Visual Studio Code</code> çš„å¿«æ·é”®éƒ½æ˜ å°„æˆäº† <code>Sublime</code> è¿™ä¸ªå¾·æ€§ï¼Œä¸€å¥—å¿«æ·é”®ä¸€ç»Ÿæ±Ÿæ¹–</p>
<p>æœªå®Œå¾…ç»­ã€‚ã€‚ã€‚</p>
]]></content>
      <categories>
        <category>mac</category>
      </categories>
      <tags>
        <tag>mac</tag>
      </tags>
  </entry>
  <entry>
    <title>Mac Homebrew Cask</title>
    <url>/2018/02/05/mac-homebrew-cask/</url>
    <content><![CDATA[<p>ä¸€è¡Œå‘½ä»¤æå®šä½ è¦å®‰è£…çš„è½¯ä»¶ï¼Œçœæ‰äº†è‡ªå·±å»ä¸‹è½½ã€è§£å‹ã€æ‹–æ‹½è¿™äº›æ“ä½œï¼Œ<code>Cask</code> ä½ å€¼å¾—æ‹¥æœ‰</p>
<span id="more"></span>
<h2 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h2><blockquote>
<ul>
<li><a href="https://caskroom.github.io/">Homebrew Cask Website</a></li>
<li><a href="https://github.com/caskroom/homebrew-cask">Homebrew Cask GitHub</a></li>
<li><a href="https://github.com/caskroom/homebrew-cask/blob/master/USAGE.md">Homebrew Cask Documentation</a></li>
<li><a href="https://caskroom.github.io/search">Homebrew Cask Package Search</a></li>
</ul>
</blockquote>
<p>A CLI workflow for the administration of macOS applications distributed as binaries.</p>
<h2 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ brew tap caskroom/cask</span><br></pre></td></tr></table></figure>
<h2 id="æ“ä½œ"><a href="#æ“ä½œ" class="headerlink" title="æ“ä½œ"></a>æ“ä½œ</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// å®‰è£…åº”ç”¨è½¯ä»¶</span><br><span class="line">$ brew cask install package-name</span><br><span class="line"></span><br><span class="line">// å¸è½½åº”ç”¨è½¯ä»¶</span><br><span class="line">$ brew cask uninstall package-name</span><br><span class="line"></span><br><span class="line">// æ›´æ–°åº”ç”¨è½¯ä»¶</span><br><span class="line">$ brew cask reinstall package-name</span><br><span class="line"></span><br><span class="line">// æœç´¢åº”ç”¨è½¯ä»¶</span><br><span class="line">$ brew cask search package-name</span><br><span class="line"></span><br><span class="line">// æŸ¥çœ‹åº”ç”¨è½¯ä»¶è¯¦æƒ…</span><br><span class="line">$ brew cask info package-name</span><br><span class="line"></span><br><span class="line">// æŸ¥çœ‹å®‰è£…è½¯ä»¶åˆ—è¡¨</span><br><span class="line">$ brew cask list</span><br><span class="line"></span><br><span class="line">// æ£€æŸ¥é…ç½®é—®é¢˜</span><br><span class="line">$ brew cask doctor</span><br><span class="line"></span><br><span class="line">// æ¸…ç†ç¼“å­˜ä¸‹è½½å’Œè·Ÿè¸ªç¬¦å·é“¾æ¥</span><br><span class="line">$ brew cask cleanup</span><br><span class="line"></span><br><span class="line">// è½¬åˆ°ä¸»é¡µ</span><br><span class="line">$ brew cask home</span><br><span class="line"></span><br><span class="line">// æŸ¥çœ‹ç‰ˆæœ¬</span><br><span class="line">$ brew cask --version</span><br><span class="line"></span><br><span class="line">// æŸ¥çœ‹å¸®åŠ©å‘½ä»¤</span><br><span class="line">$ brew cask <span class="built_in">help</span></span><br></pre></td></tr></table></figure>
<h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><blockquote>
<p><a href="https://www.zhihu.com/question/22624898"><code>brew</code> å’Œ <code>brew cask</code> æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</a><br><a href="https://zhuanlan.zhihu.com/p/28208648"><code>Homebrew cask</code> è®© <code>macOS</code> é”¦ä¸Šæ·»èŠ±</a></p>
</blockquote>
]]></content>
      <categories>
        <category>mac</category>
      </categories>
      <tags>
        <tag>mac</tag>
      </tags>
  </entry>
  <entry>
    <title>Mac VSCode åŸºæœ¬æ“ä½œ</title>
    <url>/2018/12/03/mac-vscode-basic/</url>
    <content><![CDATA[<p><img src="/images/2019/201906201022.jpg" alt="201906201022.jpg"></p>
<p>ğŸˆ‚ï¸ç»å¸¸ç å­—å°‘ä¸äº†å¿«æ·é”®çš„å¸®è¡¬ï¼Œæœ‰äº›ç¥å¥‡çš„æ•ˆæœå±…ç„¶æ˜¯åœ¨è¯¯æŒ‰ä¹‹ä¸‹å‡ºç°ï¼Œç€å®æŠŠæˆ‘æƒŠå‘†äº†ï¼Œè¿˜æœ‰è¿™ç§æ“ä½œä¹‹çŠ¶æ­¤èµ·å½¼ä¼ã€‚ç»å¸¸åœ¨è¯¯æ“ä½œåè®°ä¸å¾—å¯¹åº”çš„å¿«æ·é”®ï¼Œçæ¿€åŠ¨ä¸€ä¼šå„¿ååˆå˜ç„¶è€Œæ­¢ã€‚ä¸ºäº†é¿å…è¿™ç§å‡ åº¦çš„å°´å°¬çª˜å¢ƒï¼Œæˆ‘è¿˜æ˜¯å†³å®šåŠ¨åŠ¨æ‡’ç¬”å¤´è®°ä¸€è®°ï¼Œä¸‡ä¸€å“ªå¤©æƒ³èµ·è¿™ç§æ“ä½œäº†å‘¢ï¼Ÿ</p>
<span id="more"></span>
<h1 id="åŸºç¡€æ“ä½œæ³•"><a href="#åŸºç¡€æ“ä½œæ³•" class="headerlink" title="åŸºç¡€æ“ä½œæ³•"></a>åŸºç¡€æ“ä½œæ³•</h1><h2 id="å…‰æ ‡æ“ä½œ"><a href="#å…‰æ ‡æ“ä½œ" class="headerlink" title="å…‰æ ‡æ“ä½œ"></a>å…‰æ ‡æ“ä½œ</h2><ul>
<li>å•è¯ç²’åº¦çš„å…‰æ ‡ç§»åŠ¨ï¼šå·¦ç§» <code>Alt+â¬…ï¸</code>ï¼›å³ç§» <code>Alt+â¡ï¸</code></li>
<li>è¡Œé¦–è¡Œå°¾çš„å…‰æ ‡ç§»åŠ¨ï¼šè¡Œé¦– <code>Cmd+â¬…ï¸</code>ï¼›è¡Œå°¾ <code>Cmd+â¡ï¸</code></li>
<li>ä»£ç å—é—´çš„å…‰æ ‡ç§»åŠ¨ï¼šæŒ‰ä¸‹ <code>Shift+Cmd+\</code> åå†å·¦å³é—­åˆæ ‡ç­¾ä¹‹å‰æ¥å›ç§»åŠ¨</li>
<li>æ–‡æ¡£é¦–å°¾çš„å…‰æ ‡ç§»åŠ¨ï¼šæ–‡æ¡£é¦–éƒ¨ <code>Cmd+â¬†ï¸</code>ï¼›æ–‡æ¡£å°¾éƒ¨ <code>Cmd+â¬‡ï¸</code></li>
<li>æŸè¡Œæ–‡æœ¬å‰åæ’å…¥ç©ºè¡Œï¼šæŸè¡Œæ–‡æœ¬å‰ä¸€è¡Œæ’å…¥ç©ºè¡Œ <code>Shift+Cmd+Enter</code>ï¼›æŸè¡Œæ–‡æœ¬åä¸€è¡Œæ’å…¥ç©ºè¡Œ <code>Cmd+Enter</code></li>
</ul>
<h2 id="æ–‡æœ¬æ“ä½œ"><a href="#æ–‡æœ¬æ“ä½œ" class="headerlink" title="æ–‡æœ¬æ“ä½œ"></a>æ–‡æœ¬æ“ä½œ</h2><ul>
<li>é€‰ä¸­å…‰æ ‡å‰åçš„å•è¯ï¼šé€‰ä¸­å…‰æ ‡ä¹‹å‰çš„å•è¯ <code>Shift+Alt+â¬…ï¸</code>ï¼Œç»§ç»­æŒ‰å·¦æ–¹å‘é”®é€‰ä¸­æ›´å¤šçš„å•è¯ï¼›é€‰ä¸­å…‰æ ‡ä¹‹åçš„å•è¯ <code>Shift+All+â¡ï¸</code>ï¼Œç»§ç»­æŒ‰å³æ–¹å‘é”®é€‰ä¸­æ›´å¤šçš„å•è¯</li>
<li>é€‰ä¸­å…‰æ ‡å‰åçš„æ•´è¡Œï¼šé€‰ä¸­å…‰æ ‡ä¹‹å‰çš„æ•´è¡Œ <code>Shift+Cmd+â¬…ï¸</code>ï¼›é€‰ä¸­å…‰æ ‡ä¹‹åçš„æ•´è¡Œ <code>Shift+Cmd+â¡ï¸</code></li>
<li>é€‰ä¸­å…‰æ ‡æ‰€åœ¨çš„æŸä¸ªé—­åˆæ ‡ç­¾ä¸­çš„ä»£ç ï¼š<code>Ctrl+Shift+Cmd+â¡ï¸</code>ï¼Œç»§ç»­æŒ‰å³æ–¹å‘é”®æ‰©å¤§é€‰æ‹©èŒƒå›´ï¼ŒæŒ‰å·¦æ–¹å‘é”®ç¼©å°é€‰æ‹©èŒƒå›´</li>
<li>è¿åŒé—­åˆæ ‡ç­¾ä¸€èµ·é€‰ä¸­ï¼ŒæŒ‰ <code>Shift+Cmd+P</code>ï¼Œè¾“å…¥ <code>Select to Bracket</code></li>
<li>é€‰ä¸­æ•´è¡Œï¼šæŒ‰ <code>Cmd+I</code> ç›´æ¥é€‰ä¸­æ•´è¡Œï¼›æŒ‰ <code>Cmd+â¬…ï¸</code> æˆ– <code>Cmd+â¡ï¸</code> å°†å…‰æ ‡å®šä½åˆ°è¡Œé¦–æˆ–è€…è¡Œå°¾ï¼Œç„¶åæŒ‰ <code>Shift+Cmd+â¡ï¸</code> æˆ– <code>Shift+Cmd+â¬…ï¸</code></li>
<li>åˆ é™¤å…‰æ ‡å‰åçš„å•è¯ï¼šåˆ é™¤å…‰æ ‡å‰çš„å•è¯ <code>Alt+Delete</code>ï¼›åˆ é™¤å…‰æ ‡åçš„å•è¯ <code>fn+Alt+Delete</code></li>
<li>åˆ é™¤å…‰æ ‡å‰åçš„æ•´è¡Œï¼šåˆ é™¤å…‰æ ‡å‰çš„æ–‡æœ¬ <code>Cmd+Delete</code>ï¼›åˆ é™¤å…‰æ ‡åçš„æ–‡æœ¬ <code>fn+Cmd+Delete</code></li>
<li>åˆ é™¤æ•´è¡Œï¼šæŒ‰ <code>Cmd+X</code> å°†æ•´è¡Œå‰ªåˆ‡æ‰ï¼›æŒ‰ <code>Ctrl+Shift+K</code> åˆ é™¤æ‰æ•´è¡Œï¼›å…ˆé€‰ä¸­ä¸€è¡Œï¼Œå†æŒ‰ <code>Delete</code> åˆ é™¤æ•´è¡Œ</li>
<li>å•è¡Œæ–‡æœ¬ç§»åŠ¨ï¼šå•è¡Œæ–‡æœ¬å‘ä¸Šç§»åŠ¨ <code>Alt+â¬†ï¸</code>ï¼›å•è¡Œæ–‡æœ¬å‘ä¸‹ç§»åŠ¨ <code>Alt+â¬‡ï¸</code></li>
<li>å¤šè¡Œæ–‡æœ¬ç§»åŠ¨ï¼šé€‰ä¸­å¤šè¡Œæ–‡æœ¬å¹¶æŒ‰ <code>Alt+â¬†ï¸</code>ï¼›é€‰ä¸­å¤šè¡Œæ–‡æœ¬å¹¶æŒ‰ <code>Alt+â¬‡ï¸</code></li>
<li>å•è¡Œæ–‡æœ¬å¤åˆ¶ï¼šå•è¡Œæ–‡æœ¬å‘ä¸Šå¤åˆ¶ <code>Shift+Alt+â¬†ï¸</code>ï¼›å•è¡Œæ–‡æœ¬å‘ä¸‹å¤åˆ¶ <code>Shift+Alt+â¬‡ï¸</code></li>
<li>å¤šè¡Œæ–‡æœ¬å¤åˆ¶ï¼šé€‰ä¸­å¤åˆ¶çš„æ–‡æœ¬åæŒ‰ <code>Shift+Alt+â¬†ï¸</code>ï¼›é€‰ä¸­å¤åˆ¶çš„æ–‡æœ¬åæŒ‰ <code>Shift+Alt+â¬‡ï¸</code></li>
<li>ä»£ç æ³¨é‡Šï¼šå•è¡Œæ³¨é‡Š <code>Cmd+/</code>ï¼›å¤šè¡Œæ³¨é‡Š <code>Alt+Shift+A</code></li>
<li>ä»£ç æ ¼å¼åŒ–ï¼šé€‰ä¸­æ ¼å¼åŒ– <code>Cmd+K Cmd+F</code>ï¼›æ–‡æ¡£æ ¼å¼åŒ– <code>Alt+Shift+F</code></li>
<li>ä»£ç ç¼©è¿›ï¼šå·¦ç¼©è¿› <code>Cmd+[</code>ï¼›å³ç¼©è¿› <code>Cmd+]</code></li>
<li>è°ƒæ¢å­—ç¬¦çš„ä½ç½®ï¼š<code>Ctrl+T</code></li>
<li>è°ƒæ•´å­—ç¬¦çš„å¤§å°å†™ï¼šè½¬æ¢ä¸ºå¤§å†™ï¼ŒæŒ‰ <code>Shift+Cmd+P</code> åè¾“å…¥ <code>Transform to Uppercase</code>ï¼›è½¬æ¢ä¸ºå°å†™ï¼ŒæŒ‰ <code>Shift+Cmd+P</code> åè¾“å…¥ <code>Transform to Lowercase</code>ã€‚æ›´é«˜çº§çš„è½¬æ¢ä½¿ç”¨ <a href="https://github.com/wmaurer/vscode-change-case">Change Case Extension for Visual Studio Code</a> æ’ä»¶</li>
<li>åˆå¹¶åˆ°ä¸€è¡Œï¼šæŒ‰ <code>Ctrl+J</code></li>
<li>CSS å±æ€§æ’åºï¼šå‡åºæ’åˆ—ï¼ŒæŒ‰ <code>Shift+Cmd+P</code> åè¾“å…¥ <code>Sort Lines Ascending</code>ï¼›é™åºæ’åˆ—ï¼ŒæŒ‰ <code>Shift+Cmd+P</code> åè¾“å…¥ <code>Sort Lines Descending</code></li>
<li>æ’¤é”€å…‰æ ‡çš„ç§»åŠ¨å’Œé€‰æ‹©ï¼šæŒ‰ <code>Cmd+U</code></li>
<li>åˆ›å»ºå¤šå…‰æ ‡ï¼šé’ˆå¯¹ç›¸åŒçš„æ–‡æœ¬æŒ‰ <code>Cmd+D</code> ä¾æ¬¡åˆ›å»ºå…‰æ ‡ï¼›é’ˆå¯¹ä¸åŒçš„æ–‡æœ¬ï¼Œå…ˆé€‰ä¸­æ“ä½œçš„æ–‡æœ¬ï¼Œç„¶åæŒ‰ <code>Alt+Shift+I</code> å°†å…‰æ ‡å®šä½åˆ°é€‰ä¸­çš„æ‰€æœ‰æ–‡æœ¬æœ«å°¾ï¼›é’ˆå¯¹è¦æ“ä½œçš„ä¸€å—æ–‡æœ¬ï¼ŒæŒ‰ <code>Alt+Cmd+â¬‡ï¸</code> å‘ä¸‹ä¾æ¬¡åˆ›å»ºå…‰æ ‡ï¼ŒæŒ‰ <code>Alt+Cmd+â¬†ï¸</code> å‘ä¸Šä¾æ¬¡åˆ›å»ºå…‰æ ‡</li>
</ul>
<h2 id="æ–‡ä»¶æ“ä½œ"><a href="#æ–‡ä»¶æ“ä½œ" class="headerlink" title="æ–‡ä»¶æ“ä½œ"></a>æ–‡ä»¶æ“ä½œ</h2><ul>
<li>å½“å‰æ‰“å¼€çš„æ–‡ä»¶é—´è·³è½¬ï¼šæŒ‰ <code>Ctrl+Tab</code> æ‰“å¼€å·²ç»æ‰“å¼€çš„æ–‡ä»¶åˆ—è¡¨ï¼Œæ¥ç€æŒ‰åˆ°æƒ³è¦å®šä½çš„æ–‡ä»¶åæ¾æ‰‹</li>
<li>æœ€è¿‘æ‰“å¼€çš„æ–‡ä»¶é—´è·³è½¬ï¼šæŒ‰ <code>Cmd+P</code> æ‰“å¼€æœ€è¿‘æ‰“å¼€è¿‡çš„æ–‡ä»¶åˆ—è¡¨ï¼Œæ¥ç€ä¸è¦æ¾å¼€ <code>Cmd</code> é”®ç›´æ¥æŒ‰ <code>P</code> å®šä½åˆ°æ–‡ä»¶åæ¾æ‰‹ï¼Œæˆ–è€…ç›´æ¥åœ¨è¾“å…¥æ¡†ä¸­æ¨¡ç³Šæœç´¢ï¼›åœ¨æ–‡ä»¶åˆ—è¡¨å¾ˆé•¿æ—¶ï¼Œè·³è¿‡äº†å°†è¦é€‰ä¸­çš„æ–‡ä»¶ï¼Œå¯ä»¥æŒ‰ä¸Šä¸‹æ–¹å‘é”®å›å»</li>
<li>åœ¨æ–°æ ‡ç­¾ä¸­æ‰“å¼€å®šä½çš„æ–‡ä»¶ï¼šåœ¨ <code>Cmd+P</code> æ¨¡ç³Šæœç´¢åŠ æŒä¸‹å®šä½åˆ°æƒ³æ‰“å¼€çš„æ–‡ä»¶ï¼ŒæŒ‰ <code>Cmd+Enter</code> å°†æ‹†åˆ†å½“å‰çª—å£æ‰“å¼€å®šä½çš„æ–‡ä»¶ï¼›åœ¨ <code>Cmd+P</code> å¾ªç¯åŠ æŒä¸‹å®šä½åˆ°æƒ³æ‰“å¼€çš„æ–‡ä»¶ï¼Œéœ€è¦é¼ æ ‡ç‚¹å‡»æ‹†åˆ†çª—å£æŒ‰é’®</li>
<li>è¡Œé—´è·³è½¬ï¼šæŒ‰ <code>Ctrl+G</code> è¾“å…¥ç­‰å·ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥åœ¨è¡Œå·ååŠ  <code>:</code> å†è¾“å…¥åˆ—å·</li>
<li>ç²¾ç¡®è·³è½¬åˆ°æ–‡ä»¶çš„æŒ‡å®šè¡Œåˆ—ï¼š<code>Cmd+P</code> æœç´¢åˆ°æ–‡ä»¶åè¾“å…¥ <code>:è¡Œå·:åˆ—å·</code> å³å¯</li>
<li>ä»…å½“å‰æ–‡ä»¶ç¬¦å·è·³è½¬ï¼šæŒ‰ <code>Cmd+R</code> æ‰“å¼€æ–‡ä»¶ä¸­çš„æ‰€æœ‰ç¬¦å·åˆ—è¡¨ï¼›è¾“å…¥ <code>:</code> åå°†åˆ†ç±»åˆ—å‡ºç¬¦å·åˆ—è¡¨ï¼›æŒ‰ä¸Šä¸‹æ–¹å‘é”®å°†å®æ—¶é¢„è§ˆç›¸åº”çš„ä»£ç å—</li>
<li>å·¥ä½œåŒºæ–‡ä»¶ç¬¦å·è·³è½¬ï¼šæŒ‰ <code>Cmd+T</code> å°±å¯ä»¥åœ¨å·¥ä½œåŒºæ–‡ä»¶é—´æœç´¢ç¬¦å·åˆ—è¡¨ï¼Œä¸è¿‡é€Ÿåº¦å ªå¿§</li>
<li>å®šä¹‰è·³è½¬ï¼šæŒ‰ <code>F12</code>ï¼Œéœ€è¦ç›¸å…³è¯­è¨€çš„æ”¯æŒ</li>
<li>å®ç°è·³è½¬ï¼šæŒ‰ <code>Cmd+F12</code></li>
<li>å¼•ç”¨è·³è½¬ï¼šæŒ‰ <code>Shift+F12</code> æŸ¥çœ‹ç¬¦å·è¢«å¼•ç”¨çš„åˆ—è¡¨</li>
<li>é€‰ä¸­æ–‡æœ¬æ‹–æ‹½ï¼šé€‰ä¸­ä¸€å—æ–‡æœ¬åï¼Œç›´æ¥é¼ æ ‡æ‹–æ‹½åˆ°å¯¹åº”çš„åœ°æ–¹</li>
<li>ä»£ç è·³è½¬ï¼šæŒ‰ä½ <code>Alt</code> åé¼ æ ‡ç‚¹å‡»è¦è·³è½¬çš„ä»£ç </li>
<li>é“¾æ¥è·³è½¬ï¼šæŒ‰ä½ <code>Cmd</code> åé¼ æ ‡ç‚¹å‡»å°±æ‰“å¼€ç›¸å…³é“¾æ¥</li>
<li>è‡ªåŠ¨è¡¥å…¨ï¼šè¾“å…¥è¦è¡¥å…¨çš„å¯¹è±¡åï¼Œä¸€èˆ¬æƒ…å†µä¸‹ç¼–è¾‘ä¼šè‡ªåŠ¨æç¤ºè¦è¡¥å…¨çš„ç¬¦å·åˆ—è¡¨ï¼ŒæŒ‰ä¸Šä¸‹æ–¹å‘é”®é€‰ä¸­å›è½¦ï¼›åœ¨è¾“å…¥è¦è¡¥å…¨çš„å¯¹è±¡åï¼ŒæŒ‰ <code>Tab</code> ç›´åˆ°æƒ³è¦çš„è¡¥å…¨å‡ºç°ä¸ºæ­¢</li>
<li>å…³é—­å’Œæ˜¾ç¤ºè¡¥å…¨åˆ—è¡¨ï¼šæŒ‰ <code>Esc</code> å…³é—­è¡¥å…¨åˆ—è¡¨ï¼›æŒ‰ <code>Cmd+Space</code> æ˜¾ç¤ºè¡¥å…¨åˆ—è¡¨ï¼›æ­¤é”®åŸæœ¬æ˜¯ <code>Ctrl+Space</code> ä¸ç³»ç»Ÿè¾“å…¥æ³•åˆ‡æ¢å†²çªï¼Œæ”¹ä¸º <code>Cmd+Space</code> æ˜¯éµå¾ªå°±è¿‘åŸåˆ™</li>
<li>å¿«é€Ÿé¢„è§ˆç¬¦å·ä¿¡æ¯ï¼šåœ¨è¡¥å…¨åˆ—è¡¨ä¸­é€‰ä¸­è¦è¡¥å…¨çš„ç¬¦å·ï¼ŒæŒ‰ <code>Cmd+Space</code> æ¥å›åˆ‡æ¢å›æ˜¾</li>
<li>å¿«é€Ÿæç¤ºç¬¦å·å‚æ•°ä¿¡æ¯ï¼šæŒ‰ <code>Shift+Cmd+Space</code>ï¼ŒæŒ‰ <code>Esc</code> å…³é—­æç¤º</li>
<li>è‡ªåŠ¨æ›´æ­£å•è¯æ‹¼å†™ï¼šåœ¨é”™è¯¯å•è¯ä¸ŠæŒ‰ <code>Cmd+.</code> é€‰æ‹©æ­£ç¡®çš„è¿›è¡Œæ›¿æ¢ï¼Œéœ€è¦ç›¸å…³è¯­è¨€æ”¯æŒ</li>
<li>ç¬¦å·åç§°é‡æ„ï¼šæŒ‰ <code>Cmd+F2</code> æ‰¹é‡é‡æ„ç¬¦å·åç§°</li>
</ul>
<h1 id="è¿›é˜¶æ“ä½œ"><a href="#è¿›é˜¶æ“ä½œ" class="headerlink" title="è¿›é˜¶æ“ä½œ"></a>è¿›é˜¶æ“ä½œ</h1><blockquote>
<p>ä»¥ä¸‹ç»™å‡ºçš„å‘½ä»¤æ ä¸­çš„æœç´¢åªéœ€è¾“å…¥å…³é”®å­—æœç´¢å³å¯ï¼Œä¸ç”¨åˆ»æ„å®Œå…¨è¾“å…¥ã€‚</p>
</blockquote>
<h2 id="å·¥ä½œåŒºå®šåˆ¶"><a href="#å·¥ä½œåŒºå®šåˆ¶" class="headerlink" title="å·¥ä½œåŒºå®šåˆ¶"></a>å·¥ä½œåŒºå®šåˆ¶</h2><blockquote>
<p>ä¿®æ”¹å€¼è¯·æŒ‰ <code>Cmd+,</code> ååœ¨ç”¨æˆ·è®¾ç½®æ–‡ä»¶ <code>settings.json</code> æ–‡ä»¶ä¸­æ·»åŠ ï¼Œç›¸å…³å€¼çš„å«ä¹‰è¯·å‚ç…§é»˜è®¤ç”¨æˆ·è®¾ç½®å€¼æ³¨é‡Šæ–‡æ¡£ã€‚</p>
</blockquote>
<ul>
<li>åˆ‡æ¢çŠ¶æ€æ å¯è§æ€§ï¼šä¿®æ”¹ <code>&quot;workbench.statusBar.visible&quot;</code></li>
<li>åˆ‡æ¢æ´»åŠ¨æ å¯è§æ€§ï¼šä¿®æ”¹ <code>&quot;workbench.activityBar.visible&quot;</code></li>
<li>å…³é—­æ´»åŠ¨æ æ‰“å¼€ç¼–è¾‘æ•°é‡ï¼šä¿®æ”¹ <code>&quot;explorer.openEditors.visible&quot;</code></li>
<li>åˆ‡æ¢å°åœ°å›¾ï¼šä¿®æ”¹ <code>&quot;editor.minimap.enabled&quot;</code></li>
<li>åˆ‡æ¢è¾¹æ ä½ç½®ï¼šä¿®æ”¹ <code>&quot;workbench.sideBar.location&quot;</code></li>
</ul>
<h2 id="ç¼–è¾‘åŒºå®šåˆ¶"><a href="#ç¼–è¾‘åŒºå®šåˆ¶" class="headerlink" title="ç¼–è¾‘åŒºå®šåˆ¶"></a>ç¼–è¾‘åŒºå®šåˆ¶</h2><ul>
<li>å¯ç”¨ Tab è¡¥å…¨ï¼šä¿®æ”¹ <code>&quot;editor.tabCompletion&quot;</code> çš„å€¼ä¸º <code>&quot;on&quot;</code></li>
</ul>
<h2 id="å¸¸ç”¨å‘½ä»¤åˆ‡æ¢"><a href="#å¸¸ç”¨å‘½ä»¤åˆ‡æ¢" class="headerlink" title="å¸¸ç”¨å‘½ä»¤åˆ‡æ¢"></a>å¸¸ç”¨å‘½ä»¤åˆ‡æ¢</h2><ul>
<li>åˆ‡æ¢çŠ¶æ€æ å¯è§æ€§ï¼šåœ¨å‘½ä»¤æ ä¸­æœç´¢ <code>View: Toggle Status Bar Visibility</code> å›è½¦åˆ‡æ¢</li>
<li>åˆ‡æ¢æ´»åŠ¨æ å¯è§æ€§ï¼šåœ¨å‘½ä»¤æ ä¸­æœç´¢ <code>View: Toggle Activity Bar Visibility</code> å›è½¦åˆ‡æ¢</li>
<li>åˆ‡æ¢å°åœ°å›¾ï¼šåœ¨å‘½ä»¤æ ä¸­æœç´¢ <code>View: Toggle Minimap</code> å›è½¦åˆ‡æ¢</li>
<li>åˆ‡æ¢è¾¹æ ä½ç½®ï¼šåœ¨å‘½ä»¤æ ä¸­æœç´¢ <code>View: Toggle Side Bar Position</code> å›è½¦åˆ‡æ¢</li>
<li>åˆ‡æ¢é—®é¢˜ï¼ˆé”™è¯¯ã€è­¦å‘Šã€ä¿¡æ¯ï¼‰è§†å›¾ï¼šåœ¨å‘½ä»¤æ ä¸­æœç´¢ <code>View: Toggle Problems</code> å›è½¦åˆ‡æ¢</li>
<li>åˆ‡æ¢è¾“å‡ºï¼šåœ¨å‘½ä»¤æ ä¸­æœç´¢ <code>View: Toggle Output</code> å›è½¦åˆ‡æ¢</li>
<li>åˆ‡æ¢è‡ªåŠ¨æ¢è¡Œï¼šåœ¨å‘½ä»¤æ ä¸­æœç´¢ <code>View: Toggle Word Wrap</code> å›è½¦åˆ‡æ¢</li>
<li>åˆ‡æ¢å¼€å‘äººå‘˜å·¥å…·ï¼šåœ¨å‘½ä»¤æ ä¸­æœç´¢ <code>View: Toggle Developer Tools</code> å›è½¦åˆ‡æ¢</li>
<li>ä¾§è¾¹æ¡å½¢å›¾ï¼šåœ¨å‘½ä»¤æ ä¸­æœç´¢ <code>View: Open Next Side Bar View</code> å›è½¦</li>
<li>å…³é—­æ‰€æœ‰ç¼–è¾‘å™¨ï¼š<code>View: Close All Editors</code> å›è½¦</li>
<li>å…³é—­æ‰€æœ‰ç¼–è¾‘å™¨ç»„ï¼š<code>View: Close All Editor Group</code> å›è½¦</li>
</ul>
<p>æ›´æ–°ä¸­â€¦â€¦</p>
]]></content>
      <categories>
        <category>devtools</category>
      </categories>
      <tags>
        <tag>mac</tag>
        <tag>devtools</tag>
        <tag>vscode</tag>
      </tags>
  </entry>
  <entry>
    <title>Mac VSCode æ•ˆç‡æ‰©å±•</title>
    <url>/2018/12/04/mac-vscode-extension/</url>
    <content><![CDATA[<p><img src="/images/2019/201906121939.png" alt="201906121939.png"></p>
<p>ğŸ‰VSCode çš„å¼ºå¤§ç¦»ä¸å¼€åºå¤§çš„æ‰©å±•å¸‚åœºï¼Œåœ¨ VSCode marketplace ä¸Šåªæœ‰ä½ æƒ³ä¸åˆ°çš„ï¼Œæ²¡æœ‰ä½ æ‰¾ä¸åˆ°çš„ã€‚åœ¨ç»å†ä¸€ç•ªæŠ˜è…¾åå°‘ä¸äº†å¯¹å®ƒçš„è¯„å¤´è®ºè¶³ï¼Œæœ‰é‚£ä¹ˆäº›æ‰©å±•ç¡®å®æœ‰ä¸€ç§ç›¸è§æ¨æ™šä¹‹æ„Ÿï¼Œå½“ç„¶ä¹Ÿä¸èƒ½å¤ªè´ªï¼Œè£…å‡ ä¸ªé«˜é¢‘çš„å°±å¥½ï¼Œæ¯•ç«Ÿè£…å¤šäº†ä¹‹åæ‰©å±•çš„æ¿€æ´»å’ŒåŠ è½½ä¹Ÿè´¹æ—¶é—´ï¼Œæ‰€è°“ã€æ•ˆç‡ã€ä¹Ÿéœ€è¦é‚£ä¹ˆç‚¹æƒè¡¡å‘€ã€‚</p>
<h1 id="æ“ä½œç±»æ‰©å±•"><a href="#æ“ä½œç±»æ‰©å±•" class="headerlink" title="æ“ä½œç±»æ‰©å±•"></a>æ“ä½œç±»æ‰©å±•</h1><h2 id="æ–‡ä»¶æ“ä½œæ‰©å±•"><a href="#æ–‡ä»¶æ“ä½œæ‰©å±•" class="headerlink" title="æ–‡ä»¶æ“ä½œæ‰©å±•"></a>æ–‡ä»¶æ“ä½œæ‰©å±•</h2><ul>
<li><a href="https://marketplace.visualstudio.com/items?itemName=patbenatar.advanced-new-file">VSCode Advanced New File</a></li>
<li><a href="https://marketplace.visualstudio.com/items?itemName=sleistner.vscode-fileutils">File Utils - Visual Studio Code Extension</a></li>
<li><a href="https://marketplace.visualstudio.com/items?itemName=vscodevim.vim">VSCodeVim</a></li>
<li><a href="https://marketplace.visualstudio.com/items?itemName=wmaurer.change-case">Change Case Extension for Visual Studio Code</a></li>
<li><a href="https://marketplace.visualstudio.com/items?itemName=2gua.rainbow-brackets">Rainbow Brackets</a></li>
<li><a href="https://marketplace.visualstudio.com/items?itemName=CoenraadS.bracket-pair-colorizer-2">Bracket Pair Colorizer 2</a></li>
</ul>
<h2 id="å·¥ç¨‹å¢å¼ºæ‰©å±•"><a href="#å·¥ç¨‹å¢å¼ºæ‰©å±•" class="headerlink" title="å·¥ç¨‹å¢å¼ºæ‰©å±•"></a>å·¥ç¨‹å¢å¼ºæ‰©å±•</h2><ul>
<li><a href="https://marketplace.visualstudio.com/items?itemName=MS-CEINTL.vscode-language-pack-zh-hans">Chinese (Simplified) Language Pack for Visual Studio Code</a></li>
<li><a href="https://marketplace.visualstudio.com/items?itemName=alefragnani.project-manager">Project Manager</a></li>
<li><a href="https://marketplace.visualstudio.com/items?itemName=EditorConfig.EditorConfig">EditorConfig for VS Code</a></li>
<li><a href="https://marketplace.visualstudio.com/items?itemName=mikestead.dotenv">DotENV</a></li>
<li><a href="https://marketplace.visualstudio.com/items?itemName=redhat.vscode-yaml">YAML Support by Red Hat</a></li>
<li><a href="https://marketplace.visualstudio.com/items?itemName=codezombiech.gitignore">gitignore extension for Visual Studio Code</a></li>
<li><a href="https://marketplace.visualstudio.com/items?itemName=formulahendry.code-runner">Code Runner</a></li>
<li><a href="https://marketplace.visualstudio.com/items?itemName=DavidAnson.vscode-markdownlint">markdownlint</a></li>
<li><a href="https://marketplace.visualstudio.com/items?itemName=yzhang.markdown-all-in-one">Markdown All in One</a></li>
<li><a href="https://marketplace.visualstudio.com/items?itemName=bajdzis.vscode-database">vscode-database</a></li>
<li><a href="https://marketplace.visualstudio.com/items?itemName=DotJoshJohnson.xml">XML Tools</a></li>
<li><a href="https://marketplace.visualstudio.com/items?itemName=aaron-bond.better-comments">Better Comments</a></li>
<li><a href="https://marketplace.visualstudio.com/items?itemName=patbenatar.advanced-new-file">VSCode Advanced New File</a></li>
</ul>
<h2 id="Git-å¢å¼ºæ‰©å±•"><a href="#Git-å¢å¼ºæ‰©å±•" class="headerlink" title="Git å¢å¼ºæ‰©å±•"></a>Git å¢å¼ºæ‰©å±•</h2><ul>
<li><a href="https://marketplace.visualstudio.com/items?itemName=eamodio.gitlens">GitLens â€” Git supercharged</a></li>
<li><a href="https://marketplace.visualstudio.com/items?itemName=donjayamanne.githistory">Git History</a></li>
</ul>
<h1 id="ä¸»é¢˜ç±»æ‰©å±•"><a href="#ä¸»é¢˜ç±»æ‰©å±•" class="headerlink" title="ä¸»é¢˜ç±»æ‰©å±•"></a>ä¸»é¢˜ç±»æ‰©å±•</h1><ul>
<li><a href="https://marketplace.visualstudio.com/items?itemName=PKief.material-icon-theme">Material Icon Theme</a></li>
<li><a href="https://marketplace.visualstudio.com/items?itemName=Equinusocio.vsc-material-theme">Material Theme</a></li>
<li><a href="https://marketplace.visualstudio.com/items?itemName=zhuangtongfa.Material-theme">One Dark Pro</a></li>
<li><a href="https://marketplace.visualstudio.com/items?itemName=robertohuertasm.vscode-icons">vscode-icons</a></li>
</ul>
<h1 id="å¼€å‘ç±»æ‰©å±•"><a href="#å¼€å‘ç±»æ‰©å±•" class="headerlink" title="å¼€å‘ç±»æ‰©å±•"></a>å¼€å‘ç±»æ‰©å±•</h1><h2 id="å‰ç«¯æ‰©å±•"><a href="#å‰ç«¯æ‰©å±•" class="headerlink" title="å‰ç«¯æ‰©å±•"></a>å‰ç«¯æ‰©å±•</h2><ul>
<li><a href="https://marketplace.visualstudio.com/items?itemName=msjsdiag.debugger-for-chrome">Debugger for Chrome</a></li>
<li><a href="https://marketplace.visualstudio.com/items?itemName=dbaeumer.vscode-eslint">ESLint</a></li>
<li><a href="https://marketplace.visualstudio.com/items?itemName=ecmel.vscode-html-css">HTML CSS Support</a></li>
<li><a href="https://marketplace.visualstudio.com/items?itemName=Zignd.html-css-class-completion">IntelliSense for CSS class names in HTML</a></li>
<li><a href="https://marketplace.visualstudio.com/items?itemName=Compulim.compulim-vscode-closetag">Close HTML/XML tag</a></li>
<li><a href="https://marketplace.visualstudio.com/items?itemName=formulahendry.auto-close-tag">Auto Close Tag</a></li>
<li><a href="https://marketplace.visualstudio.com/items?itemName=eg2.vscode-npm-script">npm</a></li>
<li><a href="https://marketplace.visualstudio.com/items?itemName=christian-kohler.npm-intellisense">npm Intellisense</a></li>
<li><a href="https://marketplace.visualstudio.com/items?itemName=christian-kohler.path-intellisense">Path Intellisense</a></li>
<li><a href="https://marketplace.visualstudio.com/items?itemName=octref.vetur">Vetur</a></li>
<li><a href="https://marketplace.visualstudio.com/items?itemName=HookyQR.beautify">Beautify</a></li>
</ul>
<h2 id="PHP-æ‰©å±•"><a href="#PHP-æ‰©å±•" class="headerlink" title="PHP æ‰©å±•"></a>PHP æ‰©å±•</h2><ul>
<li><a href="https://marketplace.visualstudio.com/items?itemName=bmewburn.vscode-intelephense-client">PHP Intelephense</a></li>
<li><a href="https://marketplace.visualstudio.com/items?itemName=MehediDracula.php-namespace-resolver">PHP Namespace Resolver</a></li>
<li><a href="https://marketplace.visualstudio.com/items?itemName=neilbrayfield.php-docblocker">PHP DocBlocker</a></li>
<li><a href="https://marketplace.visualstudio.com/items?itemName=felixfbecker.php-debug">PHP Debug</a></li>
<li><a href="https://marketplace.visualstudio.com/items?itemName=junstyle.php-cs-fixer">php cs fixer</a></li>
</ul>
]]></content>
      <categories>
        <category>devtools</category>
      </categories>
      <tags>
        <tag>mac</tag>
        <tag>devtools</tag>
        <tag>vscode</tag>
      </tags>
  </entry>
  <entry>
    <title>Mac ä¸‡èƒ½ç¼–è¾‘å™¨ Sublime Text</title>
    <url>/2018/05/26/mac-sublime-text/</url>
    <content><![CDATA[<p>å¦‚æœè¯´ <code>VSCode</code> æ˜¯ç¼–è¾‘å™¨çš„é›†å¤§æˆè€…ã€‚é‚£ä¹ˆ <code>Sublime Text</code> ç»å¯¹æ˜¯ç¼–è¾‘å™¨ä¸­çš„ä¸€è‚¡æ¸…æµï¼Œè™½ç„¶é—­æºï¼Œä½†ä¸æ¯«ä¸å½±å“å®ƒåŠ›å‹ç¾¤é›„ã€‚å®ƒä»¬æ˜¯ç¼–è¾‘å™¨ä¸­çš„åŒå­æ˜Ÿï¼Œè¶³ä»¥è£¹æŒŸä¸€ä¼—ç å†œé©°éª‹ç åœºï¼Œé€é¹¿ä¸‡åƒç æµ·ã€‚</p>
<span id="more"></span>
<h2 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h2><blockquote>
<p>A sophisticated text editor for code, markup and prose.</p>
</blockquote>
<p>çŸ­å°ç²¾æ‚çš„ç®€ä»‹ï¼Œ<code>Sublime Text</code> æ·±æ·±æ‰“åŠ¨æˆ‘çš„æ˜¯é€Ÿåº¦å’Œæ˜“ç”¨æ€§ï¼Œæ— è®ºæ˜¯æ‰“å¼€é¡¹ç›®è¿˜æ˜¯ä¼—å¤šçš„é¡¹ç›®é—´æ¥å›åˆ‡æ¢ï¼Œè¿˜æ˜¯æ—¥å¸¸ç¼–è¾‘ï¼Œå®ƒä»æ¥éƒ½æ²¡è®©æˆ‘å¤±æœ›è¿‡ï¼Œå®ƒä»¥å…¶é€Ÿåº¦ç¢¾å‹äº†ç»å¤§å¤šæ•° <code>Editor</code> å’Œ <code>IDE</code>ï¼Œå…¶ä¸è¶³ <code>15 MB</code> çš„å®‰è£…åŒ…ä½“ç§¯å’Œæµç•…çš„è¡¨ç°ï¼Œè®©äººéš¾ä»¥ç½®ä¿¡ã€‚</p>
<h2 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><ul>
<li><a href="https://www.sublimetext.com/">Sublime Text å®˜ç½‘</a></li>
<li><a href="https://www.sublimetext.com/3">Sublime Text ä¸‹è½½</a></li>
<li><a href="https://packagecontrol.io/">Package Control</a></li>
</ul>
<h2 id="æ’ä»¶ç®¡ç†å™¨"><a href="#æ’ä»¶ç®¡ç†å™¨" class="headerlink" title="æ’ä»¶ç®¡ç†å™¨"></a>æ’ä»¶ç®¡ç†å™¨</h2><p><code>Package Control</code>- å§‘ä¸”ç§°å®ƒä¸ºæ’ä»¶ç®¡ç†å™¨å§ï¼Œå®ƒæœ¬èº«ä¹Ÿæ˜¯ä¸€æ¬¾æ’ä»¶ã€‚</p>
<p>å¤§éƒ¨åˆ†çš„æ•™ç¨‹éƒ½æåˆ°å®‰è£… <code>Package Control</code> æ—¶ï¼ŒæŒ‰ <code>Ctrl+~</code> ç²˜è´´ä¸€å †ä»£ç åˆ°æ§åˆ¶å°ï¼Œå›è½¦åå®Œæˆå®‰è£…ã€‚è¿™é‡Œæˆ‘ä»¬é‡‡ç”¨ <code>Sublime Text</code> è‡ªå¸¦çš„å‘½ä»¤æ¥å®Œæˆå®‰è£…ï¼Œæ ¹æœ¬ä¸ç”¨ç²˜è´´ä»£ç ã€‚æŒ‰ <code>Command+Shift+P</code>ï¼Œåœ¨å‘½ä»¤æ¡†ä¸­è¾“å…¥ <code>install package control</code> å›è½¦å³å¯ï¼Œçœ‹å›¾ï¼š</p>
<p><img src="http://om804c7s2.bkt.clouddn.com/2018-05-28-sublime-package-control.jpg" alt="sublime-package-control"></p>
<p>å®Œæˆåå¦‚ä¸‹å›¾æç¤ºï¼š</p>
<p><img src="http://om804c7s2.bkt.clouddn.com/2018-05-28-sublime-package-control-installed.png" alt="sublime-package-control-installed"></p>
<p>å®‰è£…å®Œæˆåï¼Œé‡å¯ <code>Sublime Text</code>ï¼Œæˆ‘ä»¬é€šè¿‡ <code>Package Control: Install Package</code> æ¥å®‰è£…å…¶å®ƒæ’ä»¶ã€‚</p>
<h2 id="æ’ä»¶"><a href="#æ’ä»¶" class="headerlink" title="æ’ä»¶"></a>æ’ä»¶</h2><ul>
<li><a href="https://github.com/sergeche/emmet-sublime"><code>Emmet</code></a>ï¼šä»æ­¤ç¼–å†™ <code>HTML</code> å’Œ <code>CSS</code> ä»£ç å¥æ­¥å¦‚é£ã€‚</li>
<li><a href="https://github.com/randy3k/ProjectManager"><code>Project Manager</code></a>ï¼šåœ¨ä¸åŒçš„é¡¹ç›®æˆ–å·¥ç¨‹é—´é£é€Ÿçš„åˆ‡æ¢ã€‚</li>
<li><a href="https://github.com/SideBarEnhancements-org/SideBarEnhancements"><code>SideBarEnhancements</code></a>ï¼šå¢å¼ºå³é”®èœå•åŠŸèƒ½ã€‚</li>
<li><a href="https://github.com/sindresorhus/editorconfig-sublime"><code>EditorConfig</code></a>ï¼šç»Ÿä¸€ä¸åŒç¼–è¾‘å™¨å’Œ <code>IDE</code> ä¹‹é—´çš„ç¼–ç é£æ ¼ã€‚</li>
<li><a href="https://github.com/SublimeLinter/SublimeLinter"><code>SublimeLinter</code></a>ï¼šä»£ç æ£€æµ‹æ¡†æ¶ã€‚</li>
<li><a href="https://github.com/SublimeLinter/SublimeLinter-php"><code>SublimeLinter-php</code></a>ï¼š<code>PHP</code> ä»£ç æ£€æµ‹ã€‚</li>
<li><a href="https://github.com/skuroda/Sublime-AdvancedNewFile"><code>AdvancedNewFile</code></a>ï¼šé«˜çº§çš„æ–‡ä»¶æ–°å»ºæ–¹å¼ã€‚</li>
<li><a href="https://github.com/TheSpyder/SyncedSideBar"><code>SyncedSideBar</code></a>ï¼šè‡ªåŠ¨å®šä½å½“å‰æ–‡ä»¶åœ¨å·¦è¾¹æ–‡ä»¶å¤¹æ ‘ä¸­çš„ä½ç½®ã€‚</li>
<li><a href="https://github.com/Colorsublime/Colorsublime-Plugin"><code>Colorsublime</code></a>ï¼šä»£ç ä¸»é¢˜ç®¡ç†å™¨ï¼Œæ€»æœ‰ä¸€æ¬¾ä¸»é¢˜é€‚åˆä½ ã€‚</li>
<li><a href="https://github.com/equinusocio/material-theme"><code>Material Themel</code></a>ï¼šç»šä¸½å¤ºç›®çš„ç¼–è¾‘å™¨ä¸»é¢˜ã€‚</li>
<li><a href="https://github.com/jisaacks/GitGutter"><code>GitGutter</code></a>ï¼šæ ‡è®°ä»£ç ä¸­åšçš„æ›´æ–°ã€‚</li>
<li><a href="https://github.com/spadgos/sublime-jsdocs"><code>DocBlockr</code></a>ï¼šè‡ªåŠ¨ç”Ÿæˆ <code>PHPDoc</code> é£æ ¼çš„æ³¨é‡Šã€‚</li>
<li><a href="https://github.com/seanliang/ConvertToUTF8"><code>ConvertToUTF8</code></a>ï¼šæ”¯æŒå…¶å®ƒæ–‡ä»¶ç¼–ç æ ¼å¼ã€‚</li>
<li><a href="https://github.com/facelessuser/BracketHighlighter"><code>BracketHighlighter</code></a>ï¼šåŒ¹é…æˆå¯¹æ ‡ç­¾ã€‚</li>
<li><a href="https://github.com/SublimeText/TrailingSpaces"><code>TrailingSpaces</code></a>ï¼šæ£€æµ‹ä»£ç ä¸­å°¾éšçš„å¤šä½™ç©ºæ ¼å¹¶å¹²æ‰å®ƒä»¬ã€‚</li>
<li><a href="https://github.com/kemayo/sublime-text-git"><code>Git</code></a>ï¼š<code>Git</code> ç‰ˆæœ¬æ§åˆ¶ã€‚</li>
<li><a href="https://github.com/SublimeCodeIntel/SublimeCodeIntel"><code>SublimeCodeIntel</code></a>ï¼šä»£ç æ™ºèƒ½æç¤ºã€‚</li>
<li><a href="https://github.com/BoundInCode/AutoFileName"><code>AutoFileName</code></a>ï¼šè‡ªåŠ¨è¡¥å…¨æ–‡ä»¶è·¯å¾„ã€‚</li>
<li><a href="https://github.com/lunixbochs/actualvim"><code>ActualVim</code></a>ï¼šåƒ <code>Vim</code> é‚£æ ·æ“ä½œ <code>Sublime Text</code>ã€‚</li>
</ul>
<p>æœªå®Œå¾…ç»­ã€‚ã€‚ã€‚</p>
]]></content>
      <categories>
        <category>devtools</category>
      </categories>
      <tags>
        <tag>mac</tag>
        <tag>devtools</tag>
      </tags>
  </entry>
  <entry>
    <title>Mac ä¸­è®©å¼€å‘æ›´åŠ å®¹æ˜“çš„ Vagrant</title>
    <url>/2018/01/21/mac-vagrant/</url>
    <content><![CDATA[<p><img src="/images/2018/201801211811.png" alt="201801211811.png"></p>
<h1 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h1><h2 id="å®‰è£…-VirtualBox"><a href="#å®‰è£…-VirtualBox" class="headerlink" title="å®‰è£… VirtualBox"></a>å®‰è£… VirtualBox</h2><blockquote>
<ul>
<li><a href="https://www.virtualbox.org/">VirtualBox</a> æˆ–è€… <a href="https://www.parallels.com/uk/">Parallels</a> å®‰è£…å…¶ä¸€å°±å¯ä»¥äº†</li>
<li><a href="https://www.virtualbox.org/wiki/Downloads">Download VirtualBox</a></li>
</ul>
</blockquote>
<h2 id="å®‰è£…-Parallels"><a href="#å®‰è£…-Parallels" class="headerlink" title="å®‰è£… Parallels"></a>å®‰è£… Parallels</h2><p><a href="https://github.com/Parallels/vagrant-parallels">Vagrant Parallels Plugin</a></p>
<h2 id="å®‰è£…-Vagrant"><a href="#å®‰è£…-Vagrant" class="headerlink" title="å®‰è£… Vagrant"></a>å®‰è£… Vagrant</h2><blockquote>
<ul>
<li><a href="https://www.vagrantup.com/">å®˜ç½‘</a></li>
<li><a href="https://github.com/mitchellh/vagrant">GitHub</a></li>
</ul>
</blockquote>
<h1 id="å‘½ä»¤"><a href="#å‘½ä»¤" class="headerlink" title="å‘½ä»¤"></a>å‘½ä»¤</h1><h2 id="åŸºæœ¬æ“ä½œ"><a href="#åŸºæœ¬æ“ä½œ" class="headerlink" title="åŸºæœ¬æ“ä½œ"></a>åŸºæœ¬æ“ä½œ</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// æ·»åŠ é•œåƒåˆ° Vagrant</span><br><span class="line">vagrant box add centos ~/.vagrant.d/boxes/vagrant-centos-7.1.box</span><br><span class="line"></span><br><span class="line">// åˆ›å»ºå¼€å‘ç›®å½•, åˆ‡æ¢ç›®å½•</span><br><span class="line">mkdir -pv ~/Vagrant/centos</span><br><span class="line"><span class="built_in">cd</span> ~/Vagrant/centos</span><br><span class="line"></span><br><span class="line">// åˆå§‹åŒ–</span><br><span class="line">vagrant init centos</span><br><span class="line"></span><br><span class="line">// å¯åŠ¨ç¯å¢ƒ</span><br><span class="line">vagrant up</span><br><span class="line"></span><br><span class="line">// ç™»å½•è™šæ‹Ÿæœº</span><br><span class="line">vagrant ssh</span><br><span class="line"></span><br><span class="line">// å°†è™šæ‹ŸæœºæŒ‚èµ·, è™šæ‹Ÿæœºå†…å­˜éƒ½ä¿å­˜åˆ°ç¡¬ç›˜ä¸Š, ä¸‹æ¬¡å¯ä»¥å¿«é€Ÿæ¢å¤</span><br><span class="line">vagrant <span class="built_in">suspend</span></span><br><span class="line"></span><br><span class="line">// å°†è™šæ‹Ÿæœºå…³é—­, è™šæ‹Ÿæœºå†…å­˜é‡Šæ”¾, ä¸‹æ¬¡å¯åŠ¨è¦æ…¢ä¸€ç‚¹</span><br><span class="line">vagrant halt</span><br><span class="line"></span><br><span class="line">// å°†è™šæ‹Ÿæœºåˆ é™¤, æ‰€æœ‰å˜æ›´éƒ½ä¸¢å¤±, ä¸‹æ¬¡å¯åŠ¨è¦é‡æ–°å…‹éš†ä¸€ä¸ª VagrantBox</span><br><span class="line">vagrant destroy</span><br><span class="line"></span><br><span class="line">// ç§»é™¤è™šæ‹Ÿæœº</span><br><span class="line">vagrant box remove centos</span><br><span class="line"></span><br><span class="line">// è™šæ‹Ÿæœºæ‰“åŒ…ä¹‹å‰åˆ é™¤ä¸‹é¢çš„æ–‡ä»¶</span><br><span class="line">sudo rm -rf /etc/udev/rules.d/70-persistent-ipoib(net).rules</span><br><span class="line"></span><br><span class="line">// è™šæ‹Ÿæœºæ‰“åŒ…</span><br><span class="line">vagrant package --base centos --output centos.box</span><br></pre></td></tr></table></figure>
<h2 id="å…¶å®ƒå‘½ä»¤"><a href="#å…¶å®ƒå‘½ä»¤" class="headerlink" title="å…¶å®ƒå‘½ä»¤"></a>å…¶å®ƒå‘½ä»¤</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// æ·»åŠ åˆ«åä¸º centos çš„é•œåƒ</span><br><span class="line">vagrant box add centos ~/.vagrant.d/boxes/vagrant-centos-7.1.box</span><br><span class="line"></span><br><span class="line">// æŸ¥çœ‹æ‰€æœ‰æ·»åŠ çš„é•œåƒ</span><br><span class="line">vagrant box list</span><br><span class="line"></span><br><span class="line">// ç§»é™¤åˆ«åä¸º centos çš„é•œåƒ</span><br><span class="line">vagrant box remove centos</span><br><span class="line"></span><br><span class="line">// ç§»é™¤åç§°ä¸º bento/centos-7.2ï¼Œç‰ˆæœ¬ä¸º 2.3.0 çš„é•œåƒ</span><br><span class="line">vagrant box remove bento/centos-7.2 --box-version 2.3.0</span><br><span class="line"></span><br><span class="line">// é‡è½½è™šæ‹Ÿæœº</span><br><span class="line">vagrant reload</span><br><span class="line"></span><br><span class="line">// é‡å¯è™šæ‹Ÿæœºå¹¶åº”ç”¨å¯¹ Vagrantfile çš„æ›´æ”¹</span><br><span class="line">vagrant reload --provision</span><br><span class="line"></span><br><span class="line">// æ¢å¤è™šæ‹ŸæœºçŠ¶æ€</span><br><span class="line">vagrant resume</span><br><span class="line"></span><br><span class="line">// ç™»å½•è™šæ‹Ÿæœº</span><br><span class="line">vagrant ssh</span><br><span class="line"></span><br><span class="line">// æŸ¥çœ‹è™šæ‹ŸæœºçŠ¶æ€</span><br><span class="line">vagrant status</span><br><span class="line"></span><br><span class="line">// æš‚åœè™šæ‹Ÿæœº, ä¿å­˜çŠ¶æ€</span><br><span class="line">vagrant <span class="built_in">suspend</span></span><br><span class="line"></span><br><span class="line">// æŸ¥çœ‹å…¨å±€çŠ¶æ€</span><br><span class="line">vagrant global-status</span><br><span class="line"></span><br><span class="line">// é”€æ¯æŒ‡å®šçš„è™šæ‹Ÿæœºï¼ˆæ…ç”¨ï¼Œä¸€æ—¦æ‰§è¡Œï¼Œåˆ›å»ºçš„è™šæ‹Ÿæœºå°±ç°é£çƒŸç­äº†ï¼‰</span><br><span class="line">vagrant destroy 1a2b3c4d</span><br><span class="line"></span><br><span class="line">// å‡çº§æ‰€æœ‰ Box</span><br><span class="line">vagrant box update</span><br></pre></td></tr></table></figure>
<h1 id="VirtualBox"><a href="#VirtualBox" class="headerlink" title="VirtualBox"></a>VirtualBox</h1><p><a href="https://docs.oracle.com/en/virtualization/virtualbox/6.1/user/vboxmanage.html">VBoxManage User Manual</a></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// åˆ—å‡ºå½“å‰ç³»ç»Ÿä¸­æ‰€æœ‰å¯ç”¨çš„è™šæ‹Ÿæœº</span><br><span class="line">VBoxManage list vms</span><br><span class="line"><span class="string">&quot;&lt;inaccessible&gt;&quot;</span> &#123;b457c29d-3eaf-4d19-8f38-7991c85aa43a&#125;</span><br><span class="line"><span class="string">&quot;ubuntu_default_1588584023862_25557&quot;</span> &#123;eee17f07-35dc-4c48-bff9-8006bf3df55c&#125;</span><br><span class="line"><span class="string">&quot;centos_default_1588597614517_34912&quot;</span> &#123;3c640794-da30-40b2-a155-c76b42c5cac7&#125;</span><br><span class="line"></span><br><span class="line">// å…‹éš†è™šæ‹Ÿæœº</span><br><span class="line">VBoxManage clonevm --register ubuntu_default_1588584023862_25557 --name Ubuntu</span><br><span class="line">0%...10%...20%...30%...40%...50%...60%...70%...80%...90%...100%</span><br><span class="line">Machine has been successfully cloned as <span class="string">&quot;Ubuntu&quot;</span></span><br><span class="line"></span><br><span class="line">// å°†æœ¬åœ°è™šæ‹Ÿæœºå¯¼å‡ºä¸ºä¸€ä¸ªä½¿ç”¨å¼€æ”¾è™šæ‹ŸåŒ–æ ¼å¼ï¼ˆOVF - Open Virtualization Formatï¼‰æ–‡ä»¶</span><br><span class="line">VBoxManage <span class="built_in">export</span> ubuntu_default_1588584023862_25557 -o Ubuntu.ova</span><br><span class="line">0%...10%...20%...30%...40%...50%...60%...70%...80%...90%...100%</span><br><span class="line">Successfully exported 1 machine(s).</span><br><span class="line"></span><br><span class="line">// åˆ é™¤å…‹éš†çš„è™šæ‹Ÿæœº</span><br><span class="line">VBoxManage unregistervm --delete <span class="string">&quot;Ubuntu&quot;</span></span><br><span class="line">0%...10%...20%...30%...40%...50%...60%...70%...80%...90%...100%</span><br><span class="line"></span><br><span class="line">// å¯¼å…¥è™šæ‹Ÿæœº</span><br><span class="line">VBoxManage import Ubuntu.ova --vsys 0 --vmname Ubuntu18</span><br><span class="line">0%...10%...20%...30%...40%...50%...60%...70%...80%...90%...100%</span><br><span class="line">Interpreting /Users/majinyun/Downloads/qiniu/Ubuntu.ova...</span><br><span class="line">OK.</span><br><span class="line">Disks:</span><br><span class="line">  vmdisk1 10737418240 -1 http://www.vmware.com/interfaces/specifications/vmdk.html<span class="comment">#streamOptimized Ubuntu-disk001.vmdk -1 -1</span></span><br><span class="line">  vmdisk2 10485760 -1 http://www.vmware.com/interfaces/specifications/vmdk.html<span class="comment">#streamOptimized Ubuntu-disk002.vmdk -1 -1</span></span><br><span class="line"></span><br><span class="line">Virtual system 0:</span><br><span class="line"> 0: Suggested OS <span class="built_in">type</span>: <span class="string">&quot;Ubuntu_64&quot;</span></span><br><span class="line">    (change with <span class="string">&quot;--vsys 0 --ostype &lt;type&gt;&quot;</span>; use <span class="string">&quot;list ostypes&quot;</span> to list all possible values)</span><br><span class="line"> 1: VM name specified with --vmname: <span class="string">&quot;Ubuntu18&quot;</span></span><br><span class="line"> 2: Suggested VM group <span class="string">&quot;/&quot;</span></span><br><span class="line">    (change with <span class="string">&quot;--vsys 0 --group &lt;group&gt;&quot;</span>)</span><br><span class="line"> 3: Suggested VM settings file name <span class="string">&quot;/Users/majinyun/VirtualBoxVMs/ubuntu_default_1588584023862_25557 2/ubuntu_default_1588584023862_25557 2.vbox&quot;</span></span><br><span class="line">    (change with <span class="string">&quot;--vsys 0 --settingsfile &lt;filename&gt;&quot;</span>)</span><br><span class="line"> 4: Suggested VM base folder <span class="string">&quot;/Users/majinyun/VirtualBoxVMs&quot;</span></span><br><span class="line">    (change with <span class="string">&quot;--vsys 0 --basefolder &lt;path&gt;&quot;</span>)</span><br><span class="line"> 5: Number of CPUs: 2</span><br><span class="line">    (change with <span class="string">&quot;--vsys 0 --cpus &lt;n&gt;&quot;</span>)</span><br><span class="line"> 6: Guest memory: 1024 MB</span><br><span class="line">    (change with <span class="string">&quot;--vsys 0 --memory &lt;MB&gt;&quot;</span>)</span><br><span class="line"> 7: Sound card (appliance expects <span class="string">&quot;&quot;</span>, can change on import)</span><br><span class="line">    (<span class="built_in">disable</span> with <span class="string">&quot;--vsys 0 --unit 7 --ignore&quot;</span>)</span><br><span class="line"> 8: Network adapter: orig NAT, config 3, extra slot=0;<span class="built_in">type</span>=NAT</span><br><span class="line"> 9: Network adapter: orig HostOnly, config 3, extra slot=1;<span class="built_in">type</span>=HostOnly</span><br><span class="line">10: IDE controller, <span class="built_in">type</span> PIIX4</span><br><span class="line">    (<span class="built_in">disable</span> with <span class="string">&quot;--vsys 0 --unit 10 --ignore&quot;</span>)</span><br><span class="line">11: IDE controller, <span class="built_in">type</span> PIIX4</span><br><span class="line">    (<span class="built_in">disable</span> with <span class="string">&quot;--vsys 0 --unit 11 --ignore&quot;</span>)</span><br><span class="line">12: SCSI controller, <span class="built_in">type</span> LsiLogic</span><br><span class="line">    (change with <span class="string">&quot;--vsys 0 --unit 12 --scsitype &#123;BusLogic|LsiLogic&#125;&quot;</span>;</span><br><span class="line">    <span class="built_in">disable</span> with <span class="string">&quot;--vsys 0 --unit 12 --ignore&quot;</span>)</span><br><span class="line">13: Hard disk image: <span class="built_in">source</span> image=Ubuntu-disk001.vmdk, target path=Ubuntu-disk001.vmdk, controller=12;channel=0</span><br><span class="line">    (change target path with <span class="string">&quot;--vsys 0 --unit 13 --disk path&quot;</span>;</span><br><span class="line">    <span class="built_in">disable</span> with <span class="string">&quot;--vsys 0 --unit 13 --ignore&quot;</span>)</span><br><span class="line">14: Hard disk image: <span class="built_in">source</span> image=Ubuntu-disk002.vmdk, target path=Ubuntu-disk002.vmdk, controller=12;channel=1</span><br><span class="line">    (change target path with <span class="string">&quot;--vsys 0 --unit 14 --disk path&quot;</span>;</span><br><span class="line">    <span class="built_in">disable</span> with <span class="string">&quot;--vsys 0 --unit 14 --ignore&quot;</span>)</span><br><span class="line">0%...10%...20%...30%...40%...50%...60%...70%...80%...90%...100%</span><br><span class="line">Successfully imported the appliance.</span><br><span class="line"></span><br><span class="line">// æ˜¾ç¤ºæŒ‡å®šè™šæ‹Ÿæœºçš„è¯¦ç»†ä¿¡æ¯</span><br><span class="line">VBoxManage showvminfo <span class="string">&quot;Ubuntu18&quot;</span></span><br><span class="line">Name:                        Ubuntu18</span><br><span class="line">Groups:                      /</span><br><span class="line">Guest OS:                    Ubuntu (64-bit)</span><br><span class="line">UUID:                        03d737bc-2e47-4130-aa0b-b6a80767b474</span><br><span class="line">Config file:                 /Users/majinyun/VirtualBoxVMs/Ubuntu18/Ubuntu18.vbox</span><br><span class="line">Snapshot folder:             /Users/majinyun/VirtualBoxVMs/Ubuntu18/Snapshots</span><br><span class="line">Log folder:                  /Users/majinyun/VirtualBoxVMs/Ubuntu18/Logs</span><br><span class="line">Hardware UUID:               03d737bc-2e47-4130-aa0b-b6a80767b474</span><br><span class="line">Memory size                  1024MB</span><br><span class="line">Page Fusion:                 disabled</span><br><span class="line">VRAM size:                   16MB</span><br><span class="line">CPU <span class="built_in">exec</span> <span class="built_in">cap</span>:                100%</span><br><span class="line">HPET:                        disabled</span><br><span class="line">CPUProfile:                  host</span><br><span class="line">Chipset:                     piix3</span><br><span class="line">Firmware:                    BIOS</span><br><span class="line">.</span><br><span class="line">.</span><br><span class="line">.</span><br><span class="line"></span><br><span class="line">// å¯åŠ¨è™šæ‹Ÿæœº</span><br><span class="line">VBoxManage startvm Ubuntu18</span><br><span class="line">Waiting <span class="keyword">for</span> VM <span class="string">&quot;Ubuntu18&quot;</span> to power on...</span><br><span class="line">VM <span class="string">&quot;Ubuntu18&quot;</span> has been successfully started.</span><br><span class="line"></span><br><span class="line">// å…³é—­è™šæ‹Ÿæœº</span><br><span class="line">VBoxManage controlvm Ubuntu18 poweroff</span><br><span class="line">0%...10%...20%...30%...40%...50%...60%...70%...80%...90%...100%</span><br><span class="line"></span><br><span class="line">// åˆ é™¤å¯¼å…¥çš„è™šæ‹Ÿæœº</span><br><span class="line">VBoxManage unregistervm --delete <span class="string">&quot;Ubuntu18&quot;</span></span><br><span class="line">0%...10%...20%...30%...40%...50%...60%...70%...80%...90%...100%</span><br></pre></td></tr></table></figure>
<h1 id="é—®é¢˜"><a href="#é—®é¢˜" class="headerlink" title="é—®é¢˜"></a>é—®é¢˜</h1><h2 id="è§£å†³ç³»ç»Ÿæ›´æ–°åä¸èƒ½æŒ‚è½½å…±äº«ç›®å½•"><a href="#è§£å†³ç³»ç»Ÿæ›´æ–°åä¸èƒ½æŒ‚è½½å…±äº«ç›®å½•" class="headerlink" title="è§£å†³ç³»ç»Ÿæ›´æ–°åä¸èƒ½æŒ‚è½½å…±äº«ç›®å½•"></a>è§£å†³ç³»ç»Ÿæ›´æ–°åä¸èƒ½æŒ‚è½½å…±äº«ç›®å½•</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// è§£å†³ yum update æ›´æ–°å vagrant reload ä¸èƒ½æŒ‚è½½å…±äº«ç›®å½•</span><br><span class="line">sudo /etc/init.d/vboxadd setup</span><br></pre></td></tr></table></figure>
<blockquote>
<ul>
<li><a href="http://www.iamle.com/archives/1908.html">å…±äº«ç›®å½•ä¸èƒ½æŒ‚è½½åˆ° vagrant ç›®å½•</a></li>
<li><a href="https://github.com/LKI/Blogs/issues/2">vagrant up é‡åˆ° mount no such device çš„é—®é¢˜</a></li>
<li><a href="http://able.cd/b/2012/04/09/vagrant-broken-networking-when-packaging-ubuntu-boxes/">broken networking when packaging ubuntu boxes</a></li>
</ul>
</blockquote>
<h2 id="è§£å†³-VBoxManage-error-Failed-to-create-the-host-only-adapter"><a href="#è§£å†³-VBoxManage-error-Failed-to-create-the-host-only-adapter" class="headerlink" title="è§£å†³ VBoxManage: error: Failed to create the host-only adapter"></a>è§£å†³ VBoxManage: error: Failed to create the host-only adapter</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// è§£å†³ CleanMyMacX æ™ºèƒ½æ¸…ç†åä¸èƒ½å¯åŠ¨ vagrant è™šæ‹Ÿæœº</span><br><span class="line">sudo /Library/Application\ Support/VirtualBox/LaunchDaemons/VirtualBoxStartup.sh restart</span><br></pre></td></tr></table></figure>
<h2 id="è§£å†³-sbin-mount-vboxsf-mounting-failed-with-the-error-No-such-device"><a href="#è§£å†³-sbin-mount-vboxsf-mounting-failed-with-the-error-No-such-device" class="headerlink" title="è§£å†³ /sbin/mount.vboxsf: mounting failed with the error: No such device"></a>è§£å†³ /sbin/mount.vboxsf: mounting failed with the error: No such device</h2><blockquote>
<p><a href="https://github.com/CentOS/sig-cloud-instance-build/issues/27#issuecomment-166960158"><code>VirtualBox Guest Additions in Vagrant image</code></a></p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">vagrant plugin install vagrant-vbguest</span><br><span class="line">vagrant vbguest</span><br><span class="line">vagrant ssh</span><br><span class="line"><span class="built_in">cd</span> /opt/VBoxGuestAdditions-5.2.4/init/</span><br><span class="line">sudo ./vboxadd setup</span><br><span class="line">sudo yum -y install kernel kernel-devel</span><br><span class="line"><span class="built_in">exit</span></span><br><span class="line">vagrant reload</span><br></pre></td></tr></table></figure>
<h2 id="å¢åŠ -Vagrant-ç£ç›˜ç©ºé—´"><a href="#å¢åŠ -Vagrant-ç£ç›˜ç©ºé—´" class="headerlink" title="å¢åŠ  Vagrant ç£ç›˜ç©ºé—´"></a>å¢åŠ  Vagrant ç£ç›˜ç©ºé—´</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">VBoxManage clonehd centos-vm-disk1.vmdk centos-vm-disk1.vdi --format VDI</span><br><span class="line">VBoxManage modifyhd centos-vm-disk1.vdi --resize 20480</span><br><span class="line">VBoxManage clonehd centos-vm-disk1.vdi centos-vm-disk.vmdk --format VMDK</span><br></pre></td></tr></table></figure>
<blockquote>
<ul>
<li><a href="http://blog.lenss.nl/2012/09/resize-a-vagrant-vmdk-drive/">RESIZE A VAGRANT VMDK DRIVE</a></li>
<li><a href="https://github.com/mitchellh/vagrant/issues/2339#">Add some way to increase disk space from Vagrantfile</a></li>
<li><a href="http://www.digitesters.com/manage-a-virtualbox-headless-system-stop-and-remove-a-vm/">Manage a VirtualBox-headless system: stop and remove a VM</a></li>
</ul>
</blockquote>
<h2 id="æ›´æ–°-VirtualBox-å’Œ-Vagrant-åæ— æ³•å¯åŠ¨"><a href="#æ›´æ–°-VirtualBox-å’Œ-Vagrant-åæ— æ³•å¯åŠ¨" class="headerlink" title="æ›´æ–° VirtualBox å’Œ Vagrant åæ— æ³•å¯åŠ¨"></a>æ›´æ–° VirtualBox å’Œ Vagrant åæ— æ³•å¯åŠ¨</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">vagrant up</span><br><span class="line">Vagrant failed to initialize at a very early stage:</span><br><span class="line"></span><br><span class="line">The plugins failed to initialize correctly. This may be due to manual</span><br><span class="line">modifications made within the Vagrant home directory. Vagrant can</span><br><span class="line">attempt to automatically correct this issue by running:</span><br><span class="line"></span><br><span class="line">vagrant plugin repair</span><br><span class="line"></span><br><span class="line">If Vagrant was recently updated, this error may be due to incompatible</span><br><span class="line">versions of dependencies. To fix this problem please remove and re-install</span><br><span class="line">all plugins. Vagrant can attempt to <span class="keyword">do</span> this automatically by running:</span><br><span class="line"></span><br><span class="line">vagrant plugin expunge --reinstall</span><br><span class="line"></span><br><span class="line">Or you may want to try updating the installed plugins to their latest</span><br><span class="line">versions:</span><br><span class="line"></span><br><span class="line">vagrant plugin update</span><br><span class="line"></span><br><span class="line">Error message given during initialization: Unable to resolve dependency: user requested <span class="string">&#x27;vagrant-parallels (&gt; 0)&#x27;</span></span><br></pre></td></tr></table></figure>
<h2 id="æ›´æ–°-VirtualBox-å-Vagrant-æç¤ºéœ€è¦æ›´æ–°ç‰ˆæœ¬"><a href="#æ›´æ–°-VirtualBox-å-Vagrant-æç¤ºéœ€è¦æ›´æ–°ç‰ˆæœ¬" class="headerlink" title="æ›´æ–° VirtualBox å Vagrant æç¤ºéœ€è¦æ›´æ–°ç‰ˆæœ¬"></a>æ›´æ–° VirtualBox å Vagrant æç¤ºéœ€è¦æ›´æ–°ç‰ˆæœ¬</h2><p><a href="https://github.com/hashicorp/vagrant/issues/11249#issuecomment-565736894">I patched Vagrant on macOS with this script</a></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">vagrant up</span><br><span class="line">The provider <span class="string">&#x27;virtualbox&#x27;</span> that was requested to back the machine</span><br><span class="line"><span class="string">&#x27;default&#x27;</span> is reporting that it isn<span class="string">&#x27;t usable on this system. The</span></span><br><span class="line"><span class="string">reason is shown below:</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Vagrant has detected that you have a version of VirtualBox installed</span></span><br><span class="line"><span class="string">that is not supported by this version of Vagrant. Please install one of</span></span><br><span class="line"><span class="string">the supported versions listed below to use Vagrant:</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">4.0, 4.1, 4.2, 4.3, 5.0, 5.1, 5.2, 6.0</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">A Vagrant update may also be available that adds support for the version</span></span><br><span class="line"><span class="string">you specified. Please check www.vagrantup.com/downloads.html to download</span></span><br><span class="line"><span class="string">the latest version.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">curl https://github.com/briancain/vagrant/commit/fb4e6985e142da56bad143d70600cd3695c91757.patch &gt; /tmp/vagrant_226_virtualbox_610.patch</span></span><br><span class="line"><span class="string">cd /opt/vagrant/embedded/gems/2.2.6/gems/vagrant-2.2.6</span></span><br><span class="line"><span class="string">sudo git apply --verbose --exclude=&#x27;</span>website/*<span class="string">&#x27; /tmp/vagrant_226_virtualbox_610.patch</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Password:</span></span><br><span class="line"><span class="string">Skipped patch &#x27;</span>website/<span class="built_in">source</span>/docs/virtualbox/index.html.md<span class="string">&#x27;.</span></span><br><span class="line"><span class="string">Checking patch plugins/providers/virtualbox/driver/meta.rb...</span></span><br><span class="line"><span class="string">Checking patch plugins/providers/virtualbox/driver/version_6_1.rb...</span></span><br><span class="line"><span class="string">Checking patch plugins/providers/virtualbox/plugin.rb...</span></span><br><span class="line"><span class="string">Applied patch plugins/providers/virtualbox/driver/meta.rb cleanly.</span></span><br><span class="line"><span class="string">Applied patch plugins/providers/virtualbox/driver/version_6_1.rb cleanly.</span></span><br><span class="line"><span class="string">Applied patch plugins/providers/virtualbox/plugin.rb cleanly.</span></span><br></pre></td></tr></table></figure>
<h1 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h1><blockquote>
<ul>
<li><a href="https://www.vagrantup.com/">Vagrant å®˜ç½‘</a></li>
<li><a href="https://atlas.hashicorp.com/boxes/search?utm_source=vagrantcloud.com&amp;vagrantcloud=1">About Vagrant Cloud and Atlas</a></li>
</ul>
</blockquote>
]]></content>
      <categories>
        <category>devtools</category>
      </categories>
      <tags>
        <tag>linux</tag>
        <tag>mac</tag>
        <tag>devtools</tag>
      </tags>
  </entry>
  <entry>
    <title>Mac VSCode å¿«æ·é”®</title>
    <url>/2018/12/02/mac-vscode-keyboard/</url>
    <content><![CDATA[<p><img src="/images/2019/201904191912.jpg" alt="201904191912.jpg"></p>
<p>ğŸ’¥VScode å†…ç½®çš„å¿«æ·é”®ä¹‹å¤šè®©äººç ç›®ç»“èˆŒï¼Œä½œä¸ºä¸€åå–å¼„é£éªšçš„ VSCoder æŠŠå¸¸ç”¨çš„ä¸€äº›å¿«æ·é”®æ‰‹åˆ°æ“’æ¥ä¹Ÿå¹¶ééš¾äº‹ã€‚ç›¸å£°è®²ç©¶å­¦è¯´é€—å”±ï¼Œç¼–è¾‘å™¨è‡ªç„¶æ˜¯å¢åˆ æ”¹æŸ¥ï¼ŒåŠ ä¹‹é•¿å¹´åƒç¬¦å·çš„äºä¸Šå­—æ¯çš„å½“ç¡¬æ˜¯é€¼ç€æˆ‘å­¦ä¼šäº†å¤åˆ¶ç²˜è´´å¤§æ³•ï¼Œåœ¨æ­¤æ³•çš„æ€‚æ¿ä¹‹ä¸‹æˆ‘åˆå¿ä¸ä½æŠ˜è…¾èµ·æ¥ï¼Œä¸€å¼€å§‹æ²¡è§‰ç€ï¼Œä¸€æ®µæ—¶é—´ä»¥åç«Ÿç¥ä¸çŸ¥é¬¼ä¸è§‰çš„æé«˜äº†ä¸€ä¸‹ç å­—æ•ˆç‡ï¼Œçªƒå–œã€‚å½“ç„¶è¿™ä¹Ÿæ²¡ä»€ä¹ˆï¼Œåªä¸è¿‡åˆ»æ„ç»ƒä¹ äº†å‡ ä¸ªå¿«æ·é”®è€Œå·²ã€‚</p>
<span id="more"></span>
<h1 id="å®šåˆ¶å¿«æ·é”®"><a href="#å®šåˆ¶å¿«æ·é”®" class="headerlink" title="å®šåˆ¶å¿«æ·é”®"></a>å®šåˆ¶å¿«æ·é”®</h1><h2 id="ä¿®æ”¹æŸä¸ªåŠ¨ä½œå¿«æ·é”®"><a href="#ä¿®æ”¹æŸä¸ªåŠ¨ä½œå¿«æ·é”®" class="headerlink" title="ä¿®æ”¹æŸä¸ªåŠ¨ä½œå¿«æ·é”®"></a>ä¿®æ”¹æŸä¸ªåŠ¨ä½œå¿«æ·é”®</h2><p>æŒ‰ <code>Cmd+K Cmd+S</code> è·³è½¬åˆ°å¿«æ·é”®é…ç½®é¡µé¢ï¼Œæ‰¾åˆ°è¦æ”¹çš„å‘½ä»¤å¿«æ·é”®ï¼Œé€‰ä¸­åæŒ‰å³é”®æˆ–è€… <code>Cmd+K Cmd+K</code> åœ¨å¼¹å‡ºæ¡†ä¸­è¾“å…¥è‡ªå®šä¹‰çš„å¿«æ·é”®å›è½¦å³å¯ã€‚</p>
<p><img src="https://inotes.oss-cn-beijing.aliyuncs.com/vscode/vscode-modify-keyboard.jpg" alt="vscode-modify-keyboard.jpg"></p>
<h2 id="å®šåˆ¶æŸä¸ªåŠ¨ä½œçš„å¿«æ·é”®"><a href="#å®šåˆ¶æŸä¸ªåŠ¨ä½œçš„å¿«æ·é”®" class="headerlink" title="å®šåˆ¶æŸä¸ªåŠ¨ä½œçš„å¿«æ·é”®"></a>å®šåˆ¶æŸä¸ªåŠ¨ä½œçš„å¿«æ·é”®</h2><p>æ‰“å¼€ <code>keyboard.json</code> æ–‡ä»¶ï¼Œåœ¨å…¶ä¸­è¾“å…¥å¦‚ä¸‹é…ç½®ä¿å­˜å³å¯ã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// æ¯”å¦‚å°† Cmd+D å¿«æ·é”®ä¿®æ”¹ä¸ºæ·»åŠ ä¸‹ä¸€ä¸ªåŒ¹é…é¡¹</span><br><span class="line">[</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="string">&quot;key&quot;</span>: <span class="string">&quot;cmd+d&quot;</span>,</span><br><span class="line">    <span class="string">&quot;command&quot;</span>: <span class="string">&quot;editor.action.addSelectionToNextFindMatch&quot;</span>,</span><br><span class="line">    <span class="string">&quot;when&quot;</span>: <span class="string">&quot;editorFocus&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<h1 id="æˆ‘çš„å¿«æ·é”®"><a href="#æˆ‘çš„å¿«æ·é”®" class="headerlink" title="æˆ‘çš„å¿«æ·é”®"></a>æˆ‘çš„å¿«æ·é”®</h1><blockquote>
<p>éƒ¨åˆ†å¿«æ·é”®æœ¬äººæ ¹æ®è‡ªå·±çš„ä½¿ç”¨ä¹ æƒ¯è¿›è¡Œäº†å®šåˆ¶ã€‚</p>
</blockquote>
<h2 id="Code"><a href="#Code" class="headerlink" title="Code"></a>Code</h2><table>
<thead>
<tr>
<th>å¿«æ·é”®</th>
<th>ä¸­æ–‡è¯´æ˜</th>
<th>è‹±æ–‡è¯´æ˜</th>
<th>å¤‡æ³¨</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong><code>Cmd+,</code></strong></td>
<td>è®¾ç½®</td>
<td>Settings</td>
<td></td>
</tr>
<tr>
<td><strong><code>Shift+Cmd+X</code></strong></td>
<td>æ‰©å±•</td>
<td></td>
<td></td>
</tr>
<tr>
<td><strong><code>Cmd+K Cmd+S</code></strong></td>
<td>é”®ç›˜å¿«æ·æ–¹å¼</td>
<td></td>
<td></td>
</tr>
<tr>
<td><strong><code>Cmd+K Cmd+M</code></strong></td>
<td>æŒ‰é”®æ˜ å°„</td>
<td></td>
<td></td>
</tr>
<tr>
<td><code>Cmd+K Cmd+T</code></td>
<td>é¢œè‰²ä¸»é¢˜</td>
<td></td>
<td></td>
</tr>
<tr>
<td><code>Cmd+H</code></td>
<td>éšè— VSCode</td>
<td></td>
<td></td>
</tr>
<tr>
<td><code>Alt+Cmd+H</code></td>
<td>éšè— VSCode</td>
<td></td>
<td></td>
</tr>
<tr>
<td><code>Cmd+Q</code></td>
<td>é€€å‡º VSCode</td>
<td></td>
</tr>
</tbody>
</table>
<h2 id="æ–‡ä»¶"><a href="#æ–‡ä»¶" class="headerlink" title="æ–‡ä»¶"></a>æ–‡ä»¶</h2><table>
<thead>
<tr>
<th>å¿«æ·é”®</th>
<th>ä¸­æ–‡è¯´æ˜</th>
<th>è‹±æ–‡è¯´æ˜</th>
<th>å¤‡æ³¨</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong><code>Cmd+N</code></strong></td>
<td>æ–°å»ºæ–‡ä»¶</td>
<td></td>
<td></td>
</tr>
<tr>
<td><strong><code>Cmd+Shift+N</code></strong></td>
<td>æ–°å»ºçª—å£</td>
<td></td>
<td></td>
</tr>
<tr>
<td><strong><code>Cmd+O</code></strong></td>
<td>æ‰“å¼€æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹</td>
<td></td>
<td></td>
</tr>
<tr>
<td><strong><code>Shift+Cmd+T</code></strong></td>
<td>é‡æ–°æ‰“å¼€å·²å…³é—­çš„ç¼–è¾‘æ–‡ä»¶</td>
<td></td>
<td></td>
</tr>
<tr>
<td><code>Cmd+S</code></td>
<td>ä¿å­˜</td>
<td></td>
<td></td>
</tr>
<tr>
<td><code>Shift+Cmd+S</code></td>
<td>å¦å­˜ä¸º</td>
<td></td>
<td></td>
</tr>
<tr>
<td><code>Alt+Cmd+S</code></td>
<td>å…¨éƒ¨ä¿å­˜</td>
<td></td>
<td></td>
</tr>
<tr>
<td><code>Cmd+W</code></td>
<td>å…³é—­å½“å‰çª—å£ï¼Œæ²¡æœ‰çª—å£å°±å…³é—­ç¼–è¾‘å™¨</td>
<td></td>
<td></td>
</tr>
<tr>
<td><code>Cmd+K F</code></td>
<td>å…³é—­å½“å‰å·¥ç¨‹ï¼Œå…³é—­æ–‡ä»¶å¤¹</td>
<td></td>
</tr>
</tbody>
</table>
<h2 id="ç¼–è¾‘"><a href="#ç¼–è¾‘" class="headerlink" title="ç¼–è¾‘"></a>ç¼–è¾‘</h2><table>
<thead>
<tr>
<th>å¿«æ·é”®</th>
<th>ä¸­æ–‡è¯´æ˜</th>
<th>è‹±æ–‡è¯´æ˜</th>
<th>å¤‡æ³¨</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong><code>Cmd+Z</code></strong></td>
<td>æ’¤é”€</td>
<td></td>
</tr>
<tr>
<td><strong><code>Shift+Cmd+Z</code></strong></td>
<td>æ¢å¤</td>
<td></td>
</tr>
<tr>
<td><strong><code>Cmd+X</code></strong></td>
<td>å‰ªåˆ‡</td>
<td></td>
</tr>
<tr>
<td><strong><code>Cmd+C</code></strong></td>
<td>å¤åˆ¶</td>
<td></td>
</tr>
<tr>
<td><strong><code>Cmd+V</code></strong></td>
<td>ç²˜è´´</td>
<td></td>
</tr>
<tr>
<td><strong><code>Cmd+F</code></strong></td>
<td>æŸ¥æ‰¾/æ›¿æ¢</td>
<td></td>
</tr>
<tr>
<td><strong><code>Shift+Cmd+F</code></strong></td>
<td>åœ¨æ–‡ä»¶ä¸­æŸ¥æ‰¾</td>
<td></td>
</tr>
<tr>
<td><strong><code>Shift+Cmd+H</code></strong></td>
<td>åœ¨æ–‡ä»¶ä¸­æ›¿æ¢</td>
<td></td>
</tr>
<tr>
<td><strong><code>Cmd+/</code></strong></td>
<td>åˆ‡æ¢è¡Œæ³¨é‡Š</td>
<td></td>
</tr>
<tr>
<td><strong><code>Alt+Shift+A</code></strong></td>
<td>åˆ‡æ¢å—æ³¨é‡Š</td>
<td></td>
</tr>
<tr>
<td><code>Ctrl+Cmd+Space</code></td>
<td>è¡¨æƒ…ä¸ç¬¦å·</td>
</tr>
</tbody>
</table>
<h2 id="é€‰æ‹©"><a href="#é€‰æ‹©" class="headerlink" title="é€‰æ‹©"></a>é€‰æ‹©</h2><table>
<thead>
<tr>
<th>å¿«æ·é”®</th>
<th>ä¸­æ–‡è¯´æ˜</th>
<th>è‹±æ–‡è¯´æ˜</th>
<th>å¤‡æ³¨</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>Cmd+A</code></td>
<td>å…¨é€‰</td>
<td></td>
<td></td>
</tr>
<tr>
<td><code>Ctrl+Shift+Cmd+â¡ï¸</code></td>
<td>å±•å¼€é€‰å®šå†…å®¹</td>
<td></td>
<td></td>
</tr>
<tr>
<td><code>Ctrl+Shift+Cmd+â¬…ï¸</code></td>
<td>ç¼©å°é€‰å®šå†…å®¹</td>
<td></td>
<td></td>
</tr>
<tr>
<td><code>Alt+Shift+â¬†ï¸</code></td>
<td>å‘ä¸Šå¤åˆ¶ä¸€è¡Œ</td>
<td></td>
<td></td>
</tr>
<tr>
<td><code>Alt+Shift+â¬‡ï¸</code></td>
<td>å‘ä¸‹å¤åˆ¶ä¸€è¡Œ</td>
<td></td>
<td></td>
</tr>
<tr>
<td><code>Alt+â¬†ï¸</code></td>
<td>å‘ä¸Šç§»åŠ¨ä¸€è¡Œ</td>
<td></td>
<td></td>
</tr>
<tr>
<td><code>Alt+â¬‡ï¸</code></td>
<td>å‘ä¸‹ç§»åŠ¨ä¸€è¡Œ</td>
<td></td>
<td></td>
</tr>
<tr>
<td><code>Alt+Cmd+â¬†ï¸</code></td>
<td>åœ¨ä¸Šé¢æ·»åŠ å…‰æ ‡</td>
<td></td>
<td></td>
</tr>
<tr>
<td><code>Alt+Cmd+â¬‡ï¸</code></td>
<td>åœ¨ä¸‹é¢æ·»åŠ å…‰æ ‡</td>
<td></td>
<td></td>
</tr>
<tr>
<td><code>Cmd+D</code></td>
<td>æ·»åŠ ä¸‹ä¸€ä¸ªåŒ¹é…é¡¹</td>
<td></td>
<td></td>
</tr>
<tr>
<td><code>Shift+Cmd+L</code></td>
<td>é€‰æ‹©æ‰€æœ‰åŒ¹é…é¡¹</td>
<td></td>
</tr>
</tbody>
</table>
<h2 id="æŸ¥çœ‹"><a href="#æŸ¥çœ‹" class="headerlink" title="æŸ¥çœ‹"></a>æŸ¥çœ‹</h2><table>
<thead>
<tr>
<th>å¿«æ·é”®</th>
<th>ä¸­æ–‡è¯´æ˜</th>
<th>è‹±æ–‡è¯´æ˜</th>
<th>å¤‡æ³¨</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong><code>Shift+Cmd+P</code></strong></td>
<td>å‘½ä»¤é¢æ¿</td>
<td></td>
<td></td>
</tr>
<tr>
<td><code>Ctrl+Cmd+F</code></td>
<td>åˆ‡æ¢å…¨å±</td>
<td></td>
<td></td>
</tr>
<tr>
<td><code>Cmd+K Z</code></td>
<td>åˆ‡æ¢ <code>Zen</code> æ¨¡å¼</td>
<td></td>
<td></td>
</tr>
<tr>
<td><strong><code>Cmd+B</code></strong></td>
<td>åˆ‡æ¢ä¾§è¾¹æ </td>
<td></td>
<td></td>
</tr>
<tr>
<td><code>Cmd+J</code></td>
<td>åˆ‡æ¢é¢æ¿</td>
<td></td>
<td></td>
</tr>
<tr>
<td><code>Cmd+=</code></td>
<td>æ”¾å¤§</td>
<td></td>
<td></td>
</tr>
<tr>
<td><code>Cmd+-</code></td>
<td>ç¼©å°</td>
<td></td>
<td></td>
</tr>
<tr>
<td><code>Shift+Cmd+0</code></td>
<td>é‡ç½®ç¼©æ”¾</td>
<td></td>
<td>åŸ <strong><code>Cmd+NumPad0</code></strong></td>
</tr>
<tr>
<td><code>Alt+Cmd+0</code></td>
<td>ç¿»è½¬å¸ƒå±€</td>
<td></td>
<td></td>
</tr>
<tr>
<td><strong><code>Shift+Cmd+E</code></strong></td>
<td>èµ„æºç®¡ç†å™¨</td>
<td></td>
<td></td>
</tr>
<tr>
<td><strong><code>Shift+Cmd+F</code></strong></td>
<td>æ–‡ä»¶ä¸­æœç´¢</td>
<td></td>
<td></td>
</tr>
<tr>
<td><code>Ctrl+Shift+G</code></td>
<td>æºä»£ç ç®¡ç†</td>
<td></td>
<td></td>
</tr>
<tr>
<td><code>Shift+Cmd+D</code></td>
<td>è°ƒè¯•</td>
<td></td>
<td></td>
</tr>
<tr>
<td><code>Shift+Cmd+X</code></td>
<td>æ‰©å±•</td>
<td></td>
<td></td>
</tr>
<tr>
<td><code>Shift+Cmd+U</code></td>
<td>è¾“å‡º</td>
<td></td>
<td></td>
</tr>
<tr>
<td><strong><code>Shift+Cmd+M</code></strong></td>
<td>é—®é¢˜</td>
<td></td>
<td></td>
</tr>
<tr>
<td><code>Shift+Cmd+Y</code></td>
<td>è°ƒè¯•æ§åˆ¶å°</td>
<td></td>
<td></td>
</tr>
<tr>
<td><strong><code>Ctrl+`</code></strong></td>
<td>æ‰“å¼€é›†æˆç»ˆç«¯</td>
<td></td>
<td></td>
</tr>
<tr>
<td><strong><code>Cmd+\</code></strong></td>
<td>ç«–å‘æ‹†åˆ†ç¼–è¾‘å™¨ï¼ˆæœ€å¤š <code>3</code> ä¸ªï¼‰</td>
<td></td>
<td></td>
</tr>
<tr>
<td><strong><code>Alt+Z</code></strong></td>
<td>åˆ‡æ¢è‡ªåŠ¨æ¢è¡Œ</td>
<td></td>
</tr>
</tbody>
</table>
<h2 id="è½¬åˆ°"><a href="#è½¬åˆ°" class="headerlink" title="è½¬åˆ°"></a>è½¬åˆ°</h2><table>
<thead>
<tr>
<th>å¿«æ·é”®</th>
<th>ä¸­æ–‡è¯´æ˜</th>
<th>è‹±æ–‡è¯´æ˜</th>
<th>å¤‡æ³¨</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong><code>Cmd+-</code></strong></td>
<td>åé€€</td>
<td></td>
<td>åŸ <strong><code>Ctrl+-</code></strong></td>
</tr>
<tr>
<td><strong><code>Cmd+=</code></strong></td>
<td>å‰è¿›</td>
<td></td>
<td>åŸ <strong><code>Ctrl+Shift+-</code></strong></td>
</tr>
<tr>
<td><code>Alt+Cmd+â¡ï¸</code></td>
<td>ä¸‹ä¸€ä¸ªç¼–è¾‘å™¨</td>
<td></td>
<td></td>
</tr>
<tr>
<td><code>Alt+Cmd+â¬…ï¸</code></td>
<td>ä¸Šä¸€ä¸ªç¼–è¾‘å™¨</td>
<td></td>
<td></td>
</tr>
<tr>
<td><code>Ctrl+â¡ï¸</code></td>
<td>ç»„ä¸­ä¸‹ä¸€ä¸ªä½¿ç”¨è¿‡çš„ç¼–è¾‘å™¨</td>
<td></td>
<td></td>
</tr>
<tr>
<td><code>Ctrl+Shift+â¡ï¸</code></td>
<td>ç»„ä¸­ä¸Šä¸€ä¸ªä½¿ç”¨è¿‡çš„ç¼–è¾‘å™¨</td>
<td></td>
<td></td>
</tr>
<tr>
<td><code>Cmd+1</code></td>
<td>åˆ‡æ¢åˆ°ç¬¬ä¸€ç»„</td>
<td></td>
<td></td>
</tr>
<tr>
<td><code>Cmd+2</code></td>
<td>åˆ‡æ¢åˆ°ç¬¬äºŒç»„</td>
<td></td>
<td></td>
</tr>
<tr>
<td><code>Cmd+3</code></td>
<td>åˆ‡æ¢åˆ°ç¬¬ä¸‰ç»„</td>
<td></td>
<td></td>
</tr>
<tr>
<td><code>Cmd+4</code></td>
<td>åˆ‡æ¢åˆ°ç¬¬å››ç»„</td>
<td></td>
<td></td>
</tr>
<tr>
<td><code>Cmd+5</code></td>
<td>åˆ‡æ¢åˆ°ç¬¬äº”ç»„</td>
<td></td>
<td></td>
</tr>
<tr>
<td><code>Cmd+K Cmd+â¬…ï¸</code></td>
<td>å·¦ä¾§ç»„</td>
<td></td>
<td></td>
</tr>
<tr>
<td><code>Cmd+K Cmd+â¡ï¸</code></td>
<td>å³ä¾§ç»„</td>
<td></td>
<td></td>
</tr>
<tr>
<td><code>Cmd+K Cmd+â¬†ï¸</code></td>
<td>ä¸Šæ–¹ç»„</td>
<td></td>
<td></td>
</tr>
<tr>
<td><code>Cmd+K Cmd+â¬‡ï¸</code></td>
<td>ä¸‹æ–¹ç»„</td>
<td></td>
<td></td>
</tr>
<tr>
<td><strong><code>Cmd+P</code></strong></td>
<td>è½¬åˆ°æ–‡ä»¶</td>
<td></td>
<td></td>
</tr>
<tr>
<td><strong><code>Cmd+R</code></strong></td>
<td>è½¬åˆ°æ–‡ä»¶ä¸­çš„ç¬¦å·</td>
<td></td>
<td>åŸ <strong><code>Shift+Cmd+O</code></strong></td>
</tr>
<tr>
<td><code>Shift+Cmd+R</code></td>
<td>è½¬åˆ°å·¥ä½œåŒºä¸­çš„ç¬¦å·</td>
<td></td>
<td></td>
</tr>
<tr>
<td><code>Shift+Cmd+O</code></td>
<td>è½¬åˆ°æ–‡ä»¶ä¸­çš„ç¬¦å·</td>
<td></td>
<td></td>
</tr>
<tr>
<td><code>Cmd+T</code></td>
<td>è½¬åˆ°å·¥ä½œåŒºä¸­çš„ç¬¦å·</td>
<td></td>
<td></td>
</tr>
<tr>
<td><strong><code>F12</code></strong></td>
<td>è½¬åˆ°å®šä¹‰</td>
<td></td>
<td></td>
</tr>
<tr>
<td><code>Cmd+F12</code></td>
<td>è½¬åˆ°å®ç°</td>
<td></td>
<td></td>
</tr>
<tr>
<td><strong><code>Ctrl+G</code></strong></td>
<td>è½¬åˆ°è¡Œ</td>
<td></td>
</tr>
</tbody>
</table>
<h2 id="è°ƒè¯•"><a href="#è°ƒè¯•" class="headerlink" title="è°ƒè¯•"></a>è°ƒè¯•</h2><table>
<thead>
<tr>
<th>å¿«æ·é”®</th>
<th>ä¸­æ–‡è¯´æ˜</th>
<th>è‹±æ–‡è¯´æ˜</th>
<th>å¤‡æ³¨</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>F5</code></td>
<td>å¯åŠ¨è°ƒè¯•ï¼Œé‡å¤æŒ‰ç»§ç»­è°ƒè¯•</td>
<td></td>
<td></td>
</tr>
<tr>
<td><code>Ctrl+F5</code></td>
<td>éè°ƒè¯•å¯åŠ¨</td>
<td></td>
<td></td>
</tr>
<tr>
<td><code>Shift+F5</code></td>
<td>åœæ­¢è°ƒè¯•</td>
<td></td>
<td></td>
</tr>
<tr>
<td><code>Shift+Cmd+F5</code></td>
<td>é‡å¯è°ƒè¯•</td>
<td></td>
<td></td>
</tr>
<tr>
<td><code>F10</code></td>
<td>å•æ­¥è·³è¿‡</td>
<td></td>
<td></td>
</tr>
<tr>
<td><code>F11</code></td>
<td>å•æ­¥æ‰§è¡Œ</td>
<td></td>
<td></td>
</tr>
<tr>
<td><code>Shift+F11</code></td>
<td>å•æ­¥è·³å‡º</td>
<td></td>
<td></td>
</tr>
<tr>
<td><code>F5</code></td>
<td>ç»§ç»­</td>
<td></td>
<td></td>
</tr>
<tr>
<td><code>F9</code></td>
<td>åˆ‡æ¢æ–­ç‚¹</td>
<td></td>
<td></td>
</tr>
<tr>
<td><code>Shift+F9</code></td>
<td>å†…è”æ–­ç‚¹</td>
<td></td>
</tr>
</tbody>
</table>
<h2 id="ç»ˆç«¯"><a href="#ç»ˆç«¯" class="headerlink" title="ç»ˆç«¯"></a>ç»ˆç«¯</h2><table>
<thead>
<tr>
<th>å¿«æ·é”®</th>
<th>ä¸­æ–‡è¯´æ˜</th>
<th>è‹±æ–‡è¯´æ˜</th>
<th>å¤‡æ³¨</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong><code>Ctrl+~</code></strong></td>
<td>æ–°å»ºç»ˆç«¯</td>
<td></td>
<td></td>
</tr>
<tr>
<td><code>Ctrl+\</code></td>
<td>æ‹†åˆ†ç»ˆç«¯</td>
<td></td>
<td></td>
</tr>
<tr>
<td><code>Shift+Cmd+B</code></td>
<td>è¿è¡Œç”Ÿæˆä»»åŠ¡</td>
<td></td>
</tr>
</tbody>
</table>
<h2 id="çª—å£"><a href="#çª—å£" class="headerlink" title="çª—å£"></a>çª—å£</h2><table>
<thead>
<tr>
<th>å¿«æ·é”®</th>
<th>ä¸­æ–‡è¯´æ˜</th>
<th>è‹±æ–‡è¯´æ˜</th>
<th>å¤‡æ³¨</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>Cmd+M</code></td>
<td>æœ€å°åŒ–çª—å£</td>
<td></td>
<td></td>
</tr>
<tr>
<td><code>Ctrl+W</code></td>
<td>åˆ‡æ¢çª—å£</td>
<td></td>
</tr>
</tbody>
</table>
<h2 id="å¸®åŠ©"><a href="#å¸®åŠ©" class="headerlink" title="å¸®åŠ©"></a>å¸®åŠ©</h2><table>
<thead>
<tr>
<th>å¿«æ·é”®</th>
<th>ä¸­æ–‡è¯´æ˜</th>
<th>è‹±æ–‡è¯´æ˜</th>
<th>å¤‡æ³¨</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>Shift+Cmd+/</code></td>
<td>æ˜¾ç¤ºå¸®åŠ©</td>
<td></td>
</tr>
</tbody>
</table>
<h2 id="å…¶å®ƒ"><a href="#å…¶å®ƒ" class="headerlink" title="å…¶å®ƒ"></a>å…¶å®ƒ</h2><blockquote>
<p>è¯šç„¶ï¼ŒVSCode å¹¶æ²¡æœ‰æŠŠæ‰€æœ‰çš„å¿«æ·é”®åˆ—åˆ°èœå•æ ä¸­ï¼Œå¥½å¤šå¿«æ·é”®è‡ªæœ‰å…¶ä½¿ç”¨ä¸Šä¸‹æ–‡ï¼Œä¸”åˆ—ä¸€ä¸‹å…¶å®ƒçš„å¿«æ·é”®ã€‚</p>
</blockquote>
<table>
<thead>
<tr>
<th>å¿«æ·é”®</th>
<th>ä¸­æ–‡è¯´æ˜</th>
<th>è‹±æ–‡è¯´æ˜</th>
<th>å¤‡æ³¨</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>Ctrl+Tab</code></td>
<td>åœ¨å†å²æ‰“å¼€æ–‡ä»¶ä¹‹é—´åˆ‡æ¢</td>
<td></td>
<td></td>
</tr>
<tr>
<td><code>Cmd+~</code></td>
<td>åœ¨æ‰“å¼€çš„å¤šä¸ªçª—å£ä¹‹é—´åˆ‡æ¢</td>
<td></td>
<td></td>
</tr>
<tr>
<td><code>Cmd+[</code></td>
<td>ä»£ç å·¦ç¼©è¿›</td>
<td></td>
<td></td>
</tr>
<tr>
<td><code>Cmd+]</code></td>
<td>ä»£ç å³ç¼©è¿›</td>
<td></td>
<td></td>
</tr>
<tr>
<td><code>Shift+Alt+F</code></td>
<td>æ ¼å¼åŒ–ä»£ç ï¼Œæˆ–è€… <code>Shift+Cmd+P</code> åè¾“å…¥ <code>Format Document</code></td>
<td></td>
<td></td>
</tr>
<tr>
<td><code>Cmd+Enter</code></td>
<td>å½“å‰è¡Œä¹‹åæ’å…¥ä¸€ä¸ªç©ºè¡Œ</td>
<td></td>
<td></td>
</tr>
<tr>
<td><code>Shift+Cmd+Enter</code></td>
<td>å½“å‰è¡Œä¹‹å‰æ’å…¥ä¸€ä¸ªç©ºè¡Œ</td>
<td></td>
<td></td>
</tr>
<tr>
<td><code>Cmd+â¬†ï¸</code></td>
<td>ç§»åŠ¨å…‰æ ‡åˆ°å½“å‰æ–‡ä»¶é¦–è¡Œ</td>
<td></td>
<td></td>
</tr>
<tr>
<td><code>Cmd+ï¸â¬‡ï¸</code></td>
<td>ç§»åŠ¨å…‰æ ‡åˆ°å½“å‰æ–‡ä»¶å°¾è¡Œ</td>
<td></td>
<td></td>
</tr>
<tr>
<td><code>Cmd+â¬…ï¸</code></td>
<td>ç§»åŠ¨å…‰æ ‡åˆ°å½“å‰è¡Œé¦–</td>
<td></td>
<td></td>
</tr>
<tr>
<td><code>Cmd+â¡ï¸</code></td>
<td>ç§»åŠ¨å…‰æ ‡åˆ°å½“å‰è¡Œå°¾</td>
<td></td>
<td></td>
</tr>
<tr>
<td><code>Alt+â¬…ï¸</code></td>
<td>å‘å·¦ç§»åŠ¨å…‰æ ‡ä¸€ä¸ªå•è¯ï¼ˆè¿å­—ï¼‰</td>
<td></td>
<td></td>
</tr>
<tr>
<td><code>Alt+â¡ï¸</code></td>
<td>å‘å³ç§»åŠ¨å…‰æ ‡ä¸€ä¸ªå•è¯ï¼ˆè¿å­—ï¼‰</td>
<td></td>
<td></td>
</tr>
<tr>
<td><code>Shift+Cmd+â¬†ï¸</code></td>
<td>é€‰ä¸­ä»é¦–è¡Œåˆ°å…‰æ ‡å¤„çš„æ–‡æ¡£</td>
<td></td>
<td></td>
</tr>
<tr>
<td><code>Shift+Cmd+â¬‡ï¸</code></td>
<td>é€‰ä¸­ä»å…‰æ ‡åˆ°å°¾è¡Œå¤„çš„æ–‡æ¡£</td>
<td></td>
<td></td>
</tr>
<tr>
<td><code>Shift+Cmd+â¬…ï¸</code></td>
<td>é€‰ä¸­å…‰æ ‡å¤„åˆ°è¡Œé¦–</td>
<td></td>
<td></td>
</tr>
<tr>
<td><code>Shift+Cmd+â¡ï¸</code></td>
<td>é€‰ä¸­å…‰æ ‡å¤„åˆ°è¡Œå°¾</td>
<td></td>
<td></td>
</tr>
<tr>
<td><code>Cmd+I</code></td>
<td>é€‰ä¸­å½“å‰è¡Œ</td>
<td></td>
<td></td>
</tr>
<tr>
<td><code>Cmd+Delete</code></td>
<td>åˆ é™¤å…‰æ ‡å¤„åˆ°è¡Œé¦–</td>
<td></td>
<td></td>
</tr>
<tr>
<td><code>Cmd+F2</code></td>
<td>å…‰æ ‡å…ˆç§»åŠ¨åˆ°å•è¯ä¸Šï¼Œç„¶åæŒ‰ <code>Cmd+F2</code> åå¯ä»¥è¿›è¡Œæ‰¹é‡é‡å‘½å</td>
<td></td>
<td></td>
</tr>
<tr>
<td><code>Cmd+K V</code></td>
<td><code>Markdown</code> æ–‡æ¡£é¢„è§ˆ</td>
<td></td>
<td></td>
</tr>
<tr>
<td><code>Shift+Cmd+K</code></td>
<td>åˆ é™¤å½“å‰è¡Œ</td>
<td></td>
<td></td>
</tr>
<tr>
<td><code>Shift+Cmd+\</code></td>
<td>åœ¨åŒ¹é…çš„æ‹¬å·ä¹‹å‰è·³è½¬</td>
<td></td>
<td></td>
</tr>
<tr>
<td><code>Shift+Cmd+[</code></td>
<td>è·³è½¬åˆ°ä¸Šä¸€ä¸ªç¼–è¾‘çª—å£</td>
<td></td>
<td></td>
</tr>
<tr>
<td><code>Shift+Cmd+]</code></td>
<td>è·³è½¬åˆ°ä¸‹ä¸€ä¸ªç¼–è¾‘çª—å£</td>
<td></td>
<td></td>
</tr>
<tr>
<td><code>Cmd+K Cmd+0</code></td>
<td>æŠ˜å æ‰€æœ‰ä»£ç </td>
<td></td>
<td></td>
</tr>
<tr>
<td><code>Cmd+K Cmd+1</code></td>
<td>æŠ˜å ç¬¬ä¸€å±‚ä»£ç </td>
<td></td>
<td></td>
</tr>
<tr>
<td><code>Cmd+K Cmd+2</code></td>
<td>æŠ˜å ç¬¬äºŒå±‚ä»£ç </td>
<td></td>
<td></td>
</tr>
<tr>
<td><code>Cmd+K Cmd+3</code></td>
<td>æŠ˜å ç¬¬ä¸‰å±‚ä»£ç </td>
<td></td>
<td>å±‚æ•°å—åˆ¶äºä»£ç å±‚çº§</td>
</tr>
<tr>
<td><code>Cmd+K Cmd+[</code></td>
<td>æŠ˜å æ‰€æœ‰ä»£ç </td>
<td></td>
<td></td>
</tr>
<tr>
<td><code>Cmd+K Cmd+]</code></td>
<td>å±•å¼€æ‰€æœ‰ä»£ç </td>
<td></td>
<td></td>
</tr>
<tr>
<td><code>Cmd+K Cmd+C</code></td>
<td>æ·»åŠ å½“å‰è¡Œä»£ç æ³¨é‡Š</td>
<td></td>
<td></td>
</tr>
<tr>
<td><code>Cmd+K Cmd+U</code></td>
<td>å–æ¶ˆå½“å‰è¡Œä»£ç æ³¨é‡Š</td>
<td></td>
<td></td>
</tr>
<tr>
<td><code>Cmd+/</code></td>
<td>å½“å‰è¡Œæ³¨é‡Šåˆ‡æ¢</td>
<td></td>
<td></td>
</tr>
<tr>
<td><code>Alt+Shift+I</code></td>
<td>åœ¨æ‰€é€‰è¡Œçš„è¡Œå°¾æ’å…¥å…‰æ ‡</td>
<td></td>
<td></td>
</tr>
<tr>
<td><code>Shift+Cmd+L</code></td>
<td>é€‰ä¸­æ‰€æœ‰ä¸å½“å‰é€‰ä¸­å†…å®¹ç›¸åŒçš„éƒ¨åˆ†</td>
<td></td>
<td></td>
</tr>
<tr>
<td><code>Alt+Shift+å…‰æ ‡æ‹–åŠ¨</code></td>
<td>é€‰ä¸­ä»£ç å—</td>
<td></td>
<td></td>
</tr>
<tr>
<td><code>Cmd+G</code></td>
<td>æŸ¥æ‰¾ä¸‹ä¸€ä¸ª</td>
<td></td>
<td></td>
</tr>
<tr>
<td><code>Shift+Cmd+G</code></td>
<td>æŸ¥æ‰¾ä¸‹ä¸€ä¸ª</td>
<td></td>
</tr>
</tbody>
</table>
<h2 id="å¿«æ·é”®å®šåˆ¶"><a href="#å¿«æ·é”®å®šåˆ¶" class="headerlink" title="å¿«æ·é”®å®šåˆ¶"></a>å¿«æ·é”®å®šåˆ¶</h2><figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="comment">// å°†æŒ‰é”®ç»‘å®šé…ç½®æ”¾å…¥æ­¤æ–‡ä»¶ä¸­å³å¯è¦†ç›–é»˜è®¤å€¼</span></span><br><span class="line">[</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">&quot;key&quot;</span>: <span class="string">&quot;alt+cmd+up&quot;</span>, <span class="comment">// å‘ä¸Šæ’å…¥å¤šä¸ªå…‰æ ‡</span></span><br><span class="line">    <span class="attr">&quot;command&quot;</span>: <span class="string">&quot;editor.action.insertCursorAbove&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;when&quot;</span>: <span class="string">&quot;editorTextFocus&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">&quot;key&quot;</span>: <span class="string">&quot;alt+cmd+down&quot;</span>, <span class="comment">// å‘ä¸‹æ’å…¥å¤šä¸ªå…‰æ ‡</span></span><br><span class="line">    <span class="attr">&quot;command&quot;</span>: <span class="string">&quot;editor.action.insertCursorBelow&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;when&quot;</span>: <span class="string">&quot;editorTextFocus&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">&quot;key&quot;</span>: <span class="string">&quot;cmd+d&quot;</span>, <span class="comment">// æ·»åŠ ä¸‹ä¸€ä¸ªåŒ¹é…é¡¹</span></span><br><span class="line">    <span class="attr">&quot;command&quot;</span>: <span class="string">&quot;editor.action.addSelectionToNextFindMatch&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;when&quot;</span>: <span class="string">&quot;editorFocus&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">&quot;key&quot;</span>: <span class="string">&quot;shift+cmd+0&quot;</span>, <span class="comment">// é‡ç½®ç¼©æ”¾</span></span><br><span class="line">    <span class="attr">&quot;command&quot;</span>: <span class="string">&quot;workbench.action.zoomReset&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">&quot;key&quot;</span>: <span class="string">&quot;cmd+-&quot;</span>, <span class="comment">// åé€€</span></span><br><span class="line">    <span class="attr">&quot;command&quot;</span>: <span class="string">&quot;workbench.action.navigateBack&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">&quot;key&quot;</span>: <span class="string">&quot;cmd+=&quot;</span>, <span class="comment">// å‰è¿›</span></span><br><span class="line">    <span class="attr">&quot;command&quot;</span>: <span class="string">&quot;workbench.action.navigateForward&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">&quot;key&quot;</span>: <span class="string">&quot;cmd+r&quot;</span>, <span class="comment">// ç¬¦å·è·³è½¬</span></span><br><span class="line">    <span class="attr">&quot;command&quot;</span>: <span class="string">&quot;workbench.action.gotoSymbol&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">&quot;key&quot;</span>: <span class="string">&quot;cmd+space&quot;</span>, <span class="comment">// è§¦å‘å»ºä¹‰æç¤º</span></span><br><span class="line">    <span class="attr">&quot;command&quot;</span>: <span class="string">&quot;editor.action.triggerSuggest&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;when&quot;</span>: <span class="string">&quot;editorHasCompletionItemProvider &amp;&amp; textInputFocus &amp;&amp; !editorReadonly&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">&quot;key&quot;</span>: <span class="string">&quot;shift+cmd+space&quot;</span>, <span class="comment">// è§¦å‘å‚æ•°æç¤º</span></span><br><span class="line">    <span class="attr">&quot;command&quot;</span>: <span class="string">&quot;editor.action.triggerParameterHints&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;when&quot;</span>: <span class="string">&quot;editorHasSignatureHelpProvider &amp;&amp; editorTextFocus&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">&quot;key&quot;</span>: <span class="string">&quot;alt+enter&quot;</span>, <span class="comment">// æ‰“å¼€å³é”®èœå•</span></span><br><span class="line">    <span class="attr">&quot;command&quot;</span>: <span class="string">&quot;editor.action.showContextMenu&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;when&quot;</span>: <span class="string">&quot;textInputFocus&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">&quot;key&quot;</span>: <span class="string">&quot;shift+;&quot;</span>, <span class="comment">// ZenMode æ˜¾ç¤ºå‘½ä»¤æç¤ºæ¡†</span></span><br><span class="line">    <span class="attr">&quot;command&quot;</span>: <span class="string">&quot;vim.showQuickpickCmdLine&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;when&quot;</span>: <span class="string">&quot;inZenMode &amp;&amp; vim.mode != &#x27;Insert&#x27;&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">&quot;key&quot;</span>: <span class="string">&quot;ctrl+j&quot;</span>, <span class="comment">// åˆå¹¶åˆ°ä¸€è¡Œ</span></span><br><span class="line">    <span class="attr">&quot;command&quot;</span>: <span class="string">&quot;editor.action.joinLines&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;when&quot;</span>: <span class="string">&quot;editorTextFocus &amp;&amp; !editorReadonly&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">&quot;key&quot;</span>: <span class="string">&quot;ctrl+t&quot;</span>, <span class="comment">// è°ƒæ¢å­—ç¬¦ä½ç½®</span></span><br><span class="line">    <span class="attr">&quot;command&quot;</span>: <span class="string">&quot;editor.action.transposeLetters&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;when&quot;</span>: <span class="string">&quot;textInputFocus &amp;&amp; !editorReadonly&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">&quot;key&quot;</span>: <span class="string">&quot;shift+cmd+space&quot;</span>, <span class="comment">// è§¦å‘å‚æ•°æç¤ºä¿¡æ¯</span></span><br><span class="line">    <span class="attr">&quot;command&quot;</span>: <span class="string">&quot;editor.action.triggerParameterHints&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;when&quot;</span>: <span class="string">&quot;editorHasSignatureHelpProvider &amp;&amp; editorTextFocus&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">&quot;key&quot;</span>: <span class="string">&quot;ctrl+alt+i&quot;</span>, <span class="comment">// å¯¼å…¥ç±»çš„å‘½åç©ºé—´</span></span><br><span class="line">    <span class="attr">&quot;command&quot;</span>: <span class="string">&quot;namespaceResolver.import&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;when&quot;</span>: <span class="string">&quot;editorTextFocus&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">&quot;key&quot;</span>: <span class="string">&quot;ctrl+alt+e&quot;</span>, <span class="comment">// å±•å¼€ç±»çš„å‘½åç©ºé—´</span></span><br><span class="line">    <span class="attr">&quot;command&quot;</span>: <span class="string">&quot;namespaceResolver.expand&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;when&quot;</span>: <span class="string">&quot;editorTextFocus&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">&quot;key&quot;</span>: <span class="string">&quot;ctrl+alt+s&quot;</span>, <span class="comment">// å‘½åç©ºé—´æ’åº</span></span><br><span class="line">    <span class="attr">&quot;command&quot;</span>: <span class="string">&quot;namespaceResolver.sort&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;when&quot;</span>: <span class="string">&quot;editorTextFocus&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>devtools</category>
      </categories>
      <tags>
        <tag>mac</tag>
        <tag>devtools</tag>
        <tag>vscode</tag>
      </tags>
  </entry>
  <entry>
    <title>Mac VSCode ä»£ç ç‰‡æ®µ</title>
    <url>/2018/12/05/mac-vscode-snippets/</url>
    <content><![CDATA[<p><img src="/images/2019/201905191910.jpg" alt="201905191910.jpg"></p>
<p>ğŸš€æ—©å¹´æœ‰ä½åŒåƒš Sublime ä½¿çš„å·¨æºœæ— æ¯”ï¼Œå„ç§æ–‡ä»¶åˆ‡æ¢ã€å‘½ä»¤æ“ä½œã€æ–‡æœ¬ç¼–è¾‘ç­‰åœ¨å…¶æŒ‡é—´é£èˆï¼Œå¾€æ¥å†²çªï¼Œå¦‚å…¥æ— äººä¹‹å¢ƒã€‚é¡¿æ—¶æš—è‡ªç§°å¥‡ï¼Œè™½è¯ºè¯ºé—®å…¶æ•…ï¼Œé“æ›°ï¼Œæ­¤ä¸è¿‡é…ä»¥æ’ä»¶åŠä»£ç ç‰‡æ®µï¼Œæ‰‹ç†Ÿç½¢äº†ã€‚å§æ§½ï¼ŒåŸæ¥å¦‚æ­¤ï¼Œè™½æš—ä¸‹å†³å¿ƒï¼Œä»–æ—¥ç­–å¾ Mac æ‰¬æŒ‡æœŸé—´ï¼Œå¿…å½“è¿œç”šä»Šæ—¥çŸ£ã€‚è‡ªæ­¤ï¼ŒæŸ“æŒ‡å„ç§æ—¶é«¦ç¼–è¾‘å™¨åŠ IDEï¼Œä¹ä¸æ€èœ€ï¼Œç«Ÿå¿˜äº†å¹²æ­£äº‹äº†ï¼Œä¸å¤šé€¼é€¼äº†ï¼Œå…ˆæ’©ä¸€æ’©ä»£ç ç‰‡æ®µã€‚</p>
<h1 id="è‡ªå®šä¹‰æœ¬åœ°ä»£ç ç‰‡æ®µ"><a href="#è‡ªå®šä¹‰æœ¬åœ°ä»£ç ç‰‡æ®µ" class="headerlink" title="è‡ªå®šä¹‰æœ¬åœ°ä»£ç ç‰‡æ®µ"></a>è‡ªå®šä¹‰æœ¬åœ°ä»£ç ç‰‡æ®µ</h1><p>ç‚¹å‡» VScode èœå•æ ä¸­çš„ <code>Code</code> åœ¨ä¸‹æ‹‰çš„ <strong>é¦–é€‰é¡¹</strong> èœå•ä¸­ç‚¹å‡» <strong>ç”¨æˆ·ä»£ç ç‰‡æ®µ</strong> å¹¶åœ¨è¾“å…¥æ¡†ä¸­è¾“å…¥é€‚åˆçš„è¯­è¨€å¼€å§‹åˆ›å»ºä»£ç ç‰‡æ®µã€‚</p>
<h2 id="ä»£ç ç‰‡æ®µå­—æ®µ"><a href="#ä»£ç ç‰‡æ®µå­—æ®µ" class="headerlink" title="ä»£ç ç‰‡æ®µå­—æ®µ"></a>ä»£ç ç‰‡æ®µå­—æ®µ</h2><ul>
<li>ä»£ç ç‰‡æ®µçš„åç§°ï¼šå°½é‡èµ·çš„æœ‰æ„ä¹‰å³å¯</li>
<li><code>prefix</code>ï¼šè§¦å‘ä»£ç ç‰‡æ®µçš„å‰ç¼€</li>
<li><code>body</code>ï¼šä»£ç ç‰‡æ®µçš„ä¸»ä½“ã€‚<code>$0</code> è¡¨ç¤ºå…‰æ ‡çš„æœ€ç»ˆä½ç½®ï¼›<code>$1~$N</code> è¡¨ç¤ºæ¯æ¬¡æŒ‰ <code>Tab</code> é”®åå…‰æ ‡å®šä½çš„ä½ç½®ï¼›<code>$&#123;N:placeholder&#125;</code> è¡¨ç¤ºå ä½ï¼Œå¤šä¸ªå ä½ç¬¦è¯·ä½¿ç”¨ç›¸åŒçš„æ ‡è¯† IDs</li>
<li><code>description</code>ï¼šä»£ç ç‰‡æ®µçš„æè¿°</li>
</ul>
<h2 id="ä»£ç ç‰‡æ®µå®ä¾‹"><a href="#ä»£ç ç‰‡æ®µå®ä¾‹" class="headerlink" title="ä»£ç ç‰‡æ®µå®ä¾‹"></a>ä»£ç ç‰‡æ®µå®ä¾‹</h2><blockquote>
<p>æœ‰æ—¶å€™å®šä¹‰äº†å¤šä¸ªå…‰æ ‡æ’å…¥ç‚¹ï¼ŒæŒ‰å¿«äº† <code>Tab</code> é”®å¯èƒ½è·³è¿‡äº†æ­£å½“è¾“å…¥çš„ä½ç½®ï¼Œæ­¤æ—¶äº¦å¯æŒ‰ <code>Shift+Tab</code> å›è·³åˆ°ä¸Šä¸€ä¸ªè·³è¿‡çš„ä½ç½®å¤„ï¼Œå¤šæŒ‰å¯å¾€å›é€€ã€‚</p>
</blockquote>
<p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªä»¥ PHP ä¸ºä¾‹çš„ä»£ç ç‰‡æ®µã€‚</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="comment">// ä»£ç ç‰‡æ®µçš„åç§°</span></span><br><span class="line">    <span class="attr">&quot;PHPClass&quot;</span>: &#123;</span><br><span class="line">        <span class="comment">// æŒ‰é”®è§¦å‘çš„å‰ç¼€</span></span><br><span class="line">        <span class="attr">&quot;prefix&quot;</span>: <span class="string">&quot;class&quot;</span>,</span><br><span class="line"></span><br><span class="line">        <span class="comment">// è§¦å‘åå±•å¼€çš„ä»£ç ä¸»ä½“</span></span><br><span class="line">        <span class="attr">&quot;body&quot;</span>: [</span><br><span class="line">            <span class="string">&quot;$&#123;1:namespace $&#123;2:App&#125;&#125;;&quot;</span>,</span><br><span class="line">            <span class="string">&quot;&quot;</span>,</span><br><span class="line">            <span class="string">&quot;class $&#123;3:ClassName&#125; $&#123;4:extends $&#123;5:AnotherClass&#125;&#125; $&#123;6:implements $&#123;7:Interface&#125;&#125;&quot;</span>,</span><br><span class="line">            <span class="string">&quot;&#123;&quot;</span>,</span><br><span class="line">            <span class="string">&quot;\t$0&quot;</span>,</span><br><span class="line">            <span class="string">&quot;&#125;&quot;</span>,</span><br><span class="line">            <span class="string">&quot;&quot;</span></span><br><span class="line">        ],</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ä»£ç ç‰‡æ®µçš„æè¿°</span></span><br><span class="line">        <span class="attr">&quot;description&quot;</span>: <span class="string">&quot;PHP class&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="å†™æ‰©å±•åˆ†äº«ä»£ç ç‰‡æ®µ"><a href="#å†™æ‰©å±•åˆ†äº«ä»£ç ç‰‡æ®µ" class="headerlink" title="å†™æ‰©å±•åˆ†äº«ä»£ç ç‰‡æ®µ"></a>å†™æ‰©å±•åˆ†äº«ä»£ç ç‰‡æ®µ</h1><h2 id="åˆ›å»ºè´¦å·"><a href="#åˆ›å»ºè´¦å·" class="headerlink" title="åˆ›å»ºè´¦å·"></a>åˆ›å»ºè´¦å·</h2><p>åˆ° <a href="https://marketplace.visualstudio.com/">Extensions for the Visual Studio family of products</a> ä¸Šæ³¨å†Œå±äºè‡ªå·±çš„è´¦å·ã€‚</p>
<h2 id="å®‰è£…æ‰©å±•"><a href="#å®‰è£…æ‰©å±•" class="headerlink" title="å®‰è£…æ‰©å±•"></a>å®‰è£…æ‰©å±•</h2><h3 id="å®‰è£…å¼€å‘è¾…åŠ©æ‰©å±•"><a href="#å®‰è£…å¼€å‘è¾…åŠ©æ‰©å±•" class="headerlink" title="å®‰è£…å¼€å‘è¾…åŠ©æ‰©å±•"></a>å®‰è£…å¼€å‘è¾…åŠ©æ‰©å±•</h3><ul>
<li><a href="https://github.com/Microsoft/vscode-generator-code">Yo Code - Extension and Customization Generator</a></li>
<li><a href="https://code.visualstudio.com/docs/extensions/yocode">VSCode Yo Code Documentation</a></li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// å®‰è£… yo</span><br><span class="line">$ npm install -g yo</span><br><span class="line">npm WARN deprecated cross-spawn-async@2.2.5: cross-spawn no longer requires a build toolchain, use it instead</span><br><span class="line">/usr/<span class="built_in">local</span>/bin/yo -&gt; /usr/<span class="built_in">local</span>/lib/node_modules/yo/lib/cli.js</span><br><span class="line">/usr/<span class="built_in">local</span>/bin/yo-complete -&gt; /usr/<span class="built_in">local</span>/lib/node_modules/yo/lib/completion/index.js</span><br><span class="line"></span><br><span class="line">&gt; spawn-sync@1.0.15 postinstall /usr/<span class="built_in">local</span>/lib/node_modules/yo/node_modules/spawn-sync</span><br><span class="line">&gt; node postinstall</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&gt; yo@2.0.5 postinstall /usr/<span class="built_in">local</span>/lib/node_modules/yo</span><br><span class="line">&gt; yodoctor</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Yeoman Doctor</span><br><span class="line">Running sanity checks on your system</span><br><span class="line"></span><br><span class="line">âœ” Global configuration file is valid</span><br><span class="line">âœ” NODE_PATH matches the npm root</span><br><span class="line">âœ” Node.js version</span><br><span class="line">âœ” No .bowerrc file <span class="keyword">in</span> home directory</span><br><span class="line">âœ” No .yo-rc.json file <span class="keyword">in</span> home directory</span><br><span class="line">âœ” npm version</span><br><span class="line">âœ” yo version</span><br><span class="line"></span><br><span class="line">Everything looks all right!</span><br><span class="line">+ yo@2.0.5</span><br><span class="line">added 537 packages from 265 contributors <span class="keyword">in</span> 36.448s</span><br><span class="line"></span><br><span class="line">// å®‰è£… generator-code</span><br><span class="line">$ npm install -g generator-code</span><br><span class="line">+ generator-code@1.1.43</span><br><span class="line">added 381 packages from 284 contributors <span class="keyword">in</span> 61.462s</span><br><span class="line"></span><br><span class="line">// å®‰è£… vsce</span><br><span class="line">$ npm install -g vsce</span><br><span class="line">/usr/<span class="built_in">local</span>/bin/vsce -&gt; /usr/<span class="built_in">local</span>/lib/node_modules/vsce/out/vsce</span><br><span class="line">+ vsce@1.53.2</span><br><span class="line">added 60 packages from 67 contributors <span class="keyword">in</span> 7.519s</span><br></pre></td></tr></table></figure>
<h3 id="è¿è¡Œå¼€å‘æ‰©å±•å‘½ä»¤"><a href="#è¿è¡Œå¼€å‘æ‰©å±•å‘½ä»¤" class="headerlink" title="è¿è¡Œå¼€å‘æ‰©å±•å‘½ä»¤"></a>è¿è¡Œå¼€å‘æ‰©å±•å‘½ä»¤</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ yo code</span><br><span class="line"></span><br><span class="line">     _-----_     â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®</span><br><span class="line">    |       |    â”‚   Welcome to the Visual  â”‚</span><br><span class="line">    |--(o)--|    â”‚   Studio Code Extension  â”‚</span><br><span class="line">   `---------Â´   â”‚        generator!        â”‚</span><br><span class="line">    ( _Â´U`_ )    â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯</span><br><span class="line">    /___A___\   /</span><br><span class="line">     |  ~  |</span><br><span class="line">   __<span class="string">&#x27;.___.&#x27;</span>__</span><br><span class="line"> Â´   `  |Â° Â´ Y `</span><br><span class="line"></span><br><span class="line">? What <span class="built_in">type</span> of extension <span class="keyword">do</span> you want to create? (Use arrow keys)</span><br><span class="line">â¯ New Extension (TypeScript)</span><br><span class="line">  New Extension (JavaScript)</span><br><span class="line">  New Color Theme</span><br><span class="line">  New Language Support</span><br><span class="line">  New Code Snippets</span><br><span class="line">  New Keymap</span><br><span class="line">  New Extension Pack</span><br><span class="line">(Move up and down to reveal more choices)</span><br></pre></td></tr></table></figure>
<h2 id="åˆ›å»ºä»£ç ç‰‡æ®µé¡¹ç›®"><a href="#åˆ›å»ºä»£ç ç‰‡æ®µé¡¹ç›®" class="headerlink" title="åˆ›å»ºä»£ç ç‰‡æ®µé¡¹ç›®"></a>åˆ›å»ºä»£ç ç‰‡æ®µé¡¹ç›®</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ yo code your-project-name</span><br><span class="line"></span><br><span class="line">     _-----_     â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®</span><br><span class="line">    |       |    â”‚   Welcome to the Visual  â”‚</span><br><span class="line">    |--(o)--|    â”‚   Studio Code Extension  â”‚</span><br><span class="line">   `---------Â´   â”‚        generator!        â”‚</span><br><span class="line">    ( _Â´U`_ )    â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯</span><br><span class="line">    /___A___\   /</span><br><span class="line">     |  ~  |</span><br><span class="line">   __<span class="string">&#x27;.___.&#x27;</span>__</span><br><span class="line"> Â´   `  |Â° Â´ Y `</span><br><span class="line"></span><br><span class="line">? What <span class="built_in">type</span> of extension <span class="keyword">do</span> you want to create? New Code Snippets</span><br><span class="line">Folder location that contains Text Mate (.tmSnippet) and Sublime snippets (.sublime-snippet) or press ENTER to start with a new snippet file.</span><br><span class="line">? Folder name <span class="keyword">for</span> import or none <span class="keyword">for</span> new:</span><br><span class="line">? What<span class="string">&#x27;s the name of your extension? your-project-name</span></span><br><span class="line"><span class="string">? What&#x27;</span>s the identifier of your extension? your-project-name</span><br><span class="line">? What<span class="string">&#x27;s the description of your extension? VSCode PHP Snippets</span></span><br><span class="line"><span class="string">Enter the language for which the snippets should appear. The id is an identifier and is single, lower-case name such as &#x27;</span>php<span class="string">&#x27;, &#x27;</span>javascript<span class="string">&#x27;</span></span><br><span class="line"><span class="string">? Language id: php</span></span><br><span class="line"><span class="string">   create your-project-name/.vscode/launch.json</span></span><br><span class="line"><span class="string">   create your-project-name/package.json</span></span><br><span class="line"><span class="string">   create your-project-name/vsc-extension-quickstart.md</span></span><br><span class="line"><span class="string">   create your-project-name/README.md</span></span><br><span class="line"><span class="string">   create your-project-name/CHANGELOG.md</span></span><br><span class="line"><span class="string">   create your-project-name/snippets/snippets.json</span></span><br><span class="line"><span class="string">   create your-project-name/.vscodeignore</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Your extension your-project-name has been created!</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">To start editing with Visual Studio Code, use the following commands:</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">     cd your-project-name</span></span><br><span class="line"><span class="string">     code .</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Open vsc-extension-quickstart.md inside the new extension for further instructions</span></span><br><span class="line"><span class="string">on how to modify, test and publish your extension.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">For more information, also visit http://code.visualstudio.com and follow us @code.</span></span><br></pre></td></tr></table></figure>
<h2 id="é¡¹ç›®å‘å¸ƒ"><a href="#é¡¹ç›®å‘å¸ƒ" class="headerlink" title="é¡¹ç›®å‘å¸ƒ"></a>é¡¹ç›®å‘å¸ƒ</h2><blockquote>
<p><code>package.json</code> æ–‡ä»¶çš„ç¼–å†™å®Œå–„è¯·å‚è§ç›¸å…³æ–‡æ¡£ã€‚</p>
</blockquote>
<p><a href="https://code.visualstudio.com/docs/extensions/publish-extension">Publishing Extensions</a></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// åˆ›å»ºå‘å¸ƒè€…</span><br><span class="line">$ vsce create-publisher your-publisher-name</span><br><span class="line"></span><br><span class="line">// ä»¥å‘å¸ƒè€…èº«ä»½ç™»å½•ï¼Œéœ€è¦åœ¨ Azure DevOps æå‰åˆ›å»ºä»¤ç‰Œ</span><br><span class="line">$ vsce login your-publisher-name</span><br><span class="line">Publisher <span class="string">&#x27;your-publisher-name&#x27;</span> is already known</span><br><span class="line">Do you want to overwrite its PAT? [y/N] y</span><br><span class="line">Personal Access Token <span class="keyword">for</span> publisher <span class="string">&#x27;your-publisher-name&#x27;</span>: ****</span><br><span class="line"></span><br><span class="line">// å‘å¸ƒï¼Œè§†æƒ…å†µå‘å¸ƒ</span><br><span class="line">$ vsce publish major|minor|patch</span><br><span class="line"></span><br><span class="line">// vsce å‘½ä»¤</span><br><span class="line">$ vsce --<span class="built_in">help</span></span><br><span class="line">Usage: vsce [options] [<span class="built_in">command</span>]</span><br><span class="line"></span><br><span class="line">Options:</span><br><span class="line">  -V, --version                        output the version number</span><br><span class="line">  -h, --<span class="built_in">help</span>                           output usage information</span><br><span class="line"></span><br><span class="line">Commands:</span><br><span class="line">  ls [options]                         Lists all the files that will be published</span><br><span class="line">  package [options]                    Packages an extension</span><br><span class="line">  publish [options] [&lt;version&gt;]        Publishes an extension</span><br><span class="line">  unpublish [options] [&lt;extensionid&gt;]  Unpublishes an extension. Example extension id: microsoft.csharp.</span><br><span class="line">  list &lt;publisher&gt;                     Lists all extensions published by the given publisher</span><br><span class="line">  ls-publishers                        List all known publishers</span><br><span class="line">  create-publisher &lt;publisher&gt;         Creates a new publisher</span><br><span class="line">  delete-publisher &lt;publisher&gt;         Deletes a publisher</span><br><span class="line">  login &lt;publisher&gt;                    Add a publisher to the known publishers list</span><br><span class="line">  <span class="built_in">logout</span> &lt;publisher&gt;                   Remove a publisher from the known publishers list</span><br><span class="line">  show [options] &lt;extensionid&gt;         Show extension metadata</span><br><span class="line">  search [options] &lt;text&gt;              search extension gallery</span><br><span class="line">  *</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>devtools</category>
      </categories>
      <tags>
        <tag>mac</tag>
        <tag>devtools</tag>
        <tag>vscode</tag>
      </tags>
  </entry>
  <entry>
    <title>Mac VSCode èµ·æ­¥</title>
    <url>/2018/12/01/mac-vscode-started/</url>
    <content><![CDATA[<p><img src="/images/2019/201905093011.png" alt="201905093011.png"></p>
<p>ğŸ’«ç¼–è¾‘å™¨çš„é›†å¤§æˆè€…ï¼Œå…è´¹ï¼Œé«˜é¢œå€¼ã€‚è½»é‡çº§çš„è·¨å¹³å° <code>Web</code> é›†æˆå¼€å‘ç¯å¢ƒï¼Œæ¯” <code>Sublime</code> å¼€æºï¼Œæ¯” <code>Atom</code> æ›´å¿«ï¼Œæ¯” <code>JetBrains</code> å…¨å®¶æ¡¶æ›´è½»ï¼Œå°±å†²å¾®è½¯çš„è¿™ä¸ªæƒ…æ€€ï¼Œæˆ‘ç‰¹ä¹ˆæœæ–­å…¥å‘ã€‚å½“ç„¶ç†Ÿç»ƒä½¿ç”¨ä¸€æ¬¾ä»£ç ç¼–è¾‘å™¨å¹¶ä¸æ˜¯ä»€ä¹ˆäº†ä¸èµ·çš„æŠ€èƒ½ï¼Œä½†è¯·åˆ«å¿˜äº†ã€å·¥æ¬²å–„å…¶äº‹ï¼Œå¿…å…ˆåˆ©å…¶å™¨ã€ï¼Œå…¶ä¸é—»äººä¹‹èƒ½åœ¨äºå–„å‡äºç‰©ä¹Ÿã€‚é€‰æ‹©é€‚åˆè‡ªå·±çš„ä»£ç ç¼–è¾‘å™¨ä¸€ç›´æ˜¯æœ‰è¿½æ±‚çš„ç å†œçš„ç”Ÿæ´»æ–¹å¼ï¼Œä¸çŸ¥ä½•æ•…ï¼Œæ¯æ¯çœ‹åˆ°é‚£äº›æƒŠè‰³çš„ä¸»é¢˜ã€æ•²å‡»ä¸€ä¸ªå­—ç¬¦æ¨ä¸å¾—æŠŠæ•´ä¸ªä¸–ç•Œç»™ä½ çš„ç¼–è¾‘å™¨äº¦æˆ– IDEï¼Œæˆ‘å°±æ ¼å¤–çš„å–œæ‚¦ï¼Œæœç„¶æ‡‚ç å†œè€…å”¯ç¼–è¾‘å™¨å°”ï¼ˆğŸ˜„ ç¼–ç¨‹è¯­è¨€å½“ç„¶ä¹Ÿä¸ä¾‹å¤–ï¼‰ã€‚å†å°½ä¸€ç•ªæŠ˜è…¾åï¼ŒVSCode é‚£é£éªšçš„æ“ä½œä»¤äººæ¬²ç½¢ä¸èƒ½ï¼Œä¸ºäº†èƒ½ç³»ç»Ÿåœ°å­¦ä¹ ä¸‹è¿™äº›æ“ä½œï¼Œè®°å½•ä¸‹è¿™äº›æ“ä½œæŒ‡ä»¤ï¼Œæˆ‘è§‰å¾—éœ€è¦è®°å½•ç‚¹ä»€ä¹ˆã€‚</p>
<h1 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h1><h2 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h2><p>Code editing. Redefined. Free. Open source. Runs everywhere.</p>
<h2 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><blockquote>
<ul>
<li><a href="https://code.visualstudio.com/">VSCode Website</a></li>
<li><a href="https://github.com/Microsoft/vscode">VSCode GitHub</a></li>
<li><a href="https://code.visualstudio.com/docs/getstarted/introvideos">VSCode Videos</a></li>
<li><a href="https://code.visualstudio.com/docs">VSCode Documentation</a></li>
</ul>
</blockquote>
<p>æ²¡ä»€ä¹ˆå¥½è¯´çš„ï¼Œç›´æ¥ä¸Šå®˜ç½‘ä¸‹è½½å¯¹åº”ç³»ç»Ÿå®‰è£…åŒ…ï¼Œå¼€ç®±å³ç”¨ã€‚</p>
<h2 id="æ’ä»¶"><a href="#æ’ä»¶" class="headerlink" title="æ’ä»¶"></a>æ’ä»¶</h2><p><a href="https://marketplace.visualstudio.com/">Extensions for the Visual Studio family of products</a></p>
<p>æœç„¶è¿˜æ˜¯å¾—æ’ä»¶è€…å¾—å¤©ä¸‹ï¼Œåºå¤§çš„æ’ä»¶è¶³ä»¥è®© VSCode å‚²è§†ç¾¤é›„ã€‚</p>
<h1 id="ç•Œé¢"><a href="#ç•Œé¢" class="headerlink" title="ç•Œé¢"></a>ç•Œé¢</h1><h2 id="å‘½ä»¤é¢æ¿"><a href="#å‘½ä»¤é¢æ¿" class="headerlink" title="å‘½ä»¤é¢æ¿"></a>å‘½ä»¤é¢æ¿</h2><p>æŒ‰ <code>Shift+Cmd+P</code> è¿›å…¥å‘½ä»¤é¢æ¿ï¼Œè°ƒç”¨å„ç§å‘½ä»¤ã€‚</p>
<p><img src="https://inotes.oss-cn-beijing.aliyuncs.com/vscode/vscode-command-panel.jpg" alt="vscode-command-panel.jpg"></p>
<p>å¿«æ·å…¥å£ - <code>Cmd+P</code></p>
<blockquote>
<p>ä»¥ä¸‹å¿«æ·é”®ä¸ºé»˜è®¤å¿«æ·é”®</p>
</blockquote>
<ul>
<li>ç›´æ¥è¾“å…¥æ–‡ä»¶åï¼Œå¿«é€Ÿæ‰“å¼€æ–‡ä»¶</li>
<li>æ˜¾ç¤ºæœ€è¿‘æ‰“å¼€è¿‡çš„æ–‡ä»¶</li>
<li>é‡å¤æŒ‰ä¸‹ååœ¨æœ€è¿‘æ‰“å¼€è¿‡çš„æ–‡ä»¶ä¹‹é—´åˆ‡æ¢</li>
<li>é”®å…¥ <code>?</code> æŸ¥çœ‹ç›¸å…³å¸®åŠ©ï¼Œåˆ—å‡ºå½“å‰å¯æ‰§è¡Œçš„åŠ¨ä½œ</li>
<li>é”®å…¥ <code>!</code> æ˜¾ç¤º <code>Errors</code> æˆ– <code>Warnings</code>ï¼Œä¹Ÿå¯ä»¥ <code>Ctrl+Shift+M</code></li>
<li>é”®å…¥ <code>:</code> è·³è½¬åˆ°è¡Œæ•°ï¼Œä¹Ÿå¯ä»¥ <code>Ctrl+G</code> ç›´æ¥è¿›å…¥</li>
<li>é”®å…¥ <code>@</code> è·³è½¬åˆ° <code>symbol</code>ï¼ˆæœç´¢å˜é‡æˆ–è€…å‡½æ•°ï¼‰ï¼Œä¹Ÿå¯ä»¥ <code>Ctrl+Shift+O</code> ç›´æ¥è¿›å…¥</li>
<li>é”®å…¥ <code>@:</code> æ ¹æ®åˆ†ç±»è·³è½¬ <code>symbol</code>ï¼ˆæŸ¥æ‰¾å±æ€§æˆ–å‡½æ•°ï¼‰ï¼Œä¹Ÿå¯ä»¥ <code>Ctrl+Shift+O</code> åè¾“å…¥ <code>:</code> è¿›å…¥</li>
<li>é”®å…¥ <code>#</code> æ ¹æ®åå­—æŸ¥æ‰¾ <code>symbol</code>ï¼Œä¹Ÿå¯ä»¥ <code>Ctrl+T</code></li>
</ul>
<h2 id="ç•Œé¢æ¦‚è§ˆ"><a href="#ç•Œé¢æ¦‚è§ˆ" class="headerlink" title="ç•Œé¢æ¦‚è§ˆ"></a>ç•Œé¢æ¦‚è§ˆ</h2><p>ç‚¹å‡»ã€å­¦ä¹ ã€ä¸‹é¢çš„ã€ç•Œé¢æ¦‚è§ˆã€ã€‚</p>
<p><img src="https://inotes.oss-cn-beijing.aliyuncs.com/vscode/vscode-interface-overview.jpg" alt="vscode-interface-overview.jpg"></p>
<h2 id="äº¤äº’å¼æ¼”ç»ƒåœº"><a href="#äº¤äº’å¼æ¼”ç»ƒåœº" class="headerlink" title="äº¤äº’å¼æ¼”ç»ƒåœº"></a>äº¤äº’å¼æ¼”ç»ƒåœº</h2><p>ç‚¹å‡»ã€å­¦ä¹ ã€ä¸‹é¢çš„ã€äº¤äº’å¼æ¼”ç»ƒåœºã€ã€‚</p>
<p><img src="https://inotes.oss-cn-beijing.aliyuncs.com/vscode/vscode-playground.jpg" alt="vscode-playground.jpg"></p>
<h1 id="å‘½ä»¤è¡Œ"><a href="#å‘½ä»¤è¡Œ" class="headerlink" title="å‘½ä»¤è¡Œ"></a>å‘½ä»¤è¡Œ</h1><h2 id="å‘½ä»¤è¡Œå‘½ä»¤å®‰è£…"><a href="#å‘½ä»¤è¡Œå‘½ä»¤å®‰è£…" class="headerlink" title="å‘½ä»¤è¡Œå‘½ä»¤å®‰è£…"></a>å‘½ä»¤è¡Œå‘½ä»¤å®‰è£…</h2><p>å®‰è£… VSCode Shell å‘½ä»¤ï¼ŒæŒ‰ <code>Shift+Cmd+P</code> æœç´¢ <code>shell command install</code> å›è½¦å³å¯ã€‚</p>
<h2 id="å‘½ä»¤è¡Œå¸®åŠ©"><a href="#å‘½ä»¤è¡Œå¸®åŠ©" class="headerlink" title="å‘½ä»¤è¡Œå¸®åŠ©"></a>å‘½ä»¤è¡Œå¸®åŠ©</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">code --<span class="built_in">help</span></span><br><span class="line">Visual Studio Code 1.30.0</span><br><span class="line"></span><br><span class="line">Usage: code [options] [paths...]</span><br><span class="line"></span><br><span class="line">To <span class="built_in">read</span> from stdin, append <span class="string">&#x27;-&#x27;</span> (e.g. <span class="string">&#x27;ps aux | grep code | code -&#x27;</span>)</span><br><span class="line"></span><br><span class="line">Options:</span><br><span class="line">  -d, --diff &lt;file&gt; &lt;file&gt;           Compare two files with each other.</span><br><span class="line">  -a, --add &lt;dir&gt;                    Add folder(s) to the last active window.</span><br><span class="line">  -g, --goto &lt;file:line[:character]&gt; Open a file at the path on the specified line and character position.</span><br><span class="line">  -n, --new-window                   Force to open a new window.</span><br><span class="line">  -r, --reuse-window                 Force to open a file or folder <span class="keyword">in</span> an already opened window.</span><br><span class="line">  -w, --<span class="built_in">wait</span>                         Wait <span class="keyword">for</span> the files to be closed before returning.</span><br><span class="line">  --locale &lt;locale&gt;                  The locale to use (e.g. en-US or zh-TW).</span><br><span class="line">  --user-data-dir &lt;dir&gt;              Specifies the directory that user data is kept <span class="keyword">in</span>. Can be used to open multiple distinct</span><br><span class="line">                                     instances of Code.</span><br><span class="line">  -v, --version                      Print version.</span><br><span class="line">  -h, --<span class="built_in">help</span>                         Print usage.</span><br><span class="line"></span><br><span class="line">Extensions Management:</span><br><span class="line">  --extensions-dir &lt;dir&gt;                                         Set the root path <span class="keyword">for</span> extensions.</span><br><span class="line">  --list-extensions                                              List the installed extensions.</span><br><span class="line">  --show-versions                                                Show versions of installed extensions, when using</span><br><span class="line">                                                                 --list-extension.</span><br><span class="line">  --uninstall-extension (&lt;extension-id&gt; | &lt;extension-vsix-path&gt;) Uninstalls an extension.</span><br><span class="line">  --install-extension (&lt;extension-id&gt; | &lt;extension-vsix-path&gt;)   Installs or updates the extension. Use `--force` argument to</span><br><span class="line">                                                                 avoid prompts.</span><br><span class="line">  --enable-proposed-api (&lt;extension-id&gt;)                         Enables proposed API features <span class="keyword">for</span> extensions. Can receive</span><br><span class="line">                                                                 one or more extension IDs to <span class="built_in">enable</span> individually.</span><br><span class="line"></span><br><span class="line">Troubleshooting:</span><br><span class="line">  --verbose                          Print verbose output (implies --<span class="built_in">wait</span>).</span><br><span class="line">  --<span class="built_in">log</span> &lt;level&gt;                      Log level to use. Default is <span class="string">&#x27;info&#x27;</span>. Allowed values are <span class="string">&#x27;critical&#x27;</span>, <span class="string">&#x27;error&#x27;</span>, <span class="string">&#x27;warn&#x27;</span>,</span><br><span class="line">                                     <span class="string">&#x27;info&#x27;</span>, <span class="string">&#x27;debug&#x27;</span>, <span class="string">&#x27;trace&#x27;</span>, <span class="string">&#x27;off&#x27;</span>.</span><br><span class="line">  -s, --status                       Print process usage and diagnostics information.</span><br><span class="line">  -p, --performance                  Start with the <span class="string">&#x27;Developer: Startup Performance&#x27;</span> <span class="built_in">command</span> enabled.</span><br><span class="line">  --prof-startup                     Run CPU profiler during startup</span><br><span class="line">  --disable-extensions               Disable all installed extensions.</span><br><span class="line">  --disable-extension &lt;extension-id&gt; Disable an extension.</span><br><span class="line">  --inspect-extensions               Allow debugging and profiling of extensions. Check the developer tools <span class="keyword">for</span> the</span><br><span class="line">                                     connection URI.</span><br><span class="line">  --inspect-brk-extensions           Allow debugging and profiling of extensions with the extension host being paused after</span><br><span class="line">                                     start. Check the developer tools <span class="keyword">for</span> the connection URI.</span><br><span class="line">  --disable-gpu                      Disable GPU hardware acceleration.</span><br><span class="line">  --upload-logs                      Uploads logs from current session to a secure endpoint.</span><br><span class="line">  --max-memory                       Max memory size <span class="keyword">for</span> a window (<span class="keyword">in</span> Mbytes).</span><br></pre></td></tr></table></figure>
<h2 id="å¸¸ç”¨å‘½ä»¤"><a href="#å¸¸ç”¨å‘½ä»¤" class="headerlink" title="å¸¸ç”¨å‘½ä»¤"></a>å¸¸ç”¨å‘½ä»¤</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// åœ¨ VSCode ä¸­æ‰“å¼€å½“å‰ç›®å½•</span><br><span class="line">code .</span><br><span class="line"></span><br><span class="line">// åœ¨æœ€è¿‘ä½¿ç”¨è¿‡çš„ VSCode çª—å£æ‰“å¼€å½“å‰ç›®å½•</span><br><span class="line">code -r .</span><br><span class="line"></span><br><span class="line">// åˆ›å»ºæ–°çš„çª—å£</span><br><span class="line">code -n</span><br><span class="line">code --new-window</span><br><span class="line"></span><br><span class="line">// æ›´æ”¹è¯­è¨€</span><br><span class="line">code --locale=es</span><br><span class="line"></span><br><span class="line">// è·³è½¬åˆ°æŒ‡å®šæ–‡ä»¶çš„æŒ‡å®šè¡Œåˆ—ï¼Œç›¸å½“äºè·³è½¬åˆ°æŒ‡å®šæ–‡ä»¶çš„æŒ‡å®šè¡Œçš„ä»å·¦åˆ°å³ç¬¬å‡ ä¸ªå­—ç¬¦ä¸Š</span><br><span class="line">code -g /path/to/&lt;file&gt;:10:10</span><br><span class="line">code --goto /path/to/&lt;file&gt;:10:20</span><br><span class="line"></span><br><span class="line">// æ‰“å¼€ diff ç¼–è¾‘å™¨æ¯”è¾ƒæ–‡ä»¶</span><br><span class="line">code -d &lt;file1&gt; &lt;file2&gt;</span><br><span class="line">code --diff &lt;file1&gt; &lt;file2&gt;</span><br><span class="line"></span><br><span class="line">// æŸ¥çœ‹å¸®åŠ©é€‰é¡¹</span><br><span class="line">code --<span class="built_in">help</span></span><br><span class="line"></span><br><span class="line">// ç¦ç”¨æ‰€æœ‰æ‰©å±•</span><br><span class="line">code --disable-extensions</span><br></pre></td></tr></table></figure>
<h2 id="å­—ä½“"><a href="#å­—ä½“" class="headerlink" title="å­—ä½“"></a>å­—ä½“</h2><blockquote>
<p>ä»¥ä¸‹å­—ä½“å®‰è£…å…¶ä¸€å°±å¥½ï¼Œå®‰è£…å®Œæˆé‡å¯ VSCode å³å¯ã€‚</p>
</blockquote>
<h3 id="Cascadia-Code-å­—ä½“"><a href="#Cascadia-Code-å­—ä½“" class="headerlink" title="Cascadia Code å­—ä½“"></a>Cascadia Code å­—ä½“</h3><ul>
<li><a href="https://github.com/microsoft/cascadia-code">Github</a></li>
<li><a href="https://github.com/microsoft/cascadia-code/releases">åˆ° Releases æ ‡ç­¾é¡µä¸‹è½½ Cascadia Code å‹ç¼©åŒ…è§£å‹å¹¶å®‰è£…</a></li>
</ul>
<p>æŒ‰ <code>Cmd+,</code> æœç´¢å¹¶é…ç½® <code>editor.fontFamily</code> å’Œ <code>editor.fontLigatures</code> å³å¯ï¼š</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="string">&quot;editor.fontFamily&quot;</span>: <span class="string">&quot;Cascadia Code&quot;</span>,</span><br><span class="line"><span class="string">&quot;editor.fontLigatures&quot;</span>: <span class="literal">true</span>,</span><br></pre></td></tr></table></figure>
<h3 id="Fire-Code-å­—ä½“"><a href="#Fire-Code-å­—ä½“" class="headerlink" title="Fire Code å­—ä½“"></a>Fire Code å­—ä½“</h3><ul>
<li><a href="https://github.com/tonsky/FiraCode">GitHub</a></li>
<li><a href="https://github.com/tonsky/FiraCode/wiki">FiraCode Wiki</a></li>
<li><a href="https://github.com/tonsky/FiraCode/wiki/VS-Code-Instructions">VS Code Instructions</a></li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">brew tap homebrew/cask-fonts</span><br><span class="line">brew cask install font-fira-code</span><br></pre></td></tr></table></figure>
<p>æŒ‰ <code>Cmd+,</code> æœç´¢å¹¶é…ç½® <code>editor.fontFamily</code> å’Œ <code>editor.fontLigatures</code> å³å¯ï¼š</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="string">&quot;editor.fontFamily&quot;</span>: <span class="string">&quot;Fira Code&quot;</span>,</span><br><span class="line"><span class="string">&quot;editor.fontLigatures&quot;</span>: <span class="literal">true</span>,</span><br></pre></td></tr></table></figure>
<h2 id="é—®é¢˜"><a href="#é—®é¢˜" class="headerlink" title="é—®é¢˜"></a>é—®é¢˜</h2><ul>
<li><code>Could not create temporary directory: æƒé™è¢«æ‹’ç»</code>ï¼š</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo chown <span class="variable">$USER</span> ~/Library/Caches/com.microsoft.VSCode.ShipIt/</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>devtools</category>
      </categories>
      <tags>
        <tag>mac</tag>
        <tag>devtools</tag>
        <tag>vscode</tag>
      </tags>
  </entry>
  <entry>
    <title>MongoDB èµ·æ­¥</title>
    <url>/2019/11/24/mongodb-get-started/</url>
    <content><![CDATA[<p><img src="/images/2019/201911241722.jpg" alt="201911241722.jpg"></p>
<p><a href="https://www.mongodb.com/cn">MongoDB</a> æ˜¯ä¸€ç§é¢å‘æ–‡æ¡£çš„æ•°æ®åº“ç®¡ç†ç³»ç»Ÿï¼Œç”¨ C++ ç­‰è¯­è¨€æ’°å†™è€Œæˆï¼Œä»¥æ­¤æ¥è§£å†³åº”ç”¨ç¨‹åºå¼€å‘ç¤¾åŒºä¸­çš„å¤§é‡ç°å®é—®é¢˜ã€‚2007 å¹´ 10 æœˆï¼ŒMongoDB ç”± <a href="https://coolshell.cn/tag/10gen">10gen</a> å›¢é˜Ÿæ‰€å‘å±•ã€‚2009 å¹´ 2 æœˆé¦–åº¦æ¨å‡ºã€‚</p>
<span id="more"></span>
<h1 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h1><h2 id="Linux"><a href="#Linux" class="headerlink" title="Linux"></a>Linux</h2><h2 id="macOS"><a href="#macOS" class="headerlink" title="macOS"></a>macOS</h2><blockquote>
<p>æ­¤å¤„ä»¥ <a href="https://docs.mongodb.com/manual/administration/install-community/">MongoDB ç¤¾åŒºç‰ˆ</a> ä¸ºä¾‹ã€‚</p>
</blockquote>
<ul>
<li><a href="https://github.com/mongodb/homebrew-brew">The Official MongoDB Software Homebrew Tap</a></li>
<li><a href="https://docs.mongodb.com/manual/tutorial/install-mongodb-on-os-x/">Install MongoDB Community Edition on macOS</a></li>
<li><a href="https://docs.mongodb.com/manual/tutorial/install-mongodb-enterprise-on-os-x/">Install MongoDB Enterprise on macOS</a></li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// æ‰“å¼€ç»ˆç«¯æ·»åŠ è‡ªå®šä¹‰ tap</span><br><span class="line">brew tap mongodb/brew</span><br><span class="line"></span><br><span class="line">// å®‰è£…æœ€è¿‘æœ€æ–°ç‰ˆæœ¬</span><br><span class="line">brew install mongodb-community</span><br></pre></td></tr></table></figure>
<p>æ–‡ä»¶è·¯å¾„ï¼š</p>
<ul>
<li>é…ç½®æ–‡ä»¶ï¼š<code>/usr/local/etc/mongod.conf</code></li>
<li>æ—¥å¿—æ–‡ä»¶ï¼š<code>/usr/local/var/log/mongodb</code></li>
<li>æ•°æ®æ–‡ä»¶ï¼š<code>/usr/local/var/log/mongodb</code></li>
</ul>
<p>æœåŠ¡æ“ä½œï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// å¼€å¯æœåŠ¡</span><br><span class="line">brew services start mongodb-community</span><br><span class="line"></span><br><span class="line">// å…³é—­æœåŠ¡</span><br><span class="line">brew services stop mongodb-community</span><br></pre></td></tr></table></figure>
<h1 id="å¸¸ç”¨æ“ä½œ"><a href="#å¸¸ç”¨æ“ä½œ" class="headerlink" title="å¸¸ç”¨æ“ä½œ"></a>å¸¸ç”¨æ“ä½œ</h1><h2 id="å¸®åŠ©å‘½ä»¤"><a href="#å¸®åŠ©å‘½ä»¤" class="headerlink" title="å¸®åŠ©å‘½ä»¤"></a>å¸®åŠ©å‘½ä»¤</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">help</span></span><br><span class="line">    db.help()                    <span class="built_in">help</span> on db methods</span><br><span class="line">    db.mycoll.help()             <span class="built_in">help</span> on collection methods</span><br><span class="line">    sh.help()                    sharding helpers</span><br><span class="line">    rs.help()                    replica <span class="built_in">set</span> helpers</span><br><span class="line">    <span class="built_in">help</span> admin                   administrative <span class="built_in">help</span></span><br><span class="line">    <span class="built_in">help</span> connect                 connecting to a db <span class="built_in">help</span></span><br><span class="line">    <span class="built_in">help</span> keys                    key shortcuts</span><br><span class="line">    <span class="built_in">help</span> misc                    misc things to know</span><br><span class="line">    <span class="built_in">help</span> mr                      mapreduce</span><br><span class="line"></span><br><span class="line">    show dbs                     show database names</span><br><span class="line">    show collections             show collections <span class="keyword">in</span> current database</span><br><span class="line">    show users                   show users <span class="keyword">in</span> current database</span><br><span class="line">    show profile                 show most recent system.profile entries with time &gt;= 1ms</span><br><span class="line">    show logs                    show the accessible logger names</span><br><span class="line">    show <span class="built_in">log</span> [name]              prints out the last segment of <span class="built_in">log</span> <span class="keyword">in</span> memory, <span class="string">&#x27;global&#x27;</span> is default</span><br><span class="line">    use &lt;db_name&gt;                <span class="built_in">set</span> current database</span><br><span class="line">    db.foo.find()                list objects <span class="keyword">in</span> collection foo</span><br><span class="line">    db.foo.find( &#123; a : 1 &#125; )     list objects <span class="keyword">in</span> foo <span class="built_in">where</span> a == 1</span><br><span class="line">    it                           result of the last line evaluated; use to further iterate</span><br><span class="line">    DBQuery.shellBatchSize = x   <span class="built_in">set</span> default number of items to display on shell</span><br><span class="line">    <span class="built_in">exit</span>                         quit the mongo shell</span><br></pre></td></tr></table></figure>
<h2 id="æŸ¥è¯¢æ‰€æœ‰æ•°æ®åº“"><a href="#æŸ¥è¯¢æ‰€æœ‰æ•°æ®åº“" class="headerlink" title="æŸ¥è¯¢æ‰€æœ‰æ•°æ®åº“"></a>æŸ¥è¯¢æ‰€æœ‰æ•°æ®åº“</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">show dbs</span><br><span class="line">admin   0.000GB</span><br><span class="line">config  0.000GB</span><br><span class="line"><span class="built_in">local</span>   0.000GB</span><br></pre></td></tr></table></figure>
<h2 id="åˆ‡æ¢-amp-åˆ›å»ºæ•°æ®åº“"><a href="#åˆ‡æ¢-amp-åˆ›å»ºæ•°æ®åº“" class="headerlink" title="åˆ‡æ¢ &amp; åˆ›å»ºæ•°æ®åº“"></a>åˆ‡æ¢ &amp; åˆ›å»ºæ•°æ®åº“</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">use <span class="built_in">test</span></span><br><span class="line">switched to db <span class="built_in">test</span></span><br></pre></td></tr></table></figure>
<h2 id="æŸ¥çœ‹å½“å‰ä½¿ç”¨çš„æ•°æ®åº“"><a href="#æŸ¥çœ‹å½“å‰ä½¿ç”¨çš„æ•°æ®åº“" class="headerlink" title="æŸ¥çœ‹å½“å‰ä½¿ç”¨çš„æ•°æ®åº“"></a>æŸ¥çœ‹å½“å‰ä½¿ç”¨çš„æ•°æ®åº“</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">db.getName()</span><br><span class="line"><span class="built_in">test</span></span><br><span class="line">æˆ–</span><br><span class="line">db</span><br><span class="line"><span class="built_in">test</span></span><br></pre></td></tr></table></figure>
<h2 id="æ˜¾ç¤ºå½“å‰-DB-çŠ¶æ€"><a href="#æ˜¾ç¤ºå½“å‰-DB-çŠ¶æ€" class="headerlink" title="æ˜¾ç¤ºå½“å‰ DB çŠ¶æ€"></a>æ˜¾ç¤ºå½“å‰ DB çŠ¶æ€</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">db.<span class="function"><span class="title">stats</span></span>()</span><br><span class="line">&#123;</span><br><span class="line">    <span class="string">&quot;db&quot;</span> : <span class="string">&quot;test&quot;</span>,</span><br><span class="line">    <span class="string">&quot;collections&quot;</span> : 0,</span><br><span class="line">    <span class="string">&quot;views&quot;</span> : 0,</span><br><span class="line">    <span class="string">&quot;objects&quot;</span> : 0,</span><br><span class="line">    <span class="string">&quot;avgObjSize&quot;</span> : 0,</span><br><span class="line">    <span class="string">&quot;dataSize&quot;</span> : 0,</span><br><span class="line">    <span class="string">&quot;storageSize&quot;</span> : 0,</span><br><span class="line">    <span class="string">&quot;numExtents&quot;</span> : 0,</span><br><span class="line">    <span class="string">&quot;indexes&quot;</span> : 0,</span><br><span class="line">    <span class="string">&quot;indexSize&quot;</span> : 0,</span><br><span class="line">    <span class="string">&quot;scaleFactor&quot;</span> : 1,</span><br><span class="line">    <span class="string">&quot;fileSize&quot;</span> : 0,</span><br><span class="line">    <span class="string">&quot;fsUsedSize&quot;</span> : 0,</span><br><span class="line">    <span class="string">&quot;fsTotalSize&quot;</span> : 0,</span><br><span class="line">    <span class="string">&quot;ok&quot;</span> : 1</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="ä¿®å¤å½“å‰æ•°æ®åº“"><a href="#ä¿®å¤å½“å‰æ•°æ®åº“" class="headerlink" title="ä¿®å¤å½“å‰æ•°æ®åº“"></a>ä¿®å¤å½“å‰æ•°æ®åº“</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">```</span><br><span class="line"></span><br><span class="line"><span class="comment">## æŸ¥çœ‹å½“å‰ DB ç‰ˆæœ¬</span></span><br><span class="line"></span><br><span class="line">```bash</span><br><span class="line">db.version()</span><br><span class="line">4.2.1</span><br></pre></td></tr></table></figure>
<h2 id="æŸ¥çœ‹å½“å‰-DB-çš„é“¾æ¥æœºå™¨åœ°å€"><a href="#æŸ¥çœ‹å½“å‰-DB-çš„é“¾æ¥æœºå™¨åœ°å€" class="headerlink" title="æŸ¥çœ‹å½“å‰ DB çš„é“¾æ¥æœºå™¨åœ°å€"></a>æŸ¥çœ‹å½“å‰ DB çš„é“¾æ¥æœºå™¨åœ°å€</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">db.getMongo()</span><br><span class="line">connection to 127.0.0.1:27017</span><br></pre></td></tr></table></figure>
<h2 id="åˆ é™¤å½“å‰ä½¿ç”¨çš„æ•°æ®åº“"><a href="#åˆ é™¤å½“å‰ä½¿ç”¨çš„æ•°æ®åº“" class="headerlink" title="åˆ é™¤å½“å‰ä½¿ç”¨çš„æ•°æ®åº“"></a>åˆ é™¤å½“å‰ä½¿ç”¨çš„æ•°æ®åº“</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">db.<span class="function"><span class="title">dropDatabase</span></span>()</span><br><span class="line">&#123; <span class="string">&quot;ok&quot;</span> : 1 &#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>mongodb</category>
      </categories>
      <tags>
        <tag>mongodb</tag>
      </tags>
  </entry>
  <entry>
    <title>MySQL æ•°æ®ç±»å‹</title>
    <url>/2019/11/17/mysql-data-types/</url>
    <content><![CDATA[<p><img src="/images/2019/201911171605.jpg" alt="201911171605.jpg"></p>
<p>ğŸ‘‹ ä½¿ç”¨ MySQL è¿™ä¹ˆé•¿æ—¶é—´äº†ï¼Œç»å¸¸ä½¿ç”¨çš„æƒ…å†µæ—¶ï¼Œé™¤äº†è‡ªå¢ä¸»é”®å’Œæ—¥æœŸæ—¶é—´ä¹‹å¤– ï¼Œèƒ½ Varchar çš„åŸºæœ¬ä¸Šéƒ½ç»™ Varchar äº†ã€‚å›¢é˜Ÿå†…éƒ¨è¿˜å‡ºç°è¿‡ VARCHAR(2)ã€VARCHAT(4)ã€â€¦ã€VARCHAT(2^N) çš„æƒ…å†µï¼Œç°åœ¨çœ‹æ¥ç¡®å®æœ‰ç‚¹æç¬‘ã€‚</p>
<span id="more"></span>
<h1 id="æ•°æ®ç±»å‹"><a href="#æ•°æ®ç±»å‹" class="headerlink" title="æ•°æ®ç±»å‹"></a>æ•°æ®ç±»å‹</h1><ul>
<li>æ•°å€¼ç±»å‹<ul>
<li>æ•´æ•°ï¼š<code>tinyint</code>ã€<code>smallint</code>ã€<code>mediumint</code>ã€<code>int</code>ã€<code>bigint</code></li>
<li>å°æ•°ï¼š<code>float</code>ã€<code>double</code>ã€<code>real</code>ã€<code>decimal</code></li>
</ul>
</li>
<li>æ—¥æœŸå’Œæ—¶é—´ç±»å‹ï¼š<code>date</code>ã€<code>time</code>ã€<code>datetime</code>ã€<code>timestamp</code>ã€<code>year</code></li>
<li>å­—ç¬¦ä¸²ç±»å‹<ul>
<li>å­—ç¬¦ä¸²ï¼š<code>char</code>ã€<code>varchat</code></li>
<li>å¤§æ–‡æœ¬ï¼š<code>tinytext</code>ã€<code>text</code>ã€<code>mediumtext</code>ã€<code>longtext</code></li>
<li>å…¶ä»–ï¼š<code>enum</code>ã€<code>set</code></li>
</ul>
</li>
<li>äºŒè¿›åˆ¶ç±»å‹ï¼š<code>tinyblob</code>ã€<code>blob</code>ã€<code>mediumblob</code>ã€<code>longblob</code></li>
<li>ç©ºé—´æ•°æ®ç±»å‹ï¼š<code>geometry</code>ã€<code>geometrycollection</code>ã€<code>point</code>ã€<code>linestring</code></li>
<li>JSON æ•°æ®ç±»å‹ï¼š</li>
</ul>
<h1 id="å„ä¸ªç±»å‹è¯¦æƒ…"><a href="#å„ä¸ªç±»å‹è¯¦æƒ…" class="headerlink" title="å„ä¸ªç±»å‹è¯¦æƒ…"></a>å„ä¸ªç±»å‹è¯¦æƒ…</h1><p><a href="https://dev.mysql.com/doc/refman/8.0/en/storage-requirements.html#data-types-storage-reqs-innodb">Data Type Storage Requirements</a></p>
<h2 id="æ•´å‹"><a href="#æ•´å‹" class="headerlink" title="æ•´å‹"></a>æ•´å‹</h2><table>
<thead>
<tr>
<th>ç±»å‹</th>
<th>å­˜å‚¨ç©ºé—´(Bytes)</th>
<th>æœ‰ç¬¦å·æœ€å°å€¼ä¸æœ€å¤§å€¼</th>
<th>æ— ç¬¦å·æœ€å°å€¼ä¸æœ€å¤§å€¼</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>tinyint</code></td>
<td><code>1</code></td>
<td><code>-128~127</code> æˆ– <code>-2^7~2^7-1</code></td>
<td><code>0~255</code> æˆ– <code>0~2^8-1</code></td>
</tr>
<tr>
<td><code>smallint</code></td>
<td><code>2</code></td>
<td><code>-32768~32767</code> æˆ– <code>-2^15~2^15-1</code></td>
<td><code>0~65535</code> æˆ– <code>0~2^16-1</code></td>
</tr>
<tr>
<td><code>mediumint</code></td>
<td><code>3</code></td>
<td><code>-8388608~8388607</code> æˆ– <code>-2^23~2^23-1</code></td>
<td><code>0~16777215</code> æˆ– <code>0~2^24-1</code></td>
</tr>
<tr>
<td><code>int</code></td>
<td><code>4</code></td>
<td><code>-2147483648~2147483647</code> æˆ– <code>-2^31~^31-1</code></td>
<td><code>0~4294967295</code> æˆ– <code>0~2^32-1</code></td>
</tr>
<tr>
<td><code>bigint</code></td>
<td><code>8</code></td>
<td><code>-9223372036854775808~9223372036854775807</code> æˆ– <code>-2^63~2^63-1</code></td>
<td><code>0~1.8446744e+19</code> æˆ– <code>0~2^64-1</code></td>
</tr>
</tbody>
</table>
<h2 id="æµ®ç‚¹å‹"><a href="#æµ®ç‚¹å‹" class="headerlink" title="æµ®ç‚¹å‹"></a>æµ®ç‚¹å‹</h2><table>
<thead>
<tr>
<th>ç±»å‹</th>
<th>å­˜å‚¨ç©ºé—´(Bytes)</th>
<th>æœ‰ç¬¦å·æœ€å°å€¼ä¸æœ€å¤§å€¼</th>
<th>æ— ç¬¦å·æœ€å°å€¼ä¸æœ€å¤§å€¼</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>float(M, D)</code></td>
<td><code>4</code></td>
<td><code>-3.402823466E+38~-1.175494351E-38</code></td>
<td><code>1.175494351E-38~3.402823466E+38</code></td>
</tr>
<tr>
<td><code>double(M, D)</code></td>
<td><code>8</code></td>
<td><code>-1.7976931348623157E+308~-2.2250738585072014E-308</code></td>
<td><code>0</code> å’Œ <code>2.2250738585072014E-308~1.7976931348623157E+308</code></td>
</tr>
</tbody>
</table>
<h2 id="å®šç‚¹å‹"><a href="#å®šç‚¹å‹" class="headerlink" title="å®šç‚¹å‹"></a>å®šç‚¹å‹</h2><p><a href="https://dev.mysql.com/doc/refman/8.0/en/precision-math-decimal-characteristics.html">DECIMAL èŒƒå›´</a></p>
<p>è¿™é‡Œæˆ‘å¤åˆ¶ä¸€ä¸‹å®˜æ–¹æ–‡æ¡£çš„è§£é‡Šï¼š</p>
<blockquote>
<p>The declaration syntax for a DECIMAL column is DECIMAL(M,D). The ranges of values for the arguments are as follows:</p>
<ul>
<li>M is the maximum number of digits (the precision). It has a range of 1 to 65.</li>
<li>D is the number of digits to the right of the decimal point (the scale). It has a range of 0 to 30 and must be no larger than M.</li>
</ul>
<p>If D is omitted, the default is 0. If M is omitted, the default is 10.</p>
</blockquote>
<ul>
<li>é«˜ç²¾åº¦çš„æ•°æ®ç±»å‹ï¼Œå¸¸ç”¨æ¥å­˜å‚¨äº¤æ˜“ç›¸å…³çš„æ•°æ®</li>
<li><code>decimal(M, D)</code> è§£é‡Šï¼š<code>M</code> ä»£è¡¨æ€»ç²¾åº¦ï¼ˆå°æ•°ç‚¹å‰åæ•°å­—æ€»ä¸ªæ•°ï¼‰ï¼Œ<code>D</code> ä»£è¡¨åˆ»åº¦ï¼ˆå°æ•°ç‚¹åçš„ä½æ•°ï¼‰ã€‚æ¯”å¦‚ï¼š<code>decimal(5, 2)</code> è¡¨ç¤ºå­˜å‚¨èŒƒå›´ä¸º <code>-999.99~999.99</code></li>
<li><code>decimal(M, D)</code> èŒƒå›´ï¼š<code>1&lt;= M &lt;= 65</code>ã€<code>0 &lt;= D &lt;= 30</code></li>
<li>å¦‚æœçœç•¥ <code>D</code>ï¼Œé»˜è®¤å€¼æ˜¯ <code>0</code>ã€‚å¦‚æœçœç•¥ <code>M</code>ï¼Œé»˜è®¤å€¼æ˜¯ <code>10</code></li>
<li>å­˜å‚¨ç©ºé—´å˜é•¿ï¼ˆ<code>M+2</code> bytesï¼‰</li>
</ul>
<h2 id="æ—¥æœŸä¸æ—¶é—´å‹"><a href="#æ—¥æœŸä¸æ—¶é—´å‹" class="headerlink" title="æ—¥æœŸä¸æ—¶é—´å‹"></a>æ—¥æœŸä¸æ—¶é—´å‹</h2><table>
<thead>
<tr>
<th>ç±»å‹</th>
<th>å­˜å‚¨ç©ºé—´(Bytes)</th>
<th>æ ¼å¼</th>
<th>èŒƒå›´</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>year</code></td>
<td><code>1</code></td>
<td><code>YYYY</code></td>
<td><code>1901~2155</code></td>
</tr>
<tr>
<td><code>date</code></td>
<td><code>3</code></td>
<td><code>YYYY-MM-DD</code></td>
<td><code>1000-01-01~9999-12-31</code></td>
</tr>
<tr>
<td><code>time</code></td>
<td><code>3</code></td>
<td><code>hh:mm:ss</code></td>
<td><code>-838:59:59~838:59:59</code></td>
</tr>
<tr>
<td><code>datetime</code></td>
<td><code>8</code></td>
<td><code>yyyy-mm-dd hh:mm:ss</code></td>
<td><code>1000-01-01 00:00:00~9999-12-31 23:59:59&#39;</code></td>
</tr>
<tr>
<td><code>timestamp</code></td>
<td><code>4</code></td>
<td><code>YYYYMMDDhhmmss</code></td>
<td>UTC: <code>1970-01-01 00:00:01~2038-01-19 03:14:07</code></td>
</tr>
</tbody>
</table>
<p>åŒ…å«ä¸¤ä½æ•°å¹´ä»½å€¼çš„æ—¥æœŸæ˜¯æ¨¡ç³Šçš„ï¼Œå› ä¸ºä¸–çºªæ˜¯æœªçŸ¥çš„ã€‚MySQL ä½¿ç”¨è¿™äº›è§„åˆ™è§£é‡Šä¸¤ä½æ•°çš„å¹´å€¼ï¼š</p>
<ul>
<li><code>00~69</code> èŒƒå›´å†…çš„å¹´ä»½å€¼è¢«è½¬æ¢ä¸º <code>2000~2069</code></li>
<li><code>70~99</code> èŒƒå›´å†…çš„å¹´ä»½å€¼è¢«è½¬æ¢ä¸º <code>1970~1999</code></li>
</ul>
<h2 id="å­—ç¬¦ä¸²å‹"><a href="#å­—ç¬¦ä¸²å‹" class="headerlink" title="å­—ç¬¦ä¸²å‹"></a>å­—ç¬¦ä¸²å‹</h2><table>
<thead>
<tr>
<th>ç±»å‹</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>char(M)</code></td>
<td>å›ºå®šé•¿åº¦çš„å­—ç¬¦ä¸²ï¼ˆå¯ä»¥åŒ…å«å­—æ¯ï¼Œæ•°å­—å’Œç‰¹æ®Šå­—ç¬¦ï¼‰ã€‚ <code>M</code> å‚æ•°æŒ‡å®šä»¥ <strong>å­—ç¬¦</strong> ä¸ºå•ä½çš„åˆ—é•¿åº¦ï¼ˆèŒƒå›´ï¼š<code>0~255</code>ï¼‰ã€‚é»˜è®¤å€¼ä¸º <code>1</code></td>
</tr>
<tr>
<td><code>varchat(M)</code></td>
<td>é•¿åº¦å¯å˜çš„å­—ç¬¦ä¸²ï¼ˆå¯ä»¥åŒ…å«å­—æ¯ï¼Œæ•°å­—å’Œç‰¹æ®Šå­—ç¬¦ï¼‰ã€‚ <code>M</code> å‚æ•°æŒ‡å®šä»¥ <strong>å­—ç¬¦</strong> ä¸ºå•ä½çš„æœ€å¤§åˆ—é•¿åº¦ï¼ˆèŒƒå›´ï¼š<code>0~65525</code>ï¼‰</td>
</tr>
<tr>
<td><code>binary(M)</code></td>
<td>ç­‰äº <code>char(M)</code>ï¼Œä½†å­˜å‚¨äºŒè¿›åˆ¶ <strong>å­—èŠ‚</strong> å­—ç¬¦ä¸²ã€‚ <code>M</code> å‚æ•°æŒ‡å®šä»¥ <strong>å­—èŠ‚</strong> ä¸ºå•ä½çš„åˆ—é•¿åº¦ã€‚ é»˜è®¤ä¸º <code>1</code></td>
</tr>
<tr>
<td><code>varbinary</code></td>
<td>ç­‰äº <code>varchat(M)</code>ï¼Œä½†å­˜å‚¨äºŒè¿›åˆ¶ <strong>å­—èŠ‚</strong> å­—ç¬¦ä¸²ã€‚ <code>M</code> å‚æ•°æŒ‡å®šæœ€å¤§åˆ—é•¿åº¦ã€‚</td>
</tr>
<tr>
<td><code>tinyblob</code></td>
<td>ç”¨æˆ· <code>BLOB</code>ï¼ˆäºŒè¿›åˆ¶å¤§å¯¹è±¡ï¼‰ã€‚æœ€å¤§é•¿åº¦ <code>255</code> ä¸ª <strong>å­—èŠ‚</strong></td>
</tr>
<tr>
<td><code>tinytext</code></td>
<td>åŒ…å«æœ€å¤§é•¿åº¦ä¸º <code>255</code>ï¼ˆ255Bï¼‰ä¸ª <strong>å­—ç¬¦</strong> çš„å­—ç¬¦ä¸²</td>
</tr>
<tr>
<td><code>blob(M)</code></td>
<td>å¯¹äº <code>BLOB</code>ï¼ˆäºŒè¿›åˆ¶å¤§å¯¹è±¡ï¼‰ã€‚æœ€å¤šå¯å®¹çº³ <code>65535</code> ä¸ª <strong>å­—èŠ‚</strong> çš„æ•°æ®</td>
</tr>
<tr>
<td><code>text(M)</code></td>
<td>å®¹çº³æœ€å¤§é•¿åº¦ä¸º <code>65535</code>ï¼ˆ64KBï¼‰ä¸ª <strong>å­—ç¬¦</strong> çš„å­—ç¬¦ä¸²</td>
</tr>
<tr>
<td><code>mediumblob</code></td>
<td>å¯¹äº <code>BLOB</code>ï¼ˆäºŒè¿›åˆ¶å¤§å¯¹è±¡ï¼‰ã€‚æœ€å¤šå®¹çº³ <code>16777215</code> ä¸ª <strong>å­—èŠ‚</strong> çš„æ•°æ®</td>
</tr>
<tr>
<td><code>mediumtext</code></td>
<td>å®¹çº³æœ€å¤§é•¿åº¦ä¸º <code>16777215</code>ï¼ˆ16MBï¼‰ä¸ª <strong>å­—ç¬¦</strong> çš„å­—ç¬¦ä¸²</td>
</tr>
<tr>
<td><code>longblob</code></td>
<td>å¯¹äº <code>BLOB</code>ï¼ˆäºŒè¿›åˆ¶å¤§å¯¹è±¡ï¼‰ã€‚æœ€å¤šå¯å®¹çº³ <code>4294967295</code> ä¸ª <strong>å­—èŠ‚</strong> çš„æ•°æ®</td>
</tr>
<tr>
<td><code>longtext</code></td>
<td>åŒ…å«æœ€å¤§é•¿åº¦ä¸º <code>4294967295</code>ï¼ˆ4GBï¼‰ä¸ª <strong>å­—ç¬¦</strong> çš„å­—ç¬¦ä¸²</td>
</tr>
<tr>
<td><code>enum(&#39;v1&#39;, &#39;v2&#39;, ...)</code></td>
<td>ä»å¯èƒ½å€¼åˆ—è¡¨ä¸­é€‰æ‹©çš„åªèƒ½æœ‰ä¸€ä¸ªå€¼çš„å­—ç¬¦ä¸²å¯¹è±¡ã€‚ä½ å¯ä»¥åœ¨ <code>ENUM</code> åˆ—è¡¨ä¸­æœ€å¤šåˆ—å‡º <code>65535</code> ä¸ªå€¼ã€‚å¦‚æœæ’å…¥çš„å€¼ä¸åœ¨åˆ—è¡¨ä¸­ï¼Œåˆ™å°†æ’å…¥ç©ºç™½å€¼ã€‚å€¼æŒ‰è¾“å…¥é¡ºåºæ’åº</td>
</tr>
<tr>
<td><code>set(v1, v2, v3, ...)</code></td>
<td>ä»å¯èƒ½å€¼åˆ—è¡¨ä¸­é€‰æ‹©çš„å¯ä»¥å…·æœ‰ 0 ä¸ªæˆ–å¤šä¸ªå€¼çš„å­—ç¬¦ä¸²å¯¹è±¡ã€‚ä½ å¯ä»¥åœ¨ SET åˆ—è¡¨ä¸­æœ€å¤šåˆ—å‡º <code>64</code> ä¸ªå€¼</td>
</tr>
</tbody>
</table>
<p>å…³äº <code>char(M)</code>ã€<code>varchar(M)</code> å’Œ <code>text</code> çš„é—®é¢˜ï¼š</p>
<ul>
<li><code>char(M)</code> å’Œ <code>varchar(M)</code> ä¸­ <code>M</code> ä»£è¡¨ <strong>å­—ç¬¦ä¸ªæ•°</strong>ï¼Œå¹¶ä¸æ˜¯å­—èŠ‚ä¸ªæ•°ã€‚å½“ä½¿ç”¨ UTF-8 æ—¶æ„å‘³ç€å¯ä»¥æ’å…¥ <code>M</code> ä¸ªå­—ç¬¦ï¼Œä½†å®é™…ä¼šå ç”¨ <code>M*3</code> ä¸ªå­—èŠ‚</li>
<li><code>char(M)</code> ä¸ç®¡å®é™…å€¼éƒ½ä¼šå ç”¨ <code>M</code> ä¸ªå­—ç¬¦çš„ç©ºé—´ï¼Œé¡µ <code>varchar(M)</code> åªä¼šå ç”¨å®é™…å­—ç¬¦åº”è¯¥å ç”¨çš„ç©ºé—´ <code>+1</code>ï¼Œå¹¶ä¸”å®é™…ç©ºé—´ä¸º <code>+1 &lt;= M</code></li>
<li>è¶…è¿‡ <code>char(M)</code> å’Œ <code>varchar(M)</code> çš„ <code>M</code> è®¾ç½®åï¼Œå­—ç¬¦ä¸²ä¼šè¢«æˆªæ–­</li>
<li><code>char</code> çš„ä¸Šé™ä¸º <code>255</code> å­—ç¬¦ï¼Œ<code>varchar</code> å’Œ <code>text</code> çš„ä¸Šé™ <code>65535</code> å­—ç¬¦</li>
<li><code>char</code> åœ¨å­˜å‚¨çš„æ—¶å€™ä¼šæˆªæ–­å°¾éƒ¨çš„ç©ºæ ¼ï¼Œ<code>varchar</code> å’Œ <code>text</code> ä¸ä¼š</li>
<li><code>varchar</code> ä¼šä½¿ç”¨ <code>1~3</code> ä¸ªå­—èŠ‚æ¥å­˜å‚¨é•¿åº¦ï¼Œè€Œ <code>text</code> ä¸ä¼š</li>
</ul>
<table>
<thead>
<tr>
<th>å€¼</th>
<th>char(4)</th>
<th>å­˜å‚¨éœ€è¦</th>
<th>varchat(4)</th>
<th>å­˜å‚¨éœ€è¦</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>&#39;&#39;</code></td>
<td><code>&#39;    &#39;</code></td>
<td>4 bytes</td>
<td><code>&#39;&#39;</code></td>
<td>1 bytes</td>
</tr>
<tr>
<td><code>&#39;ab&#39;</code></td>
<td><code>&#39;ab  &#39;</code></td>
<td>4 bytes</td>
<td><code>&#39;ab&#39;</code></td>
<td>3 bytes</td>
</tr>
<tr>
<td><code>&#39;abcd&#39;</code></td>
<td><code>&#39;abcd&#39;</code></td>
<td>4 bytes</td>
<td><code>&#39;abcd&#39;</code></td>
<td>5 bytes</td>
</tr>
<tr>
<td><code>&#39;abcdefgh&#39;</code></td>
<td><code>&#39;abcd&#39;</code></td>
<td>4 bytes</td>
<td><code>&#39;abcd&#39;</code></td>
<td>5 bytes</td>
</tr>
</tbody>
</table>
<p>å¦‚ä¸Šæ‰€è¿°ï¼š</p>
<ul>
<li><code>char</code> å­˜å®šé•¿ï¼Œé€Ÿåº¦å¿«ï¼Œå­˜åœ¨ç©ºé—´æµªè´¹çš„å¯èƒ½ï¼Œä¼šå¤„ç†å°¾éƒ¨ç©ºæ ¼ï¼Œä¸Šé™ <code>255</code></li>
<li><code>varchar</code> å­˜å˜é•¿ï¼Œé€Ÿåº¦æ…¢ï¼Œä¸å­˜åœ¨ç©ºé—´æµªè´¹ï¼Œä¸å¤„ç†å°¾éƒ¨ç©ºæ ¼ï¼Œä¸Šé™ <code>65535</code>ï¼Œä½†æ˜¯æœ‰å­˜å‚¨é•¿åº¦å®é™… <code>65532</code> æœ€å¤§å¯ç”¨</li>
<li><code>text</code>ï¼Œå­˜å˜é•¿å¤§æ•°æ®ï¼Œé€Ÿåº¦æ…¢ï¼Œä¸å­˜åœ¨ç©ºé—´æµªè´¹ï¼Œä¸å¤„ç†å°¾éƒ¨ç©ºæ ¼ï¼Œä¸Šé™ <code>65535</code>ï¼Œä¼šç”¨é¢å¤–ç©ºé—´å­˜æ”¾æ•°æ®é•¿åº¦ï¼Œå› æ­¤å¯ä»¥å…¨éƒ¨ä½¿ç”¨ <code>65535</code></li>
</ul>
]]></content>
      <categories>
        <category>mysql</category>
      </categories>
      <tags>
        <tag>mysql</tag>
      </tags>
  </entry>
  <entry>
    <title>MySQL æ—¥æœŸæ—¶é—´å‡½æ•°</title>
    <url>/2018/01/20/mysql-datetime-functions/</url>
    <content><![CDATA[<p><code>MySQL</code> æ—¥æœŸå’Œæ—¶é—´å‡½æ•°</p>
<span id="more"></span>
<h2 id="å¸¸ç”¨æ—¥æœŸæ—¶é—´å‡½æ•°"><a href="#å¸¸ç”¨æ—¥æœŸæ—¶é—´å‡½æ•°" class="headerlink" title="å¸¸ç”¨æ—¥æœŸæ—¶é—´å‡½æ•°"></a>å¸¸ç”¨æ—¥æœŸæ—¶é—´å‡½æ•°</h2><table>
<thead>
<tr>
<th>åç§°</th>
<th>æè¿°</th>
<th>å¤‡æ³¨</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>ADDDATE()</code></td>
<td>æ·»åŠ æ—¥æœŸ</td>
<td></td>
</tr>
<tr>
<td><code>ADDTIME()</code></td>
<td>æ·»åŠ æ—¶é—´</td>
<td></td>
</tr>
<tr>
<td><code>CONVERT_TZ()</code></td>
<td>è½¬æ¢ä¸åŒæ—¶åŒº</td>
<td></td>
</tr>
<tr>
<td><code>CURDATE()</code></td>
<td>è¿”å›å½“å‰æ—¥æœŸ</td>
<td></td>
</tr>
<tr>
<td><code>CURRENT_DATE()</code> å’Œ <code>CURRENT_DATE</code></td>
<td>ç­‰åŒäº <code>CURDATE()</code></td>
<td></td>
</tr>
<tr>
<td><code>CURRENT_TIME()</code> å’Œ <code>CURRENT_TIME</code></td>
<td>ç­‰åŒäº <code>CURTIME()</code></td>
<td></td>
</tr>
<tr>
<td><code>CURRENT_TIMESTAMP()</code> å’Œ <code>CURRENT_TIMESTAMP</code></td>
<td>ç­‰åŒäº <code>NOW()</code></td>
<td></td>
</tr>
<tr>
<td><code>CURTIME()</code></td>
<td>è¿”å›å½“å‰æ—¶é—´</td>
<td></td>
</tr>
<tr>
<td><code>DATE_ADD()</code></td>
<td>æ·»åŠ ä¸¤ä¸ªæ—¥æœŸ</td>
<td></td>
</tr>
<tr>
<td><code>DATE_FORMAT()</code></td>
<td>æŒ‰æŒ‡å®šæ–¹å¼æ ¼å¼åŒ–æ—¥æœŸ</td>
<td></td>
</tr>
<tr>
<td><code>DATE_SUB()</code></td>
<td>æ±‚è§£ä¸¤ä¸ªæ—¥æœŸçš„é—´éš”</td>
<td></td>
</tr>
<tr>
<td><code>DATE()</code></td>
<td>æå–æ—¥æœŸæˆ–æ—¥æœŸæ—¶é—´è¡¨è¾¾å¼ä¸­çš„æ—¥æœŸéƒ¨åˆ†</td>
<td></td>
</tr>
<tr>
<td><code>DATEDIFF()</code></td>
<td>æ±‚è§£ä¸¤ä¸ªæ—¥æœŸçš„é—´éš”</td>
<td></td>
</tr>
<tr>
<td><code>DAY()</code></td>
<td>ç­‰åŒäº <code>DAYOFMONTH()</code></td>
<td></td>
</tr>
<tr>
<td><code>DAYNAME()</code></td>
<td>è¿”å›æ˜ŸæœŸä¸­æŸå¤©çš„åç§°</td>
<td></td>
</tr>
<tr>
<td><code>DAYOFMONTH()</code></td>
<td>è¿”å›ä¸€æœˆä¸­æŸå¤©çš„åºå·(1-31)</td>
<td></td>
</tr>
<tr>
<td><code>DAYOFWEEK()</code></td>
<td>è¿”å›å‚æ•°æ‰€æŒ‡å®šçš„ä¸€å‘¨ä¸­æŸå¤©çš„ç´¢å¼•å€¼</td>
<td></td>
</tr>
<tr>
<td><code>DAYOFYEAR()</code></td>
<td>è¿”å›ä¸€å¹´ä¸­æŸå¤©çš„åºå·(1-366)</td>
<td></td>
</tr>
<tr>
<td><code>EXTRACT</code></td>
<td>æå–æ—¥æœŸä¸­çš„ç›¸åº”éƒ¨åˆ†</td>
<td></td>
</tr>
<tr>
<td><code>FROM_DAYS()</code></td>
<td>å°†ä¸€ä¸ªå¤©æ•°åºå·è½¬å˜ä¸ºæ—¥æœŸå€¼</td>
<td></td>
</tr>
<tr>
<td><code>FROM_UNIXTIME()</code></td>
<td>å°†æ—¥æœŸæ ¼å¼åŒ–ä¸º UNIX çš„æ—¶é—´æˆ³</td>
<td></td>
</tr>
<tr>
<td><code>HOUR()</code></td>
<td>æå–æ—¶é—´</td>
<td></td>
</tr>
<tr>
<td><code>LAST_DAY</code></td>
<td>æ ¹æ®å‚æ•°, è¿”å›æœˆä¸­æœ€åä¸€å¤©</td>
<td></td>
</tr>
<tr>
<td><code>LOCALTIME()</code> å’Œ <code>LOCALTIME</code></td>
<td>ç­‰åŒäº <code>NOW()</code></td>
<td></td>
</tr>
<tr>
<td><code>LOCALTIMESTAMP</code> å’Œ <code>LOCALTIMESTAMP()</code></td>
<td>ç­‰åŒäº <code>NOW()</code></td>
<td></td>
</tr>
<tr>
<td><code>MAKEDATE()</code></td>
<td>åŸºäºç»™å®šå‚æ•°å¹´ä»½å’Œæ‰€åœ¨å¹´ä¸­çš„å¤©æ•°åºå·, è¿”å›ä¸€ä¸ªæ—¥æœŸ</td>
<td></td>
</tr>
<tr>
<td><code>MAKETIME</code></td>
<td>æ ¹æ®ç»™å®šå°æ—¶, åˆ†, ç§’è¿”å›ä¸€ä¸ªæ ¼å¼æ—¶é—´</td>
<td></td>
</tr>
<tr>
<td><code>MICROSECOND()</code></td>
<td>è¿”å›å‚æ•°æ‰€å¯¹åº”çš„æ¯«ç§’æ•°</td>
<td></td>
</tr>
<tr>
<td><code>MINUTE()</code></td>
<td>è¿”å›å‚æ•°å¯¹åº”çš„åˆ†é’Ÿæ•°</td>
<td></td>
</tr>
<tr>
<td><code>MONTH()</code></td>
<td>è¿”å›ä¼ å…¥æ—¥æœŸæ‰€å¯¹åº”çš„æœˆåºæ•°</td>
<td></td>
</tr>
<tr>
<td><code>MONTHNAME()</code></td>
<td>è¿”å›æœˆçš„åç§°</td>
<td></td>
</tr>
<tr>
<td><code>NOW()</code></td>
<td>è¿”å›å½“å‰æ—¥æœŸä¸æ—¶é—´</td>
<td></td>
</tr>
<tr>
<td><code>PERIOD_ADD()</code></td>
<td>ä¸ºå¹´-æœˆç»„åˆæ—¥æœŸæ·»åŠ ä¸€ä¸ªæ—¶æ®µ</td>
<td></td>
</tr>
<tr>
<td><code>PERIOD_DIFF()</code></td>
<td>è¿”å›ä¸¤ä¸ªæ—¶æ®µä¹‹é—´çš„æœˆä»½å·®å€¼</td>
<td></td>
</tr>
<tr>
<td><code>QUARTER()</code></td>
<td>è¿”å›æ—¥æœŸå‚æ•°æ‰€å¯¹åº”çš„å­£åº¦åºå·</td>
<td></td>
</tr>
<tr>
<td><code>SEC_TO_TIME()</code></td>
<td>å°†æè¿°è½¬å˜æˆ <code>HH:MM:SS</code> çš„æ ¼å¼</td>
<td></td>
</tr>
<tr>
<td><code>SECOND()</code></td>
<td>è¿”å›ç§’åºå·(0-59</td>
<td></td>
</tr>
<tr>
<td><code>STR_TO_DATE()</code></td>
<td>å°†å­—ç¬¦ä¸²è½¬å˜ä¸ºæ—¥æœŸ</td>
<td></td>
</tr>
<tr>
<td><code>SUBDATE()</code></td>
<td>ä»ç»™å®šçš„æ—¥æœŸä¸­å‡å»ä¸€ä¸ªæ—¶é—´åŒºé—´, ç›¸å½“äº <code>DATE_SUB()</code></td>
<td></td>
</tr>
<tr>
<td><code>SUBTIME()</code></td>
<td>è®¡ç®—æ—¶é—´å·®å€¼</td>
<td></td>
</tr>
<tr>
<td><code>SYSDATE()</code></td>
<td>è¿”å›å‡½æ•°æ‰§è¡Œæ—¶çš„æ—¶é—´</td>
<td></td>
</tr>
<tr>
<td><code>TIME_FORMAT()</code></td>
<td>æå–å‚æ•°ä¸­çš„æ—¶é—´éƒ¨åˆ†</td>
<td></td>
</tr>
<tr>
<td><code>TIME_TO_SEC()</code></td>
<td>å°†å‚æ•°è½¬åŒ–ä¸ºç§’æ•°</td>
<td></td>
</tr>
<tr>
<td><code>TIME()</code></td>
<td>æå–ä¼ å…¥è¡¨è¾¾å¼çš„æ—¶é—´éƒ¨åˆ†</td>
<td></td>
</tr>
<tr>
<td><code>TIMEDIFF()</code></td>
<td>è®¡ç®—æ—¶é—´å·®å€¼</td>
<td></td>
</tr>
<tr>
<td><code>TIMESTAMP()</code></td>
<td>å•ä¸ªå‚æ•°æ—¶, å‡½æ•°è¿”å›æ—¥æœŸæˆ–æ—¥æœŸæ—¶é—´è¡¨è¾¾å¼; æœ‰ 2 ä¸ªå‚æ•°æ—¶, å°†å‚æ•°æ±‚å’Œ</td>
<td></td>
</tr>
<tr>
<td><code>TIMESTAMPADD()</code></td>
<td>ä¸ºæ—¥æœŸæ—¶é—´è¡¨è¾¾å¼æ·»åŠ ä¸€ä¸ªé—´éš” <code>INTERVAL</code></td>
<td></td>
</tr>
<tr>
<td><code>TIMESTAMPDIFF()</code></td>
<td>ä»æ—¥æœŸæ—¶é—´è¡¨è¾¾å¼ä¸­å‡å»ä¸€ä¸ªé—´éš” <code>INTERVAL</code></td>
<td></td>
</tr>
<tr>
<td><code>TO_DAYS()</code></td>
<td>è¿”å›è½¬æ¢æˆå¤©æ•°çš„æ—¥æœŸå‚æ•°</td>
<td></td>
</tr>
<tr>
<td><code>UNIX_TIMESTAMP()</code></td>
<td>è¿”å›ä¸€ä¸ª UNIX æ—¶é—´æˆ³</td>
<td></td>
</tr>
<tr>
<td><code>UTC_DATE()</code></td>
<td>è¿”å›å½“å‰çš„ UTC æ—¥æœŸ</td>
<td></td>
</tr>
<tr>
<td><code>UTC_TIME()</code></td>
<td>è¿”å›å½“å‰çš„ UTC æ—¶é—´</td>
<td></td>
</tr>
<tr>
<td><code>UTC_TIMESTAMP()</code></td>
<td>è¿”å›å½“å‰çš„ UTC æ—¶é—´ä¸æ—¥æœŸ</td>
<td></td>
</tr>
<tr>
<td><code>WEEK()</code></td>
<td>è¿”å›å‘¨åºå·</td>
<td></td>
</tr>
<tr>
<td><code>WEEKDAY()</code></td>
<td>è¿”å›æŸå¤©åœ¨æ˜ŸæœŸä¸­çš„ç´¢å¼•å€¼</td>
<td></td>
</tr>
<tr>
<td><code>WEEKOFYEAR()</code></td>
<td>è¿”å›æ—¥æœŸæ‰€å¯¹åº”çš„æ˜ŸæœŸåœ¨ä¸€å¹´å½“ä¸­çš„åºå·(1-53)</td>
<td></td>
</tr>
<tr>
<td><code>YEAR()</code></td>
<td>è¿”å›å¹´ä»½</td>
<td></td>
</tr>
<tr>
<td><code>YEARWEEK()</code></td>
<td>è¿”å›å¹´ä»½åŠæ˜ŸæœŸåºå·</td>
</tr>
</tbody>
</table>
<h2 id="æ—¥æœŸæ—¶é—´å‡½æ•°ç”¨æ³•"><a href="#æ—¥æœŸæ—¶é—´å‡½æ•°ç”¨æ³•" class="headerlink" title="æ—¥æœŸæ—¶é—´å‡½æ•°ç”¨æ³•"></a>æ—¥æœŸæ—¶é—´å‡½æ•°ç”¨æ³•</h2><h3 id="DATE-ADD-å‡½æ•°"><a href="#DATE-ADD-å‡½æ•°" class="headerlink" title="DATE_ADD() å‡½æ•°"></a><code>DATE_ADD()</code> å‡½æ•°</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> DATE_ADD(<span class="string">&#x27;2017-11-11&#x27;</span>, <span class="type">INTERVAL</span> <span class="number">31</span> <span class="keyword">DAY</span>);</span><br><span class="line"><span class="keyword">SELECT</span> ADDDATE(<span class="string">&#x27;2017-11-11&#x27;</span>, <span class="type">INTERVAL</span> <span class="number">31</span> <span class="keyword">DAY</span>);</span><br><span class="line"><span class="keyword">SELECT</span> ADDDATE(<span class="string">&#x27;2017-11-11&#x27;</span>, <span class="number">31</span>);</span><br></pre></td></tr></table></figure>
<h3 id="ADDTIME-å‡½æ•°"><a href="#ADDTIME-å‡½æ•°" class="headerlink" title="ADDTIME() å‡½æ•°"></a><code>ADDTIME()</code> å‡½æ•°</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> ADDTIME(<span class="string">&#x27;2017-12-31 23:59:59.999999&#x27;</span>, <span class="string">&#x27;0 0:0:0.000001&#x27;</span>);</span><br></pre></td></tr></table></figure>
<h3 id="CONVERT-TZ-å‡½æ•°"><a href="#CONVERT-TZ-å‡½æ•°" class="headerlink" title="CONVERT_TZ() å‡½æ•°"></a><code>CONVERT_TZ()</code> å‡½æ•°</h3><blockquote>
<ul>
<li><a href="http://stackoverflow.com/questions/18216198/unable-to-load-timezones">Unable to load timezones?</a></li>
<li><a href="http://dev.mysql.com/doc/refman/5.7/en/time-zone-support.html">MySQL Server Time Zone Support</a></li>
</ul>
</blockquote>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// å¯¼å…¥æ—¶åŒºæ•°æ®</span><br><span class="line">$ mysql_tzinfo_to_sql /usr/share/zoneinfo | mysql -uroot -p -S /usr/<span class="built_in">local</span>/var/run/mysql/mysql.sock --force mysql</span><br></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="operator">/</span><span class="operator">/</span> è®¾ç½®å…¨å±€æ—¶åŒº</span><br><span class="line"><span class="keyword">SET</span> <span class="keyword">GLOBAL</span> time_zone <span class="operator">=</span> <span class="string">&#x27;Asia/Shanghai&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="operator">/</span><span class="operator">/</span> æŸ¥çœ‹ç³»ç»Ÿæ—¶åŒº</span><br><span class="line"><span class="keyword">SELECT</span> @<span class="variable">@global</span>.time_zone, @<span class="variable">@session</span>.time_zone;</span><br><span class="line"></span><br><span class="line"><span class="operator">/</span><span class="operator">/</span> æ—¶åŒºç›¸å…³çš„è¡¨</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> mysql.time_zone;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> mysql.time_zone_transition_type;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> mysql.time_zone_transition;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> mysql.time_zone_name;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> mysql.time_zone_leap_second;</span><br></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> CONVERT_TZ(NOW(), <span class="string">&#x27;Asia/Shanghai&#x27;</span>, <span class="string">&#x27;GMT&#x27;</span>);</span><br><span class="line"><span class="keyword">SELECT</span> CONVERT_TZ(NOW(), <span class="string">&#x27;+08:00&#x27;</span>, <span class="string">&#x27;+00:00&#x27;</span>);</span><br></pre></td></tr></table></figure>
<h3 id="CURRENT-DATE-CURRENT-DATE-å‡½æ•°"><a href="#CURRENT-DATE-CURRENT-DATE-å‡½æ•°" class="headerlink" title="CURRENT_DATE(), CURRENT_DATE å‡½æ•°"></a><code>CURRENT_DATE()</code>, <code>CURRENT_DATE</code> å‡½æ•°</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="built_in">CURRENT_DATE</span>();</span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">CURRENT_DATE</span>() <span class="operator">+</span> <span class="number">0</span>;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">CURRENT_DATE</span>;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">CURRENT_DATE</span> <span class="operator">+</span> <span class="number">0</span>;</span><br></pre></td></tr></table></figure>
<h3 id="CURRENT-TIME-CURRENT-TIME-å‡½æ•°"><a href="#CURRENT-TIME-CURRENT-TIME-å‡½æ•°" class="headerlink" title="CURRENT_TIME(), CURRENT_TIME å‡½æ•°"></a><code>CURRENT_TIME()</code>, <code>CURRENT_TIME</code> å‡½æ•°</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="built_in">CURRENT_TIME</span>();</span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">CURRENT_TIME</span>() <span class="operator">+</span> <span class="number">0</span>;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">CURRENT_TIME</span>;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">CURRENT_TIME</span> <span class="operator">+</span> <span class="number">0</span>;</span><br></pre></td></tr></table></figure>
<h3 id="NOW-CURRENT-TIMESTAMP-CURRENT-TIMESTAMP-LOCALTIMESTAMP-LOCALTIMESTAMP-LOCALTIME-LOCALTIME-å‡½æ•°"><a href="#NOW-CURRENT-TIMESTAMP-CURRENT-TIMESTAMP-LOCALTIMESTAMP-LOCALTIMESTAMP-LOCALTIME-LOCALTIME-å‡½æ•°" class="headerlink" title="NOW(), CURRENT_TIMESTAMP(), CURRENT_TIMESTAMP, LOCALTIMESTAMP(), LOCALTIMESTAMP, LOCALTIME(), LOCALTIME å‡½æ•°"></a><code>NOW()</code>, <code>CURRENT_TIMESTAMP()</code>, <code>CURRENT_TIMESTAMP</code>, <code>LOCALTIMESTAMP()</code>, <code>LOCALTIMESTAMP</code>, <code>LOCALTIME()</code>, <code>LOCALTIME</code> å‡½æ•°</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> NOW();</span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">CURRENT_TIMESTAMP</span>();</span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">CURRENT_TIMESTAMP</span>;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">LOCALTIMESTAMP</span>();</span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">LOCALTIMESTAMP</span>;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">LOCALTIME</span>();</span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">LOCALTIME</span>;</span><br></pre></td></tr></table></figure>
<h3 id="DATE-ADD-å‡½æ•°-1"><a href="#DATE-ADD-å‡½æ•°-1" class="headerlink" title="DATE_ADD() å‡½æ•°"></a><code>DATE_ADD()</code> å‡½æ•°</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> DATE_ADD(<span class="built_in">CURRENT_DATE</span>(), <span class="type">INTERVAL</span> <span class="operator">+</span><span class="number">1</span> <span class="keyword">YEAR</span>);</span><br><span class="line"><span class="keyword">SELECT</span> DATE_ADD(<span class="built_in">CURRENT_DATE</span>(), <span class="type">INTERVAL</span> <span class="operator">+</span><span class="number">1</span> QUARTER);</span><br><span class="line"><span class="keyword">SELECT</span> DATE_ADD(<span class="built_in">CURRENT_DATE</span>(), <span class="type">INTERVAL</span> <span class="operator">+</span><span class="number">1</span> <span class="keyword">MONTH</span>);</span><br><span class="line"><span class="keyword">SELECT</span> DATE_ADD(<span class="built_in">CURRENT_DATE</span>(), <span class="type">INTERVAL</span> <span class="operator">+</span><span class="number">1</span> <span class="keyword">DAY</span>);</span><br><span class="line"><span class="keyword">SELECT</span> DATE_ADD(<span class="built_in">CURRENT_TIME</span>(), <span class="type">INTERVAL</span> <span class="operator">+</span><span class="number">1</span> <span class="keyword">HOUR</span>);</span><br><span class="line"><span class="keyword">SELECT</span> DATE_ADD(<span class="built_in">CURRENT_TIME</span>(), <span class="type">INTERVAL</span> <span class="operator">+</span><span class="number">1</span> <span class="keyword">MINUTE</span>);</span><br><span class="line"><span class="keyword">SELECT</span> DATE_ADD(<span class="built_in">CURRENT_TIME</span>(), <span class="type">INTERVAL</span> <span class="operator">+</span><span class="number">60</span> <span class="keyword">SECOND</span>);</span><br><span class="line"><span class="keyword">SELECT</span> DATE_ADD(<span class="built_in">CURRENT_TIME</span>(), <span class="type">INTERVAL</span> <span class="operator">+</span><span class="number">5000</span> MICROSECOND);</span><br><span class="line"><span class="keyword">SELECT</span> DATE_ADD(NOW(), <span class="type">INTERVAL</span> <span class="operator">+</span><span class="number">1</span> <span class="keyword">YEAR</span>);</span><br><span class="line"><span class="keyword">SELECT</span> DATE_ADD(NOW(), <span class="type">INTERVAL</span> <span class="operator">+</span><span class="number">1</span> <span class="keyword">MONTH</span>);</span><br><span class="line"><span class="keyword">SELECT</span> DATE_ADD(NOW(), <span class="type">INTERVAL</span> <span class="operator">+</span><span class="number">1</span> WEEK);</span><br></pre></td></tr></table></figure>
<h3 id="DATE-FORMAT-STR-TO-DATE-å‡½æ•°"><a href="#DATE-FORMAT-STR-TO-DATE-å‡½æ•°" class="headerlink" title="DATE_FORMAT(), STR_TO_DATE() å‡½æ•°"></a><code>DATE_FORMAT()</code>, <code>STR_TO_DATE()</code> å‡½æ•°</h3><table>
<thead>
<tr>
<th>åç§°</th>
<th>æè¿°</th>
<th>å¤‡æ³¨</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>%a</code></td>
<td>ä¸€æ˜ŸæœŸä¸­æ¯å¤©åç§°çš„ç¼©å†™(Sunâ€¦Sat)</td>
<td></td>
</tr>
<tr>
<td><code>%b</code></td>
<td>æœˆä»½çš„ç¼©å†™(Janâ€¦Dec)</td>
<td></td>
</tr>
<tr>
<td><code>%c</code></td>
<td>æœˆä»½çš„æ•°å­—è¡¨ç°å½¢å¼(0â€¦12)</td>
<td></td>
</tr>
<tr>
<td><code>%D</code></td>
<td>å¸¦æœ‰è‹±è¯­åç¼€çš„ä¸€ä¸ªæœˆä¸­çš„æ¯ä¸€å¤©çš„åç§°(0thã€1stã€2ndã€3rd)</td>
<td></td>
</tr>
<tr>
<td><code>%d</code></td>
<td>ç”¨æ•°å­—å½¢å¼è¡¨ç°çš„æ¯æœˆä¸­çš„æ¯ä¸€å¤©(00â€¦31)</td>
<td></td>
</tr>
<tr>
<td><code>%e</code></td>
<td>ç”¨æ•°å­—å½¢å¼è¡¨ç°çš„æ¯æœˆä¸­çš„æ¯ä¸€å¤©(0â€¦31)</td>
<td></td>
</tr>
<tr>
<td><code>%f</code></td>
<td>æ¯«ç§’(000000â€¦999999)</td>
<td></td>
</tr>
<tr>
<td><code>%H</code></td>
<td>24 æ—¶åˆ¶æ˜¾ç¤ºçš„å°æ—¶(00â€¦23)</td>
<td></td>
</tr>
<tr>
<td><code>%h</code></td>
<td>12 æ—¶åˆ¶æ˜¾ç¤ºçš„å°æ—¶(01â€¦12)</td>
<td></td>
</tr>
<tr>
<td><code>%I</code></td>
<td>12 æ—¶åˆ¶æ˜¾ç¤ºçš„å°æ—¶(01â€¦12)</td>
<td></td>
</tr>
<tr>
<td><code>%i</code></td>
<td>ä»¥æ•°å­—å½¢å¼è¡¨ç°çš„åˆ†é’Ÿæ•°(00â€¦59)</td>
<td></td>
</tr>
<tr>
<td><code>%j</code></td>
<td>ä¸€å¹´ä¸­çš„æ¯ä¸€å¤©(001â€¦366)</td>
<td></td>
</tr>
<tr>
<td><code>%k</code></td>
<td>24 æ—¶åˆ¶å°æ—¶çš„å¦ä¸€ç§è¡¨ç°æ ¼å¼(0â€¦23)</td>
<td></td>
</tr>
<tr>
<td><code>%l</code></td>
<td>12 æ—¶åˆ¶å°æ—¶çš„å¦ä¸€ç§è¡¨ç°æ ¼å¼(1â€¦12)</td>
<td></td>
</tr>
<tr>
<td><code>%M</code></td>
<td>ç”¨å®Œæ•´è‹±æ–‡åç§°è¡¨ç¤ºçš„æœˆä»½(Januaryâ€¦December)</td>
<td></td>
</tr>
<tr>
<td><code>%m</code></td>
<td>ç”¨æ•°å­—è¡¨ç°çš„æœˆä»½(00â€¦12)</td>
<td></td>
</tr>
<tr>
<td><code>%p</code></td>
<td>ä¸Šåˆ(AM)æˆ–ä¸‹åˆ(PM)</td>
<td></td>
</tr>
<tr>
<td><code>%r</code></td>
<td>12 æ—¶åˆ¶çš„æ—¶é—´å€¼(hh:mm:ss, åè·Ÿ AM æˆ– PM)</td>
<td></td>
</tr>
<tr>
<td><code>%S</code></td>
<td>ç§’(00â€¦59)</td>
<td></td>
</tr>
<tr>
<td><code>%s</code></td>
<td>ç§’(00â€¦59)</td>
<td></td>
</tr>
<tr>
<td><code>%T</code></td>
<td>24 æ—¶åˆ¶çš„å°æ—¶(hh:mm:ss)</td>
<td></td>
</tr>
<tr>
<td><code>%U</code></td>
<td>æ˜ŸæœŸ(00â€¦53), å…¶ä¸­æ˜ŸæœŸå¤©æ˜¯æ¯æ˜ŸæœŸçš„å¼€å§‹æ—¥</td>
<td></td>
</tr>
<tr>
<td><code>%u</code></td>
<td>æ˜ŸæœŸ(00â€¦53), å…¶ä¸­æ˜ŸæœŸä¸€æ˜¯æ¯æ˜ŸæœŸçš„å¼€å§‹æ—¥</td>
<td></td>
</tr>
<tr>
<td><code>%V</code></td>
<td>æ˜ŸæœŸ(01â€¦53), å…¶ä¸­æ˜ŸæœŸå¤©æ˜¯æ¯æ˜ŸæœŸçš„å¼€å§‹æ—¥, å’Œ %X ä¸€èµ·ä½¿ç”¨</td>
<td></td>
</tr>
<tr>
<td><code>%v</code></td>
<td>æ˜ŸæœŸ(01â€¦53), å…¶ä¸­æ˜ŸæœŸä¸€æ˜¯æ¯æ˜ŸæœŸçš„å¼€å§‹æ—¥, å’Œ %x ä¸€èµ·ä½¿ç”¨</td>
<td></td>
</tr>
<tr>
<td><code>%W</code></td>
<td>ä¸€æ˜ŸæœŸä¸­å„æ—¥åç§°(Sundayâ€¦Saturday)</td>
<td></td>
</tr>
<tr>
<td><code>%w</code></td>
<td>ä¸€æ˜ŸæœŸä¸­å„æ—¥åç§°(0 ä»£è¡¨æ˜ŸæœŸæ—¥, 6 ä»£è¡¨æ˜ŸæœŸå…­, ä»¥æ­¤ç±»æ¨)</td>
<td></td>
</tr>
<tr>
<td><code>%X</code></td>
<td>æŸæ˜ŸæœŸæ‰€å¤„å¹´ä»½. å…¶ä¸­, æ˜ŸæœŸå¤©æ˜¯æ¯æ˜ŸæœŸçš„å¼€å§‹æ—¥, é‡‡ç”¨ 4 ä½æ•°å­—å½¢å¼è¡¨ç°, å’Œ %Vä¸€èµ·ä½¿ç”¨</td>
<td></td>
</tr>
<tr>
<td><code>%x</code></td>
<td>æŸæ˜ŸæœŸæ‰€å¤„å¹´ä»½. å…¶ä¸­, æ˜ŸæœŸä¸€æ˜¯æ¯æ˜ŸæœŸçš„å¼€å§‹æ—¥, é‡‡ç”¨ 4 ä½æ•°å­—å½¢å¼è¡¨ç°, å’Œ %V ä¸€èµ·ä½¿ç”¨</td>
<td></td>
</tr>
<tr>
<td><code>%Y</code></td>
<td>4 ä½æ•°å­—è¡¨ç¤ºçš„å¹´ä»½</td>
<td></td>
</tr>
<tr>
<td><code>%y</code></td>
<td>2 ä½æ•°å­—è¡¨ç¤ºçš„å¹´ä»½</td>
<td></td>
</tr>
<tr>
<td><code>%%</code></td>
<td>ç¬¦å· % çš„å­—é¢å€¼</td>
<td></td>
</tr>
<tr>
<td><code>%x(xä¸ºæ–œä½“)</code></td>
<td>å­—ç¬¦ x çš„å­—é¢å€¼, x æŒ‡ä»¥ä¸Šæœªåˆ—å‡ºçš„ä»»ä½•å­—ç¬¦</td>
</tr>
</tbody>
</table>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> DATE_FORMAT(NOW(), <span class="string">&#x27;%Yå¹´-%mæœˆ-%då· %p %Hæ—¶%iåˆ†%sç§’&#x27;</span>);</span><br><span class="line"><span class="keyword">SELECT</span> DATE_FORMAT(NOW(), <span class="string">&#x27;%Y %M %D %p %H:%m:%s %W %u %j&#x27;</span>);</span><br><span class="line"><span class="keyword">SELECT</span> STR_TO_DATE(<span class="string">&#x27;February 1 2018&#x27;</span>, <span class="string">&#x27;%M %d %Y&#x27;</span>);</span><br><span class="line"><span class="keyword">SELECT</span> STR_TO_DATE(<span class="string">&#x27;March,8,2018&#x27;</span>, <span class="string">&#x27;%M,%e,%Y&#x27;</span>);</span><br><span class="line"><span class="keyword">SELECT</span> STR_TO_DATE(<span class="string">&#x27;Friday, July 28, 2018&#x27;</span>, <span class="string">&#x27;%W, %M %e, %Y&#x27;</span>);</span><br><span class="line"><span class="keyword">SELECT</span> STR_TO_DATE(<span class="string">&#x27;2018,10,1 9&#x27;</span>, <span class="string">&#x27;%Y,%m,%d %h&#x27;</span>);</span><br><span class="line"><span class="keyword">SELECT</span> STR_TO_DATE(<span class="string">&#x27;2018,6,2 21,30,01&#x27;</span>, <span class="string">&#x27;%Y,%m,%d %H,%i,%s&#x27;</span>);</span><br><span class="line"><span class="keyword">SELECT</span> STR_TO_DATE(<span class="string">&#x27;16,3,33&#x27;</span>, <span class="string">&#x27;%H,%i,%s&#x27;</span>);</span><br></pre></td></tr></table></figure>
<h3 id="DATE-SUB-SUBDATE-å‡½æ•°"><a href="#DATE-SUB-SUBDATE-å‡½æ•°" class="headerlink" title="DATE_SUB(), SUBDATE() å‡½æ•°"></a><code>DATE_SUB()</code>, <code>SUBDATE()</code> å‡½æ•°</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> DATE_SUB(<span class="built_in">CURRENT_DATE</span>(), <span class="type">INTERVAL</span> <span class="operator">+</span><span class="number">1</span> <span class="keyword">YEAR</span>);</span><br><span class="line"><span class="keyword">SELECT</span> DATE_SUB(<span class="built_in">CURRENT_DATE</span>(), <span class="type">INTERVAL</span> <span class="operator">+</span><span class="number">1</span> QUARTER);</span><br><span class="line"><span class="keyword">SELECT</span> DATE_SUB(<span class="built_in">CURRENT_DATE</span>(), <span class="type">INTERVAL</span> <span class="operator">+</span><span class="number">1</span> <span class="keyword">MONTH</span>);</span><br><span class="line"><span class="keyword">SELECT</span> DATE_SUB(<span class="built_in">CURRENT_DATE</span>(), <span class="type">INTERVAL</span> <span class="operator">+</span><span class="number">1</span> <span class="keyword">DAY</span>);</span><br><span class="line"><span class="keyword">SELECT</span> DATE_SUB(<span class="built_in">CURRENT_TIME</span>(), <span class="type">INTERVAL</span> <span class="operator">+</span><span class="number">1</span> <span class="keyword">HOUR</span>);</span><br><span class="line"><span class="keyword">SELECT</span> DATE_SUB(<span class="built_in">CURRENT_TIME</span>(), <span class="type">INTERVAL</span> <span class="operator">+</span><span class="number">1</span> <span class="keyword">MINUTE</span>);</span><br><span class="line"><span class="keyword">SELECT</span> DATE_SUB(<span class="built_in">CURRENT_TIME</span>(), <span class="type">INTERVAL</span> <span class="operator">+</span><span class="number">60</span> <span class="keyword">SECOND</span>);</span><br><span class="line"><span class="keyword">SELECT</span> DATE_SUB(<span class="built_in">CURRENT_TIME</span>(), <span class="type">INTERVAL</span> <span class="operator">+</span><span class="number">5000</span> MICROSECOND);</span><br><span class="line"><span class="keyword">SELECT</span> DATE_SUB(NOW(), <span class="type">INTERVAL</span> <span class="operator">+</span><span class="number">1</span> <span class="keyword">YEAR</span>);</span><br><span class="line"><span class="keyword">SELECT</span> DATE_SUB(NOW(), <span class="type">INTERVAL</span> <span class="operator">+</span><span class="number">1</span> <span class="keyword">MONTH</span>);</span><br><span class="line"><span class="keyword">SELECT</span> DATE_SUB(NOW(), <span class="type">INTERVAL</span> <span class="operator">+</span><span class="number">1</span> WEEK);</span><br><span class="line"><span class="keyword">SELECT</span> SUBDATE(<span class="built_in">CURRENT_TIMESTAMP</span>(<span class="number">6</span>), <span class="type">INTERVAL</span> <span class="number">4</span> MICROSECOND);</span><br><span class="line"><span class="keyword">SELECT</span> SUBDATE(NOW(), <span class="type">INTERVAL</span> <span class="number">60</span> <span class="keyword">SECOND</span>);</span><br><span class="line"><span class="keyword">SELECT</span> SUBDATE(<span class="built_in">LOCALTIMESTAMP</span>(), <span class="type">INTERVAL</span> <span class="number">30</span> <span class="keyword">MINUTE</span>);</span><br><span class="line"><span class="keyword">SELECT</span> SUBDATE(<span class="built_in">LOCALTIME</span>(), <span class="type">INTERVAL</span> <span class="number">2</span> <span class="keyword">HOUR</span>);</span><br><span class="line"><span class="keyword">SELECT</span> SUBDATE(CURDATE(), <span class="type">INTERVAL</span> <span class="number">10</span> <span class="keyword">DAY</span>);</span><br><span class="line"><span class="keyword">SELECT</span> SUBDATE(<span class="built_in">CURRENT_DATE</span>(), <span class="number">10</span>);</span><br><span class="line"><span class="keyword">SELECT</span> SUBDATE(<span class="built_in">CURRENT_DATE</span>(), <span class="type">INTERVAL</span> <span class="number">4</span> WEEK);</span><br><span class="line"><span class="keyword">SELECT</span> SUBDATE(<span class="built_in">CURRENT_DATE</span>(), <span class="type">INTERVAL</span> <span class="number">3</span> <span class="keyword">MONTH</span>);</span><br><span class="line"><span class="keyword">SELECT</span> SUBDATE(<span class="built_in">CURRENT_DATE</span>(), <span class="type">INTERVAL</span> <span class="number">2</span> QUARTER);</span><br><span class="line"><span class="keyword">SELECT</span> SUBDATE(<span class="built_in">CURRENT_DATE</span>(), <span class="type">INTERVAL</span> <span class="number">1</span> <span class="keyword">YEAR</span>);</span><br><span class="line"><span class="keyword">SELECT</span> SUBDATE(<span class="string">&#x27;2019-01-01 00:00:10.000001&#x27;</span>, <span class="type">INTERVAL</span> <span class="string">&#x27;10.000001&#x27;</span> SECOND_MICROSECOND);</span><br><span class="line"><span class="keyword">SELECT</span> SUBDATE(<span class="string">&#x27;2019-01-01 00:02:10.000001&#x27;</span>, <span class="type">INTERVAL</span> <span class="string">&#x27;2:10.000001&#x27;</span> MINUTE_MICROSECOND);</span><br><span class="line"><span class="keyword">SELECT</span> SUBDATE(NOW(), <span class="type">INTERVAL</span> <span class="string">&#x27;3:30&#x27;</span> MINUTE_SECOND);</span><br><span class="line"><span class="keyword">SELECT</span> SUBDATE(<span class="string">&#x27;2019-01-01 01:03:10.000001&#x27;</span>, <span class="type">INTERVAL</span> <span class="string">&#x27;1:03:10.000001&#x27;</span> HOUR_MICROSECOND);</span><br><span class="line"><span class="keyword">SELECT</span> SUBDATE(NOW(), <span class="type">INTERVAL</span> <span class="string">&#x27;1:30:30&#x27;</span> HOUR_SECOND);</span><br><span class="line"><span class="keyword">SELECT</span> SUBDATE(NOW(), <span class="type">INTERVAL</span> <span class="string">&#x27;1:01&#x27;</span> HOUR_MINUTE);</span><br><span class="line"><span class="keyword">SELECT</span> SUBDATE(<span class="string">&#x27;2019-01-01 00:02:10.000001&#x27;</span>, <span class="type">INTERVAL</span> <span class="string">&#x27;10 1:03:12.000001&#x27;</span> DAY_MICROSECOND);</span><br><span class="line"><span class="keyword">SELECT</span> SUBDATE(NOW(), <span class="type">INTERVAL</span> <span class="string">&#x27;7 1:30:30&#x27;</span> DAY_SECOND);</span><br><span class="line"><span class="keyword">SELECT</span> SUBDATE(<span class="built_in">CURRENT_TIMESTAMP</span>(), <span class="type">INTERVAL</span> <span class="string">&#x27;7 1:30&#x27;</span> DAY_MINUTE);</span><br><span class="line"><span class="keyword">SELECT</span> SUBDATE(<span class="built_in">LOCALTIME</span>(), <span class="type">INTERVAL</span> <span class="string">&#x27;7 1&#x27;</span> DAY_HOUR);</span><br><span class="line"><span class="keyword">SELECT</span> SUBDATE(CURDATE(), <span class="type">INTERVAL</span> <span class="string">&#x27;5-3&#x27;</span> YEAR_MONTH);</span><br></pre></td></tr></table></figure>
<h3 id="DATEDIFF-å‡½æ•°"><a href="#DATEDIFF-å‡½æ•°" class="headerlink" title="DATEDIFF() å‡½æ•°"></a><code>DATEDIFF()</code> å‡½æ•°</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> DATEDIFF(DATE_ADD(CURDATE(), <span class="type">INTERVAL</span> <span class="operator">+</span> <span class="number">1</span> <span class="keyword">DAY</span>), CURDATE());</span><br><span class="line"><span class="keyword">SELECT</span> DATEDIFF(DATE_ADD(<span class="built_in">CURRENT_DATE</span>(), <span class="type">INTERVAL</span> <span class="operator">+</span> <span class="number">1</span> <span class="keyword">DAY</span>), <span class="built_in">CURRENT_DATE</span>());</span><br><span class="line"><span class="keyword">SELECT</span> DATEDIFF(DATE_ADD(CURTIME(), <span class="type">INTERVAL</span> <span class="operator">+</span> <span class="number">1</span> <span class="keyword">DAY</span>), CURTIME());</span><br><span class="line"><span class="keyword">SELECT</span> DATEDIFF(DATE_ADD(<span class="built_in">CURRENT_TIME</span>(), <span class="type">INTERVAL</span> <span class="operator">+</span> <span class="number">1</span> <span class="keyword">DAY</span>), <span class="built_in">CURRENT_TIME</span>());</span><br><span class="line"><span class="keyword">SELECT</span> DATEDIFF(CURDATE(), DATE_SUB(<span class="built_in">CURRENT_DATE</span>(), <span class="type">INTERVAL</span> <span class="operator">+</span><span class="number">1</span> <span class="keyword">DAY</span>));</span><br></pre></td></tr></table></figure>
<h3 id="DAY-DAYOFMONTH-å‡½æ•°"><a href="#DAY-DAYOFMONTH-å‡½æ•°" class="headerlink" title="DAY(), DAYOFMONTH() å‡½æ•°"></a><code>DAY()</code>, <code>DAYOFMONTH()</code> å‡½æ•°</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">DAY</span>(<span class="built_in">CURRENT_DATE</span>());</span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">DAY</span>(<span class="built_in">CURRENT_TIME</span>());</span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">DAY</span>(NOW());</span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">DAY</span>(<span class="string">&#x27;2016-12-31 23:59:59&#x27;</span>);</span><br><span class="line"><span class="keyword">SELECT</span> DAYOFMONTH(<span class="built_in">CURRENT_DATE</span>());</span><br><span class="line"><span class="keyword">SELECT</span> DAYOFMONTH(<span class="built_in">CURRENT_TIME</span>());</span><br><span class="line"><span class="keyword">SELECT</span> DAYOFMONTH(NOW());</span><br><span class="line"><span class="keyword">SELECT</span> DAYOFMONTH(<span class="string">&#x27;2016-12-31 23:59:59&#x27;</span>);</span><br></pre></td></tr></table></figure>
<h3 id="DAYNAME-å‡½æ•°"><a href="#DAYNAME-å‡½æ•°" class="headerlink" title="DAYNAME() å‡½æ•°"></a><code>DAYNAME()</code> å‡½æ•°</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> DAYNAME(CURDATE());</span><br><span class="line"><span class="keyword">SELECT</span> DAYNAME(<span class="built_in">CURRENT_DATE</span>());</span><br><span class="line"><span class="keyword">SELECT</span> DAYNAME(CURTIME());</span><br><span class="line"><span class="keyword">SELECT</span> DAYNAME(<span class="built_in">CURRENT_TIME</span>());</span><br><span class="line"><span class="keyword">SELECT</span> DAYNAME(<span class="built_in">CURRENT_TIMESTAMP</span>());</span><br><span class="line"><span class="keyword">SELECT</span> DAYNAME(NOW());</span><br></pre></td></tr></table></figure>
<h3 id="DAYOFWEEK-å‡½æ•°"><a href="#DAYOFWEEK-å‡½æ•°" class="headerlink" title="DAYOFWEEK() å‡½æ•°"></a><code>DAYOFWEEK()</code> å‡½æ•°</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> DAYOFWEEK(CURDATE());</span><br><span class="line"><span class="keyword">SELECT</span> DAYOFWEEK(<span class="built_in">CURRENT_DATE</span>());</span><br><span class="line"><span class="keyword">SELECT</span> DAYOFWEEK(NOW());</span><br><span class="line"><span class="keyword">SELECT</span> DAYOFWEEK(<span class="built_in">LOCALTIMESTAMP</span>());</span><br></pre></td></tr></table></figure>
<h3 id="DAYOFYEAR-å‡½æ•°"><a href="#DAYOFYEAR-å‡½æ•°" class="headerlink" title="DAYOFYEAR() å‡½æ•°"></a><code>DAYOFYEAR()</code> å‡½æ•°</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> DAYOFYEAR(CURDATE());</span><br><span class="line"><span class="keyword">SELECT</span> DAYOFYEAR(<span class="built_in">CURRENT_DATE</span>());</span><br><span class="line"><span class="keyword">SELECT</span> DAYOFYEAR(NOW());</span><br><span class="line"><span class="keyword">SELECT</span> DAYOFYEAR(<span class="built_in">LOCALTIMESTAMP</span>());</span><br></pre></td></tr></table></figure>
<h3 id="EXTRACT-å‡½æ•°"><a href="#EXTRACT-å‡½æ•°" class="headerlink" title="EXTRACT() å‡½æ•°"></a><code>EXTRACT()</code> å‡½æ•°</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="built_in">EXTRACT</span>(MICROSECOND <span class="keyword">FROM</span> <span class="built_in">CURRENT_TIMESTAMP</span>(<span class="number">6</span>));</span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">EXTRACT</span>(<span class="keyword">SECOND</span> <span class="keyword">FROM</span> <span class="built_in">CURRENT_TIMESTAMP</span>(<span class="number">6</span>));</span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">EXTRACT</span>(<span class="keyword">MINUTE</span> <span class="keyword">FROM</span> <span class="built_in">CURRENT_TIMESTAMP</span>(<span class="number">6</span>));</span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">EXTRACT</span>(<span class="keyword">HOUR</span> <span class="keyword">FROM</span> <span class="built_in">CURRENT_TIMESTAMP</span>(<span class="number">6</span>));</span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">EXTRACT</span>(<span class="keyword">DAY</span> <span class="keyword">FROM</span> <span class="built_in">CURRENT_TIMESTAMP</span>(<span class="number">6</span>));</span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">EXTRACT</span>(WEEK <span class="keyword">FROM</span> <span class="built_in">CURRENT_TIMESTAMP</span>(<span class="number">6</span>));</span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">EXTRACT</span>(<span class="keyword">MONTH</span> <span class="keyword">FROM</span> <span class="built_in">CURRENT_TIMESTAMP</span>(<span class="number">6</span>));</span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">EXTRACT</span>(QUARTER <span class="keyword">FROM</span> <span class="built_in">CURRENT_TIMESTAMP</span>(<span class="number">6</span>));</span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">EXTRACT</span>(<span class="keyword">YEAR</span> <span class="keyword">FROM</span> <span class="built_in">CURRENT_TIMESTAMP</span>(<span class="number">6</span>));</span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">EXTRACT</span>(SECOND_MICROSECOND <span class="keyword">FROM</span> <span class="built_in">CURRENT_TIMESTAMP</span>(<span class="number">6</span>));</span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">EXTRACT</span>(MINUTE_MICROSECOND <span class="keyword">FROM</span> <span class="built_in">CURRENT_TIMESTAMP</span>(<span class="number">6</span>));</span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">EXTRACT</span>(MINUTE_SECOND <span class="keyword">FROM</span> <span class="built_in">CURRENT_TIMESTAMP</span>(<span class="number">6</span>));</span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">EXTRACT</span>(HOUR_MICROSECOND <span class="keyword">FROM</span> <span class="built_in">CURRENT_TIMESTAMP</span>(<span class="number">6</span>));</span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">EXTRACT</span>(HOUR_SECOND <span class="keyword">FROM</span> <span class="built_in">CURRENT_TIMESTAMP</span>(<span class="number">6</span>));</span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">EXTRACT</span>(HOUR_MINUTE <span class="keyword">FROM</span> <span class="built_in">CURRENT_TIMESTAMP</span>(<span class="number">6</span>));</span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">EXTRACT</span>(DAY_MICROSECOND <span class="keyword">FROM</span> <span class="built_in">CURRENT_TIMESTAMP</span>(<span class="number">6</span>));</span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">EXTRACT</span>(DAY_SECOND <span class="keyword">FROM</span> <span class="built_in">CURRENT_TIMESTAMP</span>(<span class="number">6</span>));</span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">EXTRACT</span>(DAY_MINUTE <span class="keyword">FROM</span> <span class="built_in">CURRENT_TIMESTAMP</span>(<span class="number">6</span>));</span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">EXTRACT</span>(DAY_HOUR <span class="keyword">FROM</span> <span class="built_in">CURRENT_TIMESTAMP</span>(<span class="number">6</span>));</span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">EXTRACT</span>(YEAR_MONTH <span class="keyword">FROM</span> <span class="built_in">CURRENT_TIMESTAMP</span>(<span class="number">6</span>));</span><br></pre></td></tr></table></figure>
<h3 id="FROM-DAYS-å‡½æ•°"><a href="#FROM-DAYS-å‡½æ•°" class="headerlink" title="FROM_DAYS() å‡½æ•°"></a><code>FROM_DAYS()</code> å‡½æ•°</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> FROM_DAYS(<span class="string">&#x27;736644&#x27;</span>);</span><br><span class="line"><span class="keyword">SELECT</span> FROM_DAYS(<span class="string">&#x27;737009&#x27;</span>);</span><br><span class="line"><span class="keyword">SELECT</span> FROM_DAYS(<span class="string">&#x27;737374&#x27;</span>);</span><br></pre></td></tr></table></figure>
<h3 id="HOUR-å‡½æ•°"><a href="#HOUR-å‡½æ•°" class="headerlink" title="HOUR() å‡½æ•°"></a><code>HOUR()</code> å‡½æ•°</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">HOUR</span>(CURTIME());</span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">HOUR</span>(<span class="built_in">CURRENT_TIME</span>());</span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">HOUR</span>(<span class="built_in">CURRENT_TIMESTAMP</span>());</span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">HOUR</span>(NOW());</span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">HOUR</span>(<span class="built_in">LOCALTIMESTAMP</span>());</span><br></pre></td></tr></table></figure>
<h3 id="LAST-DAY-å‡½æ•°"><a href="#LAST-DAY-å‡½æ•°" class="headerlink" title="LAST_DAY() å‡½æ•°"></a><code>LAST_DAY()</code> å‡½æ•°</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> LAST_DAY(CURDATE());</span><br><span class="line"><span class="keyword">SELECT</span> LAST_DAY(DATE_SUB(CURDATE(), <span class="type">INTERVAL</span> <span class="operator">+</span><span class="number">1</span> <span class="keyword">YEAR</span>));</span><br><span class="line"><span class="keyword">SELECT</span> LAST_DAY(DATE_ADD(CURDATE(), <span class="type">INTERVAL</span> <span class="operator">+</span><span class="number">1</span> QUARTER));</span><br></pre></td></tr></table></figure>
<h3 id="MAKEDATE-å‡½æ•°"><a href="#MAKEDATE-å‡½æ•°" class="headerlink" title="MAKEDATE() å‡½æ•°"></a><code>MAKEDATE()</code> å‡½æ•°</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SET</span> <span class="variable">@YEAR</span> <span class="operator">=</span> <span class="string">&#x27;2018&#x27;</span>;</span><br><span class="line"><span class="keyword">SELECT</span> MAKEDATE(<span class="variable">@YEAR</span>, <span class="number">1</span>);</span><br><span class="line"><span class="keyword">SELECT</span> MAKEDATE(<span class="variable">@YEAR</span>, <span class="number">100</span>);</span><br><span class="line"><span class="keyword">SELECT</span> MAKEDATE(<span class="variable">@YEAR</span>, <span class="number">200</span>);</span><br><span class="line"><span class="keyword">SELECT</span> MAKEDATE(<span class="variable">@YEAR</span>, <span class="number">365</span>);</span><br><span class="line"><span class="keyword">SELECT</span> MAKEDATE(<span class="variable">@YEAR</span>, <span class="number">366</span>);</span><br></pre></td></tr></table></figure>
<h3 id="MAKETIME-å‡½æ•°"><a href="#MAKETIME-å‡½æ•°" class="headerlink" title="MAKETIME() å‡½æ•°"></a><code>MAKETIME()</code> å‡½æ•°</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> MAKETIME(<span class="number">11</span>, <span class="number">8</span>, <span class="number">1</span>);</span><br><span class="line"><span class="keyword">SELECT</span> MAKETIME(<span class="number">16</span>, <span class="number">59</span>, <span class="number">0</span>);</span><br><span class="line"><span class="keyword">SELECT</span> MAKETIME(<span class="number">23</span>, <span class="number">59</span>, <span class="number">59</span>);</span><br><span class="line"><span class="keyword">SELECT</span> MAKETIME(<span class="number">2017</span>, <span class="number">59</span>, <span class="number">59</span>);</span><br><span class="line"><span class="keyword">SELECT</span> MAKETIME(<span class="number">-2017</span>, <span class="number">59</span>, <span class="number">59</span>);</span><br></pre></td></tr></table></figure>
<h3 id="MICROSECOND-å‡½æ•°"><a href="#MICROSECOND-å‡½æ•°" class="headerlink" title="MICROSECOND() å‡½æ•°"></a><code>MICROSECOND()</code> å‡½æ•°</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> MICROSECOND(<span class="built_in">CURRENT_TIMESTAMP</span>(<span class="number">6</span>));</span><br><span class="line"><span class="keyword">SELECT</span> MICROSECOND(<span class="string">&#x27;2018-12-31 23:59:59.000001&#x27;</span>);</span><br><span class="line"><span class="keyword">SELECT</span> MICROSECOND(<span class="string">&#x27;2018-12-31 23:59:59.999999&#x27;</span>);</span><br><span class="line"><span class="keyword">SELECT</span> MICROSECOND(<span class="built_in">CURRENT_DATE</span>());</span><br><span class="line"><span class="keyword">SELECT</span> MICROSECOND(<span class="string">&#x27;12:59:59.141592&#x27;</span>);</span><br><span class="line"><span class="keyword">SELECT</span> MICROSECOND(<span class="string">&#x27;838:58:59.001234&#x27;</span>);</span><br></pre></td></tr></table></figure>
<h3 id="MINUTE-å‡½æ•°"><a href="#MINUTE-å‡½æ•°" class="headerlink" title="MINUTE() å‡½æ•°"></a><code>MINUTE()</code> å‡½æ•°</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">MINUTE</span>(CURTIME());</span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">MINUTE</span>(<span class="built_in">CURRENT_TIME</span>());</span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">MINUTE</span>(<span class="built_in">CURRENT_TIMESTAMP</span>(<span class="number">6</span>));</span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">MINUTE</span>(NOW());</span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">MINUTE</span>(<span class="string">&#x27;2018:59:59.001234&#x27;</span>);</span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">MINUTE</span>(<span class="built_in">LOCALTIME</span>());</span><br></pre></td></tr></table></figure>
<h3 id="MONTH-å‡½æ•°"><a href="#MONTH-å‡½æ•°" class="headerlink" title="MONTH() å‡½æ•°"></a><code>MONTH()</code> å‡½æ•°</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">MONTH</span>(CURDATE());</span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">MONTH</span>(<span class="built_in">CURRENT_DATE</span>());</span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">MONTH</span>(<span class="built_in">CURRENT_TIMESTAMP</span>(<span class="number">6</span>));</span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">MONTH</span>(<span class="built_in">LOCALTIMESTAMP</span>());</span><br></pre></td></tr></table></figure>
<h3 id="MONTHNAME-å‡½æ•°"><a href="#MONTHNAME-å‡½æ•°" class="headerlink" title="MONTHNAME() å‡½æ•°"></a><code>MONTHNAME()</code> å‡½æ•°</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> MONTHNAME(CURDATE());</span><br><span class="line"><span class="keyword">SELECT</span> MONTHNAME(<span class="built_in">CURRENT_DATE</span>());</span><br><span class="line"><span class="keyword">SELECT</span> MONTHNAME(<span class="built_in">CURRENT_TIMESTAMP</span>());</span><br><span class="line"><span class="keyword">SELECT</span> MONTHNAME(<span class="built_in">LOCALTIMESTAMP</span>());</span><br></pre></td></tr></table></figure>
<h3 id="PERIOD-ADD-å‡½æ•°"><a href="#PERIOD-ADD-å‡½æ•°" class="headerlink" title="PERIOD_ADD() å‡½æ•°"></a><code>PERIOD_ADD()</code> å‡½æ•°</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SET</span> <span class="variable">@YEAR</span> <span class="operator">=</span> <span class="string">&#x27;201806&#x27;</span>;</span><br><span class="line"><span class="keyword">SELECT</span> PERIOD_ADD(<span class="variable">@YEAR</span>, <span class="number">2</span>);</span><br><span class="line"><span class="keyword">SELECT</span> PERIOD_ADD(<span class="variable">@YEAR</span>, <span class="number">7</span>);</span><br><span class="line"><span class="keyword">SELECT</span> PERIOD_ADD(<span class="variable">@YEAR</span>, <span class="number">-7</span>);</span><br><span class="line"><span class="keyword">SELECT</span> PERIOD_ADD(<span class="string">&#x27;1806&#x27;</span>, <span class="number">7</span>);</span><br><span class="line"><span class="keyword">SELECT</span> PERIOD_ADD(<span class="string">&#x27;1806&#x27;</span>, <span class="number">-7</span>);</span><br></pre></td></tr></table></figure>
<h3 id="PERIOD-DIFF-å‡½æ•°"><a href="#PERIOD-DIFF-å‡½æ•°" class="headerlink" title="PERIOD_DIFF() å‡½æ•°"></a><code>PERIOD_DIFF()</code> å‡½æ•°</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> PERIOD_DIFF(<span class="number">201806</span>, <span class="number">201804</span>);</span><br><span class="line"><span class="keyword">SELECT</span> PERIOD_DIFF(<span class="number">201806</span>, <span class="number">201812</span>);</span><br><span class="line"><span class="keyword">SELECT</span> PERIOD_DIFF(<span class="number">1806</span>, <span class="number">1812</span>);</span><br><span class="line"><span class="keyword">SELECT</span> PERIOD_DIFF(<span class="number">1806</span>, <span class="number">200812</span>);</span><br><span class="line"><span class="keyword">SELECT</span> PERIOD_DIFF(<span class="number">201806</span>, <span class="number">0812</span>);</span><br></pre></td></tr></table></figure>
<h3 id="QUARTER-å‡½æ•°"><a href="#QUARTER-å‡½æ•°" class="headerlink" title="QUARTER() å‡½æ•°"></a><code>QUARTER()</code> å‡½æ•°</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> QUARTER(CURDATE());</span><br><span class="line"><span class="keyword">SELECT</span> QUARTER(<span class="built_in">CURRENT_DATE</span>());</span><br><span class="line"><span class="keyword">SELECT</span> QUARTER(<span class="built_in">CURRENT_TIMESTAMP</span>());</span><br><span class="line"><span class="keyword">SELECT</span> QUARTER(NOW());</span><br><span class="line"><span class="keyword">SELECT</span> QUARTER(<span class="built_in">LOCALTIME</span>());</span><br><span class="line"><span class="keyword">SELECT</span> QUARTER(<span class="built_in">LOCALTIMESTAMP</span>());</span><br><span class="line"><span class="keyword">SELECT</span> QUARTER(DATE_ADD(<span class="built_in">CURRENT_DATE</span>(), <span class="type">INTERVAL</span> <span class="operator">+</span><span class="number">6</span> <span class="keyword">MONTH</span>));</span><br><span class="line"><span class="keyword">SELECT</span> QUARTER(DATE_SUB(<span class="built_in">CURRENT_DATE</span>(), <span class="type">INTERVAL</span> <span class="number">-3</span> <span class="keyword">MONTH</span>));</span><br></pre></td></tr></table></figure>
<h3 id="SECOND-å‡½æ•°"><a href="#SECOND-å‡½æ•°" class="headerlink" title="SECOND() å‡½æ•°"></a><code>SECOND()</code> å‡½æ•°</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">SECOND</span>(CURTIME());</span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">SECOND</span>(<span class="built_in">CURRENT_TIME</span>());</span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">SECOND</span>(<span class="built_in">CURRENT_TIMESTAMP</span>());</span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">SECOND</span>(NOW());</span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">SECOND</span>(<span class="built_in">LOCALTIME</span>());</span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">SECOND</span>(<span class="built_in">LOCALTIMESTAMP</span>());</span><br></pre></td></tr></table></figure>
<h3 id="SEC-TO-TIME-å‡½æ•°"><a href="#SEC-TO-TIME-å‡½æ•°" class="headerlink" title="SEC_TO_TIME() å‡½æ•°"></a><code>SEC_TO_TIME()</code> å‡½æ•°</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> SEC_TO_TIME(<span class="number">1</span>);</span><br><span class="line"><span class="keyword">SELECT</span> SEC_TO_TIME(<span class="number">2</span>);</span><br><span class="line"><span class="keyword">SELECT</span> SEC_TO_TIME(<span class="number">3600</span>);</span><br><span class="line"><span class="keyword">SELECT</span> SEC_TO_TIME(<span class="number">360000</span>);</span><br><span class="line"><span class="keyword">SELECT</span> SEC_TO_TIME(<span class="number">5000</span>);</span><br><span class="line"><span class="keyword">SELECT</span> SEC_TO_TIME(<span class="number">-5000</span>);</span><br></pre></td></tr></table></figure>
<h3 id="SECOND-å‡½æ•°-1"><a href="#SECOND-å‡½æ•°-1" class="headerlink" title="SECOND() å‡½æ•°"></a><code>SECOND()</code> å‡½æ•°</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">SECOND</span>(CURTIME());</span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">SECOND</span>(<span class="built_in">CURRENT_TIME</span>());</span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">SECOND</span>(<span class="built_in">CURRENT_TIMESTAMP</span>(<span class="number">6</span>));</span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">SECOND</span>(NOW());</span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">SECOND</span>(<span class="string">&#x27;3600:11:59&#x27;</span>);</span><br></pre></td></tr></table></figure>
<h3 id="SUBTIME-å‡½æ•°"><a href="#SUBTIME-å‡½æ•°" class="headerlink" title="SUBTIME() å‡½æ•°"></a><code>SUBTIME()</code> å‡½æ•°</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> SUBTIME(<span class="string">&#x27;2019-01-01 00:00:10.000001&#x27;</span>, <span class="string">&#x27;2.000001&#x27;</span>);</span><br><span class="line"><span class="keyword">SELECT</span> SUBTIME(<span class="string">&#x27;2019-01-01 00:00:10.000001&#x27;</span>, <span class="string">&#x27;3:2.000001&#x27;</span>);</span><br><span class="line"><span class="keyword">SELECT</span> SUBTIME(<span class="string">&#x27;2019-01-01 00:00:10.000001&#x27;</span>, <span class="string">&#x27;4:3:2.000001&#x27;</span>);</span><br><span class="line"><span class="keyword">SELECT</span> SUBTIME(<span class="string">&#x27;2019-01-01 00:00:10.000001&#x27;</span>, <span class="string">&#x27;5 4:3:2.000001&#x27;</span>);</span><br><span class="line"><span class="keyword">SELECT</span> SUBTIME(<span class="string">&#x27;12:59:59.999999&#x27;</span>, <span class="string">&#x27;0.000001&#x27;</span>);</span><br><span class="line"><span class="keyword">SELECT</span> SUBTIME(<span class="string">&#x27;01:01:01.999998&#x27;</span>, <span class="string">&#x27;5.000001&#x27;</span>);</span><br><span class="line"><span class="keyword">SELECT</span> SUBTIME(<span class="string">&#x27;01:01:01.000001&#x27;</span>, <span class="string">&#x27;8:01:01.003441&#x27;</span>);</span><br><span class="line"><span class="keyword">SELECT</span> SUBTIME(<span class="string">&#x27;01:02:03.000001&#x27;</span>, <span class="string">&#x27;-8:01:01.003441&#x27;</span>);</span><br></pre></td></tr></table></figure>
<h3 id="SYSDATE-å‡½æ•°"><a href="#SYSDATE-å‡½æ•°" class="headerlink" title="SYSDATE() å‡½æ•°"></a><code>SYSDATE()</code> å‡½æ•°</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> SYSDATE();</span><br><span class="line"><span class="keyword">SELECT</span> SYSDATE() <span class="operator">+</span> <span class="number">0</span>;</span><br><span class="line"><span class="keyword">SELECT</span> SYSDATE() <span class="operator">+</span> <span class="number">1</span>;</span><br></pre></td></tr></table></figure>
<h3 id="TIME-å‡½æ•°"><a href="#TIME-å‡½æ•°" class="headerlink" title="TIME() å‡½æ•°"></a><code>TIME()</code> å‡½æ•°</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="type">TIME</span>(<span class="built_in">LOCALTIMESTAMP</span>(<span class="number">6</span>));</span><br><span class="line"><span class="keyword">SELECT</span> <span class="type">TIME</span>(NOW());</span><br><span class="line"><span class="keyword">SELECT</span> <span class="type">TIME</span>(<span class="built_in">CURRENT_TIME</span>());</span><br><span class="line"><span class="keyword">SELECT</span> <span class="type">TIME</span>(<span class="keyword">NULL</span>);</span><br></pre></td></tr></table></figure>
<h3 id="TIME-FORMAT-å‡½æ•°"><a href="#TIME-FORMAT-å‡½æ•°" class="headerlink" title="TIME_FORMAT() å‡½æ•°"></a><code>TIME_FORMAT()</code> å‡½æ•°</h3><table>
<thead>
<tr>
<th>åç§°</th>
<th>æè¿°</th>
<th>å¤‡æ³¨</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>%f</code></td>
<td>æ¯«ç§’(000000â€¦999999)</td>
<td></td>
</tr>
<tr>
<td><code>%H</code></td>
<td>24 æ—¶åˆ¶æ˜¾ç¤ºçš„å°æ—¶(00â€¦23)</td>
<td></td>
</tr>
<tr>
<td><code>%h</code></td>
<td>12 æ—¶åˆ¶æ˜¾ç¤ºçš„å°æ—¶(01â€¦12)</td>
<td></td>
</tr>
<tr>
<td><code>%I</code></td>
<td>12 æ—¶åˆ¶æ˜¾ç¤ºçš„å°æ—¶(01â€¦12)</td>
<td></td>
</tr>
<tr>
<td><code>%i</code></td>
<td>ä»¥æ•°å­—å½¢å¼è¡¨ç°çš„åˆ†é’Ÿæ•°(00â€¦59)</td>
<td></td>
</tr>
<tr>
<td><code>%p</code></td>
<td>ä¸Šåˆ(AM)æˆ–ä¸‹åˆ(PM)</td>
<td></td>
</tr>
<tr>
<td><code>%r</code></td>
<td>12 æ—¶åˆ¶çš„æ—¶é—´å€¼(hh:mm:ss, åè·Ÿ AM æˆ– PM)</td>
<td></td>
</tr>
<tr>
<td><code>%S</code></td>
<td>ç§’(00â€¦59)</td>
<td></td>
</tr>
<tr>
<td><code>%s</code></td>
<td>ç§’(00â€¦59)</td>
<td></td>
</tr>
<tr>
<td><code>%T</code></td>
<td>24 æ—¶åˆ¶çš„å°æ—¶(hh:mm:ss)</td>
</tr>
</tbody>
</table>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> TIME_FORMAT(CURTIME(), <span class="string">&#x27;%H %i %s&#x27;</span>);</span><br><span class="line"><span class="keyword">SELECT</span> TIME_FORMAT(<span class="built_in">CURRENT_TIME</span>(), <span class="string">&#x27;%h:%i:%s %p&#x27;</span>);</span><br><span class="line"><span class="keyword">SELECT</span> TIME_FORMAT(<span class="built_in">CURRENT_TIME</span>, <span class="string">&#x27;%h:%i %p&#x27;</span>);</span><br><span class="line"><span class="keyword">SELECT</span> TIME_FORMAT(<span class="string">&#x27;18:50:30.000001&#x27;</span>, <span class="string">&#x27;%r&#x27;</span>);</span><br><span class="line"><span class="keyword">SELECT</span> TIME_FORMAT(<span class="string">&#x27;18:50:30.000001&#x27;</span>, <span class="string">&#x27;%T&#x27;</span>);</span><br><span class="line"><span class="keyword">SELECT</span> TIME_FORMAT(<span class="string">&#x27;18:50:30.000001&#x27;</span>, <span class="string">&#x27;%f&#x27;</span>);</span><br></pre></td></tr></table></figure>
<h3 id="TIME-TO-SEC-å‡½æ•°"><a href="#TIME-TO-SEC-å‡½æ•°" class="headerlink" title="TIME_TO_SEC() å‡½æ•°"></a><code>TIME_TO_SEC()</code> å‡½æ•°</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> TIME_TO_SEC(<span class="string">&#x27;00:00:01&#x27;</span>);</span><br><span class="line"><span class="keyword">SELECT</span> TIME_TO_SEC(<span class="string">&#x27;00:00:01.999999&#x27;</span>);</span><br><span class="line"><span class="keyword">SELECT</span> TIME_TO_SEC(<span class="string">&#x27;00:00:02&#x27;</span>);</span><br><span class="line"><span class="keyword">SELECT</span> TIME_TO_SEC(CURTIME());</span><br><span class="line"><span class="keyword">SELECT</span> TIME_TO_SEC(NOW());</span><br><span class="line"><span class="keyword">SELECT</span> TIME_TO_SEC(<span class="string">&#x27;-1:00:00&#x27;</span>);</span><br></pre></td></tr></table></figure>
<h3 id="TIMEDIFF-å‡½æ•°"><a href="#TIMEDIFF-å‡½æ•°" class="headerlink" title="TIMEDIFF() å‡½æ•°"></a><code>TIMEDIFF()</code> å‡½æ•°</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> TIMEDIFF(NOW(), SUBDATE(<span class="built_in">LOCALTIME</span>(), <span class="type">INTERVAL</span> <span class="number">1</span> <span class="keyword">SECOND</span>));</span><br><span class="line"><span class="keyword">SELECT</span> TIMEDIFF(CURTIME(), SUBTIME(CURTIME(), <span class="string">&#x27;1:00:00&#x27;</span>));</span><br><span class="line"><span class="keyword">SELECT</span> TIMEDIFF(SUBTIME(CURTIME(), <span class="string">&#x27;1:00:00&#x27;</span>), CURTIME());</span><br><span class="line"><span class="keyword">SELECT</span> TIMEDIFF(NOW(), CURTIME());</span><br></pre></td></tr></table></figure>
<h3 id="TIMESTAMP-å‡½æ•°"><a href="#TIMESTAMP-å‡½æ•°" class="headerlink" title="TIMESTAMP() å‡½æ•°"></a><code>TIMESTAMP()</code> å‡½æ•°</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="type">TIMESTAMP</span>(CURDATE());</span><br><span class="line"><span class="keyword">SELECT</span> <span class="type">TIMESTAMP</span>(CURDATE(), CURTIME());</span><br><span class="line"><span class="keyword">SELECT</span> <span class="type">TIMESTAMP</span>(NOW(), <span class="string">&#x27;02:00:00&#x27;</span>);</span><br></pre></td></tr></table></figure>
<h3 id="TIMESTAMPADD-å‡½æ•°"><a href="#TIMESTAMPADD-å‡½æ•°" class="headerlink" title="TIMESTAMPADD() å‡½æ•°"></a><code>TIMESTAMPADD()</code> å‡½æ•°</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> TIMESTAMPADD(<span class="keyword">SECOND</span>, <span class="number">3600</span>, CURTIME());</span><br><span class="line"><span class="keyword">SELECT</span> TIMESTAMPADD(<span class="keyword">MINUTE</span>, <span class="number">60</span>, CURTIME());</span><br><span class="line"><span class="keyword">SELECT</span> TIMESTAMPADD(<span class="keyword">HOUR</span>, <span class="number">1</span>, CURTIME());</span><br><span class="line"><span class="keyword">SELECT</span> TIMESTAMPADD(<span class="keyword">DAY</span>, <span class="number">1</span>, CURDATE());</span><br><span class="line"><span class="keyword">SELECT</span> TIMESTAMPADD(WEEK, <span class="number">1</span>, CURDATE());</span><br><span class="line"><span class="keyword">SELECT</span> TIMESTAMPADD(<span class="keyword">MONTH</span>, <span class="number">1</span>, CURDATE());</span><br><span class="line"><span class="keyword">SELECT</span> TIMESTAMPADD(QUARTER, <span class="number">1</span>, CURDATE());</span><br><span class="line"><span class="keyword">SELECT</span> TIMESTAMPADD(<span class="keyword">YEAR</span>, <span class="number">1</span>, CURDATE());</span><br></pre></td></tr></table></figure>
<h3 id="TIMESTAMPDIFF-å‡½æ•°"><a href="#TIMESTAMPDIFF-å‡½æ•°" class="headerlink" title="TIMESTAMPDIFF() å‡½æ•°"></a><code>TIMESTAMPDIFF()</code> å‡½æ•°</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> TIMESTAMPDIFF(<span class="keyword">SECOND</span>, CURDATE(), ADDDATE(CURDATE(), <span class="type">INTERVAL</span> <span class="number">3600</span> <span class="keyword">SECOND</span>));</span><br><span class="line"><span class="keyword">SELECT</span> TIMESTAMPDIFF(<span class="keyword">MINUTE</span>, CURDATE(), ADDDATE(CURDATE(), <span class="type">INTERVAL</span> <span class="number">60</span> <span class="keyword">MINUTE</span>));</span><br><span class="line"><span class="keyword">SELECT</span> TIMESTAMPDIFF(<span class="keyword">HOUR</span>, CURDATE(), ADDDATE(CURDATE(), <span class="type">INTERVAL</span> <span class="number">1</span> <span class="keyword">HOUR</span>));</span><br><span class="line"><span class="keyword">SELECT</span> TIMESTAMPDIFF(<span class="keyword">DAY</span>, CURDATE(), ADDDATE(CURDATE(), <span class="type">INTERVAL</span> <span class="number">1</span> <span class="keyword">DAY</span>));</span><br><span class="line"><span class="keyword">SELECT</span> TIMESTAMPDIFF(WEEK, CURDATE(), ADDDATE(CURDATE(), <span class="type">INTERVAL</span> <span class="number">1</span> <span class="keyword">MONTH</span>));</span><br><span class="line"><span class="keyword">SELECT</span> TIMESTAMPDIFF(<span class="keyword">MONTH</span>, CURDATE(), ADDDATE(CURDATE(), <span class="type">INTERVAL</span> <span class="number">1</span> QUARTER));</span><br><span class="line"><span class="keyword">SELECT</span> TIMESTAMPDIFF(<span class="keyword">YEAR</span>, CURDATE(), ADDDATE(CURDATE(), <span class="type">INTERVAL</span> <span class="number">1</span> <span class="keyword">YEAR</span>));</span><br></pre></td></tr></table></figure>
<h3 id="TO-DAYS-å‡½æ•°"><a href="#TO-DAYS-å‡½æ•°" class="headerlink" title="TO_DAYS() å‡½æ•°"></a><code>TO_DAYS()</code> å‡½æ•°</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> TO_DAYS(CURDATE());</span><br><span class="line"><span class="keyword">SELECT</span> TO_DAYS(<span class="string">&#x27;19-01-01&#x27;</span>);</span><br><span class="line"><span class="keyword">SELECT</span> TO_DAYS(NOW());</span><br><span class="line"><span class="keyword">SELECT</span> TO_DAYS(<span class="string">&#x27;0000-01-01&#x27;</span>);</span><br><span class="line"><span class="keyword">SELECT</span> TO_DAYS(<span class="string">&#x27;0000-00-00&#x27;</span>);</span><br></pre></td></tr></table></figure>
<h3 id="WEEK-å‡½æ•°"><a href="#WEEK-å‡½æ•°" class="headerlink" title="WEEK() å‡½æ•°"></a><code>WEEK()</code> å‡½æ•°</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> WEEK(CURDATE());</span><br><span class="line"><span class="keyword">SELECT</span> WEEK(<span class="built_in">CURRENT_DATE</span>());</span><br><span class="line"><span class="keyword">SELECT</span> WEEK(<span class="built_in">CURRENT_TIMESTAMP</span>());</span><br><span class="line"><span class="keyword">SELECT</span> WEEK(NOW());</span><br><span class="line"><span class="keyword">SELECT</span> WEEK(<span class="built_in">LOCALTIME</span>());</span><br><span class="line"><span class="keyword">SELECT</span> WEEK(<span class="built_in">LOCALTIMESTAMP</span>());</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="WEEKDAY-å‡½æ•°"><a href="#WEEKDAY-å‡½æ•°" class="headerlink" title="WEEKDAY() å‡½æ•°"></a><code>WEEKDAY()</code> å‡½æ•°</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> WEEKDAY(CURDATE());</span><br><span class="line"><span class="keyword">SELECT</span> WEEKDAY(<span class="built_in">CURRENT_DATE</span>());</span><br><span class="line"><span class="keyword">SELECT</span> WEEKDAY(<span class="built_in">CURRENT_TIMESTAMP</span>());</span><br><span class="line"><span class="keyword">SELECT</span> WEEKDAY(NOW());</span><br><span class="line"><span class="keyword">SELECT</span> WEEKDAY(<span class="built_in">LOCALTIME</span>());</span><br><span class="line"><span class="keyword">SELECT</span> WEEKDAY(<span class="built_in">LOCALTIMESTAMP</span>());</span><br></pre></td></tr></table></figure>
<h3 id="WEEKOFYEAR-å‡½æ•°"><a href="#WEEKOFYEAR-å‡½æ•°" class="headerlink" title="WEEKOFYEAR() å‡½æ•°"></a><code>WEEKOFYEAR()</code> å‡½æ•°</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> WEEKOFYEAR(CURDATE());</span><br><span class="line"><span class="keyword">SELECT</span> WEEKOFYEAR(<span class="built_in">CURRENT_DATE</span>());</span><br><span class="line"><span class="keyword">SELECT</span> WEEKOFYEAR(<span class="built_in">CURRENT_TIMESTAMP</span>());</span><br><span class="line"><span class="keyword">SELECT</span> WEEKOFYEAR(NOW());</span><br><span class="line"><span class="keyword">SELECT</span> WEEKOFYEAR(<span class="built_in">LOCALTIME</span>());</span><br><span class="line"><span class="keyword">SELECT</span> WEEKOFYEAR(<span class="built_in">LOCALTIMESTAMP</span>());</span><br></pre></td></tr></table></figure>
<h3 id="YEAR-å‡½æ•°"><a href="#YEAR-å‡½æ•°" class="headerlink" title="YEAR() å‡½æ•°"></a><code>YEAR()</code> å‡½æ•°</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">YEAR</span>(CURDATE());</span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">YEAR</span>(<span class="built_in">CURRENT_DATE</span>());</span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">YEAR</span>(<span class="built_in">CURRENT_TIMESTAMP</span>());</span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">YEAR</span>(NOW());</span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">YEAR</span>(<span class="built_in">LOCALTIME</span>());</span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">YEAR</span>(<span class="built_in">LOCALTIMESTAMP</span>());</span><br></pre></td></tr></table></figure>
<h3 id="YEARWEEK-å‡½æ•°"><a href="#YEARWEEK-å‡½æ•°" class="headerlink" title="YEARWEEK() å‡½æ•°"></a><code>YEARWEEK()</code> å‡½æ•°</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> YEARWEEK(CURDATE());</span><br><span class="line"><span class="keyword">SELECT</span> YEARWEEK(<span class="built_in">CURRENT_DATE</span>());</span><br><span class="line"><span class="keyword">SELECT</span> YEARWEEK(<span class="built_in">CURRENT_TIMESTAMP</span>());</span><br><span class="line"><span class="keyword">SELECT</span> YEARWEEK(NOW());</span><br><span class="line"><span class="keyword">SELECT</span> YEARWEEK(<span class="built_in">LOCALTIME</span>());</span><br><span class="line"><span class="keyword">SELECT</span> YEARWEEK(<span class="built_in">LOCALTIMESTAMP</span>());</span><br></pre></td></tr></table></figure>
<h3 id="UTC-DATE-UTC-TIME-UTC-TIMESTAMP-å‡½æ•°"><a href="#UTC-DATE-UTC-TIME-UTC-TIMESTAMP-å‡½æ•°" class="headerlink" title="UTC_DATE(), UTC_TIME(), UTC_TIMESTAMP() å‡½æ•°"></a><code>UTC_DATE()</code>, <code>UTC_TIME()</code>, <code>UTC_TIMESTAMP()</code> å‡½æ•°</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> UTC_DATE();</span><br><span class="line"><span class="keyword">SELECT</span> UTC_TIME();</span><br><span class="line"><span class="keyword">SELECT</span> UTC_TIMESTAMP();</span><br></pre></td></tr></table></figure>
<h2 id="æ—¥æœŸæ—¶é—´å’Œæ—¶é—´æˆ³è½¬æ¢"><a href="#æ—¥æœŸæ—¶é—´å’Œæ—¶é—´æˆ³è½¬æ¢" class="headerlink" title="æ—¥æœŸæ—¶é—´å’Œæ—¶é—´æˆ³è½¬æ¢"></a>æ—¥æœŸæ—¶é—´å’Œæ—¶é—´æˆ³è½¬æ¢</h2><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="operator">/</span><span class="operator">/</span> å½“å‰æ—¥æœŸæ—¶é—´è½¬æ¢ä¸ºæ—¶é—´æˆ³</span><br><span class="line"><span class="keyword">SELECT</span> UNIX_TIMESTAMP(NOW());</span><br><span class="line"></span><br><span class="line"><span class="operator">/</span><span class="operator">/</span> æ—¶é—´æˆ³è½¬æ¢ä¸ºæ—¥æœŸæ—¶é—´</span><br><span class="line"><span class="keyword">SELECT</span> FROM_UNIXTIME(<span class="string">&#x27;1478793600&#x27;</span>);</span><br></pre></td></tr></table></figure>
<h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><ul>
<li><a href="https://www.techonthenet.com/mysql/functions/adddate.php">Date/Time Functions</a></li>
<li><a href="http://www.w3resource.com/mysql/date-and-time-functions/date-and-time-functions.php">MySQL Date and Time functions</a></li>
<li><a href="https://www.tutorialspoint.com/mysql/mysql-date-time-functions.htm">MySQL Date and Time Functions</a></li>
</ul>
]]></content>
      <categories>
        <category>mysql</category>
      </categories>
      <tags>
        <tag>mysql</tag>
      </tags>
  </entry>
  <entry>
    <title>MySQL éš”ç¦»çº§åˆ«åŠå…¶è„è¯»ä¸å¯é‡å¤è¯»å¹»è¯»</title>
    <url>/2019/11/07/mysql-isolation-level/</url>
    <content><![CDATA[<p><img src="/images/2019/201911071832.jpg" alt="201911071832.jpg"></p>
<p>ğŸ“ MySQL ä¸­ï¼ŒInnoDB æ‰€æä¾›çš„äº‹åŠ¡ç¬¦åˆ ACID çš„è¦æ±‚ï¼Œè€Œäº‹åŠ¡é€šè¿‡äº‹åŠ¡æ—¥å¿—ä¸­çš„ <code>redo log</code> å’Œ <code>undo log</code> æ»¡è¶³äº†åŸå­æ€§ã€ä¸€è‡´æ€§ã€æŒä¹…æ€§ï¼Œäº‹åŠ¡è¿˜ä¼šé€šè¿‡é”æœºåˆ¶æ»¡è¶³éš”ç¦»æ€§ï¼Œåœ¨ InnoDB å­˜å‚¨å¼•æ“ä¸­ï¼Œæœ‰ä¸åŒçš„éš”ç¦»çº§åˆ«ï¼Œå®ƒä»¬æœ‰ç€ä¸åŒçš„éš”ç¦»æ€§ã€‚</p>
<span id="more"></span>
<h1 id="äº‹åŠ¡çš„ç‰¹æ€§"><a href="#äº‹åŠ¡çš„ç‰¹æ€§" class="headerlink" title="äº‹åŠ¡çš„ç‰¹æ€§"></a>äº‹åŠ¡çš„ç‰¹æ€§</h1><ul>
<li><strong>åŸå­æ€§</strong>ï¼ˆ<strong><code>Atomicity</code></strong> - [ËŒÃ¦tÉ™ËˆmÉªsÉ™ti] ï¼‰ï¼šä¸€ä¸ªäº‹åŠ¡ï¼ˆTransactionï¼‰ä¸­çš„æ‰€æœ‰æ“ä½œï¼Œè¦ä¹ˆå…¨éƒ¨å®Œæˆï¼Œè¦ä¹ˆå…¨éƒ¨ä¸å®Œæˆï¼Œä¸ä¼šç»“æŸåœ¨ä¸­é—´æŸä¸ªç¯èŠ‚ã€‚äº‹åŠ¡åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­å‘ç”Ÿé”™è¯¯ï¼Œä¼šè¢«å›æ»šï¼ˆRollbackï¼‰åˆ°äº‹åŠ¡å¼€å§‹å‰çš„çŠ¶æ€ï¼Œå°±åƒè¿™ä¸ªäº‹åŠ¡ä»æ¥æ²¡æœ‰æ‰§è¡Œè¿‡ä¸€æ ·ã€‚å³æŒ‡å¤„äºåŒä¸€ä¸ªäº‹åŠ¡ä¸­çš„å¤šæ¡è¯­å¥æ˜¯ä¸å¯åˆ†å‰²çš„</li>
<li><strong>ä¸€è‡´æ€§</strong>ï¼ˆ<strong><code>Consistency</code></strong> - [kÉ™nËˆsÉªstÉ™nsi]ï¼‰ï¼šåœ¨äº‹åŠ¡å¼€å§‹ä¹‹å‰å’Œäº‹åŠ¡ç»“æŸä»¥åï¼Œæ•°æ®åº“çš„å®Œæ•´æ€§æ²¡æœ‰è¢«ç ´åã€‚è¿™è¡¨ç¤ºå†™å…¥çš„èµ„æ–™å¿…é¡»å®Œå…¨ç¬¦åˆæ‰€æœ‰çš„é¢„è®¾è§„åˆ™ï¼Œè¿™åŒ…å«èµ„æ–™çš„ç²¾ç¡®åº¦ã€ä¸²è”æ€§ä»¥åŠåç»­æ•°æ®åº“å¯ä»¥è‡ªå‘æ€§åœ°å®Œæˆé¢„å®šçš„å·¥ä½œã€‚å³äº‹åŠ¡å¿…é¡»ä½¿æ•°æ®åº“ä»ä¸€ä¸ªä¸€è‡´æ€§çŠ¶æ€å˜æ¢åˆ°å¦å¤–ä¸€ä¸ªä¸€è‡´æ€§çŠ¶æ€</li>
<li><strong>éš”ç¦»æ€§</strong>ï¼ˆ<strong><code>Isolation</code></strong> - [ËŒaÉªsÉ™ËˆleÉªÊƒn]ï¼‰ï¼šæ•°æ®åº“å…è®¸å¤šä¸ªå¹¶å‘äº‹åŠ¡åŒæ—¶å¯¹å…¶æ•°æ®è¿›è¡Œè¯»å†™å’Œä¿®æ”¹çš„èƒ½åŠ›ï¼Œéš”ç¦»æ€§å¯ä»¥é˜²æ­¢å¤šä¸ªäº‹åŠ¡å¹¶å‘æ‰§è¡Œæ—¶ç”±äºäº¤å‰æ‰§è¡Œè€Œå¯¼è‡´æ•°æ®çš„ä¸ä¸€è‡´ã€‚å³æŒ‡å¤šçº¿ç¨‹ç¯å¢ƒä¸‹ï¼Œä¸€ä¸ªçº¿ç¨‹ä¸­çš„äº‹åŠ¡ä¸èƒ½è¢«å…¶ä»–çº¿ç¨‹ä¸­çš„äº‹åŠ¡æ‰“æ‰°</li>
<li><strong>æŒä¹…æ€§</strong>ï¼ˆ<strong><code>Durability</code></strong> - [dÉ™rÉ™ËˆbÉªlÉªti]ï¼‰ï¼šäº‹åŠ¡å¤„ç†ç»“æŸåï¼Œå¯¹æ•°æ®çš„ä¿®æ”¹å°±æ˜¯æ°¸ä¹…çš„ï¼Œå³ä¾¿ç³»ç»Ÿæ•…éšœä¹Ÿä¸ä¼šä¸¢å¤±ã€‚å³äº‹åŠ¡ä¸€æ—¦æäº¤ï¼Œå°±åº”è¯¥è¢«æ°¸ä¹…ä¿å­˜èµ·æ¥</li>
</ul>
<h1 id="äº‹åŠ¡çš„ç»„æˆéƒ¨åˆ†"><a href="#äº‹åŠ¡çš„ç»„æˆéƒ¨åˆ†" class="headerlink" title="äº‹åŠ¡çš„ç»„æˆéƒ¨åˆ†"></a>äº‹åŠ¡çš„ç»„æˆéƒ¨åˆ†</h1><blockquote>
<p>é¡ºä¾¿æä¸€ä¸‹ DQLï¼ˆæ•°æ®æŸ¥è¯¢è¯­è¨€ï¼šData Query Languageï¼‰ã€‚</p>
</blockquote>
<ul>
<li>ä¸€ä¸ªæˆ–å¤šä¸ª DMLï¼ˆ<code>Data Manipulation Language</code>ï¼‰ è¯­å¥ï¼Œæ¯”å¦‚ï¼šINSERTã€UPDATEã€SELECTã€DELETE ç­‰</li>
<li>ä¸€ä¸ª DDLï¼ˆæ•°æ®å®šä¹‰è¯­è¨€ï¼š<code>Data Definition Language</code>ï¼‰è¯­å¥ï¼Œæ¯”å¦‚ï¼šCREATEã€ALTERã€DROP ç­‰</li>
<li>ä¸€ä¸ª DCLï¼ˆæ•°æ®æ§åˆ¶è¯­è¨€ï¼š<code>Data Control Language</code>ï¼‰è¯­å¥ï¼Œæ¯”å¦‚ï¼šGRANTã€DENYã€REVOKE ç­‰</li>
</ul>
<h1 id="ä¸éš”ç¦»äº‹åŠ¡å¸¦æ¥çš„é—®é¢˜"><a href="#ä¸éš”ç¦»äº‹åŠ¡å¸¦æ¥çš„é—®é¢˜" class="headerlink" title="ä¸éš”ç¦»äº‹åŠ¡å¸¦æ¥çš„é—®é¢˜"></a>ä¸éš”ç¦»äº‹åŠ¡å¸¦æ¥çš„é—®é¢˜</h1><ul>
<li>è„è¯»ï¼ˆ<code>Drity Read</code>ï¼‰ï¼šä¸€ä¸ªäº‹åŠ¡è¯»å–åˆ°å¦ä¸€ä¸ªäº‹åŠ¡æœªæäº¤çš„æ•°æ®ï¼Œä¾§é‡ç‚¹åœ¨ <strong>äº‹åŠ¡æœªæäº¤</strong></li>
<li>ä¸å¯é‡å¤è¯»ï¼ˆ<code>Non-Repeatable Read</code>ï¼‰ï¼šä¸€ä¸ªäº‹åŠ¡å¯¹åŒä¸€è¡Œæ•°æ®é‡å¤è¯»å–ä¸¤æ¬¡ï¼Œä½†å¾—åˆ°çš„ç»“æœä¸åŒï¼Œä¾§é‡ç‚¹åœ¨ <strong>æ›´æ–°ä¿®æ”¹</strong></li>
<li>å¹»è¯»æˆ–è™šè¯»ï¼ˆ<code>Phantom Read</code>ï¼‰ï¼šä¸€ä¸ªäº‹åŠ¡æ‰§è¡Œä¸¤æ¬¡æŸ¥è¯¢ï¼Œç¬¬äºŒæ¬¡æŸ¥è¯¢æ—¶ï¼Œè«åçš„å¤šå‡ºäº†ä¸€äº›ä¹‹å‰ä¸å­˜åœ¨æ•°æ®ï¼Œæˆ–è€…è«åçš„ä¸è§äº†ä¸€äº›æ•°æ®ï¼Œä¾§é‡ç‚¹åœ¨ <strong>æ–°å¢åˆ é™¤</strong></li>
<li>ä¸¢å¤±æ›´æ–°ï¼ˆ<code>Lost Update</code>ï¼‰ï¼šä¸¤ä¸ªäº‹åŠ¡åŒæ—¶æ›´æ–°ä¸€è¡Œæ•°æ®ï¼Œåæäº¤ï¼ˆæˆ–æ’¤é”€ï¼‰çš„äº‹åŠ¡å°†ä¹‹å‰äº‹åŠ¡æäº¤çš„æ•°æ®è¦†ç›–äº†</li>
</ul>
<p>ä¸¢å¤±æ›´æ–°å¯åˆ†ä¸ºä¸¤ç±»ï¼Œåˆ†åˆ«æ˜¯ç¬¬ä¸€ç±»ä¸¢å¤±æ›´æ–°å’Œç¬¬äºŒç±»ä¸¢å¤±æ›´æ–°ï¼š</p>
<ul>
<li>ç¬¬ä¸€ç±»ä¸¢å¤±æ›´æ–°ï¼šæŒ‡ä¸¤ä¸ªäº‹åŠ¡åŒæ—¶æ“ä½œåŒä¸€ä¸ªæ•°æ®æ—¶ï¼Œå½“ç¬¬ä¸€ä¸ªäº‹åŠ¡æ’¤é”€æ—¶ï¼ŒæŠŠå·²ç»æäº¤çš„ç¬¬äºŒä¸ªäº‹åŠ¡çš„æ›´æ–°æ•°æ®è¦†ç›–äº†ï¼Œç¬¬äºŒä¸ªäº‹åŠ¡å°±é€ æˆäº†æ•°æ®ä¸¢å¤±</li>
<li>ç¬¬äºŒç±»ä¸¢å¤±æ›´æ–°ï¼šæŒ‡å½“ä¸¤ä¸ªäº‹åŠ¡åŒæ—¶æ“ä½œåŒä¸€ä¸ªæ•°æ®æ—¶ï¼Œç¬¬ä¸€ä¸ªäº‹åŠ¡å°†ä¿®æ”¹ç»“æœæˆåŠŸæäº¤åï¼Œå¯¹ç¬¬äºŒä¸ªäº‹åŠ¡å·²ç»æäº¤çš„ä¿®æ”¹ç»“æœè¿›è¡Œäº†è¦†ç›–ï¼Œå¯¹ç¬¬äºŒä¸ªäº‹åŠ¡é€ æˆäº†æ•°æ®ä¸¢å¤±</li>
</ul>
<h1 id="äº‹åŠ¡çš„éš”ç¦»çº§åˆ«"><a href="#äº‹åŠ¡çš„éš”ç¦»çº§åˆ«" class="headerlink" title="äº‹åŠ¡çš„éš”ç¦»çº§åˆ«"></a>äº‹åŠ¡çš„éš”ç¦»çº§åˆ«</h1><ul>
<li>è¯»æœªæäº¤ï¼ˆ<code>Read Uncommitted</code>ï¼‰ï¼šä¸€ä¸ªäº‹åŠ¡åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œæ—¢å¯ä»¥è®¿é—®å…¶ä»–äº‹åŠ¡æœªæäº¤çš„æ–°æ’å…¥çš„æ•°æ®ï¼Œåˆå¯ä»¥è®¿é—®æœªæäº¤çš„ä¿®æ”¹æ•°æ®ã€‚å¦‚æœä¸€ä¸ªäº‹åŠ¡å·²ç»å¼€å§‹å†™æ•°æ®ï¼Œåˆ™å¦å¤–ä¸€ä¸ªäº‹åŠ¡ä¸å…è®¸åŒæ—¶è¿›è¡Œå†™æ“ä½œï¼Œä½†å…è®¸å…¶ä»–äº‹åŠ¡è¯»æ­¤è¡Œæ•°æ®ï¼Œå³ä¸€ä¸ªäº‹åŠ¡è¯»å–åˆ°å¦ä¸€ä¸ªäº‹åŠ¡ä¸­æœªæäº¤çš„æ•°æ®ã€‚<strong>æ­¤éš”ç¦»çº§åˆ«å¯é˜²æ­¢ä¸¢å¤±æ›´æ–°</strong></li>
<li>è¯»å·²æäº¤ï¼ˆ<code>Read Committed</code>ï¼‰ï¼šä¸€ä¸ªäº‹åŠ¡åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œæ—¢å¯ä»¥è®¿é—®å…¶ä»–äº‹åŠ¡æˆåŠŸæäº¤çš„æ–°æ’å…¥çš„æ•°æ®ï¼Œåˆå¯ä»¥è®¿é—®æˆåŠŸä¿®æ”¹çš„æ•°æ®ã€‚è¯»å–æ•°æ®çš„äº‹åŠ¡å…è®¸å…¶ä»–äº‹åŠ¡ç»§ç»­è®¿é—®è¯¥è¡Œæ•°æ®ï¼Œä½†æ˜¯æœªæäº¤çš„å†™äº‹åŠ¡å°†ä¼šç¦æ­¢å…¶ä»–äº‹åŠ¡è®¿é—®è¯¥è¡Œï¼Œå³ä¸€ä¸ªäº‹åŠ¡è¯»å–åˆ°å¦ä¸€ä¸ªäº‹åŠ¡ä¸­å·²æäº¤çš„æ•°æ®ã€‚<strong>æ­¤éš”ç¦»çº§åˆ«å¯æœ‰æ•ˆé˜²æ­¢è„è¯»</strong></li>
<li>å¯é‡å¤è¯»ï¼ˆ<code>Repeatable Read</code>ï¼‰ï¼šä¸€ä¸ªäº‹åŠ¡åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œå¯ä»¥è®¿é—®å…¶ä»–äº‹åŠ¡æˆåŠŸæäº¤çš„æ–°æ’å…¥çš„æ•°æ®ï¼Œä½†ä¸å¯ä»¥è®¿é—®æˆåŠŸä¿®æ”¹çš„æ•°æ®ã€‚è¯»å–æ•°æ®çš„äº‹åŠ¡å°†ä¼šç¦æ­¢å†™äº‹åŠ¡ï¼ˆä½†å…è®¸è¯»äº‹åŠ¡ï¼‰ï¼Œå†™äº‹åŠ¡åˆ™ç¦æ­¢ä»»ä½•å…¶ä»–äº‹åŠ¡ï¼Œå³ä¸€ä¸ªäº‹åŠ¡å¯ä»¥é‡å¤è¯»ï¼Œæ¯æ¬¡è¯»å–çš„ç»“æœé›†éƒ½ç›¸åŒï¼Œè€Œä¸ç®¡å…¶ä»–äº‹åŠ¡æœ‰æ²¡æœ‰æäº¤ã€‚<strong>æ­¤éš”ç¦»çº§åˆ«å¯æœ‰æ•ˆé˜²æ­¢ä¸å¯é‡å¤è¯»å’Œè„è¯»</strong></li>
<li>å¯ä¸²è¡ŒåŒ–ï¼ˆ<code>Serializable</code>ï¼‰ï¼šæä¾›ä¸¥æ ¼çš„äº‹åŠ¡éš”ç¦»ã€‚å®ƒè¦æ±‚äº‹åŠ¡åºåˆ—åŒ–æ‰§è¡Œï¼Œäº‹åŠ¡åªèƒ½ä¸€ä¸ªæ¥ç€ä¸€ä¸ªåœ°æ‰§è¡Œï¼Œä¸èƒ½å¹¶å‘æ‰§è¡Œã€‚<strong>æ­¤éš”ç¦»çº§åˆ«å¯æœ‰æ•ˆé˜²æ­¢è„è¯»ã€ä¸å¯é‡å¤è¯»å’Œå¹»è¯»</strong>ã€‚ä½†è¿™ä¸ªçº§åˆ«å¯èƒ½å¯¼è‡´å¤§é‡çš„è¶…æ—¶ç°è±¡å’Œé”ç«äº‰ï¼Œåœ¨å®é™…åº”ç”¨ä¸­å¾ˆå°‘ä½¿ç”¨</li>
</ul>
<p>éš”ç¦»çº§åˆ«è¡¨ï¼ˆçº§åˆ«è¶Šé«˜ï¼Œæ•°æ®è¶Šå®‰å…¨ï¼Œä½†æ€§èƒ½è¶Šä½ï¼‰ï¼š</p>
<table>
<thead>
<tr>
<th>éš”ç¦»çº§åˆ«</th>
<th>è„è¯»</th>
<th>ä¸å¯é‡å¤è¯»</th>
<th>å¹»è¯»</th>
</tr>
</thead>
<tbody>
<tr>
<td>è¯»æœªæäº¤</td>
<td>æœ‰å¯èƒ½</td>
<td>æœ‰å¯èƒ½</td>
<td>æœ‰å¯èƒ½</td>
</tr>
<tr>
<td>è¯»å·²æäº¤</td>
<td>ä¸å¯èƒ½</td>
<td>æœ‰å¯èƒ½</td>
<td>æœ‰å¯èƒ½</td>
</tr>
<tr>
<td>å¯é‡å¤è¯»</td>
<td>ä¸å¯èƒ½</td>
<td>ä¸å¯èƒ½</td>
<td>æœ‰å¯èƒ½</td>
</tr>
<tr>
<td>å¯ä¸²è¡ŒåŒ–</td>
<td>ä¸å¯èƒ½</td>
<td>ä¸å¯èƒ½</td>
<td>ä¸å¯èƒ½</td>
</tr>
</tbody>
</table>
<h1 id="äº‹åŠ¡å¤„ç†çš„æ–¹å¼"><a href="#äº‹åŠ¡å¤„ç†çš„æ–¹å¼" class="headerlink" title="äº‹åŠ¡å¤„ç†çš„æ–¹å¼"></a>äº‹åŠ¡å¤„ç†çš„æ–¹å¼</h1><h2 id="æ˜¾ç¤ºå±€éƒ¨è®¾ç½®"><a href="#æ˜¾ç¤ºå±€éƒ¨è®¾ç½®" class="headerlink" title="æ˜¾ç¤ºå±€éƒ¨è®¾ç½®"></a>æ˜¾ç¤ºå±€éƒ¨è®¾ç½®</h2><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"># å¼€å¯ä¸€ä¸ªäº‹åŠ¡</span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line"></span><br><span class="line"># äº‹åŠ¡å›æ»š</span><br><span class="line"><span class="keyword">ROLLBACK</span></span><br><span class="line"></span><br><span class="line"># æäº¤äº‹åŠ¡</span><br><span class="line"><span class="keyword">COMMIT</span></span><br></pre></td></tr></table></figure>
<h2 id="éšå¼å…¨å±€è®¾ç½®"><a href="#éšå¼å…¨å±€è®¾ç½®" class="headerlink" title="éšå¼å…¨å±€è®¾ç½®"></a>éšå¼å…¨å±€è®¾ç½®</h2><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"># ç¦æ­¢è‡ªåŠ¨æäº¤</span><br><span class="line"><span class="keyword">SET</span> AUTOCOMMIT<span class="operator">=</span><span class="number">0</span></span><br><span class="line"></span><br><span class="line"># å¼€å¯è‡ªåŠ¨æäº¤</span><br><span class="line"><span class="keyword">SET</span> AUTOCOMMIT<span class="operator">=</span><span class="number">1</span></span><br></pre></td></tr></table></figure>
<h1 id="éš”ç¦»çº§åˆ«æ“ä½œ"><a href="#éš”ç¦»çº§åˆ«æ“ä½œ" class="headerlink" title="éš”ç¦»çº§åˆ«æ“ä½œ"></a>éš”ç¦»çº§åˆ«æ“ä½œ</h1><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// æŸ¥çœ‹äº‹åŠ¡éš”ç¦»çº§åˆ«</span><br><span class="line">mysql root@localhost:mysql&gt; select @@transaction_isolation;</span><br><span class="line">+-------------------------+</span><br><span class="line">| @@transaction_isolation |</span><br><span class="line">+-------------------------+</span><br><span class="line">| REPEATABLE-READ         |</span><br><span class="line">+-------------------------+</span><br><span class="line">1 row <span class="keyword">in</span> <span class="built_in">set</span></span><br><span class="line">Time: 0.017s</span><br><span class="line"></span><br><span class="line">// è®¾ç½®å½“å‰ä¼šè¯éš”ç¦»çº§åˆ«ä¸ºè¯»æœªæäº¤</span><br><span class="line">mysql root@localhost:mysql&gt; <span class="built_in">set</span> session transaction isolation level <span class="built_in">read</span> uncommitted;</span><br><span class="line">Query OK, 0 rows affected</span><br><span class="line">Time: 0.043s</span><br><span class="line"></span><br><span class="line">// è®¾ç½®å½“å‰ä¼šè¯éš”ç¦»çº§åˆ«ä¸ºè¯»å·²æäº¤</span><br><span class="line">mysql root@localhost:mysql&gt; <span class="built_in">set</span> session transaction isolation level <span class="built_in">read</span> committed;</span><br><span class="line">Query OK, 0 rows affected</span><br><span class="line">Time: 0.043s</span><br><span class="line"></span><br><span class="line">// è®¾ç½®å½“å‰ä¼šè¯éš”ç¦»çº§åˆ«ä¸ºå¯é‡å¤è¯»</span><br><span class="line">mysql root@localhost:mysql&gt; <span class="built_in">set</span> session transaction isolation level repeatable <span class="built_in">read</span>;</span><br><span class="line">Query OK, 0 rows affected</span><br><span class="line">Time: 0.043s</span><br><span class="line"></span><br><span class="line">// è®¾ç½®å½“å‰ä¼šè¯éš”ç¦»çº§åˆ«ä¸ºå¯ä¸²è¡ŒåŒ–</span><br><span class="line">mysql root@localhost:mysql&gt; <span class="built_in">set</span> session transaction isolation level serializable;</span><br><span class="line">Query OK, 0 rows affected</span><br><span class="line">Time: 0.043s</span><br><span class="line"></span><br><span class="line">// æŸ¥çœ‹å½“å‰ Session çš„äº‹åŠ¡éš”ç¦»çº§åˆ«</span><br><span class="line">mysql root@localhost:mysql&gt; show variables like <span class="string">&#x27;%transaction_isolation%&#x27;</span>;</span><br><span class="line">+-----------------------+------------------+</span><br><span class="line">| Variable_name         | Value            |</span><br><span class="line">+-----------------------+------------------+</span><br><span class="line">| transaction_isolation | READ-UNCOMMITTED |</span><br><span class="line">+-----------------------+------------------+</span><br><span class="line">1 row <span class="keyword">in</span> <span class="built_in">set</span></span><br><span class="line">Time: 0.067s</span><br><span class="line"></span><br><span class="line">// æŸ¥çœ‹å…¨å±€çš„äº‹åŠ¡éš”ç¦»çº§åˆ«</span><br><span class="line">mysql root@localhost:mysql&gt; show global variables like <span class="string">&#x27;%transaction_isolation%&#x27;</span>;</span><br><span class="line">+-----------------------+-----------------+</span><br><span class="line">| Variable_name         | Value           |</span><br><span class="line">+-----------------------+-----------------+</span><br><span class="line">| transaction_isolation | REPEATABLE-READ |</span><br><span class="line">+-----------------------+-----------------+</span><br><span class="line">1 row <span class="keyword">in</span> <span class="built_in">set</span></span><br><span class="line">Time: 0.016s</span><br></pre></td></tr></table></figure>
<p>å®éªŒç¯èŠ‚å¾…ç»­ä¸­ã€‚ã€‚ã€‚</p>
]]></content>
      <categories>
        <category>mysql</category>
      </categories>
      <tags>
        <tag>mysql</tag>
      </tags>
  </entry>
  <entry>
    <title>MySQL è”åˆæŸ¥è¯¢</title>
    <url>/2018/01/20/mysql-join-query/</url>
    <content><![CDATA[<p>è”åˆæŸ¥è¯¢è¯­å¥ç‰µæ‰¯åˆ°å¤šå¼ è¡¨ï¼Œå¤šè¡¨æŸ¥è¯¢æœ‰å¤šç§è¯­æ³•ï¼Œå¤šç§ä½¿ç”¨åœºæ™¯ï¼Œä¸åŒçš„åœºæ™¯éœ€è¦ä¸åŒçš„è¯­æ³•ã€‚</p>
<span id="more"></span>
<h1 id="æ•°æ®å‡†å¤‡"><a href="#æ•°æ®å‡†å¤‡" class="headerlink" title="æ•°æ®å‡†å¤‡"></a>æ•°æ®å‡†å¤‡</h1><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> Navicat Premium Data Transfer</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> Source Server         : localhost</span></span><br><span class="line"><span class="comment"> Source Server Type    : MySQL</span></span><br><span class="line"><span class="comment"> Source Server Version : 50718</span></span><br><span class="line"><span class="comment"> Source Host           : 127.0.0.1</span></span><br><span class="line"><span class="comment"> Source Database       : test</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> Target Server Type    : MySQL</span></span><br><span class="line"><span class="comment"> Target Server Version : 50718</span></span><br><span class="line"><span class="comment"> File Encoding         : utf-8</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> Date: 05/16/2017 08:44:43 AM</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">SET</span> NAMES utf8mb4;</span><br><span class="line"><span class="keyword">SET</span> FOREIGN_KEY_CHECKS <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="comment">--  Table structure for `course`</span></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> IF <span class="keyword">EXISTS</span> `course`;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `course` (</span><br><span class="line">  `id` <span class="type">int</span>(<span class="number">10</span>) unsigned <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT COMMENT <span class="string">&#x27;ä¸»é”® ID&#x27;</span>,</span><br><span class="line">  `title` <span class="type">varchar</span>(<span class="number">50</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;&#x27;</span> COMMENT <span class="string">&#x27;è¯¾ç¨‹æ ‡é¢˜åç§°&#x27;</span>,</span><br><span class="line">  `englishName` <span class="type">varchar</span>(<span class="number">50</span>) <span class="keyword">DEFAULT</span> <span class="string">&#x27;&#x27;</span> COMMENT <span class="string">&#x27;è‹±æ–‡åç§°&#x27;</span>,</span><br><span class="line">  `createdAt` <span class="type">int</span>(<span class="number">10</span>) unsigned <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;0&#x27;</span> COMMENT <span class="string">&#x27;åˆ›å»ºæ—¶é—´æˆ³&#x27;</span>,</span><br><span class="line">  `updatedAt` <span class="type">int</span>(<span class="number">10</span>) unsigned <span class="keyword">DEFAULT</span> <span class="string">&#x27;0&#x27;</span> COMMENT <span class="string">&#x27;æ›´æ–°æ—¶é—´æˆ³&#x27;</span>,</span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY (`id`)</span><br><span class="line">) ENGINE<span class="operator">=</span>InnoDB AUTO_INCREMENT<span class="operator">=</span><span class="number">11</span> <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="comment">--  Records of `course`</span></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="keyword">BEGIN</span>;</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `course` <span class="keyword">VALUES</span> (<span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;è¯­æ–‡&#x27;</span>, <span class="string">&#x27;Chinese&#x27;</span>, <span class="string">&#x27;0&#x27;</span>, <span class="string">&#x27;0&#x27;</span>), (<span class="string">&#x27;2&#x27;</span>, <span class="string">&#x27;æ•°å­¦&#x27;</span>, <span class="string">&#x27;Mathematics&#x27;</span>, <span class="string">&#x27;0&#x27;</span>, <span class="string">&#x27;0&#x27;</span>), (<span class="string">&#x27;3&#x27;</span>, <span class="string">&#x27;è‹±è¯­&#x27;</span>, <span class="string">&#x27;English&#x27;</span>, <span class="string">&#x27;0&#x27;</span>, <span class="string">&#x27;0&#x27;</span>), (<span class="string">&#x27;4&#x27;</span>, <span class="string">&#x27;å†å²&#x27;</span>, <span class="string">&#x27;History&#x27;</span>, <span class="string">&#x27;0&#x27;</span>, <span class="string">&#x27;0&#x27;</span>), (<span class="string">&#x27;5&#x27;</span>, <span class="string">&#x27;æ”¿æ²»&#x27;</span>, <span class="string">&#x27;Politics&#x27;</span>, <span class="string">&#x27;0&#x27;</span>, <span class="string">&#x27;0&#x27;</span>), (<span class="string">&#x27;6&#x27;</span>, <span class="string">&#x27;åœ°ç†&#x27;</span>, <span class="string">&#x27;Geography&#x27;</span>, <span class="string">&#x27;0&#x27;</span>, <span class="string">&#x27;0&#x27;</span>), (<span class="string">&#x27;7&#x27;</span>, <span class="string">&#x27;ç‰©ç†&#x27;</span>, <span class="string">&#x27;Physics&#x27;</span>, <span class="string">&#x27;0&#x27;</span>, <span class="string">&#x27;0&#x27;</span>), (<span class="string">&#x27;8&#x27;</span>, <span class="string">&#x27;åŒ–å­¦&#x27;</span>, <span class="string">&#x27;Chemistry&#x27;</span>, <span class="string">&#x27;0&#x27;</span>, <span class="string">&#x27;0&#x27;</span>), (<span class="string">&#x27;9&#x27;</span>, <span class="string">&#x27;ç”Ÿç‰©&#x27;</span>, <span class="string">&#x27;Biology&#x27;</span>, <span class="string">&#x27;0&#x27;</span>, <span class="string">&#x27;0&#x27;</span>), (<span class="string">&#x27;10&#x27;</span>, <span class="string">&#x27;ä½“è‚²&#x27;</span>, <span class="string">&#x27;Sports&#x27;</span>, <span class="string">&#x27;0&#x27;</span>, <span class="string">&#x27;0&#x27;</span>);</span><br><span class="line"><span class="keyword">COMMIT</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="comment">--  Table structure for `lesson`</span></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> IF <span class="keyword">EXISTS</span> `lesson`;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `lesson` (</span><br><span class="line">  `id` <span class="type">int</span>(<span class="number">10</span>) unsigned <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT COMMENT <span class="string">&#x27;ä¸»é”® ID&#x27;</span>,</span><br><span class="line">  `courseId` <span class="type">int</span>(<span class="number">10</span>) unsigned <span class="keyword">DEFAULT</span> <span class="string">&#x27;0&#x27;</span> COMMENT <span class="string">&#x27;æ‰€å±è¯¾ç¨‹ ID&#x27;</span>,</span><br><span class="line">  `title` <span class="type">varchar</span>(<span class="number">50</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;&#x27;</span> COMMENT <span class="string">&#x27;è¯¾æ—¶æ ‡é¢˜åç§°&#x27;</span>,</span><br><span class="line">  `tags` <span class="type">varchar</span>(<span class="number">255</span>) <span class="keyword">DEFAULT</span> <span class="string">&#x27;&#x27;</span> COMMENT <span class="string">&#x27;æ‰€å±æ ‡ç­¾&#x27;</span>,</span><br><span class="line">  `createdAt` <span class="type">int</span>(<span class="number">10</span>) unsigned <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;0&#x27;</span> COMMENT <span class="string">&#x27;åˆ›å»ºæ—¶é—´æˆ³&#x27;</span>,</span><br><span class="line">  `updatedAt` <span class="type">int</span>(<span class="number">10</span>) unsigned <span class="keyword">DEFAULT</span> <span class="string">&#x27;0&#x27;</span> COMMENT <span class="string">&#x27;æ›´æ–°æ—¶é—´æˆ³&#x27;</span>,</span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY (`id`)</span><br><span class="line">) ENGINE<span class="operator">=</span>InnoDB AUTO_INCREMENT<span class="operator">=</span><span class="number">31</span> <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="comment">--  Records of `lesson`</span></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="keyword">BEGIN</span>;</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `lesson` <span class="keyword">VALUES</span> (<span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;é«˜ä¸­ä¸€å¹´çº§è¯­æ–‡&#x27;</span>, <span class="string">&#x27;é«˜ä¸€è¯­æ–‡&#x27;</span>, <span class="string">&#x27;0&#x27;</span>, <span class="string">&#x27;0&#x27;</span>), (<span class="string">&#x27;2&#x27;</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;é«˜ä¸­äºŒå¹´çº§è¯­æ–‡&#x27;</span>, <span class="string">&#x27;é«˜äºŒè¯­æ–‡&#x27;</span>, <span class="string">&#x27;0&#x27;</span>, <span class="string">&#x27;0&#x27;</span>), (<span class="string">&#x27;3&#x27;</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;é«˜ä¸­ä¸‰å¹´çº§è¯­æ–‡&#x27;</span>, <span class="string">&#x27;é«˜ä¸‰è¯­æ–‡&#x27;</span>, <span class="string">&#x27;0&#x27;</span>, <span class="string">&#x27;0&#x27;</span>), (<span class="string">&#x27;4&#x27;</span>, <span class="string">&#x27;0&#x27;</span>, <span class="string">&#x27;é«˜ä¸­ä¸€å¹´çº§æ•°å­¦&#x27;</span>, <span class="string">&#x27;é«˜ä¸€æ•°å­¦&#x27;</span>, <span class="string">&#x27;0&#x27;</span>, <span class="string">&#x27;0&#x27;</span>), (<span class="string">&#x27;5&#x27;</span>, <span class="string">&#x27;0&#x27;</span>, <span class="string">&#x27;é«˜ä¸­äºŒå¹´çº§æ•°å­¦&#x27;</span>, <span class="string">&#x27;é«˜äºŒæ•°å­¦&#x27;</span>, <span class="string">&#x27;0&#x27;</span>, <span class="string">&#x27;0&#x27;</span>), (<span class="string">&#x27;6&#x27;</span>, <span class="string">&#x27;0&#x27;</span>, <span class="string">&#x27;é«˜ä¸­ä¸‰å¹´çº§æ•°å­¦&#x27;</span>, <span class="string">&#x27;é«˜ä¸‰æ•°å­¦&#x27;</span>, <span class="string">&#x27;0&#x27;</span>, <span class="string">&#x27;0&#x27;</span>), (<span class="string">&#x27;7&#x27;</span>, <span class="string">&#x27;3&#x27;</span>, <span class="string">&#x27;é«˜ä¸­ä¸€å¹´çº§è‹±è¯­&#x27;</span>, <span class="string">&#x27;é«˜ä¸€è‹±è¯­&#x27;</span>, <span class="string">&#x27;0&#x27;</span>, <span class="string">&#x27;0&#x27;</span>), (<span class="string">&#x27;8&#x27;</span>, <span class="string">&#x27;3&#x27;</span>, <span class="string">&#x27;é«˜ä¸­äºŒå¹´çº§è‹±è¯­&#x27;</span>, <span class="string">&#x27;é«˜äºŒè‹±è¯­&#x27;</span>, <span class="string">&#x27;0&#x27;</span>, <span class="string">&#x27;0&#x27;</span>), (<span class="string">&#x27;9&#x27;</span>, <span class="string">&#x27;3&#x27;</span>, <span class="string">&#x27;é«˜ä¸­ä¸‰å¹´çº§è‹±è¯­&#x27;</span>, <span class="string">&#x27;é«˜ä¸‰è‹±è¯­&#x27;</span>, <span class="string">&#x27;0&#x27;</span>, <span class="string">&#x27;0&#x27;</span>), (<span class="string">&#x27;10&#x27;</span>, <span class="string">&#x27;0&#x27;</span>, <span class="string">&#x27;é«˜ä¸­ä¸€å¹´çº§å†å²&#x27;</span>, <span class="string">&#x27;é«˜ä¸€å†å²&#x27;</span>, <span class="string">&#x27;0&#x27;</span>, <span class="string">&#x27;0&#x27;</span>), (<span class="string">&#x27;11&#x27;</span>, <span class="string">&#x27;0&#x27;</span>, <span class="string">&#x27;é«˜ä¸­äºŒå¹´çº§å†å²&#x27;</span>, <span class="string">&#x27;é«˜äºŒå†å²&#x27;</span>, <span class="string">&#x27;0&#x27;</span>, <span class="string">&#x27;0&#x27;</span>), (<span class="string">&#x27;12&#x27;</span>, <span class="string">&#x27;0&#x27;</span>, <span class="string">&#x27;é«˜ä¸­ä¸‰å¹´çº§å†å²&#x27;</span>, <span class="string">&#x27;é«˜ä¸‰å†å²&#x27;</span>, <span class="string">&#x27;0&#x27;</span>, <span class="string">&#x27;0&#x27;</span>), (<span class="string">&#x27;13&#x27;</span>, <span class="string">&#x27;5&#x27;</span>, <span class="string">&#x27;é«˜ä¸­ä¸€å¹´çº§æ”¿æ²»&#x27;</span>, <span class="string">&#x27;é«˜ä¸€æ”¿æ²»&#x27;</span>, <span class="string">&#x27;0&#x27;</span>, <span class="string">&#x27;0&#x27;</span>), (<span class="string">&#x27;14&#x27;</span>, <span class="string">&#x27;5&#x27;</span>, <span class="string">&#x27;é«˜ä¸­äºŒå¹´çº§æ”¿æ²»&#x27;</span>, <span class="string">&#x27;é«˜äºŒæ”¿æ²»&#x27;</span>, <span class="string">&#x27;0&#x27;</span>, <span class="string">&#x27;0&#x27;</span>), (<span class="string">&#x27;15&#x27;</span>, <span class="string">&#x27;5&#x27;</span>, <span class="string">&#x27;é«˜ä¸­ä¸‰å¹´çº§æ”¿æ²»&#x27;</span>, <span class="string">&#x27;é«˜ä¸‰æ”¿æ²»&#x27;</span>, <span class="string">&#x27;0&#x27;</span>, <span class="string">&#x27;0&#x27;</span>), (<span class="string">&#x27;16&#x27;</span>, <span class="string">&#x27;0&#x27;</span>, <span class="string">&#x27;é«˜ä¸­ä¸€å¹´çº§åœ°ç†&#x27;</span>, <span class="string">&#x27;é«˜ä¸€åœ°ç†&#x27;</span>, <span class="string">&#x27;0&#x27;</span>, <span class="string">&#x27;0&#x27;</span>), (<span class="string">&#x27;17&#x27;</span>, <span class="string">&#x27;0&#x27;</span>, <span class="string">&#x27;é«˜ä¸­äºŒå¹´çº§åœ°ç†&#x27;</span>, <span class="string">&#x27;é«˜äºŒåœ°ç†&#x27;</span>, <span class="string">&#x27;0&#x27;</span>, <span class="string">&#x27;0&#x27;</span>), (<span class="string">&#x27;18&#x27;</span>, <span class="string">&#x27;0&#x27;</span>, <span class="string">&#x27;é«˜ä¸­ä¸‰å¹´çº§åœ°ç†&#x27;</span>, <span class="string">&#x27;é«˜ä¸‰åœ°ç†&#x27;</span>, <span class="string">&#x27;0&#x27;</span>, <span class="string">&#x27;0&#x27;</span>), (<span class="string">&#x27;19&#x27;</span>, <span class="string">&#x27;7&#x27;</span>, <span class="string">&#x27;é«˜ä¸­ä¸€å¹´çº§ç‰©ç†&#x27;</span>, <span class="string">&#x27;é«˜ä¸€ç‰©ç†&#x27;</span>, <span class="string">&#x27;0&#x27;</span>, <span class="string">&#x27;0&#x27;</span>), (<span class="string">&#x27;20&#x27;</span>, <span class="string">&#x27;7&#x27;</span>, <span class="string">&#x27;é«˜ä¸­äºŒå¹´çº§ç‰©ç†&#x27;</span>, <span class="string">&#x27;é«˜äºŒç‰©ç†&#x27;</span>, <span class="string">&#x27;0&#x27;</span>, <span class="string">&#x27;0&#x27;</span>), (<span class="string">&#x27;21&#x27;</span>, <span class="string">&#x27;7&#x27;</span>, <span class="string">&#x27;é«˜ä¸­ä¸‰å¹´çº§ç‰©ç†&#x27;</span>, <span class="string">&#x27;é«˜ä¸‰ç‰©ç†&#x27;</span>, <span class="string">&#x27;0&#x27;</span>, <span class="string">&#x27;0&#x27;</span>), (<span class="string">&#x27;22&#x27;</span>, <span class="string">&#x27;0&#x27;</span>, <span class="string">&#x27;é«˜ä¸­ä¸€å¹´çº§åŒ–å­¦&#x27;</span>, <span class="string">&#x27;é«˜ä¸€åŒ–å­¦&#x27;</span>, <span class="string">&#x27;0&#x27;</span>, <span class="string">&#x27;0&#x27;</span>), (<span class="string">&#x27;23&#x27;</span>, <span class="string">&#x27;0&#x27;</span>, <span class="string">&#x27;é«˜ä¸­äºŒå¹´çº§åŒ–å­¦&#x27;</span>, <span class="string">&#x27;é«˜äºŒåŒ–å­¦&#x27;</span>, <span class="string">&#x27;0&#x27;</span>, <span class="string">&#x27;0&#x27;</span>), (<span class="string">&#x27;24&#x27;</span>, <span class="string">&#x27;0&#x27;</span>, <span class="string">&#x27;é«˜ä¸­ä¸‰å¹´çº§åŒ–å­¦&#x27;</span>, <span class="string">&#x27;é«˜ä¸‰åŒ–å­¦&#x27;</span>, <span class="string">&#x27;0&#x27;</span>, <span class="string">&#x27;0&#x27;</span>), (<span class="string">&#x27;25&#x27;</span>, <span class="string">&#x27;9&#x27;</span>, <span class="string">&#x27;é«˜ä¸­ä¸€å¹´çº§ç”Ÿç‰©&#x27;</span>, <span class="string">&#x27;é«˜ä¸€ç”Ÿç‰©&#x27;</span>, <span class="string">&#x27;0&#x27;</span>, <span class="string">&#x27;0&#x27;</span>), (<span class="string">&#x27;26&#x27;</span>, <span class="string">&#x27;9&#x27;</span>, <span class="string">&#x27;é«˜ä¸­äºŒå¹´çº§ç”Ÿç‰©&#x27;</span>, <span class="string">&#x27;é«˜äºŒç”Ÿç‰©&#x27;</span>, <span class="string">&#x27;0&#x27;</span>, <span class="string">&#x27;0&#x27;</span>), (<span class="string">&#x27;27&#x27;</span>, <span class="string">&#x27;9&#x27;</span>, <span class="string">&#x27;é«˜ä¸­ä¸‰å¹´çº§ç”Ÿç‰©&#x27;</span>, <span class="string">&#x27;é«˜ä¸‰ç”Ÿç‰©&#x27;</span>, <span class="string">&#x27;0&#x27;</span>, <span class="string">&#x27;0&#x27;</span>), (<span class="string">&#x27;28&#x27;</span>, <span class="string">&#x27;0&#x27;</span>, <span class="string">&#x27;é«˜ä¸­ä¸€å¹´çº§ä½“è‚²&#x27;</span>, <span class="string">&#x27;é«˜ä¸€ä½“è‚²&#x27;</span>, <span class="string">&#x27;0&#x27;</span>, <span class="string">&#x27;0&#x27;</span>), (<span class="string">&#x27;29&#x27;</span>, <span class="string">&#x27;0&#x27;</span>, <span class="string">&#x27;é«˜ä¸­äºŒå¹´çº§ä½“è‚²&#x27;</span>, <span class="string">&#x27;é«˜äºŒä½“è‚²&#x27;</span>, <span class="string">&#x27;0&#x27;</span>, <span class="string">&#x27;0&#x27;</span>), (<span class="string">&#x27;30&#x27;</span>, <span class="string">&#x27;0&#x27;</span>, <span class="string">&#x27;é«˜ä¸­ä¸‰å¹´çº§ä½“è‚²&#x27;</span>, <span class="string">&#x27;é«˜ä¸‰ä½“è‚²&#x27;</span>, <span class="string">&#x27;0&#x27;</span>, <span class="string">&#x27;0&#x27;</span>);</span><br><span class="line"><span class="keyword">COMMIT</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SET</span> FOREIGN_KEY_CHECKS <span class="operator">=</span> <span class="number">1</span>;</span><br></pre></td></tr></table></figure>
<h1 id="è¿æ¥æŸ¥è¯¢"><a href="#è¿æ¥æŸ¥è¯¢" class="headerlink" title="è¿æ¥æŸ¥è¯¢"></a>è¿æ¥æŸ¥è¯¢</h1><h2 id="INNER-JOIN-å†…è¿æ¥"><a href="#INNER-JOIN-å†…è¿æ¥" class="headerlink" title="INNER JOIN - å†…è¿æ¥"></a>INNER JOIN - å†…è¿æ¥</h2><p><img src="https://inotes.oss-cn-beijing.aliyuncs.com/mysql/201812/mysql-inner-join.png" alt="mysql-inner-join.png"></p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  a.`id`    <span class="keyword">AS</span> courseId,</span><br><span class="line">  a.`title` <span class="keyword">AS</span> courseTitle,</span><br><span class="line">  a.`englishName`,</span><br><span class="line">  b.`id`    <span class="keyword">AS</span> lessonId,</span><br><span class="line">  b.`title` <span class="keyword">AS</span> lessonTitle,</span><br><span class="line">  b.`tags`</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">  test.`course` <span class="keyword">AS</span> a</span><br><span class="line">  <span class="keyword">INNER</span> <span class="keyword">JOIN</span> test.`lesson` <span class="keyword">AS</span> b <span class="keyword">ON</span> a.`id` <span class="operator">=</span> b.`courseId`;</span><br></pre></td></tr></table></figure>
<h2 id="OUTER-JOIN-å¤–è¿æ¥"><a href="#OUTER-JOIN-å¤–è¿æ¥" class="headerlink" title="OUTER JOIN - å¤–è¿æ¥"></a>OUTER JOIN - å¤–è¿æ¥</h2><blockquote>
<p><code>MySQL</code> å¹¶ä¸æ”¯æŒ <code>FULL OUTER JOIN</code> è¯­æ³•ã€‚</p>
</blockquote>
<p><img src="https://inotes.oss-cn-beijing.aliyuncs.com/mysql/201812/mysql-outer-join.png" alt="mysql-outer-join.png"></p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  a.`id`    <span class="keyword">AS</span> courseId,</span><br><span class="line">  a.`title` <span class="keyword">AS</span> courseTitle,</span><br><span class="line">  a.`englishName`,</span><br><span class="line">  b.`id`    <span class="keyword">AS</span> lessonId,</span><br><span class="line">  b.`title` <span class="keyword">AS</span> lessonTitle,</span><br><span class="line">  b.`tags`</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">  test.`course` <span class="keyword">AS</span> a</span><br><span class="line">  <span class="keyword">LEFT</span> <span class="keyword">JOIN</span> test.`lesson` <span class="keyword">AS</span> b <span class="keyword">ON</span> a.`id` <span class="operator">=</span> b.`courseId`</span><br><span class="line"><span class="keyword">UNION</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  a.`id`    <span class="keyword">AS</span> courseId,</span><br><span class="line">  a.`title` <span class="keyword">AS</span> courseTitle,</span><br><span class="line">  a.`englishName`,</span><br><span class="line">  b.`id`    <span class="keyword">AS</span> lessonId,</span><br><span class="line">  b.`title` <span class="keyword">AS</span> lessonTitle,</span><br><span class="line">  b.`tags`</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">  test.`course` <span class="keyword">AS</span> a</span><br><span class="line">  <span class="keyword">RIGHT</span> <span class="keyword">JOIN</span> test.`lesson` <span class="keyword">AS</span> b <span class="keyword">ON</span> a.`id` <span class="operator">=</span> b.`courseId`;</span><br></pre></td></tr></table></figure>
<h2 id="LEFT-JOIN-å·¦è¿æ¥"><a href="#LEFT-JOIN-å·¦è¿æ¥" class="headerlink" title="LEFT JOIN - å·¦è¿æ¥"></a>LEFT JOIN - å·¦è¿æ¥</h2><p><img src="https://inotes.oss-cn-beijing.aliyuncs.com/mysql/201812/mysql-left-join.png" alt="mysql-left-join.png"></p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  a.`id`    <span class="keyword">AS</span> courseId,</span><br><span class="line">  a.`title` <span class="keyword">AS</span> courseTitle,</span><br><span class="line">  a.`englishName`,</span><br><span class="line">  b.`id`    <span class="keyword">AS</span> lessonId,</span><br><span class="line">  b.`title` <span class="keyword">AS</span> lessonTitle,</span><br><span class="line">  b.`tags`</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">  test.`course` <span class="keyword">AS</span> a</span><br><span class="line">  <span class="keyword">LEFT</span> <span class="keyword">JOIN</span> test.`lesson` <span class="keyword">AS</span> b <span class="keyword">ON</span> a.`id` <span class="operator">=</span> b.`courseId`;</span><br></pre></td></tr></table></figure>
<h2 id="RIGHT-JOIN-å³è¿æ¥"><a href="#RIGHT-JOIN-å³è¿æ¥" class="headerlink" title="RIGHT JOIN å³è¿æ¥"></a>RIGHT JOIN å³è¿æ¥</h2><p><img src="https://inotes.oss-cn-beijing.aliyuncs.com/mysql/201812/mysql-right-join.png" alt="mysql-right-join.png"></p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  a.`id`    <span class="keyword">AS</span> courseId,</span><br><span class="line">  a.`title` <span class="keyword">AS</span> courseTitle,</span><br><span class="line">  a.`englishName`,</span><br><span class="line">  b.`id`    <span class="keyword">AS</span> lessonId,</span><br><span class="line">  b.`title` <span class="keyword">AS</span> lessonTitle,</span><br><span class="line">  b.`tags`</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">  test.`course` <span class="keyword">AS</span> a</span><br><span class="line">  <span class="keyword">RIGHT</span> <span class="keyword">JOIN</span> test.`lesson` <span class="keyword">AS</span> b <span class="keyword">ON</span> a.`id` <span class="operator">=</span> b.`courseId`;</span><br></pre></td></tr></table></figure>
<h2 id="LEFT-JOIN-EXCLUDING-INNER-JOIN"><a href="#LEFT-JOIN-EXCLUDING-INNER-JOIN" class="headerlink" title="LEFT JOIN EXCLUDING INNER JOIN"></a>LEFT JOIN EXCLUDING INNER JOIN</h2><p><img src="https://inotes.oss-cn-beijing.aliyuncs.com/mysql/201812/mysql-left-excluding-join.png" alt="mysql-left-excluding-join.png"></p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  a.`id`    <span class="keyword">AS</span> courseId,</span><br><span class="line">  a.`title` <span class="keyword">AS</span> courseTitle,</span><br><span class="line">  a.`englishName`,</span><br><span class="line">  b.`id`    <span class="keyword">AS</span> lessonId,</span><br><span class="line">  b.`title` <span class="keyword">AS</span> lessonTitle,</span><br><span class="line">  b.`tags`</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">  test.`course` <span class="keyword">AS</span> a</span><br><span class="line">  <span class="keyword">LEFT</span> <span class="keyword">JOIN</span> test.`lesson` <span class="keyword">AS</span> b <span class="keyword">ON</span> a.`id` <span class="operator">=</span> b.`courseId`</span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">  b.`id` <span class="keyword">IS</span> <span class="keyword">NULL</span>;</span><br></pre></td></tr></table></figure>
<h2 id="RIGHT-JOIN-EXCLUDING-INNER-JOIN"><a href="#RIGHT-JOIN-EXCLUDING-INNER-JOIN" class="headerlink" title="RIGHT JOIN EXCLUDING INNER JOIN"></a>RIGHT JOIN EXCLUDING INNER JOIN</h2><p><img src="https://inotes.oss-cn-beijing.aliyuncs.com/mysql/201812/mysql-right-excluding-join.png" alt="mysql-right-excluding-join.png"></p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  a.`id`    <span class="keyword">AS</span> courseId,</span><br><span class="line">  a.`title` <span class="keyword">AS</span> courseTitle,</span><br><span class="line">  a.`englishName`,</span><br><span class="line">  b.`id`    <span class="keyword">AS</span> lessonId,</span><br><span class="line">  b.`title` <span class="keyword">AS</span> lessonTitle,</span><br><span class="line">  b.`tags`</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">  test.`course` <span class="keyword">AS</span> a</span><br><span class="line">  <span class="keyword">RIGHT</span> <span class="keyword">JOIN</span> test.`lesson` <span class="keyword">AS</span> b <span class="keyword">ON</span> a.`id` <span class="operator">=</span> b.`courseId`</span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">  a.`id` <span class="keyword">IS</span> <span class="keyword">NULL</span>;</span><br></pre></td></tr></table></figure>
<h2 id="OUTER-JOIN-EXCLUDING-INNER-JOIN"><a href="#OUTER-JOIN-EXCLUDING-INNER-JOIN" class="headerlink" title="OUTER JOIN EXCLUDING INNER JOIN"></a>OUTER JOIN EXCLUDING INNER JOIN</h2><p><img src="https://inotes.oss-cn-beijing.aliyuncs.com/mysql/201812/mysql-outer-excluding-join.png" alt="mysql-outer-excluding-join.png"></p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  a.`id`    <span class="keyword">AS</span> courseId,</span><br><span class="line">  a.`title` <span class="keyword">AS</span> courseTitle,</span><br><span class="line">  a.`englishName`,</span><br><span class="line">  b.`id`    <span class="keyword">AS</span> lessonId,</span><br><span class="line">  b.`title` <span class="keyword">AS</span> lessonTitle,</span><br><span class="line">  b.`tags`</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">  test.`course` <span class="keyword">AS</span> a</span><br><span class="line">  <span class="keyword">LEFT</span> <span class="keyword">JOIN</span> test.`lesson` <span class="keyword">AS</span> b <span class="keyword">ON</span> a.`id` <span class="operator">=</span> b.`courseId`</span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">  b.`courseId` <span class="keyword">IS</span> <span class="keyword">NULL</span></span><br><span class="line"><span class="keyword">UNION</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  a.`id`    <span class="keyword">AS</span> courseId,</span><br><span class="line">  a.`title` <span class="keyword">AS</span> courseTitle,</span><br><span class="line">  a.`englishName`,</span><br><span class="line">  b.`id`    <span class="keyword">AS</span> lessonId,</span><br><span class="line">  b.`title` <span class="keyword">AS</span> lessonTitle,</span><br><span class="line">  b.`tags`</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">  test.`course` <span class="keyword">AS</span> a</span><br><span class="line">  <span class="keyword">RIGHT</span> <span class="keyword">JOIN</span> test.`lesson` <span class="keyword">AS</span> b <span class="keyword">ON</span> a.`id` <span class="operator">=</span> b.`courseId`</span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">  a.`id` <span class="keyword">IS</span> <span class="keyword">NULL</span>;</span><br></pre></td></tr></table></figure>
<h2 id="CROSS-JOIN"><a href="#CROSS-JOIN" class="headerlink" title="CROSS JOIN"></a>CROSS JOIN</h2><blockquote>
<p>ç¬›å¡å°”ç§¯, å³ <code>N * M</code><br>ä¸‰ç§è¡¨ç¤ºæ–¹æ³•: <code>CROSS JOIN</code>, <code>JOIN</code>, <code>,</code></p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  a.`id`    <span class="keyword">AS</span> courseId,</span><br><span class="line">  a.`title` <span class="keyword">AS</span> courseTitle,</span><br><span class="line">  a.`englishName`,</span><br><span class="line">  b.`id`    <span class="keyword">AS</span> lessonId,</span><br><span class="line">  b.`title` <span class="keyword">AS</span> lessonTitle,</span><br><span class="line">  b.`tags`</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">  test.`course` <span class="keyword">AS</span> a</span><br><span class="line">  <span class="keyword">CROSS</span> <span class="keyword">JOIN</span> test.`lesson` <span class="keyword">AS</span> b;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  a.`id`    <span class="keyword">AS</span> courseId,</span><br><span class="line">  a.`title` <span class="keyword">AS</span> courseTitle,</span><br><span class="line">  a.`englishName`,</span><br><span class="line">  b.`id`    <span class="keyword">AS</span> lessonId,</span><br><span class="line">  b.`title` <span class="keyword">AS</span> lessonTitle,</span><br><span class="line">  b.`tags`</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">  test.`course` <span class="keyword">AS</span> a</span><br><span class="line">  <span class="keyword">JOIN</span> test.`lesson` <span class="keyword">AS</span> b;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  a.`id`    <span class="keyword">AS</span> courseId,</span><br><span class="line">  a.`title` <span class="keyword">AS</span> courseTitle,</span><br><span class="line">  a.`englishName`,</span><br><span class="line">  b.`id`    <span class="keyword">AS</span> lessonId,</span><br><span class="line">  b.`title` <span class="keyword">AS</span> lessonTitle,</span><br><span class="line">  b.`tags`</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">  test.`course` <span class="keyword">AS</span> a,</span><br><span class="line">  test.`lesson` <span class="keyword">AS</span> b;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>mysql</category>
      </categories>
      <tags>
        <tag>mysql</tag>
      </tags>
  </entry>
  <entry>
    <title>MySQL å…³é”®å­—æŸ¥è¯¢</title>
    <url>/2018/01/20/mysql-keywords-query/</url>
    <content><![CDATA[<p><code>MySQL</code> å…³é”®å­—é€šè¿‡ <code>LIKE</code> å’Œæ­£åˆ™æŸ¥è¯¢ã€‚</p>
<span id="more"></span>
<h1 id="æ•°æ®å‡†å¤‡"><a href="#æ•°æ®å‡†å¤‡" class="headerlink" title="æ•°æ®å‡†å¤‡"></a>æ•°æ®å‡†å¤‡</h1><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> Navicat Premium Data Transfer</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> Source Server         : localhost</span></span><br><span class="line"><span class="comment"> Source Server Type    : MySQL</span></span><br><span class="line"><span class="comment"> Source Server Version : 50714</span></span><br><span class="line"><span class="comment"> Source Host           : 127.0.0.1</span></span><br><span class="line"><span class="comment"> Source Database       : test</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> Target Server Type    : MySQL</span></span><br><span class="line"><span class="comment"> Target Server Version : 50714</span></span><br><span class="line"><span class="comment"> File Encoding         : utf-8</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> Date: 03/08/2017 22:41:15 PM</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">SET</span> NAMES utf8mb4;</span><br><span class="line"><span class="keyword">SET</span> FOREIGN_KEY_CHECKS <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="comment">--  Table structure for `test`</span></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> IF <span class="keyword">EXISTS</span> `test`;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `test` (</span><br><span class="line">  `id` <span class="type">int</span>(<span class="number">10</span>) unsigned <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT COMMENT <span class="string">&#x27;ä¸»é”® ID&#x27;</span>,</span><br><span class="line">  `key` <span class="type">varchar</span>(<span class="number">45</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;é”®å&#x27;</span>,</span><br><span class="line">  `val` <span class="type">varchar</span>(<span class="number">45</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;é”®å€¼&#x27;</span>,</span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY (`id`)</span><br><span class="line">) ENGINE<span class="operator">=</span>InnoDB AUTO_INCREMENT<span class="operator">=</span><span class="number">38</span> <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8 COMMENT<span class="operator">=</span><span class="string">&#x27;æµ‹è¯•è¡¨&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="comment">--  Records of `test`</span></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="keyword">BEGIN</span>;</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `test` <span class="keyword">VALUES</span> (<span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;chenyulong&#x27;</span>, <span class="string">&#x27;56&#x27;</span>), (<span class="string">&#x27;2&#x27;</span>, <span class="string">&#x27;maxiaoming&#x27;</span>, <span class="string">&#x27;33&#x27;</span>), (<span class="string">&#x27;3&#x27;</span>, <span class="string">&#x27;huxiaofeng&#x27;</span>, <span class="string">&#x27;23&#x27;</span>), (<span class="string">&#x27;4&#x27;</span>, <span class="string">&#x27;huangyi&#x27;</span>, <span class="string">&#x27;38&#x27;</span>), (<span class="string">&#x27;5&#x27;</span>, <span class="string">&#x27;MAYUN&#x27;</span>, <span class="string">&#x27;58&#x27;</span>), (<span class="string">&#x27;6&#x27;</span>, <span class="string">&#x27;CHENLONG&#x27;</span>, <span class="string">&#x27;64&#x27;</span>), (<span class="string">&#x27;7&#x27;</span>, <span class="string">&#x27;HUZHEN&#x27;</span>, <span class="string">&#x27;27&#x27;</span>), (<span class="string">&#x27;8&#x27;</span>, <span class="string">&#x27;LeiXiaoFei&#x27;</span>, <span class="string">&#x27;32&#x27;</span>), (<span class="string">&#x27;9&#x27;</span>, <span class="string">&#x27;Sunli&#x27;</span>, <span class="string">&#x27;42&#x27;</span>), (<span class="string">&#x27;10&#x27;</span>, <span class="string">&#x27;sunhong&#x27;</span>, <span class="string">&#x27;30&#x27;</span>), (<span class="string">&#x27;11&#x27;</span>, <span class="string">&#x27;Maoyouming&#x27;</span>, <span class="string">&#x27;33&#x27;</span>), (<span class="string">&#x27;12&#x27;</span>, <span class="string">&#x27;Maming&#x27;</span>, <span class="string">&#x27;43&#x27;</span>), (<span class="string">&#x27;13&#x27;</span>, <span class="string">&#x27;HUANGyu&#x27;</span>, <span class="string">&#x27;38&#x27;</span>), (<span class="string">&#x27;14&#x27;</span>, <span class="string">&#x27;maJINren&#x27;</span>, <span class="string">&#x27;34&#x27;</span>), (<span class="string">&#x27;15&#x27;</span>, <span class="string">&#x27;Lixiao&#x27;</span>, <span class="string">&#x27;33&#x27;</span>), (<span class="string">&#x27;16&#x27;</span>, <span class="string">&#x27;LIXIAOLI&#x27;</span>, <span class="string">&#x27;49&#x27;</span>), (<span class="string">&#x27;17&#x27;</span>, <span class="string">&#x27;sunYU&#x27;</span>, <span class="string">&#x27;50&#x27;</span>), (<span class="string">&#x27;18&#x27;</span>, <span class="string">&#x27;Liaihua&#x27;</span>, <span class="string">&#x27;54&#x27;</span>), (<span class="string">&#x27;19&#x27;</span>, <span class="string">&#x27;huXIaoYang&#x27;</span>, <span class="string">&#x27;44&#x27;</span>), (<span class="string">&#x27;20&#x27;</span>, <span class="string">&#x27;chenxiaoXIAO&#x27;</span>, <span class="string">&#x27;34&#x27;</span>), (<span class="string">&#x27;21&#x27;</span>, <span class="string">&#x27;wangjun&#x27;</span>, <span class="string">&#x27;90%&#x27;</span>), (<span class="string">&#x27;22&#x27;</span>, <span class="string">&#x27;zhaoqian&#x27;</span>, <span class="string">&#x27;_mysql&#x27;</span>), (<span class="string">&#x27;23&#x27;</span>, <span class="string">&#x27;wangwu&#x27;</span>, <span class="string">&#x27;%88&#x27;</span>), (<span class="string">&#x27;24&#x27;</span>, <span class="string">&#x27;lixiang&#x27;</span>, <span class="string">&#x27;mysql_&#x27;</span>), (<span class="string">&#x27;25&#x27;</span>, <span class="string">&#x27;lianxiang&#x27;</span>, <span class="string">&#x27;_php&#x27;</span>), (<span class="string">&#x27;26&#x27;</span>, <span class="string">&#x27;lianyue&#x27;</span>, <span class="string">&#x27;php_&#x27;</span>), (<span class="string">&#x27;27&#x27;</span>, <span class="string">&#x27;houxiaojun&#x27;</span>, <span class="string">&#x27;80%&#x27;</span>), (<span class="string">&#x27;28&#x27;</span>, <span class="string">&#x27;suNxiaOhua&#x27;</span>, <span class="string">&#x27;_phper&#x27;</span>), (<span class="string">&#x27;29&#x27;</span>, <span class="string">&#x27;jieXiaoguo&#x27;</span>, <span class="string">&#x27;mysqler_&#x27;</span>), (<span class="string">&#x27;30&#x27;</span>, <span class="string">&#x27;sunming&#x27;</span>, <span class="string">&#x27;%66&#x27;</span>), (<span class="string">&#x27;31&#x27;</span>, <span class="string">&#x27;yingzheng&#x27;</span>, <span class="string">&#x27;%888&#x27;</span>), (<span class="string">&#x27;32&#x27;</span>, <span class="string">&#x27;piaojinhui&#x27;</span>, <span class="string">&#x27;900%&#x27;</span>), (<span class="string">&#x27;33&#x27;</span>, <span class="string">&#x27;jinzhengnan&#x27;</span>, <span class="string">&#x27;800%&#x27;</span>), (<span class="string">&#x27;34&#x27;</span>, <span class="string">&#x27;quanzhilong&#x27;</span>, <span class="string">&#x27;%666&#x27;</span>), (<span class="string">&#x27;35&#x27;</span>, <span class="string">&#x27;zhangquan&#x27;</span>, <span class="string">&#x27;__php&#x27;</span>), (<span class="string">&#x27;36&#x27;</span>, <span class="string">&#x27;zhangyu&#x27;</span>, <span class="string">&#x27;__mysql&#x27;</span>), (<span class="string">&#x27;37&#x27;</span>, <span class="string">&#x27;liyifeng&#x27;</span>, <span class="string">&#x27;mysqler__&#x27;</span>);</span><br><span class="line"><span class="keyword">COMMIT</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SET</span> FOREIGN_KEY_CHECKS <span class="operator">=</span> <span class="number">1</span>;</span><br></pre></td></tr></table></figure>
<h1 id="åŒ¹é…æ¨¡å¼"><a href="#åŒ¹é…æ¨¡å¼" class="headerlink" title="åŒ¹é…æ¨¡å¼"></a>åŒ¹é…æ¨¡å¼</h1><blockquote>
<p><code>SQL</code> çš„æ¨¡å¼ç¼ºçœæ˜¯å¿½ç•¥å¤§å°å†™çš„ã€‚</p>
</blockquote>
<h2 id="SQL-åŒ¹é…æ¨¡å¼"><a href="#SQL-åŒ¹é…æ¨¡å¼" class="headerlink" title="SQL åŒ¹é…æ¨¡å¼"></a>SQL åŒ¹é…æ¨¡å¼</h2><ul>
<li><code>%</code>: è¡¨ç¤ºä»»æ„ä¸ªï¼ˆåŒ…æ‹¬ <code>0</code> ä¸ªï¼‰æˆ–å¤šä¸ªå­—ç¬¦ï¼Œå¯åŒ¹é…ä»»æ„ç±»å‹å’Œé•¿åº¦çš„å­—ç¬¦</li>
<li><code>_</code>: è¡¨ç¤ºä»»æ„å•ä¸ªå­—ç¬¦ï¼ŒåŒ¹é…å•ä¸ªä»»æ„å­—ç¬¦ï¼Œå®ƒå¸¸ç”¨æ¥é™åˆ¶è¡¨è¾¾å¼çš„å­—ç¬¦é•¿åº¦è¯­å¥</li>
</ul>
<h3 id="å­—ç¬¦è½¬ä¹‰"><a href="#å­—ç¬¦è½¬ä¹‰" class="headerlink" title="å­—ç¬¦è½¬ä¹‰"></a>å­—ç¬¦è½¬ä¹‰</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="operator">/</span><span class="operator">/</span> æŸ¥è¯¢ä»¥ <span class="number">90</span><span class="operator">%</span> ç»“å°¾çš„æ•°æ®</span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  a.`id`,</span><br><span class="line">  a.`key`,</span><br><span class="line">  a.`val`</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">  test.test <span class="keyword">AS</span> a</span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">  <span class="literal">TRUE</span></span><br><span class="line">  <span class="keyword">AND</span> a.`val` <span class="keyword">LIKE</span> <span class="string">&#x27;%90/%&#x27;</span> <span class="keyword">ESCAPE</span> <span class="string">&#x27;/&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="operator">/</span><span class="operator">/</span> æŸ¥è¯¢ä»¥ <span class="number">80</span> å¼€å¤´åŒ¹é…ä»»æ„å­—ç¬¦ä¸²å¹¶ä»¥ <span class="operator">%</span> ç»“å°¾çš„æ•°æ®</span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  a.`id`,</span><br><span class="line">  a.`key`,</span><br><span class="line">  a.`val`</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">  test.test <span class="keyword">AS</span> a</span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">  <span class="literal">TRUE</span></span><br><span class="line">  <span class="keyword">AND</span> a.`val` <span class="keyword">LIKE</span> <span class="string">&#x27;80%/%&#x27;</span> <span class="keyword">ESCAPE</span> <span class="string">&#x27;/&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="operator">/</span><span class="operator">/</span> æŸ¥è¯¢ä»¥ <span class="operator">%</span><span class="number">88</span> å¼€å¤´çš„æ•°æ®</span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  a.`id`,</span><br><span class="line">  a.`key`,</span><br><span class="line">  a.`val`</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">  test.test <span class="keyword">AS</span> a</span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">  <span class="literal">TRUE</span></span><br><span class="line">  <span class="keyword">AND</span> a.`val` <span class="keyword">LIKE</span> <span class="string">&#x27;/%88%&#x27;</span> <span class="keyword">ESCAPE</span> <span class="string">&#x27;/&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="operator">/</span><span class="operator">/</span> æŸ¥è¯¢ä»¥ _php å¼€å¤´çš„æ•°æ®</span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  a.`id`,</span><br><span class="line">  a.`key`,</span><br><span class="line">  a.`val`</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">  test.test <span class="keyword">AS</span> a</span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">  <span class="literal">TRUE</span></span><br><span class="line">  <span class="keyword">AND</span> a.`val` <span class="keyword">LIKE</span> <span class="string">&#x27;/_php%&#x27;</span> <span class="keyword">ESCAPE</span> <span class="string">&#x27;/&#x27;</span>;</span><br></pre></td></tr></table></figure>
<h2 id="æ­£åˆ™åŒ¹é…æ¨¡å¼"><a href="#æ­£åˆ™åŒ¹é…æ¨¡å¼" class="headerlink" title="æ­£åˆ™åŒ¹é…æ¨¡å¼"></a>æ­£åˆ™åŒ¹é…æ¨¡å¼</h2><ul>
<li><code>.</code>: åŒ¹é…ä»»æ„å•ä¸ªå­—ç¬¦</li>
<li><code>?</code>: åŒ¹é…å‰é¢çš„å­è¡¨è¾¾å¼ <code>0</code> æ¬¡æˆ– <code>1</code> æ¬¡</li>
<li><code>+</code>: åŒ¹é…å‰é¢çš„å­è¡¨è¾¾å¼ <code>1</code> æ¬¡æˆ–å¤šæ¬¡</li>
<li><code>*</code>: åŒ¹é…å‰é¢çš„å­è¡¨è¾¾å¼ <code>0</code> æ¬¡æˆ–å¤šæ¬¡</li>
<li><code>^</code>: è¡¨ç¤ºåŒ¹é…å¼€å§‹ä½ç½®</li>
<li><code>$</code>: è¡¨ç¤ºåŒ¹é…ç»“æŸä½ç½®</li>
<li><code>[]</code>: è¡¨ç¤ºä¸€ä¸ªé›†åˆ</li>
<li><code>&#123;&#125;</code>: è¡¨ç¤ºé‡å¤çš„æ¬¡æ•°</li>
</ul>
<h1 id="æŸ¥è¯¢å®ä¾‹"><a href="#æŸ¥è¯¢å®ä¾‹" class="headerlink" title="æŸ¥è¯¢å®ä¾‹"></a>æŸ¥è¯¢å®ä¾‹</h1><h2 id="æŸ¥è¯¢ä»¥-ma-å­—ç¬¦ä¸²å¼€å¤´çš„æ•°æ®"><a href="#æŸ¥è¯¢ä»¥-ma-å­—ç¬¦ä¸²å¼€å¤´çš„æ•°æ®" class="headerlink" title="æŸ¥è¯¢ä»¥ ma å­—ç¬¦ä¸²å¼€å¤´çš„æ•°æ®"></a>æŸ¥è¯¢ä»¥ ma å­—ç¬¦ä¸²å¼€å¤´çš„æ•°æ®</h2><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  a.`id`,</span><br><span class="line">  a.`key`,</span><br><span class="line">  a.`val`</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">  test.test <span class="keyword">AS</span> a</span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">  <span class="literal">TRUE</span></span><br><span class="line">  <span class="keyword">AND</span> a.`key` <span class="keyword">LIKE</span> <span class="string">&#x27;ma%&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  a.`id`,</span><br><span class="line">  a.`key`,</span><br><span class="line">  a.`val`</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">  test.test <span class="keyword">AS</span> a</span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">  <span class="literal">TRUE</span></span><br><span class="line">  <span class="keyword">AND</span> a.`key` REGEXP <span class="string">&#x27;^ma&#x27;</span>;</span><br></pre></td></tr></table></figure>
<h2 id="æŸ¥è¯¢ä»¥-ming-å­—ç¬¦ä¸²ç»“å°¾çš„æ•°æ®"><a href="#æŸ¥è¯¢ä»¥-ming-å­—ç¬¦ä¸²ç»“å°¾çš„æ•°æ®" class="headerlink" title="æŸ¥è¯¢ä»¥ ming å­—ç¬¦ä¸²ç»“å°¾çš„æ•°æ®"></a>æŸ¥è¯¢ä»¥ ming å­—ç¬¦ä¸²ç»“å°¾çš„æ•°æ®</h2><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  a.`id`,</span><br><span class="line">  a.`key`,</span><br><span class="line">  a.`val`</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">  test.test <span class="keyword">AS</span> a</span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">  <span class="literal">TRUE</span></span><br><span class="line">  <span class="keyword">AND</span> a.`key` <span class="keyword">LIKE</span> <span class="string">&#x27;%ming&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  a.`id`,</span><br><span class="line">  a.`key`,</span><br><span class="line">  a.`val`</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">  test.test <span class="keyword">AS</span> a</span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">  <span class="literal">TRUE</span></span><br><span class="line">  <span class="keyword">AND</span> a.`key` REGEXP <span class="string">&#x27;ming$&#x27;</span>;</span><br></pre></td></tr></table></figure>
<h2 id="æŸ¥è¯¢åŒ…å«-xiao-å­—ç¬¦ä¸²çš„æ•°æ®"><a href="#æŸ¥è¯¢åŒ…å«-xiao-å­—ç¬¦ä¸²çš„æ•°æ®" class="headerlink" title="æŸ¥è¯¢åŒ…å« xiao å­—ç¬¦ä¸²çš„æ•°æ®"></a>æŸ¥è¯¢åŒ…å« xiao å­—ç¬¦ä¸²çš„æ•°æ®</h2><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  a.`id`,</span><br><span class="line">  a.`key`,</span><br><span class="line">  a.`val`</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">  test.test <span class="keyword">AS</span> a</span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">  <span class="literal">TRUE</span></span><br><span class="line">  <span class="keyword">AND</span> a.`key` <span class="keyword">LIKE</span> <span class="string">&#x27;%xiao%&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  a.`id`,</span><br><span class="line">  a.`key`,</span><br><span class="line">  a.`val`</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">  test.test <span class="keyword">AS</span> a</span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">  <span class="literal">TRUE</span></span><br><span class="line">  <span class="keyword">AND</span> a.`key` REGEXP <span class="string">&#x27;xiao&#x27;</span>;</span><br></pre></td></tr></table></figure>
<h2 id="æŸ¥è¯¢é•¿åº¦ä¸º-10-ä¸­é—´åŒ…å«-xiao-å­—ç¬¦ä¸²çš„æ•°æ®"><a href="#æŸ¥è¯¢é•¿åº¦ä¸º-10-ä¸­é—´åŒ…å«-xiao-å­—ç¬¦ä¸²çš„æ•°æ®" class="headerlink" title="æŸ¥è¯¢é•¿åº¦ä¸º 10, ä¸­é—´åŒ…å« xiao å­—ç¬¦ä¸²çš„æ•°æ®"></a>æŸ¥è¯¢é•¿åº¦ä¸º 10, ä¸­é—´åŒ…å« xiao å­—ç¬¦ä¸²çš„æ•°æ®</h2><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  a.`id`,</span><br><span class="line">  a.`key`,</span><br><span class="line">  a.`val`</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">  test.test <span class="keyword">AS</span> a</span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">  <span class="literal">TRUE</span></span><br><span class="line">  <span class="keyword">AND</span> a.`key` <span class="keyword">LIKE</span> <span class="string">&#x27;___xiao___&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  a.`id`,</span><br><span class="line">  a.`key`,</span><br><span class="line">  a.`val`</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">  test.test <span class="keyword">AS</span> a</span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">  <span class="literal">TRUE</span></span><br><span class="line">  <span class="keyword">AND</span> a.`key` REGEXP <span class="string">&#x27;^[a-zA-Z]&#123;3&#125;xiao[a-zA-Z]&#123;3&#125;$&#x27;</span>;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>mysql</category>
      </categories>
      <tags>
        <tag>mysql</tag>
      </tags>
  </entry>
  <entry>
    <title>MySQL æœ€å€¼æŸ¥è¯¢</title>
    <url>/2018/01/18/mysql-max-min-query/</url>
    <content><![CDATA[<h1 id="æ•°æ®å‡†å¤‡"><a href="#æ•°æ®å‡†å¤‡" class="headerlink" title="æ•°æ®å‡†å¤‡"></a>æ•°æ®å‡†å¤‡</h1><blockquote>
<p>æŸ¥è¯¢å‰è¯·å…ˆå¯¼å…¥å®ä¾‹æ•°æ®ï¼Œæ­¤å®ä¾‹æ•°æ®ç”± <code>Navicat</code> å®¢æˆ·ç«¯å¯¼å‡ºã€‚</p>
</blockquote>
<span id="more"></span>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> Navicat Premium Data Transfer</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> Source Server         : localhost</span></span><br><span class="line"><span class="comment"> Source Server Type    : MySQL</span></span><br><span class="line"><span class="comment"> Source Server Version : 50714</span></span><br><span class="line"><span class="comment"> Source Host           : 127.0.0.1</span></span><br><span class="line"><span class="comment"> Source Database       : test</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> Target Server Type    : MySQL</span></span><br><span class="line"><span class="comment"> Target Server Version : 50714</span></span><br><span class="line"><span class="comment"> File Encoding         : utf-8</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> Date: 03/07/2017 21:29:35 PM</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">SET</span> NAMES utf8mb4;</span><br><span class="line"><span class="keyword">SET</span> FOREIGN_KEY_CHECKS <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="comment">--  Table structure for `test`</span></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> IF <span class="keyword">EXISTS</span> `test`;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `test` (</span><br><span class="line">  `id` <span class="type">int</span>(<span class="number">10</span>) unsigned <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT COMMENT <span class="string">&#x27;ä¸»é”® Id&#x27;</span>,</span><br><span class="line">  `key` <span class="type">varchar</span>(<span class="number">45</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;é”®å&#x27;</span>,</span><br><span class="line">  `val` <span class="type">varchar</span>(<span class="number">45</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;é”®å€¼&#x27;</span>,</span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY (`id`)</span><br><span class="line">) ENGINE<span class="operator">=</span>InnoDB AUTO_INCREMENT<span class="operator">=</span><span class="number">33</span> <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8 COMMENT<span class="operator">=</span><span class="string">&#x27;æµ‹è¯•è¡¨&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="comment">--  Records of `test`</span></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="keyword">BEGIN</span>;</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `test` <span class="keyword">VALUES</span> (<span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;10&#x27;</span>), (<span class="string">&#x27;2&#x27;</span>, <span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;11&#x27;</span>), (<span class="string">&#x27;3&#x27;</span>, <span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;12&#x27;</span>), (<span class="string">&#x27;4&#x27;</span>, <span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;13&#x27;</span>), (<span class="string">&#x27;5&#x27;</span>, <span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;14&#x27;</span>), (<span class="string">&#x27;6&#x27;</span>, <span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;15&#x27;</span>), (<span class="string">&#x27;7&#x27;</span>, <span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;16&#x27;</span>), (<span class="string">&#x27;8&#x27;</span>, <span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;17&#x27;</span>), (<span class="string">&#x27;9&#x27;</span>, <span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;18&#x27;</span>), (<span class="string">&#x27;10&#x27;</span>, <span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;19&#x27;</span>), (<span class="string">&#x27;11&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;20&#x27;</span>), (<span class="string">&#x27;12&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;21&#x27;</span>), (<span class="string">&#x27;13&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;22&#x27;</span>), (<span class="string">&#x27;14&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;23&#x27;</span>), (<span class="string">&#x27;15&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;24&#x27;</span>), (<span class="string">&#x27;16&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;25&#x27;</span>), (<span class="string">&#x27;17&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;26&#x27;</span>), (<span class="string">&#x27;18&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;27&#x27;</span>), (<span class="string">&#x27;19&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;28&#x27;</span>), (<span class="string">&#x27;20&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;29&#x27;</span>), (<span class="string">&#x27;21&#x27;</span>, <span class="string">&#x27;c&#x27;</span>, <span class="string">&#x27;30&#x27;</span>), (<span class="string">&#x27;22&#x27;</span>, <span class="string">&#x27;c&#x27;</span>, <span class="string">&#x27;31&#x27;</span>), (<span class="string">&#x27;23&#x27;</span>, <span class="string">&#x27;c&#x27;</span>, <span class="string">&#x27;32&#x27;</span>), (<span class="string">&#x27;24&#x27;</span>, <span class="string">&#x27;c&#x27;</span>, <span class="string">&#x27;33&#x27;</span>), (<span class="string">&#x27;25&#x27;</span>, <span class="string">&#x27;c&#x27;</span>, <span class="string">&#x27;34&#x27;</span>), (<span class="string">&#x27;26&#x27;</span>, <span class="string">&#x27;c&#x27;</span>, <span class="string">&#x27;35&#x27;</span>), (<span class="string">&#x27;27&#x27;</span>, <span class="string">&#x27;d&#x27;</span>, <span class="string">&#x27;40&#x27;</span>), (<span class="string">&#x27;28&#x27;</span>, <span class="string">&#x27;d&#x27;</span>, <span class="string">&#x27;41&#x27;</span>), (<span class="string">&#x27;29&#x27;</span>, <span class="string">&#x27;d&#x27;</span>, <span class="string">&#x27;42&#x27;</span>), (<span class="string">&#x27;30&#x27;</span>, <span class="string">&#x27;d&#x27;</span>, <span class="string">&#x27;43&#x27;</span>), (<span class="string">&#x27;31&#x27;</span>, <span class="string">&#x27;d&#x27;</span>, <span class="string">&#x27;44&#x27;</span>), (<span class="string">&#x27;32&#x27;</span>, <span class="string">&#x27;d&#x27;</span>, <span class="string">&#x27;45&#x27;</span>);</span><br><span class="line"><span class="keyword">COMMIT</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SET</span> FOREIGN_KEY_CHECKS <span class="operator">=</span> <span class="number">1</span>;</span><br></pre></td></tr></table></figure>
<h1 id="æŒ‰-key-åˆ†ç»„å–-val-æœ€å¤§çš„å€¼æ‰€åœ¨è¡Œçš„è®°å½•"><a href="#æŒ‰-key-åˆ†ç»„å–-val-æœ€å¤§çš„å€¼æ‰€åœ¨è¡Œçš„è®°å½•" class="headerlink" title="æŒ‰ key åˆ†ç»„å– val æœ€å¤§çš„å€¼æ‰€åœ¨è¡Œçš„è®°å½•"></a>æŒ‰ key åˆ†ç»„å– val æœ€å¤§çš„å€¼æ‰€åœ¨è¡Œçš„è®°å½•</h1><h2 id="æ–¹æ³•ä¸€"><a href="#æ–¹æ³•ä¸€" class="headerlink" title="æ–¹æ³•ä¸€"></a>æ–¹æ³•ä¸€</h2><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  a.`id`,</span><br><span class="line">  a.`key`,</span><br><span class="line">  <span class="built_in">MAX</span>(a.`val`) <span class="keyword">AS</span> val</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">  test.test <span class="keyword">AS</span> a</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span></span><br><span class="line">  a.`key`;</span><br></pre></td></tr></table></figure>
<h2 id="æ–¹æ³•äºŒ"><a href="#æ–¹æ³•äºŒ" class="headerlink" title="æ–¹æ³•äºŒ"></a>æ–¹æ³•äºŒ</h2><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  a.`id`,</span><br><span class="line">  a.`key`,</span><br><span class="line">  a.`val`</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">  test.test <span class="keyword">AS</span> a</span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">  a.`val` <span class="operator">=</span> (<span class="keyword">SELECT</span> <span class="built_in">MAX</span>(b.`val`)</span><br><span class="line">             <span class="keyword">FROM</span> test.test <span class="keyword">AS</span> b</span><br><span class="line">             <span class="keyword">WHERE</span> b.`key` <span class="operator">=</span> a.`key`)</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span></span><br><span class="line">  a.`key`;</span><br></pre></td></tr></table></figure>
<h2 id="æ–¹æ³•ä¸‰"><a href="#æ–¹æ³•ä¸‰" class="headerlink" title="æ–¹æ³•ä¸‰"></a>æ–¹æ³•ä¸‰</h2><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  a.`id`,</span><br><span class="line">  a.`key`,</span><br><span class="line">  a.`val`</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">  test.test <span class="keyword">AS</span> a</span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">  <span class="keyword">NOT</span> <span class="keyword">EXISTS</span>(<span class="keyword">SELECT</span> <span class="number">1</span></span><br><span class="line">             <span class="keyword">FROM</span> test.test <span class="keyword">AS</span> b</span><br><span class="line">             <span class="keyword">WHERE</span> b.`key` <span class="operator">=</span> a.`key` <span class="keyword">AND</span> b.`val` <span class="operator">&gt;</span> a.`val`);</span><br></pre></td></tr></table></figure>
<h2 id="æ–¹æ³•å››"><a href="#æ–¹æ³•å››" class="headerlink" title="æ–¹æ³•å››"></a>æ–¹æ³•å››</h2><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  a.`id`,</span><br><span class="line">  a.`key`,</span><br><span class="line">  a.`val`</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">  test.test <span class="keyword">AS</span> a,</span><br><span class="line">  (<span class="keyword">SELECT</span></span><br><span class="line">     `key`,</span><br><span class="line">     <span class="built_in">MAX</span>(`val`) <span class="keyword">AS</span> val</span><br><span class="line">   <span class="keyword">FROM</span> test.test</span><br><span class="line">   <span class="keyword">GROUP</span> <span class="keyword">BY</span> `key`) <span class="keyword">AS</span> b</span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">  a.`key` <span class="operator">=</span> b.`key`</span><br><span class="line">  <span class="keyword">AND</span> a.`val` <span class="operator">=</span> b.`val`</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span></span><br><span class="line">  a.`key`;</span><br></pre></td></tr></table></figure>
<h2 id="æ–¹æ³•äº”"><a href="#æ–¹æ³•äº”" class="headerlink" title="æ–¹æ³•äº”"></a>æ–¹æ³•äº”</h2><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  a.`id`,</span><br><span class="line">  a.`key`,</span><br><span class="line">  a.`val`</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">  test.test <span class="keyword">AS</span> a</span><br><span class="line">  <span class="keyword">INNER</span> <span class="keyword">JOIN</span> (<span class="keyword">SELECT</span></span><br><span class="line">                `key`,</span><br><span class="line">                <span class="built_in">MAX</span>(`val`) <span class="keyword">AS</span> `val`</span><br><span class="line">              <span class="keyword">FROM</span> test.test</span><br><span class="line">              <span class="keyword">GROUP</span> <span class="keyword">BY</span> `key`) <span class="keyword">AS</span> b <span class="keyword">ON</span> b.`key` <span class="operator">=</span> a.`key`</span><br><span class="line">                                      <span class="keyword">AND</span> b.`val` <span class="operator">=</span> a.`val`</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span></span><br><span class="line">  a.`key`;</span><br></pre></td></tr></table></figure>
<h2 id="æ–¹æ³•å…­"><a href="#æ–¹æ³•å…­" class="headerlink" title="æ–¹æ³•å…­"></a>æ–¹æ³•å…­</h2><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  a.`id`,</span><br><span class="line">  a.`key`,</span><br><span class="line">  a.`val`</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">  test.test <span class="keyword">AS</span> a</span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">  <span class="number">1</span> <span class="operator">&gt;</span> (<span class="keyword">SELECT</span> <span class="built_in">COUNT</span>(<span class="operator">*</span>)</span><br><span class="line">       <span class="keyword">FROM</span> test.test <span class="keyword">AS</span> b</span><br><span class="line">       <span class="keyword">WHERE</span> b.`key` <span class="operator">=</span> a.`key` <span class="keyword">AND</span> b.`val` <span class="operator">&gt;</span> a.`val`)</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span></span><br><span class="line">  a.`key`;</span><br></pre></td></tr></table></figure>
<h1 id="æŒ‰-key-åˆ†ç»„å–-val-æœ€å°çš„å€¼æ‰€åœ¨è¡Œçš„æ•°æ®"><a href="#æŒ‰-key-åˆ†ç»„å–-val-æœ€å°çš„å€¼æ‰€åœ¨è¡Œçš„æ•°æ®" class="headerlink" title="æŒ‰ key åˆ†ç»„å– val æœ€å°çš„å€¼æ‰€åœ¨è¡Œçš„æ•°æ®"></a>æŒ‰ key åˆ†ç»„å– val æœ€å°çš„å€¼æ‰€åœ¨è¡Œçš„æ•°æ®</h1><h2 id="æ–¹æ³•ä¸€-1"><a href="#æ–¹æ³•ä¸€-1" class="headerlink" title="æ–¹æ³•ä¸€"></a>æ–¹æ³•ä¸€</h2><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  a.`id`,</span><br><span class="line">  a.`key`,</span><br><span class="line">  <span class="built_in">MIN</span>(a.`val`) <span class="keyword">AS</span> val</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">  test.test <span class="keyword">AS</span> a</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span></span><br><span class="line">  a.`key`;</span><br></pre></td></tr></table></figure>
<h2 id="æ–¹æ³•äºŒ-1"><a href="#æ–¹æ³•äºŒ-1" class="headerlink" title="æ–¹æ³•äºŒ"></a>æ–¹æ³•äºŒ</h2><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  a.`id`,</span><br><span class="line">  a.`key`,</span><br><span class="line">  a.`val`</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">  test.test <span class="keyword">AS</span> a</span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">  a.`val` <span class="operator">=</span> (<span class="keyword">SELECT</span> <span class="built_in">MIN</span>(b.`val`)</span><br><span class="line">             <span class="keyword">FROM</span> test.test <span class="keyword">AS</span> b</span><br><span class="line">             <span class="keyword">WHERE</span> b.`key` <span class="operator">=</span> a.`key`)</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span></span><br><span class="line">  a.`key`;</span><br></pre></td></tr></table></figure>
<h2 id="æ–¹æ³•ä¸‰-1"><a href="#æ–¹æ³•ä¸‰-1" class="headerlink" title="æ–¹æ³•ä¸‰"></a>æ–¹æ³•ä¸‰</h2><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  a.`id`,</span><br><span class="line">  a.`key`,</span><br><span class="line">  a.`val`</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">  test.test <span class="keyword">AS</span> a</span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">  <span class="keyword">NOT</span> <span class="keyword">EXISTS</span>(<span class="keyword">SELECT</span> <span class="number">1</span></span><br><span class="line">             <span class="keyword">FROM</span> test.test <span class="keyword">AS</span> b</span><br><span class="line">             <span class="keyword">WHERE</span> b.`key` <span class="operator">=</span> a.`key` <span class="keyword">AND</span> b.`val` <span class="operator">&lt;</span> a.`val`);</span><br></pre></td></tr></table></figure>
<h2 id="æ–¹æ³•å››-1"><a href="#æ–¹æ³•å››-1" class="headerlink" title="æ–¹æ³•å››"></a>æ–¹æ³•å››</h2><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  a.`id`,</span><br><span class="line">  a.`key`,</span><br><span class="line">  a.`val`</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">  test.test <span class="keyword">AS</span> a,</span><br><span class="line">  (<span class="keyword">SELECT</span></span><br><span class="line">     `key`,</span><br><span class="line">     <span class="built_in">MIN</span>(`val`) <span class="keyword">AS</span> val</span><br><span class="line">   <span class="keyword">FROM</span> test.test</span><br><span class="line">   <span class="keyword">GROUP</span> <span class="keyword">BY</span> `key`) <span class="keyword">AS</span> b</span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">  a.`key` <span class="operator">=</span> b.`key`</span><br><span class="line">  <span class="keyword">AND</span> a.`val` <span class="operator">=</span> b.`val`</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span></span><br><span class="line">  a.`key`;</span><br></pre></td></tr></table></figure>
<h2 id="æ–¹æ³•äº”-1"><a href="#æ–¹æ³•äº”-1" class="headerlink" title="æ–¹æ³•äº”"></a>æ–¹æ³•äº”</h2><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  a.`id`,</span><br><span class="line">  a.`key`,</span><br><span class="line">  a.`val`</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">  test.test <span class="keyword">AS</span> a</span><br><span class="line">  <span class="keyword">INNER</span> <span class="keyword">JOIN</span> (<span class="keyword">SELECT</span></span><br><span class="line">                `key`,</span><br><span class="line">                <span class="built_in">MIN</span>(`val`) <span class="keyword">AS</span> val</span><br><span class="line">              <span class="keyword">FROM</span> test.test</span><br><span class="line">              <span class="keyword">GROUP</span> <span class="keyword">BY</span> `key`) <span class="keyword">AS</span> b <span class="keyword">ON</span> b.`key` <span class="operator">=</span> a.`key`</span><br><span class="line">                                      <span class="keyword">AND</span> b.`val` <span class="operator">=</span> a.`val`</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span></span><br><span class="line">  a.`key`;</span><br></pre></td></tr></table></figure>
<h2 id="æ–¹æ³•å…­-1"><a href="#æ–¹æ³•å…­-1" class="headerlink" title="æ–¹æ³•å…­"></a>æ–¹æ³•å…­</h2><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  a.`id`,</span><br><span class="line">  a.`key`,</span><br><span class="line">  a.`val`</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">  test.test <span class="keyword">AS</span> a</span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">  <span class="number">1</span> <span class="operator">&gt;</span> (<span class="keyword">SELECT</span> <span class="built_in">COUNT</span>(<span class="operator">*</span>)</span><br><span class="line">       <span class="keyword">FROM</span> test.test <span class="keyword">AS</span> b</span><br><span class="line">       <span class="keyword">WHERE</span> b.`key` <span class="operator">=</span> a.`key` <span class="keyword">AND</span> b.`val` <span class="operator">&lt;</span> a.`val`)</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span></span><br><span class="line">  a.`key`;</span><br></pre></td></tr></table></figure>
<h1 id="æŒ‰-key-åˆ†ç»„å–æœ€å¤§çš„ä¸¤ä¸ª-val-æ‰€åœ¨è¡Œçš„æ•°æ®"><a href="#æŒ‰-key-åˆ†ç»„å–æœ€å¤§çš„ä¸¤ä¸ª-val-æ‰€åœ¨è¡Œçš„æ•°æ®" class="headerlink" title="æŒ‰ key åˆ†ç»„å–æœ€å¤§çš„ä¸¤ä¸ª val æ‰€åœ¨è¡Œçš„æ•°æ®"></a>æŒ‰ key åˆ†ç»„å–æœ€å¤§çš„ä¸¤ä¸ª val æ‰€åœ¨è¡Œçš„æ•°æ®</h1><h2 id="æ–¹æ³•ä¸€-2"><a href="#æ–¹æ³•ä¸€-2" class="headerlink" title="æ–¹æ³•ä¸€"></a>æ–¹æ³•ä¸€</h2><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  a.`id`,</span><br><span class="line">  a.`key`,</span><br><span class="line">  a.`val`</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">  test.test <span class="keyword">AS</span> a</span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">  <span class="number">2</span> <span class="operator">&gt;</span> (<span class="keyword">SELECT</span> <span class="built_in">COUNT</span>(<span class="operator">*</span>)</span><br><span class="line">       <span class="keyword">FROM</span> test.test <span class="keyword">AS</span> b</span><br><span class="line">       <span class="keyword">WHERE</span> b.`key` <span class="operator">=</span> a.`key` <span class="keyword">AND</span> b.`val` <span class="operator">&gt;</span> a.`val`)</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span></span><br><span class="line">  a.`key`;</span><br></pre></td></tr></table></figure>
<h2 id="æ–¹æ³•äºŒ-2"><a href="#æ–¹æ³•äºŒ-2" class="headerlink" title="æ–¹æ³•äºŒ"></a>æ–¹æ³•äºŒ</h2><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  a.`id`,</span><br><span class="line">  a.`key`,</span><br><span class="line">  a.`val`</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">  test.test <span class="keyword">AS</span> a</span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">  <span class="keyword">EXISTS</span>(</span><br><span class="line">      <span class="keyword">SELECT</span> <span class="built_in">COUNT</span>(<span class="operator">*</span>)</span><br><span class="line">      <span class="keyword">FROM</span></span><br><span class="line">        test.test <span class="keyword">AS</span> b</span><br><span class="line">      <span class="keyword">WHERE</span></span><br><span class="line">        b.`key` <span class="operator">=</span> a.`key`</span><br><span class="line">        <span class="keyword">AND</span> b.`val` <span class="operator">&gt;</span> a.`val`</span><br><span class="line">      <span class="keyword">HAVING</span></span><br><span class="line">        <span class="built_in">COUNT</span>(<span class="operator">*</span>) <span class="operator">&lt;</span> <span class="number">2</span></span><br><span class="line">  )</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span></span><br><span class="line">  a.`key`;</span><br></pre></td></tr></table></figure>
<h1 id="æŒ‰-key-åˆ†ç»„å–æœ€å°çš„ä¸¤ä¸ª-val-æ‰€åœ¨è¡Œçš„æ•°æ®"><a href="#æŒ‰-key-åˆ†ç»„å–æœ€å°çš„ä¸¤ä¸ª-val-æ‰€åœ¨è¡Œçš„æ•°æ®" class="headerlink" title="æŒ‰ key åˆ†ç»„å–æœ€å°çš„ä¸¤ä¸ª val æ‰€åœ¨è¡Œçš„æ•°æ®"></a>æŒ‰ key åˆ†ç»„å–æœ€å°çš„ä¸¤ä¸ª val æ‰€åœ¨è¡Œçš„æ•°æ®</h1><h2 id="æ–¹æ³•ä¸€-3"><a href="#æ–¹æ³•ä¸€-3" class="headerlink" title="æ–¹æ³•ä¸€"></a>æ–¹æ³•ä¸€</h2><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  a.`id`,</span><br><span class="line">  a.`key`,</span><br><span class="line">  a.`val`</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">  test.test <span class="keyword">AS</span> a</span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">  <span class="number">2</span> <span class="operator">&gt;</span> (</span><br><span class="line">    <span class="keyword">SELECT</span> <span class="built_in">COUNT</span>(<span class="operator">*</span>)</span><br><span class="line">    <span class="keyword">FROM</span></span><br><span class="line">      test.test <span class="keyword">AS</span> b</span><br><span class="line">    <span class="keyword">WHERE</span></span><br><span class="line">      b.`key` <span class="operator">=</span> a.`key`</span><br><span class="line">      <span class="keyword">AND</span> b.`val` <span class="operator">&lt;</span> a.`val`</span><br><span class="line">  )</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span></span><br><span class="line">  a.`key`;</span><br></pre></td></tr></table></figure>
<h2 id="æ–¹æ³•äºŒ-3"><a href="#æ–¹æ³•äºŒ-3" class="headerlink" title="æ–¹æ³•äºŒ"></a>æ–¹æ³•äºŒ</h2><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  a.`id`,</span><br><span class="line">  a.`key`,</span><br><span class="line">  a.`val`</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">  test.test <span class="keyword">AS</span> a</span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">  <span class="keyword">EXISTS</span>(</span><br><span class="line">      <span class="keyword">SELECT</span> <span class="built_in">COUNT</span>(<span class="operator">*</span>)</span><br><span class="line">      <span class="keyword">FROM</span></span><br><span class="line">        test.test <span class="keyword">AS</span> b</span><br><span class="line">      <span class="keyword">WHERE</span></span><br><span class="line">        b.`key` <span class="operator">=</span> a.`key`</span><br><span class="line">        <span class="keyword">AND</span> b.`val` <span class="operator">&lt;</span> a.`val`</span><br><span class="line">      <span class="keyword">HAVING</span></span><br><span class="line">        <span class="built_in">COUNT</span>(<span class="operator">*</span>) <span class="operator">&lt;</span> <span class="number">2</span></span><br><span class="line">  )</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span></span><br><span class="line">  a.`key`;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>mysql</category>
      </categories>
      <tags>
        <tag>mysql</tag>
      </tags>
  </entry>
  <entry>
    <title>MySQL å¿˜è®° root å¯†ç åè¿›è¡Œé‡ç½®</title>
    <url>/2018/04/15/mysql-reset-root-password/</url>
    <content><![CDATA[<p>å‰æ®µæ—¶é—´åœ¨ <code>Vagrant</code> ä¸­å®‰è£…äº† <code>CentOS 7.2</code> ç³»ç»Ÿï¼Œç„¶åéƒ¨ç½²äº†ä¸€å¥— <code>lnmp</code> ç¯å¢ƒï¼Œæ•°æ®åº“å®‰è£…äº† <code>MariaDB 10.3.4</code>ï¼Œå®‰è£…å®Œæˆåï¼Œéšæœºç”Ÿæˆäº†ä¸€ä¸ª <code>MariaDB</code> å¯†ç ï¼Œåæ¥å°±æŠŠè¿™äº‹ç»™å¿˜äº†ã€‚ä»Šå¤©é—²æ¥æ— äº‹ï¼Œå‡†å¤‡å¯¼å…¥ä¸€äº›æ•°æ®æ—¶æ‚²å‰§äº†ã€‚å¯†ç æ—©å°±å¿˜çš„ä¸€å¹²äºŒå‡€äº†ï¼Œå”‰ï¼Œéƒé—·å‘€ï¼Œäºæ˜¯å°±æƒ³èµ·æ¥é‡ç½®ä¸€ä¸‹å¯†ç ã€‚</p>
<h1 id="å…·ä½“æ“ä½œ"><a href="#å…·ä½“æ“ä½œ" class="headerlink" title="å…·ä½“æ“ä½œ"></a>å…·ä½“æ“ä½œ</h1><h2 id="åœæ­¢æœåŠ¡"><a href="#åœæ­¢æœåŠ¡" class="headerlink" title="åœæ­¢æœåŠ¡"></a>åœæ­¢æœåŠ¡</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// åœæ­¢ MariaDB æœåŠ¡</span><br><span class="line">$ sudo systemctl stop mariadb.service</span><br></pre></td></tr></table></figure>
<h2 id="æ·»åŠ é…ç½®"><a href="#æ·»åŠ é…ç½®" class="headerlink" title="æ·»åŠ é…ç½®"></a>æ·»åŠ é…ç½®</h2><p>åœ¨ <code>MariaDB</code> çš„é…ç½®æ–‡ä»¶ä¸­ <code>[mysqld]</code> åé¢æ·»åŠ å¦‚ä¸‹ä¸¤é¡¹é…ç½®ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ sudo vim /etc/my.cnf.d/server.cnf</span><br><span class="line">[mysqld]</span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">skip-grant-tables</span><br><span class="line">skip-networking</span><br></pre></td></tr></table></figure>
<div class="note info">
            <ul><li><code>skip-grant-tables</code>: æ­¤é€‰é¡¹å…è®¸ä»»ä½•äººä¸éœ€å¯†ç ç™»é™† <code>MariaDB</code> æ•°æ®åº“å¹¶ä¸”æ‹¥æœ‰æ‰€æœ‰ç‰¹æƒï¼Œä½†æ˜¯å®ƒç¦æ­¢äº†è´¦æˆ·ç®¡ç†å‘½ä»¤å¦‚ï¼š<code>ALTER USER</code>ï¼Œ<code>SET PASSWORD</code></li><li><code>skip-networking</code>: æ­¤é€‰é¡¹ä¸å…è®¸è¿œç¨‹å®¢æˆ·ç«¯è¿æ¥æ•°æ®åº“</li></ul>
          </div>
<h2 id="å¯åŠ¨æœåŠ¡"><a href="#å¯åŠ¨æœåŠ¡" class="headerlink" title="å¯åŠ¨æœåŠ¡"></a>å¯åŠ¨æœåŠ¡</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// å¯åŠ¨ MariaDB æœåŠ¡</span><br><span class="line">$ sudo systemctl start mariadb.service</span><br></pre></td></tr></table></figure>
<h2 id="ä½¿ç”¨å®¢æˆ·ç«¯è¿æ¥æ•°æ®åº“æœåŠ¡å™¨"><a href="#ä½¿ç”¨å®¢æˆ·ç«¯è¿æ¥æ•°æ®åº“æœåŠ¡å™¨" class="headerlink" title="ä½¿ç”¨å®¢æˆ·ç«¯è¿æ¥æ•°æ®åº“æœåŠ¡å™¨"></a>ä½¿ç”¨å®¢æˆ·ç«¯è¿æ¥æ•°æ®åº“æœåŠ¡å™¨</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ mysql -uroot</span><br><span class="line">Welcome to the MariaDB monitor.  Commands end with ; or \g.</span><br><span class="line">Your MariaDB connection id is 8</span><br><span class="line">Server version: 10.3.4-MariaDB MariaDB Server</span><br><span class="line"></span><br><span class="line">Copyright (c) 2000, 2017, Oracle, MariaDB Corporation Ab and others.</span><br><span class="line"></span><br><span class="line">Type <span class="string">&#x27;help;&#x27;</span> or <span class="string">&#x27;\h&#x27;</span> <span class="keyword">for</span> <span class="built_in">help</span>. Type <span class="string">&#x27;\c&#x27;</span> to clear the current input statement.</span><br><span class="line"></span><br><span class="line">MariaDB [(none)]&gt;</span><br></pre></td></tr></table></figure>
<h2 id="ä¿®æ”¹å¯†ç "><a href="#ä¿®æ”¹å¯†ç " class="headerlink" title="ä¿®æ”¹å¯†ç "></a>ä¿®æ”¹å¯†ç </h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">MariaDB [(none)]&gt; USE mysql;</span><br><span class="line">Reading table information <span class="keyword">for</span> completion of table and column names</span><br><span class="line">You can turn off this feature to get a quicker startup with -A</span><br><span class="line"></span><br><span class="line">Database changed</span><br><span class="line">MariaDB [mysql]&gt; UPDATE user SET password=PASSWORD(<span class="string">&#x27;your password&#x27;</span>) \</span><br><span class="line">    -&gt; WHERE User=<span class="string">&#x27;root&#x27;</span>;</span><br><span class="line">Query OK, 0 rows affected (0.000 sec)</span><br><span class="line">Rows matched: 3  Changed: 0  Warnings: 0</span><br><span class="line"></span><br><span class="line">MariaDB [mysql]&gt; FLUSH PRIVILEGES;</span><br><span class="line">Query OK, 0 rows affected (0.000 sec)</span><br><span class="line"></span><br><span class="line">MariaDB [mysql]&gt; <span class="built_in">exit</span>;</span><br></pre></td></tr></table></figure>
<h2 id="ç§»é™¤é…ç½®å¹¶é‡å¯æœåŠ¡"><a href="#ç§»é™¤é…ç½®å¹¶é‡å¯æœåŠ¡" class="headerlink" title="ç§»é™¤é…ç½®å¹¶é‡å¯æœåŠ¡"></a>ç§»é™¤é…ç½®å¹¶é‡å¯æœåŠ¡</h2><p>å°†åˆšæ‰æ·»åŠ çš„é…ç½®ä»é…ç½®æ–‡ä»¶ç§»é™¤æ‰</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ sudo systemctl restart mariadb.service</span><br></pre></td></tr></table></figure>
<h2 id="æµ‹è¯•ç™»å½•"><a href="#æµ‹è¯•ç™»å½•" class="headerlink" title="æµ‹è¯•ç™»å½•"></a>æµ‹è¯•ç™»å½•</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ mysql -uroot -p</span><br><span class="line">Enter password:</span><br><span class="line">Welcome to the MariaDB monitor.  Commands end with ; or \g.</span><br><span class="line">Your MariaDB connection id is 10</span><br><span class="line">Server version: 10.3.4-MariaDB MariaDB Server</span><br><span class="line"></span><br><span class="line">Copyright (c) 2000, 2017, Oracle, MariaDB Corporation Ab and others.</span><br><span class="line"></span><br><span class="line">Type <span class="string">&#x27;help;&#x27;</span> or <span class="string">&#x27;\h&#x27;</span> <span class="keyword">for</span> <span class="built_in">help</span>. Type <span class="string">&#x27;\c&#x27;</span> to clear the current input statement.</span><br><span class="line"></span><br><span class="line">MariaDB [(none)]&gt;</span><br></pre></td></tr></table></figure>
<h1 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h1><ul>
<li><a href="https://dev.mysql.com/doc/refman/5.7/en/resetting-permissions.html">How to Reset the Root Password</a></li>
<li><a href="https://mariadb.com/kb/zh-cn/set-password/">SET PASSWORD</a></li>
</ul>
]]></content>
      <categories>
        <category>mysql</category>
      </categories>
      <tags>
        <tag>mysql</tag>
      </tags>
  </entry>
  <entry>
    <title>MySQL å­˜å‚¨å¼•æ“</title>
    <url>/2018/01/20/mysql-storage-engine/</url>
    <content><![CDATA[<h1 id="MySQL-çš„å­˜å‚¨å¼•æ“"><a href="#MySQL-çš„å­˜å‚¨å¼•æ“" class="headerlink" title="MySQL çš„å­˜å‚¨å¼•æ“"></a>MySQL çš„å­˜å‚¨å¼•æ“</h1><ul>
<li><code>Archive</code>ï¼šç”¨äºæ•°æ®å­˜æ¡£çš„å¼•æ“ï¼ˆæ•°æ®è¡Œè¢«æ’å…¥åå°±ä¸èƒ½å†ä¿®æ”¹äº†ï¼‰ã€‚éå¸¸é€‚åˆå­˜å‚¨å¤§é‡çš„ç‹¬ç«‹çš„ï¼Œä½œä¸ºå†å²è®°å½•çš„æ•°æ®ã€‚å› ä¸ºå®ƒä»¬ä¸ç»å¸¸è¢«è¯»å–ã€‚<code>Archive</code> æ‹¥æœ‰é«˜æ•ˆçš„æ’å…¥é€Ÿåº¦ï¼Œä½†å…¶å¯¹æŸ¥è¯¢çš„æ”¯æŒç›¸å¯¹è¾ƒå·®</li>
<li><code>BDB</code>ï¼šæºè‡ª <code>Berkeley DB</code>ï¼Œäº‹åŠ¡å‹æ•°æ®åº“çš„å¦ä¸€ç§é€‰æ‹©ï¼Œæ”¯æŒ <code>COMMIT</code> å’Œ <code>ROLLBACK</code> ç­‰å…¶ä»–äº‹åŠ¡ç‰¹æ€§</li>
<li><code>BlackHole</code>ï¼šé»‘æ´å¼•æ“(å†™æ“ä½œæ˜¯åˆ é™¤æ•°æ®ï¼Œè¯»æ“ä½œæ˜¯è¿”å›ç©ºç™½è®°å½•)ã€‚ç”±äºå†™å…¥çš„ä»»ä½•æ•°æ®éƒ½ä¼šæ¶ˆå¤±ã€‚ä¸€èˆ¬ç”¨äºè®°å½• <code>binlog</code> åšå¤åˆ¶çš„ä¸­ç»§</li>
<li><code>CSV</code>ï¼šé€»è¾‘ä¸Šç”±é€—å·åˆ†å‰²æ•°æ®çš„å­˜å‚¨å¼•æ“ã€‚å®ƒä¼šåœ¨æ•°æ®åº“å­ç›®å½•é‡Œä¸ºæ¯ä¸ªæ•°æ®è¡¨åˆ›å»ºä¸€ä¸ª <code>.CSV</code> æ–‡ä»¶ã€‚è¿™æ˜¯ä¸€ç§æ™®é€šæ–‡æœ¬æ–‡ä»¶ï¼Œæ¯ä¸ªæ•°æ®è¡Œå ç”¨ä¸€ä¸ªæ–‡æœ¬è¡Œã€‚<code>CSV</code> å­˜å‚¨å¼•æ“ä¸æ”¯æŒç´¢å¼•</li>
<li><code>Example</code>ï¼šå®ä¾‹(å­˜æ ¹)å­˜å‚¨å¼•æ“ã€‚å®˜æ–¹å®ä¾‹</li>
<li><code>Falcon</code>ï¼šç”¨æ¥è¿›è¡Œäº‹åŠ¡å¤„ç†çš„å­˜å‚¨å¼•æ“</li>
<li><code>Federated</code>ï¼šç”¨æ¥è®¿é—®è¿œç¨‹æ•°æ®è¡¨çš„å­˜å‚¨å¼•æ“ã€‚å°†ä¸åŒçš„ <code>MySQL</code> æœåŠ¡å™¨è”åˆèµ·æ¥ï¼Œé€»è¾‘ä¸Šç»„æˆä¸€ä¸ªå®Œæ•´çš„æ•°æ®åº“ã€‚éå¸¸é€‚åˆåˆ†å¸ƒå¼åº”ç”¨</li>
<li><code>InnoDB</code>ï¼šå…·å¤‡å¤–é”®æ”¯æŒåŠŸèƒ½çš„äº‹åŠ¡å¤„ç†å¼•æ“ã€‚<code>MySQL-5.5</code> ç‰ˆæœ¬å <code>MySQL</code> çš„é»˜è®¤æ•°æ®åº“å¼•æ“ï¼Œæ˜¯ä¸“ä¸ºäº‹åŠ¡è®¾è®¡çš„å­˜å‚¨å¼•æ“ï¼Œæ”¯æŒ <code>ACID</code> äº‹åŠ¡ï¼Œæ”¯æŒå¤–é”®å’Œè¡Œçº§é”å®šï¼Œæ‹¥æœ‰é«˜å¹¶å‘å¤„ç†èƒ½åŠ›ã€‚ä½†æ˜¯ï¼Œ<code>InnoDB</code> åœ¨åˆ›å»ºç´¢å¼•å’ŒåŠ è½½æ•°æ®æ—¶ï¼Œæ¯” <code>MyISAM</code> æ…¢</li>
<li><code>Memory</code>ï¼šå†…å­˜å¼•æ“ã€‚æ‰€æœ‰æ•°æ®ç½®äºå†…å­˜ï¼Œè¡¨ç»“æ„ä¸æ˜¯å­˜å‚¨åœ¨å†…å­˜ä¸­çš„å­˜å‚¨å¼•æ“ï¼ŒæŸ¥è¯¢æ—¶ä¸éœ€è¦æ‰§è¡Œç£ç›˜ <code>I/O</code> æ“ä½œï¼Œæ‰€ä»¥è¦æ¯” <code>MyISAM</code> å’Œ <code>InnoDB</code> å¿«å¾ˆå¤šå€ã€‚ä½†æ˜¯ä¼šå ç”¨å’Œæ•°æ®é‡æˆæ­£æ¯”çš„å†…å­˜ç©ºé—´ã€‚å¹¶ä¸”å…¶å†…å®¹ä¼šåœ¨ <code>MySQL</code> é‡æ–°å¯åŠ¨æ—¶ä¸¢å¤±ï¼Œè¡¨ç»“æ„ä¸ä¼šä¸¢å¤±</li>
<li><code>Merge/MRG_MYISAM</code>ï¼šç®¡ç†ç”±å¤šä¸ª <code>MyISAM</code> æ•°æ®è¡¨æ„æˆçš„æ•°æ®è¡¨é›†åˆã€‚å°†ä¸€å®šæ•°é‡çš„ <code>MyISAM</code> è¡¨è”åˆè€Œæˆä¸€ä¸ªæ•´ä½“ï¼Œåœ¨è¶…å¤§è§„æ¨¡æ•°æ®å­˜å‚¨æ—¶å¾ˆæœ‰ç”¨</li>
<li><code>MyISAM</code>ï¼šä¸æ”¯æŒäº‹åŠ¡å’Œè¡Œçº§é”ï¼Œæ‰€ä»¥ <code>MyISAM</code> å¼•æ“é€Ÿåº¦å¾ˆå¿«ï¼Œæ€§èƒ½ä¼˜ç§€ã€‚<code>MyISAM</code> å¯ä»¥å¯¹æ•´å¼ è¡¨åŠ é”ï¼Œæ”¯æŒå¹¶å‘æ’å…¥ï¼Œæ”¯æŒå…¨æ–‡ç´¢å¼•</li>
<li><code>NDB/Cluster</code>ï¼š<code>MySQL Cluster</code> ä¸“ç”¨å­˜å‚¨å¼•æ“ã€‚é«˜å†—ä½™çš„å­˜å‚¨å¼•æ“ï¼Œç”¨å¤šå°æ•°æ®æœºå™¨è”åˆæä¾›æœåŠ¡ä»¥æé«˜æ•´ä½“æ€§èƒ½å’Œå®‰å…¨æ€§ã€‚é€‚åˆæ•°æ®é‡å¤§ï¼Œå®‰å…¨å’Œæ€§èƒ½è¦æ±‚é«˜çš„åº”ç”¨</li>
<li><code>PERFORMANCE_SCHEMA</code>ï¼šPerformance Schema</li>
</ul>
<h1 id="æŸ¥çœ‹æ•°æ®åº“æ”¯æŒçš„å¼•æ“"><a href="#æŸ¥çœ‹æ•°æ®åº“æ”¯æŒçš„å¼•æ“" class="headerlink" title="æŸ¥çœ‹æ•°æ®åº“æ”¯æŒçš„å¼•æ“"></a>æŸ¥çœ‹æ•°æ®åº“æ”¯æŒçš„å¼•æ“</h1><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SHOW</span> ENGINES;</span><br></pre></td></tr></table></figure>
<h1 id="MyISAM-å’Œ-InnoDB"><a href="#MyISAM-å’Œ-InnoDB" class="headerlink" title="MyISAM å’Œ InnoDB"></a>MyISAM å’Œ InnoDB</h1><table>
<thead>
<tr>
<th style="text-align:left">åç§°</th>
<th style="text-align:left"><code>MyISAM</code></th>
<th style="text-align:left"><code>InnoDB</code></th>
<th style="text-align:left">å¤‡æ³¨</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">ä½¿ç”¨åœºæ™¯</td>
<td style="text-align:left">ä¸ºé€Ÿåº¦è€Œè®¾è®¡ï¼Œå’Œ <code>SELECT</code> æ­é…ä½¿ç”¨æ›´å¥½</td>
<td style="text-align:left">ä¸ºé«˜å¯é æ€§å’Œé«˜æ€§èƒ½è€Œè®¾è®¡ï¼Œé€‚åˆå¤„ç†å¤§é‡æ•°æ®</td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">è¡¨é”ç±»å‹</td>
<td style="text-align:left">è¡¨çº§é”ï¼Œç‰¹å®šçš„æ“ä½œä¼šå°†æ•´å¼ è¡¨é”èµ·æ¥ï¼Œä¸Šé”æœŸé—´ï¼Œè¡¨ä¸­çš„æ•°æ®ä¸èƒ½è¿›è¡Œå…¶å®ƒæ“ä½œã€‚åå‘é™æ€æ•°æ®ï¼ŒåŠ¨æ€æ•°æ®ä¼šå½±å“æ€§èƒ½</td>
<td style="text-align:left">è¡Œçº§é”ï¼Œåªå¯¹ <code>SELECTï¼ŒUPDATEï¼ŒDELETE</code> æ“ä½œçš„ç‰¹å®šæ•°æ®åŠ ä¸Šè¡Œé”ï¼Œä¸Šé”æœŸé—´ï¼Œè¡¨ä¸­çš„å…¶å®ƒæ•°æ®ä¾ç„¶èƒ½è¢«æ“ä½œ</td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">å¤–é”®æ”¯æŒ</td>
<td style="text-align:left">ä¸æ”¯æŒ</td>
<td style="text-align:left">æ”¯æŒï¼Œå¯¹å¤–é”®å’Œå¼•ç”¨å®Œæ•´æ€§æ”¯æŒï¼ŒåŒ…æ‹¬é€’å½’å¼åˆ é™¤å’Œæ›´æ–°</td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">äº‹åŠ¡æ”¯æŒ</td>
<td style="text-align:left">ä¸æ”¯æŒï¼Œæ²¡æœ‰ <code>COMMIT</code> å’Œ <code>ROLLBACK</code>ï¼Œå¯¹æ“ä½œæ²¡æœ‰å›é€€çš„ä½™åœ°</td>
<td style="text-align:left">æ”¯æŒï¼Œæ‰§è¡Œ <code>COMMIT</code> å’Œ <code>ROLLBACK</code> æ“ä½œï¼Œå¯ä»¥å°†äº‹åŠ¡ä¸­çš„æ•°æ®å˜åŒ–è¿›è¡Œå›æ»šï¼Œå´©æºƒåçš„è‡ªåŠ¨æ¢å¤</td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">é›†ç¾¤æ”¯æŒ</td>
<td style="text-align:left">ä¸æ”¯æŒ</td>
<td style="text-align:left">å¹¶ä¸å®Œå…¨æ”¯æŒã€‚å¯ä»¥å°†è¡¨è½¬æ¢ä¸º <code>NDB</code> å­˜å‚¨å¼•æ“è€Œç”¨åœ¨é›†ç¾¤ç¯å¢ƒä¸­</td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">æ•°æ®æ“ä½œ</td>
<td style="text-align:left">æ•°æ®å‹ç¼©ï¼Œè‡ªæˆ‘å¤åˆ¶ï¼ŒæŸ¥è¯¢ç¼“å­˜ï¼Œæ•°æ®åŠ å¯†</td>
<td style="text-align:left">æ•°æ®å‹ç¼©ï¼Œè‡ªæˆ‘å¤åˆ¶ï¼ŒæŸ¥è¯¢ç¼“å­˜ï¼Œæ•°æ®åŠ å¯†</td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">å…¨æ–‡ç´¢å¼•</td>
<td style="text-align:left">æ”¯æŒå…¨æ–‡æ£€ç´¢ï¼Œéœ€è¦é€šè¿‡ <code>FULLTEXT</code> ç´¢å¼•æ¥å®ç°</td>
<td style="text-align:left">ä¸æ”¯æŒ <code>FULLTEXT</code> ç±»å‹çš„å…¨æ–‡ç´¢å¼•ï¼Œä½†æ˜¯ <code>InnoDB</code> å¯ä»¥ä½¿ç”¨ <code>sphinx</code> æ’ä»¶æ”¯æŒå…¨æ–‡ç´¢å¼•ï¼Œå¹¶ä¸”æ•ˆæœæ›´å¥½</td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">å­˜å‚¨ç»“æ„</td>
<td style="text-align:left">æ¯ä¸ª <code>MyISAM</code> åœ¨ç£ç›˜ä¸Šå­˜å‚¨æˆä¸‰ä¸ªæ–‡ä»¶ã€‚ç¬¬ä¸€ä¸ªæ–‡ä»¶çš„åå­—ä»¥è¡¨çš„åå­—å¼€å§‹ï¼Œæ‰©å±•åæŒ‡å‡ºæ–‡ä»¶ç±»å‹ã€‚<code>.frm</code> æ–‡ä»¶å­˜å‚¨è¡¨å®šä¹‰ã€‚æ•°æ®æ–‡ä»¶çš„æ‰©å±•åä¸º <code>.MYD - MYData</code>ã€‚ç´¢å¼•æ–‡ä»¶çš„æ‰©å±•åæ˜¯ <code>.MYI - MYIndex</code></td>
<td style="text-align:left">æ‰€æœ‰çš„è¡¨éƒ½ä¿å­˜åœ¨åŒä¸€ä¸ªæ•°æ®æ–‡ä»¶ä¸­(ä¹Ÿå¯èƒ½æ˜¯å¤šä¸ªæ–‡ä»¶ï¼Œæˆ–è€…æ˜¯ç‹¬ç«‹çš„è¡¨ç©ºé—´æ–‡ä»¶)ï¼Œ<code>InnoDB</code> è¡¨çš„å¤§å°åªå—é™äºæ“ä½œç³»ç»Ÿæ–‡ä»¶çš„å¤§å°ï¼Œä¸€èˆ¬ä¸º <code>2GB</code></td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">å­˜å‚¨ç©ºé—´</td>
<td style="text-align:left">å¯è¢«å‹ç¼©ï¼Œå­˜å‚¨ç©ºé—´è¾ƒå°ã€‚æ”¯æŒä¸‰ç§ä¸åŒçš„å­˜å‚¨æ ¼å¼ï¼šé™æ€è¡¨(é»˜è®¤ï¼Œä½†æ˜¯æ³¨æ„æ•°æ®æœ«å°¾ä¸èƒ½æœ‰ç©ºæ ¼ï¼Œä¼šè¢«å»æ‰)ï¼ŒåŠ¨æ€è¡¨ï¼Œå‹ç¼©è¡¨</td>
<td style="text-align:left">éœ€è¦æ›´å¤šçš„å†…å­˜å’Œå­˜å‚¨ï¼Œå®ƒä¼šåœ¨ä¸»å†…å­˜ä¸­å»ºç«‹å…¶ä¸“ç”¨çš„ç¼“å†²æ± ç”¨äºé«˜é€Ÿç¼“å†²æ•°æ®å’Œç´¢å¼•</td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left"><code>AUTO_INCREMENT</code></td>
<td style="text-align:left">å¯ä»¥å’Œå…¶ä»–å­—æ®µä¸€èµ·å»ºç«‹è”åˆç´¢å¼•ã€‚å¼•æ“çš„è‡ªåŠ¨å¢é•¿åˆ—å¿…é¡»æ˜¯ç´¢å¼•ï¼Œå¦‚æœæ˜¯ç»„åˆç´¢å¼•ï¼Œè‡ªåŠ¨å¢é•¿å¯ä»¥ä¸æ˜¯ç¬¬ä¸€åˆ—ï¼Œä»–å¯ä»¥æ ¹æ®å‰é¢å‡ åˆ—è¿›è¡Œæ’åºåé€’å¢</td>
<td style="text-align:left"><code>InnoDB</code> ä¸­å¿…é¡»åŒ…å«åªæœ‰è¯¥å­—æ®µçš„ç´¢å¼•ã€‚å¼•æ“çš„è‡ªåŠ¨å¢é•¿åˆ—å¿…é¡»æ˜¯ç´¢å¼•ï¼Œå¦‚æœæ˜¯ç»„åˆç´¢å¼•ä¹Ÿå¿…é¡»æ˜¯ç»„åˆç´¢å¼•çš„ç¬¬ä¸€åˆ—</td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">è¡¨ä¸»é”®</td>
<td style="text-align:left">å…è®¸æ²¡æœ‰ä»»ä½•ç´¢å¼•å’Œä¸»é”®çš„è¡¨å­˜åœ¨ï¼Œç´¢å¼•éƒ½æ˜¯ä¿å­˜è¡Œçš„åœ°å€</td>
<td style="text-align:left">å¦‚æœæ²¡æœ‰è®¾å®šä¸»é”®æˆ–è€…éç©ºå”¯ä¸€ç´¢å¼•ï¼Œå°±ä¼šè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ª <code>6</code> å­—èŠ‚çš„ä¸»é”®(ç”¨æˆ·ä¸å¯è§)ï¼Œæ•°æ®æ˜¯ä¸»ç´¢å¼•çš„ä¸€éƒ¨åˆ†ï¼Œé™„åŠ ç´¢å¼•ä¿å­˜çš„æ˜¯ä¸»ç´¢å¼•çš„å€¼</td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">è¡¨çš„è¡Œæ•°</td>
<td style="text-align:left">ä¿å­˜æœ‰è¡¨çš„æ€»è¡Œæ•°ï¼Œå¦‚æœ <code>SELECT COUNT(*) FROM table;</code> ä¼šç›´æ¥å–å‡ºå‡ºè¯¥å€¼</td>
<td style="text-align:left">æ²¡æœ‰ä¿å­˜è¡¨çš„æ€»è¡Œæ•°ï¼Œå¦‚æœ <code>SELECT COUNT(*) FROM table;</code> å°±ä¼šéå†æ•´ä¸ªè¡¨ï¼Œæ¶ˆè€—ç›¸å½“å¤§ï¼Œä½†æ˜¯åœ¨åŠ äº† <code>wehre</code> æ¡ä»¶åï¼Œ<code>MyISAM</code> å’Œ <code>InnoDB</code> å¤„ç†çš„æ–¹å¼éƒ½ä¸€æ ·</td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">å…¶å®ƒæ”¯æŒ</td>
<td style="text-align:left">æ”¯æŒç©ºé—´æ•°æ®ç±»å‹å’Œ <code>SPATIAL</code> ç´¢å¼•</td>
<td style="text-align:left"><code>InnoDB</code> å­˜å‚¨å¼•æ“ä¼šæŠŠæ•°æ®è¡¨é›†ä¸­å­˜å‚¨åœ¨ä¸€ä¸ªå…±äº«çš„è¡¨ç©ºé—´é‡Œ</td>
</tr>
</tbody>
</table>
]]></content>
      <categories>
        <category>mysql</category>
      </categories>
      <tags>
        <tag>mysql</tag>
      </tags>
  </entry>
  <entry>
    <title>MySQL å­—ç¬¦ä¸²è¿æ¥å‡½æ•°</title>
    <url>/2018/01/20/mysql-string-functions/</url>
    <content><![CDATA[<p>å¦‚æœç»“æœçš„é•¿åº¦å¤§äº <code>max_allowed_paâ€‹â€‹cket</code> ç³»ç»Ÿå˜é‡çš„å€¼ï¼Œåˆ™å­—ç¬¦ä¸²å€¼å‡½æ•°å°†è¿”å› <code>NULL</code>ã€‚çœ‹ <a href="https://dev.mysql.com/doc/refman/5.7/en/server-configuration.html">Configuring the Server</a></p>
<span id="more"></span>
<h1 id="å¸¸ç”¨å­—ç¬¦ä¸²å‡½æ•°"><a href="#å¸¸ç”¨å­—ç¬¦ä¸²å‡½æ•°" class="headerlink" title="å¸¸ç”¨å­—ç¬¦ä¸²å‡½æ•°"></a>å¸¸ç”¨å­—ç¬¦ä¸²å‡½æ•°</h1><table>
<thead>
<tr>
<th>åç§°</th>
<th>æè¿°</th>
<th>å¤‡æ³¨</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>LEFT()</code></td>
<td>ä»å·¦è¾¹æˆªå–æŒ‡å®šçš„å­—ç¬¦ä¸²</td>
<td></td>
</tr>
<tr>
<td><code>MID()</code></td>
<td>ä»æŒ‡å®šçš„ä½ç½®æˆªå–å­—ç¬¦ä¸²</td>
<td></td>
</tr>
<tr>
<td><code>RIGHT()</code></td>
<td>ä»å³è¾¹æˆªå–æŒ‡å®šçš„å­—ç¬¦ä¸²</td>
<td></td>
</tr>
<tr>
<td><code>TRIM()</code></td>
<td>ç§»é™¤å­—ç¬¦ä¸²ä¸¤ç«¯çš„ç©ºæ ¼</td>
<td></td>
</tr>
<tr>
<td><code>SUBSTR()</code></td>
<td>æˆªå–æŒ‡å®šçš„å­—ç¬¦ä¸²</td>
<td></td>
</tr>
<tr>
<td><code>SUBSTRING()</code></td>
<td>æˆªå–æŒ‡å®šçš„å­—ç¬¦ä¸²</td>
<td></td>
</tr>
<tr>
<td><code>SUBSTRING_INDEX()</code></td>
<td>æˆªå–æŒ‡å®šçš„å®šç•Œç¬¦å‡ºç°çš„æ¬¡æ•°ä¹‹å‰çš„å­—ç¬¦ä¸²</td>
</tr>
</tbody>
</table>
<h1 id="å­—ç¬¦ä¸²å‡½æ•°ç”¨æ³•"><a href="#å­—ç¬¦ä¸²å‡½æ•°ç”¨æ³•" class="headerlink" title="å­—ç¬¦ä¸²å‡½æ•°ç”¨æ³•"></a>å­—ç¬¦ä¸²å‡½æ•°ç”¨æ³•</h1><h2 id="LEFT-å’Œ-RIGHT-å‡½æ•°"><a href="#LEFT-å’Œ-RIGHT-å‡½æ•°" class="headerlink" title="LEFT å’Œ RIGHT å‡½æ•°"></a>LEFT å’Œ RIGHT å‡½æ•°</h2><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">LEFT</span>(<span class="string">&#x27;hello world, hello mysql&#x27;</span>, <span class="number">5</span>) <span class="keyword">AS</span> url;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">RIGHT</span>(<span class="string">&#x27;hello world, hello mysql&#x27;</span>, <span class="number">5</span>) <span class="keyword">AS</span> url;</span><br><span class="line"></span><br><span class="line"><span class="operator">/</span><span class="operator">/</span> ç»“æœ</span><br><span class="line">hello</span><br><span class="line">mysql</span><br></pre></td></tr></table></figure>
<h2 id="TRIM-å‡½æ•°"><a href="#TRIM-å‡½æ•°" class="headerlink" title="TRIM å‡½æ•°"></a>TRIM å‡½æ•°</h2><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="built_in">TRIM</span>(<span class="string">&#x27;  http://www.mysql.com  &#x27;</span>) <span class="keyword">AS</span> url;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">TRIM</span>(<span class="keyword">LEADING</span> <span class="string">&#x27;xyz&#x27;</span> <span class="keyword">FROM</span> <span class="string">&#x27;xyzxyzxyzhello world&#x27;</span>) <span class="keyword">AS</span> url;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">TRIM</span>(<span class="keyword">BOTH</span> <span class="string">&#x27;z&#x27;</span> <span class="keyword">FROM</span> <span class="string">&#x27;zzzzzhello worldzzzzz&#x27;</span>) <span class="keyword">AS</span> url;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">TRIM</span>(<span class="keyword">TRAILING</span> <span class="string">&#x27;test&#x27;</span> <span class="keyword">FROM</span> <span class="string">&#x27;hello worldtest&#x27;</span>) <span class="keyword">AS</span> url;</span><br><span class="line"></span><br><span class="line"><span class="operator">/</span><span class="operator">/</span> ç»“æœ</span><br><span class="line">http:<span class="operator">/</span><span class="operator">/</span>www.mysql.com</span><br><span class="line">hello world</span><br><span class="line">hello world</span><br><span class="line">hello world</span><br></pre></td></tr></table></figure>
<h2 id="SUBSTR-å’Œ-SUBSTRING-å’Œ-MID-å‡½æ•°"><a href="#SUBSTR-å’Œ-SUBSTRING-å’Œ-MID-å‡½æ•°" class="headerlink" title="SUBSTR å’Œ SUBSTRING å’Œ MID å‡½æ•°"></a>SUBSTR å’Œ SUBSTRING å’Œ MID å‡½æ•°</h2><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SET</span> <span class="variable">@url</span> <span class="operator">=</span> <span class="string">&#x27;http://www.mysql.com/&#x27;</span>;</span><br><span class="line"><span class="keyword">SELECT</span> MID(<span class="variable">@url</span>, <span class="number">8</span>, <span class="number">13</span>) <span class="keyword">AS</span> url;</span><br><span class="line"><span class="keyword">SELECT</span> SUBSTR(<span class="variable">@url</span>, <span class="number">8</span>, <span class="number">13</span>) <span class="keyword">AS</span> url;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">SUBSTRING</span>(<span class="variable">@url</span> , <span class="number">-14</span>, <span class="number">13</span>) <span class="keyword">AS</span> url;</span><br><span class="line"></span><br><span class="line"><span class="operator">/</span><span class="operator">/</span> ç»“æœ</span><br><span class="line">www.mysql.com</span><br><span class="line">www.mysql.com</span><br><span class="line">www.mysql.com</span><br></pre></td></tr></table></figure>
<h2 id="SUBSTRING-INDEX-å‡½æ•°"><a href="#SUBSTRING-INDEX-å‡½æ•°" class="headerlink" title="SUBSTRING_INDEX å‡½æ•°"></a>SUBSTRING_INDEX å‡½æ•°</h2><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> SUBSTRING_INDEX(<span class="string">&#x27;www.mysql.com.cn&#x27;</span>, <span class="string">&#x27;.&#x27;</span>, <span class="number">3</span>) <span class="keyword">AS</span> url;</span><br><span class="line"><span class="keyword">SELECT</span> SUBSTRING_INDEX(<span class="string">&#x27;hello world, hello mysql&#x27;</span>, <span class="string">&#x27;mysql &#x27;</span>, <span class="number">1</span>) <span class="keyword">AS</span> url;</span><br><span class="line"></span><br><span class="line"><span class="operator">/</span><span class="operator">/</span> ç»“æœ</span><br><span class="line">www.mysql.com</span><br><span class="line">hello world, hello mysql</span><br></pre></td></tr></table></figure>
<h1 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h1><blockquote>
<ul>
<li><a href="https://dev.mysql.com/doc/refman/5.7/en/string-functions.html">String Functions</a></li>
</ul>
</blockquote>
]]></content>
      <categories>
        <category>mysql</category>
      </categories>
      <tags>
        <tag>mysql</tag>
      </tags>
  </entry>
  <entry>
    <title>MySQL å­—ç¬¦ä¸²è¿æ¥å‡½æ•°</title>
    <url>/2018/01/20/mysql-string-concat-functions/</url>
    <content><![CDATA[<p><code>MySQL</code> çš„å­—ç¬¦ä¸²è¿æ¥å‡½æ•° <code>CONCAT</code>ï¼Œ<code>CONCAT_WS</code>ï¼Œ<code>GROUP_CONTACT</code>ã€‚</p>
<span id="more"></span>
<h1 id="æ•°æ®å‡†å¤‡"><a href="#æ•°æ®å‡†å¤‡" class="headerlink" title="æ•°æ®å‡†å¤‡"></a>æ•°æ®å‡†å¤‡</h1><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> Navicat Premium Data Transfer</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> Source Server         : localhost</span></span><br><span class="line"><span class="comment"> Source Server Type    : MySQL</span></span><br><span class="line"><span class="comment"> Source Server Version : 50718</span></span><br><span class="line"><span class="comment"> Source Host           : 127.0.0.1</span></span><br><span class="line"><span class="comment"> Source Database       : test</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> Target Server Type    : MySQL</span></span><br><span class="line"><span class="comment"> Target Server Version : 50718</span></span><br><span class="line"><span class="comment"> File Encoding         : utf-8</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> Date: 07/14/2017 23:53:40 PM</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">SET</span> NAMES utf8mb4;</span><br><span class="line"><span class="keyword">SET</span> FOREIGN_KEY_CHECKS <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="comment">--  Table structure for `demo`</span></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> IF <span class="keyword">EXISTS</span> `demo`;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `demo` (</span><br><span class="line">  `id` <span class="type">int</span>(<span class="number">10</span>) unsigned <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT COMMENT <span class="string">&#x27;ä¸»é”® ID&#x27;</span>,</span><br><span class="line">  `key` <span class="type">varchar</span>(<span class="number">50</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;&#x27;</span> COMMENT <span class="string">&#x27;ç”¨æˆ·å&#x27;</span>,</span><br><span class="line">  `val` <span class="type">varchar</span>(<span class="number">50</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;&#x27;</span> COMMENT <span class="string">&#x27;ç”¨æˆ·å§“&#x27;</span>,</span><br><span class="line">  `createdAt` <span class="type">int</span>(<span class="number">10</span>) unsigned <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;0&#x27;</span> COMMENT <span class="string">&#x27;åˆ›å»ºæ—¶é—´æˆ³&#x27;</span>,</span><br><span class="line">  `updatedAt` <span class="type">int</span>(<span class="number">10</span>) unsigned <span class="keyword">DEFAULT</span> <span class="string">&#x27;0&#x27;</span> COMMENT <span class="string">&#x27;æ›´æ–°æ—¶é—´æˆ³&#x27;</span>,</span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY (`id`)</span><br><span class="line">) ENGINE<span class="operator">=</span>InnoDB AUTO_INCREMENT<span class="operator">=</span><span class="number">26</span> <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="comment">--  Records of `demo`</span></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="keyword">BEGIN</span>;</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `demo` <span class="keyword">VALUES</span> (<span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;A&#x27;</span>, <span class="string">&#x27;10&#x27;</span>, <span class="string">&#x27;0&#x27;</span>, <span class="string">&#x27;0&#x27;</span>), (<span class="string">&#x27;2&#x27;</span>, <span class="string">&#x27;B&#x27;</span>, <span class="string">&#x27;20&#x27;</span>, <span class="string">&#x27;0&#x27;</span>, <span class="string">&#x27;0&#x27;</span>), (<span class="string">&#x27;3&#x27;</span>, <span class="string">&#x27;B&#x27;</span>, <span class="string">&#x27;21&#x27;</span>, <span class="string">&#x27;0&#x27;</span>, <span class="string">&#x27;0&#x27;</span>), (<span class="string">&#x27;4&#x27;</span>, <span class="string">&#x27;C&#x27;</span>, <span class="string">&#x27;30&#x27;</span>, <span class="string">&#x27;0&#x27;</span>, <span class="string">&#x27;0&#x27;</span>), (<span class="string">&#x27;5&#x27;</span>, <span class="string">&#x27;C&#x27;</span>, <span class="string">&#x27;31&#x27;</span>, <span class="string">&#x27;0&#x27;</span>, <span class="string">&#x27;0&#x27;</span>), (<span class="string">&#x27;6&#x27;</span>, <span class="string">&#x27;C&#x27;</span>, <span class="string">&#x27;32&#x27;</span>, <span class="string">&#x27;0&#x27;</span>, <span class="string">&#x27;0&#x27;</span>), (<span class="string">&#x27;7&#x27;</span>, <span class="string">&#x27;D&#x27;</span>, <span class="string">&#x27;40&#x27;</span>, <span class="string">&#x27;0&#x27;</span>, <span class="string">&#x27;0&#x27;</span>), (<span class="string">&#x27;8&#x27;</span>, <span class="string">&#x27;D&#x27;</span>, <span class="string">&#x27;41&#x27;</span>, <span class="string">&#x27;0&#x27;</span>, <span class="string">&#x27;0&#x27;</span>), (<span class="string">&#x27;9&#x27;</span>, <span class="string">&#x27;D&#x27;</span>, <span class="string">&#x27;42&#x27;</span>, <span class="string">&#x27;0&#x27;</span>, <span class="string">&#x27;0&#x27;</span>), (<span class="string">&#x27;10&#x27;</span>, <span class="string">&#x27;D&#x27;</span>, <span class="string">&#x27;43&#x27;</span>, <span class="string">&#x27;0&#x27;</span>, <span class="string">&#x27;0&#x27;</span>), (<span class="string">&#x27;11&#x27;</span>, <span class="string">&#x27;E&#x27;</span>, <span class="string">&#x27;50&#x27;</span>, <span class="string">&#x27;0&#x27;</span>, <span class="string">&#x27;0&#x27;</span>), (<span class="string">&#x27;12&#x27;</span>, <span class="string">&#x27;E&#x27;</span>, <span class="string">&#x27;51&#x27;</span>, <span class="string">&#x27;0&#x27;</span>, <span class="string">&#x27;0&#x27;</span>), (<span class="string">&#x27;13&#x27;</span>, <span class="string">&#x27;E&#x27;</span>, <span class="string">&#x27;52&#x27;</span>, <span class="string">&#x27;0&#x27;</span>, <span class="string">&#x27;0&#x27;</span>), (<span class="string">&#x27;14&#x27;</span>, <span class="string">&#x27;E&#x27;</span>, <span class="string">&#x27;53&#x27;</span>, <span class="string">&#x27;0&#x27;</span>, <span class="string">&#x27;0&#x27;</span>), (<span class="string">&#x27;15&#x27;</span>, <span class="string">&#x27;E&#x27;</span>, <span class="string">&#x27;54&#x27;</span>, <span class="string">&#x27;0&#x27;</span>, <span class="string">&#x27;0&#x27;</span>), (<span class="string">&#x27;16&#x27;</span>, <span class="string">&#x27;F&#x27;</span>, <span class="string">&#x27;60&#x27;</span>, <span class="string">&#x27;0&#x27;</span>, <span class="string">&#x27;0&#x27;</span>), (<span class="string">&#x27;17&#x27;</span>, <span class="string">&#x27;F&#x27;</span>, <span class="string">&#x27;61&#x27;</span>, <span class="string">&#x27;0&#x27;</span>, <span class="string">&#x27;0&#x27;</span>), (<span class="string">&#x27;18&#x27;</span>, <span class="string">&#x27;F&#x27;</span>, <span class="string">&#x27;62&#x27;</span>, <span class="string">&#x27;0&#x27;</span>, <span class="string">&#x27;0&#x27;</span>), (<span class="string">&#x27;19&#x27;</span>, <span class="string">&#x27;F&#x27;</span>, <span class="string">&#x27;63&#x27;</span>, <span class="string">&#x27;0&#x27;</span>, <span class="string">&#x27;0&#x27;</span>), (<span class="string">&#x27;20&#x27;</span>, <span class="string">&#x27;F&#x27;</span>, <span class="string">&#x27;64&#x27;</span>, <span class="string">&#x27;0&#x27;</span>, <span class="string">&#x27;0&#x27;</span>), (<span class="string">&#x27;21&#x27;</span>, <span class="string">&#x27;F&#x27;</span>, <span class="string">&#x27;65&#x27;</span>, <span class="string">&#x27;0&#x27;</span>, <span class="string">&#x27;0&#x27;</span>);</span><br><span class="line"><span class="keyword">COMMIT</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SET</span> FOREIGN_KEY_CHECKS <span class="operator">=</span> <span class="number">1</span>;</span><br></pre></td></tr></table></figure>
<h1 id="GROUP-CONCAT-åˆ—è½¬è¡Œ"><a href="#GROUP-CONCAT-åˆ—è½¬è¡Œ" class="headerlink" title="GROUP_CONCAT() - åˆ—è½¬è¡Œ"></a>GROUP_CONCAT() - åˆ—è½¬è¡Œ</h1><h2 id="å°†-key-å’Œ-val-ç”¨ç©ºæ ¼è¿æ¥ï¼Œç”¨å†’å·åŠ ç©ºæ ¼è¿æˆä¸€è¡Œï¼ŒæŒ‰-id-é™åºï¼Œå¹¶æŒ‰-key-è¿›è¡Œåˆ†ç»„"><a href="#å°†-key-å’Œ-val-ç”¨ç©ºæ ¼è¿æ¥ï¼Œç”¨å†’å·åŠ ç©ºæ ¼è¿æˆä¸€è¡Œï¼ŒæŒ‰-id-é™åºï¼Œå¹¶æŒ‰-key-è¿›è¡Œåˆ†ç»„" class="headerlink" title="å°† key å’Œ val ç”¨ç©ºæ ¼è¿æ¥ï¼Œç”¨å†’å·åŠ ç©ºæ ¼è¿æˆä¸€è¡Œï¼ŒæŒ‰ id é™åºï¼Œå¹¶æŒ‰ key è¿›è¡Œåˆ†ç»„"></a>å°† key å’Œ val ç”¨ç©ºæ ¼è¿æ¥ï¼Œç”¨å†’å·åŠ ç©ºæ ¼è¿æˆä¸€è¡Œï¼ŒæŒ‰ id é™åºï¼Œå¹¶æŒ‰ key è¿›è¡Œåˆ†ç»„</h2><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> GROUP_CONCAT(</span><br><span class="line">           CONCAT_WS(<span class="string">&#x27;: &#x27;</span>, `key`, `val`)</span><br><span class="line">           <span class="keyword">ORDER</span> <span class="keyword">BY</span></span><br><span class="line">           `id` <span class="keyword">DESC</span> SEPARATOR <span class="string">&#x27;, &#x27;</span></span><br><span class="line">       ) <span class="keyword">AS</span> info</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">  demo</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span></span><br><span class="line">  `key`;</span><br><span class="line"></span><br><span class="line"><span class="operator">/</span><span class="operator">/</span> ç»“æœ</span><br><span class="line">A: <span class="number">10</span></span><br><span class="line">B: <span class="number">21</span>, B: <span class="number">20</span></span><br><span class="line">C: <span class="number">32</span>, C: <span class="number">31</span>, C: <span class="number">30</span></span><br><span class="line">D: <span class="number">43</span>, D: <span class="number">42</span>, D: <span class="number">41</span>, D: <span class="number">40</span></span><br><span class="line">E: <span class="number">54</span>, E: <span class="number">53</span>, E: <span class="number">52</span>, E: <span class="number">51</span>, E: <span class="number">50</span></span><br><span class="line">F: <span class="number">65</span>, F: <span class="number">64</span>, F: <span class="number">63</span>, F: <span class="number">62</span>, F: <span class="number">61</span>, F: <span class="number">60</span></span><br></pre></td></tr></table></figure>
<h2 id="å°†æ‰€æœ‰çš„-val-å»é‡åè¿æˆä¸€è¡Œï¼Œå¹¶æŒ‰-key-åˆ†ç»„"><a href="#å°†æ‰€æœ‰çš„-val-å»é‡åè¿æˆä¸€è¡Œï¼Œå¹¶æŒ‰-key-åˆ†ç»„" class="headerlink" title="å°†æ‰€æœ‰çš„ val å»é‡åè¿æˆä¸€è¡Œï¼Œå¹¶æŒ‰ key åˆ†ç»„"></a>å°†æ‰€æœ‰çš„ val å»é‡åè¿æˆä¸€è¡Œï¼Œå¹¶æŒ‰ key åˆ†ç»„</h2><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> GROUP_CONCAT(<span class="keyword">DISTINCT</span> `val`) <span class="keyword">AS</span> `vals`</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">  demo</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span></span><br><span class="line">  `key`;</span><br><span class="line"></span><br><span class="line"><span class="operator">/</span><span class="operator">/</span> ç»“æœ</span><br><span class="line"><span class="number">10</span></span><br><span class="line"><span class="number">20</span>,<span class="number">21</span></span><br><span class="line"><span class="number">30</span>,<span class="number">31</span>,<span class="number">32</span></span><br><span class="line"><span class="number">40</span>,<span class="number">41</span>,<span class="number">42</span>,<span class="number">43</span></span><br><span class="line"><span class="number">50</span>,<span class="number">51</span>,<span class="number">52</span>,<span class="number">53</span>,<span class="number">54</span></span><br><span class="line"><span class="number">60</span>,<span class="number">61</span>,<span class="number">62</span>,<span class="number">63</span>,<span class="number">64</span>,<span class="number">65</span></span><br></pre></td></tr></table></figure>
<h1 id="CONCAT-è¿æ¥å­—ç¬¦ä¸²"><a href="#CONCAT-è¿æ¥å­—ç¬¦ä¸²" class="headerlink" title="CONCAT() - è¿æ¥å­—ç¬¦ä¸²"></a>CONCAT() - è¿æ¥å­—ç¬¦ä¸²</h1><blockquote>
<ul>
<li><a href="https://dev.mysql.com/doc/refman/5.7/en/string-functions.html#function_concat">CONCAT(str1,str2,â€¦)</a></li>
</ul>
</blockquote>
<h2 id="CONCAT-å‡½æ•°åœ¨è¿æ¥å­—ç¬¦ä¸²çš„æ—¶å€™ï¼Œåªè¦å…¶ä¸­ä¸€ä¸ªæ˜¯-NULLï¼Œé‚£ä¹ˆå°†è¿”å›-NULL"><a href="#CONCAT-å‡½æ•°åœ¨è¿æ¥å­—ç¬¦ä¸²çš„æ—¶å€™ï¼Œåªè¦å…¶ä¸­ä¸€ä¸ªæ˜¯-NULLï¼Œé‚£ä¹ˆå°†è¿”å›-NULL" class="headerlink" title="CONCAT() å‡½æ•°åœ¨è¿æ¥å­—ç¬¦ä¸²çš„æ—¶å€™ï¼Œåªè¦å…¶ä¸­ä¸€ä¸ªæ˜¯ NULLï¼Œé‚£ä¹ˆå°†è¿”å› NULL"></a>CONCAT() å‡½æ•°åœ¨è¿æ¥å­—ç¬¦ä¸²çš„æ—¶å€™ï¼Œåªè¦å…¶ä¸­ä¸€ä¸ªæ˜¯ NULLï¼Œé‚£ä¹ˆå°†è¿”å› NULL</h2><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> CONCAT(<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>, <span class="keyword">NULL</span>) <span class="keyword">AS</span> string;</span><br><span class="line"></span><br><span class="line"><span class="operator">/</span><span class="operator">/</span> ç»“æœ</span><br><span class="line"><span class="keyword">NULL</span></span><br></pre></td></tr></table></figure>
<h1 id="CONCAT-WS-æŒ‰æŒ‡å®šç¬¦å·è¿æ¥å­—ç¬¦ä¸²"><a href="#CONCAT-WS-æŒ‰æŒ‡å®šç¬¦å·è¿æ¥å­—ç¬¦ä¸²" class="headerlink" title="CONCAT_WS() - æŒ‰æŒ‡å®šç¬¦å·è¿æ¥å­—ç¬¦ä¸²"></a>CONCAT_WS() - æŒ‰æŒ‡å®šç¬¦å·è¿æ¥å­—ç¬¦ä¸²</h1><blockquote>
<ul>
<li>å³ <code>CONCAT With Separator</code>ï¼Œæ˜¯ <code>CONCAT()</code> çš„ç‰¹æ®Šå½¢å¼</li>
<li><a href="https://dev.mysql.com/doc/refman/5.7/en/string-functions.html#function_concat-ws">CONCAT_WS(separator,str1,str2,â€¦)</a></li>
</ul>
</blockquote>
<h2 id="å’Œ-CONCAT-å‡½æ•°ä¸åŒçš„æ˜¯ï¼ŒCONCAT-WS-å‡½æ•°åœ¨æ‰§è¡Œçš„æ—¶å€™ï¼Œä¸ä¼šå› ä¸º-NULL-å€¼è€Œè¿”å›-NULL"><a href="#å’Œ-CONCAT-å‡½æ•°ä¸åŒçš„æ˜¯ï¼ŒCONCAT-WS-å‡½æ•°åœ¨æ‰§è¡Œçš„æ—¶å€™ï¼Œä¸ä¼šå› ä¸º-NULL-å€¼è€Œè¿”å›-NULL" class="headerlink" title="å’Œ CONCAT() å‡½æ•°ä¸åŒçš„æ˜¯ï¼ŒCONCAT_WS() å‡½æ•°åœ¨æ‰§è¡Œçš„æ—¶å€™ï¼Œä¸ä¼šå› ä¸º NULL å€¼è€Œè¿”å› NULL"></a>å’Œ CONCAT() å‡½æ•°ä¸åŒçš„æ˜¯ï¼ŒCONCAT_WS() å‡½æ•°åœ¨æ‰§è¡Œçš„æ—¶å€™ï¼Œä¸ä¼šå› ä¸º NULL å€¼è€Œè¿”å› NULL</h2><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> CONCAT_WS(</span><br><span class="line">           <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">           <span class="string">&#x27;a&#x27;</span>,</span><br><span class="line">           <span class="string">&#x27;b&#x27;</span>,</span><br><span class="line">           <span class="string">&#x27;c&#x27;</span>,</span><br><span class="line">           <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">           <span class="keyword">NULL</span>,</span><br><span class="line">           <span class="literal">FALSE</span>,</span><br><span class="line">           <span class="literal">TRUE</span></span><br><span class="line">       ) <span class="keyword">AS</span> string;</span><br><span class="line"></span><br><span class="line"><span class="operator">/</span><span class="operator">/</span> ç»“æœ</span><br><span class="line">abc01</span><br></pre></td></tr></table></figure>
<h2 id="å°†æ¯ä¸ª-val-ç”¨-è¿æ¥èµ·æ¥ï¼Œå¹¶æŒ‰-key-åˆ†ç»„"><a href="#å°†æ¯ä¸ª-val-ç”¨-è¿æ¥èµ·æ¥ï¼Œå¹¶æŒ‰-key-åˆ†ç»„" class="headerlink" title="å°†æ¯ä¸ª val ç”¨ | è¿æ¥èµ·æ¥ï¼Œå¹¶æŒ‰ key åˆ†ç»„"></a>å°†æ¯ä¸ª val ç”¨ | è¿æ¥èµ·æ¥ï¼Œå¹¶æŒ‰ key åˆ†ç»„</h2><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> CONCAT_WS(<span class="string">&#x27;|&#x27;</span>, `key`, `val`) <span class="keyword">AS</span> info</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">  demo;</span><br><span class="line"></span><br><span class="line"><span class="operator">/</span><span class="operator">/</span> ç»“æœ</span><br><span class="line">A<span class="operator">|</span><span class="number">10</span></span><br><span class="line">B<span class="operator">|</span><span class="number">20</span></span><br><span class="line">B<span class="operator">|</span><span class="number">21</span></span><br><span class="line">C<span class="operator">|</span><span class="number">30</span></span><br><span class="line">C<span class="operator">|</span><span class="number">31</span></span><br><span class="line">C<span class="operator">|</span><span class="number">32</span></span><br><span class="line">D<span class="operator">|</span><span class="number">40</span></span><br><span class="line">D<span class="operator">|</span><span class="number">41</span></span><br><span class="line">D<span class="operator">|</span><span class="number">42</span></span><br><span class="line">D<span class="operator">|</span><span class="number">43</span></span><br><span class="line">E<span class="operator">|</span><span class="number">50</span></span><br><span class="line">E<span class="operator">|</span><span class="number">51</span></span><br><span class="line">E<span class="operator">|</span><span class="number">52</span></span><br><span class="line">E<span class="operator">|</span><span class="number">53</span></span><br><span class="line">E<span class="operator">|</span><span class="number">54</span></span><br><span class="line">F<span class="operator">|</span><span class="number">60</span></span><br><span class="line">F<span class="operator">|</span><span class="number">61</span></span><br><span class="line">F<span class="operator">|</span><span class="number">62</span></span><br><span class="line">F<span class="operator">|</span><span class="number">63</span></span><br><span class="line">F<span class="operator">|</span><span class="number">64</span></span><br><span class="line">F<span class="operator">|</span><span class="number">65</span></span><br></pre></td></tr></table></figure>
<h2 id="æŒ‰-key-åˆ†ç»„ï¼Œå°†-val-çš„å€¼æŒ‰é€—å·ç©ºæ ¼åˆ†éš”åè¿æ¥åˆ°-key-å­—æ®µä¸­"><a href="#æŒ‰-key-åˆ†ç»„ï¼Œå°†-val-çš„å€¼æŒ‰é€—å·ç©ºæ ¼åˆ†éš”åè¿æ¥åˆ°-key-å­—æ®µä¸­" class="headerlink" title="æŒ‰ key åˆ†ç»„ï¼Œå°† val çš„å€¼æŒ‰é€—å·ç©ºæ ¼åˆ†éš”åè¿æ¥åˆ° key å­—æ®µä¸­"></a>æŒ‰ key åˆ†ç»„ï¼Œå°† val çš„å€¼æŒ‰é€—å·ç©ºæ ¼åˆ†éš”åè¿æ¥åˆ° key å­—æ®µä¸­</h2><p>å¦‚: <code>F: 60, 61, 62, 63, 64, 65</code></p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> GROUP_CONCAT(`key` SEPARATOR <span class="string">&#x27;,&#x27;</span>) <span class="keyword">AS</span> `val`</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">  (</span><br><span class="line">    <span class="keyword">SELECT</span> CONCAT(</span><br><span class="line">               `key`,</span><br><span class="line">               <span class="string">&#x27;: &#x27;</span>,</span><br><span class="line">               GROUP_CONCAT(`val` SEPARATOR <span class="string">&#x27;, &#x27;</span>)</span><br><span class="line">           ) <span class="keyword">AS</span> `key`</span><br><span class="line">    <span class="keyword">FROM</span></span><br><span class="line">      demo</span><br><span class="line">    <span class="keyword">GROUP</span> <span class="keyword">BY</span></span><br><span class="line">      `key`</span><br><span class="line">  ) custom</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span></span><br><span class="line">  `key`;</span><br><span class="line"></span><br><span class="line"><span class="operator">/</span><span class="operator">/</span> ç»“æœ</span><br><span class="line">A: <span class="number">10</span></span><br><span class="line">B: <span class="number">20</span>, <span class="number">21</span></span><br><span class="line">C: <span class="number">30</span>, <span class="number">31</span>, <span class="number">32</span></span><br><span class="line">D: <span class="number">40</span>, <span class="number">41</span>, <span class="number">42</span>, <span class="number">43</span></span><br><span class="line">E: <span class="number">50</span>, <span class="number">51</span>, <span class="number">52</span>, <span class="number">53</span>, <span class="number">54</span></span><br><span class="line">F: <span class="number">60</span>, <span class="number">61</span>, <span class="number">62</span>, <span class="number">63</span>, <span class="number">64</span>, <span class="number">65</span></span><br></pre></td></tr></table></figure>
<h1 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h1><blockquote>
<ul>
<li><a href="https://stackoverflow.com/questions/11889391/difference-between-group-concat-and-concat-ws">Difference between GROUP_CONCAT() and CONCAT_WS()</a></li>
</ul>
</blockquote>
]]></content>
      <categories>
        <category>mysql</category>
      </categories>
      <tags>
        <tag>mysql</tag>
      </tags>
  </entry>
  <entry>
    <title>Nginx 499 çŠ¶æ€ç </title>
    <url>/2019/11/15/nginx-499-faq/</url>
    <content><![CDATA[<p><img src="/images/2019/201911151505.jpg" alt="201911151505.jpg"></p>
<p>ğŸ§¨ ç¬¬ä¸€æ¬¡å¬è¯´ 499 çŠ¶æ€ç æ˜¯å»æ–°æµªé˜…è¯»çš„ä¸€æ¬¡é¢è¯•ï¼Œåæ¥åœ¨å‚åŠ  PHP å¼€å‘è€…å¹´ä¼šæ—¶ï¼Œç‹æ™¶è€å¸ˆç°åœºåšäº†ä¸€æ¬¡æé—®åˆ†äº«ï¼Œå†åæ¥æˆ‘å°±è®°ä¸æ¸…äº†ï¼Œåªæœ‰å®ƒè®¤è¯†æˆ‘ï¼Œæˆ‘ä¸è®¤è¯†å®ƒã€‚æœ‰äº›é—®é¢˜å› ä¸ºè‡ªå·±å·æ‡’è€Œä¸€çŸ¥åŠè§£ï¼Œç›´åˆ°å†æ¬¡è¢«è™ã€‚</p>
<span id="more"></span>
<h1 id="ä»€ä¹ˆæ˜¯-Nginx-499-é”™è¯¯"><a href="#ä»€ä¹ˆæ˜¯-Nginx-499-é”™è¯¯" class="headerlink" title="ä»€ä¹ˆæ˜¯ Nginx 499 é”™è¯¯"></a>ä»€ä¹ˆæ˜¯ Nginx 499 é”™è¯¯</h1><p><a href="http://nginx.org/">Nginx</a> æºç ä¸­å¯¹ <a href="https://github.com/nginx/nginx/blob/release-1.17.5/src/http/ngx_http_request.h#L127~L133"><code>499</code></a> çŠ¶æ€ç çš„å®šä¹‰ï¼š</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * HTTP does not define the code for the case when a client closed</span></span><br><span class="line"><span class="comment"> * the connection while we are processing its request so we introduce</span></span><br><span class="line"><span class="comment"> * own code to log such situation when a client has closed the connection</span></span><br><span class="line"><span class="comment"> * before we even try to send the HTTP header to it</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> NGX_HTTP_CLIENT_CLOSED_REQUEST     499</span></span><br></pre></td></tr></table></figure>
<p>ç¿»è¯‘æˆäººè¯å°±æ˜¯ï¼š</p>
<p>å½“ä¸€ä¸ªå®¢æˆ·ç«¯å…³é—­æ—¶ï¼ŒHTTP ä¸ä¸ºè¿™ç§æƒ…å½¢å®šä¹‰ä»£ç ã€‚åŒæ—¶æˆ‘ä»¬å¤„ç†å®ƒçš„è¯·æ±‚æ—¶ï¼Œæˆ‘ä»¬å¼•å…¥äº†å½“ä¸€ä¸ªå®¢æˆ·ç«¯åœ¨æˆ‘ä»¬å°è¯•å‘å…¶å‘é€ HTTP å¤´ä¹‹å‰å…³é—­è¿æ¥æ—¶ï¼Œä½¿ç”¨è‡ªå·±çš„ä»£ç ï¼ˆä¹Ÿå°±æ˜¯ <a href="https://httpstatuses.com/499"><code>499</code></a> çŠ¶æ€ç ï¼‰æ¥è®°å½•è¿™ç§æƒ…å†µã€‚</p>
<p>è¿›ä¸€æ­¥ç†è§£å°±æ˜¯ï¼šæˆ‘ä»¬ç‰¹ä¹ˆçš„ä¹Ÿä¸çŸ¥é“è¿™ç§æƒ…å†µè¯¥æ€æ ·å¼„ï¼Œäºæ˜¯ä¹æˆ‘ä»¬å°±å†³å®šå®šä¹‰ä¸€ç§çŠ¶æ€ç æ¥è®°å½•ä¸€ä¸‹ï¼Œè‡³äºè¿™ç§æƒ…å†µæ€ä¹ˆå¤„ç†ï¼Œä½ çœ‹ç€åŠå§ï¼</p>
<p>æ€»ç»“ä¸€ä¸‹ï¼š</p>
<ul>
<li><code>499</code> çŠ¶æ€ç ä¸æ˜¯ <a href="https://httpstatuses.com/">HTTP çš„æ ‡å‡†ä»£ç </a></li>
<li><code>499</code> çŠ¶æ€ç æ˜¯ Nginx è‡ªå·±å®šä¹‰ï¼Œç”¨æ¥ <strong>è®°å½•</strong>ï¼ˆä½ æ²¡çœ‹é”™ï¼Œå°±æ˜¯è®°å½•ä¸€ä¸‹ï¼‰ æœåŠ¡ç«¯å‘å®¢æˆ·ç«¯å‘é€ HTTP è¯·æ±‚å¤´ä¹‹å‰ï¼Œå®¢æˆ·ç«¯å·²ç»å…³é—­è¿æ¥çš„ä¸€ç§æƒ…å†µ</li>
<li>æœ€å¸¸è§çš„åœºæ™¯å°±æ˜¯ <code>timeout</code> è®¾ç½®ä¸åˆç†ï¼ŒNginx æŠŠè¯·æ±‚è½¬å‘ä¸Šæ¸¸æœåŠ¡å™¨ï¼Œä¸Šæ¸¸æœåŠ¡å™¨æ…¢ååçš„å¤„ç†ï¼Œå®¢æˆ·ç«¯ç­‰ä¸åŠäº†ä¸»åŠ¨æ–­å¼€é“¾æ¥ï¼ŒNginx å°±è´Ÿè´£è®°å½•äº† <code>499</code></li>
</ul>
<h1 id="ä»€ä¹ˆæƒ…å†µ-Nginx-è®°å½•-499-é”™è¯¯æ—¥å¿—"><a href="#ä»€ä¹ˆæƒ…å†µ-Nginx-è®°å½•-499-é”™è¯¯æ—¥å¿—" class="headerlink" title="ä»€ä¹ˆæƒ…å†µ Nginx è®°å½• 499 é”™è¯¯æ—¥å¿—"></a>ä»€ä¹ˆæƒ…å†µ Nginx è®°å½• 499 é”™è¯¯æ—¥å¿—</h1><blockquote>
<p>è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨ <a href="https://curl.haxx.se/"><code>curl</code></a> æ¨¡æ‹Ÿè¯·æ±‚ä¸€ä¸‹ï¼Œæ›´å¤š <code>curl</code> çš„éªšæ“ä½œè¯·è®¿é—® <a href="https://www.ruanyifeng.com/blog/2019/09/curl-reference.html">curl çš„ç”¨æ³•æŒ‡å—</a>ã€‚</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> $(seq 1 10); <span class="keyword">do</span> curl -m 2 http://api.example.test; <span class="keyword">done</span></span><br><span class="line">curl: (28) Operation timed out after 2000 milliseconds with 0 bytes received</span><br><span class="line">curl: (28) Operation timed out after 2004 milliseconds with 0 bytes received</span><br><span class="line">curl: (28) Operation timed out after 2004 milliseconds with 0 bytes received</span><br><span class="line">curl: (28) Operation timed out after 2001 milliseconds with 0 bytes received</span><br><span class="line">curl: (28) Operation timed out after 2000 milliseconds with 0 bytes received</span><br><span class="line">curl: (28) Operation timed out after 2003 milliseconds with 0 bytes received</span><br><span class="line">curl: (28) Operation timed out after 2002 milliseconds with 0 bytes received</span><br><span class="line">curl: (28) Operation timed out after 2005 milliseconds with 0 bytes received</span><br><span class="line">curl: (28) Operation timed out after 2000 milliseconds with 0 bytes received</span><br><span class="line">curl: (28) Operation timed out after 2001 milliseconds with 0 bytes received</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">tail -f /var/<span class="built_in">log</span>/nginx/apiexample.access.log</span><br><span class="line"></span><br><span class="line">172.19.0.1 - - [15/Nov/2019:06:32:19 +0000] <span class="string">&quot;GET / HTTP/1.1&quot;</span> 499 0 <span class="string">&quot;-&quot;</span> <span class="string">&quot;curl/7.67.0&quot;</span></span><br><span class="line">172.19.0.1 - - [15/Nov/2019:06:32:22 +0000] <span class="string">&quot;GET / HTTP/1.1&quot;</span> 499 0 <span class="string">&quot;-&quot;</span> <span class="string">&quot;curl/7.67.0&quot;</span></span><br><span class="line">172.19.0.1 - - [15/Nov/2019:06:32:24 +0000] <span class="string">&quot;GET / HTTP/1.1&quot;</span> 499 0 <span class="string">&quot;-&quot;</span> <span class="string">&quot;curl/7.67.0&quot;</span></span><br><span class="line">172.19.0.1 - - [15/Nov/2019:06:32:26 +0000] <span class="string">&quot;GET / HTTP/1.1&quot;</span> 499 0 <span class="string">&quot;-&quot;</span> <span class="string">&quot;curl/7.67.0&quot;</span></span><br><span class="line">172.19.0.1 - - [15/Nov/2019:06:32:28 +0000] <span class="string">&quot;GET / HTTP/1.1&quot;</span> 499 0 <span class="string">&quot;-&quot;</span> <span class="string">&quot;curl/7.67.0&quot;</span></span><br><span class="line">172.19.0.1 - - [15/Nov/2019:06:32:30 +0000] <span class="string">&quot;GET / HTTP/1.1&quot;</span> 499 0 <span class="string">&quot;-&quot;</span> <span class="string">&quot;curl/7.67.0&quot;</span></span><br><span class="line">172.19.0.1 - - [15/Nov/2019:06:32:32 +0000] <span class="string">&quot;GET / HTTP/1.1&quot;</span> 499 0 <span class="string">&quot;-&quot;</span> <span class="string">&quot;curl/7.67.0&quot;</span></span><br><span class="line">172.19.0.1 - - [15/Nov/2019:06:32:34 +0000] <span class="string">&quot;GET / HTTP/1.1&quot;</span> 499 0 <span class="string">&quot;-&quot;</span> <span class="string">&quot;curl/7.67.0&quot;</span></span><br><span class="line">172.19.0.1 - - [15/Nov/2019:06:32:36 +0000] <span class="string">&quot;GET / HTTP/1.1&quot;</span> 499 0 <span class="string">&quot;-&quot;</span> <span class="string">&quot;curl/7.67.0&quot;</span></span><br><span class="line">172.19.0.1 - - [15/Nov/2019:06:32:38 +0000] <span class="string">&quot;GET / HTTP/1.1&quot;</span> 499 0 <span class="string">&quot;-&quot;</span> <span class="string">&quot;curl/7.67.0&quot;</span></span><br></pre></td></tr></table></figure>
<p>å¦‚ä¸Šæ‰€è§ï¼Œä½¿ç”¨ <code>Timeout</code> å¾ˆå®¹æ˜“æ¨¡æ‹Ÿå‡º <code>499</code> è¿™ç§æƒ…å½¢ã€‚</p>
<p>è®°å½• <code>499</code> çš„æƒ…å½¢ï¼š</p>
<ul>
<li>å¦‚ä¸Šæ‰€ç¤ºï¼Œæ•°æ®ä¼ è¾“çš„æœ€å¤§å…è®¸æ—¶é—´è¶…æ—¶çš„è¯ï¼ŒCurl æ–­å¼€äº†è¯·æ±‚ï¼Œè€Œ Web æœåŠ¡å™¨å¦‚ Nginx è¿˜åœ¨å¤„ç†çš„è¯ï¼Œåˆ™ Nginx ä¼šè®°å½• <code>499</code></li>
<li>å¦‚æœ Nginx ä½œä¸ºåå‘ä»£ç†æ—¶ï¼ŒNginx å°†è¯·æ±‚åˆ†å‘è‡³å¯¹åº”çš„å¤„ç†æœåŠ¡å™¨æ—¶ï¼Œæœ‰ä¸¤å¯¹è¶…æ—¶å‚æ•°çš„è®¾ç½®ï¼š<code>proxy_send_timeout</code> å’Œ <code>proxy_read_timeout</code>ã€<code>fastcgi_send_timeout</code> å’Œ <code>fastcgi_read_timeout</code>ã€‚ä¸¤å¯¹å‚æ•°é»˜è®¤çš„è¶…æ—¶æ—¶é—´éƒ½æ˜¯ <code>60s</code>ã€‚åœ¨ Nginx å‡ºç° <code>499</code> çš„æƒ…å†µä¸‹ï¼Œå¯ä»¥ç»“åˆè¯·æ±‚æ–­å¼€å‰çš„è€—æ—¶å’Œè¿™ä¸¤å¯¹è®¾å®šçš„æ—¶é—´è¿›è¡Œå¯¹æ¯”ï¼Œçœ‹ä¸€ä¸‹æ˜¯ä¸æ˜¯åœ¨ <code>proxy_pass</code> æˆ–è€… <code>fastcgi_pass</code> å¤„ç†æ—¶ï¼Œè®¾ç½®çš„è¶…æ—¶æ—¶é—´çŸ­äº†</li>
<li>å¦‚æœ PHP æ“ä½œè¶…æ—¶ã€‚æ‰“å¼€ <code>php.ini</code> æŸ¥çœ‹ <code>max_execution_time</code> å’Œ <code>max_input_time</code> ä¸¤ä¸ªå‚æ•°ã€‚ä¸¤è€…åˆ†åˆ«æ˜¯ <code>PHP</code> ç¨‹åºæ‰§è¡Œçš„æœ€é•¿æ—¶é—´å’Œè¡¨å•æäº¤çš„æœ€é•¿æ—¶é—´</li>
<li>å¦‚æœä¸¤æ¬¡æäº¤ POST è¿‡å¿«å°±ä¼šå‡ºç° <code>499</code> çš„æƒ…å†µï¼ŒNginx è®¤ä¸ºæ˜¯ä¸å®‰å…¨çš„è¿æ¥ï¼Œä¸»åŠ¨æ‹’ç»äº†å®¢æˆ·ç«¯çš„è¿æ¥</li>
<li>ç›¸å…³è´Ÿè½½å‡è¡¡é…ç½®ç­‰</li>
</ul>
<h1 id="å¦‚ä½•æœ‰æ•ˆé˜²æ­¢-Nginx-è®°å½•-499-é”™è¯¯"><a href="#å¦‚ä½•æœ‰æ•ˆé˜²æ­¢-Nginx-è®°å½•-499-é”™è¯¯" class="headerlink" title="å¦‚ä½•æœ‰æ•ˆé˜²æ­¢ Nginx è®°å½• 499 é”™è¯¯"></a>å¦‚ä½•æœ‰æ•ˆé˜²æ­¢ Nginx è®°å½• 499 é”™è¯¯</h1><p>ç»¼ä¸Šæ‰€è¿°ï¼Œæˆ‘ä»¬å¯ä»¥å¾—å‡ºä¸€ä¸ªç»“è®ºï¼ŒHTTP è¯·æ±‚åœ¨æŒ‡å®šçš„æ—¶é—´å†…æ²¡èƒ½æ‹¿åˆ°å“åº”è€Œå…³é—­äº†è¿æ¥ï¼Œå°±ä¼šå‘ç”Ÿ Nginx è®°å½• <code>499</code> é”™è¯¯çš„æƒ…å†µã€‚è¿™ä¸ªæ¶‰åŠåˆ°ä¸¤ä¸ªé‡è¦çš„é—®é¢˜ï¼š<strong>æ—¶é—´é—®é¢˜</strong> å’Œ <strong>æ€§èƒ½é—®é¢˜</strong>ï¼ˆæ€§èƒ½é—®é¢˜å¤ªè¿‡å®½æ³›å°±ä¸æåŠäº†ï¼‰ï¼Œæ‰€ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ä¹Ÿå°±ä»è¿™ä¸¤æ–¹é¢å…¥æ‰‹ã€‚</p>
<p>å½“ç„¶è¿˜æœ‰é…ç½® <a href="http://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_ignore_client_abort"><code>proxy_ignore_client_abort</code></a> å‚æ•°ä¸º <code>on</code> æ¥è§£å†³çš„ï¼ˆè®©ä»£ç†æœåŠ¡ç«¯ä¸è¦ä¸»åŠ¨å…³é—­å®¢æˆ·ç«¯çš„è¿æ¥ï¼‰ã€‚ä½†æ˜¯è¿™æ ·ä¹Ÿæœ‰ä¸€å®šçš„é£é™©ï¼Œä¼šæ‹–å®æœåŠ¡å™¨ã€‚å‘ç”Ÿè¿™ä¸ªé”™è¯¯ï¼Œå¦‚æœæœåŠ¡å™¨ CPU å’Œ Memory ä¸ç®—å¤ªé«˜ï¼Œä¸€èˆ¬æ˜¯æ•°æ®åº“å’Œç¨‹åºçš„é—®é¢˜ï¼Œæ•°æ®åº“å¤„ç†è¾ƒæ…¢æˆ–è€…ç¨‹åºçº¿ç¨‹è¾ƒä½ã€‚ç»“åˆæƒ…å†µè°ƒæ•´ï¼Œæ¯”å¦‚è¯»å†™åˆ†ç¦»æˆ–è€…ç¨‹åºçº¿ç¨‹æ•°è°ƒé«˜ã€‚</p>
<p>æ–‡æ¡£ä¸­å¯¹ <code>proxy_ignore_client_abort</code> å‚æ•°çš„è¯´æ˜ï¼š</p>
<blockquote>
<p>Determines whether the connection with a proxied server should be closed when a client closes the connection without waiting for a response.</p>
</blockquote>
<p>ç¿»è¯‘ï¼šå½“ä¸€ä¸ªå®¢æˆ·ç«¯å…³é—­è¿æ¥è€Œä¸ç­‰å¾…å“åº”æ—¶ï¼Œç¡®å®šä¸ä»£ç†æœåŠ¡å™¨çš„è¿æ¥æ˜¯å¦åº”è¯¥å…³é—­ã€‚</p>
]]></content>
      <categories>
        <category>nginx</category>
      </categories>
      <tags>
        <tag>nginx</tag>
      </tags>
  </entry>
  <entry>
    <title>MySQL æ”¯æŒ emoji å›¾æ ‡çš„è®¾ç½®</title>
    <url>/2018/01/21/mysql-support-emoji/</url>
    <content><![CDATA[<h1 id="å¸¸ç”¨å­—ç¬¦é›†"><a href="#å¸¸ç”¨å­—ç¬¦é›†" class="headerlink" title="å¸¸ç”¨å­—ç¬¦é›†"></a>å¸¸ç”¨å­—ç¬¦é›†</h1><blockquote>
<p><code>Unicode</code>ï¼šæ˜¯å­—ç¬¦é›†ï¼Œè€Œæ²¡æœ‰ç¼–ç æ–¹å¼<br><code>UTF-8</code>ï¼šæ˜¯ä¸€ç§ <code>Unicode</code> å­—ç¬¦é›†çš„ç¼–ç æ–¹å¼ï¼Œå…¶ä»–è¿˜æœ‰ <code>UTF-16</code>ï¼Œ<code>UTF-32</code> ç­‰</p>
</blockquote>
<ul>
<li><code>ASCII</code> - <code>American Standard Code for Information Interchange</code>ï¼šç¾å›½ä¿¡æ¯äº¤æ¢æ ‡å‡†ä»£ç ï¼Œä¸»è¦ç”¨äºæ˜¾ç¤ºç°ä»£è‹±è¯­å’Œå…¶ä»–è¥¿æ¬§è¯­è¨€ã€‚<strong>å•å­—èŠ‚</strong>ç¼–ç ï¼Œ<code>7</code> ä½è¡¨ç¤ºä¸€ä¸ªå­—ç¬¦ï¼Œå…± <code>128</code> ä¸ªå­—ç¬¦</li>
<li><code>GBK</code> - <code>Chinese Internal Code Specification</code>ï¼šæ±‰å­—å†…ç æ‰©å±•è§„èŒƒã€‚<strong>åŒå­—èŠ‚</strong>ç¼–ç ï¼Œå…±æ”¶å½•äº† <code>21003</code> ä¸ªæ±‰å­—ï¼Œå…±æœ‰ <code>21885</code> ä¸ªå­—ç¬¦ï¼Œå…¼å®¹ <code>GB2312-80</code> æ ‡å‡†</li>
<li><code>UTF-8</code> - <code>8-bit Unicode Transformation Format</code>ï¼šé’ˆå¯¹ <code>Unicode</code> çš„å¯å˜é•¿åº¦å­—ç¬¦ç¼–ç ï¼Œåˆç§°ä¸‡å›½ç ã€‚<code>UTF-8</code> ç”¨ <code>1</code> åˆ° <code>6</code> ä¸ªå­—èŠ‚ç¼–ç  <code>Unicode</code> å­—ç¬¦ï¼Œå¦‚æœ <code>UNICODE</code> å­—ç¬¦ç”± <code>2</code> ä¸ªå­—èŠ‚è¡¨ç¤ºï¼Œåˆ™ç¼–ç æˆ <code>UTF-8</code> å¾ˆå¯èƒ½éœ€è¦ <code>3</code> ä¸ªå­—èŠ‚ã€‚è€Œå¦‚æœ <code>UNICODE</code> å­—ç¬¦ç”± <code>4</code> ä¸ªå­—èŠ‚è¡¨ç¤ºï¼Œåˆ™ç¼–ç æˆ <code>UTF-8</code> å¯èƒ½éœ€è¦ <code>6</code> ä¸ªå­—èŠ‚ã€‚<code>Unicode</code> ä¸€ä¸ªä¸­æ–‡å­—ç¬¦å  <code>2</code> ä¸ªå­—èŠ‚ï¼Œè€Œ <code>UTF-8</code> ä¸€ä¸ªä¸­æ–‡å­—ç¬¦å  <code>3</code> ä¸ªå­—èŠ‚</li>
<li><code>utf8mb4</code> - <code>8-bit Unicode Transformation Format</code>ï¼š<code>utf8mb4</code> å…¼å®¹ <code>utf8</code>ï¼Œèƒ½æ”¯æŒæ›´å¤šçš„å­—ç¬¦é›†ï¼Œ<code>MySQL</code> åœ¨ <code>5.5.3</code> ä¹‹åå¢åŠ äº†è¿™ä¸ªç¼–ç ã€‚<code>most bytes 4</code> æ˜¯ä¸“é—¨ç”¨æ¥å…¼å®¹å››å­—èŠ‚çš„ <code>Unicode</code>ï¼Œä¹Ÿå°±æ˜¯è¯´èƒ½å­˜å‚¨å››ä¸ªå­—èŠ‚ï¼Œå¤„ç† <code>emoji</code> è¡¨æƒ…æ¯«æ— å‹åŠ›</li>
</ul>
<h1 id="æ“ä½œ"><a href="#æ“ä½œ" class="headerlink" title="æ“ä½œ"></a>æ“ä½œ</h1><blockquote>
<p>è®¾ç½®æˆ <code>utf8mb4</code> è¯·æ ¹æ®å®é™…æƒ…å†µè€Œå®šï¼Œæ²¡æœ‰å¿…è¦å…¨éƒ¨éƒ½è®¾ç½®ä¸º <code>utf8mb4</code>ã€‚</p>
</blockquote>
<h2 id="å°†æ•°æ®åº“ï¼Œæ•°æ®è¡¨ï¼Œæ•°æ®è¡¨å­—æ®µè®¾ç½®ä¸º-utf8mb4"><a href="#å°†æ•°æ®åº“ï¼Œæ•°æ®è¡¨ï¼Œæ•°æ®è¡¨å­—æ®µè®¾ç½®ä¸º-utf8mb4" class="headerlink" title="å°†æ•°æ®åº“ï¼Œæ•°æ®è¡¨ï¼Œæ•°æ®è¡¨å­—æ®µè®¾ç½®ä¸º utf8mb4"></a>å°†æ•°æ®åº“ï¼Œæ•°æ®è¡¨ï¼Œæ•°æ®è¡¨å­—æ®µè®¾ç½®ä¸º <code>utf8mb4</code></h2><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="operator">/</span><span class="operator">/</span> æ›´æ”¹æ•°æ®åº“çš„ç¼–ç æ–¹å¼</span><br><span class="line"><span class="keyword">ALTER</span> DATABASE test <span class="type">CHARACTER</span> <span class="keyword">SET</span> <span class="operator">=</span> utf8mb4 <span class="keyword">COLLATE</span> <span class="operator">=</span> utf8mb4_general_ci;</span><br><span class="line"></span><br><span class="line"><span class="operator">/</span><span class="operator">/</span> æ›´æ”¹æ•°æ®è¡¨çš„ç¼–ç æ–¹å¼</span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> test.demo <span class="keyword">CONVERT</span> <span class="keyword">TO</span> <span class="type">CHARACTER</span> <span class="keyword">SET</span> utf8mb4 <span class="keyword">COLLATE</span> utf8mb4_general_ci;</span><br><span class="line"></span><br><span class="line"><span class="operator">/</span><span class="operator">/</span> æ›´æ”¹æ•°æ®è¡¨çš„å­—æ®µç¼–ç æ–¹å¼</span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> test.demo</span><br><span class="line">  CHANGE `title` `title` <span class="type">VARCHAR</span>(<span class="number">80</span>) <span class="type">CHARACTER</span> <span class="keyword">SET</span> utf8mb4</span><br><span class="line"><span class="keyword">COLLATE</span> utf8mb4_general_ci <span class="keyword">DEFAULT</span> <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">æˆ–</span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> test.demo</span><br><span class="line">  MODIFY `title` <span class="type">VARCHAR</span>(<span class="number">80</span>) <span class="type">CHARACTER</span> <span class="keyword">SET</span> utf8mb4</span><br><span class="line"><span class="keyword">COLLATE</span> utf8mb4_general_ci <span class="keyword">DEFAULT</span> <span class="string">&#x27;&#x27;</span>;</span><br></pre></td></tr></table></figure>
<h2 id="æŸ¥çœ‹è®¾ç½®"><a href="#æŸ¥çœ‹è®¾ç½®" class="headerlink" title="æŸ¥çœ‹è®¾ç½®"></a>æŸ¥çœ‹è®¾ç½®</h2><h3 id="æŸ¥çœ‹æ•°æ®åº“è®¾ç½®æƒ…å†µ"><a href="#æŸ¥çœ‹æ•°æ®åº“è®¾ç½®æƒ…å†µ" class="headerlink" title="æŸ¥çœ‹æ•°æ®åº“è®¾ç½®æƒ…å†µ"></a>æŸ¥çœ‹æ•°æ®åº“è®¾ç½®æƒ…å†µ</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SHOW</span> VARIABLES</span><br><span class="line"><span class="keyword">WHERE</span> Variable_name <span class="keyword">LIKE</span> <span class="string">&#x27;character\_set\_%&#x27;</span> <span class="keyword">OR</span> Variable_name <span class="keyword">LIKE</span> <span class="string">&#x27;collation%&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="operator">/</span><span class="operator">/</span> ç»“æœ</span><br><span class="line">character_set_client     utf8mb4</span><br><span class="line">character_set_connection utf8mb4</span><br><span class="line">character_set_database	 utf8mb4</span><br><span class="line">character_set_filesystem <span class="type">binary</span></span><br><span class="line">character_set_results	 utf8mb4</span><br><span class="line">character_set_server	 utf8mb4</span><br><span class="line">character_set_system     utf8</span><br><span class="line">collation_connection     utf8mb4_general_ci</span><br><span class="line">collation_database       utf8mb4_general_ci</span><br><span class="line">collation_server         utf8mb4_general_ci</span><br></pre></td></tr></table></figure>
<h3 id="æŸ¥çœ‹æ•°æ®è¡¨è®¾ç½®æƒ…å†µ"><a href="#æŸ¥çœ‹æ•°æ®è¡¨è®¾ç½®æƒ…å†µ" class="headerlink" title="æŸ¥çœ‹æ•°æ®è¡¨è®¾ç½®æƒ…å†µ"></a>æŸ¥çœ‹æ•°æ®è¡¨è®¾ç½®æƒ…å†µ</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SHOW</span> <span class="keyword">FULL</span> COLUMNS <span class="keyword">FROM</span> test.demo;</span><br></pre></td></tr></table></figure>
<h1 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h1><blockquote>
<ul>
<li><a href="https://www.zhihu.com/question/23374078">Unicode å’Œ UTF-8 æœ‰ä½•åŒºåˆ«</a></li>
<li><a href="http://ourmysql.com/archives/1402">æ¸…å®˜è°ˆ mysql ä¸­ utf8 å’Œ utf8mb4 åŒºåˆ«</a></li>
</ul>
</blockquote>
]]></content>
      <categories>
        <category>mysql</category>
      </categories>
      <tags>
        <tag>mysql</tag>
      </tags>
  </entry>
  <entry>
    <title>PHP - å†’æ³¡æ’åº</title>
    <url>/2018/04/14/php-bubble-sort/</url>
    <content><![CDATA[<p>å†’æ³¡æ’åºæ˜¯å‡ ä¹æ˜¯é¢è¯•å’Œç¨æ‡‚ç‚¹ç®—æ³•ä»¥åŠèµ„æ·±äººå£«çš„å£å¤´ç¦…ï¼Œèº«ä¸ºç¨‹åºå‘˜ï¼Œä½ è¦æ˜¯ä¸çŸ¥é“è¿™ä¸ªæ’åºï¼Œå°±ä¼šè¢«ä¸¥é‡é„™è§†çš„ã€‚ç¬”è€…ä»¥å‰ä¹Ÿä¸ä¼šè¿™ä¸ªæ’åºï¼Œæ›´ä¸çŸ¥é“è¿™ä¸ªæ’åºæœ‰ä»€ä¹ˆåµç”¨ï¼Œä½†å¬é‚£ä¹ˆå¤šé«˜æ‰‹å’Œå¤§ç‰›è¯´è¿™äº›åŸºç¡€å¾ˆé‡è¦ï¼Œä¹Ÿå°±ç¡¬ç€å¤´çš®å•ƒäº†ï¼Œæ¯•ç«Ÿå¤šå­¦ä¹ ä¸€ä¸ç‚¹ä¸œè¥¿ï¼Œæ€»å½’æ²¡ä»€ä¹ˆå®³å¤„</p>
<span id="more"></span>
<h2 id="æ¦‚å¿µ"><a href="#æ¦‚å¿µ" class="headerlink" title="æ¦‚å¿µ"></a>æ¦‚å¿µ</h2><p>å†’æ³¡æ’åº - <code>Bubble Sort</code>ï¼šæ˜¯ä¸€ç§ç®€å•çš„æ’åºç®—æ³•ã€‚å®ƒé‡å¤åœ°èµ°è®¿è¿‡è¦æ’åºçš„æ•°åˆ—ï¼Œä¸€æ¬¡æ¯”è¾ƒä¸¤ä¸ªå…ƒç´ ï¼Œå¦‚æœä»–ä»¬çš„é¡ºåºé”™è¯¯å°±æŠŠä»–ä»¬äº¤æ¢è¿‡æ¥ã€‚èµ°è®¿æ•°åˆ—çš„å·¥ä½œæ˜¯é‡å¤åœ°è¿›è¡Œç›´åˆ°æ²¡æœ‰å†éœ€è¦äº¤æ¢ï¼Œä¹Ÿå°±æ˜¯è¯´è¯¥æ•°åˆ—å·²ç»æ’åºå®Œæˆã€‚è¿™ä¸ªç®—æ³•çš„åå­—ç”±æ¥æ˜¯å› ä¸ºè¶Šå°çš„å…ƒç´ ä¼šç»ç”±äº¤æ¢æ…¢æ…¢ã€æµ®ã€åˆ°æ•°åˆ—çš„é¡¶ç«¯ã€‚</p>
<h2 id="æ­¥éª¤"><a href="#æ­¥éª¤" class="headerlink" title="æ­¥éª¤"></a>æ­¥éª¤</h2><ul>
<li>æ¯”è¾ƒç›¸é‚»çš„å…ƒç´ ã€‚å¦‚æœç¬¬ä¸€ä¸ªæ¯”ç¬¬äºŒä¸ªå¤§ï¼Œå°±äº¤æ¢ä»–ä»¬ä¸¤ä¸ª</li>
<li>å¯¹æ¯ä¸€å¯¹ç›¸é‚»å…ƒç´ ä½œåŒæ ·çš„å·¥ä½œï¼Œä»å¼€å§‹ç¬¬ä¸€å¯¹åˆ°ç»“å°¾çš„æœ€åä¸€å¯¹ã€‚è¿™æ­¥åšå®Œåï¼Œæœ€åçš„å…ƒç´ ä¼šæ˜¯æœ€å¤§çš„æ•°</li>
<li>é’ˆå¯¹æ‰€æœ‰çš„å…ƒç´ é‡å¤ä»¥ä¸Šçš„æ­¥éª¤ï¼Œé™¤äº†æœ€åä¸€ä¸ª</li>
<li>æŒç»­æ¯æ¬¡å¯¹è¶Šæ¥è¶Šå°‘çš„å…ƒç´ é‡å¤ä¸Šé¢çš„æ­¥éª¤ï¼Œç›´åˆ°æ²¡æœ‰ä»»ä½•ä¸€å¯¹æ•°å­—éœ€è¦æ¯”è¾ƒ</li>
</ul>
<h2 id="å®ç°"><a href="#å®ç°" class="headerlink" title="å®ç°"></a>å®ç°</h2><h3 id="æ–¹æ¡ˆä¸€"><a href="#æ–¹æ¡ˆä¸€" class="headerlink" title="æ–¹æ¡ˆä¸€"></a>æ–¹æ¡ˆä¸€</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BubbleSort</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ä¸»è¿è¡Œæ–¹æ³•</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> void</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">main</span>(<span class="params"></span>): <span class="title">void</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="variable">$random</span> = <span class="built_in">self</span>::random();</span><br><span class="line">        <span class="variable">$array</span> = <span class="built_in">self</span>::sort(<span class="variable">$random</span>);</span><br><span class="line">        print_r(<span class="variable">$array</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å†’æ³¡æ’åº</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> array $array</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> array</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">sort</span>(<span class="params"><span class="keyword">array</span> &amp;<span class="variable">$array</span></span>): <span class="title">array</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="variable">$count</span> = count(<span class="variable">$array</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="variable">$i</span> = <span class="number">0</span>; <span class="variable">$i</span> &lt; <span class="variable">$count</span>; <span class="variable">$i</span>++) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="variable">$j</span> = <span class="number">0</span>; <span class="variable">$j</span> &lt; <span class="variable">$count</span> - <span class="variable">$i</span> - <span class="number">1</span>; <span class="variable">$j</span>++) &#123;</span><br><span class="line">                <span class="keyword">if</span> (<span class="built_in">self</span>::compare(<span class="variable">$array</span>[<span class="variable">$j</span>], <span class="variable">$array</span>[<span class="variable">$j</span> + <span class="number">1</span>]) &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                    <span class="built_in">self</span>::swap(<span class="variable">$array</span>[<span class="variable">$j</span>], <span class="variable">$array</span>[<span class="variable">$j</span> + <span class="number">1</span>]);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="variable">$array</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ¯”è¾ƒå¤§å°</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> int $x</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> int $y</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> int</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">compare</span>(<span class="params"><span class="keyword">int</span> <span class="variable">$x</span>, <span class="keyword">int</span> <span class="variable">$y</span></span>): <span class="title">int</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable">$x</span> &lt;=&gt; <span class="variable">$y</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * äº’æ¢ä½ç½®</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> int $x</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> int $y</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> void</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">swap</span>(<span class="params"><span class="keyword">int</span> &amp;<span class="variable">$x</span>, <span class="keyword">int</span> &amp;<span class="variable">$y</span></span>): <span class="title">void</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="variable">$x</span> !== <span class="variable">$y</span>) &#123;</span><br><span class="line">            <span class="variable">$x</span> ^= <span class="variable">$y</span>;</span><br><span class="line">            <span class="variable">$y</span> ^= <span class="variable">$x</span>;</span><br><span class="line">            <span class="variable">$x</span> ^= <span class="variable">$y</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ç”Ÿæˆéšæœºæ•°ç»„</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> int $low</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> int $high</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> int $num</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> array</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">random</span>(<span class="params"><span class="keyword">int</span> <span class="variable">$low</span> = <span class="number">1</span>, <span class="keyword">int</span> <span class="variable">$high</span> = <span class="number">9999</span>, <span class="keyword">int</span> <span class="variable">$num</span> = <span class="number">10</span></span>): <span class="title">array</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="variable">$num</span> = <span class="variable">$num</span> &gt; <span class="variable">$high</span> ? <span class="variable">$high</span> : <span class="variable">$num</span>;</span><br><span class="line">        <span class="variable">$range</span> = range(<span class="variable">$low</span>, <span class="variable">$high</span>);</span><br><span class="line">        <span class="variable">$array</span> = array_rand(array_flip(<span class="variable">$range</span>), <span class="variable">$num</span>);</span><br><span class="line">        shuffle(<span class="variable">$array</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="variable">$array</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">BubbleSort::main();</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»“æœ</span></span><br><span class="line"><span class="keyword">Array</span></span><br><span class="line">(</span><br><span class="line">    [<span class="number">0</span>] =&gt; <span class="number">9</span></span><br><span class="line">    [<span class="number">1</span>] =&gt; <span class="number">656</span></span><br><span class="line">    [<span class="number">2</span>] =&gt; <span class="number">755</span></span><br><span class="line">    [<span class="number">3</span>] =&gt; <span class="number">879</span></span><br><span class="line">    [<span class="number">4</span>] =&gt; <span class="number">3578</span></span><br><span class="line">    [<span class="number">5</span>] =&gt; <span class="number">3812</span></span><br><span class="line">    [<span class="number">6</span>] =&gt; <span class="number">5139</span></span><br><span class="line">    [<span class="number">7</span>] =&gt; <span class="number">6412</span></span><br><span class="line">    [<span class="number">8</span>] =&gt; <span class="number">8804</span></span><br><span class="line">    [<span class="number">9</span>] =&gt; <span class="number">9458</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<h3 id="æ–¹æ¡ˆäºŒ"><a href="#æ–¹æ¡ˆäºŒ" class="headerlink" title="æ–¹æ¡ˆäºŒ"></a>æ–¹æ¡ˆäºŒ</h3><p>æ ‡å¿—å˜é‡ç”¨äºè®°å½•æ¯è¶Ÿå†’æ³¡æ’åºæ˜¯å¦å‘ç”Ÿæ•°æ®å…ƒç´ ä½ç½®äº¤æ¢ã€‚å¦‚æœæ²¡æœ‰å‘ç”Ÿäº¤æ¢ï¼Œè¯´æ˜åºåˆ—å·²ç»æœ‰åºäº†ï¼Œä¸å¿…ç»§ç»­è¿›è¡Œä¸‹å»äº†</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BubbleSort</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ä¸»è¿è¡Œæ–¹æ³•</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> void</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">main</span>(<span class="params"></span>): <span class="title">void</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="variable">$random</span> = <span class="built_in">self</span>::random(<span class="number">100</span>, <span class="number">200</span>);</span><br><span class="line">        <span class="variable">$array</span> = <span class="built_in">self</span>::sort(<span class="variable">$random</span>);</span><br><span class="line">        print_r(<span class="variable">$array</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å†’æ³¡æ’åº</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> array $array</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> array</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">sort</span>(<span class="params"><span class="keyword">array</span> &amp;<span class="variable">$array</span></span>): <span class="title">array</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="variable">$count</span> = count(<span class="variable">$array</span>);</span><br><span class="line">        <span class="variable">$isSwapped</span> = <span class="literal">true</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="variable">$i</span> = <span class="number">0</span>; <span class="variable">$i</span> &lt; <span class="variable">$count</span> &amp;&amp; <span class="variable">$isSwapped</span> === <span class="literal">true</span>; <span class="variable">$i</span>++) &#123;</span><br><span class="line">            <span class="variable">$isSwapped</span> = <span class="literal">false</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="variable">$j</span> = <span class="number">0</span>; <span class="variable">$j</span> &lt; <span class="variable">$count</span> - <span class="variable">$i</span> - <span class="number">1</span>; <span class="variable">$j</span>++) &#123;</span><br><span class="line">                <span class="keyword">if</span> (<span class="built_in">self</span>::compare(<span class="variable">$array</span>[<span class="variable">$j</span>], <span class="variable">$array</span>[<span class="variable">$j</span> + <span class="number">1</span>]) &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                    <span class="built_in">self</span>::swap(<span class="variable">$array</span>[<span class="variable">$j</span>], <span class="variable">$array</span>[<span class="variable">$j</span> + <span class="number">1</span>]);</span><br><span class="line">                    <span class="variable">$isSwapped</span> = <span class="literal">true</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="variable">$array</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ¯”è¾ƒå¤§å°</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> int $x</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> int $y</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> int</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">compare</span>(<span class="params"><span class="keyword">int</span> <span class="variable">$x</span>, <span class="keyword">int</span> <span class="variable">$y</span></span>): <span class="title">int</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable">$x</span> &lt;=&gt; <span class="variable">$y</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * äº’æ¢ä½ç½®</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> int $x</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> int $y</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> void</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">swap</span>(<span class="params"><span class="keyword">int</span> &amp;<span class="variable">$x</span>, <span class="keyword">int</span> &amp;<span class="variable">$y</span></span>): <span class="title">void</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="variable">$x</span> !== <span class="variable">$y</span>) &#123;</span><br><span class="line">            <span class="variable">$t</span> = <span class="variable">$x</span>;</span><br><span class="line">            <span class="variable">$x</span> = <span class="variable">$y</span>;</span><br><span class="line">            <span class="variable">$y</span> = <span class="variable">$t</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ç”Ÿæˆéšæœºæ•°ç»„</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> int $low</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> int $high</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> int $num</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> array</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">random</span>(<span class="params"><span class="keyword">int</span> <span class="variable">$low</span> = <span class="number">1</span>, <span class="keyword">int</span> <span class="variable">$high</span> = <span class="number">9999</span>, <span class="keyword">int</span> <span class="variable">$num</span> = <span class="number">10</span></span>): <span class="title">array</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="variable">$num</span> = <span class="variable">$num</span> &gt; <span class="variable">$high</span> ? <span class="variable">$high</span> : <span class="variable">$num</span>;</span><br><span class="line">        <span class="variable">$range</span> = range(<span class="variable">$low</span>, <span class="variable">$high</span>);</span><br><span class="line">        <span class="variable">$array</span> = array_rand(array_flip(<span class="variable">$range</span>), <span class="variable">$num</span>);</span><br><span class="line">        shuffle(<span class="variable">$array</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="variable">$array</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">BubbleSort::main();</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»“æœ</span></span><br><span class="line"><span class="keyword">Array</span></span><br><span class="line">(</span><br><span class="line">    [<span class="number">0</span>] =&gt; <span class="number">129</span></span><br><span class="line">    [<span class="number">1</span>] =&gt; <span class="number">140</span></span><br><span class="line">    [<span class="number">2</span>] =&gt; <span class="number">141</span></span><br><span class="line">    [<span class="number">3</span>] =&gt; <span class="number">150</span></span><br><span class="line">    [<span class="number">4</span>] =&gt; <span class="number">152</span></span><br><span class="line">    [<span class="number">5</span>] =&gt; <span class="number">159</span></span><br><span class="line">    [<span class="number">6</span>] =&gt; <span class="number">165</span></span><br><span class="line">    [<span class="number">7</span>] =&gt; <span class="number">175</span></span><br><span class="line">    [<span class="number">8</span>] =&gt; <span class="number">191</span></span><br><span class="line">    [<span class="number">9</span>] =&gt; <span class="number">199</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<h3 id="æ–¹æ¡ˆä¸‰"><a href="#æ–¹æ¡ˆä¸‰" class="headerlink" title="æ–¹æ¡ˆä¸‰"></a>æ–¹æ¡ˆä¸‰</h3><div class="note success">
            <p>é¸¡å°¾é…’æ’åº - <code>Cocktail Sort</code>ï¼šä¹Ÿå°±æ˜¯å®šå‘å†’æ³¡æ’åºï¼Œé¸¡å°¾é…’æ…æ‹Œæ’åºï¼Œæ…æ‹Œæ’åºï¼ˆä¹Ÿå¯ä»¥è§†ä½œé€‰æ‹©æ’åºçš„ä¸€ç§å˜å½¢ï¼‰ï¼Œæ¶Ÿæ¼ªæ’åºï¼Œæ¥å›æ’åºæˆ–å¿«ä¹å°æ—¶æ’åºï¼Œæ˜¯å†’æ³¡æ’åºçš„ä¸€ç§å˜å½¢ã€‚æ­¤ç®—æ³•ä¸å†’æ³¡æ’åºçš„ä¸åŒå¤„åœ¨äºæ’åºæ—¶æ˜¯ä»¥åŒå‘åœ¨åºåˆ—ä¸­è¿›è¡Œæ’åº</p>
          </div>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CocktailSort</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ä¸»è¿è¡Œæ–¹æ³•</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> void</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">main</span>(<span class="params"></span>): <span class="title">void</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="variable">$random</span> = <span class="built_in">self</span>::random();</span><br><span class="line">        <span class="variable">$array</span> = <span class="built_in">self</span>::sort(<span class="variable">$random</span>);</span><br><span class="line">        print_r(<span class="variable">$array</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * é¸¡å°¾é…’æ’åº</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> array $array</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> array</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">sort</span>(<span class="params"><span class="keyword">array</span> &amp;<span class="variable">$array</span></span>): <span class="title">array</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="variable">$left</span> = <span class="number">0</span>;</span><br><span class="line">        <span class="variable">$right</span> = count(<span class="variable">$array</span>) - <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> (<span class="variable">$left</span> &lt; <span class="variable">$right</span>) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="variable">$j</span> = <span class="variable">$left</span>; <span class="variable">$j</span> &lt; <span class="variable">$right</span>; <span class="variable">$j</span>++) &#123;</span><br><span class="line">                <span class="keyword">if</span> (<span class="built_in">self</span>::compare(<span class="variable">$array</span>[<span class="variable">$j</span>], <span class="variable">$array</span>[<span class="variable">$j</span> + <span class="number">1</span>]) &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                    <span class="built_in">self</span>::swap(<span class="variable">$array</span>[<span class="variable">$j</span>], <span class="variable">$array</span>[<span class="variable">$j</span> + <span class="number">1</span>]);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="variable">$right</span>--;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">for</span> (<span class="variable">$j</span> = <span class="variable">$right</span>; <span class="variable">$j</span> &gt; <span class="variable">$left</span>; <span class="variable">$j</span>--) &#123;</span><br><span class="line">                <span class="keyword">if</span> (<span class="built_in">self</span>::compare(<span class="variable">$array</span>[<span class="variable">$j</span>], <span class="variable">$array</span>[<span class="variable">$j</span> + <span class="number">1</span>]) &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                    <span class="built_in">self</span>::swap(<span class="variable">$array</span>[<span class="variable">$j</span>], <span class="variable">$array</span>[<span class="variable">$j</span> + <span class="number">1</span>]);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="variable">$left</span>++;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="variable">$array</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ¯”è¾ƒå¤§å°</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> int $x</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> int $y</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> int</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">compare</span>(<span class="params"><span class="keyword">int</span> <span class="variable">$x</span>, <span class="keyword">int</span> <span class="variable">$y</span></span>): <span class="title">int</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable">$x</span> &lt;=&gt; <span class="variable">$y</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * äº’æ¢ä½ç½®</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> int $x</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> int $y</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> void</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">swap</span>(<span class="params"><span class="keyword">int</span> &amp;<span class="variable">$x</span>, <span class="keyword">int</span> &amp;<span class="variable">$y</span></span>): <span class="title">void</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="variable">$x</span> !== <span class="variable">$y</span>) &#123;</span><br><span class="line">            <span class="variable">$t</span> = <span class="variable">$x</span>;</span><br><span class="line">            <span class="variable">$x</span> = <span class="variable">$y</span>;</span><br><span class="line">            <span class="variable">$y</span> = <span class="variable">$t</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ç”Ÿæˆéšæœºæ•°ç»„</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> int $low</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> int $high</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> int $num</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> array</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">random</span>(<span class="params"><span class="keyword">int</span> <span class="variable">$low</span> = <span class="number">1</span>, <span class="keyword">int</span> <span class="variable">$high</span> = <span class="number">9999</span>, <span class="keyword">int</span> <span class="variable">$num</span> = <span class="number">10</span></span>): <span class="title">array</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="variable">$num</span> = <span class="variable">$num</span> &gt; <span class="variable">$high</span> ? <span class="variable">$high</span> : <span class="variable">$num</span>;</span><br><span class="line">        <span class="variable">$range</span> = range(<span class="variable">$low</span>, <span class="variable">$high</span>);</span><br><span class="line">        <span class="variable">$array</span> = array_rand(array_flip(<span class="variable">$range</span>), <span class="variable">$num</span>);</span><br><span class="line">        shuffle(<span class="variable">$array</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="variable">$array</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">CocktailSort::main();</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»“æœ</span></span><br><span class="line"><span class="keyword">Array</span></span><br><span class="line">(</span><br><span class="line">    [<span class="number">0</span>] =&gt; <span class="number">4596</span></span><br><span class="line">    [<span class="number">1</span>] =&gt; <span class="number">2439</span></span><br><span class="line">    [<span class="number">2</span>] =&gt; <span class="number">3177</span></span><br><span class="line">    [<span class="number">3</span>] =&gt; <span class="number">3424</span></span><br><span class="line">    [<span class="number">4</span>] =&gt; <span class="number">6605</span></span><br><span class="line">    [<span class="number">5</span>] =&gt; <span class="number">6629</span></span><br><span class="line">    [<span class="number">6</span>] =&gt; <span class="number">7526</span></span><br><span class="line">    [<span class="number">7</span>] =&gt; <span class="number">8666</span></span><br><span class="line">    [<span class="number">8</span>] =&gt; <span class="number">8854</span></span><br><span class="line">    [<span class="number">9</span>] =&gt; <span class="number">9986</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>php</category>
      </categories>
      <tags>
        <tag>php</tag>
        <tag>algorithm</tag>
      </tags>
  </entry>
  <entry>
    <title>MySQL ç”¨æˆ·ç®¡ç†</title>
    <url>/2018/01/20/mysql-user-manager/</url>
    <content><![CDATA[<p>åœ¨å¾ˆå¤šæ—¶å€™ï¼Œæˆ‘ä»¬å¹¶ä¸ä¼šç›´æ¥åˆ©ç”¨ <code>MySQL</code> çš„ <code>root</code> ç”¨æˆ·è¿›è¡Œé¡¹ç›®çš„å¼€å‘ï¼Œä¸€èˆ¬çš„ï¼Œæˆ‘ä»¬éƒ½ä¼šåˆ›å»ºä¸€ä¸ªå…·æœ‰éƒ¨åˆ†æƒé™çš„ç”¨æˆ·</p>
<span id="more"></span>
<h2 id="åˆ›å»ºç”¨æˆ·"><a href="#åˆ›å»ºç”¨æˆ·" class="headerlink" title="åˆ›å»ºç”¨æˆ·"></a>åˆ›å»ºç”¨æˆ·</h2><blockquote>
<ul>
<li><a href="http://dev.mysql.com/doc/refman/5.7/en/adding-users.html">Adding User Accounts</a></li>
</ul>
</blockquote>
<h3 id="åˆ›å»ºæœ¬åœ°ç”¨æˆ·"><a href="#åˆ›å»ºæœ¬åœ°ç”¨æˆ·" class="headerlink" title="åˆ›å»ºæœ¬åœ°ç”¨æˆ·"></a>åˆ›å»ºæœ¬åœ°ç”¨æˆ·</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">USER</span> <span class="string">&#x27;develop&#x27;</span>@<span class="string">&#x27;localhost&#x27;</span> IDENTIFIED <span class="keyword">BY</span> <span class="string">&#x27;]8Mgbs6m&#123;4)z?DYJU8XA&#x27;</span>;</span><br></pre></td></tr></table></figure>
<h3 id="åˆ›å»ºè¿œç¨‹ç”¨æˆ·"><a href="#åˆ›å»ºè¿œç¨‹ç”¨æˆ·" class="headerlink" title="åˆ›å»ºè¿œç¨‹ç”¨æˆ·"></a>åˆ›å»ºè¿œç¨‹ç”¨æˆ·</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="operator">/</span><span class="operator">/</span> ä» <span class="number">192.168</span><span class="number">.10</span><span class="number">.10</span> <span class="operator">/</span> <span class="number">192.168</span><span class="number">.10</span><span class="number">.11</span> ç™»é™†çš„ç”¨æˆ·</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">USER</span> <span class="string">&#x27;develop&#x27;</span>@<span class="string">&#x27;192.168.10.10&#x27;</span> IDENTIFIED <span class="keyword">BY</span> <span class="string">&#x27;]8Mgbs6m&#123;4)z?DYJU8XA&#x27;</span>;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">USER</span> <span class="string">&#x27;develop&#x27;</span>@<span class="string">&#x27;192.168.10.11&#x27;</span> IDENTIFIED <span class="keyword">BY</span> <span class="string">&#x27;]8Mgbs6m&#123;4)z?DYJU8XA&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="operator">/</span><span class="operator">/</span> ä»ä»»æ„ IP ç™»é™†çš„ç”¨æˆ·</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">USER</span> <span class="string">&#x27;develop&#x27;</span>@<span class="string">&#x27;%&#x27;</span> IDENTIFIED <span class="keyword">BY</span> <span class="string">&#x27;]8Mgbs6m&#123;4)z?DYJU8XA&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="operator">/</span><span class="operator">/</span> ä¸åšæŒ‡å®šé»˜è®¤ä¸º <span class="string">&#x27;%&#x27;</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">USER</span> <span class="string">&#x27;develop&#x27;</span> IDENTIFIED <span class="keyword">BY</span> <span class="string">&#x27;]8Mgbs6m&#123;4)z?DYJU8XA&#x27;</span>;</span><br></pre></td></tr></table></figure>
<h2 id="ä¿®æ”¹å¯†ç "><a href="#ä¿®æ”¹å¯†ç " class="headerlink" title="ä¿®æ”¹å¯†ç "></a>ä¿®æ”¹å¯†ç </h2><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="operator">/</span><span class="operator">/</span> æŸ¥è¯¢ç”¨æˆ·</span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">User</span>, Host, HEX(authentication_string) <span class="keyword">FROM</span> mysql.user;</span><br><span class="line"></span><br><span class="line"><span class="operator">/</span><span class="operator">/</span> ä¿®æ”¹å¯†ç </span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">user</span> <span class="string">&#x27;develop&#x27;</span>@<span class="string">&#x27;localhost&#x27;</span> IDENTIFIED <span class="keyword">BY</span> <span class="string">&#x27;]8Mgbs6m&#123;4)z?DYJU8XA&#x27;</span>;</span><br><span class="line">æˆ–è€…</span><br><span class="line">UPDATE <span class="keyword">user</span> <span class="keyword">SET</span> authentication_string <span class="operator">=</span> PASSWORD(<span class="string">&#x27;]8Mgbs6m&#123;4)z?DYJU8XA&#x27;</span>), password_expired <span class="operator">=</span> <span class="string">&#x27;N&#x27;</span> <span class="keyword">WHERE</span> <span class="keyword">User</span> <span class="operator">=</span> <span class="string">&#x27;develop&#x27;</span> <span class="keyword">AND</span> Host <span class="operator">=</span> <span class="string">&#x27;localhost&#x27;</span>;</span><br><span class="line">FLUSH PRIVILEGES;</span><br></pre></td></tr></table></figure>
<h2 id="åˆ é™¤ç”¨æˆ·"><a href="#åˆ é™¤ç”¨æˆ·" class="headerlink" title="åˆ é™¤ç”¨æˆ·"></a>åˆ é™¤ç”¨æˆ·</h2><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">USE mysql;</span><br><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> `<span class="keyword">user</span>` <span class="keyword">WHERE</span> `<span class="keyword">user</span>` <span class="operator">=</span> <span class="string">&#x27;develop&#x27;</span> <span class="keyword">AND</span> `host` <span class="operator">=</span> <span class="string">&#x27;192.168.10.11&#x27;</span>;</span><br><span class="line">FLUSH PRIVILEGES;</span><br></pre></td></tr></table></figure>
<h2 id="èµ‹äºˆç”¨æˆ·æƒé™"><a href="#èµ‹äºˆç”¨æˆ·æƒé™" class="headerlink" title="èµ‹äºˆç”¨æˆ·æƒé™"></a>èµ‹äºˆç”¨æˆ·æƒé™</h2><blockquote>
<p>å…¶ä¸­çš„ <code>test.*</code> è¡¨ç¤ºå¯¹ <code>test</code> æ•°æ®åº“çš„æ‰€æœ‰æ“ä½œæˆäºˆæä¾›çš„æƒé™</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="operator">/</span><span class="operator">/</span> èµ‹äºˆéƒ¨åˆ†æƒé™</span><br><span class="line"><span class="keyword">GRANT</span> <span class="keyword">SELECT</span>, <span class="keyword">DELETE</span>, UPDATE, <span class="keyword">INSERT</span> <span class="keyword">ON</span> test.<span class="operator">*</span> <span class="keyword">TO</span> develop@<span class="string">&#x27;192.168.10.10&#x27;</span> IDENTIFIED <span class="keyword">BY</span> <span class="string">&#x27;]8Mgbs6m&#123;4)z?DYJU8XA&#x27;</span>;</span><br><span class="line">FLUSH PRIVILEGES;</span><br><span class="line"></span><br><span class="line"><span class="operator">/</span><span class="operator">/</span> èµ‹äºˆæ‰€æœ‰æƒé™</span><br><span class="line"><span class="keyword">GRANT</span> <span class="keyword">ALL</span> PRIVILEGES <span class="keyword">ON</span> test.<span class="operator">*</span> <span class="keyword">TO</span> <span class="string">&#x27;develop&#x27;</span>@<span class="string">&#x27;localhost&#x27;</span> <span class="keyword">WITH</span> <span class="keyword">GRANT</span> OPTION;</span><br><span class="line"><span class="keyword">GRANT</span> <span class="keyword">ALL</span> PRIVILEGES <span class="keyword">ON</span> test.<span class="operator">*</span> <span class="keyword">TO</span> <span class="string">&#x27;develop&#x27;</span>@<span class="string">&#x27;%&#x27;</span> <span class="keyword">WITH</span> <span class="keyword">GRANT</span> OPTION;</span><br><span class="line">FLUSH PRIVILEGES;</span><br></pre></td></tr></table></figure>
<h2 id="æŸ¥çœ‹ç”¨æˆ·æƒé™"><a href="#æŸ¥çœ‹ç”¨æˆ·æƒé™" class="headerlink" title="æŸ¥çœ‹ç”¨æˆ·æƒé™"></a>æŸ¥çœ‹ç”¨æˆ·æƒé™</h2><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="operator">/</span><span class="operator">/</span> æŸ¥çœ‹æœ¬åœ° develop çš„æƒé™ï¼Œæ²¡æœ‰æŒ‡å®šåé¢çš„ localhost åˆ™é»˜è®¤ä¸º <span class="string">&#x27;%&#x27;</span></span><br><span class="line"><span class="keyword">SHOW</span> GRANTS <span class="keyword">FOR</span> develop@<span class="string">&#x27;localhost&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="operator">/</span><span class="operator">/</span> æŸ¥çœ‹æŒ‡å®š host çš„ develop çš„æƒé™</span><br><span class="line"><span class="keyword">SHOW</span> GRANTS <span class="keyword">FOR</span> develop@<span class="string">&#x27;192.168.10.10&#x27;</span>;</span><br></pre></td></tr></table></figure>
<h2 id="æ’¤é”€ç”¨æˆ·æƒé™"><a href="#æ’¤é”€ç”¨æˆ·æƒé™" class="headerlink" title="æ’¤é”€ç”¨æˆ·æƒé™"></a>æ’¤é”€ç”¨æˆ·æƒé™</h2><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="operator">/</span><span class="operator">/</span> æ’¤é”€ <span class="keyword">INSERT</span> æƒé™</span><br><span class="line"><span class="keyword">REVOKE</span> <span class="keyword">INSERT</span> <span class="keyword">ON</span> test.<span class="operator">*</span> <span class="keyword">FROM</span> develop@<span class="string">&#x27;192.168.10.10&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="operator">/</span><span class="operator">/</span> æ’¤é”€æ‰€æœ‰æƒé™</span><br><span class="line"><span class="keyword">REVOKE</span> <span class="keyword">ALL</span> <span class="keyword">ON</span> test.<span class="operator">*</span> <span class="keyword">FROM</span> develop@<span class="string">&#x27;192.168.10.10&#x27;</span>;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>mysql</category>
      </categories>
      <tags>
        <tag>mysql</tag>
      </tags>
  </entry>
  <entry>
    <title>CakePHP3 åº”ç”¨ä¸­å®ç”¨ Redis å®ç° SESSION å…±äº«</title>
    <url>/2018/01/22/php-cakephp-session-sharing/</url>
    <content><![CDATA[<h1 id="åœºæ™¯"><a href="#åœºæ™¯" class="headerlink" title="åœºæ™¯"></a>åœºæ™¯</h1><blockquote>
<p>è´Ÿè½½å‡è¡¡çš„åœºæ™¯è‡ªè¡Œæ¨¡æ‹Ÿæ­å»ºã€‚</p>
</blockquote>
<p>ç”±äºè´Ÿè½½å‡è¡¡å™¨ä¼šæŠŠè¯·æ±‚åˆ†å‘åˆ°ä¸åŒçš„æœåŠ¡å™¨ï¼Œè€Œ <code>SESSION</code> æ˜¯å­˜å‚¨åœ¨æœåŠ¡å™¨ç«¯çš„ï¼Œå¦‚æœç”¨æˆ·è¯·æ±‚ç™»å½•è®¿é—®è¢«åˆ†å‘åˆ° <code>A</code> æœåŠ¡å™¨ï¼Œé‚£ä¹ˆç”¨æˆ·çš„ <code>SESSION</code> ä¿¡æ¯å°±ä¼šè¢«å­˜å‚¨åˆ° <code>A</code> æœåŠ¡å™¨ï¼Œåç»­çš„æŸä¸ªè¯·æ±‚å¯èƒ½ä¼šåˆ†å‘åˆ° <code>B</code> æˆ–å…¶å®ƒæœåŠ¡å™¨ï¼Œè¿™æ—¶ <code>B</code> æˆ–å…¶å®ƒæœåŠ¡å™¨å°±ä¼šè·å–ä¸åˆ°ä¹‹å‰çš„ç”¨æˆ· <code>SESSION</code> ä¿¡æ¯ï¼Œä¸ºäº†åº”å¯¹è¿™ç§æƒ…å†µå°±éœ€è¦åš <code>SESSION</code> å…±äº«ã€‚</p>
<h2 id="ä»¥ä¸‹æ˜¯-PHP-ä¸­-é»˜è®¤çš„-SESSION-ç›¸å…³çš„æ‰€æœ‰é…ç½®"><a href="#ä»¥ä¸‹æ˜¯-PHP-ä¸­-é»˜è®¤çš„-SESSION-ç›¸å…³çš„æ‰€æœ‰é…ç½®" class="headerlink" title="ä»¥ä¸‹æ˜¯ PHP ä¸­ é»˜è®¤çš„ SESSION ç›¸å…³çš„æ‰€æœ‰é…ç½®"></a>ä»¥ä¸‹æ˜¯ PHP ä¸­ é»˜è®¤çš„ SESSION ç›¸å…³çš„æ‰€æœ‰é…ç½®</h2><ul>
<li><code>session.save_handler</code>: <code>SESSION</code> çš„å­˜å‚¨å¤„ç†å™¨ï¼Œé»˜è®¤ä¸ºæ–‡ä»¶å­˜å‚¨æ–¹å¼</li>
<li><code>session.save_path</code>: <code>SESSION</code> çš„å­˜å‚¨è·¯å¾„ï¼Œé»˜è®¤ä¸º <code>/tmp</code></li>
<li><code>session.name = PHPSESSID</code>: <code>SESSION</code> çš„åç§°ï¼Œé»˜è®¤ä¸º <code>PHPSESSID</code></li>
<li><code>session.cookie_path</code>: <code>SESSION</code> ä¾é™„çš„ <code>COOKIE</code> çš„åç§°è·¯å¾„ï¼Œé»˜è®¤ä¸ºå½“å‰åŸŸå</li>
<li><code>session.cookie_domain</code>: <code>SESSION</code> ä¾é™„çš„ <code>COOKIE</code> çš„æœ‰æ•ˆåŸŸåï¼Œé»˜è®¤ä¸º <code>/</code></li>
</ul>
<figure class="highlight ini"><table><tr><td class="code"><pre><span class="line"><span class="section">[Session]</span></span><br><span class="line"><span class="comment">; Handler used to store/retrieve data.</span></span><br><span class="line"><span class="comment">; http://php.net/session.save-handler</span></span><br><span class="line"><span class="attr">session.save_handler</span> = files</span><br><span class="line"></span><br><span class="line"><span class="comment">; Argument passed to save_handler.  In the case of files, this is the path</span></span><br><span class="line"><span class="comment">; where data files are stored. <span class="doctag">Note:</span> Windows users have to change this</span></span><br><span class="line"><span class="comment">; variable in order to use PHP&#x27;s session functions.</span></span><br><span class="line"><span class="comment">;</span></span><br><span class="line"><span class="comment">; The path can be defined as:</span></span><br><span class="line"><span class="comment">;</span></span><br><span class="line"><span class="comment">;     session.save_path = &quot;N;/path&quot;</span></span><br><span class="line"><span class="comment">;</span></span><br><span class="line"><span class="comment">; where N is an integer.  Instead of storing all the session files in</span></span><br><span class="line"><span class="comment">; /path, what this will do is use subdirectories N-levels deep, and</span></span><br><span class="line"><span class="comment">; store the session data in those directories.  This is useful if</span></span><br><span class="line"><span class="comment">; your OS has problems with many files in one directory, and is</span></span><br><span class="line"><span class="comment">; a more efficient layout for servers that handle many sessions.</span></span><br><span class="line"><span class="comment">;</span></span><br><span class="line"><span class="comment">; NOTE 1: PHP will not create this directory structure automatically.</span></span><br><span class="line"><span class="comment">;         You can use the script in the ext/session dir for that purpose.</span></span><br><span class="line"><span class="comment">; NOTE 2: See the section on garbage collection below if you choose to</span></span><br><span class="line"><span class="comment">;         use subdirectories for session storage</span></span><br><span class="line"><span class="comment">;</span></span><br><span class="line"><span class="comment">; The file storage module creates files using mode 600 by default.</span></span><br><span class="line"><span class="comment">; You can change that by using</span></span><br><span class="line"><span class="comment">;</span></span><br><span class="line"><span class="comment">;     session.save_path = &quot;N;MODE;/path&quot;</span></span><br><span class="line"><span class="comment">;</span></span><br><span class="line"><span class="comment">; where MODE is the octal representation of the mode. Note that this</span></span><br><span class="line"><span class="comment">; does not overwrite the process&#x27;s umask.</span></span><br><span class="line"><span class="comment">; http://php.net/session.save-path</span></span><br><span class="line"><span class="comment">;session.save_path = &quot;/tmp&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">; Whether to use strict session mode.</span></span><br><span class="line"><span class="comment">; Strict session mode does not accept uninitialized session ID and regenerate</span></span><br><span class="line"><span class="comment">; session ID if browser sends uninitialized session ID. Strict mode protects</span></span><br><span class="line"><span class="comment">; applications from session fixation via session adoption vulnerability. It is</span></span><br><span class="line"><span class="comment">; disabled by default for maximum compatibility, but enabling it is encouraged.</span></span><br><span class="line"><span class="comment">; https://wiki.php.net/rfc/strict_sessions</span></span><br><span class="line"><span class="attr">session.use_strict_mode</span> = <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="comment">; Whether to use cookies.</span></span><br><span class="line"><span class="comment">; http://php.net/session.use-cookies</span></span><br><span class="line"><span class="attr">session.use_cookies</span> = <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">; http://php.net/session.cookie-secure</span></span><br><span class="line"><span class="comment">;session.cookie_secure =</span></span><br><span class="line"></span><br><span class="line"><span class="comment">; This option forces PHP to fetch and use a cookie for storing and maintaining</span></span><br><span class="line"><span class="comment">; the session id. We encourage this operation as it&#x27;s very helpful in combating</span></span><br><span class="line"><span class="comment">; session hijacking when not specifying and managing your own session id. It is</span></span><br><span class="line"><span class="comment">; not the be-all and end-all of session hijacking defense, but it&#x27;s a good start.</span></span><br><span class="line"><span class="comment">; http://php.net/session.use-only-cookies</span></span><br><span class="line"><span class="attr">session.use_only_cookies</span> = <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">; Name of the session (used as cookie name).</span></span><br><span class="line"><span class="comment">; http://php.net/session.name</span></span><br><span class="line"><span class="attr">session.name</span> = PHPSESSID</span><br><span class="line"></span><br><span class="line"><span class="comment">; Initialize session on request startup.</span></span><br><span class="line"><span class="comment">; http://php.net/session.auto-start</span></span><br><span class="line"><span class="attr">session.auto_start</span> = <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="comment">; Lifetime in seconds of cookie or, if 0, until browser is restarted.</span></span><br><span class="line"><span class="comment">; http://php.net/session.cookie-lifetime</span></span><br><span class="line"><span class="attr">session.cookie_lifetime</span> = <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="comment">; The path for which the cookie is valid.</span></span><br><span class="line"><span class="comment">; http://php.net/session.cookie-path</span></span><br><span class="line"><span class="attr">session.cookie_path</span> = /</span><br><span class="line"></span><br><span class="line"><span class="comment">; The domain for which the cookie is valid.</span></span><br><span class="line"><span class="comment">; http://php.net/session.cookie-domain</span></span><br><span class="line"><span class="attr">session.cookie_domain</span> =</span><br><span class="line"></span><br><span class="line"><span class="comment">; Whether or not to add the httpOnly flag to the cookie, which makes it inaccessible to browser scripting languages such as JavaScript.</span></span><br><span class="line"><span class="comment">; http://php.net/session.cookie-httponly</span></span><br><span class="line"><span class="attr">session.cookie_httponly</span> =</span><br><span class="line"></span><br><span class="line"><span class="comment">; Handler used to serialize data.  php is the standard serializer of PHP.</span></span><br><span class="line"><span class="comment">; http://php.net/session.serialize-handler</span></span><br><span class="line"><span class="attr">session.serialize_handler</span> = php</span><br><span class="line"></span><br><span class="line"><span class="comment">; Defines the probability that the &#x27;garbage collection&#x27; process is started</span></span><br><span class="line"><span class="comment">; on every session initialization. The probability is calculated by using</span></span><br><span class="line"><span class="comment">; gc_probability/gc_divisor. Where session.gc_probability is the numerator</span></span><br><span class="line"><span class="comment">; and gc_divisor is the denominator in the equation. Setting this value to 1</span></span><br><span class="line"><span class="comment">; when the session.gc_divisor value is 100 will give you approximately a 1% chance</span></span><br><span class="line"><span class="comment">; the gc will run on any give request.</span></span><br><span class="line"><span class="comment">; Default Value: 1</span></span><br><span class="line"><span class="comment">; Development Value: 1</span></span><br><span class="line"><span class="comment">; Production Value: 1</span></span><br><span class="line"><span class="comment">; http://php.net/session.gc-probability</span></span><br><span class="line"><span class="attr">session.gc_probability</span> = <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">; Defines the probability that the &#x27;garbage collection&#x27; process is started on every</span></span><br><span class="line"><span class="comment">; session initialization. The probability is calculated by using the following equation:</span></span><br><span class="line"><span class="comment">; gc_probability/gc_divisor. Where session.gc_probability is the numerator and</span></span><br><span class="line"><span class="comment">; session.gc_divisor is the denominator in the equation. Setting this value to 1</span></span><br><span class="line"><span class="comment">; when the session.gc_divisor value is 100 will give you approximately a 1% chance</span></span><br><span class="line"><span class="comment">; the gc will run on any give request. Increasing this value to 1000 will give you</span></span><br><span class="line"><span class="comment">; a 0.1% chance the gc will run on any give request. For high volume production servers,</span></span><br><span class="line"><span class="comment">; this is a more efficient approach.</span></span><br><span class="line"><span class="comment">; Default Value: 100</span></span><br><span class="line"><span class="comment">; Development Value: 1000</span></span><br><span class="line"><span class="comment">; Production Value: 1000</span></span><br><span class="line"><span class="comment">; http://php.net/session.gc-divisor</span></span><br><span class="line"><span class="attr">session.gc_divisor</span> = <span class="number">1000</span></span><br><span class="line"></span><br><span class="line"><span class="comment">; After this number of seconds, stored data will be seen as &#x27;garbage&#x27; and</span></span><br><span class="line"><span class="comment">; cleaned up by the garbage collection process.</span></span><br><span class="line"><span class="comment">; http://php.net/session.gc-maxlifetime</span></span><br><span class="line"><span class="attr">session.gc_maxlifetime</span> = <span class="number">1440</span></span><br><span class="line"></span><br><span class="line"><span class="comment">; <span class="doctag">NOTE:</span> If you are using the subdirectory option for storing session files</span></span><br><span class="line"><span class="comment">;       (see session.save_path above), then garbage collection does *not*</span></span><br><span class="line"><span class="comment">;       happen automatically.  You will need to do your own garbage</span></span><br><span class="line"><span class="comment">;       collection through a shell script, cron entry, or some other method.</span></span><br><span class="line"><span class="comment">;       For example, the following script would is the equivalent of</span></span><br><span class="line"><span class="comment">;       setting session.gc_maxlifetime to 1440 (1440 seconds = 24 minutes):</span></span><br><span class="line"><span class="comment">;          find /path/to/sessions -cmin +24 -type f | xargs rm</span></span><br><span class="line"></span><br><span class="line"><span class="comment">; Check HTTP Referer to invalidate externally stored URLs containing ids.</span></span><br><span class="line"><span class="comment">; HTTP_REFERER has to contain this substring for the session to be</span></span><br><span class="line"><span class="comment">; considered as valid.</span></span><br><span class="line"><span class="comment">; http://php.net/session.referer-check</span></span><br><span class="line"><span class="attr">session.referer_check</span> =</span><br><span class="line"></span><br><span class="line"><span class="comment">; Set to &#123;nocache,private,public,&#125; to determine HTTP caching aspects</span></span><br><span class="line"><span class="comment">; or leave this empty to avoid sending anti-caching headers.</span></span><br><span class="line"><span class="comment">; http://php.net/session.cache-limiter</span></span><br><span class="line"><span class="attr">session.cache_limiter</span> = nocache</span><br><span class="line"></span><br><span class="line"><span class="comment">; Document expires after n minutes.</span></span><br><span class="line"><span class="comment">; http://php.net/session.cache-expire</span></span><br><span class="line"><span class="attr">session.cache_expire</span> = <span class="number">180</span></span><br><span class="line"></span><br><span class="line"><span class="comment">; trans sid support is disabled by default.</span></span><br><span class="line"><span class="comment">; Use of trans sid may risk your users&#x27; security.</span></span><br><span class="line"><span class="comment">; Use this option with caution.</span></span><br><span class="line"><span class="comment">; - User may send URL contains active session ID</span></span><br><span class="line"><span class="comment">;   to other person via. email/irc/etc.</span></span><br><span class="line"><span class="comment">; - URL that contains active session ID may be stored</span></span><br><span class="line"><span class="comment">;   in publicly accessible computer.</span></span><br><span class="line"><span class="comment">; - User may access your site with the same session ID</span></span><br><span class="line"><span class="comment">;   always using URL stored in browser&#x27;s history or bookmarks.</span></span><br><span class="line"><span class="comment">; http://php.net/session.use-trans-sid</span></span><br><span class="line"><span class="attr">session.use_trans_sid</span> = <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="comment">; Set session ID character length. This value could be between 22 to 256.</span></span><br><span class="line"><span class="comment">; Shorter length than default is supported only for compatibility reason.</span></span><br><span class="line"><span class="comment">; Users should use 32 or more chars.</span></span><br><span class="line"><span class="comment">; http://php.net/session.sid-length</span></span><br><span class="line"><span class="comment">; Default Value: 32</span></span><br><span class="line"><span class="comment">; Development Value: 26</span></span><br><span class="line"><span class="comment">; Production Value: 26</span></span><br><span class="line"><span class="attr">session.sid_length</span> = <span class="number">26</span></span><br><span class="line"></span><br><span class="line"><span class="comment">; The URL rewriter will look for URLs in a defined set of HTML tags.</span></span><br><span class="line"><span class="comment">; &lt;form&gt; is special; if you include them here, the rewriter will</span></span><br><span class="line"><span class="comment">; add a hidden &lt;input&gt; field with the info which is otherwise appended</span></span><br><span class="line"><span class="comment">; to URLs. &lt;form&gt; tag&#x27;s action attribute URL will not be modified</span></span><br><span class="line"><span class="comment">; unless it is specified.</span></span><br><span class="line"><span class="comment">; Note that all valid entries require a &quot;=&quot;, even if no value follows.</span></span><br><span class="line"><span class="comment">; Default Value: &quot;a=href,area=href,frame=src,form=&quot;</span></span><br><span class="line"><span class="comment">; Development Value: &quot;a=href,area=href,frame=src,form=&quot;</span></span><br><span class="line"><span class="comment">; Production Value: &quot;a=href,area=href,frame=src,form=&quot;</span></span><br><span class="line"><span class="comment">; http://php.net/url-rewriter.tags</span></span><br><span class="line"><span class="attr">session.trans_sid_tags</span> = <span class="string">&quot;a=href,area=href,frame=src,form=&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">; URL rewriter does not rewrite absolute URLs by default.</span></span><br><span class="line"><span class="comment">; To enable rewrites for absolute pathes, target hosts must be specified</span></span><br><span class="line"><span class="comment">; at RUNTIME. i.e. use ini_set()</span></span><br><span class="line"><span class="comment">; &lt;form&gt; tags is special. PHP will check action attribute&#x27;s URL regardless</span></span><br><span class="line"><span class="comment">; of session.trans_sid_tags setting.</span></span><br><span class="line"><span class="comment">; If no host is defined, HTTP_HOST will be used for allowed host.</span></span><br><span class="line"><span class="comment">; Example value: php.net,www.php.net,wiki.php.net</span></span><br><span class="line"><span class="comment">; Use &quot;,&quot; for multiple hosts. No spaces are allowed.</span></span><br><span class="line"><span class="comment">; Default Value: &quot;&quot;</span></span><br><span class="line"><span class="comment">; Development Value: &quot;&quot;</span></span><br><span class="line"><span class="comment">; Production Value: &quot;&quot;</span></span><br><span class="line"><span class="comment">;session.trans_sid_hosts=&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">; Define how many bits are stored in each character when converting</span></span><br><span class="line"><span class="comment">; the binary hash data to something readable.</span></span><br><span class="line"><span class="comment">; Possible values:</span></span><br><span class="line"><span class="comment">;   4  (4 bits: 0-9, a-f)</span></span><br><span class="line"><span class="comment">;   5  (5 bits: 0-9, a-v)</span></span><br><span class="line"><span class="comment">;   6  (6 bits: 0-9, a-z, A-Z, &quot;-&quot;, &quot;,&quot;)</span></span><br><span class="line"><span class="comment">; Default Value: 4</span></span><br><span class="line"><span class="comment">; Development Value: 5</span></span><br><span class="line"><span class="comment">; Production Value: 5</span></span><br><span class="line"><span class="comment">; http://php.net/session.hash-bits-per-character</span></span><br><span class="line"><span class="attr">session.sid_bits_per_character</span> = <span class="number">5</span></span><br><span class="line"></span><br><span class="line"><span class="comment">; Enable upload progress tracking in $_SESSION</span></span><br><span class="line"><span class="comment">; Default Value: On</span></span><br><span class="line"><span class="comment">; Development Value: On</span></span><br><span class="line"><span class="comment">; Production Value: On</span></span><br><span class="line"><span class="comment">; http://php.net/session.upload-progress.enabled</span></span><br><span class="line"><span class="comment">;session.upload_progress.enabled = On</span></span><br><span class="line"></span><br><span class="line"><span class="comment">; Cleanup the progress information as soon as all POST data has been read</span></span><br><span class="line"><span class="comment">; (i.e. upload completed).</span></span><br><span class="line"><span class="comment">; Default Value: On</span></span><br><span class="line"><span class="comment">; Development Value: On</span></span><br><span class="line"><span class="comment">; Production Value: On</span></span><br><span class="line"><span class="comment">; http://php.net/session.upload-progress.cleanup</span></span><br><span class="line"><span class="comment">;session.upload_progress.cleanup = On</span></span><br><span class="line"></span><br><span class="line"><span class="comment">; A prefix used for the upload progress key in $_SESSION</span></span><br><span class="line"><span class="comment">; Default Value: &quot;upload_progress_&quot;</span></span><br><span class="line"><span class="comment">; Development Value: &quot;upload_progress_&quot;</span></span><br><span class="line"><span class="comment">; Production Value: &quot;upload_progress_&quot;</span></span><br><span class="line"><span class="comment">; http://php.net/session.upload-progress.prefix</span></span><br><span class="line"><span class="comment">;session.upload_progress.prefix = &quot;upload_progress_&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">; The index name (concatenated with the prefix) in $_SESSION</span></span><br><span class="line"><span class="comment">; containing the upload progress information</span></span><br><span class="line"><span class="comment">; Default Value: &quot;PHP_SESSION_UPLOAD_PROGRESS&quot;</span></span><br><span class="line"><span class="comment">; Development Value: &quot;PHP_SESSION_UPLOAD_PROGRESS&quot;</span></span><br><span class="line"><span class="comment">; Production Value: &quot;PHP_SESSION_UPLOAD_PROGRESS&quot;</span></span><br><span class="line"><span class="comment">; http://php.net/session.upload-progress.name</span></span><br><span class="line"><span class="comment">;session.upload_progress.name = &quot;PHP_SESSION_UPLOAD_PROGRESS&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">; How frequently the upload progress should be updated.</span></span><br><span class="line"><span class="comment">; Given either in percentages (per-file), or in bytes</span></span><br><span class="line"><span class="comment">; Default Value: &quot;1%&quot;</span></span><br><span class="line"><span class="comment">; Development Value: &quot;1%&quot;</span></span><br><span class="line"><span class="comment">; Production Value: &quot;1%&quot;</span></span><br><span class="line"><span class="comment">; http://php.net/session.upload-progress.freq</span></span><br><span class="line"><span class="comment">;session.upload_progress.freq =  &quot;1%&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">; The minimum delay between updates, in seconds</span></span><br><span class="line"><span class="comment">; Default Value: 1</span></span><br><span class="line"><span class="comment">; Development Value: 1</span></span><br><span class="line"><span class="comment">; Production Value: 1</span></span><br><span class="line"><span class="comment">; http://php.net/session.upload-progress.min-freq</span></span><br><span class="line"><span class="comment">;session.upload_progress.min_freq = &quot;1&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">; Only write session data when session data is changed. Enabled by default.</span></span><br><span class="line"><span class="comment">; http://php.net/session.lazy-write</span></span><br><span class="line"><span class="comment">;session.lazy_write = On</span></span><br></pre></td></tr></table></figure>
<h2 id="åˆ©ç”¨-Redis-å®ç°-SESSION-å…±äº«"><a href="#åˆ©ç”¨-Redis-å®ç°-SESSION-å…±äº«" class="headerlink" title="åˆ©ç”¨ Redis å®ç° SESSION å…±äº«"></a>åˆ©ç”¨ Redis å®ç° SESSION å…±äº«</h2><h3 id="å®‰è£…-PhpRedis-æ‰©å±•"><a href="#å®‰è£…-PhpRedis-æ‰©å±•" class="headerlink" title="å®‰è£… PhpRedis æ‰©å±•"></a>å®‰è£… PhpRedis æ‰©å±•</h3><blockquote>
<p><a href="https://github.com/phpredis/phpredis">PhpRedis GitHub</a></p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// ç¼–è¯‘å®‰è£… PhpRedis</span><br><span class="line">$ <span class="built_in">cd</span> ~</span><br><span class="line">$ git <span class="built_in">clone</span> https://github.com/phpredis/phpredis.git</span><br><span class="line">$ <span class="built_in">cd</span> phpredis</span><br><span class="line">$ git checkout tags/3.1.6</span><br><span class="line">$ sudo /usr/<span class="built_in">local</span>/bin/phpize</span><br><span class="line">$ sudo ./configure</span><br><span class="line">$ sudo make</span><br><span class="line">$ sudo make install</span><br></pre></td></tr></table></figure>
<p>å®‰è£…å®Œæˆåå°† <code>redis.so</code> æ–‡ä»¶åŠ å…¥åˆ° <code>php.ini</code> æ‰©å±•ä¸­ï¼Œé‡å¯ <code>php-fpm</code>ã€‚</p>
<h3 id="ä½¿ç”¨-Redis-å­˜å‚¨-SESSION-çš„é…ç½®"><a href="#ä½¿ç”¨-Redis-å­˜å‚¨-SESSION-çš„é…ç½®" class="headerlink" title="ä½¿ç”¨ Redis å­˜å‚¨ SESSION çš„é…ç½®"></a>ä½¿ç”¨ <code>Redis</code> å­˜å‚¨ <code>SESSION</code> çš„é…ç½®</h3><blockquote>
<p>é»˜è®¤çš„ <code>SESSION</code> å‰ç¼€ä¸º <code>PHPREDIS_SESSION:</code></p>
</blockquote>
<figure class="highlight ini"><table><tr><td class="code"><pre><span class="line"><span class="attr">session.save_handler</span> = redis</span><br><span class="line"><span class="attr">session.save_path</span> = <span class="string">&quot;tcp://redis-server-host:6379&quot;</span></span><br></pre></td></tr></table></figure>
<h3 id="ä½¿ç”¨ç¨‹åºé…ç½®"><a href="#ä½¿ç”¨ç¨‹åºé…ç½®" class="headerlink" title="ä½¿ç”¨ç¨‹åºé…ç½®"></a>ä½¿ç”¨ç¨‹åºé…ç½®</h3><blockquote>
<p>åœ¨ <code>session_start()</code> ä¹‹å‰è®¾ç½®</p>
</blockquote>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line">ini_set(<span class="string">&#x27;session.save_handler&#x27;</span>, <span class="string">&#x27;redis&#x27;</span>);</span><br><span class="line">ini_set(<span class="string">&#x27;session.save_path&#x27;</span>, <span class="string">&#x27;tcp://your-redis-host:6379&#x27;</span>);</span><br></pre></td></tr></table></figure>
<h1 id="åŸºäº-CakePHP3-åº”ç”¨çš„-SESSION-å…±äº«"><a href="#åŸºäº-CakePHP3-åº”ç”¨çš„-SESSION-å…±äº«" class="headerlink" title="åŸºäº CakePHP3 åº”ç”¨çš„ SESSION å…±äº«"></a>åŸºäº CakePHP3 åº”ç”¨çš„ SESSION å…±äº«</h1><h2 id="CakePHP3-æ¡†æ¶æ”¯æŒçš„-SESSION-å­˜å‚¨æ–¹å¼"><a href="#CakePHP3-æ¡†æ¶æ”¯æŒçš„-SESSION-å­˜å‚¨æ–¹å¼" class="headerlink" title="CakePHP3 æ¡†æ¶æ”¯æŒçš„ SESSION å­˜å‚¨æ–¹å¼"></a>CakePHP3 æ¡†æ¶æ”¯æŒçš„ SESSION å­˜å‚¨æ–¹å¼</h2><ul>
<li><code>php</code>: ä½¿ç”¨ <code>php.ini</code> æ–‡ä»¶ä¸­çš„æ ‡å‡†è®¾ç½®ä½åœ¨ä¼šè¯</li>
<li><code>cake</code>: å°†ä¼šè¯ä¿å­˜åœ¨ <code>tmp/sessions</code> æ–‡ä»¶å¤¹ä¸‹ã€‚å¦‚æœä¸»æœºä¸å…è®¸ä½ åœ¨è‡ªå·±çš„ä¸»ç›®å½•ä¹‹å¤–å†™å…¥ï¼Œè¿™æ˜¯ä¸€ä¸ªä¸é”™çš„é€‰æ‹©</li>
<li><code>database</code>: ä½¿ç”¨å†…ç½®çš„æ•°æ®åº“ä¼šè¯</li>
<li><code>cache</code>: ä½¿ç”¨å†…ç½®çš„ç¼“å­˜ä¼šè¯</li>
</ul>
<h2 id="åŸºäº-Cache-çš„-SESSION-å…±äº«"><a href="#åŸºäº-Cache-çš„-SESSION-å…±äº«" class="headerlink" title="åŸºäº Cache çš„ SESSION å…±äº«"></a>åŸºäº Cache çš„ SESSION å…±äº«</h2><blockquote>
<p>è¿™é‡Œé€‰æ‹© Redis å­˜å‚¨ç”¨æˆ· SESSION ä¿¡æ¯ï¼ŒCakePHP æä¾›çš„ç¼“å­˜å­˜å‚¨æ–¹å¼ç®€å•çš„ä»¤äººå‘æŒ‡ã€‚</p>
</blockquote>
<h3 id="é…ç½®-redis"><a href="#é…ç½®-redis" class="headerlink" title="é…ç½® redis"></a>é…ç½® redis</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> [</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Configure the cache adapters.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="string">&#x27;Cache&#x27;</span>          =&gt; [</span><br><span class="line">        <span class="string">&#x27;redis&#x27;</span> =&gt; [</span><br><span class="line">            <span class="string">&#x27;className&#x27;</span> =&gt; <span class="string">&#x27;Redis&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;duration&#x27;</span> =&gt; <span class="string">&#x27;+1 hours&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;password&#x27;</span> =&gt; <span class="literal">null</span>,</span><br><span class="line">            <span class="string">&#x27;probability&#x27;</span> =&gt; <span class="number">100</span>,</span><br><span class="line">            <span class="string">&#x27;prefix&#x27;</span> =&gt; <span class="literal">null</span>,</span><br><span class="line">            <span class="string">&#x27;server&#x27;</span> =&gt; <span class="string">&#x27;redis-server-host&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;port&#x27;</span> =&gt; <span class="number">6379</span>,</span><br><span class="line">        ],</span><br><span class="line">    ],</span><br><span class="line">];</span><br></pre></td></tr></table></figure>
<h3 id="é…ç½®-session"><a href="#é…ç½®-session" class="headerlink" title="é…ç½® session"></a>é…ç½® session</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> [</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Session configuration.</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * Contains an array of settings to use for session configuration. The</span></span><br><span class="line"><span class="comment">     * `defaults` key is used to define a default preset to use for sessions, any</span></span><br><span class="line"><span class="comment">     * settings declared here will override the settings of the default config.</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * ## Options</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * - `cookie` - The name of the cookie to use. Defaults to &#x27;CAKEPHP&#x27;. Avoid using `.` in cookie names,</span></span><br><span class="line"><span class="comment">     *   as PHP will drop sessions from cookies with `.` in the name.</span></span><br><span class="line"><span class="comment">     * - `cookiePath` - The url path for which session cookie is set. Maps to the</span></span><br><span class="line"><span class="comment">     *   `session.cookie_path` php.ini config. Defaults to base path of app.</span></span><br><span class="line"><span class="comment">     * - `timeout` - The time in minutes the session should be valid for.</span></span><br><span class="line"><span class="comment">     *    Pass 0 to disable checking timeout.</span></span><br><span class="line"><span class="comment">     *    Please note that php.ini&#x27;s session.gc_maxlifetime must be equal to or greater</span></span><br><span class="line"><span class="comment">     *    than the largest Session[&#x27;timeout&#x27;] in all served websites for it to have the</span></span><br><span class="line"><span class="comment">     *    desired effect.</span></span><br><span class="line"><span class="comment">     * - `defaults` - The default configuration set to use as a basis for your session.</span></span><br><span class="line"><span class="comment">     *    There are four built-in options: php, cake, cache, database.</span></span><br><span class="line"><span class="comment">     * - `handler` - Can be used to enable a custom session handler. Expects an</span></span><br><span class="line"><span class="comment">     *    array with at least the `engine` key, being the name of the Session engine</span></span><br><span class="line"><span class="comment">     *    class to use for managing the session. CakePHP bundles the `CacheSession`</span></span><br><span class="line"><span class="comment">     *    and `DatabaseSession` engines.</span></span><br><span class="line"><span class="comment">     * - `ini` - An associative array of additional ini values to set.</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * The built-in `defaults` options are:</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * - &#x27;php&#x27; - Uses settings defined in your php.ini.</span></span><br><span class="line"><span class="comment">     * - &#x27;cake&#x27; - Saves session files in CakePHP&#x27;s /tmp directory.</span></span><br><span class="line"><span class="comment">     * - &#x27;database&#x27; - Uses CakePHP&#x27;s database sessions.</span></span><br><span class="line"><span class="comment">     * - &#x27;cache&#x27; - Use the Cache class to save sessions.</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * To define a custom session handler, save it at src/Network/Session/&lt;name&gt;.php.</span></span><br><span class="line"><span class="comment">     * Make sure the class implements PHP&#x27;s `SessionHandlerInterface` and set</span></span><br><span class="line"><span class="comment">     * Session.handler to &lt;name&gt;</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * To use database sessions, load the SQL file located at config/schema/sessions.sql</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="string">&#x27;Session&#x27;</span> =&gt; [</span><br><span class="line">        <span class="string">&#x27;defaults&#x27;</span> =&gt; <span class="string">&#x27;cache&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;cookie&#x27;</span> =&gt; <span class="string">&#x27;YOURSESSID&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;timeout&#x27;</span> =&gt; <span class="number">1800</span>,</span><br><span class="line">        <span class="string">&#x27;handler&#x27;</span> =&gt; [</span><br><span class="line">            <span class="string">&#x27;engine&#x27;</span> =&gt; <span class="string">&#x27;CacheSession&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;config&#x27;</span> =&gt; <span class="string">&#x27;redis&#x27;</span></span><br><span class="line">        ],</span><br><span class="line">        <span class="string">&#x27;ini&#x27;</span> =&gt; [</span><br><span class="line">            <span class="string">&#x27;session.cookie_path&#x27;</span> =&gt; <span class="string">&#x27;/&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;session.cookie_secure&#x27;</span> =&gt; <span class="literal">false</span>,</span><br><span class="line">            <span class="string">&#x27;session.cookie_domain&#x27;</span> =&gt; <span class="string">&#x27;.your-domain.com&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;session.cookie_lifetime&#x27;</span> =&gt; <span class="number">1800</span>,</span><br><span class="line">            <span class="string">&#x27;session.cookie_httponly&#x27;</span> =&gt; <span class="literal">false</span>,</span><br><span class="line">            <span class="string">&#x27;session.use_trans_sid&#x27;</span> =&gt; <span class="number">0</span>,</span><br><span class="line">            <span class="string">&#x27;session.use_cookies&#x27;</span> =&gt; <span class="number">1</span>,</span><br><span class="line">            <span class="string">&#x27;session.save_handler&#x27;</span> =&gt; <span class="string">&#x27;user&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;session.gc_maxlifetime&#x27;</span> =&gt; <span class="number">1800</span>,</span><br><span class="line">        ],</span><br><span class="line">    ],</span><br><span class="line">];</span><br></pre></td></tr></table></figure>
<p>æ­£å¸¸æƒ…å†µä¸‹ï¼Œé…ç½®å¥½å°±å¯ä»¥ç”¨äº†</p>
<h2 id="åŸºäº-database-çš„-SESSION-å…±äº«"><a href="#åŸºäº-database-çš„-SESSION-å…±äº«" class="headerlink" title="åŸºäº database çš„ SESSION å…±äº«"></a>åŸºäº database çš„ SESSION å…±äº«</h2><blockquote>
<p>ä»¥åå†æŠ½ç©ºæ›´æ–°â€¦â€¦</p>
</blockquote>
<h2 id="CakePHP3-ç®¡ç†-SESSION-çš„å†…éƒ¨å®ç°"><a href="#CakePHP3-ç®¡ç†-SESSION-çš„å†…éƒ¨å®ç°" class="headerlink" title="CakePHP3 ç®¡ç† SESSION çš„å†…éƒ¨å®ç°"></a>CakePHP3 ç®¡ç† SESSION çš„å†…éƒ¨å®ç°</h2><h3 id="é…ç½®-SESSION-å­˜å‚¨æ–¹å¼ä¸º-Cache-åï¼Œéœ€è¦æä¾›å¤„ç†çš„å¼•æ“å’Œé…ç½®ï¼Œé»˜è®¤ä¸ºæ–‡ä»¶å¼•æ“å¤„ç†"><a href="#é…ç½®-SESSION-å­˜å‚¨æ–¹å¼ä¸º-Cache-åï¼Œéœ€è¦æä¾›å¤„ç†çš„å¼•æ“å’Œé…ç½®ï¼Œé»˜è®¤ä¸ºæ–‡ä»¶å¼•æ“å¤„ç†" class="headerlink" title="é…ç½® SESSION å­˜å‚¨æ–¹å¼ä¸º Cache åï¼Œéœ€è¦æä¾›å¤„ç†çš„å¼•æ“å’Œé…ç½®ï¼Œé»˜è®¤ä¸ºæ–‡ä»¶å¼•æ“å¤„ç†"></a>é…ç½® SESSION å­˜å‚¨æ–¹å¼ä¸º Cache åï¼Œéœ€è¦æä¾›å¤„ç†çš„å¼•æ“å’Œé…ç½®ï¼Œé»˜è®¤ä¸ºæ–‡ä»¶å¼•æ“å¤„ç†</h3><blockquote>
<p>å…±æœ‰ <code>CakeSession</code> å’Œ <code>DatabaseSession</code> ä¸¤ä¸ª <code>SESSION</code> æ“ä½œæ”¯æŒç±»ï¼Œå¼•æ“é»˜è®¤ä¸º <code>CakeSession</code> ç±»ï¼Œæ­¤ç±»æ ¹æ®ä¸åŒçš„é…ç½®é€‰å–ä¸åŒçš„ç¼“å­˜å¤„ç†å¼•æ“è¿›è¡Œæ“ä½œã€‚</p>
</blockquote>
<p>æ”¯æŒçš„ç¼“å­˜å¼•æ“ï¼š</p>
<ul>
<li><code>Apc</code>: <code>APC</code> ç¼“å­˜ä½¿ç”¨ <code>PHP</code> çš„ <code>APCu</code> æ‰©å±•ã€‚è¯¥æ‰©å±•ä½¿ç”¨ <code>Web</code> æœåŠ¡å™¨ä¸Šçš„å…±äº«å†…å­˜æ¥å­˜å‚¨å¯¹è±¡ã€‚è¿™ä½¿å®ƒéå¸¸å¿«ï¼Œå¹¶æœ‰èƒ½åŠ›æä¾›åŸå­è¯»å†™åŠŸèƒ½</li>
<li><code>File</code>: æ–‡ä»¶ç¼“å­˜æ˜¯ä½¿ç”¨æœ¬åœ°æ–‡ä»¶çš„ç®€å•ç¼“å­˜ã€‚è¿™æ˜¯æœ€æ…¢çš„ç¼“å­˜å¼•æ“ï¼Œå¹¶ä¸æä¾›åŸå­æ“ä½œçš„è¿™ä¹ˆåŠŸèƒ½ã€‚ç„¶è€Œï¼Œç”±äºç£ç›˜é€šå¸¸éå¸¸ä¾¿å®œï¼Œå› æ­¤å­˜å‚¨å¤§å‹å¯¹è±¡ï¼Œæˆ–è€…ä¸ç»å¸¸å†™å…¥çš„å…ƒç´ åœ¨æ–‡ä»¶ä¸­èƒ½å¾ˆå¥½å·¥ä½œ</li>
<li><code>Memcached</code>: ä½¿ç”¨ <code>Memcached</code> æ‰©å±•</li>
<li><code>Null</code>: é€šè¿‡å¯¹ç¼ºå¤±å¼•æ“å¯¹è±¡çš„å°è£…ï¼Œä»¥æä¾›é»˜è®¤æ— ä»»ä½•è¡Œä¸ºçš„å¼•æ“å¯¹è±¡æ›¿ä»£å“</li>
<li><code>Redis</code>: ä½¿ç”¨ <code>phpredis</code> æ‰©å±•ã€‚<code>Redis</code> æä¾›äº†ä¸€ä¸ªç±»ä¼¼ <code>Memcached</code> çš„å¿«é€Ÿå’ŒæŒä¹…çš„ç¼“å­˜ç³»ç»Ÿï¼Œä¹Ÿæä¾›äº†åŸå­æ“ä½œ</li>
<li><code>Wincache</code>: ä½¿ç”¨ <code>Wincache</code> æ‰©å±•ã€‚<code>Wincache</code> åœ¨åŠŸèƒ½å’Œæ€§èƒ½æ–¹é¢ä¸ <code>APC</code> ç›¸ä¼¼ï¼Œä½†é’ˆå¯¹ <code>Windows</code> å’Œ <code>IIS</code> è¿›è¡Œäº†ä¼˜åŒ–</li>
<li><code>Xcache</code>: ä¸€ä¸ª <code>PHP</code> æ‰©å±•ï¼Œæä¾›ä¸ <code>APC</code> ç±»ä¼¼çš„åŠŸèƒ½</li>
</ul>
<h3 id="RedisEngine-ç±»"><a href="#RedisEngine-ç±»" class="headerlink" title="RedisEngine ç±»"></a>RedisEngine ç±»</h3><blockquote>
<p><a href="https://github.com/cakephp/cakephp/blob/master/src/Cache/Engine/RedisEngine.php">RedisEngine Class</a></p>
</blockquote>
<p>ç»§æ‰¿ <code>CacheEngine</code> æŠ½è±¡ç±»ï¼Œå®ç°åŸºç±»çš„ <code>write</code>ï¼Œ<code>read</code>ï¼Œ<code>increment</code>ï¼Œ<code>decrement</code>ï¼Œ<code>delete</code>ï¼Œ<code>clear</code> æŠ½è±¡æ–¹æ³•ã€‚</p>
<h3 id="CacheSession-ç±»"><a href="#CacheSession-ç±»" class="headerlink" title="CacheSession ç±»"></a>CacheSession ç±»</h3><blockquote>
<p><a href="http://php.net/manual/zh/class.sessionhandlerinterface.php">SessionHandlerInterface Class</a><br><a href="https://github.com/cakephp/cakephp/blob/master/src/Network/Session/CacheSession.php">CacheSession Class</a></p>
</blockquote>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line">SessionHandlerInterface</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">/* æ–¹æ³• */</span></span><br><span class="line">    <span class="keyword">abstract</span> <span class="keyword">public</span> <span class="keyword">bool</span> close();</span><br><span class="line">    <span class="keyword">abstract</span> <span class="keyword">public</span> <span class="keyword">bool</span> destroy(<span class="keyword">string</span> <span class="variable">$session_id</span>);</span><br><span class="line">    <span class="keyword">abstract</span> <span class="keyword">public</span> <span class="keyword">bool</span> gc(<span class="keyword">int</span> <span class="variable">$maxlifetime</span>);</span><br><span class="line">    <span class="keyword">abstract</span> <span class="keyword">public</span> <span class="keyword">bool</span> open(<span class="keyword">string</span> <span class="variable">$save_path</span>, <span class="keyword">string</span> <span class="variable">$session_name</span>);</span><br><span class="line">    <span class="keyword">abstract</span> <span class="keyword">public</span> <span class="keyword">string</span> read(<span class="keyword">string</span> <span class="variable">$session_id</span>);</span><br><span class="line">    <span class="keyword">abstract</span> <span class="keyword">public</span> <span class="keyword">bool</span> write(<span class="keyword">string</span> <span class="variable">$session_id</span>, <span class="keyword">string</span> <span class="variable">$session_data</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>å®ç° <code>SessionHandlerInterface</code> æ¥å£</li>
<li>ä»é…ç½®çš„ç¼“å­˜å¼•æ“ä¸­æ“ä½œç›¸å…³çš„æ•°æ®</li>
</ul>
]]></content>
      <categories>
        <category>php</category>
      </categories>
      <tags>
        <tag>php</tag>
        <tag>cakephp</tag>
      </tags>
  </entry>
  <entry>
    <title>Nginx æ”¯æŒ keep-alive é•¿è¿æ¥</title>
    <url>/2018/01/13/nginx-keep-alive/</url>
    <content><![CDATA[<h2 id="æ¦‚å¿µ"><a href="#æ¦‚å¿µ" class="headerlink" title="æ¦‚å¿µ"></a>æ¦‚å¿µ</h2><blockquote>
<p><a href="https://tools.ietf.org/html/rfc2616"><code>Persistent HTTP connections have a number of advantages</code></a></p>
</blockquote>
<p><code>HTTP</code> åè®®é‡‡ç”¨<strong>è¯·æ±‚-åº”ç­”</strong>æ¨¡å¼ï¼Œå½“ä½¿ç”¨æ™®é€šæ¨¡å¼ï¼Œå³é <code>KeepAlive</code> æ¨¡å¼æ—¶ï¼Œæ¯ä¸ªè¯·æ±‚/åº”ç­”å®¢æˆ·å’ŒæœåŠ¡å™¨éƒ½è¦æ–°å»ºä¸€ä¸ªè¿æ¥ï¼Œå®Œæˆä¹‹åç«‹å³æ–­å¼€è¿æ¥ï¼ˆ<code>HTTP</code> åè®®ä¸ºæ— è¿æ¥çš„åè®®ï¼‰ï¼›å½“ä½¿ç”¨ <code>Keep-Alive</code> æ¨¡å¼ï¼ˆåˆç§°æŒä¹…è¿æ¥/è¿æ¥é‡ç”¨ï¼‰æ—¶ï¼Œ<code>Keep-Alive</code> åŠŸèƒ½ä½¿å®¢æˆ·ç«¯åˆ°æœåŠ¡å™¨ç«¯çš„è¿æ¥æŒç»­æœ‰æ•ˆï¼Œå½“å‡ºç°å¯¹æœåŠ¡å™¨çš„åç»§è¯·æ±‚æ—¶ï¼Œ<code>Keep-Alive</code> åŠŸèƒ½é¿å…äº†å»ºç«‹æˆ–è€…é‡æ–°å»ºç«‹è¿æ¥ã€‚</p>
<p><img src="http://om804c7s2.bkt.clouddn.com/2018-01-06-15152071602677.jpg" alt=""></p>
<h2 id="æ”¯æŒ-keep-alive"><a href="#æ”¯æŒ-keep-alive" class="headerlink" title="æ”¯æŒ keep alive"></a>æ”¯æŒ <code>keep alive</code></h2><h3 id="å½“ä½¿ç”¨-nginx-ä½œä¸ºåå‘ä»£ç†æ—¶ï¼Œä¸ºäº†æ”¯æŒé•¿è¿æ¥ï¼Œéœ€è¦åšåˆ°ä¸¤ç‚¹"><a href="#å½“ä½¿ç”¨-nginx-ä½œä¸ºåå‘ä»£ç†æ—¶ï¼Œä¸ºäº†æ”¯æŒé•¿è¿æ¥ï¼Œéœ€è¦åšåˆ°ä¸¤ç‚¹" class="headerlink" title="å½“ä½¿ç”¨ nginx ä½œä¸ºåå‘ä»£ç†æ—¶ï¼Œä¸ºäº†æ”¯æŒé•¿è¿æ¥ï¼Œéœ€è¦åšåˆ°ä¸¤ç‚¹"></a>å½“ä½¿ç”¨ <code>nginx</code> ä½œä¸ºåå‘ä»£ç†æ—¶ï¼Œä¸ºäº†æ”¯æŒé•¿è¿æ¥ï¼Œéœ€è¦åšåˆ°ä¸¤ç‚¹</h3><ul>
<li>ä» <code>client</code> åˆ° <code>nginx</code> çš„è¿æ¥æ˜¯é•¿è¿æ¥</li>
<li>ä» <code>nginx</code> åˆ° <code>server</code> çš„è¿æ¥æ˜¯é•¿è¿æ¥</li>
</ul>
<h3 id="ä¿æŒå’Œ-client-çš„é•¿è¿æ¥"><a href="#ä¿æŒå’Œ-client-çš„é•¿è¿æ¥" class="headerlink" title="ä¿æŒå’Œ client çš„é•¿è¿æ¥"></a>ä¿æŒå’Œ <code>client</code> çš„é•¿è¿æ¥</h3><ul>
<li><code>client</code> å‘é€çš„ <code>HTTP</code> è¯·æ±‚è¦æ±‚ <code>keep alive</code></li>
<li><code>nginx</code> è®¾ç½®ä¸Šæ”¯æŒ <code>keep alive</code></li>
</ul>
<h3 id="HTTP-é…ç½®"><a href="#HTTP-é…ç½®" class="headerlink" title="HTTP é…ç½®"></a><code>HTTP</code> é…ç½®</h3><h4 id="keepalive-timeout"><a href="#keepalive-timeout" class="headerlink" title="keepalive_timeout"></a><code>keepalive_timeout</code></h4><blockquote>
<p>é»˜è®¤ <code>75s</code>ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ä¹Ÿå¤Ÿç”¨ï¼Œå¯¹äºä¸€äº›è¯·æ±‚æ¯”è¾ƒå¤§çš„å†…éƒ¨æœåŠ¡å™¨é€šè®¯çš„åœºæ™¯ï¼Œé€‚å½“åŠ å¤§ä¸º <code>120s</code> æˆ–è€… <code>300s</code>ã€‚ç¬¬äºŒä¸ªå‚æ•°é€šå¸¸å¯ä»¥ä¸ç”¨è®¾ç½®</p>
</blockquote>
<p>ç¬¬ä¸€ä¸ªå‚æ•°è®¾ç½® <code>keep-alive</code> å®¢æˆ·ç«¯è¿æ¥åœ¨æœåŠ¡å™¨ç«¯ä¿æŒå¼€å¯çš„è¶…æ—¶å€¼ã€‚å€¼ä¸º <code>0</code> ä¼šç¦ç”¨ <code>keep-alive</code> å®¢æˆ·ç«¯è¿æ¥ã€‚å¯é€‰çš„ç¬¬äºŒä¸ªå‚æ•°åœ¨å“åº”çš„ <code>header</code> åŸŸä¸­è®¾ç½®ä¸€ä¸ªå€¼ <code>Keep-Alive: timeout=time</code>ã€‚è¿™ä¸¤ä¸ªå‚æ•°å¯ä»¥ä¸ä¸€æ ·</p>
<h4 id="keepalive-requests"><a href="#keepalive-requests" class="headerlink" title="keepalive_requests"></a><code>keepalive_requests</code></h4><blockquote>
<p>é»˜è®¤ <code>100</code>ï¼Œå¯¹äº <code>QPS</code> è¾ƒé«˜çš„åœºæ™¯ï¼Œéå¸¸æœ‰å¿…è¦åŠ å¤§è¿™ä¸ªå‚æ•°ï¼Œä»¥é¿å…å‡ºç°å¤§é‡è¿æ¥è¢«ç”Ÿæˆå†æŠ›å¼ƒçš„æƒ…å†µï¼Œå‡å°‘ <code>TIME_WAIT</code>ã€‚è¿™ä¸ªå‚æ•°çš„çœŸå®å«ä¹‰æ˜¯æŒ‡ä¸€ä¸ª <code>keep alive</code> å»ºç«‹ä¹‹åï¼Œ<code>nginx</code> å°±ä¼šä¸ºè¿™ä¸ªè¿æ¥è®¾ç½®ä¸€ä¸ªè®¡æ•°å™¨ï¼Œè®°å½•è¿™ä¸ª <code>keep alive</code> çš„é•¿è¿æ¥ä¸Šå·²ç»æ¥æ”¶å¹¶å¤„ç†çš„å®¢æˆ·ç«¯è¯·æ±‚çš„æ•°é‡ã€‚å¦‚æœè¾¾åˆ°è¿™ä¸ªå‚æ•°è®¾ç½®çš„æœ€å¤§å€¼æ—¶ï¼Œåˆ™ <code>nginx</code> ä¼šå¼ºè¡Œå…³é—­è¿™ä¸ªé•¿è¿æ¥ï¼Œé€¼è¿«å®¢æˆ·ç«¯ä¸å¾—ä¸é‡æ–°å»ºç«‹æ–°çš„é•¿è¿æ¥</p>
</blockquote>
<p>ç”¨äºè®¾ç½®ä¸€ä¸ª <code>keep-alive</code> è¿æ¥ä¸Šå¯ä»¥æœåŠ¡çš„è¯·æ±‚çš„æœ€å¤§æ•°é‡ã€‚å½“æœ€å¤§è¯·æ±‚æ•°é‡è¾¾åˆ°æ—¶ï¼Œè¿æ¥è¢«å…³é—­</p>
<h3 id="ä¿æŒå’Œ-server-çš„é•¿è¿æ¥"><a href="#ä¿æŒå’Œ-server-çš„é•¿è¿æ¥" class="headerlink" title="ä¿æŒå’Œ server çš„é•¿è¿æ¥"></a>ä¿æŒå’Œ <code>server</code> çš„é•¿è¿æ¥</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">http &#123;</span><br><span class="line">    keepalive_timeout 100s;</span><br><span class="line">    keepalive_requests 1000;</span><br><span class="line"></span><br><span class="line">    upstream dev.proxy.com &#123;</span><br><span class="line">        server 192.168.10.11:8081 weight=1 max_fails=2 fail_timeout=30s;</span><br><span class="line">        server 192.168.10.10:8081 weight=1 max_fails=2 fail_timeout=30s;</span><br><span class="line">        keepalive 300;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    server &#123;</span><br><span class="line">        listen 80 default_server;</span><br><span class="line">        listen [::]:80 ipv6only=on;</span><br><span class="line">        server_name dev.proxy.com;</span><br><span class="line">        charset utf-8;</span><br><span class="line"></span><br><span class="line">        location / &#123;</span><br><span class="line">            index index.php index.html index.htm;</span><br><span class="line">            proxy_pass http://dev.proxy.com/;</span><br><span class="line">            proxy_set_header Host <span class="variable">$Host</span>;</span><br><span class="line">            proxy_set_header x-forwarded-for <span class="variable">$remote_addr</span>;</span><br><span class="line">            proxy_set_header X-Real-IP <span class="variable">$remote_addr</span>;</span><br><span class="line">            add_header Cache-Control no-store;</span><br><span class="line">            add_header Pragma no-cache;</span><br><span class="line">            proxy_http_version 1.1;</span><br><span class="line">            proxy_set_header Connection <span class="string">&quot;&quot;</span>;</span><br><span class="line"></span><br><span class="line">            client_max_body_size 3072k;</span><br><span class="line">            client_body_buffer_size 128k;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åˆç†çš„è®¾ç½® <code>keep-alive</code> å€¼å¯ä»¥éå¸¸æœ‰æ•ˆçš„ç¼“å†²è¯·æ±‚å’Œåº”ç­”ä¸å‡åŒ€ï¼Œç¼“è§£è¿æ¥æ•°é‡çš„åå¤éœ‡è¡</p>
<p>è¿æ¥æ•°é‡éœ‡è¡çš„ä¸¤ä¸ªè¡¨ç°</p>
<ul>
<li>è¿æ¥ä¸å¤Ÿç”¨ï¼Œé€ æˆæ–°å»ºè¿æ¥</li>
<li>è¿æ¥ç©ºé—²ï¼Œé€ æˆå…³é—­è¿æ¥</li>
</ul>
<h4 id="ç»Ÿè®¡åœ¨ä¸€å°å‰ç«¯æœºä¸Šé«˜å³°æ—¶é—´-TCP-è¿æ¥çš„æƒ…å†µ"><a href="#ç»Ÿè®¡åœ¨ä¸€å°å‰ç«¯æœºä¸Šé«˜å³°æ—¶é—´-TCP-è¿æ¥çš„æƒ…å†µ" class="headerlink" title="ç»Ÿè®¡åœ¨ä¸€å°å‰ç«¯æœºä¸Šé«˜å³°æ—¶é—´ TCP è¿æ¥çš„æƒ…å†µ"></a>ç»Ÿè®¡åœ¨ä¸€å°å‰ç«¯æœºä¸Šé«˜å³°æ—¶é—´ TCP è¿æ¥çš„æƒ…å†µ</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ netstat -n | awk <span class="string">&#x27;/^tcp/ &#123;++S[$NF]&#125; END &#123;for(a in S) print a,S[a]&#125;&#x27;</span></span><br></pre></td></tr></table></figure>
<h4 id="å¯¼è‡´-nginx-ç«¯å‡ºç°å¤§é‡-TIME-WAIT-çš„ä¸¤ç§æƒ…å†µ"><a href="#å¯¼è‡´-nginx-ç«¯å‡ºç°å¤§é‡-TIME-WAIT-çš„ä¸¤ç§æƒ…å†µ" class="headerlink" title="å¯¼è‡´ nginx ç«¯å‡ºç°å¤§é‡ TIME_WAIT çš„ä¸¤ç§æƒ…å†µ"></a>å¯¼è‡´ <code>nginx</code> ç«¯å‡ºç°å¤§é‡ <code>TIME_WAIT</code> çš„ä¸¤ç§æƒ…å†µ</h4><ul>
<li><code>keepalive_requests</code> è®¾ç½®æ¯”è¾ƒå°ï¼Œé«˜å¹¶å‘ä¸‹è¶…è¿‡æ­¤å€¼å <code>nginx</code> ä¼šå¼ºåˆ¶å…³é—­å’Œå®¢æˆ·ç«¯ä¿æŒçš„<code>keepalive</code> é•¿è¿æ¥(ä¸»åŠ¨å…³é—­è¿æ¥åå¯¼è‡´ <code>nginx</code> å‡ºç° <code>TIME_WAIT</code>)</li>
<li><code>keepalive</code> è®¾ç½®çš„æ¯”è¾ƒå°(ç©ºé—²æ•°å¤ªå°)ï¼Œå¯¼è‡´é«˜å¹¶å‘ä¸‹ <code>nginx</code> ä¼šé¢‘ç¹å‡ºç°è¿æ¥æ•°éœ‡è¡(è¶…è¿‡è¯¥å€¼ä¼šå…³é—­è¿æ¥)ï¼Œä¸åœçš„å…³é—­å¼€å¯å’Œåç«¯ <code>server</code> ä¿æŒçš„ <code>keep-alive</code> é•¿è¿æ¥</li>
</ul>
<h4 id="å¯¼è‡´åç«¯-server-ç«¯å‡ºç°å¤§é‡-TIME-WAIT-çš„æƒ…å†µ"><a href="#å¯¼è‡´åç«¯-server-ç«¯å‡ºç°å¤§é‡-TIME-WAIT-çš„æƒ…å†µ" class="headerlink" title="å¯¼è‡´åç«¯ server ç«¯å‡ºç°å¤§é‡ TIME_WAIT çš„æƒ…å†µ"></a>å¯¼è‡´åç«¯ <code>server</code> ç«¯å‡ºç°å¤§é‡ <code>TIME_WAIT</code> çš„æƒ…å†µ</h4><ul>
<li><code>nginx</code> æ²¡æœ‰æ‰“å¼€å’Œåç«¯çš„é•¿è¿æ¥ï¼Œå³ï¼šæ²¡æœ‰è®¾ç½® <code>proxy_http_version 1.1;</code> å’Œ<code>proxy_set_header Connection &quot;&quot;;</code> ä»è€Œå¯¼è‡´åç«¯ <code>server</code> æ¯æ¬¡å…³é—­è¿æ¥ï¼Œé«˜å¹¶å‘ä¸‹å°±ä¼šå‡ºç° <code>server</code> ç«¯å‡ºç°å¤§é‡ <code>TIME_WAIT</code></li>
</ul>
]]></content>
      <categories>
        <category>nginx</category>
      </categories>
      <tags>
        <tag>linux</tag>
        <tag>nginx</tag>
      </tags>
  </entry>
  <entry>
    <title>PHP æ•°ç»„æ’åº</title>
    <url>/2018/02/25/php-array-sort/</url>
    <content><![CDATA[<p>åœ¨ PHP ä¸­æœ‰å¾ˆå¤šé’ˆå¯¹æ•°ç»„çš„æ’åºå‡½æ•°ï¼Œéå¸¸æ–¹ä¾¿ã€‚è¿™äº›å‡½æ•°å¯¹ä¸€ç»´æ•°ç»„è¿›è¡Œå…³é”®å­—æ’åºã€æŒ‰å€¼æ’åºã€é€†æ’åºç­‰ã€‚ä½†å¯¹äºå¤šç»´æ•°ç»„çš„æŒ‰éœ€æ’åºéœ€è¦è‡ªå·±ç¼–å†™ç‰¹å®šçš„å‡½æ•°å»ç°å®ã€‚</p>
<span id="more"></span>
<h2 id="æ•°ç»„å€¼æ’åº"><a href="#æ•°ç»„å€¼æ’åº" class="headerlink" title="æ•°ç»„å€¼æ’åº"></a>æ•°ç»„å€¼æ’åº</h2><table>
<thead>
<tr>
<th style="text-align:left">å‡½æ•°åç§°</th>
<th style="text-align:left">æ•°ç»„ç´¢å¼•é”®ä¿æŒ</th>
<th style="text-align:left">é¡ºåº</th>
<th style="text-align:left">ç›¸å…³å‡½æ•°</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">array_multisort()</td>
<td style="text-align:left">é”®å€¼å…³è”çš„ä¿æŒï¼Œæ•°å­—ç±»å‹çš„ä¸ä¿æŒ</td>
<td style="text-align:left">ç¬¬ä¸€ä¸ªæ•°ç»„æˆ–è€…ç”±é€‰é¡¹æŒ‡å®š</td>
<td style="text-align:left">array_walk()</td>
</tr>
<tr>
<td style="text-align:left">asort()</td>
<td style="text-align:left">æ˜¯</td>
<td style="text-align:left">ç”±ä½åˆ°é«˜</td>
<td style="text-align:left">arsort()</td>
</tr>
<tr>
<td style="text-align:left">arsort()</td>
<td style="text-align:left">æ˜¯</td>
<td style="text-align:left">ç”±é«˜åˆ°ä½</td>
<td style="text-align:left">asort()</td>
</tr>
<tr>
<td style="text-align:left">natcasesort()</td>
<td style="text-align:left">æ˜¯</td>
<td style="text-align:left">è‡ªç„¶æ’åºï¼Œå¤§å°å†™ä¸æ•æ„Ÿ</td>
<td style="text-align:left">natsort()</td>
</tr>
<tr>
<td style="text-align:left">natsort()</td>
<td style="text-align:left">æ˜¯</td>
<td style="text-align:left">è‡ªç„¶æ’åº</td>
<td style="text-align:left">natcasesort()</td>
</tr>
<tr>
<td style="text-align:left">rsort()</td>
<td style="text-align:left">å¦</td>
<td style="text-align:left">ç”±é«˜åˆ°ä½</td>
<td style="text-align:left">sort()</td>
</tr>
<tr>
<td style="text-align:left">sort()</td>
<td style="text-align:left">å¦</td>
<td style="text-align:left">ç”±ä½åˆ°é«˜</td>
<td style="text-align:left">rsort()</td>
</tr>
<tr>
<td style="text-align:left">shuffle()</td>
<td style="text-align:left">å¦</td>
<td style="text-align:left">éšæœº</td>
<td style="text-align:left">array_rand()</td>
</tr>
<tr>
<td style="text-align:left">uasort()</td>
<td style="text-align:left">æ˜¯</td>
<td style="text-align:left">ç”±ç”¨æˆ·å®šä¹‰</td>
<td style="text-align:left">uksort()</td>
</tr>
<tr>
<td style="text-align:left">usort()</td>
<td style="text-align:left">å¦</td>
<td style="text-align:left">ç”±ç”¨æˆ·å®šä¹‰</td>
<td style="text-align:left">uasort()</td>
</tr>
</tbody>
</table>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$array</span> = [</span><br><span class="line">    <span class="string">&#x27;c&#x27;</span> =&gt; [<span class="string">&#x27;id&#x27;</span> =&gt; <span class="number">4000</span>, <span class="string">&#x27;name&#x27;</span> =&gt; <span class="string">&#x27;Jack&#x27;</span>],</span><br><span class="line">    <span class="string">&#x27;e&#x27;</span> =&gt; [<span class="string">&#x27;id&#x27;</span> =&gt; <span class="number">2000</span>, <span class="string">&#x27;name&#x27;</span> =&gt; <span class="string">&#x27;Dane&#x27;</span>],</span><br><span class="line">    <span class="string">&#x27;d&#x27;</span> =&gt; [<span class="string">&#x27;id&#x27;</span> =&gt; <span class="number">1000</span>, <span class="string">&#x27;name&#x27;</span> =&gt; <span class="string">&#x27;Mark&#x27;</span>],</span><br><span class="line">    <span class="string">&#x27;a&#x27;</span> =&gt; [<span class="string">&#x27;id&#x27;</span> =&gt; <span class="number">5000</span>, <span class="string">&#x27;name&#x27;</span> =&gt; <span class="string">&#x27;Alan&#x27;</span>],</span><br><span class="line">    <span class="string">&#x27;b&#x27;</span> =&gt; [<span class="string">&#x27;id&#x27;</span> =&gt; <span class="number">3000</span>, <span class="string">&#x27;name&#x27;</span> =&gt; <span class="string">&#x27;Toby&#x27;</span>],</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sort_by_id</span>(<span class="params"><span class="variable">$left</span>, <span class="variable">$right</span></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable">$left</span>[<span class="string">&#x27;id&#x27;</span>] &lt;=&gt; <span class="variable">$right</span>[<span class="string">&#x27;id&#x27;</span>];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sort_by_name</span>(<span class="params"><span class="variable">$left</span>, <span class="variable">$right</span></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> strcasecmp(<span class="variable">$left</span>[<span class="string">&#x27;name&#x27;</span>], <span class="variable">$right</span>[<span class="string">&#x27;name&#x27;</span>]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="uasort"><a href="#uasort" class="headerlink" title="uasort"></a>uasort</h3><blockquote>
<p>ä½¿ç”¨ç”¨æˆ·è‡ªå®šä¹‰çš„æ¯”è¾ƒå‡½æ•°å¯¹æ•°ç»„ä¸­çš„å€¼è¿›è¡Œæ’åºå¹¶ä¿æŒç´¢å¼•å…³è”</p>
</blockquote>
<h4 id="æŒ‰-id-å€¼ç”±å°åˆ°å¤§æ’åº"><a href="#æŒ‰-id-å€¼ç”±å°åˆ°å¤§æ’åº" class="headerlink" title="æŒ‰ id å€¼ç”±å°åˆ°å¤§æ’åº"></a>æŒ‰ id å€¼ç”±å°åˆ°å¤§æ’åº</h4><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line">uasort(<span class="variable">$array</span>, <span class="string">&#x27;sort_by_id&#x27;</span>);</span><br><span class="line">print_r(<span class="variable">$array</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»“æœ</span></span><br><span class="line"><span class="keyword">Array</span></span><br><span class="line">(</span><br><span class="line">    [d] =&gt; <span class="keyword">Array</span></span><br><span class="line">        (</span><br><span class="line">            [id] =&gt; <span class="number">1000</span></span><br><span class="line">            [name] =&gt; Mark</span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line">    [e] =&gt; <span class="keyword">Array</span></span><br><span class="line">        (</span><br><span class="line">            [id] =&gt; <span class="number">2000</span></span><br><span class="line">            [name] =&gt; Dane</span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line">    [b] =&gt; <span class="keyword">Array</span></span><br><span class="line">        (</span><br><span class="line">            [id] =&gt; <span class="number">3000</span></span><br><span class="line">            [name] =&gt; Toby</span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line">    [c] =&gt; <span class="keyword">Array</span></span><br><span class="line">        (</span><br><span class="line">            [id] =&gt; <span class="number">4000</span></span><br><span class="line">            [name] =&gt; Jack</span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line">    [a] =&gt; <span class="keyword">Array</span></span><br><span class="line">        (</span><br><span class="line">            [id] =&gt; <span class="number">5000</span></span><br><span class="line">            [name] =&gt; Alan</span><br><span class="line">        )</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<h4 id="æŒ‰-name-å€¼ä¾å­—æ¯è¡¨é¡ºåºæ’åº"><a href="#æŒ‰-name-å€¼ä¾å­—æ¯è¡¨é¡ºåºæ’åº" class="headerlink" title="æŒ‰ name å€¼ä¾å­—æ¯è¡¨é¡ºåºæ’åº"></a>æŒ‰ name å€¼ä¾å­—æ¯è¡¨é¡ºåºæ’åº</h4><blockquote>
<p><code>strcasecmp()</code> - äºŒè¿›åˆ¶å®‰å…¨æ¯”è¾ƒå­—ç¬¦ä¸²ï¼ˆä¸åŒºåˆ†å¤§å°å†™ï¼‰<br><code>strcmp()</code> - äºŒè¿›åˆ¶å®‰å…¨æ¯”è¾ƒå­—ç¬¦ä¸²ï¼ˆåŒºåˆ†å¤§å°å†™ï¼‰</p>
</blockquote>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line">uasort(<span class="variable">$array</span>, <span class="string">&#x27;sort_by_name&#x27;</span>);</span><br><span class="line">print_r(<span class="variable">$array</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»“æœ</span></span><br><span class="line"><span class="keyword">Array</span></span><br><span class="line">(</span><br><span class="line">    [d] =&gt; <span class="keyword">Array</span></span><br><span class="line">        (</span><br><span class="line">            [id] =&gt; <span class="number">1000</span></span><br><span class="line">            [name] =&gt; Mark</span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line">    [e] =&gt; <span class="keyword">Array</span></span><br><span class="line">        (</span><br><span class="line">            [id] =&gt; <span class="number">2000</span></span><br><span class="line">            [name] =&gt; Dane</span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line">    [b] =&gt; <span class="keyword">Array</span></span><br><span class="line">        (</span><br><span class="line">            [id] =&gt; <span class="number">3000</span></span><br><span class="line">            [name] =&gt; Toby</span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line">    [c] =&gt; <span class="keyword">Array</span></span><br><span class="line">        (</span><br><span class="line">            [id] =&gt; <span class="number">4000</span></span><br><span class="line">            [name] =&gt; Jack</span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line">    [a] =&gt; <span class="keyword">Array</span></span><br><span class="line">        (</span><br><span class="line">            [id] =&gt; <span class="number">5000</span></span><br><span class="line">            [name] =&gt; Alan</span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line">)</span><br><span class="line"><span class="keyword">Array</span></span><br><span class="line">(</span><br><span class="line">    [a] =&gt; <span class="keyword">Array</span></span><br><span class="line">        (</span><br><span class="line">            [id] =&gt; <span class="number">5000</span></span><br><span class="line">            [name] =&gt; Alan</span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line">    [e] =&gt; <span class="keyword">Array</span></span><br><span class="line">        (</span><br><span class="line">            [id] =&gt; <span class="number">2000</span></span><br><span class="line">            [name] =&gt; Dane</span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line">    [c] =&gt; <span class="keyword">Array</span></span><br><span class="line">        (</span><br><span class="line">            [id] =&gt; <span class="number">4000</span></span><br><span class="line">            [name] =&gt; Jack</span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line">    [d] =&gt; <span class="keyword">Array</span></span><br><span class="line">        (</span><br><span class="line">            [id] =&gt; <span class="number">1000</span></span><br><span class="line">            [name] =&gt; Mark</span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line">    [b] =&gt; <span class="keyword">Array</span></span><br><span class="line">        (</span><br><span class="line">            [id] =&gt; <span class="number">3000</span></span><br><span class="line">            [name] =&gt; Toby</span><br><span class="line">        )</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<h3 id="usort"><a href="#usort" class="headerlink" title="usort"></a>usort</h3><blockquote>
<p>ä½¿ç”¨ç”¨æˆ·è‡ªå®šä¹‰çš„æ¯”è¾ƒå‡½æ•°å¯¹æ•°ç»„ä¸­çš„å€¼è¿›è¡Œæ’åºï¼Œæ­¤å‡½æ•°ä¸º <code>array</code> ä¸­çš„å…ƒç´ èµ‹ä¸æ–°çš„é”®åã€‚è¿™å°†åˆ é™¤åŸæœ‰çš„é”®åï¼Œè€Œä¸æ˜¯ä»…ä»…å°†é”®åé‡æ–°æ’åº</p>
</blockquote>
<h4 id="æŒ‰-id-å€¼ç”±å°åˆ°å¤§æ’åº-1"><a href="#æŒ‰-id-å€¼ç”±å°åˆ°å¤§æ’åº-1" class="headerlink" title="æŒ‰ id å€¼ç”±å°åˆ°å¤§æ’åº"></a>æŒ‰ id å€¼ç”±å°åˆ°å¤§æ’åº</h4><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line">usort(<span class="variable">$array</span>, <span class="string">&#x27;sort_by_id&#x27;</span>);</span><br><span class="line">print_r(<span class="variable">$array</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»“æœ</span></span><br><span class="line"><span class="keyword">Array</span></span><br><span class="line">(</span><br><span class="line">    [<span class="number">0</span>] =&gt; <span class="keyword">Array</span></span><br><span class="line">        (</span><br><span class="line">            [id] =&gt; <span class="number">1000</span></span><br><span class="line">            [name] =&gt; Mark</span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line">    [<span class="number">1</span>] =&gt; <span class="keyword">Array</span></span><br><span class="line">        (</span><br><span class="line">            [id] =&gt; <span class="number">2000</span></span><br><span class="line">            [name] =&gt; Dane</span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line">    [<span class="number">2</span>] =&gt; <span class="keyword">Array</span></span><br><span class="line">        (</span><br><span class="line">            [id] =&gt; <span class="number">3000</span></span><br><span class="line">            [name] =&gt; Toby</span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line">    [<span class="number">3</span>] =&gt; <span class="keyword">Array</span></span><br><span class="line">        (</span><br><span class="line">            [id] =&gt; <span class="number">4000</span></span><br><span class="line">            [name] =&gt; Jack</span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line">    [<span class="number">4</span>] =&gt; <span class="keyword">Array</span></span><br><span class="line">        (</span><br><span class="line">            [id] =&gt; <span class="number">5000</span></span><br><span class="line">            [name] =&gt; Alan</span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<h4 id="æŒ‰-name-å€¼ä¾å­—æ¯è¡¨é¡ºåºæ’åº-1"><a href="#æŒ‰-name-å€¼ä¾å­—æ¯è¡¨é¡ºåºæ’åº-1" class="headerlink" title="æŒ‰ name å€¼ä¾å­—æ¯è¡¨é¡ºåºæ’åº"></a>æŒ‰ name å€¼ä¾å­—æ¯è¡¨é¡ºåºæ’åº</h4><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line">usort(<span class="variable">$array</span>, <span class="string">&#x27;sort_by_name&#x27;</span>);</span><br><span class="line">print_r(<span class="variable">$array</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»“æœ</span></span><br><span class="line"><span class="keyword">Array</span></span><br><span class="line">(</span><br><span class="line">    [<span class="number">0</span>] =&gt; <span class="keyword">Array</span></span><br><span class="line">        (</span><br><span class="line">            [id] =&gt; <span class="number">5000</span></span><br><span class="line">            [name] =&gt; Alan</span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line">    [<span class="number">1</span>] =&gt; <span class="keyword">Array</span></span><br><span class="line">        (</span><br><span class="line">            [id] =&gt; <span class="number">2000</span></span><br><span class="line">            [name] =&gt; Dane</span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line">    [<span class="number">2</span>] =&gt; <span class="keyword">Array</span></span><br><span class="line">        (</span><br><span class="line">            [id] =&gt; <span class="number">4000</span></span><br><span class="line">            [name] =&gt; Jack</span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line">    [<span class="number">3</span>] =&gt; <span class="keyword">Array</span></span><br><span class="line">        (</span><br><span class="line">            [id] =&gt; <span class="number">1000</span></span><br><span class="line">            [name] =&gt; Mark</span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line">    [<span class="number">4</span>] =&gt; <span class="keyword">Array</span></span><br><span class="line">        (</span><br><span class="line">            [id] =&gt; <span class="number">3000</span></span><br><span class="line">            [name] =&gt; Toby</span><br><span class="line">        )</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<h2 id="æ•°ç»„é”®æ’åº"><a href="#æ•°ç»„é”®æ’åº" class="headerlink" title="æ•°ç»„é”®æ’åº"></a>æ•°ç»„é”®æ’åº</h2><table>
<thead>
<tr>
<th style="text-align:left">å‡½æ•°åç§°</th>
<th style="text-align:left">æ•°ç»„ç´¢å¼•é”®ä¿æŒ</th>
<th style="text-align:left">é¡ºåº</th>
<th style="text-align:left">ç›¸å…³å‡½æ•°</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">krsort()</td>
<td style="text-align:left">æ˜¯</td>
<td style="text-align:left">ç”±é«˜åˆ°ä½</td>
<td style="text-align:left">ksort()</td>
</tr>
<tr>
<td style="text-align:left">ksort()</td>
<td style="text-align:left">æ˜¯</td>
<td style="text-align:left">ç”±ä½åˆ°é«˜</td>
<td style="text-align:left">asort()</td>
</tr>
<tr>
<td style="text-align:left">uksort()</td>
<td style="text-align:left">æ˜¯</td>
<td style="text-align:left">ç”±ç”¨æˆ·å®šä¹‰</td>
<td style="text-align:left">uasort()</td>
</tr>
</tbody>
</table>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line"></span><br><span class="line">$array = [</span><br><span class="line">    &#x27;b&#x27; =&gt; [&#x27;a&#x27; =&gt; 1, &#x27;c&#x27; =&gt; 0.01, &#x27;b&#x27; =&gt; null],</span><br><span class="line">    &#x27;a&#x27; =&gt; [&#x27;b&#x27; =&gt; 3, &#x27;a&#x27; =&gt; 0.03, &#x27;c&#x27; =&gt; null],</span><br><span class="line">    &#x27;c&#x27; =&gt; [&#x27;c&#x27; =&gt; 2, &#x27;b&#x27; =&gt; 0.02, &#x27;a&#x27; =&gt; null],</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line">function sort_by_key($left, $right)</span><br><span class="line">&#123;</span><br><span class="line">    return strcasecmp($left, $right);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="uksort"><a href="#uksort" class="headerlink" title="uksort"></a>uksort</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line">uksort(<span class="variable">$array</span>, <span class="string">&#x27;sort_by_key&#x27;</span>);</span><br><span class="line">print_r(<span class="variable">$array</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»“æœ</span></span><br><span class="line"><span class="keyword">Array</span></span><br><span class="line">(</span><br><span class="line">    [a] =&gt; <span class="keyword">Array</span></span><br><span class="line">        (</span><br><span class="line">            [b] =&gt; <span class="number">3</span></span><br><span class="line">            [a] =&gt; <span class="number">0.03</span></span><br><span class="line">            [c] =&gt;</span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line">    [b] =&gt; <span class="keyword">Array</span></span><br><span class="line">        (</span><br><span class="line">            [a] =&gt; <span class="number">1</span></span><br><span class="line">            [c] =&gt; <span class="number">0.01</span></span><br><span class="line">            [b] =&gt;</span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line">    [c] =&gt; <span class="keyword">Array</span></span><br><span class="line">        (</span><br><span class="line">            [c] =&gt; <span class="number">2</span></span><br><span class="line">            [b] =&gt; <span class="number">0.02</span></span><br><span class="line">            [a] =&gt;</span><br><span class="line">        )</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p>æœªå®Œå¾…ç»­ã€‚ã€‚ã€‚</p>
]]></content>
      <categories>
        <category>php</category>
      </categories>
      <tags>
        <tag>php</tag>
      </tags>
  </entry>
  <entry>
    <title>PHP - è®¡ç®—å‡ºä¸¤ä¸ªæ—¥æœŸä¹‹é—´çš„å·®å€¼</title>
    <url>/2018/01/15/php-calculate-the-difference-between-two-dates/</url>
    <content><![CDATA[<p>PHP å®ç°ä¸¤ä¸ªæ—¥æœŸä¹‹é—´ç›¸å·®çš„å‡ å¹´ã€å‡ æœˆã€å‡ æ—¥â€¦â€¦ï¼Œå¯ä»¥é‡‡ç”¨ PHP å†…ç½®çš„ç±» <code>DateTime</code> å’Œå‡½æ•° <code>strtotime()</code> å®ç°ï¼Œæ¨èä½¿ç”¨å†…ç½®ç±» <code>DateTime</code> å»å®ç°ï¼Œ<code>DateTime</code> æŠŠæ¯ä¸ªæœˆå¤©æ•°çš„å·®å¼‚è‡ªåŠ¨å¤„ç†äº†ï¼Œä½¿ç”¨ <code>strtotime()</code> å‡½æ•°éœ€è¦è‡ªè¡Œå¤„ç†ã€‚</p>
<span id="more"></span>
<h1 id="è®¡ç®—å‡ºä¸¤ä¸ªæ—¥æœŸä¹‹é—´çš„å·®å€¼"><a href="#è®¡ç®—å‡ºä¸¤ä¸ªæ—¥æœŸä¹‹é—´çš„å·®å€¼" class="headerlink" title="è®¡ç®—å‡ºä¸¤ä¸ªæ—¥æœŸä¹‹é—´çš„å·®å€¼"></a>è®¡ç®—å‡ºä¸¤ä¸ªæ—¥æœŸä¹‹é—´çš„å·®å€¼</h1><blockquote>
<p><a href="http://php.net/manual/zh/class.datetime.php"><code>Representation of date and time</code></a></p>
</blockquote>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getDateDiff</span>(<span class="params"><span class="variable">$date1</span>, <span class="variable">$date2</span></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="variable">$datetime1</span> = <span class="keyword">new</span> \DateTime(<span class="variable">$date1</span>);</span><br><span class="line">    <span class="variable">$datetime2</span> = <span class="keyword">new</span> \DateTime(<span class="variable">$date2</span>);</span><br><span class="line">    <span class="variable">$interval</span> = <span class="variable">$datetime1</span>-&gt;diff(<span class="variable">$datetime2</span>);</span><br><span class="line"></span><br><span class="line">    <span class="variable">$datetime</span> = [];</span><br><span class="line">    <span class="variable">$items</span> = [</span><br><span class="line">        <span class="string">&#x27;year&#x27;</span>   =&gt; <span class="string">&#x27;y&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;month&#x27;</span>  =&gt; <span class="string">&#x27;m&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;day&#x27;</span>    =&gt; <span class="string">&#x27;d&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;hour&#x27;</span>   =&gt; <span class="string">&#x27;H&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;minute&#x27;</span> =&gt; <span class="string">&#x27;i&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;second&#x27;</span> =&gt; <span class="string">&#x27;s&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;days&#x27;</span>   =&gt; <span class="string">&#x27;a&#x27;</span>,</span><br><span class="line">    ];</span><br><span class="line">    <span class="keyword">foreach</span> (<span class="variable">$items</span> <span class="keyword">as</span> <span class="variable">$key</span> =&gt; <span class="variable">$format</span>) &#123;</span><br><span class="line">        <span class="variable">$datetime</span>[<span class="variable">$key</span>] = <span class="variable">$interval</span>-&gt;format(<span class="string">&quot;%<span class="subst">&#123;$format&#125;</span>&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="variable">$datetime</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable">$date1</span> = <span class="string">&#x27;2016-12-12 09:45:45&#x27;</span>;</span><br><span class="line"><span class="variable">$date2</span> = <span class="string">&#x27;2018-01-15 10:55:55&#x27;</span>;</span><br><span class="line"><span class="variable">$array</span> = getDateDiff(<span class="variable">$date1</span>, <span class="variable">$date2</span>);</span><br><span class="line">print_r(<span class="variable">$array</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»“æœ</span></span><br><span class="line"><span class="keyword">Array</span></span><br><span class="line">(</span><br><span class="line">    [year] =&gt; <span class="number">1</span></span><br><span class="line">    [month] =&gt; <span class="number">1</span></span><br><span class="line">    [day] =&gt; <span class="number">3</span></span><br><span class="line">    [hour] =&gt; <span class="number">01</span></span><br><span class="line">    [minute] =&gt; <span class="number">10</span></span><br><span class="line">    [second] =&gt; <span class="number">10</span></span><br><span class="line">    [days] =&gt; <span class="number">399</span></span><br><span class="line">)</span><br><span class="line">ä¹Ÿå°±æ˜¯è¯´è¿™ä¸¤ä¸ªæ—¥æœŸä¹‹é—´çš„å·®å€¼ä¸ºï¼š<span class="number">1</span> å¹´ <span class="number">1</span> ä¸ªæœˆ <span class="number">3</span> å¤© <span class="number">1</span> å°æ—¶ <span class="number">10</span> åˆ†é’Ÿ <span class="number">10</span> ç§’ï¼Œæ€»å…± <span class="number">399</span> å¤©</span><br></pre></td></tr></table></figure>
<h1 id="è®¡ç®—ä¸¤ä¸ªæ—¶æœŸä¹‹é—´çš„æœˆä»½æ•°"><a href="#è®¡ç®—ä¸¤ä¸ªæ—¶æœŸä¹‹é—´çš„æœˆä»½æ•°" class="headerlink" title="è®¡ç®—ä¸¤ä¸ªæ—¶æœŸä¹‹é—´çš„æœˆä»½æ•°"></a>è®¡ç®—ä¸¤ä¸ªæ—¶æœŸä¹‹é—´çš„æœˆä»½æ•°</h1><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line"></span><br><span class="line"><span class="variable">$date1</span> = <span class="string">&#x27;2018-12-12 09:45:45&#x27;</span>;</span><br><span class="line"><span class="variable">$date2</span> = <span class="string">&#x27;2020-01-12 09:45:44&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable">$d1</span> = new \DateTime(<span class="variable">$date1</span>);</span><br><span class="line"><span class="variable">$d2</span> = new \DateTime(<span class="variable">$date2</span>);</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$d1</span>-&gt;diff(<span class="variable">$d2</span>)-&gt;m + (<span class="variable">$d1</span>-&gt;diff(<span class="variable">$d2</span>)-&gt;y * 12);</span><br><span class="line"></span><br><span class="line">// ç»“æœ</span><br><span class="line">12</span><br><span class="line">ä»ç»“æœæ¥çœ‹ï¼Œä¸è¶³ä¸€æœˆä¼šè‡ªåŠ¨èˆå»</span><br></pre></td></tr></table></figure>
<h1 id="æ‰©å±•çš„æ—¥æœŸæ—¶é—´ç±»"><a href="#æ‰©å±•çš„æ—¥æœŸæ—¶é—´ç±»" class="headerlink" title="æ‰©å±•çš„æ—¥æœŸæ—¶é—´ç±»"></a>æ‰©å±•çš„æ—¥æœŸæ—¶é—´ç±»</h1><blockquote>
<p><a href="https://github.com/briannesbitt/carbon">Carbon GitHub</a><br><a href="http://carbon.nesbot.com/">Carbon Website</a></p>
</blockquote>
<h2 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// ä½¿ç”¨ composer å®‰è£…</span><br><span class="line">$ composer require nesbot/carbon</span><br></pre></td></tr></table></figure>
<h2 id="å®ä¾‹"><a href="#å®ä¾‹" class="headerlink" title="å®ä¾‹"></a>å®ä¾‹</h2><p>æ›´å¤šä½¿ç”¨å®ä¾‹è¯·å‚è§<a href="http://carbon.nesbot.com/">å®˜ç½‘</a></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line"></span><br><span class="line">require <span class="string">&#x27;vendor/autoload.php&#x27;</span>;</span><br><span class="line"></span><br><span class="line">use Carbon\Carbon;</span><br><span class="line"></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;Now: %s&quot;</span>, Carbon::now());</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>php</category>
      </categories>
      <tags>
        <tag>php</tag>
      </tags>
  </entry>
  <entry>
    <title>MySQL æŸ¥è¯¢å½“å‰å¹´ã€å­£ã€æœˆã€å‘¨çš„ç¬¬ä¸€å¤©å’Œæœ€åä¸€å¤©</title>
    <url>/2018/01/20/mysql-year-quarter-month-week-query/</url>
    <content><![CDATA[<p>MySQL æŸ¥è¯¢å½“å‰å¹´ä»½çš„ç¬¬ä¸€å¤©å’Œæœ€åä¸€å¤©ã€å½“å‰å­£åº¦çš„ç¬¬ä¸€å¤©å’Œæœ€åä¸€å¤©ã€å½“å‰æœˆä»½çš„ç¬¬ä¸€å¤©å’Œæœ€åä¸€å¤©ã€å½“å‰å‘¨çš„ç¬¬ä¸€å¤©å’Œæœ€åä¸€å¤©</p>
<span id="more"></span>
<h2 id="å¹´ä»½"><a href="#å¹´ä»½" class="headerlink" title="å¹´ä»½"></a>å¹´ä»½</h2><h3 id="å½“å‰å¹´ä»½ç¬¬ä¸€å¤©"><a href="#å½“å‰å¹´ä»½ç¬¬ä¸€å¤©" class="headerlink" title="å½“å‰å¹´ä»½ç¬¬ä¸€å¤©"></a>å½“å‰å¹´ä»½ç¬¬ä¸€å¤©</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> DATE_SUB(CURDATE(), <span class="type">INTERVAL</span> DAYOFYEAR(NOW()) <span class="operator">-</span> <span class="number">1</span> <span class="keyword">DAY</span>) <span class="keyword">AS</span> <span class="string">&#x27;å½“å‰å¹´ä»½çš„ç¬¬ä¸€å¤©&#x27;</span>;</span><br></pre></td></tr></table></figure>
<h3 id="å½“å‰å¹´ä»½æœ€åä¸€å¤©"><a href="#å½“å‰å¹´ä»½æœ€åä¸€å¤©" class="headerlink" title="å½“å‰å¹´ä»½æœ€åä¸€å¤©"></a>å½“å‰å¹´ä»½æœ€åä¸€å¤©</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> CONCAT(<span class="keyword">YEAR</span>(NOW()), <span class="string">&#x27;-12-31&#x27;</span>) <span class="keyword">AS</span> <span class="string">&#x27;å½“å‰å¹´ä»½çš„æœ€åä¸€å¤©&#x27;</span>;</span><br></pre></td></tr></table></figure>
<h2 id="å­£åº¦"><a href="#å­£åº¦" class="headerlink" title="å­£åº¦"></a>å­£åº¦</h2><h3 id="å½“å‰å­£åº¦ç¬¬ä¸€å¤©"><a href="#å½“å‰å­£åº¦ç¬¬ä¸€å¤©" class="headerlink" title="å½“å‰å­£åº¦ç¬¬ä¸€å¤©"></a>å½“å‰å­£åº¦ç¬¬ä¸€å¤©</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> MAKEDATE(<span class="keyword">YEAR</span>(CURDATE()), <span class="number">1</span>) <span class="operator">+</span> <span class="type">INTERVAL</span> QUARTER(CURDATE()) QUARTER <span class="operator">-</span> <span class="type">INTERVAL</span> <span class="number">1</span> QUARTER <span class="operator">-</span></span><br><span class="line">       <span class="type">INTERVAL</span> <span class="operator">+</span><span class="number">1</span> <span class="keyword">MONTH</span> <span class="keyword">AS</span> <span class="string">&#x27;å½“å‰å­£åº¦çš„ç¬¬ä¸€å¤©&#x27;</span>;</span><br></pre></td></tr></table></figure>
<h3 id="å½“å‰å­£åº¦æœ€åä¸€å¤©"><a href="#å½“å‰å­£åº¦æœ€åä¸€å¤©" class="headerlink" title="å½“å‰å­£åº¦æœ€åä¸€å¤©"></a>å½“å‰å­£åº¦æœ€åä¸€å¤©</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> LAST_DAY(MAKEDATE(<span class="built_in">EXTRACT</span>(<span class="keyword">YEAR</span> <span class="keyword">FROM</span> CURDATE()), <span class="number">1</span>) <span class="operator">+</span> <span class="type">INTERVAL</span> QUARTER(CURDATE()) <span class="operator">*</span> <span class="number">3</span> <span class="operator">-</span> <span class="number">1</span> <span class="keyword">MONTH</span>) <span class="keyword">AS</span> <span class="string">&#x27;å½“å‰å­£åº¦çš„æœ€åä¸€å¤©&#x27;</span>;</span><br></pre></td></tr></table></figure>
<h2 id="å½“å‰æœˆä»½"><a href="#å½“å‰æœˆä»½" class="headerlink" title="å½“å‰æœˆä»½"></a>å½“å‰æœˆä»½</h2><h3 id="å½“å‰æœˆä»½çš„ç¬¬ä¸€å¤©"><a href="#å½“å‰æœˆä»½çš„ç¬¬ä¸€å¤©" class="headerlink" title="å½“å‰æœˆä»½çš„ç¬¬ä¸€å¤©"></a>å½“å‰æœˆä»½çš„ç¬¬ä¸€å¤©</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> DATE_SUB(CURDATE(), <span class="type">INTERVAL</span> DAYOFMONTH(NOW()) <span class="operator">-</span> <span class="number">1</span> <span class="keyword">DAY</span>) <span class="keyword">AS</span> <span class="string">&#x27;å½“å‰æœˆä»½çš„ç¬¬ä¸€å¤©&#x27;</span>;</span><br></pre></td></tr></table></figure>
<h3 id="å½“å‰æœˆä»½çš„æœ€åä¸€å¤©"><a href="#å½“å‰æœˆä»½çš„æœ€åä¸€å¤©" class="headerlink" title="å½“å‰æœˆä»½çš„æœ€åä¸€å¤©"></a>å½“å‰æœˆä»½çš„æœ€åä¸€å¤©</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> LAST_DAY(NOW()) <span class="keyword">AS</span> <span class="string">&#x27;å½“å‰æœˆä»½çš„æœ€åä¸€å¤©&#x27;</span>;</span><br></pre></td></tr></table></figure>
<h2 id="å½“å‰å‘¨"><a href="#å½“å‰å‘¨" class="headerlink" title="å½“å‰å‘¨"></a>å½“å‰å‘¨</h2><h3 id="å½“å‰å‘¨çš„ç¬¬ä¸€å¤©"><a href="#å½“å‰å‘¨çš„ç¬¬ä¸€å¤©" class="headerlink" title="å½“å‰å‘¨çš„ç¬¬ä¸€å¤©"></a>å½“å‰å‘¨çš„ç¬¬ä¸€å¤©</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> DATE_SUB(CURDATE(), <span class="type">INTERVAL</span> WEEKDAY(CURDATE()) <span class="operator">+</span> <span class="number">0</span> <span class="keyword">DAY</span>) <span class="keyword">AS</span> <span class="string">&#x27;å½“å‰å‘¨çš„ç¬¬ä¸€å¤©&#x27;</span>;</span><br></pre></td></tr></table></figure>
<h3 id="å½“å‰å‘¨çš„æœ€åä¸€å¤©"><a href="#å½“å‰å‘¨çš„æœ€åä¸€å¤©" class="headerlink" title="å½“å‰å‘¨çš„æœ€åä¸€å¤©"></a>å½“å‰å‘¨çš„æœ€åä¸€å¤©</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> DATE_SUB(CURDATE(), <span class="type">INTERVAL</span> WEEKDAY(CURDATE()) <span class="operator">-</span> <span class="number">6</span> <span class="keyword">DAY</span>) <span class="keyword">AS</span> <span class="string">&#x27;å½“å‰å‘¨çš„æœ€åä¸€å¤©&#x27;</span>;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>mysql</category>
      </categories>
      <tags>
        <tag>mysql</tag>
      </tags>
  </entry>
  <entry>
    <title>PHP Command Line Interface</title>
    <url>/2018/01/18/php-cli/</url>
    <content><![CDATA[<h1 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h1><p><code>PHP</code> æä¾›äº†ä¸€ç§ <code>CLI SAPI - Server Application Programming Interface</code>ï¼ŒæœåŠ¡ç«¯åº”ç”¨ç¼–ç¨‹æ¥å£çš„æ”¯æŒï¼Œæ„ä¸º <code>CLI - Command Line Interface</code>ï¼Œå³å‘½ä»¤è¡Œæ¥å£ã€‚ä¹Ÿæ˜¯ <code>Web</code> è„šæœ¬è¯­è¨€ <code>PHP</code> åœ¨ç³»ç»Ÿå‘½ä»¤è¡Œï¼ˆ<code>Shell</code>ï¼‰ä¸‹çš„å¦ä¸€ç§å½¢å¼ï¼Œç”¨æˆ·å¯ä»¥åœ¨ç³»ç»Ÿå‘½ä»¤ä¸­ä½¿ç”¨ <code>PHP</code> ç¼–å†™äº¤äº’ä»£ç </p>
<h1 id="ä½œç”¨"><a href="#ä½œç”¨" class="headerlink" title="ä½œç”¨"></a>ä½œç”¨</h1><p>å¼€å‘å¤–å£³åº”ç”¨</p>
<h1 id="CLI-SAPI-å’Œå…¶å®ƒ-SAPI-æ¨¡å—çš„åŒºåˆ«"><a href="#CLI-SAPI-å’Œå…¶å®ƒ-SAPI-æ¨¡å—çš„åŒºåˆ«" class="headerlink" title="CLI SAPI å’Œå…¶å®ƒ SAPI æ¨¡å—çš„åŒºåˆ«"></a>CLI SAPI å’Œå…¶å®ƒ SAPI æ¨¡å—çš„åŒºåˆ«</h1><ul>
<li>ä¸ <code>CGI SAPI</code> ä¸åŒï¼Œå…¶è¾“å‡ºæ²¡æœ‰ä»»ä½•å¤´ä¿¡æ¯</li>
<li><code>CLI SAPI</code> å¼ºåˆ¶è¦†ç›–äº† <code>php.ini</code> ä¸­çš„æŸäº›è®¾ç½®ï¼Œå› ä¸ºè¿™äº›è®¾ç½®åœ¨å¤–å£³ç¯å¢ƒä¸‹æ˜¯æ²¡æœ‰æ„ä¹‰</li>
<li>ä¸ºäº†å‡è½»å¤–å£³ç¯å¢ƒä¸‹çš„å·¥ä½œï¼Œå®šä¹‰äº†å¦‚ä¸‹å¸¸é‡</li>
</ul>
<table>
<thead>
<tr>
<th>åç§°</th>
<th>æè¿°</th>
<th>å¤‡æ³¨</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>STDIN</code></td>
<td>ä¸€ä¸ªå·²æ‰“å¼€çš„æŒ‡å‘ <code>stdin</code> çš„æµï¼Œè°ƒç”¨æ–¹æ³•ï¼š<code>$stdin = fopen(&#39;php://stdin&#39;, &#39;r&#39;);</code></td>
<td></td>
</tr>
<tr>
<td><code>STDOUT</code></td>
<td>ä¸€ä¸ªå·²æ‰“å¼€çš„æŒ‡å‘ <code>stdout</code> çš„æµï¼Œè°ƒç”¨æ–¹æ³•ï¼š$stdout = fopen(â€˜php://stdoutâ€™, â€˜wâ€™);</td>
<td></td>
</tr>
<tr>
<td><code>STDERR</code></td>
<td>ä¸€ä¸ªå·²æ‰“å¼€çš„æŒ‡å‘ <code>stderr</code> çš„æµï¼Œ è°ƒç”¨æ–¹æ³•ï¼š$stderr = fopen(â€˜php://stderrâ€™, â€˜wâ€™);</td>
</tr>
</tbody>
</table>
<ul>
<li><code>CLI SAPI</code> ä¸ä¼šå°†å½“å‰ç›®å½•æ”¹ä¸ºå·²è¿è¡Œçš„è„šæœ¬æ‰€åœ¨çš„ç›®å½•</li>
</ul>
<h1 id="CLI-SAPI-æ¨¡å—çš„ä¸‰ç§è¿è¡Œæ–¹å¼"><a href="#CLI-SAPI-æ¨¡å—çš„ä¸‰ç§è¿è¡Œæ–¹å¼" class="headerlink" title="CLI SAPI æ¨¡å—çš„ä¸‰ç§è¿è¡Œæ–¹å¼"></a>CLI SAPI æ¨¡å—çš„ä¸‰ç§è¿è¡Œæ–¹å¼</h1><h2 id="è®©-PHP-è¿è¡ŒæŒ‡å®šæ–‡ä»¶"><a href="#è®©-PHP-è¿è¡ŒæŒ‡å®šæ–‡ä»¶" class="headerlink" title="è®© PHP è¿è¡ŒæŒ‡å®šæ–‡ä»¶"></a>è®© PHP è¿è¡ŒæŒ‡å®šæ–‡ä»¶</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ php test.php</span><br><span class="line">æˆ–è€…</span><br><span class="line">$ php -f test.php</span><br></pre></td></tr></table></figure>
<h2 id="åœ¨å‘½ä»¤è¡Œç›´æ¥è¿è¡Œ-PHP-ä»£ç "><a href="#åœ¨å‘½ä»¤è¡Œç›´æ¥è¿è¡Œ-PHP-ä»£ç " class="headerlink" title="åœ¨å‘½ä»¤è¡Œç›´æ¥è¿è¡Œ PHP ä»£ç "></a>åœ¨å‘½ä»¤è¡Œç›´æ¥è¿è¡Œ PHP ä»£ç </h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ php -r <span class="string">&#x27;print_r(get_defined_constants());&#x27;</span></span><br></pre></td></tr></table></figure>
<h2 id="é€šè¿‡æ ‡å‡†è¾“å…¥-stdin-æä¾›éœ€è¦è¿è¡Œçš„-PHP-ä»£ç "><a href="#é€šè¿‡æ ‡å‡†è¾“å…¥-stdin-æä¾›éœ€è¦è¿è¡Œçš„-PHP-ä»£ç " class="headerlink" title="é€šè¿‡æ ‡å‡†è¾“å…¥ stdin æä¾›éœ€è¦è¿è¡Œçš„ PHP ä»£ç "></a>é€šè¿‡æ ‡å‡†è¾“å…¥ stdin æä¾›éœ€è¦è¿è¡Œçš„ PHP ä»£ç </h2><h1 id="PHP-CLI-åº”ç”¨åœºæ™¯"><a href="#PHP-CLI-åº”ç”¨åœºæ™¯" class="headerlink" title="PHP CLI åº”ç”¨åœºæ™¯"></a>PHP CLI åº”ç”¨åœºæ™¯</h1><h2 id="å¤šçº¿ç¨‹åº”ç”¨"><a href="#å¤šçº¿ç¨‹åº”ç”¨" class="headerlink" title="å¤šçº¿ç¨‹åº”ç”¨"></a>å¤šçº¿ç¨‹åº”ç”¨</h2><ul>
<li>ä½¿ç”¨å¤šè¿›ç¨‹ï¼Œå­è¿›ç¨‹ç»“æŸä»¥åï¼Œå†…æ ¸ä¼šè´Ÿè´£å›æ”¶èµ„æº</li>
<li>ä½¿ç”¨å¤šè¿›ç¨‹ï¼Œå­è¿›ç¨‹å¼‚å¸¸é€€å‡ºä¸ä¼šå¯¼è‡´æ•´ä¸ªè¿›ç¨‹ <code>Thread</code> é€€å‡ºï¼Œçˆ¶è¿›ç¨‹è¿˜æœ‰æœºä¼šé‡å»ºæµç¨‹</li>
<li>ä¸€ä¸ªå¸¸é©»ä¸»è¿›ç¨‹ï¼Œåªè´Ÿè´£ä»»åŠ¡åˆ†å‘ï¼Œé€»è¾‘ç†æ¸…æ¥š</li>
</ul>
<h2 id="å®šæ—¶æ‰§è¡Œ-PHP-ç¨‹åº"><a href="#å®šæ—¶æ‰§è¡Œ-PHP-ç¨‹åº" class="headerlink" title="å®šæ—¶æ‰§è¡Œ PHP ç¨‹åº"></a>å®šæ—¶æ‰§è¡Œ PHP ç¨‹åº</h2><blockquote>
<p>åˆ©ç”¨ Linux çš„ crontab å‘½ä»¤ï¼Œæ–‡ä»¶è·¯å¾„å»ºè®®ä½¿ç”¨ç»å¯¹è·¯å¾„ã€‚</p>
</blockquote>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// The task you plan to perform</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&#x27;PHP is the best programming language.&#x27;</span>;</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ crontab -e</span><br><span class="line">// æ¯åˆ†é’Ÿæ‰§è¡Œä¸€æ¬¡è„šæœ¬å¹¶ä¸”è¾“å‡º</span><br><span class="line">* * * * * /usr/bin/php /usr/<span class="built_in">local</span>/src/test.php</span><br><span class="line"></span><br><span class="line">// æ¯åˆ†é’Ÿæ‰§è¡Œä¸€æ¬¡è„šæœ¬å¹¶ä¸”åœ¨åå°è¿è¡Œ</span><br><span class="line">* * * * * /usr/bin/php /usr/<span class="built_in">local</span>/src/test.php &gt;/dev/null 2&gt;&amp;1</span><br></pre></td></tr></table></figure>
<h2 id="å¼€å‘æ¡Œé¢ç¨‹åº"><a href="#å¼€å‘æ¡Œé¢ç¨‹åº" class="headerlink" title="å¼€å‘æ¡Œé¢ç¨‹åº"></a>å¼€å‘æ¡Œé¢ç¨‹åº</h2><blockquote>
<p>ä½¿ç”¨ PHP CLI å’Œ GTK åŒ…ã€‚</p>
</blockquote>
<h2 id="Linux-ä¸‹ç¼–å†™-PHP-çš„-Shell-è„šæœ¬"><a href="#Linux-ä¸‹ç¼–å†™-PHP-çš„-Shell-è„šæœ¬" class="headerlink" title="Linux ä¸‹ç¼–å†™ PHP çš„ Shell è„šæœ¬"></a>Linux ä¸‹ç¼–å†™ PHP çš„ Shell è„šæœ¬</h2><h1 id="PHP-CLI-å®ä¾‹"><a href="#PHP-CLI-å®ä¾‹" class="headerlink" title="PHP CLI å®ä¾‹"></a>PHP CLI å®ä¾‹</h1><h1 id="PHP-CLI-è¿›é˜¶"><a href="#PHP-CLI-è¿›é˜¶" class="headerlink" title="PHP CLI è¿›é˜¶"></a>PHP CLI è¿›é˜¶</h1>]]></content>
      <categories>
        <category>php</category>
      </categories>
      <tags>
        <tag>php</tag>
      </tags>
  </entry>
  <entry>
    <title>PHP ä¾èµ–ç®¡ç†å™¨</title>
    <url>/2018/01/18/php-composer/</url>
    <content><![CDATA[<blockquote>
<ul>
<li><a href="https://getcomposer.org/">Composer Homepage</a></li>
<li><a href="https://github.com/composer/composer">Composer GitHub</a></li>
<li><a href="https://getcomposer.org/doc/">Composer è‹±æ–‡æ–‡æ¡£</a></li>
<li><a href="http://docs.phpcomposer.com/">Composer ä¸­æ–‡æ–‡æ¡£</a></li>
<li><a href="https://pkg.phpcomposer.com/">Coomposer ä¸­å›½å…¨é‡é•œåƒ</a></li>
</ul>
</blockquote>
<h1 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h1><p><code>Composer</code> æ˜¯ <code>PHP</code> çš„ä¸€ä¸ªä¾èµ–ç®¡ç†å·¥å…·ã€‚å®ƒå…è®¸ä½ ç”³æ˜é¡¹ç›®æ‰€ä¾èµ–çš„ä»£ç åº“ï¼Œå®ƒä¼šåœ¨ä½ çš„é¡¹ç›®ä¸­ä¸ºä½ å®‰è£…ä»–ä»¬ã€‚</p>
<h1 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h1><h2 id="Linux"><a href="#Linux" class="headerlink" title="Linux"></a>Linux</h2><h3 id="å±€éƒ¨å®‰è£…"><a href="#å±€éƒ¨å®‰è£…" class="headerlink" title="å±€éƒ¨å®‰è£…"></a>å±€éƒ¨å®‰è£…</h3><blockquote>
<p>å±€éƒ¨å®‰è£…ä¸€èˆ¬æŒ‡å½“å‰ä¸‹è½½å®‰è£…çš„ç›®å½•ã€‚</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// å‘½ä»¤å®‰è£…</span><br><span class="line">$ curl -sS https://getcomposer.org/installer | php</span><br><span class="line"></span><br><span class="line">// è·å–æ›´å¤šçš„ä¿¡æ¯</span><br><span class="line">$ curl -sS https://getcomposer.org/installer | php -- --<span class="built_in">help</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>å¦‚æœä¸Šè¿°æ–¹æ³•å®‰è£…å¤±è´¥ï¼Œå¯ä½¿ç”¨ <code>php</code> å‘½ä»¤ä¸‹è½½å®‰è£…</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ php -r <span class="string">&quot;readfile(&#x27;https://getcomposer.org/installer&#x27;);&quot;</span> | php</span><br><span class="line">æˆ–è€…</span><br><span class="line">$ php -r <span class="string">&quot;copy(&#x27;https://getcomposer.org/installer&#x27;, &#x27;composer-setup.php&#x27;);&quot;</span></span><br><span class="line">$ php -r <span class="string">&quot;if (hash_file(&#x27;SHA384&#x27;, &#x27;composer-setup.php&#x27;) === &#x27;544e09ee996cdf60ece3804abc52599c22b1f40f4323403c44d44fdfdd586475ca9813a858088ffbc1f233e9b180f061&#x27;) &#123; echo &#x27;Installer verified&#x27;; &#125; else &#123; echo &#x27;Installer corrupt&#x27;; unlink(&#x27;composer-setup.php&#x27;); &#125; echo PHP_EOL;&quot;</span></span><br><span class="line">$ php composer-setup.php</span><br><span class="line">$ php -r <span class="string">&quot;unlink(&#x27;composer-setup.php&#x27;);&quot;</span></span><br></pre></td></tr></table></figure>
<h3 id="å…¨å±€å®‰è£…"><a href="#å…¨å±€å®‰è£…" class="headerlink" title="å…¨å±€å®‰è£…"></a>å…¨å±€å®‰è£…</h3><blockquote>
<p>å…¨å±€å®‰è£…å…¶å®å°±æ˜¯æŠŠ <code>composer</code> å‘½ä»¤æ”¾åˆ°ç¯å¢ƒç³»ç»Ÿå˜é‡è¯†åˆ«çš„è·¯å¾„ä¸­ã€‚</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ sudo mv composer.phar /usr/<span class="built_in">local</span>/bin/composer</span><br><span class="line">$ sudo chmod +x /usr/<span class="built_in">local</span>/bin/composer</span><br></pre></td></tr></table></figure>
<p>å¦‚æœå‘½ä»¤å› ä¸ºæƒé™æ‰§è¡Œå¤±è´¥ï¼Œè¯·ä½¿ç”¨ <code>sudo</code> å†æ¬¡å°è¯•è¿è¡Œ <code>mv</code> é‚£è¡Œå‘½ä»¤ã€‚</p>
<h2 id="Mac"><a href="#Mac" class="headerlink" title="Mac"></a>Mac</h2><blockquote>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼Œé€šè¿‡ <code>brew</code> å®‰è£…çš„å¯æ‰§è¡Œå‘½ä»¤åœ¨ <code>/usr/local/bin</code> ç›®å½•ä¸­åšäº†è½¯é“¾ã€‚</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ brew search composer</span><br><span class="line">$ brew install composer</span><br><span class="line">$ composer -V</span><br></pre></td></tr></table></figure>
<h2 id="Windows"><a href="#Windows" class="headerlink" title="Windows"></a>Windows</h2><h3 id="è‡ªåŠ¨å®‰è£…"><a href="#è‡ªåŠ¨å®‰è£…" class="headerlink" title="è‡ªåŠ¨å®‰è£…"></a>è‡ªåŠ¨å®‰è£…</h3><p>ä¸‹è½½ <code>Composer-Setup.exe</code>ï¼ŒåŒå‡»ç›´æ¥å®‰è£…å³å¯</p>
<h3 id="æ‰‹åŠ¨å®‰è£…"><a href="#æ‰‹åŠ¨å®‰è£…" class="headerlink" title="æ‰‹åŠ¨å®‰è£…"></a>æ‰‹åŠ¨å®‰è£…</h3><blockquote>
<p>å¦‚æœæ”¶åˆ° <code>readfile</code> é”™è¯¯æç¤ºï¼Œä½¿ç”¨ <code>http</code> é“¾æ¥æˆ–è€…åœ¨ <code>php.ini</code> ä¸­å¼€å¯ <code>php_openssl.dll</code></p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">C:\Users\username&gt;<span class="built_in">cd</span> C:\bin</span><br><span class="line">C:\bin&gt;php -r <span class="string">&quot;readfile(&#x27;https://getcomposer.org/installer&#x27;);&quot;</span> | php</span><br></pre></td></tr></table></figure>
<p>åœ¨ <code>composer.phar</code> åŒçº§ç›®å½•ä¸‹æ–°å»ºæ–‡ä»¶ <code>composer.bat</code></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">C:\bin&gt;<span class="built_in">echo</span> @php <span class="string">&quot;%~dp0composer.phar&quot;</span> %*&gt;composer.bat</span><br></pre></td></tr></table></figure>
<p>å…³é—­å½“å‰çš„å‘½ä»¤è¡Œçª—å£ï¼Œæ‰“å¼€æ–°çš„å‘½ä»¤è¡Œçª—å£è¿›è¡Œæµ‹è¯•</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">C:\Users\username&gt;composer -V</span><br></pre></td></tr></table></figure>
<h1 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h1><h2 id="åˆ›å»ºé¡¹ç›®ä¾èµ–"><a href="#åˆ›å»ºé¡¹ç›®ä¾èµ–" class="headerlink" title="åˆ›å»ºé¡¹ç›®ä¾èµ–"></a>åˆ›å»ºé¡¹ç›®ä¾èµ–</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// åˆ›å»º composer.json æ–‡ä»¶</span><br><span class="line">$ composer init</span><br></pre></td></tr></table></figure>
<h2 id="å®‰è£…é¡¹ç›®ä¾èµ–"><a href="#å®‰è£…é¡¹ç›®ä¾èµ–" class="headerlink" title="å®‰è£…é¡¹ç›®ä¾èµ–"></a>å®‰è£…é¡¹ç›®ä¾èµ–</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// å®‰è£…ä¾èµ–</span><br><span class="line">$ composer install</span><br></pre></td></tr></table></figure>
<h2 id="æ›´æ–°é¡¹ç›®ä¾èµ–"><a href="#æ›´æ–°é¡¹ç›®ä¾èµ–" class="headerlink" title="æ›´æ–°é¡¹ç›®ä¾èµ–"></a>æ›´æ–°é¡¹ç›®ä¾èµ–</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// æ›´æ–°ä¾èµ–</span><br><span class="line">$ composer update</span><br></pre></td></tr></table></figure>
<h1 id="é•œåƒ"><a href="#é•œåƒ" class="headerlink" title="é•œåƒ"></a>é•œåƒ</h1><h2 id="å¯ç”¨é•œåƒæœåŠ¡æ–¹å¼"><a href="#å¯ç”¨é•œåƒæœåŠ¡æ–¹å¼" class="headerlink" title="å¯ç”¨é•œåƒæœåŠ¡æ–¹å¼"></a>å¯ç”¨é•œåƒæœåŠ¡æ–¹å¼</h2><h3 id="ç³»ç»Ÿå…¨å±€é…ç½®"><a href="#ç³»ç»Ÿå…¨å±€é…ç½®" class="headerlink" title="ç³»ç»Ÿå…¨å±€é…ç½®"></a>ç³»ç»Ÿå…¨å±€é…ç½®</h3><p>å°†é…ç½®ä¿¡æ¯æ·»åŠ åˆ° <code>Composer</code> çš„å…¨å±€é…ç½®æ–‡ä»¶ <code>config.json</code> ä¸­ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ composer config -g repo.packagist composer https://packagist.phpcomposer.com</span><br></pre></td></tr></table></figure>
<h3 id="å•ä¸ªé¡¹ç›®é…ç½®"><a href="#å•ä¸ªé¡¹ç›®é…ç½®" class="headerlink" title="å•ä¸ªé¡¹ç›®é…ç½®"></a>å•ä¸ªé¡¹ç›®é…ç½®</h3><p>å°†é…ç½®ä¿¡æ¯æ·»åŠ åˆ°æŸä¸ªé¡¹ç›®çš„ <code>composer.json</code> æ–‡ä»¶ä¸­ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ composer config repo.packagist composer https://packagist.phpcomposer.com</span><br></pre></td></tr></table></figure>
<p>ä¸Šè¿°å‘½ä»¤å°†ä¼šåœ¨é¡¹ç›®çš„ <code>composer.json</code> æ–‡ä»¶çš„æœ«å°¾è‡ªåŠ¨æ·»åŠ é•œåƒçš„é…ç½®ä¿¡æ¯ï¼š</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="string">&quot;repositories&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;packagist&quot;</span>: &#123;</span><br><span class="line">        <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;composer&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;url&quot;</span>: <span class="string">&quot;https://packagist.phpcomposer.com&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>php</category>
      </categories>
      <tags>
        <tag>php</tag>
        <tag>composer</tag>
      </tags>
  </entry>
  <entry>
    <title>PHP çš„å¥‡æŠ€æ·«å·§</title>
    <url>/2019/12/02/php-diabolic-tricks-and-wicked-craft/</url>
    <content><![CDATA[<p><img src="/images/2019/201912031234.png" alt="201912031234.png"></p>
<p>ğŸ“ æ¯å½“çœ‹åˆ° PHP å†™çš„å¾ˆå†—é•¿å¥‡è‡­çš„ä»£ç äº¦æˆ–ç‰‡æ®µï¼Œæˆ‘å°±æœ‰ä¸€è‚¡å°†å®ƒæ–©æˆå‡ èŠ‚çš„å†²åŠ¨ï¼Œæ— å¥ˆä¸­è‡ªæœ‰ä¸€ç§æ‹”å‰‘å››é¡¾å¿ƒèŒ«ç„¶ä¹‹æ„Ÿï¼ˆç”±äºä¸åŒçš„ PHP ç‰ˆæœ¬ï¼ŒåŠ ä¸Šè¯­æ³•çš„é™åˆ¶ï¼‰ã€‚æˆ‘åœ¨å¼€å‘å·¥å…·ä¸Šæ˜¯ä¸€ä¸ªæ¯”è¾ƒæŒ‘å‰”çš„äººï¼Œåœ¨ macOS ä¹ŸèŠ±äº†ä¸å°‘é’±è´­ç½®å·¥å…·ï¼Œæ¯æ¬¡çœ‹åˆ°å…¶å®ƒäººä¸ºäº†ç ´è§£å·¥å…·æŠ˜è…¾çš„æ­»å»æ´»æ¥ç—›ä¸æ¬²ç”Ÿæ—¶ï¼Œæˆ‘å·´ä¸å¾—ä»–ä»¬å¤šæŠ˜è…¾ä¸€ä¼šå„¿ã€‚æ—¶é—´å¯¹æ¯ä¸ªäººéƒ½æ˜¯å…¬å¹³çš„ï¼Œæœ‰çš„äººæ‹¿æ—¶é—´æ— æ‰€è°“çš„æŠ˜è…¾ï¼Œæœ‰çš„äººæ‹¿æ—¶é—´æœ‰æ•ˆç‡çš„å……ç”µï¼Œä¸å…¶æŠ˜è…¾æˆ‘å®æ„¿é€‰æ‹©åè€…ã€‚ã€å·¥æ¬²å–„å…¶äº‹ï¼Œå¿…å…ˆåˆ©å…¶å™¨ã€ï¼Œæˆ‘è§‰å¾—ç¼–ç çš„ä¸€äº›æŠ€å·§ä¹ŸåŒæ ·é€‚ç”¨ã€‚</p>
<span id="more"></span>
<h1 id="æ›´åŠ ä¼˜é›…çš„åˆ¤æ–­è¯­å¥"><a href="#æ›´åŠ ä¼˜é›…çš„åˆ¤æ–­è¯­å¥" class="headerlink" title="æ›´åŠ ä¼˜é›…çš„åˆ¤æ–­è¯­å¥"></a>æ›´åŠ ä¼˜é›…çš„åˆ¤æ–­è¯­å¥</h1><h2 id="isset-è¯­å¥"><a href="#isset-è¯­å¥" class="headerlink" title="isset è¯­å¥"></a>isset è¯­å¥</h2><h3 id="isset-å‚ä¸åˆ¤æ–­èµ‹å€¼"><a href="#isset-å‚ä¸åˆ¤æ–­èµ‹å€¼" class="headerlink" title="isset å‚ä¸åˆ¤æ–­èµ‹å€¼"></a>isset å‚ä¸åˆ¤æ–­èµ‹å€¼</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$array</span> = <span class="variable">$_REQUEST</span>;</span><br><span class="line"><span class="variable">$result</span> = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (is_array(<span class="variable">$array</span>) &amp;&amp; <span class="keyword">isset</span>(<span class="variable">$array</span>[<span class="string">&#x27;key&#x27;</span>])) &#123;</span><br><span class="line">    <span class="variable">$result</span> = <span class="variable">$array</span>[<span class="string">&#x27;key&#x27;</span>];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ”¹å†™ä¸º</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$array</span> = (<span class="keyword">array</span>) <span class="variable">$_REQUEST</span>;</span><br><span class="line"><span class="variable">$result</span> = <span class="variable">$array</span>[<span class="string">&#x27;key&#x27;</span>] ?? <span class="string">&#x27;&#x27;</span>;</span><br></pre></td></tr></table></figure>
<h3 id="isset-å‚ä¸å¹¶ä¸”çš„å¤šä¸ªåˆ¤æ–­"><a href="#isset-å‚ä¸å¹¶ä¸”çš„å¤šä¸ªåˆ¤æ–­" class="headerlink" title="isset å‚ä¸å¹¶ä¸”çš„å¤šä¸ªåˆ¤æ–­"></a>isset å‚ä¸å¹¶ä¸”çš„å¤šä¸ªåˆ¤æ–­</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$array</span> = (<span class="keyword">array</span>) <span class="variable">$_REQUEST</span>;</span><br><span class="line"><span class="variable">$result</span> = <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">isset</span>(<span class="variable">$array</span>[<span class="string">&#x27;a&#x27;</span>]) &amp;&amp; <span class="keyword">isset</span>(<span class="variable">$array</span>[<span class="string">&#x27;b&#x27;</span>]) &amp;&amp; <span class="keyword">isset</span>(<span class="variable">$array</span>[<span class="string">&#x27;c&#x27;</span>])) &#123;</span><br><span class="line">    <span class="variable">$result</span> = <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ”¹å†™ä¸º</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$array</span> = (<span class="keyword">array</span>) <span class="variable">$_REQUEST</span>;</span><br><span class="line"><span class="variable">$result</span> = <span class="keyword">isset</span>(<span class="variable">$array</span>[<span class="string">&#x27;a&#x27;</span>], <span class="variable">$array</span>[<span class="string">&#x27;b&#x27;</span>], <span class="variable">$array</span>[<span class="string">&#x27;c&#x27;</span>]);</span><br></pre></td></tr></table></figure>
<h3 id="isset-å‚ä¸æˆ–è€…çš„å¤šä¸ªåˆ¤æ–­"><a href="#isset-å‚ä¸æˆ–è€…çš„å¤šä¸ªåˆ¤æ–­" class="headerlink" title="isset å‚ä¸æˆ–è€…çš„å¤šä¸ªåˆ¤æ–­"></a>isset å‚ä¸æˆ–è€…çš„å¤šä¸ªåˆ¤æ–­</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$array</span> = (<span class="keyword">array</span>) <span class="variable">$_REQUEST</span>;</span><br><span class="line"><span class="variable">$result</span> = <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">isset</span>(<span class="variable">$array</span>[<span class="string">&#x27;a&#x27;</span>]) || <span class="keyword">isset</span>(<span class="variable">$array</span>[<span class="string">&#x27;b&#x27;</span>]) || <span class="keyword">isset</span>(<span class="variable">$array</span>[<span class="string">&#x27;c&#x27;</span>])) &#123;</span><br><span class="line">    <span class="variable">$result</span> = <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ”¹å†™ä¸º</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$array</span> = (<span class="keyword">array</span>) <span class="variable">$_REQUEST</span>;</span><br><span class="line"><span class="variable">$result</span> = <span class="keyword">isset</span>(<span class="variable">$array</span>[<span class="string">&#x27;a&#x27;</span>]) || <span class="keyword">isset</span>(<span class="variable">$array</span>[<span class="string">&#x27;b&#x27;</span>]) || <span class="keyword">isset</span>(<span class="variable">$array</span>[<span class="string">&#x27;c&#x27;</span>]);</span><br></pre></td></tr></table></figure>
<h2 id="empty-è¯­å¥"><a href="#empty-è¯­å¥" class="headerlink" title="empty è¯­å¥"></a>empty è¯­å¥</h2><h3 id="empty-å‚ä¸åˆ¤æ–­èµ‹å€¼"><a href="#empty-å‚ä¸åˆ¤æ–­èµ‹å€¼" class="headerlink" title="empty å‚ä¸åˆ¤æ–­èµ‹å€¼"></a>empty å‚ä¸åˆ¤æ–­èµ‹å€¼</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$array</span> = [<span class="string">&#x27;a&#x27;</span> =&gt; <span class="number">0</span>, <span class="string">&#x27;b&#x27;</span> =&gt; <span class="literal">false</span>, <span class="string">&#x27;c&#x27;</span> =&gt; <span class="string">&#x27;0&#x27;</span>];</span><br><span class="line"><span class="variable">$result</span> = <span class="string">&#x27;oldValue&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (! <span class="keyword">empty</span>(<span class="variable">$array</span>[<span class="string">&#x27;a&#x27;</span>]) &amp;&amp; ! <span class="keyword">empty</span>(<span class="variable">$array</span>[<span class="string">&#x27;b&#x27;</span>]) &amp;&amp; ! <span class="keyword">empty</span>(<span class="variable">$array</span>[<span class="string">&#x27;c&#x27;</span>])) &#123;</span><br><span class="line">    <span class="variable">$result</span> = <span class="string">&#x27;newValue&#x27;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ”¹å†™ä¸º</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$array</span> = [<span class="string">&#x27;a&#x27;</span> =&gt; <span class="number">0</span>, <span class="string">&#x27;b&#x27;</span> =&gt; <span class="literal">false</span>, <span class="string">&#x27;c&#x27;</span> =&gt; <span class="string">&#x27;0&#x27;</span>];</span><br><span class="line"><span class="variable">$result</span> = <span class="variable">$array</span>[<span class="string">&#x27;a&#x27;</span>] ?: <span class="variable">$array</span>[<span class="string">&#x27;b&#x27;</span>] ?: <span class="variable">$array</span>[<span class="string">&#x27;c&#x27;</span>] ?: <span class="string">&#x27;oldValue&#x27;</span>;</span><br></pre></td></tr></table></figure>
<h3 id="empty-å‚ä¸å¹¶ä¸”çš„å¤šä¸ªåˆ¤æ–­"><a href="#empty-å‚ä¸å¹¶ä¸”çš„å¤šä¸ªåˆ¤æ–­" class="headerlink" title="empty å‚ä¸å¹¶ä¸”çš„å¤šä¸ªåˆ¤æ–­"></a>empty å‚ä¸å¹¶ä¸”çš„å¤šä¸ªåˆ¤æ–­</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$array</span> = [<span class="string">&#x27;a&#x27;</span> =&gt; <span class="number">1</span>, <span class="string">&#x27;b&#x27;</span> =&gt; <span class="literal">true</span>, <span class="string">&#x27;c&#x27;</span> =&gt; <span class="string">&#x27;null&#x27;</span>];</span><br><span class="line"><span class="variable">$result</span> = <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (! <span class="keyword">empty</span>(<span class="variable">$array</span>[<span class="string">&#x27;a&#x27;</span>]) &amp;&amp; ! <span class="keyword">empty</span>(<span class="variable">$array</span>[<span class="string">&#x27;b&#x27;</span>]) &amp;&amp; ! <span class="keyword">empty</span>(<span class="variable">$array</span>[<span class="string">&#x27;c&#x27;</span>])) &#123;</span><br><span class="line">    <span class="variable">$result</span> = <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ”¹å†™ä¸º</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$array</span> = [<span class="string">&#x27;a&#x27;</span> =&gt; <span class="number">1</span>, <span class="string">&#x27;b&#x27;</span> =&gt; <span class="literal">true</span>, <span class="string">&#x27;c&#x27;</span> =&gt; <span class="string">&#x27;null&#x27;</span>];</span><br><span class="line"><span class="variable">$result</span> = ! <span class="keyword">empty</span>(<span class="variable">$array</span>[<span class="string">&#x27;a&#x27;</span>]) &amp;&amp; ! <span class="keyword">empty</span>(<span class="variable">$array</span>[<span class="string">&#x27;b&#x27;</span>]) &amp;&amp; ! <span class="keyword">empty</span>(<span class="variable">$array</span>[<span class="string">&#x27;c&#x27;</span>]);</span><br></pre></td></tr></table></figure>
<h3 id="empty-å‚ä¸æˆ–è€…çš„å¤šä¸ªåˆ¤æ–­"><a href="#empty-å‚ä¸æˆ–è€…çš„å¤šä¸ªåˆ¤æ–­" class="headerlink" title="empty å‚ä¸æˆ–è€…çš„å¤šä¸ªåˆ¤æ–­"></a>empty å‚ä¸æˆ–è€…çš„å¤šä¸ªåˆ¤æ–­</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$array</span> = [<span class="string">&#x27;a&#x27;</span> =&gt; <span class="number">1</span>, <span class="string">&#x27;b&#x27;</span> =&gt; <span class="literal">true</span>, <span class="string">&#x27;c&#x27;</span> =&gt; <span class="string">&#x27;null&#x27;</span>];</span><br><span class="line"><span class="variable">$result</span> = <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (! <span class="keyword">empty</span>(<span class="variable">$array</span>[<span class="string">&#x27;a&#x27;</span>]) || ! <span class="keyword">empty</span>(<span class="variable">$array</span>[<span class="string">&#x27;b&#x27;</span>]) || ! <span class="keyword">empty</span>(<span class="variable">$array</span>[<span class="string">&#x27;c&#x27;</span>])) &#123;</span><br><span class="line">    <span class="variable">$result</span> = <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ”¹å†™ä¸º</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$array</span> = [<span class="string">&#x27;a&#x27;</span> =&gt; <span class="number">1</span>, <span class="string">&#x27;b&#x27;</span> =&gt; <span class="literal">true</span>, <span class="string">&#x27;c&#x27;</span> =&gt; <span class="string">&#x27;null&#x27;</span>];</span><br><span class="line"><span class="variable">$result</span> = ! <span class="keyword">empty</span>(<span class="variable">$array</span>[<span class="string">&#x27;a&#x27;</span>]) || ! <span class="keyword">empty</span>(<span class="variable">$array</span>[<span class="string">&#x27;b&#x27;</span>]) || ! <span class="keyword">empty</span>(<span class="variable">$array</span>[<span class="string">&#x27;c&#x27;</span>]);</span><br></pre></td></tr></table></figure>
<h2 id="åˆ¤æ–­å¤§å°è¯­å¥"><a href="#åˆ¤æ–­å¤§å°è¯­å¥" class="headerlink" title="åˆ¤æ–­å¤§å°è¯­å¥"></a>åˆ¤æ–­å¤§å°è¯­å¥</h2><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">compare</span>(<span class="params"><span class="keyword">int</span> <span class="variable">$a</span>, <span class="keyword">int</span> <span class="variable">$b</span></span>): <span class="title">int</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable">$a</span> === <span class="variable">$b</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="variable">$a</span> &gt; <span class="variable">$b</span> ? <span class="number">1</span> : -<span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ”¹å†™ä¸º</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">compare</span>(<span class="params"><span class="keyword">int</span> <span class="variable">$a</span>, <span class="keyword">int</span> <span class="variable">$b</span></span>): <span class="title">int</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable">$a</span> &lt;=&gt; <span class="variable">$b</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="Null-åˆå¹¶è¿ç®—ç¬¦"><a href="#Null-åˆå¹¶è¿ç®—ç¬¦" class="headerlink" title="Null åˆå¹¶è¿ç®—ç¬¦"></a>Null åˆå¹¶è¿ç®—ç¬¦</h2><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$array</span> = [<span class="string">&#x27;a&#x27;</span> =&gt; <span class="number">0</span>, <span class="string">&#x27;b&#x27;</span> =&gt; <span class="literal">false</span>, <span class="string">&#x27;c&#x27;</span> =&gt; <span class="literal">null</span>, <span class="string">&#x27;d&#x27;</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (is_null(<span class="variable">$array</span>[<span class="string">&#x27;c&#x27;</span>])) &#123;</span><br><span class="line">    <span class="variable">$array</span>[<span class="string">&#x27;c&#x27;</span>] = <span class="string">&#x27;c is null&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (<span class="variable">$array</span>[<span class="string">&#x27;d&#x27;</span>] === <span class="literal">null</span>) &#123;</span><br><span class="line">    <span class="variable">$array</span>[<span class="string">&#x27;d&#x27;</span>] = <span class="string">&#x27;d is null&#x27;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ”¹å†™ä¸º</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$array</span> = [<span class="string">&#x27;a&#x27;</span> =&gt; <span class="number">0</span>, <span class="string">&#x27;b&#x27;</span> =&gt; <span class="literal">false</span>, <span class="string">&#x27;c&#x27;</span> =&gt; <span class="literal">null</span>, <span class="string">&#x27;d&#x27;</span>];</span><br><span class="line"><span class="variable">$array</span>[<span class="string">&#x27;c&#x27;</span>] ??= <span class="string">&#x27;c is null&#x27;</span>;</span><br><span class="line"><span class="variable">$array</span>[<span class="string">&#x27;d&#x27;</span>] ??= <span class="string">&#x27;d is null&#x27;</span>;</span><br></pre></td></tr></table></figure>
<h1 id="æ–¹æ³•å‚æ•°å˜çŸ­"><a href="#æ–¹æ³•å‚æ•°å˜çŸ­" class="headerlink" title="æ–¹æ³•å‚æ•°å˜çŸ­"></a>æ–¹æ³•å‚æ•°å˜çŸ­</h1><blockquote>
<p>æ–¹æ³•å‚æ•°å˜çŸ­çš„é£é™©æ—¶å¢åŠ äº†è°ƒç”¨çš„éš¾åº¦ï¼Œæ‰€ä»¥æ³¨é‡Šå°±å¾ˆå¿…è¦äº†ã€‚ä¸è¿‡å¸¦æ¥çš„å¥½å¤„æ—¶ï¼Œæ–¹æ³•çš„å¤ç”¨æ€§è¿œç”šå›ºå®šå‚æ•°ã€‚å°¤å…¶é€‚åˆé‡æ„çš„åœºæ™¯ï¼Œæ¯”å¦‚ï¼šä¹‹å‰çš„æ–¹æ³•ï¼ˆN å¤šçš„åœ°æ–¹è°ƒç”¨è¿™ä¸ªæ–¹æ³•ï¼‰<strong>å¤šåŠ ä¸€ä¸ªå‚æ•°</strong> å°±å¯ä»¥å¤„ç† <strong>ç°åœ¨çš„é€»è¾‘</strong> çš„åœºæ™¯ï¼Œæˆ‘æƒ³ä½ ä¸€å®šä¼šé‡åˆ°è¿‡ï¼Œå¦‚æœæ²¡æœ‰é‡åˆ°è¿‡ï¼Œåˆ«ç€æ€¥ï¼Œè¿Ÿæ—©çš„äº‹ã€‚</p>
</blockquote>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params"><span class="keyword">string</span> <span class="variable">$a</span>, <span class="keyword">string</span> <span class="variable">$b</span>, <span class="keyword">string</span> <span class="variable">$c</span>, <span class="keyword">string</span> <span class="variable">$d</span>, <span class="keyword">string</span> <span class="variable">$e</span>, <span class="keyword">array</span> <span class="variable">$f</span>, <span class="keyword">bool</span> <span class="variable">$g</span> = <span class="literal">false</span></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    var_dump(<span class="variable">$a</span>, <span class="variable">$b</span>, <span class="variable">$c</span>, <span class="variable">$d</span>, <span class="variable">$e</span>, <span class="variable">$f</span>, <span class="variable">$e</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ”¹å†™ä¸º</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params">...<span class="variable">$args</span></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    var_dump(<span class="variable">$args</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æˆ–è€…</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    var_dump(func_get_args());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="æ›´åŠ ä¼˜é›…çš„é¢„å®šä¹‰å˜é‡"><a href="#æ›´åŠ ä¼˜é›…çš„é¢„å®šä¹‰å˜é‡" class="headerlink" title="æ›´åŠ ä¼˜é›…çš„é¢„å®šä¹‰å˜é‡"></a>æ›´åŠ ä¼˜é›…çš„é¢„å®šä¹‰å˜é‡</h1><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params"><span class="keyword">array</span> <span class="variable">$array</span>, <span class="keyword">bool</span> <span class="variable">$printed</span> = <span class="literal">false</span></span>): <span class="title">array</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="variable">$a</span> = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">    <span class="variable">$b</span> = [];</span><br><span class="line">    <span class="variable">$c</span> = <span class="literal">false</span>;</span><br><span class="line">    <span class="variable">$d</span> = <span class="number">0</span>;</span><br><span class="line">    <span class="variable">$e</span> = <span class="keyword">new</span> \<span class="built_in">stdClass</span>();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// <span class="doctag">TODO:</span> å¤„ç†...</span></span><br><span class="line"></span><br><span class="line">    <span class="variable">$result</span> = doSomething();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="variable">$result</span> ?: [];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ”¹å†™ä¸º</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params"><span class="keyword">array</span> <span class="variable">$array</span>, <span class="keyword">bool</span> <span class="variable">$printed</span> = <span class="literal">false</span></span>): <span class="title">array</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    [<span class="variable">$a</span>, <span class="variable">$b</span>, <span class="variable">$c</span>, <span class="variable">$d</span>, <span class="variable">$e</span>] = [<span class="string">&#x27;&#x27;</span>, [], <span class="literal">false</span>, <span class="number">0</span>, <span class="keyword">new</span> \<span class="built_in">stdClass</span>()];</span><br><span class="line"></span><br><span class="line">    <span class="comment">// <span class="doctag">TODO:</span> å¤„ç†...</span></span><br><span class="line"></span><br><span class="line">    <span class="variable">$result</span> = doSomething();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="variable">$result</span> ?: [];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="ä½¿ç”¨æ ‡å‡†ç±»åº“"><a href="#ä½¿ç”¨æ ‡å‡†ç±»åº“" class="headerlink" title="ä½¿ç”¨æ ‡å‡†ç±»åº“"></a>ä½¿ç”¨æ ‡å‡†ç±»åº“</h1><p><a href="https://www.php.net/manual/zh/book.spl.php">PHPæ ‡å‡†åº“ (SPL)</a></p>
<p>SPLï¼Œå³ PHP æ ‡å‡†åº“ï¼ˆStandard PHP Libraryï¼‰ï¼Œä» PHP 5.0 èµ·å†…ç½®çš„ç»„ä»¶å’Œæ¥å£ï¼Œå¹¶ä¸”ä» PHP5.3 å·²é€æ¸çš„æˆç†Ÿã€‚SPL å…¶å®åœ¨æ‰€æœ‰çš„ PHP5 å¼€å‘ç¯å¢ƒä¸­è¢«å†…ç½®ï¼ŒåŒæ—¶æ— éœ€ä»»ä½•è®¾ç½®ã€‚ç„¶è€Œ SPL äº†ä¼¼ä¹è¢«æˆ‘ä»¬æ— è§†äº†ï¼Œæˆ‘ä»¬æ€»æ˜¯å–œæ¬¢é€ ä¸€äº›ä¸é è°±çš„è½®å­ä¹Ÿä¸æ„¿æ„èŠ±æ—¶é—´å»å­¦ä¹ ä¸€äº›æˆç†Ÿçš„è§£å†³æ–¹æ¡ˆã€‚é€šè¿‡ SPL å·¥å…·é›†åˆæˆ‘ä»¬å°±å¯ä»¥è½»æ¾ç»„è£…ä¸€æŠŠç‘å£«å†›åˆ€ï¼Œå½“ç„¶ï¼Œæˆ‘è¿™ä¹ˆè¯´å¯èƒ½æœ‰äº›è‹ç™½æ— åŠ›ï¼Œå¦‚æœä½ åˆ·è¿‡ç®—æ³•å’Œæ•°æ®ç»“æ„ï¼Œä½ ä¸€å®šæ‡‚ SPL çš„åŒ å¿ƒã€‚</p>
<h2 id="å®ä¾‹ä¹‹æ–‡ä»¶ä¿¡æ¯ç±»"><a href="#å®ä¾‹ä¹‹æ–‡ä»¶ä¿¡æ¯ç±»" class="headerlink" title="å®ä¾‹ä¹‹æ–‡ä»¶ä¿¡æ¯ç±»"></a>å®ä¾‹ä¹‹æ–‡ä»¶ä¿¡æ¯ç±»</h2><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$filename</span> = <span class="keyword">__DIR__</span> . <span class="string">&#x27;/a.txt&#x27;</span>;</span><br><span class="line"><span class="variable">$info</span> = <span class="keyword">new</span> <span class="built_in">SplFileInfo</span>(<span class="variable">$filename</span>);</span><br><span class="line">var_dump(<span class="variable">$info</span>-&gt;getBasename(<span class="string">&#x27;.txt&#x27;</span>));</span><br><span class="line">var_dump(<span class="variable">$info</span>-&gt;getExtension());</span><br><span class="line">var_dump(<span class="variable">$info</span>-&gt;getFilename());</span><br><span class="line">var_dump(<span class="variable">$info</span>-&gt;getGroup());</span><br><span class="line">var_dump(date(<span class="string">&#x27;Y-m-d H:i:s&#x27;</span>, <span class="variable">$info</span>-&gt;getCTime()));</span><br><span class="line">var_dump(date(<span class="string">&#x27;Y-m-d H:i:s&#x27;</span>, <span class="variable">$info</span>-&gt;getATime()));</span><br><span class="line">var_dump(<span class="variable">$info</span>-&gt;isDir());</span><br><span class="line">var_dump(<span class="variable">$info</span>-&gt;isFile());</span><br><span class="line">var_dump(<span class="variable">$info</span>-&gt;isReadable());</span><br><span class="line">var_dump(<span class="variable">$info</span>-&gt;isWritable());</span><br><span class="line">var_dump(<span class="variable">$info</span>-&gt;isExecutable());</span><br><span class="line">var_dump(<span class="variable">$info</span>-&gt;getOwner());</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»“æœ</span></span><br><span class="line"><span class="keyword">string</span>(<span class="number">1</span>) <span class="string">&quot;a&quot;</span></span><br><span class="line"><span class="keyword">string</span>(<span class="number">3</span>) <span class="string">&quot;txt&quot;</span></span><br><span class="line"><span class="keyword">string</span>(<span class="number">5</span>) <span class="string">&quot;a.txt&quot;</span></span><br><span class="line"><span class="keyword">int</span>(<span class="number">20</span>)</span><br><span class="line"><span class="keyword">string</span>(<span class="number">19</span>) <span class="string">&quot;2019-12-03 03:18:21&quot;</span></span><br><span class="line"><span class="keyword">string</span>(<span class="number">19</span>) <span class="string">&quot;2019-12-03 03:18:22&quot;</span></span><br><span class="line"><span class="keyword">bool</span>(<span class="literal">false</span>)</span><br><span class="line"><span class="keyword">bool</span>(<span class="literal">true</span>)</span><br><span class="line"><span class="keyword">bool</span>(<span class="literal">true</span>)</span><br><span class="line"><span class="keyword">bool</span>(<span class="literal">true</span>)</span><br><span class="line"><span class="keyword">bool</span>(<span class="literal">false</span>)</span><br><span class="line"><span class="keyword">int</span>(<span class="number">501</span>)</span><br></pre></td></tr></table></figure>
<h2 id="å®ä¾‹ä¹‹ä¼˜å…ˆçº§é˜Ÿåˆ—"><a href="#å®ä¾‹ä¹‹ä¼˜å…ˆçº§é˜Ÿåˆ—" class="headerlink" title="å®ä¾‹ä¹‹ä¼˜å…ˆçº§é˜Ÿåˆ—"></a>å®ä¾‹ä¹‹ä¼˜å…ˆçº§é˜Ÿåˆ—</h2><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$queue</span> = <span class="keyword">new</span> <span class="built_in">SplPriorityQueue</span>();</span><br><span class="line"><span class="variable">$queue</span>-&gt;insert(<span class="string">&#x27;A&#x27;</span>, <span class="number">3</span>);</span><br><span class="line"><span class="variable">$queue</span>-&gt;insert(<span class="string">&#x27;B&#x27;</span>, <span class="number">6</span>);</span><br><span class="line"><span class="variable">$queue</span>-&gt;insert(<span class="string">&#x27;C&#x27;</span>, <span class="number">1</span>);</span><br><span class="line"><span class="variable">$queue</span>-&gt;insert(<span class="string">&#x27;D&#x27;</span>, <span class="number">2</span>);</span><br><span class="line"><span class="variable">$queue</span>-&gt;insert(<span class="string">&#x27;E&#x27;</span>, <span class="number">5</span>);</span><br><span class="line"><span class="variable">$queue</span>-&gt;insert(<span class="string">&#x27;F&#x27;</span>, <span class="number">4</span>);</span><br><span class="line"></span><br><span class="line">var_dump(<span class="variable">$queue</span>-&gt;count());</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> (<span class="variable">$queue</span>-&gt;valid()) &#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="variable">$queue</span>-&gt;current(), <span class="string">&#x27; &#x27;</span>;</span><br><span class="line">    <span class="variable">$queue</span>-&gt;next();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">echo</span> PHP_EOL;</span><br><span class="line"></span><br><span class="line">var_dump(<span class="variable">$queue</span>-&gt;compare(<span class="string">&#x27;A&#x27;</span>, <span class="string">&#x27;F&#x27;</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»“æœ</span></span><br><span class="line"><span class="keyword">int</span>(<span class="number">6</span>)</span><br><span class="line">B E F A D C</span><br><span class="line"><span class="keyword">int</span>(-<span class="number">1</span>)</span><br></pre></td></tr></table></figure>
<h1 id="å…¶å®ƒ"><a href="#å…¶å®ƒ" class="headerlink" title="å…¶å®ƒ"></a>å…¶å®ƒ</h1><h2 id="äº¤æ¢ä¸¤ä¸ªå˜é‡"><a href="#äº¤æ¢ä¸¤ä¸ªå˜é‡" class="headerlink" title="äº¤æ¢ä¸¤ä¸ªå˜é‡"></a>äº¤æ¢ä¸¤ä¸ªå˜é‡</h2><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$a</span> = <span class="number">1</span>;</span><br><span class="line"><span class="variable">$b</span> = <span class="number">2</span>;</span><br><span class="line">[<span class="variable">$b</span>, <span class="variable">$a</span>] = [<span class="variable">$a</span>, <span class="variable">$b</span>];</span><br><span class="line">var_dump(<span class="variable">$a</span>, <span class="variable">$b</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»“æœ</span></span><br><span class="line"><span class="keyword">int</span>(<span class="number">2</span>)</span><br><span class="line"><span class="keyword">int</span>(<span class="number">1</span>)</span><br></pre></td></tr></table></figure>
<p>æˆ–è€…</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$a</span> = <span class="number">1</span>;</span><br><span class="line"><span class="variable">$b</span> = <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable">$a</span> ^= <span class="variable">$b</span>;</span><br><span class="line"><span class="variable">$b</span> ^= <span class="variable">$a</span>;</span><br><span class="line"><span class="variable">$a</span> ^= <span class="variable">$b</span>;</span><br><span class="line"></span><br><span class="line">var_dump(<span class="variable">$a</span>, <span class="variable">$b</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»“æœ</span></span><br><span class="line"><span class="keyword">int</span>(<span class="number">2</span>)</span><br><span class="line"><span class="keyword">int</span>(<span class="number">1</span>)</span><br></pre></td></tr></table></figure>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$a</span> = <span class="number">1</span>;</span><br><span class="line"><span class="variable">$b</span> = <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable">$tmp</span> = <span class="variable">$a</span>;</span><br><span class="line"><span class="variable">$a</span> = <span class="variable">$b</span>;</span><br><span class="line"><span class="variable">$b</span> = <span class="variable">$tmp</span>;</span><br><span class="line"></span><br><span class="line">var_dump(<span class="variable">$a</span>, <span class="variable">$b</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»“æœ</span></span><br><span class="line"><span class="keyword">int</span>(<span class="number">2</span>)</span><br><span class="line"><span class="keyword">int</span>(<span class="number">1</span>)</span><br></pre></td></tr></table></figure>
<h2 id="å®šä¹‰å‡½æ•°å¹¶ç«‹å³æ‰§è¡Œ"><a href="#å®šä¹‰å‡½æ•°å¹¶ç«‹å³æ‰§è¡Œ" class="headerlink" title="å®šä¹‰å‡½æ•°å¹¶ç«‹å³æ‰§è¡Œ"></a>å®šä¹‰å‡½æ•°å¹¶ç«‹å³æ‰§è¡Œ</h2><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line">call_user_func(<span class="built_in">static</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&#x27;Hello World!&#x27;</span>;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h2 id="é—­åŒ…å½“æˆå¯¹è±¡çš„æˆå‘˜æ–¹æ³•æˆ–è€…é™æ€æˆå‘˜æ–¹æ³•"><a href="#é—­åŒ…å½“æˆå¯¹è±¡çš„æˆå‘˜æ–¹æ³•æˆ–è€…é™æ€æˆå‘˜æ–¹æ³•" class="headerlink" title="é—­åŒ…å½“æˆå¯¹è±¡çš„æˆå‘˜æ–¹æ³•æˆ–è€…é™æ€æˆå‘˜æ–¹æ³•"></a>é—­åŒ…å½“æˆå¯¹è±¡çš„æˆå‘˜æ–¹æ³•æˆ–è€…é™æ€æˆå‘˜æ–¹æ³•</h2><p>å…³äº bind å’Œ bindTo çš„å®˜ç½‘æ–‡æ¡£è§£é‡Šæœ‰ç‚¹ç»•ï¼Œå…¶å®å®ƒä»¬çš„åŠŸèƒ½ä¸ JS ä¸­çš„ <code>call</code> å’Œ <code>apply</code> å·®æ±‚ä¸å¤šï¼Œå¦å¤– <a href="https://github.com/lin-xin/blog/issues/7">JavaScript ä¸­ apply ã€call çš„è¯¦è§£</a></p>
<h3 id="å®ä¾‹ä¸€"><a href="#å®ä¾‹ä¸€" class="headerlink" title="å®ä¾‹ä¸€"></a>å®ä¾‹ä¸€</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Test</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">function</span> <span class="title">doSomething</span>(<span class="params"><span class="keyword">array</span> <span class="variable">$array</span></span>): <span class="title">array</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> array_map(<span class="string">&#x27;strtoupper&#x27;</span>, <span class="variable">$array</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable">$test</span> = <span class="keyword">new</span> Test();</span><br><span class="line"><span class="variable">$func</span> = <span class="function"><span class="keyword">function</span> (<span class="params"><span class="keyword">array</span> <span class="variable">$array</span></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">$this</span>-&gt;doSomething(<span class="variable">$array</span>);</span><br><span class="line">&#125;;</span><br><span class="line"><span class="variable">$result</span> = <span class="variable">$func</span>-&gt;bindTo(<span class="variable">$test</span>, <span class="variable">$test</span>)([<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>, <span class="string">&#x27;d&#x27;</span>]);</span><br><span class="line">var_dump(<span class="variable">$result</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»“æœ</span></span><br><span class="line"><span class="keyword">array</span>(<span class="number">4</span>) &#123;</span><br><span class="line">  [<span class="number">0</span>]=&gt;</span><br><span class="line">  <span class="keyword">string</span>(<span class="number">1</span>) <span class="string">&quot;A&quot;</span></span><br><span class="line">  [<span class="number">1</span>]=&gt;</span><br><span class="line">  <span class="keyword">string</span>(<span class="number">1</span>) <span class="string">&quot;B&quot;</span></span><br><span class="line">  [<span class="number">2</span>]=&gt;</span><br><span class="line">  <span class="keyword">string</span>(<span class="number">1</span>) <span class="string">&quot;C&quot;</span></span><br><span class="line">  [<span class="number">3</span>]=&gt;</span><br><span class="line">  <span class="keyword">string</span>(<span class="number">1</span>) <span class="string">&quot;D&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="å®ä¾‹äºŒ"><a href="#å®ä¾‹äºŒ" class="headerlink" title="å®ä¾‹äºŒ"></a>å®ä¾‹äºŒ</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">trait</span> <span class="title">DynamicDefinition</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__call</span>(<span class="params"><span class="keyword">string</span> <span class="variable">$name</span>, <span class="variable">$args</span> = <span class="literal">null</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (is_callable(<span class="keyword">$this</span>-&gt;&#123;<span class="variable">$name</span>&#125;)) &#123;</span><br><span class="line">            <span class="keyword">return</span> call_user_func(<span class="keyword">$this</span>-&gt;&#123;<span class="variable">$name</span>&#125;, <span class="variable">$args</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> \<span class="built_in">RuntimeException</span>(<span class="string">&quot;Method <span class="subst">&#123;$name&#125;</span> does not exist&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__set</span>(<span class="params"><span class="keyword">string</span> <span class="variable">$name</span>, <span class="variable">$value</span> = <span class="literal">null</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;&#123;<span class="variable">$name</span>&#125; = is_callable(<span class="variable">$value</span>) ? <span class="variable">$value</span>-&gt;bindTo(<span class="keyword">$this</span>, <span class="keyword">$this</span>) : <span class="variable">$value</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Foo</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">use</span> <span class="title">DynamicDefinition</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">string</span> <span class="variable">$privateValue</span> = <span class="string">&#x27;I am private&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable">$foo</span> = <span class="keyword">new</span> Foo;</span><br><span class="line"><span class="variable">$foo</span>-&gt;bar = <span class="function"><span class="keyword">function</span> (<span class="params">...<span class="variable">$arguments</span></span>) </span>&#123;</span><br><span class="line">    <span class="variable">$args</span> = <span class="variable">$arguments</span>[<span class="number">0</span>];</span><br><span class="line">    <span class="variable">$prefix</span> = implode(<span class="string">&#x27;â£&#x27;</span>, <span class="variable">$args</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="variable">$prefix</span> . <span class="string">&#x27; &#x27;</span> . <span class="keyword">$this</span>-&gt;privateValue;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">print</span> <span class="variable">$foo</span>-&gt;bar(<span class="string">&#x27;ğŸ™&#x27;</span>, <span class="string">&#x27;ğŸ§¨&#x27;</span>, <span class="string">&#x27;ğŸ‰&#x27;</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»“æœ</span></span><br><span class="line">ğŸ™â£ğŸ§¨â£ğŸ‰ I am <span class="keyword">private</span></span><br></pre></td></tr></table></figure>
<h3 id="å®ä¾‹ä¸‰"><a href="#å®ä¾‹ä¸‰" class="headerlink" title="å®ä¾‹ä¸‰"></a>å®ä¾‹ä¸‰</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Foo</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">static</span> <span class="keyword">int</span> <span class="variable">$a</span> = <span class="number">11</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> <span class="variable">$b</span> = <span class="number">22</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable">$aFunc</span> = <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> Foo::<span class="variable">$a</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="variable">$bFunc</span> = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">$this</span>-&gt;b;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="variable">$aResult</span> = <span class="built_in">Closure</span>::bind(<span class="variable">$aFunc</span>, <span class="literal">null</span>, Foo::class);</span><br><span class="line"><span class="variable">$bResult</span> = <span class="built_in">Closure</span>::bind(<span class="variable">$bFunc</span>, <span class="keyword">new</span> Foo(), Foo::class);</span><br><span class="line">var_dump(<span class="variable">$aResult</span>(), <span class="variable">$bResult</span>());</span><br></pre></td></tr></table></figure>
<p>æŒç»­æ›´æ–°ä¸­â€¦</p>
]]></content>
      <categories>
        <category>php</category>
      </categories>
      <tags>
        <tag>php</tag>
      </tags>
  </entry>
  <entry>
    <title>PHP - æ—¥æœŸç›¸å…³è®¡ç®—</title>
    <url>/2018/04/13/php-date-calculation/</url>
    <content><![CDATA[<p>æ—¥æœŸå‡½æ•°åœ¨å¹³æ—¶çš„å¼€å‘ä¸­ç”¨çš„æ¯”è¾ƒå¹¿æ³›ï¼Œå°¤å…¶æ˜¯ <code>date()</code> å‡½æ•°ï¼Œå¼ºå¤§åˆ°è®©äººçª’æ¯ï¼Œå…¶æ ¼å¼ä¹‹å¤šè®©äººç›®çœ©ã€‚è¿™é‡Œæˆ‘ä¹Ÿåªèƒ½ç®¡ä¸­çª¥è±¹äº†ï¼Œæ›´å¤šçš„ç”¨æ³•è¯·å‚çœ‹<a href="http://php.net/manual/en/function.date.php">å®˜æ–¹æ–‡æ¡£</a>ã€‚</p>
<span id="more"></span>
<h1 id="å‡½æ•°-date-å¯è¯†åˆ«çš„æ ¼å¼"><a href="#å‡½æ•°-date-å¯è¯†åˆ«çš„æ ¼å¼" class="headerlink" title="å‡½æ•° date å¯è¯†åˆ«çš„æ ¼å¼"></a>å‡½æ•° date å¯è¯†åˆ«çš„æ ¼å¼</h1><blockquote>
<p>è¿™é‡Œæˆ‘æ— è€»çš„æŠ„äº†ä¸€éæ‰‹å†Œï¼Œä¸ä¸ºåˆ«çš„ï¼Œå°±æ˜¯åŠ å¼ºä¸€ä¸‹è‡ªå·±çš„è®°å¿†ï¼Œè§ç¬‘äº†ã€‚</p>
</blockquote>
<h2 id="æ—¶é—´æ ¼å¼"><a href="#æ—¶é—´æ ¼å¼" class="headerlink" title="æ—¶é—´æ ¼å¼"></a>æ—¶é—´æ ¼å¼</h2><table>
<thead>
<tr>
<th>æ ¼å¼</th>
<th>è¯´æ˜</th>
<th>è¿”å›å€¼</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>a</code></td>
<td>å°å†™çš„ä¸Šåˆå’Œä¸‹åˆå€¼</td>
<td>am æˆ– pm</td>
</tr>
<tr>
<td><code>A</code></td>
<td>å¤§å†™çš„ä¸Šåˆå’Œä¸‹åˆå€¼</td>
<td>AM æˆ– PM</td>
</tr>
<tr>
<td><code>B</code></td>
<td>Swatch Internet æ ‡å‡†æ—¶</td>
<td>000 åˆ° 999</td>
</tr>
<tr>
<td><code>g</code></td>
<td>å°æ—¶ï¼Œ12 å°æ—¶æ ¼å¼ï¼Œæ²¡æœ‰å‰å¯¼é›¶</td>
<td>1 åˆ° 12</td>
</tr>
<tr>
<td><code>G</code></td>
<td>å°æ—¶ï¼Œ24 å°æ—¶æ ¼å¼ï¼Œæ²¡æœ‰å‰å¯¼é›¶</td>
<td>0 åˆ° 23</td>
</tr>
<tr>
<td><code>h</code></td>
<td>å°æ—¶ï¼Œ12 å°æ—¶æ ¼å¼ï¼Œæœ‰å‰å¯¼é›¶</td>
<td>01 åˆ° 12</td>
</tr>
<tr>
<td><code>H</code></td>
<td>å°æ—¶ï¼Œ24 å°æ—¶æ ¼å¼ï¼Œæœ‰å‰å¯¼é›¶</td>
<td>00 åˆ° 23</td>
</tr>
<tr>
<td><code>i</code></td>
<td>æœ‰å‰å¯¼é›¶çš„åˆ†é’Ÿæ•°</td>
<td>00 åˆ° 59&gt;</td>
</tr>
<tr>
<td><code>s</code></td>
<td>ç§’æ•°ï¼Œæœ‰å‰å¯¼é›¶</td>
<td>00 åˆ° 59&gt;</td>
</tr>
<tr>
<td><code>u</code></td>
<td>æ¯«ç§’ï¼ˆPHP 5.2.2 æ–°åŠ ï¼‰ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ <code>date()</code> å‡½æ•°æ€»æ˜¯è¿”å› 000000 å› ä¸ºå®ƒåªæ¥å— integer å‚æ•°ï¼Œè€Œ <code>DateTime::format()</code> æ‰æ”¯æŒæ¯«ç§’</td>
<td>ç¤ºä¾‹: 654321</td>
</tr>
</tbody>
</table>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$time</span> = strtotime(<span class="string">&#x27;2020-06-01 12:59:59&#x27;</span>);</span><br><span class="line"><span class="variable">$array</span> = [</span><br><span class="line">    <span class="string">&#x27;a&#x27;</span> =&gt; date(<span class="string">&#x27;a&#x27;</span>, <span class="variable">$time</span>),</span><br><span class="line">    <span class="string">&#x27;A&#x27;</span> =&gt; date(<span class="string">&#x27;A&#x27;</span>, <span class="variable">$time</span>),</span><br><span class="line">    <span class="string">&#x27;B&#x27;</span> =&gt; date(<span class="string">&#x27;B&#x27;</span>, <span class="variable">$time</span>),</span><br><span class="line">    <span class="string">&#x27;g&#x27;</span> =&gt; date(<span class="string">&#x27;g&#x27;</span>, <span class="variable">$time</span>),</span><br><span class="line">    <span class="string">&#x27;G&#x27;</span> =&gt; date(<span class="string">&#x27;G&#x27;</span>, <span class="variable">$time</span>),</span><br><span class="line">    <span class="string">&#x27;h&#x27;</span> =&gt; date(<span class="string">&#x27;h&#x27;</span>, <span class="variable">$time</span>),</span><br><span class="line">    <span class="string">&#x27;H&#x27;</span> =&gt; date(<span class="string">&#x27;H&#x27;</span>, <span class="variable">$time</span>),</span><br><span class="line">    <span class="string">&#x27;i&#x27;</span> =&gt; date(<span class="string">&#x27;i&#x27;</span>, <span class="variable">$time</span>),</span><br><span class="line">    <span class="string">&#x27;s&#x27;</span> =&gt; date(<span class="string">&#x27;s&#x27;</span>, <span class="variable">$time</span>),</span><br><span class="line">    <span class="string">&#x27;u&#x27;</span> =&gt; date(<span class="string">&#x27;u&#x27;</span>, <span class="variable">$time</span>),</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line">print_r(<span class="variable">$array</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»“æœ</span></span><br><span class="line"><span class="keyword">Array</span></span><br><span class="line">(</span><br><span class="line">    [a] =&gt; pm</span><br><span class="line">    [A] =&gt; PM</span><br><span class="line">    [B] =&gt; <span class="number">249</span></span><br><span class="line">    [g] =&gt; <span class="number">12</span></span><br><span class="line">    [G] =&gt; <span class="number">12</span></span><br><span class="line">    [h] =&gt; <span class="number">12</span></span><br><span class="line">    [H] =&gt; <span class="number">12</span></span><br><span class="line">    [i] =&gt; <span class="number">59</span></span><br><span class="line">    [s] =&gt; <span class="number">59</span></span><br><span class="line">    [u] =&gt; <span class="number">000000</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<h2 id="æ—¶åŒºæ ¼å¼"><a href="#æ—¶åŒºæ ¼å¼" class="headerlink" title="æ—¶åŒºæ ¼å¼"></a>æ—¶åŒºæ ¼å¼</h2><table>
<thead>
<tr>
<th>æ ¼å¼</th>
<th>è¯´æ˜</th>
<th>è¿”å›å€¼</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>e</code></td>
<td>æ—¶åŒºæ ‡è¯†ï¼ˆPHP 5.1.0 æ–°åŠ ï¼‰</td>
<td>ä¾‹å¦‚ï¼šUTCï¼ŒGMTï¼ŒAtlantic/Azores</td>
</tr>
<tr>
<td><code>I</code></td>
<td>æ˜¯å¦ä¸ºå¤ä»¤æ—¶</td>
<td>å¦‚æœæ˜¯å¤ä»¤æ—¶ä¸º 1ï¼Œå¦åˆ™ä¸º 0</td>
</tr>
<tr>
<td><code>O</code></td>
<td>ä¸æ ¼æ—å¨æ²»æ—¶é—´ç›¸å·®çš„å°æ—¶æ•°</td>
<td>ä¾‹å¦‚ï¼š+0200</td>
</tr>
<tr>
<td><code>P</code></td>
<td>ä¸æ ¼æ—å¨æ²»æ—¶é—´ï¼ˆGMTï¼‰çš„å·®åˆ«ï¼Œå°æ—¶å’Œåˆ†é’Ÿä¹‹é—´æœ‰å†’å·åˆ†éš”ï¼ˆPHP 5.1.3 æ–°åŠ ï¼‰</td>
<td>ä¾‹å¦‚ï¼š+02:00</td>
</tr>
<tr>
<td><code>T</code></td>
<td>æœ¬æœºæ‰€åœ¨çš„æ—¶åŒº</td>
<td>ä¾‹å¦‚ï¼šESTï¼ŒMDTï¼ˆåœ¨ Windows ä¸‹ä¸ºå®Œæ•´æ–‡æœ¬æ ¼å¼ï¼Œä¾‹å¦‚ï¼š<code>Eastern Standard Time</code>ï¼Œä¸­æ–‡ç‰ˆä¼šæ˜¾ç¤ºã€ä¸­å›½æ ‡å‡†æ—¶é—´ã€ï¼‰</td>
</tr>
<tr>
<td><code>Z</code></td>
<td>æ—¶å·®åç§»é‡çš„ç§’æ•°ã€‚UTC è¥¿è¾¹çš„æ—¶åŒºåç§»é‡æ€»æ˜¯è´Ÿçš„ï¼ŒUTC ä¸œè¾¹çš„æ—¶åŒºåç§»é‡æ€»æ˜¯æ­£çš„</td>
<td>-43200 åˆ° 43200</td>
</tr>
</tbody>
</table>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$time</span> = strtotime(<span class="string">&#x27;2020-06-01 12:59:59&#x27;</span>);</span><br><span class="line"><span class="variable">$array</span> = [</span><br><span class="line">    <span class="string">&#x27;e&#x27;</span> =&gt; date(<span class="string">&#x27;e&#x27;</span>, <span class="variable">$time</span>),</span><br><span class="line">    <span class="string">&#x27;I&#x27;</span> =&gt; date(<span class="string">&#x27;I&#x27;</span>, <span class="variable">$time</span>),</span><br><span class="line">    <span class="string">&#x27;O&#x27;</span> =&gt; date(<span class="string">&#x27;O&#x27;</span>, <span class="variable">$time</span>),</span><br><span class="line">    <span class="string">&#x27;P&#x27;</span> =&gt; date(<span class="string">&#x27;P&#x27;</span>, <span class="variable">$time</span>),</span><br><span class="line">    <span class="string">&#x27;T&#x27;</span> =&gt; date(<span class="string">&#x27;T&#x27;</span>, <span class="variable">$time</span>),</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line">print_r(<span class="variable">$array</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»“æœ</span></span><br><span class="line"><span class="keyword">Array</span></span><br><span class="line">(</span><br><span class="line">    [e] =&gt; PRC</span><br><span class="line">    [I] =&gt; <span class="number">0</span></span><br><span class="line">    [O] =&gt; +<span class="number">0800</span></span><br><span class="line">    [P] =&gt; +<span class="number">08</span>:<span class="number">00</span></span><br><span class="line">    [T] =&gt; CST</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<h2 id="æ—¥æœŸæ—¶é—´æ ¼å¼"><a href="#æ—¥æœŸæ—¶é—´æ ¼å¼" class="headerlink" title="æ—¥æœŸæ—¶é—´æ ¼å¼"></a>æ—¥æœŸæ—¶é—´æ ¼å¼</h2><table>
<thead>
<tr>
<th>æ ¼å¼</th>
<th>è¯´æ˜</th>
<th>è¿”å›å€¼</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>c</code></td>
<td>ISO 8601 æ ¼å¼çš„æ—¥æœŸï¼ˆPHP 5 æ–°åŠ ï¼‰</td>
<td>2004-02-12T15:19:21+00:00</td>
</tr>
<tr>
<td><code>r</code></td>
<td>RFC 822 æ ¼å¼çš„æ—¥æœŸ</td>
<td>ä¾‹å¦‚ï¼šThu, 21 Dec 2000 16:01:07 +0200</td>
</tr>
<tr>
<td><code>U</code></td>
<td>ä» Unix çºªå…ƒï¼ˆJanuary 1 1970 00:00:00 GMTï¼‰å¼€å§‹è‡³ä»Šçš„ç§’æ•°</td>
<td>å‚è§ <code>time()</code></td>
</tr>
</tbody>
</table>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$time</span> = strtotime(<span class="string">&#x27;2020-06-01 12:59:59&#x27;</span>);</span><br><span class="line"><span class="variable">$array</span> = [</span><br><span class="line">    <span class="string">&#x27;c&#x27;</span> =&gt; date(<span class="string">&#x27;c&#x27;</span>, <span class="variable">$time</span>),</span><br><span class="line">    <span class="string">&#x27;r&#x27;</span> =&gt; date(<span class="string">&#x27;r&#x27;</span>, <span class="variable">$time</span>),</span><br><span class="line">    <span class="string">&#x27;U&#x27;</span> =&gt; date(<span class="string">&#x27;U&#x27;</span>, <span class="variable">$time</span>),</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line">print_r(<span class="variable">$array</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»“æœ</span></span><br><span class="line"><span class="keyword">Array</span></span><br><span class="line">(</span><br><span class="line">    [c] =&gt; <span class="number">2020</span>-<span class="number">06</span>-<span class="number">01</span>T12:<span class="number">59</span>:<span class="number">59</span>+<span class="number">08</span>:<span class="number">00</span></span><br><span class="line">    [r] =&gt; Mon, <span class="number">01</span> Jun <span class="number">2020</span> <span class="number">12</span>:<span class="number">59</span>:<span class="number">59</span> +<span class="number">0800</span></span><br><span class="line">    [U] =&gt; <span class="number">1590987599</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<h2 id="æ—¥æ ¼å¼"><a href="#æ—¥æ ¼å¼" class="headerlink" title="æ—¥æ ¼å¼"></a>æ—¥æ ¼å¼</h2><table>
<thead>
<tr>
<th>æ ¼å¼</th>
<th>è¯´æ˜</th>
<th>è¿”å›å€¼</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>d</code></td>
<td>æœˆä»½ä¸­çš„ç¬¬å‡ å¤©ï¼Œæœ‰å‰å¯¼é›¶çš„ 2 ä½æ•°å­—</td>
<td>01 åˆ° 31</td>
</tr>
<tr>
<td><code>D</code></td>
<td>æ˜ŸæœŸä¸­çš„ç¬¬å‡ å¤©ï¼Œæ–‡æœ¬è¡¨ç¤ºï¼Œ3 ä¸ªå­—æ¯</td>
<td>Mon åˆ° Sun</td>
</tr>
<tr>
<td><code>j</code></td>
<td>æœˆä»½ä¸­çš„ç¬¬å‡ å¤©ï¼Œæ²¡æœ‰å‰å¯¼é›¶</td>
<td>1 åˆ° 31</td>
</tr>
<tr>
<td><code>l</code></td>
<td>æ˜ŸæœŸå‡ ï¼Œå®Œæ•´çš„æ–‡æœ¬æ ¼å¼</td>
<td>Sunday åˆ° Saturday</td>
</tr>
<tr>
<td><code>N</code></td>
<td>ISO-8601 æ ¼å¼æ•°å­—è¡¨ç¤ºçš„æ˜ŸæœŸä¸­çš„ç¬¬å‡ å¤©ï¼ˆPHP 5.1.0 æ–°åŠ ï¼‰</td>
<td>1ï¼ˆè¡¨ç¤ºæ˜ŸæœŸä¸€ï¼‰åˆ° 7ï¼ˆè¡¨ç¤ºæ˜ŸæœŸå¤©ï¼‰</td>
</tr>
<tr>
<td><code>S</code></td>
<td>æ¯æœˆå¤©æ•°åé¢çš„è‹±æ–‡åç¼€ï¼Œ2 ä¸ªå­—ç¬¦</td>
<td>stï¼Œndï¼Œrd æˆ–è€… thã€‚å¯ä»¥å’Œ j ä¸€èµ·ç”¨</td>
</tr>
<tr>
<td><code>w</code></td>
<td>æ˜ŸæœŸä¸­çš„ç¬¬å‡ å¤©ï¼Œæ•°å­—è¡¨ç¤º</td>
<td>0ï¼ˆè¡¨ç¤ºæ˜ŸæœŸå¤©ï¼‰åˆ° 6ï¼ˆè¡¨ç¤ºæ˜ŸæœŸå…­ï¼‰</td>
</tr>
<tr>
<td><code>z</code></td>
<td>å¹´ä»½ä¸­çš„ç¬¬å‡ å¤©</td>
<td>0 åˆ° 365</td>
</tr>
</tbody>
</table>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$time</span> = strtotime(<span class="string">&#x27;2020-06-01 12:59:59&#x27;</span>);</span><br><span class="line"><span class="variable">$array</span> = [</span><br><span class="line">    <span class="string">&#x27;d&#x27;</span> =&gt; date(<span class="string">&#x27;d&#x27;</span>, <span class="variable">$time</span>),</span><br><span class="line">    <span class="string">&#x27;D&#x27;</span> =&gt; date(<span class="string">&#x27;D&#x27;</span>, <span class="variable">$time</span>),</span><br><span class="line">    <span class="string">&#x27;j&#x27;</span> =&gt; date(<span class="string">&#x27;j&#x27;</span>, <span class="variable">$time</span>),</span><br><span class="line">    <span class="string">&#x27;l&#x27;</span> =&gt; date(<span class="string">&#x27;l&#x27;</span>, <span class="variable">$time</span>),</span><br><span class="line">    <span class="string">&#x27;N&#x27;</span> =&gt; date(<span class="string">&#x27;N&#x27;</span>, <span class="variable">$time</span>),</span><br><span class="line">    <span class="string">&#x27;S&#x27;</span> =&gt; date(<span class="string">&#x27;S&#x27;</span>, <span class="variable">$time</span>),</span><br><span class="line">    <span class="string">&#x27;w&#x27;</span> =&gt; date(<span class="string">&#x27;w&#x27;</span>, <span class="variable">$time</span>),</span><br><span class="line">    <span class="string">&#x27;z&#x27;</span> =&gt; date(<span class="string">&#x27;z&#x27;</span>, <span class="variable">$time</span>),</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line">print_r(<span class="variable">$array</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»“æœ</span></span><br><span class="line"><span class="keyword">Array</span></span><br><span class="line">(</span><br><span class="line">    [d] =&gt; <span class="number">01</span></span><br><span class="line">    [D] =&gt; Mon</span><br><span class="line">    [j] =&gt; <span class="number">1</span></span><br><span class="line">    [l] =&gt; Monday</span><br><span class="line">    [N] =&gt; <span class="number">1</span></span><br><span class="line">    [S] =&gt; st</span><br><span class="line">    [w] =&gt; <span class="number">1</span></span><br><span class="line">    [z] =&gt; <span class="number">152</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<h2 id="æ˜ŸæœŸæ ¼å¼"><a href="#æ˜ŸæœŸæ ¼å¼" class="headerlink" title="æ˜ŸæœŸæ ¼å¼"></a>æ˜ŸæœŸæ ¼å¼</h2><table>
<thead>
<tr>
<th>æ ¼å¼</th>
<th>è¯´æ˜</th>
<th>è¿”å›å€¼</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>W</code></td>
<td>ISO-8601 æ ¼å¼å¹´ä»½ä¸­çš„ç¬¬å‡ å‘¨ï¼Œæ¯å‘¨ä»æ˜ŸæœŸä¸€å¼€å§‹ï¼ˆPHP 4.1.0 æ–°åŠ çš„ï¼‰</td>
<td>ä¾‹å¦‚ï¼š42ï¼ˆå½“å¹´çš„ç¬¬ 42 å‘¨ï¼‰</td>
</tr>
</tbody>
</table>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$time</span> = strtotime(<span class="string">&#x27;2020-06-01 12:59:59&#x27;</span>);</span><br><span class="line"><span class="variable">$array</span> = [</span><br><span class="line">    <span class="string">&#x27;W&#x27;</span> =&gt; date(<span class="string">&#x27;W&#x27;</span>, <span class="variable">$time</span>),</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line">print_r(<span class="variable">$array</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»“æœ</span></span><br><span class="line"><span class="keyword">Array</span></span><br><span class="line">(</span><br><span class="line">    [W] =&gt; <span class="number">23</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<h2 id="æœˆæ ¼å¼"><a href="#æœˆæ ¼å¼" class="headerlink" title="æœˆæ ¼å¼"></a>æœˆæ ¼å¼</h2><table>
<thead>
<tr>
<th>æ ¼å¼</th>
<th>è¯´æ˜</th>
<th>è¿”å›å€¼</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>F</code></td>
<td>æœˆä»½ï¼Œå®Œæ•´çš„æ–‡æœ¬æ ¼å¼ï¼Œä¾‹å¦‚ January æˆ–è€… March</td>
<td>January åˆ° December</td>
</tr>
<tr>
<td><code>m</code></td>
<td>æ•°å­—è¡¨ç¤ºçš„æœˆä»½ï¼Œæœ‰å‰å¯¼é›¶</td>
<td>01 åˆ° 12</td>
</tr>
<tr>
<td><code>M</code></td>
<td>ä¸‰ä¸ªå­—æ¯ç¼©å†™è¡¨ç¤ºçš„æœˆä»½</td>
<td>Jan åˆ° Dec</td>
</tr>
<tr>
<td><code>n</code></td>
<td>æ•°å­—è¡¨ç¤ºçš„æœˆä»½ï¼Œæ²¡æœ‰å‰å¯¼é›¶</td>
<td>1 åˆ° 12</td>
</tr>
<tr>
<td><code>t</code></td>
<td>æŒ‡å®šçš„æœˆä»½æœ‰å‡ å¤©</td>
<td>28 åˆ° 31</td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$time</span> = strtotime(<span class="string">&#x27;2020-06-01 12:59:59&#x27;</span>);</span><br><span class="line"><span class="variable">$array</span> = [</span><br><span class="line">    <span class="string">&#x27;F&#x27;</span> =&gt; date(<span class="string">&#x27;F&#x27;</span>, <span class="variable">$time</span>),</span><br><span class="line">    <span class="string">&#x27;m&#x27;</span> =&gt; date(<span class="string">&#x27;m&#x27;</span>, <span class="variable">$time</span>),</span><br><span class="line">    <span class="string">&#x27;M&#x27;</span> =&gt; date(<span class="string">&#x27;M&#x27;</span>, <span class="variable">$time</span>),</span><br><span class="line">    <span class="string">&#x27;n&#x27;</span> =&gt; date(<span class="string">&#x27;n&#x27;</span>, <span class="variable">$time</span>),</span><br><span class="line">    <span class="string">&#x27;t&#x27;</span> =&gt; date(<span class="string">&#x27;t&#x27;</span>, <span class="variable">$time</span>),</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line">print_r(<span class="variable">$array</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»“æœ</span></span><br><span class="line"><span class="keyword">Array</span></span><br><span class="line">(</span><br><span class="line">    [F] =&gt; June</span><br><span class="line">    [m] =&gt; <span class="number">06</span></span><br><span class="line">    [M] =&gt; Jun</span><br><span class="line">    [n] =&gt; <span class="number">6</span></span><br><span class="line">    [t] =&gt; <span class="number">30</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<h2 id="å¹´æ ¼å¼"><a href="#å¹´æ ¼å¼" class="headerlink" title="å¹´æ ¼å¼"></a>å¹´æ ¼å¼</h2><table>
<thead>
<tr>
<th>æ ¼å¼</th>
<th>è¯´æ˜</th>
<th>è¿”å›å€¼</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>L</code></td>
<td>æ˜¯å¦ä¸ºé—°å¹´</td>
<td>å¦‚æœæ˜¯é—°å¹´ä¸º 1ï¼Œå¦åˆ™ä¸º 0</td>
</tr>
<tr>
<td><code>o</code></td>
<td>ISO-8601 æ ¼å¼å¹´ä»½æ•°å­—ã€‚è¿™å’Œ Y çš„å€¼ç›¸åŒï¼Œåªé™¤äº†å¦‚æœ ISO çš„æ˜ŸæœŸæ•°ï¼ˆWï¼‰å±äºå‰ä¸€å¹´æˆ–ä¸‹ä¸€å¹´ï¼Œåˆ™ç”¨é‚£ä¸€å¹´ã€‚ï¼ˆPHP 5.1.0 æ–°åŠ ï¼‰</td>
<td>ä¾‹å¦‚ï¼š1999 or 2003</td>
</tr>
<tr>
<td><code>Y</code></td>
<td>4 ä½æ•°å­—å®Œæ•´è¡¨ç¤ºçš„å¹´ä»½</td>
<td>ä¾‹å¦‚ï¼š1999 æˆ– 2003</td>
</tr>
<tr>
<td><code>y</code></td>
<td>2 ä½æ•°å­—è¡¨ç¤ºçš„å¹´ä»½</td>
<td>ä¾‹å¦‚ï¼š99 æˆ– 03</td>
</tr>
</tbody>
</table>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$time</span> = strtotime(<span class="string">&#x27;2020-06-01 12:59:59&#x27;</span>);</span><br><span class="line"><span class="variable">$array</span> = [</span><br><span class="line">    <span class="string">&#x27;L&#x27;</span> =&gt; date(<span class="string">&#x27;L&#x27;</span>, <span class="variable">$time</span>),</span><br><span class="line">    <span class="string">&#x27;o&#x27;</span> =&gt; date(<span class="string">&#x27;o&#x27;</span>, <span class="variable">$time</span>),</span><br><span class="line">    <span class="string">&#x27;Y&#x27;</span> =&gt; date(<span class="string">&#x27;Y&#x27;</span>, <span class="variable">$time</span>),</span><br><span class="line">    <span class="string">&#x27;y&#x27;</span> =&gt; date(<span class="string">&#x27;y&#x27;</span>, <span class="variable">$time</span>),</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line">print_r(<span class="variable">$array</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»“æœ</span></span><br><span class="line"><span class="keyword">Array</span></span><br><span class="line">(</span><br><span class="line">    [L] =&gt; <span class="number">1</span></span><br><span class="line">    [o] =&gt; <span class="number">2020</span></span><br><span class="line">    [Y] =&gt; <span class="number">2020</span></span><br><span class="line">    [y] =&gt; <span class="number">20</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<h1 id="è®¡ç®—æŒ‡å®šæ—¥æœŸæ—¶é—´"><a href="#è®¡ç®—æŒ‡å®šæ—¥æœŸæ—¶é—´" class="headerlink" title="è®¡ç®—æŒ‡å®šæ—¥æœŸæ—¶é—´"></a>è®¡ç®—æŒ‡å®šæ—¥æœŸæ—¶é—´</h1><h2 id="å½“å‰æ—¥æœŸæ—¶é—´çš„ç›¸å¯¹è®¡ç®—"><a href="#å½“å‰æ—¥æœŸæ—¶é—´çš„ç›¸å¯¹è®¡ç®—" class="headerlink" title="å½“å‰æ—¥æœŸæ—¶é—´çš„ç›¸å¯¹è®¡ç®—"></a>å½“å‰æ—¥æœŸæ—¶é—´çš„ç›¸å¯¹è®¡ç®—</h2><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line">date_default_timezone_set(<span class="string">&#x27;PRC&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable">$array</span> = [</span><br><span class="line">    <span class="string">&#x27;å½“å‰æ—¥æœŸæ—¶é—´&#x27;</span> =&gt; date(<span class="string">&#x27;Y-m-d H:i:s&#x27;</span>),</span><br><span class="line">    <span class="string">&#x27;å‰ä¸€å¤©çš„æ­¤æ—¶æ—¥æœŸæ—¶é—´&#x27;</span> =&gt; date(<span class="string">&#x27;Y-m-d H:i:s&#x27;</span>, strtotime(<span class="string">&#x27;-1 day&#x27;</span>)),</span><br><span class="line">    <span class="string">&#x27;åä¸€å¤©çš„æ­¤æ—¶æ—¥æœŸæ—¶é—´&#x27;</span> =&gt; date(<span class="string">&#x27;Y-m-d H:i:s&#x27;</span>, strtotime(<span class="string">&#x27;+1 day&#x27;</span>)),</span><br><span class="line">    <span class="string">&#x27;ä¸Šä¸€ä¸ªæœˆçš„æ­¤æ—¶æ—¥æœŸæ—¶é—´&#x27;</span> =&gt; date(<span class="string">&#x27;Y-m-d H:i:s&#x27;</span>, strtotime(<span class="string">&#x27;-1 month&#x27;</span>)),</span><br><span class="line">    <span class="string">&#x27;ä¸‹ä¸€ä¸ªæœˆçš„æ­¤æ—¶æ—¥æœŸæ—¶é—´&#x27;</span> =&gt; date(<span class="string">&#x27;Y-m-d H:i:s&#x27;</span>, strtotime(<span class="string">&#x27;+1 month&#x27;</span>)),</span><br><span class="line">    <span class="string">&#x27;åŠ  1 æœˆ 2 å‘¨ 3 å¤© 4 æ—¶ 5 åˆ† 6 ç§’çš„æ­¤æ—¶æ—¥æœŸæ—¶é—´&#x27;</span> =&gt; date(<span class="string">&#x27;Y-m-d H:i:s&#x27;</span>, strtotime(<span class="string">&#x27;+1 month +2 weeks +3 days +4 hours +5 minutes +6 seconds&#x27;</span>)),</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line">print_r(<span class="variable">$array</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»“æœ</span></span><br><span class="line"><span class="keyword">Array</span></span><br><span class="line">(</span><br><span class="line">    [å½“å‰æ—¥æœŸæ—¶é—´] =&gt; <span class="number">2018</span>-<span class="number">04</span>-<span class="number">13</span> <span class="number">21</span>:<span class="number">24</span>:<span class="number">30</span></span><br><span class="line">    [å‰ä¸€å¤©çš„æ­¤æ—¶æ—¥æœŸæ—¶é—´] =&gt; <span class="number">2018</span>-<span class="number">04</span>-<span class="number">12</span> <span class="number">21</span>:<span class="number">24</span>:<span class="number">30</span></span><br><span class="line">    [åä¸€å¤©çš„æ­¤æ—¶æ—¥æœŸæ—¶é—´] =&gt; <span class="number">2018</span>-<span class="number">04</span>-<span class="number">14</span> <span class="number">21</span>:<span class="number">24</span>:<span class="number">30</span></span><br><span class="line">    [ä¸Šä¸€ä¸ªæœˆçš„æ­¤æ—¶æ—¥æœŸæ—¶é—´] =&gt; <span class="number">2018</span>-<span class="number">03</span>-<span class="number">13</span> <span class="number">21</span>:<span class="number">24</span>:<span class="number">30</span></span><br><span class="line">    [ä¸‹ä¸€ä¸ªæœˆçš„æ­¤æ—¶æ—¥æœŸæ—¶é—´] =&gt; <span class="number">2018</span>-<span class="number">05</span>-<span class="number">13</span> <span class="number">21</span>:<span class="number">24</span>:<span class="number">30</span></span><br><span class="line">    [åŠ  <span class="number">1</span> æœˆ <span class="number">2</span> å‘¨ <span class="number">3</span> å¤© <span class="number">4</span> æ—¶ <span class="number">5</span> åˆ† <span class="number">6</span> ç§’çš„æ­¤æ—¶æ—¥æœŸæ—¶é—´] =&gt; <span class="number">2018</span>-<span class="number">05</span>-<span class="number">31</span> <span class="number">01</span>:<span class="number">29</span>:<span class="number">36</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<h2 id="èµ·å§‹ç»“æŸæ—¥æœŸæ—¶é—´çš„è®¡ç®—"><a href="#èµ·å§‹ç»“æŸæ—¥æœŸæ—¶é—´çš„è®¡ç®—" class="headerlink" title="èµ·å§‹ç»“æŸæ—¥æœŸæ—¶é—´çš„è®¡ç®—"></a>èµ·å§‹ç»“æŸæ—¥æœŸæ—¶é—´çš„è®¡ç®—</h2><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line">date_default_timezone_set(<span class="string">&#x27;PRC&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable">$array</span> = [</span><br><span class="line">    <span class="string">&#x27;æœ¬å‘¨èµ·å§‹æ—¥æœŸæ—¶é—´&#x27;</span> =&gt; date(<span class="string">&#x27;Y-m-d H:i:s&#x27;</span>, mktime(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, date(<span class="string">&#x27;m&#x27;</span>), date(<span class="string">&#x27;d&#x27;</span>) - date(<span class="string">&#x27;w&#x27;</span>) + <span class="number">1</span> - <span class="number">5</span>, date(<span class="string">&#x27;Y&#x27;</span>))),</span><br><span class="line">    <span class="string">&#x27;æœ¬å‘¨ç»“æŸæ—¥æœŸæ—¶é—´&#x27;</span> =&gt; date(<span class="string">&#x27;Y-m-d H:i:s&#x27;</span>, mktime(<span class="number">23</span>, <span class="number">59</span>, <span class="number">59</span>, date(<span class="string">&#x27;m&#x27;</span>), date(<span class="string">&#x27;d&#x27;</span>) - date(<span class="string">&#x27;w&#x27;</span>) + <span class="number">7</span> - <span class="number">5</span>, date(<span class="string">&#x27;Y&#x27;</span>))),</span><br><span class="line">    <span class="string">&#x27;ä¸Šæœˆèµ·å§‹æ—¥æœŸæ—¶é—´&#x27;</span> =&gt; date(<span class="string">&#x27;Y-m-d H:i:s&#x27;</span>, mktime(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, date(<span class="string">&#x27;m&#x27;</span>) - <span class="number">1</span>, <span class="number">1</span>, date(<span class="string">&#x27;Y&#x27;</span>))),</span><br><span class="line">    <span class="string">&#x27;ä¸Šæœˆç»“æŸæ—¥æœŸæ—¶é—´&#x27;</span> =&gt; date(<span class="string">&#x27;Y-m-d H:i:s&#x27;</span>, mktime(<span class="number">23</span>, <span class="number">59</span>, <span class="number">59</span>, date(<span class="string">&#x27;m&#x27;</span>), <span class="number">0</span>, date(<span class="string">&#x27;Y&#x27;</span>))),</span><br><span class="line">    <span class="string">&#x27;æœ¬æœˆèµ·å§‹æ—¥æœŸæ—¶é—´&#x27;</span> =&gt; date(<span class="string">&#x27;Y-m-d H:i:s&#x27;</span>, mktime(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, date(<span class="string">&#x27;m&#x27;</span>), <span class="number">1</span>, date(<span class="string">&#x27;Y&#x27;</span>))),</span><br><span class="line">    <span class="string">&#x27;æœ¬æœˆç»“æŸæ—¥æœŸæ—¶é—´&#x27;</span> =&gt; date(<span class="string">&#x27;Y-m-d H:i:s&#x27;</span>, mktime(<span class="number">23</span>, <span class="number">59</span>, <span class="number">59</span>, date(<span class="string">&#x27;m&#x27;</span>), date(<span class="string">&#x27;t&#x27;</span>), date(<span class="string">&#x27;Y&#x27;</span>))),</span><br><span class="line">    <span class="string">&#x27;ä¸‹æœˆèµ·å§‹æ—¥æœŸæ—¶é—´&#x27;</span> =&gt; date(<span class="string">&#x27;Y-m-d H:i:s&#x27;</span>, mktime(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, date(<span class="string">&#x27;m&#x27;</span>) + <span class="number">1</span>, <span class="number">1</span>, date(<span class="string">&#x27;Y&#x27;</span>))),</span><br><span class="line">    <span class="string">&#x27;ä¸‹æœˆç»“æŸæ—¥æœŸæ—¶é—´&#x27;</span> =&gt; date(<span class="string">&#x27;Y-m-d H:i:s&#x27;</span>, mktime(<span class="number">23</span>, <span class="number">59</span>, <span class="number">59</span>, date(<span class="string">&#x27;m&#x27;</span>) + <span class="number">1</span>, date(<span class="string">&#x27;t&#x27;</span>) + <span class="number">1</span>, date(<span class="string">&#x27;Y&#x27;</span>))),</span><br><span class="line">];</span><br><span class="line">print_r(<span class="variable">$array</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»“æœ</span></span><br><span class="line"><span class="keyword">Array</span></span><br><span class="line">(</span><br><span class="line">    [æœ¬å‘¨èµ·å§‹æ—¥æœŸæ—¶é—´] =&gt; <span class="number">2018</span>-<span class="number">04</span>-<span class="number">04</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span></span><br><span class="line">    [æœ¬å‘¨ç»“æŸæ—¥æœŸæ—¶é—´] =&gt; <span class="number">2018</span>-<span class="number">04</span>-<span class="number">10</span> <span class="number">23</span>:<span class="number">59</span>:<span class="number">59</span></span><br><span class="line">    [ä¸Šæœˆèµ·å§‹æ—¥æœŸæ—¶é—´] =&gt; <span class="number">2018</span>-<span class="number">03</span>-<span class="number">01</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span></span><br><span class="line">    [ä¸Šæœˆç»“æŸæ—¥æœŸæ—¶é—´] =&gt; <span class="number">2018</span>-<span class="number">03</span>-<span class="number">31</span> <span class="number">23</span>:<span class="number">59</span>:<span class="number">59</span></span><br><span class="line">    [æœ¬æœˆèµ·å§‹æ—¥æœŸæ—¶é—´] =&gt; <span class="number">2018</span>-<span class="number">04</span>-<span class="number">01</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span></span><br><span class="line">    [æœ¬æœˆç»“æŸæ—¥æœŸæ—¶é—´] =&gt; <span class="number">2018</span>-<span class="number">04</span>-<span class="number">30</span> <span class="number">23</span>:<span class="number">59</span>:<span class="number">59</span></span><br><span class="line">    [ä¸‹æœˆèµ·å§‹æ—¥æœŸæ—¶é—´] =&gt; <span class="number">2018</span>-<span class="number">05</span>-<span class="number">01</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span></span><br><span class="line">    [ä¸‹æœˆç»“æŸæ—¥æœŸæ—¶é—´] =&gt; <span class="number">2018</span>-<span class="number">05</span>-<span class="number">31</span> <span class="number">23</span>:<span class="number">59</span>:<span class="number">59</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>php</category>
      </categories>
      <tags>
        <tag>php</tag>
      </tags>
  </entry>
  <entry>
    <title>PHP ç¼–ç æ ‡å‡†æ’ä»¶</title>
    <url>/2018/02/07/php-coding-standards-plugin/</url>
    <content><![CDATA[<p>æ— è§„çŸ©ä¸æˆæ–¹åœ†ï¼Œæ— è§„èŒƒä¸èƒ½åä½œã€‚æ¯é—¨ç¼–ç¨‹è¯­è¨€å‡ ä¹éƒ½æœ‰ä¸€å¥—åˆä¹è‡ªæœ‰ç« æ³•çš„è§„çŸ©ï¼Œå½“ç„¶äº†ï¼ŒPHP ä¹Ÿä¸ä¾‹å¤–ã€‚å³ä½¿æ˜¯ä½ ç‹¬ç«‹æ’¸ç ï¼Œä¹Ÿè‡ªæœ‰ä¸€å¥—è‡ªå·±çš„ç« æ³•ï¼Œå¯æƒœï¼Œä½ ä¸æ˜¯ä¸€ä¸ªäººåœ¨æˆ˜æ–—ï¼Œåœ¨è¿™ä¸ªè®²ç©¶ç¼–ç¨‹æ•ˆç‡çš„å…µå›¢ä½œæˆ˜æ—¶ä»£ï¼Œæ²¡æœ‰äººæ„¿æ„å¿å—åˆ«äººç³Ÿç³•çš„ä»£ç é£æ ¼ã€‚æ˜¯çš„ï¼Œä»£ç çš„çš„ç¡®ç¡®æ˜¯æœºå™¨å»æ‰§è¡Œçš„ï¼Œä½†æ˜¯å› æ›´æ”¹éœ€æ±‚è€Œç»´æŠ¤çš„ä»£ç å¯ä¸æ˜¯æœºå™¨äººå¹²çš„ã€‚ä¸ºäº†è®©ä»£ç å¯ç»´æŠ¤ï¼Œçœ‹èµ·æ¥åƒé‚£ä¹ˆå›äº‹ï¼Œè¿˜æ˜¯å°½åŠ›ç å¥½å§ï¼Œä¸ç„¶ï¼Œä¸‹ä¸€ä¸ªé­åæ§½å¯èƒ½å°±æ˜¯ä½ äº†ï¼Œæˆ‘å·²ç»ä¸è‡³ä¸€æ¬¡å¬è¿‡ã€è¿™ç‰¹ä¹ˆè°å†™çš„ã€è¿™å¥è¯äº†ï¼Œåæ­£å¬èµ·æ¥ä¸åƒæ˜¯åœ¨å¤¸è°ã€‚</p>
<h1 id="PHP-CodeSniffer"><a href="#PHP-CodeSniffer" class="headerlink" title="PHP CodeSniffer"></a>PHP CodeSniffer</h1><blockquote>
<ul>
<li><a href="http://pear.php.net/package/PHP_CodeSniffer">PHP_CodeSniffer Pear</a></li>
<li><a href="https://github.com/squizlabs/PHP_CodeSniffer">PHP_CodeSniffer GitHub</a></li>
<li><a href="https://github.com/squizlabs/PHP_CodeSniffer/wiki">PHP_CodeSniffer Documentation</a></li>
</ul>
</blockquote>
<h2 id="CodeSniffer-å®‰è£…"><a href="#CodeSniffer-å®‰è£…" class="headerlink" title="CodeSniffer å®‰è£…"></a>CodeSniffer å®‰è£…</h2><p>PHP CodeSniffer æœ‰ä¸¤ä¸ªè„šæœ¬ï¼Œ<code>phpcs</code> è„šæœ¬ç”¨æ¥æ£€æµ‹è¿åå®šä¹‰çš„ç¼–ç æ ‡å‡†ï¼Œ<code>phpcbf</code> è„šæœ¬ç”¨æ¥è‡ªåŠ¨çº æ­£ç¼–ç æ ‡å‡†è¿è§„ã€‚</p>
<h3 id="Curl-å®‰è£…-CodeSniffer"><a href="#Curl-å®‰è£…-CodeSniffer" class="headerlink" title="Curl å®‰è£… CodeSniffer"></a>Curl å®‰è£… CodeSniffer</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// ä¸‹è½½ phpcs å’Œ phpcbf æ–‡ä»¶å¹¶ç§»åŠ¨åˆ°ç›¸åº”ç›®å½•</span><br><span class="line">$ <span class="built_in">cd</span> ~</span><br><span class="line">$ curl -OL https://squizlabs.github.io/PHP_CodeSniffer/phpcs.phar</span><br><span class="line">$ sudo mv phpcs.phar /usr/<span class="built_in">local</span>/bin/phpcs</span><br><span class="line">$ sudo chmod +x /usr/<span class="built_in">local</span>/bin/phpcs</span><br><span class="line">$ curl -OL https://squizlabs.github.io/PHP_CodeSniffer/phpcbf.phar</span><br><span class="line">$ sudo mv phpcbf.phar /usr/<span class="built_in">local</span>/bin/phpcbf</span><br><span class="line">$ sudo chmod +x /usr/<span class="built_in">local</span>/bin/phpcbf</span><br></pre></td></tr></table></figure>
<h3 id="Composer-å®‰è£…-CodeSniffer"><a href="#Composer-å®‰è£…-CodeSniffer" class="headerlink" title="Composer å®‰è£… CodeSniffer"></a>Composer å®‰è£… CodeSniffer</h3><blockquote>
<p>å®‰è£…å®Œæˆåï¼Œå°† <code>$HOME/.composer/vendor/bin</code> æ·»åŠ åˆ°ç³»ç»Ÿ <code>PATH</code> ä¸­ã€‚</p>
</blockquote>
<ul>
<li>å…¨å±€å®‰è£…</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// å®‰è£… squizlabs/php_codesniffer</span><br><span class="line">$ composer global require <span class="string">&quot;squizlabs/php_codesniffer=*&quot;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>é¡¹ç›®å®‰è£…</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ vim composer.json</span><br><span class="line">&#123;</span><br><span class="line">    <span class="string">&quot;require-dev&quot;</span>: &#123;</span><br><span class="line">        <span class="string">&quot;squizlabs/php_codesniffer&quot;</span>: <span class="string">&quot;3.*&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">$ composer install</span><br></pre></td></tr></table></figure>
<h2 id="å·¥å…·è®¾ç½®"><a href="#å·¥å…·è®¾ç½®" class="headerlink" title="å·¥å…·è®¾ç½®"></a>å·¥å…·è®¾ç½®</h2><h3 id="è®¾ç½®ç¼–ç æ ‡å‡†"><a href="#è®¾ç½®ç¼–ç æ ‡å‡†" class="headerlink" title="è®¾ç½®ç¼–ç æ ‡å‡†"></a>è®¾ç½®ç¼–ç æ ‡å‡†</h3><blockquote>
<p>æ”¯æŒçš„ç¼–ç æ ‡å‡†ï¼š<code>PEAR, Zend, PSR2, MySource, Squiz, PSR1</code>ï¼Œé»˜è®¤ï¼š<code>PEAR</code>ã€‚</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// è®¾ç½®ç¼–ç æ ‡å‡†ä¸º PSR2</span><br><span class="line">$ phpcs --config-set default_standard PSR2</span><br></pre></td></tr></table></figure>
<h3 id="è®¾ç½®æŠ¥å‘Šæ ¼å¼"><a href="#è®¾ç½®æŠ¥å‘Šæ ¼å¼" class="headerlink" title="è®¾ç½®æŠ¥å‘Šæ ¼å¼"></a>è®¾ç½®æŠ¥å‘Šæ ¼å¼</h3><blockquote>
<p>æ”¯æŒçš„æŠ¥å‘Šæ ¼å¼ï¼š<code>full, xml, checkstyle, csv, json, junit, emacs, source, summary, diff, svnblame, gitblame, hgblame, notifysend</code>ï¼Œé»˜è®¤ï¼š<code>full</code></p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// è®¾ç½®æŠ¥å‘Šæ ¼å¼ä¸º full</span><br><span class="line">$ phpcs --config-set report_format full</span><br></pre></td></tr></table></figure>
<h3 id="è®¾ç½®è­¦å‘Šéšè—"><a href="#è®¾ç½®è­¦å‘Šéšè—" class="headerlink" title="è®¾ç½®è­¦å‘Šéšè—"></a>è®¾ç½®è­¦å‘Šéšè—</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// é»˜è®¤å€¼ä¸º 1</span><br><span class="line">$ phpcs --config-set show_warnings 0</span><br></pre></td></tr></table></figure>
<h3 id="è®¾ç½®è¿è¡Œè¿›åº¦"><a href="#è®¾ç½®è¿è¡Œè¿›åº¦" class="headerlink" title="è®¾ç½®è¿è¡Œè¿›åº¦"></a>è®¾ç½®è¿è¡Œè¿›åº¦</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// é»˜è®¤å€¼ä¸º 0</span><br><span class="line">$ phpcs --config-set show_progress 1</span><br></pre></td></tr></table></figure>
<h3 id="è®¾ç½®è¾“å‡ºæ—¶ä½¿ç”¨æ¶¦è‰²"><a href="#è®¾ç½®è¾“å‡ºæ—¶ä½¿ç”¨æ¶¦è‰²" class="headerlink" title="è®¾ç½®è¾“å‡ºæ—¶ä½¿ç”¨æ¶¦è‰²"></a>è®¾ç½®è¾“å‡ºæ—¶ä½¿ç”¨æ¶¦è‰²</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// é»˜è®¤å€¼ä¸º 0</span><br><span class="line">$ phpcs --config-set colors 1</span><br></pre></td></tr></table></figure>
<h3 id="è®¾ç½®æŠ¥å‘Šçš„å®½åº¦"><a href="#è®¾ç½®æŠ¥å‘Šçš„å®½åº¦" class="headerlink" title="è®¾ç½®æŠ¥å‘Šçš„å®½åº¦"></a>è®¾ç½®æŠ¥å‘Šçš„å®½åº¦</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// è®¾ç½®æŠ¥å‘Šçš„å®½åº¦ä¸º 120</span><br><span class="line">$ phpcs --config-set report_width 120</span><br></pre></td></tr></table></figure>
<h3 id="è®¾ç½®æ–‡æœ¬å­—ç¬¦ç¼–ç "><a href="#è®¾ç½®æ–‡æœ¬å­—ç¬¦ç¼–ç " class="headerlink" title="è®¾ç½®æ–‡æœ¬å­—ç¬¦ç¼–ç "></a>è®¾ç½®æ–‡æœ¬å­—ç¬¦ç¼–ç </h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// è®¾ç½®æ–‡æœ¬å­—ç¬¦ç¼–ç ä¸º UTF-8</span><br><span class="line">$ phpcs --config-set encoding UTF-8</span><br></pre></td></tr></table></figure>
<h3 id="è®¾ç½®åˆ¶è¡¨ç¬¦å®½åº¦"><a href="#è®¾ç½®åˆ¶è¡¨ç¬¦å®½åº¦" class="headerlink" title="è®¾ç½®åˆ¶è¡¨ç¬¦å®½åº¦"></a>è®¾ç½®åˆ¶è¡¨ç¬¦å®½åº¦</h3><blockquote>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼Œ<code>PHP_CodeSniffer</code> ä¸ä¼šå°†æ£€æŸ¥æ–‡ä»¶ä¸­çš„åˆ¶è¡¨ç¬¦è½¬æ¢ä¸ºç©ºæ ¼ï¼ŒæŒ‡å®šä¸€ä¸ªåˆ¶è¡¨ç¬¦å®½åº¦å°†ä½¿ <code>PHP_CodeSniffer</code> ç”¨ç©ºæ ¼æ›¿æ¢åˆ¶è¡¨ç¬¦ã€‚ä¹Ÿå¯ä»¥é€šè¿‡è®¾ç½® <code>tab_width</code> é…ç½®é€‰é¡¹æ¥å¼ºåˆ¶ <code>PHP_CodeSniffer</code> å°†åˆ¶è¡¨ç¬¦æ›¿æ¢ä¸ºç©ºæ ¼ã€‚</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// è®¾ç½®åˆ¶è¡¨ç¬¦å®½åº¦ä¸º 4 ä¸ªç©ºæ ¼</span><br><span class="line">$ phpcs --config-set tab_width 4</span><br></pre></td></tr></table></figure>
<h3 id="è®¾ç½®-PHP-ç‰ˆæœ¬"><a href="#è®¾ç½®-PHP-ç‰ˆæœ¬" class="headerlink" title="è®¾ç½® PHP ç‰ˆæœ¬"></a>è®¾ç½® PHP ç‰ˆæœ¬</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// ä½¿ç”¨ PHP_VERSION_ID è·å–åå†è®¾ç½®</span><br><span class="line">$ phpcs --config-set php_version 70114</span><br></pre></td></tr></table></figure>
<h3 id="è®¾ç½®-PHP-è·¯å¾„"><a href="#è®¾ç½®-PHP-è·¯å¾„" class="headerlink" title="è®¾ç½® PHP è·¯å¾„"></a>è®¾ç½® PHP è·¯å¾„</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// ä½¿ç”¨ <span class="built_in">which</span> å‘½ä»¤è·å–åå†è®¾ç½®</span><br><span class="line">$ phpcs --config-set php_path /usr/<span class="built_in">local</span>/bin/php</span><br></pre></td></tr></table></figure>
<h3 id="æŸ¥çœ‹è®¾ç½®"><a href="#æŸ¥çœ‹è®¾ç½®" class="headerlink" title="æŸ¥çœ‹è®¾ç½®"></a>æŸ¥çœ‹è®¾ç½®</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// æŸ¥çœ‹åˆšæ‰çš„ä¸€äº›è®¾ç½®</span><br><span class="line">$ phpcs --config-show</span><br><span class="line">Using config file: /Users/user/.composer/vendor/squizlabs/php_codesniffer/CodeSniffer.conf</span><br><span class="line"></span><br><span class="line">colors:           1</span><br><span class="line">default_standard: PSR2</span><br><span class="line">encoding:         UTF-8</span><br><span class="line">php_path:         /usr/<span class="built_in">local</span>/bin/php</span><br><span class="line">php_version:      70114</span><br><span class="line">report_format:    full</span><br><span class="line">report_width:     120</span><br><span class="line">show_progress:    1</span><br><span class="line">show_warnings:    1</span><br><span class="line">tab_width:        4</span><br></pre></td></tr></table></figure>
<h2 id="å·¥å…·ä½¿ç”¨"><a href="#å·¥å…·ä½¿ç”¨" class="headerlink" title="å·¥å…·ä½¿ç”¨"></a>å·¥å…·ä½¿ç”¨</h2><h3 id="æŒ‡å®šç¼–ç æ ‡å‡†"><a href="#æŒ‡å®šç¼–ç æ ‡å‡†" class="headerlink" title="æŒ‡å®šç¼–ç æ ‡å‡†"></a>æŒ‡å®šç¼–ç æ ‡å‡†</h3><blockquote>
<p>ä¹Ÿå¯ä»¥è‡ªå®šä¹‰ç¼–ç æ ‡å‡†ï¼Œç„¶ååŠ å…¥åˆ°æ£€æŸ¥æ ‡å‡†ä¸­ã€‚</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ phpcs --standard=PEAR /path/to/code/Demo.php</span><br><span class="line">æˆ–</span><br><span class="line">$ phpcs --standard=/path/to/MyStandard /path/to/code/Demo.php</span><br><span class="line">æˆ–</span><br><span class="line">$ phpcs --standard=PEAR,Squiz,/path/to/MyStandard /path/to/code/Demo.php</span><br></pre></td></tr></table></figure>
<h3 id="æ‰“å°å®‰è£…ç¼–ç æ ‡å‡†çš„åˆ—è¡¨"><a href="#æ‰“å°å®‰è£…ç¼–ç æ ‡å‡†çš„åˆ—è¡¨" class="headerlink" title="æ‰“å°å®‰è£…ç¼–ç æ ‡å‡†çš„åˆ—è¡¨"></a>æ‰“å°å®‰è£…ç¼–ç æ ‡å‡†çš„åˆ—è¡¨</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ phpcs -i</span><br><span class="line">The installed coding standards are PEAR, Zend, PSR2, MySource, Squiz and PSR1</span><br></pre></td></tr></table></figure>
<h3 id="ç¼–ç æ ‡å‡†å†…çš„å—…æ¢åˆ—è¡¨"><a href="#ç¼–ç æ ‡å‡†å†…çš„å—…æ¢åˆ—è¡¨" class="headerlink" title="ç¼–ç æ ‡å‡†å†…çš„å—…æ¢åˆ—è¡¨"></a>ç¼–ç æ ‡å‡†å†…çš„å—…æ¢åˆ—è¡¨</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ phpcs --standard=PSR2 -e</span><br><span class="line"></span><br><span class="line">The PSR2 standard contains 42 sniffs</span><br><span class="line"></span><br><span class="line">Generic (12 sniffs)</span><br><span class="line">-------------------</span><br><span class="line">  Generic.ControlStructures.InlineControlStructure</span><br><span class="line">  Generic.Files.ByteOrderMark</span><br><span class="line">  Generic.Files.LineEndings</span><br><span class="line">  Generic.Files.LineLength</span><br><span class="line">  Generic.Formatting.DisallowMultipleStatements</span><br><span class="line">  Generic.Functions.FunctionCallArgumentSpacing</span><br><span class="line">  Generic.NamingConventions.UpperCaseConstantName</span><br><span class="line">  Generic.PHP.DisallowShortOpenTag</span><br><span class="line">  Generic.PHP.LowerCaseConstant</span><br><span class="line">  Generic.PHP.LowerCaseKeyword</span><br><span class="line">  Generic.WhiteSpace.DisallowTabIndent</span><br><span class="line">  Generic.WhiteSpace.ScopeIndent</span><br><span class="line"></span><br><span class="line">PEAR (1 sniff)</span><br><span class="line">---------------</span><br><span class="line">  PEAR.Functions.ValidDefaultValue</span><br><span class="line"></span><br><span class="line">PSR1 (3 sniffs)</span><br><span class="line">---------------</span><br><span class="line">  PSR1.Classes.ClassDeclaration</span><br><span class="line">  PSR1.Files.SideEffects</span><br><span class="line">  PSR1.Methods.CamelCapsMethodName</span><br><span class="line"></span><br><span class="line">PSR2 (12 sniffs)</span><br><span class="line">----------------</span><br><span class="line">  PSR2.Classes.ClassDeclaration</span><br><span class="line">  PSR2.Classes.PropertyDeclaration</span><br><span class="line">  PSR2.ControlStructures.ControlStructureSpacing</span><br><span class="line">  PSR2.ControlStructures.ElseIfDeclaration</span><br><span class="line">  PSR2.ControlStructures.SwitchDeclaration</span><br><span class="line">  PSR2.Files.ClosingTag</span><br><span class="line">  PSR2.Files.EndFileNewline</span><br><span class="line">  PSR2.Methods.FunctionCallSignature</span><br><span class="line">  PSR2.Methods.FunctionClosingBrace</span><br><span class="line">  PSR2.Methods.MethodDeclaration</span><br><span class="line">  PSR2.Namespaces.NamespaceDeclaration</span><br><span class="line">  PSR2.Namespaces.UseDeclaration</span><br><span class="line"></span><br><span class="line">Squiz (14 sniffs)</span><br><span class="line">-----------------</span><br><span class="line">  Squiz.Classes.ValidClassName</span><br><span class="line">  Squiz.ControlStructures.ControlSignature</span><br><span class="line">  Squiz.ControlStructures.ForEachLoopDeclaration</span><br><span class="line">  Squiz.ControlStructures.ForLoopDeclaration</span><br><span class="line">  Squiz.ControlStructures.LowercaseDeclaration</span><br><span class="line">  Squiz.Functions.FunctionDeclaration</span><br><span class="line">  Squiz.Functions.FunctionDeclarationArgumentSpacing</span><br><span class="line">  Squiz.Functions.LowercaseFunctionKeywords</span><br><span class="line">  Squiz.Functions.MultiLineFunctionDeclaration</span><br><span class="line">  Squiz.Scope.MethodScope</span><br><span class="line">  Squiz.WhiteSpace.ControlStructureSpacing</span><br><span class="line">  Squiz.WhiteSpace.ScopeClosingBrace</span><br><span class="line">  Squiz.WhiteSpace.ScopeKeywordSpacing</span><br><span class="line">  Squiz.WhiteSpace.SuperfluousWhitespace</span><br></pre></td></tr></table></figure>
<h2 id="ä½¿ç”¨-CodeSniffer-æ ¼å¼åŒ–ä»£ç "><a href="#ä½¿ç”¨-CodeSniffer-æ ¼å¼åŒ–ä»£ç " class="headerlink" title="ä½¿ç”¨ CodeSniffer æ ¼å¼åŒ–ä»£ç "></a>ä½¿ç”¨ CodeSniffer æ ¼å¼åŒ–ä»£ç </h2><blockquote>
<p>è¯·è‡ªè¡Œåˆ›å»ºå·¥ç¨‹å»æµ‹è¯•ã€‚</p>
</blockquote>
<h3 id="CodeSniffer-æ ¼å¼åŒ–å‰çš„ä¸è§„èŒƒä»£ç "><a href="#CodeSniffer-æ ¼å¼åŒ–å‰çš„ä¸è§„èŒƒä»£ç " class="headerlink" title="CodeSniffer æ ¼å¼åŒ–å‰çš„ä¸è§„èŒƒä»£ç "></a>CodeSniffer æ ¼å¼åŒ–å‰çš„ä¸è§„èŒƒä»£ç </h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> <span class="title">Nilnice</span>\<span class="title">Acme</span>;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Finder</span></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">const</span> IGNORE_VCS_FILES =<span class="number">1</span>;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">const</span> IGNORE_DOT_FILES=<span class="number">2</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="variable">$ignore</span> = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">$this</span>-&gt; ignore=<span class="built_in">static</span>::IGNORE_VCS_FILES|<span class="built_in">static</span>::IGNORE_DOT_FILES ;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getIterator</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="number">0</span>===count(<span class="keyword">$this</span>-&gt;dirs)&amp;&amp;<span class="number">0</span>===count(<span class="keyword">$this</span>-&gt;iterators))&#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> \<span class="built_in">LogicException</span>(<span class="string">&#x27;You must call one of in() or append() methods before iterating over a Finder.&#x27;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(<span class="number">1</span>===count( <span class="keyword">$this</span>-&gt;dirs ) &amp;&amp;<span class="number">0</span> ===count(<span class="keyword">$this</span>-&gt;iterators))&#123;</span><br><span class="line">            <span class="keyword">return</span>   <span class="keyword">$this</span> -&gt;searchInDirectory( <span class="keyword">$this</span>-&gt;dirs[<span class="number">0</span>]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="variable">$iterator</span>=<span class="keyword">new</span> \<span class="built_in">AppendIterator</span> ();</span><br><span class="line">        <span class="keyword">foreach</span> (<span class="keyword">$this</span>-&gt; dirs        <span class="keyword">as</span> <span class="variable">$dir</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="variable">$iterator</span>-&gt;append(<span class="keyword">$this</span>-&gt;searchInDirectory( <span class="variable">$dir</span> )) ;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">foreach</span> (  <span class="keyword">$this</span>-&gt;iterators <span class="keyword">as</span> <span class="variable">$it</span>) &#123;</span><br><span class="line">            <span class="variable">$iterator</span>-&gt;append(    <span class="variable">$it</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span><span class="variable">$iterator</span>;</span><br><span class="line">    &#125;&#125;</span><br></pre></td></tr></table></figure>
<h3 id="ç»è¿‡-phpcs-æ£€æŸ¥åçš„æŠ¥å‘Š"><a href="#ç»è¿‡-phpcs-æ£€æŸ¥åçš„æŠ¥å‘Š" class="headerlink" title="ç»è¿‡ phpcs æ£€æŸ¥åçš„æŠ¥å‘Š"></a>ç»è¿‡ phpcs æ£€æŸ¥åçš„æŠ¥å‘Š</h3><p><img src="https://inotes.oss-cn-beijing.aliyuncs.com/php/201812/php-codesniffer-phpcs.png" alt="php-codesniffer-phpcs.png"></p>
<p>æ€ä¹ˆæ ·ï¼Œè¿™ä¸ªæ£€æŸ¥ç»“æœæ˜ç æ ‡ä»·ï¼Œç«¥åŸæ— æ¬ºçŸ£ï¼</p>
<h3 id="ä½¿ç”¨-phpcbf-ä¿®ç†ä»£ç "><a href="#ä½¿ç”¨-phpcbf-ä¿®ç†ä»£ç " class="headerlink" title="ä½¿ç”¨ phpcbf ä¿®ç†ä»£ç "></a>ä½¿ç”¨ phpcbf ä¿®ç†ä»£ç </h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// æŒ‡å®šæ–‡ä»¶ä¿®ç†</span><br><span class="line">$ phpcbf ./src/Test.php</span><br></pre></td></tr></table></figure>
<h3 id="ä¿®ç†åçš„ä»£ç æ ·å¼"><a href="#ä¿®ç†åçš„ä»£ç æ ·å¼" class="headerlink" title="ä¿®ç†åçš„ä»£ç æ ·å¼"></a>ä¿®ç†åçš„ä»£ç æ ·å¼</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> <span class="title">Nilnice</span>\<span class="title">Acme</span>;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Finder</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">const</span> IGNORE_VCS_FILES = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">const</span> IGNORE_DOT_FILES = <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="variable">$ignore</span> = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt; ignore = <span class="built_in">static</span>::IGNORE_VCS_FILES | <span class="built_in">static</span>::IGNORE_DOT_FILES ;</span><br><span class="line"></span><br><span class="line">    &#125;<span class="comment">//end __construct()</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getIterator</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="number">0</span> === count(<span class="keyword">$this</span>-&gt;dirs)&amp;&amp;<span class="number">0</span> === count(<span class="keyword">$this</span>-&gt;iterators)) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> \<span class="built_in">LogicException</span>(<span class="string">&#x27;You must call one of in() or append() methods before iterating over a Finder.&#x27;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (<span class="number">1</span> === count(<span class="keyword">$this</span>-&gt;dirs) &amp;&amp;<span class="number">0</span> === count(<span class="keyword">$this</span>-&gt;iterators)) &#123;</span><br><span class="line">            <span class="keyword">return</span>   <span class="keyword">$this</span> -&gt;searchInDirectory(<span class="keyword">$this</span>-&gt;dirs[<span class="number">0</span>]);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="variable">$iterator</span> = <span class="keyword">new</span> \<span class="built_in">AppendIterator</span>();</span><br><span class="line">        <span class="keyword">foreach</span> (<span class="keyword">$this</span>-&gt; dirs        <span class="keyword">as</span> <span class="variable">$dir</span>) &#123;</span><br><span class="line">            <span class="variable">$iterator</span>-&gt;append(<span class="keyword">$this</span>-&gt;searchInDirectory(<span class="variable">$dir</span>));</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">foreach</span> (<span class="keyword">$this</span>-&gt;iterators <span class="keyword">as</span> <span class="variable">$it</span>) &#123;</span><br><span class="line">            <span class="variable">$iterator</span>-&gt;append(<span class="variable">$it</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span><span class="variable">$iterator</span>;</span><br><span class="line"></span><br><span class="line">    &#125;<span class="comment">//end getIterator()</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;<span class="comment">//end class</span></span><br><span class="line"><span class="comment">// æ­¤å¤„å¤šä¸€ç©ºè¡Œ</span></span><br></pre></td></tr></table></figure>
<h1 id="PHP-Coding-Standards-Fixer"><a href="#PHP-Coding-Standards-Fixer" class="headerlink" title="PHP Coding Standards Fixer"></a>PHP Coding Standards Fixer</h1><blockquote>
<ul>
<li><a href="http://cs.sensiolabs.org/">PHP Coding Standards Fixer Website</a></li>
<li><a href="https://github.com/FriendsOfPHP/PHP-CS-Fixer">PHP Coding Standards Fixer GitHub</a></li>
</ul>
</blockquote>
<h2 id="Fixer-å®‰è£…"><a href="#Fixer-å®‰è£…" class="headerlink" title="Fixer å®‰è£…"></a>Fixer å®‰è£…</h2><h3 id="Curl-æˆ–-Wget-æ–¹å¼å®‰è£…"><a href="#Curl-æˆ–-Wget-æ–¹å¼å®‰è£…" class="headerlink" title="Curl æˆ– Wget æ–¹å¼å®‰è£…"></a>Curl æˆ– Wget æ–¹å¼å®‰è£…</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ wget http://cs.sensiolabs.org/download/php-cs-fixer-v2.phar -O php-cs-fixer</span><br><span class="line">æˆ–</span><br><span class="line">$ wget https://github.com/FriendsOfPHP/PHP-CS-Fixer/releases/download/v2.10.2/php-cs-fixer.phar -O php-cs-fixer</span><br><span class="line">æˆ–</span><br><span class="line">$ curl -L http://cs.sensiolabs.org/download/php-cs-fixer-v2.phar -o php-cs-fixer</span><br><span class="line">$ sudo chmod +x php-cs-fixer</span><br><span class="line">$ sudo mv php-cs-fixer /usr/<span class="built_in">local</span>/bin/php-cs-fixer</span><br></pre></td></tr></table></figure>
<h3 id="Composer-å®‰è£…-Fixer"><a href="#Composer-å®‰è£…-Fixer" class="headerlink" title="Composer å®‰è£… Fixer"></a>Composer å®‰è£… Fixer</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ composer global require friendsofphp/php-cs-fixer</span><br><span class="line"></span><br><span class="line">// å¦‚æœä¹‹å‰è®¾ç½®è¿‡ï¼Œå°±ä¸éœ€è¦</span><br><span class="line">$ <span class="built_in">export</span> PATH=<span class="string">&quot;<span class="variable">$PATH</span>:<span class="variable">$HOME</span>/.composer/vendor/bin&quot;</span></span><br></pre></td></tr></table></figure>
<h3 id="Homebrew-å®‰è£…-Fixer"><a href="#Homebrew-å®‰è£…-Fixer" class="headerlink" title="Homebrew å®‰è£… Fixer"></a>Homebrew å®‰è£… Fixer</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// å…ˆæœç´¢ fixer ä»¥ç¡®å®šåç§°åå†å®‰è£…</span><br><span class="line">$ brew install homebrew/php/php-cs-fixer</span><br></pre></td></tr></table></figure>
<h2 id="ä½¿ç”¨-Fixer-æ ¼å¼åŒ–ä»£ç "><a href="#ä½¿ç”¨-Fixer-æ ¼å¼åŒ–ä»£ç " class="headerlink" title="ä½¿ç”¨ Fixer æ ¼å¼åŒ–ä»£ç "></a>ä½¿ç”¨ Fixer æ ¼å¼åŒ–ä»£ç </h2><h3 id="ä½¿ç”¨-Fixer-æ ¼å¼åŒ–å‰çš„ä¸è§„èŒƒä»£ç "><a href="#ä½¿ç”¨-Fixer-æ ¼å¼åŒ–å‰çš„ä¸è§„èŒƒä»£ç " class="headerlink" title="ä½¿ç”¨ Fixer æ ¼å¼åŒ–å‰çš„ä¸è§„èŒƒä»£ç "></a>ä½¿ç”¨ Fixer æ ¼å¼åŒ–å‰çš„ä¸è§„èŒƒä»£ç </h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">declare</span>(strict_types=<span class="number">1</span>);</span><br><span class="line"><span class="keyword">namespace</span> <span class="title">A</span> ;</span><br><span class="line"><span class="keyword">use</span> <span class="title">SebastianBergmann</span>\<span class="title">CodeCoverage</span>\<span class="title">InvalidArgumentException</span> ;</span><br><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Foo</span> <span class="keyword">extends</span> <span class="title">FooBaseClass</span> <span class="keyword">implements</span></span></span><br><span class="line"><span class="class">    <span class="title">Bar1</span> ,</span></span><br><span class="line"><span class="class">    <span class="title">Bar2</span> ,</span></span><br><span class="line"><span class="class">    <span class="title">Bar3</span></span>&#123;</span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">const</span> FIRST=<span class="string">&#x27;first&#x27;</span>;</span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">const</span> SECOND=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">const</span> Z = -<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">const</span> E_FOO = <span class="number">200</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">const</span> E_BAR = <span class="number">400</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="variable">$isNull</span> = <span class="literal">null</span> ;</span><br><span class="line">    <span class="keyword">protected</span> <span class="variable">$hello</span>,     <span class="variable">$world</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$numbers</span>=<span class="keyword">array</span>(<span class="string">&#x27;one&#x27;</span>,<span class="string">&#x27;two&#x27;</span>,<span class="string">&#x27;three&#x27;</span>,<span class="string">&#x27;four&#x27;</span>,<span class="string">&#x27;five&#x27;</span>,<span class="string">&#x27;six&#x27;</span>);</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$v</span> = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$path</span> = <span class="string">&#x27;root&#x27;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">bar</span>(<span class="params"></span></span></span><br><span class="line"><span class="params"><span class="function">        <span class="variable">$v</span>, <span class="variable">$w</span> = <span class="string">&#x27;a&#x27;</span></span></span></span><br><span class="line"><span class="params"><span class="function">    </span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="variable">$y</span> = <span class="variable">$w</span>;</span><br><span class="line">        <span class="variable">$result</span> = foo(</span><br><span class="line">            <span class="string">&#x27;arg1&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;arg2&#x27;</span>,</span><br><span class="line">            <span class="number">10</span></span><br><span class="line">        );</span><br><span class="line">        <span class="keyword">switch</span> (<span class="variable">$v</span>) &#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">0</span>:</span><br><span class="line">                <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">1</span>      :</span><br><span class="line">                <span class="keyword">echo</span> <span class="string">&#x27;1&#x27;</span>;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span>  <span class="number">2</span>:</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">default</span>:</span><br><span class="line">                <span class="variable">$result</span> = <span class="number">10</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span><span class="variable">$result</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">static</span> <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">fOne</span>(<span class="params"></span></span></span><br><span class="line"><span class="params"><span class="function">        <span class="variable">$argA</span>,</span></span></span><br><span class="line"><span class="params"><span class="function">        <span class="variable">$argB</span>,</span></span></span><br><span class="line"><span class="params"><span class="function">        <span class="variable">$argC</span>,</span></span></span><br><span class="line"><span class="params"><span class="function">        <span class="variable">$argD</span>,</span></span></span><br><span class="line"><span class="params"><span class="function">        <span class="variable">$argE</span>,</span></span></span><br><span class="line"><span class="params"><span class="function">        <span class="variable">$argF</span>,</span></span></span><br><span class="line"><span class="params"><span class="function">        <span class="variable">$argG</span>,</span></span></span><br><span class="line"><span class="params"><span class="function">        <span class="variable">$argH</span></span>)</span>&#123;</span><br><span class="line">        <span class="variable">$x</span> = <span class="variable">$argA</span> + <span class="variable">$argB</span> + <span class="variable">$argC</span></span><br><span class="line">            + <span class="variable">$argD</span> + <span class="variable">$argE</span> + <span class="variable">$argF</span></span><br><span class="line">            + <span class="variable">$argG</span> + <span class="variable">$argH</span>;</span><br><span class="line">        <span class="keyword">list</span>(<span class="variable">$field1</span>, <span class="variable">$field2</span>,</span><br><span class="line">            <span class="variable">$field3</span>, <span class="variable">$filed4</span>,</span><br><span class="line">            <span class="variable">$field5</span>, <span class="variable">$field6</span>) = explode(<span class="string">&#x27;,&#x27;</span>, <span class="variable">$x</span>);</span><br><span class="line">        fTwo(</span><br><span class="line">            <span class="variable">$argA</span>,</span><br><span class="line">            <span class="variable">$argB</span>,</span><br><span class="line">            <span class="variable">$argC</span>,</span><br><span class="line">            fThree(</span><br><span class="line">                <span class="variable">$argD</span>,</span><br><span class="line">                    <span class="variable">$argE</span>,</span><br><span class="line">                    <span class="variable">$argF</span>,</span><br><span class="line">                    <span class="variable">$argG</span>,</span><br><span class="line">                <span class="variable">$argH</span></span><br><span class="line">            )</span><br><span class="line">        );</span><br><span class="line">        <span class="variable">$z</span> = <span class="variable">$argA</span> === <span class="string">&#x27;Some string&#x27;</span></span><br><span class="line">            ? <span class="string">&#x27;yes&#x27;</span> : <span class="string">&#x27;no&#x27;</span>;</span><br><span class="line">        <span class="variable">$colors</span> = [</span><br><span class="line">            <span class="string">&#x27;red&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;green&#x27;</span>,</span><br><span class="line">              <span class="string">&#x27;blue&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;black&#x27;</span>  ,</span><br><span class="line">            <span class="string">&#x27;white&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;gray&#x27;</span>  ,</span><br><span class="line">        ];</span><br><span class="line">        <span class="variable">$count</span>=count(<span class="variable">$colors</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="variable">$i</span> = <span class="number">0</span>; <span class="variable">$i</span> &lt; <span class="variable">$count</span>; <span class="variable">$i</span>++) &#123;</span><br><span class="line">            <span class="variable">$colorString</span></span><br><span class="line">                = <span class="variable">$colors</span>[<span class="variable">$i</span>];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">fTwo</span>(<span class="params"></span></span></span><br><span class="line"><span class="params"><span class="function">        <span class="variable">$strA</span>,</span></span></span><br><span class="line"><span class="params"><span class="function">        <span class="variable">$strB</span>,</span></span></span><br><span class="line"><span class="params"><span class="function">        <span class="variable">$strC</span>,</span></span></span><br><span class="line"><span class="params"><span class="function">        <span class="variable">$strD</span></span></span></span><br><span class="line"><span class="params"><span class="function">    </span>)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="variable">$strA</span> === <span class="string">&#x27;one&#x27;</span></span><br><span class="line">        || <span class="variable">$strB</span> === <span class="string">&#x27;two&#x27;</span></span><br><span class="line">        || <span class="variable">$strC</span> === <span class="string">&#x27;three&#x27;</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="variable">$strA</span> + <span class="variable">$strB</span></span><br><span class="line">            + <span class="variable">$strC</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (<span class="variable">$strA</span>===<span class="string">&#x27;hello&#x27;</span>)&#123;<span class="variable">$strB</span> = <span class="string">&#x27;world&#x27;</span>;&#125;</span><br><span class="line">        <span class="keyword">if</span>(<span class="variable">$strB</span>===<span class="string">&#x27;second&#x27;</span>) &#123;</span><br><span class="line">        <span class="variable">$strA</span>=<span class="literal">null</span>;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> \<span class="built_in">InvalidArgumentException</span>(<span class="string">&#x27;Invalid argument.&#x27;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="variable">$x</span> = <span class="variable">$foo</span>-&gt;one(<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>)</span><br><span class="line">            -&gt;two(<span class="string">&#x27;c&#x27;</span>, <span class="string">&#x27;d&#x27;</span>,             <span class="string">&#x27;e&#x27;</span>)</span><br><span class="line">                -&gt;three(<span class="string">&#x27;fg&#x27;</span>)-&gt;  four();</span><br><span class="line">        <span class="variable">$y</span> = a()    -&gt; b()   -&gt;c            ();</span><br><span class="line">    <span class="keyword">return</span> <span class="variable">$strD</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">fThree</span>(<span class="params"></span></span></span><br><span class="line"><span class="params"><span class="function">        <span class="variable">$strA</span>,</span></span></span><br><span class="line"><span class="params"><span class="function">        <span class="variable">$strB</span>,</span></span></span><br><span class="line"><span class="params"><span class="function">        <span class="variable">$strC</span>,</span></span></span><br><span class="line"><span class="params"><span class="function">        <span class="variable">$strD</span>,</span></span></span><br><span class="line"><span class="params"><span class="function">        <span class="variable">$strE</span></span></span></span><br><span class="line"><span class="params"><span class="function">    </span>) </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">catch</span> (<span class="built_in">Exception</span> <span class="variable">$e</span>) &#123;</span><br><span class="line">        foo();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="comment">// do something</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable">$strA</span> + <span class="variable">$strB</span> + <span class="variable">$strC</span></span><br><span class="line">            + <span class="variable">$strD</span> + <span class="variable">$strE</span>;&#125;</span><br><span class="line">    <span class="keyword">abstract</span> <span class="keyword">protected</span> <span class="function"><span class="keyword">function</span> <span class="title">fFour</span>(<span class="params"></span>)</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">Bar</span></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">final</span> <span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"><span class="variable">$x</span>,<span class="variable">$z</span></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">global</span> <span class="variable">$k</span>, <span class="variable">$s1</span>;</span><br><span class="line">        <span class="variable">$obj</span>-&gt;foo()-&gt;bar();</span><br><span class="line">        <span class="variable">$arr</span> =<span class="keyword">array</span>(<span class="number">0</span> =&gt; <span class="string">&#x27;zero&#x27;</span>, <span class="number">1</span> =&gt; <span class="string">&#x27;one&#x27;</span>);</span><br><span class="line">        call_func(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="keyword">for</span> (<span class="variable">$i</span> = <span class="number">0</span>; <span class="variable">$i</span> &lt; <span class="variable">$x</span>; <span class="variable">$i</span>++) &#123;</span><br><span class="line">            <span class="variable">$y</span>+= (<span class="variable">$y</span>^<span class="number">0x123</span>) &lt;&lt; <span class="number">2</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="variable">$k</span> = <span class="variable">$x</span> &gt; <span class="number">15</span> ? <span class="number">1</span> : <span class="number">2</span>;</span><br><span class="line">        <span class="variable">$k</span> = <span class="variable">$x</span> ?: <span class="number">0</span>;</span><br><span class="line">        <span class="variable">$k</span> = <span class="variable">$x</span> ?? <span class="variable">$z</span>;</span><br><span class="line">        <span class="variable">$k</span> = <span class="variable">$x</span>&lt;=&gt;<span class="variable">$z</span>;</span><br><span class="line">        <span class="keyword">do</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">try</span></span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span> (!<span class="number">0</span> &gt; <span class="variable">$x</span> &amp;&amp; ! <span class="variable">$x</span> &lt; <span class="number">10</span>)&#123;</span><br><span class="line">                    <span class="keyword">while</span> (<span class="variable">$x</span> !== <span class="variable">$y</span>)&#123;</span><br><span class="line">                        <span class="variable">$x</span> = f(<span class="variable">$x</span> * <span class="number">3</span> + <span class="number">5</span>);</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="variable">$z</span> += <span class="number">2</span>;</span><br><span class="line">                &#125; <span class="keyword">elseif</span> (<span class="variable">$x</span> &gt; <span class="number">20</span>) &#123;</span><br><span class="line">                    <span class="variable">$z</span> = <span class="variable">$x</span> &lt;&lt;<span class="number">1</span>;</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="variable">$z</span> = <span class="variable">$x</span>|<span class="number">2</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="variable">$j</span> = intval(<span class="variable">$z</span>);</span><br><span class="line">                <span class="keyword">switch</span> (<span class="variable">$j</span>) &#123;</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">0</span>:</span><br><span class="line">                        <span class="variable">$s1</span>=strval(<span class="string">&#x27;100&#x27;</span>);</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">                        <span class="variable">$s1</span> = <span class="string">&#x27;two&#x27;</span>;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    <span class="keyword">default</span>:</span><br><span class="line">                        <span class="variable">$s1</span> = <span class="string">&#x27;other&#x27;</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">catch</span> (\<span class="built_in">Exception</span> <span class="variable">$e</span>) &#123;</span><br><span class="line">                <span class="variable">$t</span> = <span class="variable">$one</span>[<span class="number">0</span>];</span><br><span class="line">                <span class="variable">$u</span> = <span class="variable">$one</span>[<span class="string">&#x27;str&#x27;</span>];</span><br><span class="line">                <span class="variable">$v</span> = <span class="variable">$one</span>[<span class="variable">$x</span>[<span class="number">1</span>]];</span><br><span class="line">                <span class="keyword">echo</span> <span class="variable">$val</span>&#123;foo . <span class="variable">$num</span>&#125;[<span class="variable">$cell</span>&#123;<span class="variable">$a</span>&#125;];</span><br><span class="line">            &#125;<span class="keyword">finally</span>&#123;<span class="comment">// do something</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;<span class="keyword">while</span> (<span class="variable">$x</span> &lt;<span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">bar</span>(<span class="params"></span></span></span><br><span class="line"><span class="params"><span class="function">    <span class="variable">$x</span>,</span></span></span><br><span class="line"><span class="params"><span class="function">    <span class="variable">$y</span>,</span></span></span><br><span class="line"><span class="params"><span class="function">    <span class="keyword">int</span> <span class="variable">$z</span> = <span class="number">1</span></span></span></span><br><span class="line"><span class="params"><span class="function"></span>)</span>&#123;</span><br><span class="line">    <span class="variable">$x</span> = <span class="number">0</span>;</span><br><span class="line">    <span class="comment">// $x = 1</span></span><br><span class="line">    <span class="keyword">do</span>&#123;<span class="variable">$y</span> += <span class="number">1</span>;&#125; <span class="keyword">while</span> (<span class="variable">$y</span> &lt; <span class="number">10</span>);</span><br><span class="line">    <span class="keyword">if</span>(<span class="literal">true</span>)&#123;<span class="variable">$x</span> = <span class="number">10</span>;&#125;<span class="keyword">elseif</span> (<span class="variable">$y</span> &lt; <span class="number">10</span>) &#123;<span class="variable">$x</span>=<span class="number">5</span>;&#125;<span class="keyword">elseif</span> (<span class="literal">true</span>) &#123;<span class="variable">$x</span>=     <span class="number">5</span>  ;&#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="variable">$i</span> = <span class="number">0</span>; <span class="variable">$i</span> &lt; <span class="number">10</span>; <span class="variable">$i</span>++)&#123;<span class="variable">$yy</span>=<span class="variable">$x</span>&gt;<span class="number">2</span>?<span class="number">1</span>:<span class="number">2</span>;&#125;</span><br><span class="line">    <span class="keyword">while</span>( <span class="literal">true</span> ) &#123;<span class="variable">$x</span>=<span class="number">0</span>;&#125;</span><br><span class="line">    <span class="keyword">do</span>&#123;<span class="variable">$x</span> += <span class="number">1</span>;&#125;<span class="keyword">while</span>( <span class="literal">true</span> ) ;</span><br><span class="line">    <span class="keyword">foreach</span> ([</span><br><span class="line">        <span class="string">&#x27;a&#x27;</span>   =&gt; <span class="number">0</span>,</span><br><span class="line">        <span class="string">&#x27;b&#x27;</span>  =&gt; <span class="number">1</span>,</span><br><span class="line">        <span class="string">&#x27;c&#x27;</span>=&gt;<span class="number">2</span>,</span><br><span class="line">    ] <span class="keyword">as</span> <span class="variable">$e1</span>) &#123;<span class="keyword">echo</span><span class="variable">$e1</span>;&#125;</span><br><span class="line">    <span class="variable">$count</span> = <span class="number">10</span>;</span><br><span class="line">    <span class="variable">$x</span> = [</span><br><span class="line">        <span class="string">&#x27;x&#x27;</span>,<span class="string">&#x27;y&#x27;</span>,</span><br><span class="line">        [</span><br><span class="line">            <span class="number">1</span>  =&gt; <span class="string">&#x27;abc&#x27;</span>,</span><br><span class="line">            <span class="number">2</span> =&gt;            <span class="string">&#x27;def&#x27;</span>,</span><br><span class="line">            <span class="number">3</span>    =&gt; <span class="string">&#x27;ghi&#x27;</span></span><br><span class="line">        ],</span><br><span class="line">    ];</span><br><span class="line">    <span class="variable">$zz</span> = [</span><br><span class="line">        <span class="number">0.1</span>,</span><br><span class="line">        <span class="number">0.2</span>,</span><br><span class="line">        <span class="number">0.3</span>,</span><br><span class="line">        <span class="number">0.4</span>,</span><br><span class="line">    ];</span><br><span class="line">    <span class="variable">$x</span> = [</span><br><span class="line">        <span class="number">0</span> =&gt; <span class="string">&#x27;zero&#x27;</span>,</span><br><span class="line">        <span class="number">123</span> =&gt; <span class="string">&#x27;one two three&#x27;</span>,</span><br><span class="line">        <span class="number">25</span> =&gt; <span class="string">&#x27;two five&#x27;</span></span><br><span class="line">    ];</span><br><span class="line">    bar(<span class="number">0</span>, bar(</span><br><span class="line">        <span class="number">1</span>,</span><br><span class="line">        <span class="string">&#x27;b&#x27;</span></span><br><span class="line">    ));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foobar</span>(<span class="params"> <span class="variable">$a</span> </span>):<span class="title">Bar</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="variable">$a</span>=<span class="literal">null</span> ===<span class="variable">$a</span>?<span class="variable">$a</span>:<span class="keyword">new</span> <span class="variable">$a</span>;</span><br><span class="line">    <span class="keyword">include</span>(<span class="string">&#x27;a.php&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">emptyreturn</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable">$map</span> = array_map (<span class="function"><span class="keyword">function</span>(<span class="params"> <span class="variable">$value</span> </span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span><span class="variable">$value</span>  +   <span class="number">10</span>;</span><br><span class="line">&#125;, <span class="variable">$array</span>   );</span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line">&lt;div&gt;<span class="meta">&lt;?=</span> foo() <span class="meta">?&gt;</span>&lt;/div&gt;</span><br></pre></td></tr></table></figure>
<h3 id="è‡ªå®šä¹‰ä»£ç ä¿®å¤æ ¼å¼"><a href="#è‡ªå®šä¹‰ä»£ç ä¿®å¤æ ¼å¼" class="headerlink" title="è‡ªå®šä¹‰ä»£ç ä¿®å¤æ ¼å¼"></a>è‡ªå®šä¹‰ä»£ç ä¿®å¤æ ¼å¼</h3><blockquote>
<p>åˆ›å»º <code>.php_cs</code> æ–‡ä»¶ï¼Œå¹¶å†™å…¥ä»¥ä¸‹å†…å®¹ã€‚</p>
</blockquote>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">require</span> <span class="keyword">__DIR__</span> . <span class="string">&#x27;/vendor/autoload.php&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">use</span> <span class="title">PhpCsFixer</span>\<span class="title">Config</span>;</span><br><span class="line"><span class="keyword">use</span> <span class="title">PhpCsFixer</span>\<span class="title">Finder</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable">$finder</span> = Finder::create()-&gt;in(<span class="keyword">__DIR__</span> . <span class="string">&#x27;/src&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> Config::create()</span><br><span class="line">    -&gt;setRiskyAllowed(<span class="literal">true</span>)</span><br><span class="line">    -&gt;setCacheFile(<span class="keyword">__DIR__</span> . <span class="string">&#x27;/.php_cs.cache&#x27;</span>)</span><br><span class="line">    -&gt;setRules([</span><br><span class="line">        <span class="string">&#x27;@PSR2&#x27;</span> =&gt; <span class="literal">true</span>, <span class="comment">// ä½¿ç”¨ PSR2 æ ‡å‡†</span></span><br><span class="line">        <span class="string">&#x27;array_syntax&#x27;</span> =&gt; [</span><br><span class="line">            <span class="string">&#x27;syntax&#x27;</span> =&gt; <span class="string">&#x27;short&#x27;</span>, <span class="comment">// æ•°ç»„ä½¿ç”¨çŸ­è¯­æ³•</span></span><br><span class="line">        ],</span><br><span class="line">        <span class="string">&#x27;binary_operator_spaces&#x27;</span> =&gt; [</span><br><span class="line">            <span class="string">&#x27;align_double_arrow&#x27;</span> =&gt; <span class="literal">false</span>, <span class="comment">// ä¸å¯¹é½åŒç®­å¤´æ“ä½œç¬¦</span></span><br><span class="line">            <span class="string">&#x27;align_equals&#x27;</span> =&gt; <span class="literal">false</span>, <span class="comment">// ä¸å¯¹é½èµ‹å€¼æ“ä½œç¬¦</span></span><br><span class="line">        ],</span><br><span class="line">        <span class="string">&#x27;blank_line_after_namespace&#x27;</span> =&gt; <span class="literal">true</span>, <span class="comment">// å‘½åç©ºé—´ä¹‹åæœ‰ä¸€ä¸ªç©ºè¡Œ</span></span><br><span class="line">        <span class="string">&#x27;blank_line_after_opening_tag&#x27;</span> =&gt; <span class="literal">true</span>, <span class="comment">// PHP æ‰“å¼€æ ‡è®°ä¹‹åæœ‰ä¸€ä¸ªç©ºè¡Œ</span></span><br><span class="line">        <span class="string">&#x27;blank_line_before_return&#x27;</span> =&gt; <span class="literal">true</span>, <span class="comment">// return è¯­å¥ä¹‹å‰æœ‰ä¸€ä¸ªç©ºè¡Œ</span></span><br><span class="line">        <span class="string">&#x27;blank_line_before_statement&#x27;</span> =&gt; [</span><br><span class="line">            <span class="string">&#x27;statements&#x27;</span> =&gt; [</span><br><span class="line">                <span class="string">&#x27;break&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;continue&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;declare&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;return&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;throw&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;try&#x27;</span>,</span><br><span class="line">            ], <span class="comment">// è¿™äº›å£°æ˜ä¹‹å‰æœ‰ä¸€ä¸ªç©ºè¡Œ</span></span><br><span class="line">        ],</span><br><span class="line">        <span class="string">&#x27;class_attributes_separation&#x27;</span> =&gt; [</span><br><span class="line">            <span class="string">&#x27;elements&#x27;</span> =&gt; [</span><br><span class="line">                <span class="string">&#x27;const&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;method&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;property&#x27;</span>,</span><br><span class="line">            ], <span class="comment">// ç±»çš„è¿™äº›å…ƒç´ åˆ†å¼€ï¼Œä¹Ÿå°±æ˜¯å…ƒç´ ä¹‹é—´åŠ ä¸Šç©ºè¡Œ</span></span><br><span class="line">        ],</span><br><span class="line">        <span class="string">&#x27;dir_constant&#x27;</span> =&gt; <span class="literal">true</span>, <span class="comment">// å°† dirname(__FILE__) æ›¿æ¢æˆ __DIR__</span></span><br><span class="line">        <span class="string">&#x27;include&#x27;</span> =&gt; <span class="literal">true</span>, <span class="comment">// å°† include(&#x27;a.php&#x27;) æ›¿æ¢æˆ include &#x27;a.php&#x27;</span></span><br><span class="line">        <span class="string">&#x27;is_null&#x27;</span> =&gt; <span class="literal">true</span>, <span class="comment">// å°† is_null($a) æ›¿æ¢æˆ null === $a</span></span><br><span class="line">        <span class="string">&#x27;linebreak_after_opening_tag&#x27;</span> =&gt; <span class="literal">true</span>,</span><br><span class="line">        <span class="string">&#x27;list_syntax&#x27;</span> =&gt; [</span><br><span class="line">            <span class="string">&#x27;syntax&#x27;</span> =&gt; <span class="string">&#x27;long&#x27;</span>, <span class="comment">// list ä½¿ç”¨ long è¯­æ³•</span></span><br><span class="line">        ],</span><br><span class="line">        <span class="string">&#x27;lowercase_constants&#x27;</span> =&gt; <span class="literal">true</span>, <span class="comment">// å¸¸é‡ true, false, null ä½¿ç”¨å°å†™</span></span><br><span class="line">        <span class="string">&#x27;lowercase_keywords&#x27;</span> =&gt; <span class="literal">true</span>, <span class="comment">// PHP å…³é”®å­—ä½¿ç”¨å°å†™</span></span><br><span class="line">        <span class="string">&#x27;method_chaining_indentation&#x27;</span> =&gt; <span class="literal">true</span>, <span class="comment">// æ–¹æ³•é“¾å¼è°ƒç”¨ä¸éœ€è¦ç¼©è¿›</span></span><br><span class="line">        <span class="string">&#x27;modernize_types_casting&#x27;</span> =&gt; <span class="literal">true</span>, <span class="comment">// å°† *val å‡½æ•°åšå¯¹åº”ç±»å‹çš„å¼ºåˆ¶è½¬æ¢</span></span><br><span class="line">        <span class="string">&#x27;new_with_braces&#x27;</span> =&gt; <span class="literal">true</span>, <span class="comment">// å®ä¾‹åŒ–ç±»æ—¶å¸¦ä¸Šæ‹¬å·</span></span><br><span class="line">        <span class="string">&#x27;no_blank_lines_after_class_opening&#x27;</span> =&gt; <span class="literal">true</span>, <span class="comment">// ç±»å·¦å¤§æ‹¬å·åæ²¡æœ‰ç©ºè¡Œ</span></span><br><span class="line">        <span class="string">&#x27;no_blank_lines_before_namespace&#x27;</span> =&gt; <span class="literal">false</span>, <span class="comment">// å‘½åç©ºé—´ä¹‹å‰æ²¡æœ‰ç©¿è¡Œ</span></span><br><span class="line">        <span class="string">&#x27;no_closing_tag&#x27;</span> =&gt; <span class="literal">true</span>, <span class="comment">// çº¯ PHP æ–‡ä»¶ä¸éœ€è¦é—­åˆæ ‡è®°</span></span><br><span class="line">        <span class="string">&#x27;no_multiline_whitespace_around_double_arrow&#x27;</span> =&gt; <span class="literal">true</span>, <span class="comment">// ç®­å¤´æ“ä½œç¬¦å‰åæ²¡æœ‰å¤šä½™çš„ç©ºæ ¼</span></span><br><span class="line">        <span class="string">&#x27;multiline_whitespace_before_semicolons&#x27;</span> =&gt; <span class="literal">true</span>, <span class="comment">// ç§»é™¤ç»“æŸåˆ†å·ä¹‹å‰çš„å¤šä½™ç©ºè¡Œ</span></span><br><span class="line">        <span class="string">&#x27;no_null_property_initialization&#x27;</span> =&gt; <span class="literal">true</span>, <span class="comment">// ç§»é™¤å±æ€§ç”¨ null åˆå§‹åŒ–æ˜¯çš„æ˜¾å¼æŒ‡å®š</span></span><br><span class="line">        <span class="string">&#x27;no_php4_constructor&#x27;</span> =&gt; <span class="literal">true</span>, <span class="comment">// ç§»é™¤ PHP4 é£æ ¼çš„æ„é€ æ–¹æ³•</span></span><br><span class="line">        <span class="string">&#x27;no_short_bool_cast&#x27;</span> =&gt; <span class="literal">true</span>, <span class="comment">// é‡‡ç”¨åŒæ„Ÿå¹å·è¡¨ç¤ºå¸ƒå°”æƒ…å†µçš„ä¸åº”è¯¥ä½¿ç”¨ï¼Œä¼šè½¬æ¢ä¸º (bool)</span></span><br><span class="line">        <span class="string">&#x27;no_short_echo_tag&#x27;</span> =&gt; <span class="literal">false</span>, <span class="comment">// æ›¿æ¢çŸ­æ ‡è®°è¾“å‡ºä¸ºé•¿æ ‡è®°</span></span><br><span class="line">        <span class="string">&#x27;no_singleline_whitespace_before_semicolons&#x27;</span> =&gt; <span class="literal">true</span>, <span class="comment">// ç§»é™¤åˆ†å·ä¹‹å‰çš„å¤šä½™ç©ºæ ¼</span></span><br><span class="line">        <span class="string">&#x27;no_spaces_after_function_name&#x27;</span> =&gt; <span class="literal">true</span>, <span class="comment">// åœ¨è¿›è¡Œæ–¹æ³•æˆ–å‡½æ•°è°ƒç”¨æ—¶ï¼Œç§»é™¤æ–¹æ³•æˆ–å‡½æ•°åç§°ä¸å·¦æ‹¬å·ä¹‹é—´çš„ç©ºæ ¼</span></span><br><span class="line">        <span class="string">&#x27;no_spaces_around_offset&#x27;</span> =&gt; <span class="literal">true</span>, <span class="comment">// ç§»é™¤åç§»å¤§æ‹¬å·çš„ç©ºæ ¼</span></span><br><span class="line">        <span class="string">&#x27;no_spaces_inside_parenthesis&#x27;</span> =&gt; <span class="literal">true</span>, <span class="comment">// ç§»é™¤å·¦æ‹¬å·åçš„å’Œå³æ‹¬å·å‰çš„å¤šä½™ç©ºæ ¼</span></span><br><span class="line">        <span class="string">&#x27;no_superfluous_elseif&#x27;</span> =&gt; <span class="literal">true</span>, <span class="comment">// ç”¨ if æ›¿æ¢å¤šä½™çš„ elseif</span></span><br><span class="line">        <span class="string">&#x27;no_trailing_whitespace&#x27;</span> =&gt; <span class="literal">true</span>, <span class="comment">// ç§»é™¤æœ«è¡Œçš„å°¾éšç©ºæ ¼</span></span><br><span class="line">        <span class="string">&#x27;no_trailing_whitespace_in_comment&#x27;</span> =&gt; <span class="literal">true</span>, <span class="comment">// ç§»é™¤æ³¨é‡Šæœ«è¡Œçš„å°¾éšç©ºæ ¼</span></span><br><span class="line">        <span class="string">&#x27;no_unneeded_control_parentheses&#x27;</span> =&gt; [</span><br><span class="line">            <span class="string">&#x27;statements&#x27;</span> =&gt; [</span><br><span class="line">                <span class="string">&#x27;break&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;clone&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;continue&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;echo_print&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;return&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;switch_case&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;yield&#x27;</span>,</span><br><span class="line">            ], <span class="comment">// ç§»é™¤æ§åˆ¶è¯­å¥å‘¨å›´ä¸éœ€è¦çš„æ‹¬å·</span></span><br><span class="line">        ],</span><br><span class="line">        <span class="string">&#x27;no_useless_return&#x27;</span> =&gt; <span class="literal">true</span>, <span class="comment">// å°† return; æ›¿æ¢æˆç©º</span></span><br><span class="line">        <span class="string">&#x27;no_whitespace_in_blank_line&#x27;</span> =&gt; <span class="literal">true</span>, <span class="comment">// ç§»é™¤ç©ºç™½è¡Œæœ«å°¾çš„ç©ºæ ¼</span></span><br><span class="line">        <span class="string">&#x27;not_operator_with_space&#x27;</span> =&gt; <span class="literal">false</span>, <span class="comment">// é€»è¾‘éæ“ä½œç¬¦å‰åæœ‰ä¸€ä¸ªç©ºæ ¼</span></span><br><span class="line">        <span class="string">&#x27;not_operator_with_successor_space&#x27;</span> =&gt; <span class="literal">true</span>, <span class="comment">// é€»è¾‘éæ“ä½œç¬¦å°¾éšä¸€ä¸ªç©ºæ ¼</span></span><br><span class="line">        <span class="string">&#x27;object_operator_without_whitespace&#x27;</span> =&gt; <span class="literal">true</span>, <span class="comment">// ç§»é™¤å¯¹è±¡æ“ä½œç¬¦å‰åçš„ç©ºæ ¼</span></span><br><span class="line">        <span class="string">&#x27;short_scalar_cast&#x27;</span> =&gt; <span class="literal">true</span>, <span class="comment">// æ ‡é‡ä½¿ç”¨ç¼©å†™</span></span><br><span class="line">        <span class="string">&#x27;single_blank_line_at_eof&#x27;</span> =&gt; <span class="literal">true</span>, <span class="comment">// çº¯ PHP æ–‡ä»¶æ€»æ˜¯ä»¥ä¸€ä¸ªç©ºè¡Œæ¢è¡Œç¬¦ç»“æŸ</span></span><br><span class="line">        <span class="string">&#x27;single_blank_line_before_namespace&#x27;</span> =&gt; <span class="literal">true</span>, <span class="comment">// å‘½åç©ºé—´ä¹‹å‰æœ‰ä¸€ä¸ªç©ºè¡Œ</span></span><br><span class="line">        <span class="string">&#x27;single_class_element_per_statement&#x27;</span> =&gt; [</span><br><span class="line">            <span class="string">&#x27;elements&#x27;</span> =&gt; [</span><br><span class="line">                <span class="string">&#x27;const&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;property&#x27;</span>,</span><br><span class="line">            ], <span class="comment">// ç±»å…ƒç´ çš„æ¯ä¸ªå£°æ˜æœ‰è‡ªå·±çš„å…³é”®å­—</span></span><br><span class="line">        ],</span><br><span class="line">        <span class="string">&#x27;single_import_per_statement&#x27;</span> =&gt; <span class="literal">true</span>, <span class="comment">// å¯¼å…¥çš„æ¯ä¸ªå£°æ˜æœ‰è‡ªå·±çš„å…³é”®å­—</span></span><br><span class="line">        <span class="string">&#x27;single_line_after_imports&#x27;</span> =&gt; <span class="literal">true</span>, <span class="comment">// æ¯ä¸ªå‘½åç©ºé—´çš„ use ç‹¬å ä¸€è¡Œï¼Œæœ€åä¸€ä¸ª use åæœ‰ä¸€ä¸ªç©ºè¡Œ</span></span><br><span class="line">        <span class="string">&#x27;single_quote&#x27;</span> =&gt; <span class="literal">true</span>, <span class="comment">// ç®€å•å­—ç¬¦ä¸²çš„åŒå¼•å·è½¬æ¢ä¸ºå•å¼•å·</span></span><br><span class="line">        <span class="string">&#x27;standardize_not_equals&#x27;</span> =&gt; <span class="literal">true</span>, <span class="comment">// å°† &lt;&gt; æ›¿æ¢ä¸º !=</span></span><br><span class="line">        <span class="string">&#x27;strict_comparison&#x27;</span> =&gt; <span class="literal">true</span>, <span class="comment">// æ¯”è¾ƒä½¿ç”¨ä¸¥æ ¼åŒ–</span></span><br><span class="line">        <span class="string">&#x27;strict_param&#x27;</span> =&gt; <span class="literal">true</span>, <span class="comment">// å‚æ•°ä½¿ç”¨ä¸¥æ ¼åŒ–</span></span><br><span class="line">        <span class="string">&#x27;switch_case_space&#x27;</span> =&gt; <span class="literal">true</span>, <span class="comment">// ç§»é™¤å†’å·å’Œ case value ä¹‹é—´çš„å¤šä½™ç©ºæ ¼</span></span><br><span class="line">        <span class="string">&#x27;ternary_operator_spaces&#x27;</span> =&gt; <span class="literal">true</span>, <span class="comment">// ç§»é™¤ä¸‰å…ƒè¿ç®—ç¬¦å‘¨å›´å¤šä½™çš„ç©ºæ ¼</span></span><br><span class="line">        <span class="string">&#x27;ternary_to_null_coalescing&#x27;</span> =&gt; <span class="literal">true</span>, <span class="comment">// ä½¿ç”¨ null åˆå¹¶è¿ç®—ç¬¦ ?? åœ¨å¯ä»¥çš„åœ°æ–¹</span></span><br><span class="line">        <span class="string">&#x27;trailing_comma_in_multiline_array&#x27;</span> =&gt; <span class="literal">true</span>, <span class="comment">// å¤šä¸ªæ•°ç»„å…ƒç´ çš„æœ€åä¸€ä¸ªå…ƒç´ åæœ‰ä¸€ä¸ªé€—å·</span></span><br><span class="line">        <span class="string">&#x27;trim_array_spaces&#x27;</span> =&gt; <span class="literal">true</span>, <span class="comment">// ç§»é™¤æ•°ç»„é¦–å°¾å…ƒç´ å¤šä½™çš„ç©ºæ ¼</span></span><br><span class="line">        <span class="string">&#x27;unary_operator_spaces&#x27;</span> =&gt; <span class="literal">true</span>, <span class="comment">// ä¸€å…ƒæ“ä½œç¬¦ç´§æŒ¨æ“ä½œé¡¹ï¼Œä¸éœ€è¦ç©ºæ ¼åˆ†å¼€</span></span><br><span class="line">        <span class="string">&#x27;visibility_required&#x27;</span> =&gt; <span class="literal">true</span>, <span class="comment">// è®¿é—®ä¿®é¥°ç¬¦æ”¾ç½®åœ¨å±æ€§æ–¹æ³•å‰ï¼Œabstract å’Œ final æ”¾ç½®åœ¨è®¿é—®ä¿®é¥°ç¬¦å‰é¢ï¼Œstatic æ”¾ç½®åœ¨è®¿é—®ä¿®é¥°ç¬¦å</span></span><br><span class="line">        <span class="string">&#x27;whitespace_after_comma_in_array&#x27;</span> =&gt; <span class="literal">true</span>, <span class="comment">// æ•°ç»„çš„æ¯ä¸ªå…ƒç´ é€—å·åé¢æœ‰ä¸€ä¸ªç©ºæ ¼</span></span><br><span class="line">    ])</span><br><span class="line">    -&gt;setFinder(<span class="variable">$finder</span>);</span><br></pre></td></tr></table></figure>
<h3 id="æ‰§è¡Œæ ¼å¼åŒ–"><a href="#æ‰§è¡Œæ ¼å¼åŒ–" class="headerlink" title="æ‰§è¡Œæ ¼å¼åŒ–"></a>æ‰§è¡Œæ ¼å¼åŒ–</h3><blockquote>
<ul>
<li>æ ¼å¼åŒ–æœŸé—´ <code>php-cs-fixer</code> ä¼šè‡ªåŠ¨åˆ›å»º <code>.php_cs.cache</code> æ–‡ä»¶</li>
<li>ä¸åŒçš„ä»£ç é‡å’Œå¤æ‚ç¨‹åº¦ä¼šå½±å“æ‰§è¡Œçš„æ—¶é•¿</li>
</ul>
</blockquote>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// æŒ‡å®šæ–‡ä»¶è¿›è¡Œæ ¼å¼åŒ–</span><br><span class="line">$ php-cs-fixer fix ./src/Test.php</span><br></pre></td></tr></table></figure>
<h3 id="æ ¼å¼åŒ–åçš„ä»£ç "><a href="#æ ¼å¼åŒ–åçš„ä»£ç " class="headerlink" title="æ ¼å¼åŒ–åçš„ä»£ç "></a>æ ¼å¼åŒ–åçš„ä»£ç </h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">declare</span>(strict_types=<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> <span class="title">A</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">use</span> <span class="title">SebastianBergmann</span>\<span class="title">CodeCoverage</span>\<span class="title">InvalidArgumentException</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Foo</span> <span class="keyword">extends</span> <span class="title">FooBaseClass</span> <span class="keyword">implements</span></span></span><br><span class="line"><span class="class">    <span class="title">Bar1</span>,</span></span><br><span class="line"><span class="class">    <span class="title">Bar2</span>,</span></span><br><span class="line"><span class="class">    <span class="title">Bar3</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">const</span> FIRST = <span class="string">&#x27;first&#x27;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">const</span> SECOND = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">const</span> Z = -<span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">const</span> E_FOO = <span class="number">200</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">const</span> E_BAR = <span class="number">400</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="variable">$isNull</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> <span class="variable">$hello</span>;</span><br><span class="line">    <span class="keyword">protected</span> <span class="variable">$world</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$numbers</span> = [<span class="string">&#x27;one&#x27;</span>, <span class="string">&#x27;two&#x27;</span>, <span class="string">&#x27;three&#x27;</span>, <span class="string">&#x27;four&#x27;</span>, <span class="string">&#x27;five&#x27;</span>, <span class="string">&#x27;six&#x27;</span>];</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$v</span> = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$path</span> = <span class="string">&#x27;root&#x27;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">bar</span>(<span class="params"></span></span></span><br><span class="line"><span class="params"><span class="function">        <span class="variable">$v</span>,</span></span></span><br><span class="line"><span class="params"><span class="function">        <span class="variable">$w</span> = <span class="string">&#x27;a&#x27;</span></span></span></span><br><span class="line"><span class="params"><span class="function">    </span>) </span>&#123;</span><br><span class="line">        <span class="variable">$y</span> = <span class="variable">$w</span>;</span><br><span class="line">        <span class="variable">$result</span> = foo(</span><br><span class="line">            <span class="string">&#x27;arg1&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;arg2&#x27;</span>,</span><br><span class="line">            <span class="number">10</span></span><br><span class="line">        );</span><br><span class="line">        <span class="keyword">switch</span> (<span class="variable">$v</span>) &#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">0</span>:</span><br><span class="line">                <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">                <span class="keyword">echo</span> <span class="string">&#x27;1&#x27;</span>;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span>  <span class="number">2</span>:</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">default</span>:</span><br><span class="line">                <span class="variable">$result</span> = <span class="number">10</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span><span class="variable">$result</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">fOne</span>(<span class="params"></span></span></span><br><span class="line"><span class="params"><span class="function">        <span class="variable">$argA</span>,</span></span></span><br><span class="line"><span class="params"><span class="function">        <span class="variable">$argB</span>,</span></span></span><br><span class="line"><span class="params"><span class="function">        <span class="variable">$argC</span>,</span></span></span><br><span class="line"><span class="params"><span class="function">        <span class="variable">$argD</span>,</span></span></span><br><span class="line"><span class="params"><span class="function">        <span class="variable">$argE</span>,</span></span></span><br><span class="line"><span class="params"><span class="function">        <span class="variable">$argF</span>,</span></span></span><br><span class="line"><span class="params"><span class="function">        <span class="variable">$argG</span>,</span></span></span><br><span class="line"><span class="params"><span class="function">        <span class="variable">$argH</span></span></span></span><br><span class="line"><span class="params"><span class="function">    </span>) </span>&#123;</span><br><span class="line">        <span class="variable">$x</span> = <span class="variable">$argA</span> + <span class="variable">$argB</span> + <span class="variable">$argC</span></span><br><span class="line">            + <span class="variable">$argD</span> + <span class="variable">$argE</span> + <span class="variable">$argF</span></span><br><span class="line">            + <span class="variable">$argG</span> + <span class="variable">$argH</span>;</span><br><span class="line">        <span class="keyword">list</span>(<span class="variable">$field1</span>, <span class="variable">$field2</span>,</span><br><span class="line">            <span class="variable">$field3</span>, <span class="variable">$filed4</span>,</span><br><span class="line">            <span class="variable">$field5</span>, <span class="variable">$field6</span>) = explode(<span class="string">&#x27;,&#x27;</span>, <span class="variable">$x</span>);</span><br><span class="line">        fTwo(</span><br><span class="line">            <span class="variable">$argA</span>,</span><br><span class="line">            <span class="variable">$argB</span>,</span><br><span class="line">            <span class="variable">$argC</span>,</span><br><span class="line">            fThree(</span><br><span class="line">                <span class="variable">$argD</span>,</span><br><span class="line">                    <span class="variable">$argE</span>,</span><br><span class="line">                    <span class="variable">$argF</span>,</span><br><span class="line">                    <span class="variable">$argG</span>,</span><br><span class="line">                <span class="variable">$argH</span></span><br><span class="line">            )</span><br><span class="line">        );</span><br><span class="line">        <span class="variable">$z</span> = <span class="variable">$argA</span> === <span class="string">&#x27;Some string&#x27;</span></span><br><span class="line">            ? <span class="string">&#x27;yes&#x27;</span> : <span class="string">&#x27;no&#x27;</span>;</span><br><span class="line">        <span class="variable">$colors</span> = [</span><br><span class="line">            <span class="string">&#x27;red&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;green&#x27;</span>,</span><br><span class="line">              <span class="string">&#x27;blue&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;black&#x27;</span>  ,</span><br><span class="line">            <span class="string">&#x27;white&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;gray&#x27;</span>  ,</span><br><span class="line">        ];</span><br><span class="line">        <span class="variable">$count</span> = count(<span class="variable">$colors</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="variable">$i</span> = <span class="number">0</span>; <span class="variable">$i</span> &lt; <span class="variable">$count</span>; <span class="variable">$i</span>++) &#123;</span><br><span class="line">            <span class="variable">$colorString</span></span><br><span class="line">                = <span class="variable">$colors</span>[<span class="variable">$i</span>];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">fTwo</span>(<span class="params"></span></span></span><br><span class="line"><span class="params"><span class="function">        <span class="variable">$strA</span>,</span></span></span><br><span class="line"><span class="params"><span class="function">        <span class="variable">$strB</span>,</span></span></span><br><span class="line"><span class="params"><span class="function">        <span class="variable">$strC</span>,</span></span></span><br><span class="line"><span class="params"><span class="function">        <span class="variable">$strD</span></span></span></span><br><span class="line"><span class="params"><span class="function">    </span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="variable">$strA</span> === <span class="string">&#x27;one&#x27;</span></span><br><span class="line">        || <span class="variable">$strB</span> === <span class="string">&#x27;two&#x27;</span></span><br><span class="line">        || <span class="variable">$strC</span> === <span class="string">&#x27;three&#x27;</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="variable">$strA</span> + <span class="variable">$strB</span></span><br><span class="line">            + <span class="variable">$strC</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (<span class="variable">$strA</span> === <span class="string">&#x27;hello&#x27;</span>) &#123;</span><br><span class="line">            <span class="variable">$strB</span> = <span class="string">&#x27;world&#x27;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (<span class="variable">$strB</span> === <span class="string">&#x27;second&#x27;</span>) &#123;</span><br><span class="line">            <span class="variable">$strA</span> = <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> \<span class="built_in">InvalidArgumentException</span>(<span class="string">&#x27;Invalid argument.&#x27;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="variable">$x</span> = <span class="variable">$foo</span>-&gt;one(<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>)</span><br><span class="line">            -&gt;two(<span class="string">&#x27;c&#x27;</span>, <span class="string">&#x27;d&#x27;</span>, <span class="string">&#x27;e&#x27;</span>)</span><br><span class="line">            -&gt;three(<span class="string">&#x27;fg&#x27;</span>)-&gt;four();</span><br><span class="line">        <span class="variable">$y</span> = a()-&gt;b()-&gt;c();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="variable">$strD</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">fThree</span>(<span class="params"></span></span></span><br><span class="line"><span class="params"><span class="function">        <span class="variable">$strA</span>,</span></span></span><br><span class="line"><span class="params"><span class="function">        <span class="variable">$strB</span>,</span></span></span><br><span class="line"><span class="params"><span class="function">        <span class="variable">$strC</span>,</span></span></span><br><span class="line"><span class="params"><span class="function">        <span class="variable">$strD</span>,</span></span></span><br><span class="line"><span class="params"><span class="function">        <span class="variable">$strE</span></span></span></span><br><span class="line"><span class="params"><span class="function">    </span>) </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (<span class="built_in">Exception</span> <span class="variable">$e</span>) &#123;</span><br><span class="line">            foo();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="comment">// do something</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="variable">$strA</span> + <span class="variable">$strB</span> + <span class="variable">$strC</span></span><br><span class="line">            + <span class="variable">$strD</span> + <span class="variable">$strE</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">abstract</span> <span class="keyword">protected</span> <span class="function"><span class="keyword">function</span> <span class="title">fFour</span>(<span class="params"></span>)</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">Bar</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">final</span> <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"><span class="variable">$x</span>, <span class="variable">$z</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">global</span> <span class="variable">$k</span>, <span class="variable">$s1</span>;</span><br><span class="line">        <span class="variable">$obj</span>-&gt;foo()-&gt;bar();</span><br><span class="line">        <span class="variable">$arr</span> = [<span class="number">0</span> =&gt; <span class="string">&#x27;zero&#x27;</span>, <span class="number">1</span> =&gt; <span class="string">&#x27;one&#x27;</span>];</span><br><span class="line">        call_func(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="keyword">for</span> (<span class="variable">$i</span> = <span class="number">0</span>; <span class="variable">$i</span> &lt; <span class="variable">$x</span>; <span class="variable">$i</span>++) &#123;</span><br><span class="line">            <span class="variable">$y</span> += (<span class="variable">$y</span> ^ <span class="number">0x123</span>) &lt;&lt; <span class="number">2</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="variable">$k</span> = <span class="variable">$x</span> &gt; <span class="number">15</span> ? <span class="number">1</span> : <span class="number">2</span>;</span><br><span class="line">        <span class="variable">$k</span> = <span class="variable">$x</span> ?: <span class="number">0</span>;</span><br><span class="line">        <span class="variable">$k</span> = <span class="variable">$x</span> ?? <span class="variable">$z</span>;</span><br><span class="line">        <span class="variable">$k</span> = <span class="variable">$x</span> &lt;=&gt; <span class="variable">$z</span>;</span><br><span class="line">        <span class="keyword">do</span> &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> (! <span class="number">0</span> &gt; <span class="variable">$x</span> &amp;&amp; ! <span class="variable">$x</span> &lt; <span class="number">10</span>) &#123;</span><br><span class="line">                    <span class="keyword">while</span> (<span class="variable">$x</span> !== <span class="variable">$y</span>) &#123;</span><br><span class="line">                        <span class="variable">$x</span> = f(<span class="variable">$x</span> * <span class="number">3</span> + <span class="number">5</span>);</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="variable">$z</span> += <span class="number">2</span>;</span><br><span class="line">                &#125; <span class="keyword">elseif</span> (<span class="variable">$x</span> &gt; <span class="number">20</span>) &#123;</span><br><span class="line">                    <span class="variable">$z</span> = <span class="variable">$x</span> &lt;&lt; <span class="number">1</span>;</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="variable">$z</span> = <span class="variable">$x</span> | <span class="number">2</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="variable">$j</span> = (<span class="keyword">int</span>) <span class="variable">$z</span>;</span><br><span class="line">                <span class="keyword">switch</span> (<span class="variable">$j</span>) &#123;</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">0</span>:</span><br><span class="line">                        <span class="variable">$s1</span> = (<span class="keyword">string</span>) <span class="string">&#x27;100&#x27;</span>;</span><br><span class="line"></span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">                        <span class="variable">$s1</span> = <span class="string">&#x27;two&#x27;</span>;</span><br><span class="line"></span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    <span class="keyword">default</span>:</span><br><span class="line">                        <span class="variable">$s1</span> = <span class="string">&#x27;other&#x27;</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">catch</span> (\<span class="built_in">Exception</span> <span class="variable">$e</span>) &#123;</span><br><span class="line">                <span class="variable">$t</span> = <span class="variable">$one</span>[<span class="number">0</span>];</span><br><span class="line">                <span class="variable">$u</span> = <span class="variable">$one</span>[<span class="string">&#x27;str&#x27;</span>];</span><br><span class="line">                <span class="variable">$v</span> = <span class="variable">$one</span>[<span class="variable">$x</span>[<span class="number">1</span>]];</span><br><span class="line">                <span class="keyword">echo</span> <span class="variable">$val</span>&#123;foo . <span class="variable">$num</span>&#125;[<span class="variable">$cell</span>&#123;<span class="variable">$a</span>&#125;];</span><br><span class="line">            &#125; <span class="keyword">finally</span> &#123;<span class="comment">// do something</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">while</span> (<span class="variable">$x</span> &lt; <span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">bar</span>(<span class="params"></span></span></span><br><span class="line"><span class="params"><span class="function">    <span class="variable">$x</span>,</span></span></span><br><span class="line"><span class="params"><span class="function">    <span class="variable">$y</span>,</span></span></span><br><span class="line"><span class="params"><span class="function">    <span class="keyword">int</span> <span class="variable">$z</span> = <span class="number">1</span></span></span></span><br><span class="line"><span class="params"><span class="function"></span>) </span>&#123;</span><br><span class="line">    <span class="variable">$x</span> = <span class="number">0</span>;</span><br><span class="line">    <span class="comment">// $x = 1</span></span><br><span class="line">    <span class="keyword">do</span> &#123;</span><br><span class="line">        <span class="variable">$y</span> += <span class="number">1</span>;</span><br><span class="line">    &#125; <span class="keyword">while</span> (<span class="variable">$y</span> &lt; <span class="number">10</span>);</span><br><span class="line">    <span class="keyword">if</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">        <span class="variable">$x</span> = <span class="number">10</span>;</span><br><span class="line">    &#125; <span class="keyword">elseif</span> (<span class="variable">$y</span> &lt; <span class="number">10</span>) &#123;</span><br><span class="line">        <span class="variable">$x</span> = <span class="number">5</span>;</span><br><span class="line">    &#125; <span class="keyword">elseif</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">        <span class="variable">$x</span> = <span class="number">5</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="variable">$i</span> = <span class="number">0</span>; <span class="variable">$i</span> &lt; <span class="number">10</span>; <span class="variable">$i</span>++) &#123;</span><br><span class="line">        <span class="variable">$yy</span> = <span class="variable">$x</span> &gt; <span class="number">2</span> ? <span class="number">1</span> : <span class="number">2</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">        <span class="variable">$x</span> = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">do</span> &#123;</span><br><span class="line">        <span class="variable">$x</span> += <span class="number">1</span>;</span><br><span class="line">    &#125; <span class="keyword">while</span> (<span class="literal">true</span>);</span><br><span class="line">    <span class="keyword">foreach</span> ([</span><br><span class="line">        <span class="string">&#x27;a&#x27;</span> =&gt; <span class="number">0</span>,</span><br><span class="line">        <span class="string">&#x27;b&#x27;</span> =&gt; <span class="number">1</span>,</span><br><span class="line">        <span class="string">&#x27;c&#x27;</span> =&gt; <span class="number">2</span>,</span><br><span class="line">    ] <span class="keyword">as</span> <span class="variable">$e1</span>) &#123;</span><br><span class="line">        <span class="keyword">echo</span><span class="variable">$e1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable">$count</span> = <span class="number">10</span>;</span><br><span class="line">    <span class="variable">$x</span> = [</span><br><span class="line">        <span class="string">&#x27;x&#x27;</span>, <span class="string">&#x27;y&#x27;</span>,</span><br><span class="line">        [</span><br><span class="line">            <span class="number">1</span> =&gt; <span class="string">&#x27;abc&#x27;</span>,</span><br><span class="line">            <span class="number">2</span> =&gt; <span class="string">&#x27;def&#x27;</span>,</span><br><span class="line">            <span class="number">3</span> =&gt; <span class="string">&#x27;ghi&#x27;</span>,</span><br><span class="line">        ],</span><br><span class="line">    ];</span><br><span class="line">    <span class="variable">$zz</span> = [</span><br><span class="line">        <span class="number">0.1</span>,</span><br><span class="line">        <span class="number">0.2</span>,</span><br><span class="line">        <span class="number">0.3</span>,</span><br><span class="line">        <span class="number">0.4</span>,</span><br><span class="line">    ];</span><br><span class="line">    <span class="variable">$x</span> = [</span><br><span class="line">        <span class="number">0</span> =&gt; <span class="string">&#x27;zero&#x27;</span>,</span><br><span class="line">        <span class="number">123</span> =&gt; <span class="string">&#x27;one two three&#x27;</span>,</span><br><span class="line">        <span class="number">25</span> =&gt; <span class="string">&#x27;two five&#x27;</span>,</span><br><span class="line">    ];</span><br><span class="line">    bar(<span class="number">0</span>, bar(</span><br><span class="line">        <span class="number">1</span>,</span><br><span class="line">        <span class="string">&#x27;b&#x27;</span></span><br><span class="line">    ));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foobar</span>(<span class="params"><span class="variable">$a</span></span>):<span class="title">Bar</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="variable">$a</span> = <span class="literal">null</span> === <span class="variable">$a</span> ? <span class="variable">$a</span> : <span class="keyword">new</span> <span class="variable">$a</span>();</span><br><span class="line">    <span class="keyword">include</span> <span class="string">&#x27;a.php&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">emptyreturn</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable">$map</span> = array_map(<span class="function"><span class="keyword">function</span> (<span class="params"><span class="variable">$value</span></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span><span class="variable">$value</span> + <span class="number">10</span>;</span><br><span class="line">&#125;, <span class="variable">$array</span>);</span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line">&lt;div&gt;<span class="meta">&lt;?=</span> foo() <span class="meta">?&gt;</span>&lt;/div&gt;</span><br></pre></td></tr></table></figure>
<h1 id="ç»“è®º"><a href="#ç»“è®º" class="headerlink" title="ç»“è®º"></a>ç»“è®º</h1><h2 id="åŸå§‹ä»£ç "><a href="#åŸå§‹ä»£ç " class="headerlink" title="åŸå§‹ä»£ç "></a>åŸå§‹ä»£ç </h2><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$result</span> = [];</span><br><span class="line"><span class="variable">$array</span> = [</span><br><span class="line">    <span class="string">&#x27;x&#x27;</span> =&gt;     <span class="number">0</span>  ,</span><br><span class="line">        <span class="string">&#x27;a&#x27;</span> =&gt;     <span class="number">1</span>  ,</span><br><span class="line">            <span class="string">&#x27;b&#x27;</span> =&gt;     <span class="number">2</span>  ,</span><br><span class="line">                <span class="string">&#x27;c&#x27;</span> =&gt;     <span class="number">3</span>  ,</span><br><span class="line">                    <span class="string">&#x27;d&#x27;</span> =&gt;     <span class="number">4</span>                   ,</span><br><span class="line">                <span class="string">&#x27;e&#x27;</span> =&gt;     <span class="number">5</span>  ,</span><br><span class="line">            <span class="string">&#x27;f&#x27;</span> =&gt;     <span class="number">6</span>  ,</span><br><span class="line">        <span class="string">&#x27;g&#x27;</span> =&gt;     <span class="number">7</span>  ,</span><br><span class="line">    <span class="string">&#x27;y&#x27;</span> =&gt;     <span class="number">8</span>  ,</span><br><span class="line"><span class="string">&#x27;z&#x27;</span> =&gt; <span class="number">9</span>,                ];</span><br><span class="line"><span class="keyword">foreach</span> (<span class="variable">$array</span> <span class="keyword">as</span> <span class="variable">$key</span> =&gt; <span class="variable">$val</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (in_array(<span class="variable">$key</span>, [<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>], <span class="literal">true</span>)) &#123;</span><br><span class="line">        <span class="keyword">continue</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable">$result</span>[<span class="variable">$key</span>] = <span class="variable">$val</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="PHP-CodeSniffer-æ ¼å¼åŒ–"><a href="#PHP-CodeSniffer-æ ¼å¼åŒ–" class="headerlink" title="PHP_CodeSniffer æ ¼å¼åŒ–"></a>PHP_CodeSniffer æ ¼å¼åŒ–</h2><p>æ‰§è¡Œ <code>phpcbf ./src/Test.php</code> åï¼š</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$result</span> = [];</span><br><span class="line"><span class="variable">$array</span>  = [</span><br><span class="line">    <span class="string">&#x27;x&#x27;</span> =&gt; <span class="number">0</span>  ,</span><br><span class="line">    <span class="string">&#x27;a&#x27;</span> =&gt; <span class="number">1</span>  ,</span><br><span class="line">    <span class="string">&#x27;b&#x27;</span> =&gt; <span class="number">2</span>  ,</span><br><span class="line">    <span class="string">&#x27;c&#x27;</span> =&gt; <span class="number">3</span>  ,</span><br><span class="line">    <span class="string">&#x27;d&#x27;</span> =&gt; <span class="number">4</span>        ,</span><br><span class="line">    <span class="string">&#x27;e&#x27;</span> =&gt; <span class="number">5</span>  ,</span><br><span class="line">    <span class="string">&#x27;f&#x27;</span> =&gt; <span class="number">6</span>  ,</span><br><span class="line">    <span class="string">&#x27;g&#x27;</span> =&gt; <span class="number">7</span>  ,</span><br><span class="line">    <span class="string">&#x27;y&#x27;</span> =&gt; <span class="number">8</span>  ,</span><br><span class="line">    <span class="string">&#x27;z&#x27;</span> =&gt; <span class="number">9</span>,</span><br><span class="line">];</span><br><span class="line"><span class="keyword">foreach</span> (<span class="variable">$array</span> <span class="keyword">as</span> <span class="variable">$key</span> =&gt; <span class="variable">$val</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (in_array(<span class="variable">$key</span>, [<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>], <span class="literal">true</span>)) &#123;</span><br><span class="line">        <span class="keyword">continue</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="variable">$result</span>[<span class="variable">$key</span>] = <span class="variable">$val</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="PHP-CS-Fixer-æ ¼å¼åŒ–"><a href="#PHP-CS-Fixer-æ ¼å¼åŒ–" class="headerlink" title="PHP-CS-Fixer æ ¼å¼åŒ–"></a>PHP-CS-Fixer æ ¼å¼åŒ–</h2><p>æ‰§è¡Œ <code>php-cs-fixer fix ./src/Test.php</code> åï¼š</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$result</span> = [];</span><br><span class="line"><span class="variable">$array</span> = [</span><br><span class="line">    <span class="string">&#x27;x&#x27;</span> =&gt; <span class="number">0</span>  ,</span><br><span class="line">        <span class="string">&#x27;a&#x27;</span> =&gt; <span class="number">1</span>  ,</span><br><span class="line">            <span class="string">&#x27;b&#x27;</span> =&gt; <span class="number">2</span>  ,</span><br><span class="line">                <span class="string">&#x27;c&#x27;</span> =&gt; <span class="number">3</span>  ,</span><br><span class="line">                    <span class="string">&#x27;d&#x27;</span> =&gt; <span class="number">4</span>        ,</span><br><span class="line">                <span class="string">&#x27;e&#x27;</span> =&gt; <span class="number">5</span>  ,</span><br><span class="line">            <span class="string">&#x27;f&#x27;</span> =&gt; <span class="number">6</span>  ,</span><br><span class="line">        <span class="string">&#x27;g&#x27;</span> =&gt; <span class="number">7</span>  ,</span><br><span class="line">    <span class="string">&#x27;y&#x27;</span> =&gt; <span class="number">8</span>  ,</span><br><span class="line"><span class="string">&#x27;z&#x27;</span> =&gt; <span class="number">9</span>,                ];</span><br><span class="line"><span class="keyword">foreach</span> (<span class="variable">$array</span> <span class="keyword">as</span> <span class="variable">$key</span> =&gt; <span class="variable">$val</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (in_array(<span class="variable">$key</span>, [<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>], <span class="literal">true</span>)) &#123;</span><br><span class="line">        <span class="keyword">continue</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable">$result</span>[<span class="variable">$key</span>] = <span class="variable">$val</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç»è¿‡å¯¹ä¸¤ä¸ªå·¥å…·çš„ä½¿ç”¨ï¼Œå‘ç°å„æœ‰æ‰€é•¿ï¼Œ<code>PHP_CodeSniffer</code> å›Šæ‹¬ä»£ç è´¨é‡æ£€æµ‹å’Œè‡ªåŠ¨ä¿®å¤ï¼Œè€Œ <code>PHP-CS-Fixer</code> åˆ™åªæœ‰è‡ªåŠ¨ä¿®å¤åŠŸèƒ½ï¼Œæ— è®ºå“ªç§å·¥å…·ï¼Œåœ¨æˆ‘æµ‹è¯•çš„è¿‡ç¨‹ä¸­ï¼Œéƒ½æ²¡æ³•æŠŠç”¨æˆ·ä¸»åŠ¨æ·»åŠ çš„ä¸€äº›ç©ºæ ¼ç»™åˆ©ç´¢çš„å»æ‰ï¼Œç•¥æœ‰ç‚¹å¤±æœ›ï¼ˆæˆ–è®¸æˆ‘è¿˜æ²¡æ‰¾åˆ°å¯¹åº”çš„é…ç½®ï¼Œå¦‚æœä½ æ‰¾åˆ°äº†ï¼Œéº»çƒ¦ç•™ä¸ªè¨€ï¼‰ã€‚</p>
]]></content>
      <categories>
        <category>php</category>
      </categories>
      <tags>
        <tag>php</tag>
      </tags>
  </entry>
  <entry>
    <title>PHP ä¸­çš„é”™è¯¯å’Œå¼‚å¸¸å¤„ç†</title>
    <url>/2018/04/05/php-error-exception-handler/</url>
    <content><![CDATA[<p>PHP å½“ç„¶ä¹Ÿæœ‰è‡ªå·±çš„å¼‚å¸¸å¤„ç†ï¼Œä¸è¿‡é‚£å·²ç»æ˜¯ PHP5 ä»¥åçš„äº‹äº†ã€‚å°±æˆ‘è‡ªå·±è¿™äº›å¹´å†™ç¨‹åºçš„ç°çŠ¶çœ‹ï¼Œæˆ‘åŸºæœ¬ä¸Šå°±æ²¡æœ‰çœŸæ­£æ˜ç™½ä»€ä¹ˆæ˜¯å¼‚å¸¸å¤„ç†ï¼Œç»å¸¸æŠŠå¼‚å¸¸å’Œé”™è¯¯å¤„ç†æ··ä¸ºä¸€è°ˆï¼Œå…³äºä»£ç ä¸­çš„é‚£äº›å†™æ³•ï¼Œä¸æ˜¯å†™é”™äº†ï¼Œå°±æ˜¯å†™çš„å¤ªç‰¹ä¹ˆçƒ‚äº†ã€‚æ°å¥½æœ€è¿‘åœ¨å†™ä¸€äº›ç±»æ—¶ç”¨åˆ°å¼‚å¸¸å¤„ç†äº†ï¼Œé¡ºä¾¿å°±æŠŠè¿™ä¸ªæ•´ç†ä¸‹ï¼Œä½†æ˜¯è¿™ä¸ªä»…ä»£è¡¨æˆ‘ä¸ªäººçš„ä¸€äº›ç†è§£å’Œä½¿ç”¨ï¼Œä¹Ÿå¯èƒ½æ˜¯é”™è¯¯çš„ï¼Œè¿˜è¯·è°¨æ…é˜…è¯»ã€‚</p>
<h1 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h1><h2 id="é”™è¯¯å¤„ç†å®šä¹‰"><a href="#é”™è¯¯å¤„ç†å®šä¹‰" class="headerlink" title="é”™è¯¯å¤„ç†å®šä¹‰"></a>é”™è¯¯å¤„ç†å®šä¹‰</h2><p>é”™è¯¯æ˜¯æŒ‡å¯¼è‡´ç³»ç»Ÿä¸èƒ½æŒ‰ç…§ç”¨æˆ·æ„å›¾å·¥ä½œçš„ä¸€åˆ‡åŸå› ã€äº‹ä»¶ã€‚åœ¨ç¨‹åºè®¾è®¡è¿‡ç¨‹ä¸­ï¼Œç”±äºæŸäº›é”™è¯¯çš„å­˜åœ¨ï¼Œè‡´ä½¿ç¨‹åºæ— æ³•æ­£å¸¸è¿è¡Œï¼Œå¤„ç†è¿™äº›é”™è¯¯ä»¥ä½¿ç¨‹åºæ­£ç¡®è¿è¡Œå°±ç§°ä¸ºé”™è¯¯å¤„ç†ã€‚é”™è¯¯å¤„ç†åŠŸèƒ½æ˜¯è¡¡é‡ç¼–è¯‘å™¨æ€§èƒ½çš„é‡è¦æ–¹é¢ï¼Œå®ƒåœ¨å¸®åŠ©ç¨‹åºå‘˜å°½å¿«ä¿®æ”¹ç¨‹åºæ–¹é¢èµ·åˆ°äº†éå¸¸é‡è¦çš„ä½œç”¨ã€‚</p>
<p>é”™è¯¯ç±»å‹ï¼š</p>
<ul>
<li>è¯­æ³•é”™è¯¯</li>
<li>è¯­ä¹‰é”™è¯¯</li>
<li>é€»è¾‘é”™è¯¯</li>
</ul>
<h2 id="å¼‚å¸¸å¤„ç†å®šä¹‰"><a href="#å¼‚å¸¸å¤„ç†å®šä¹‰" class="headerlink" title="å¼‚å¸¸å¤„ç†å®šä¹‰"></a>å¼‚å¸¸å¤„ç†å®šä¹‰</h2><p>ç¼–ç¨‹è¯­è¨€æˆ–è®¡ç®—æœºç¡¬ä»¶é‡Œçš„ä¸€ç§æœºåˆ¶ï¼Œç”¨äºå¤„ç†è½¯ä»¶æˆ–ä¿¡æ¯ç³»ç»Ÿä¸­å‡ºç°çš„å¼‚å¸¸çŠ¶å†µï¼ˆå³è¶…å‡ºç¨‹åºæ­£å¸¸æ‰§è¡Œæµç¨‹çš„æŸäº›ç‰¹æ®Šæ¡ä»¶ï¼‰</p>
<h2 id="é¢„å®šä¹‰çš„é”™è¯¯ä»£ç "><a href="#é¢„å®šä¹‰çš„é”™è¯¯ä»£ç " class="headerlink" title="é¢„å®šä¹‰çš„é”™è¯¯ä»£ç "></a>é¢„å®šä¹‰çš„é”™è¯¯ä»£ç </h2><p>å½“ç„¶ä½ ä¹Ÿå¯ä»¥å‚è§å®˜ç½‘çš„æ‰‹å†Œ <strong><a href="http://php.net/manual/zh/errorfunc.constants.php">é¢„å®šä¹‰å¸¸é‡</a></strong>ï¼Œæˆ‘æŠ„ä¸€éçº¯ç²¹æ˜¯ä¸ºäº†åŠ æ·±è®°å¿†ã€‚è‡³äºæ¯ç§é”™è¯¯åœ¨ä»€ä¹ˆæƒ…å†µä¸‹äº§ç”Ÿï¼Œä½ å¯ä»¥å‚çœ‹ <strong><a href="http://www.cnblogs.com/yjf512/p/5314345.html">PHPçš„é”™è¯¯æœºåˆ¶æ€»ç»“</a></strong>ã€‚</p>
<table>
<thead>
<tr>
<th>å¸¸é‡</th>
<th>å–å€¼</th>
<th>è¯´æ˜</th>
<th>å¤‡æ³¨</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>E_ERROR</code></td>
<td>1</td>
<td>è‡´å‘½çš„è¿è¡Œæ—¶é”™è¯¯ã€‚è¿™ç±»é”™è¯¯ä¸€èˆ¬æ˜¯ä¸å¯æ¢å¤çš„æƒ…å†µï¼Œä¾‹å¦‚å†…å­˜åˆ†é…å¯¼è‡´çš„é—®é¢˜ã€‚åæœæ˜¯å¯¼è‡´è„šæœ¬ç»ˆæ­¢ä¸å†ç»§ç»­è¿è¡Œ</td>
<td></td>
</tr>
<tr>
<td><code>E_WARNING</code></td>
<td>2</td>
<td>è¿è¡Œæ—¶è­¦å‘Šï¼ˆéè‡´å‘½é”™è¯¯ï¼‰ã€‚ä»…ç»™å‡ºæç¤ºä¿¡æ¯ï¼Œä½†æ˜¯è„šæœ¬ä¸ä¼šç»ˆæ­¢è¿è¡Œ</td>
<td></td>
</tr>
<tr>
<td><code>E_PARSE</code></td>
<td>4</td>
<td>ç¼–è¯‘æ—¶è¯­æ³•è§£æé”™è¯¯ã€‚è§£æé”™è¯¯ä»…ä»…ç”±åˆ†æå™¨äº§ç”Ÿ</td>
<td></td>
</tr>
<tr>
<td><code>E_NOTICE</code></td>
<td>8</td>
<td>è¿è¡Œæ—¶é€šçŸ¥ã€‚è¡¨ç¤ºè„šæœ¬é‡åˆ°å¯èƒ½ä¼šè¡¨ç°ä¸ºé”™è¯¯çš„æƒ…å†µï¼Œä½†æ˜¯åœ¨å¯ä»¥æ­£å¸¸è¿è¡Œçš„è„šæœ¬é‡Œé¢ä¹Ÿå¯èƒ½ä¼šæœ‰ç±»ä¼¼çš„é€šçŸ¥</td>
<td></td>
</tr>
<tr>
<td><code>E_CORE_ERROR</code></td>
<td>16</td>
<td>åœ¨ PHP åˆå§‹åŒ–å¯åŠ¨è¿‡ç¨‹ä¸­å‘ç”Ÿçš„è‡´å‘½é”™è¯¯ã€‚è¯¥é”™è¯¯ç±»ä¼¼ E_ERRORï¼Œä½†æ˜¯æ˜¯ç”± PHP å¼•æ“æ ¸å¿ƒäº§ç”Ÿçš„</td>
<td>since PHP 4</td>
</tr>
<tr>
<td><code>E_CORE_WARNING</code></td>
<td>32</td>
<td>PHP åˆå§‹åŒ–å¯åŠ¨è¿‡ç¨‹ä¸­å‘ç”Ÿçš„è­¦å‘Šï¼ˆéè‡´å‘½é”™è¯¯ï¼‰ã€‚ç±»ä¼¼ E_WARNINGï¼Œä½†æ˜¯æ˜¯ç”± PHP å¼•æ“æ ¸å¿ƒäº§ç”Ÿçš„</td>
<td>since PHP 4</td>
</tr>
<tr>
<td><code>E_COMPILE_ERROR</code></td>
<td>64</td>
<td>è‡´å‘½ç¼–è¯‘æ—¶é”™è¯¯ã€‚ç±»ä¼¼ E_ERRORï¼Œä½†æ˜¯æ˜¯ç”± Zend è„šæœ¬å¼•æ“äº§ç”Ÿçš„</td>
<td>since PHP 4</td>
</tr>
<tr>
<td><code>E_COMPILE_WARNING</code></td>
<td>128</td>
<td>ç¼–è¯‘æ—¶è­¦å‘Šï¼ˆéè‡´å‘½é”™è¯¯ï¼‰ã€‚ç±»ä¼¼ E_WARNINGï¼Œä½†æ˜¯æ˜¯ç”± Zend è„šæœ¬å¼•æ“äº§ç”Ÿçš„</td>
<td>since PHP 4</td>
</tr>
<tr>
<td><code>E_USER_ERROR</code></td>
<td>256</td>
<td>ç”¨æˆ·äº§ç”Ÿçš„é”™è¯¯ä¿¡æ¯ã€‚ç±»ä¼¼ E_ERRORï¼Œä½†æ˜¯æ˜¯ç”±ç”¨æˆ·è‡ªå·±åœ¨ä»£ç ä¸­ä½¿ç”¨ PHP å‡½æ•° trigger_error() æ¥äº§ç”Ÿçš„</td>
<td>since PHP 4</td>
</tr>
<tr>
<td><code>E_USER_WARNING</code></td>
<td>512</td>
<td>ç”¨æˆ·äº§ç”Ÿçš„è­¦å‘Šä¿¡æ¯ã€‚ç±»ä¼¼ E_WARNINGï¼Œä½†æ˜¯æ˜¯ç”±ç”¨æˆ·è‡ªå·±åœ¨ä»£ç ä¸­ä½¿ç”¨ PHP å‡½æ•° trigger_error() æ¥äº§ç”Ÿçš„</td>
<td>since PHP 4</td>
</tr>
<tr>
<td><code>E_USER_NOTICE</code></td>
<td>1024</td>
<td>ç”¨æˆ·äº§ç”Ÿçš„é€šçŸ¥ä¿¡æ¯ã€‚ç±»ä¼¼ E_NOTICEï¼Œä½†æ˜¯æ˜¯ç”±ç”¨æˆ·è‡ªå·±åœ¨ä»£ç ä¸­ä½¿ç”¨ PHP å‡½æ•° trigger_error() æ¥äº§ç”Ÿçš„</td>
<td>since PHP 4</td>
</tr>
<tr>
<td><code>E_STRICT</code></td>
<td>2048</td>
<td>å¯ç”¨ PHP å¯¹ä»£ç çš„ä¿®æ”¹å»ºè®®ï¼Œä»¥ç¡®ä¿ä»£ç å…·æœ‰æœ€ä½³çš„äº’æ“ä½œæ€§å’Œå‘å‰å…¼å®¹æ€§</td>
<td>since PHP 5</td>
</tr>
<tr>
<td><code>E_RECOVERABLE_ERROR</code></td>
<td>4096</td>
<td>å¯è¢«æ•æ‰çš„è‡´å‘½é”™è¯¯ã€‚å®ƒè¡¨ç¤ºå‘ç”Ÿäº†ä¸€ä¸ªå¯èƒ½éå¸¸å±é™©çš„é”™è¯¯ï¼Œä½†æ˜¯è¿˜æ²¡æœ‰å¯¼è‡´ PHP å¼•æ“å¤„äºä¸ç¨³å®šçš„çŠ¶æ€ã€‚å¦‚æœè¯¥é”™è¯¯æ²¡æœ‰è¢«ç”¨æˆ·è‡ªå®šä¹‰å¥æŸ„æ•è·ï¼ˆå‚è§ set_error_handler()ï¼‰ï¼Œå°†æˆä¸ºä¸€ä¸ª E_ERRORã€€ä»è€Œè„šæœ¬ä¼šç»ˆæ­¢è¿è¡Œ</td>
<td>since PHP 5.2.0</td>
</tr>
<tr>
<td><code>E_DEPRECATED</code></td>
<td>8192</td>
<td>è¿è¡Œæ—¶é€šçŸ¥ã€‚å¯ç”¨åå°†ä¼šå¯¹åœ¨æœªæ¥ç‰ˆæœ¬ä¸­å¯èƒ½æ— æ³•æ­£å¸¸å·¥ä½œçš„ä»£ç ç»™å‡ºè­¦å‘Š</td>
<td>since PHP 5.3.0</td>
</tr>
<tr>
<td><code>E_USER_DEPRECATED</code></td>
<td>16384</td>
<td>ç”¨æˆ·äº§å°‘çš„è­¦å‘Šä¿¡æ¯ã€‚ç±»ä¼¼ E_DEPRECATEDï¼Œä½†æ˜¯æ˜¯ç”±ç”¨æˆ·è‡ªå·±åœ¨ä»£ç ä¸­ä½¿ç”¨ PHP å‡½æ•° trigger_error() æ¥äº§ç”Ÿçš„</td>
<td>since PHP 5.3.0</td>
</tr>
<tr>
<td><code>E_ALL</code></td>
<td>30719</td>
<td><code>E_STRICT</code> å‡ºå¤–çš„æ‰€æœ‰é”™è¯¯å’Œè­¦å‘Šä¿¡æ¯</td>
<td>30719 in PHP 5.3.x, 6143 in PHP 5.2.x, 2047 previously</td>
</tr>
</tbody>
</table>
<div class="note danger">
            <ul><li>å¯ä»¥ä½¿ç”¨æŒ‰ä½è¿ç®—ç¬¦æ¥ç»„åˆè¿™äº›å€¼æˆ–è€…å±è”½æŸäº›ç±»å‹çš„é”™è¯¯ã€‚åœ¨ <code>php.ini</code> ä¹‹ä¸­ï¼Œä»… <code>|, ~, !, ^, &amp;</code> è¿™äº›æ“ä½œç¬¦ä¼šè¢«æ­£ç¡®è§£æ</li><li>ä»¥ä¸‹çº§åˆ«çš„é”™è¯¯ä¸èƒ½ç”±ç”¨æˆ·å®šä¹‰çš„å‡½æ•°æ¥å¤„ç†ï¼š<code>E_ERROR</code>ã€<code>E_PARSE</code>ã€<code>E_CORE_ERROR</code>ã€<code>E_CORE_WARNING</code>ã€<code>E_COMPILE_ERROR</code>ã€<code>E_COMPILE_WARNING</code> å’Œåœ¨è°ƒç”¨ <code>set_error_handler()</code> å‡½æ•°æ‰€åœ¨æ–‡ä»¶ä¸­äº§ç”Ÿçš„å¤§å¤šæ•° <code>E_STRICT</code></li></ul>
          </div>
<h2 id="ç›¸å…³æ–‡ç« "><a href="#ç›¸å…³æ–‡ç« " class="headerlink" title="ç›¸å…³æ–‡ç« "></a>ç›¸å…³æ–‡ç« </h2><ul>
<li><a href="http://www.laruence.com/2010/08/03/1697.html">æ·±å…¥ç†è§£PHPåŸç†ä¹‹å¼‚å¸¸æœºåˆ¶</a></li>
<li><a href="http://www.laruence.com/2012/02/02/2515.html">æˆ‘ä»¬ä»€ä¹ˆæ—¶å€™åº”è¯¥ä½¿ç”¨å¼‚å¸¸</a></li>
<li><a href="https://laravel-china.org/articles/5435/exceptions-and-errors-in-php-best-practices">PHP æœ€ä½³å®è·µä¹‹å¼‚å¸¸å’Œé”™è¯¯</a></li>
<li><a href="https://trowski.com/2015/06/24/throwable-exceptions-and-errors-in-php7/">Throwable Exceptions and Errors in PHP 7</a></li>
</ul>
<p>æ—©æœ‰äººæŠŠ PHP å„ä¸ªç‰ˆæœ¬çš„é”™è¯¯å’Œå¼‚å¸¸å¤„ç†ç±»æ ‘æ•´ç†å‡ºæ¥ä¾›æˆ‘ç­‰å‚è§‚ã€‚å¦‚æœåœ¨æœ¬åœ°æ‰§è¡Œæ­¤ä»£ç ï¼Œä¾æ®æœ¬åœ°å¯¹ PHP å®‰è£…çš„æ‰©å±•çš„ä¸åŒï¼Œä¼šæŠŠæ‰©å±•ä¸­çš„ç›¸å…³å¼‚å¸¸å¤„ç†ç±»ä¸€å¹¶æ‰“å°å‡ºæ¥</p>
<ul>
<li><a href="https://gist.github.com/mlocati/249f07b074a0de339d4d1ca980848e6a">æ‰“å°é”™è¯¯å’Œå¼‚å¸¸å¤„ç†ç±»æ ‘ä»£ç </a></li>
<li><a href="https://3v4l.org/sDMsv#output">æ‰“å°è¾“å‡ºç»“æœ</a></li>
</ul>
<h1 id="é”™è¯¯å¤„ç†"><a href="#é”™è¯¯å¤„ç†" class="headerlink" title="é”™è¯¯å¤„ç†"></a>é”™è¯¯å¤„ç†</h1><blockquote>
<ul>
<li>Note that other types of errors such as warnings and notices remain unchanged in PHP 7. Only fatal and recoverable errors throw exceptions.</li>
<li>Prior to PHP 7 alpha-2, the exception hierarchy in PHP 7 was different. Fatal and recoverable errors threw instances of EngineException, which did not inherit from Exception. Both Exception and EngineException inherited from BaseException. The hierarchy was revised with the RFC I authored, Throwable Interface. I felt switching to Throwable and Error was important to avoid confusion from classes using the suffix Exception that did not extend Exception, as well as being more concise and appealing names.</li>
</ul>
</blockquote>
<p><code>E_ERROR</code> å’Œ <code>E_RECOVERABLE_ERROR</code> çº§åˆ«çš„é”™è¯¯åœ¨ PHP7 ä¹‹å‰æ˜¯ä¸èƒ½è¢«æ•è·åˆ°çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œä½ æ— æ³•ä½¿ç”¨ <code>try...catch...</code> è¿™æ ·çš„è¯­å¥æ•è·åˆ°è¿™ç§çº§åˆ«çš„é”™è¯¯ï¼Œä½†ä¸ç®¡æ˜¯ PHP7 è¿˜æ˜¯ PHP5 å¯¹äºæœªæ•è·çš„å¼‚å¸¸ä¾ç„¶æ˜¯ä¸€ä¸ªè‡´å‘½é”™è¯¯</p>
<p>åœ¨ PHP5 ä¸­</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$object</span> = <span class="literal">null</span>;</span><br><span class="line"><span class="variable">$object</span>-&gt;method();</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»“æœ</span></span><br><span class="line">Fatal <span class="built_in">error</span>: Call to a member <span class="function"><span class="keyword">function</span> <span class="title">method</span>(<span class="params"></span>) <span class="title">on</span> <span class="title">null</span> <span class="title">in</span></span></span><br></pre></td></tr></table></figure>
<p>åœ¨ PHP7 ä¸­ï¼š</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$object</span> = <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="variable">$object</span>-&gt;method();</span><br><span class="line">&#125; <span class="keyword">catch</span> (<span class="built_in">Error</span> <span class="variable">$error</span>) &#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="variable">$error</span>-&gt;getMessage();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»“æœ</span></span><br><span class="line">Call to a member <span class="function"><span class="keyword">function</span> <span class="title">method</span>(<span class="params"></span>) <span class="title">on</span> <span class="title">null</span></span></span><br></pre></td></tr></table></figure>
<p>æ˜¯çš„ï¼ŒPHP7 å†…ç½®äº†ä¸€ä¸ªåä¸º <code>Error</code> çš„ç±»æ¥æ•è·ä¸€äº›è‡´å‘½é”™è¯¯å’Œå¼‚å¸¸äº†ï¼Œå…¶ä¸­ <code>Error</code> å’Œ <code>Exception</code> ç±»å®ç°äº† <code>Throwable</code> æ¥å£ã€‚</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment">// Throwable æ¥å£</span></span><br><span class="line"><span class="built_in">Throwable</span> &#123;</span><br><span class="line">    <span class="comment">/* Methods */</span></span><br><span class="line">    <span class="keyword">abstract</span> <span class="keyword">public</span> <span class="keyword">string</span> getMessage ( <span class="keyword">void</span> )</span><br><span class="line">    <span class="keyword">abstract</span> <span class="keyword">public</span> <span class="keyword">int</span> getCode ( <span class="keyword">void</span> )</span><br><span class="line">    <span class="keyword">abstract</span> <span class="keyword">public</span> <span class="keyword">string</span> getFile ( <span class="keyword">void</span> )</span><br><span class="line">    <span class="keyword">abstract</span> <span class="keyword">public</span> <span class="keyword">int</span> getLine ( <span class="keyword">void</span> )</span><br><span class="line">    <span class="keyword">abstract</span> <span class="keyword">public</span> <span class="keyword">array</span> getTrace ( <span class="keyword">void</span> )</span><br><span class="line">    <span class="keyword">abstract</span> <span class="keyword">public</span> <span class="keyword">string</span> getTraceAsString ( <span class="keyword">void</span> )</span><br><span class="line">    <span class="keyword">abstract</span> <span class="keyword">public</span> <span class="built_in">Throwable</span> getPrevious ( <span class="keyword">void</span> )</span><br><span class="line">    <span class="keyword">abstract</span> <span class="keyword">public</span> <span class="keyword">string</span> __toString ( <span class="keyword">void</span> )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<div class="note danger">
            <p>å¼€å‘è€…ä¸èƒ½ç›´æ¥å®ç° <code>Throwable</code> æ¥å£ï¼Œå¿…é¡»é€šè¿‡ <code>Error</code> æˆ–è€… <code>Exception</code> ç­‰ç±»å»æ‰©å±•</p>
          </div>
<p>ä¹Ÿå¯ä»¥ç”¨ä»¥ä¸‹çš„æ–¹å¼å»æ‰©å±•è‡ªå·±çš„é”™è¯¯å’Œå¼‚å¸¸ç±»ã€‚</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">TestThrowable</span> <span class="keyword">extends</span> \<span class="title">Throwable</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TestException</span> <span class="keyword">extends</span> \<span class="title">Exception</span> <span class="keyword">implements</span> <span class="title">TestThrowable</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">DemoError</span> <span class="keyword">extends</span> \<span class="title">Error</span> <span class="keyword">implements</span> <span class="title">TestThrowable</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="å¼‚å¸¸å¤„ç†"><a href="#å¼‚å¸¸å¤„ç†" class="headerlink" title="å¼‚å¸¸å¤„ç†"></a>å¼‚å¸¸å¤„ç†</h1><p>ç”±äº <code>Error</code> å’Œ <code>Exception</code> éƒ½å®ç°äº† <code>Throwable</code> æ¥å£ï¼Œé‚£ä¹ˆé—®é¢˜å°±æ¥äº†ï¼Œåœ¨ç¨‹åºä¸­æˆ‘ä»¬ç©¶ç«Ÿè¦ç”¨å“ªä¸ªï¼Ÿé€šè¿‡ä¸€äº›æœ€ä½³å®è·µæˆ‘ä»¬çŸ¥é“ï¼Œé”™è¯¯ä¸€èˆ¬æ˜¯å»çº¦æŸç¨‹åºå‘˜å’Œä»£ç è¯­æ³•ã€è¯­ä¹‰åŠé€»è¾‘æ–¹é¢çš„ï¼Œè€Œå¼‚å¸¸æ˜¯ç¨‹åºåœ¨è¿è¡Œè¿‡ç¨‹å‡ºç°çš„ä¸€äº›ä¸åˆæœŸæœ›çš„æƒ…å†µã€‚å› æ­¤ï¼Œåœ¨ä»£ç ä¸­æˆ‘ä»¬åº”å½“ä½¿ç”¨å¼‚å¸¸è€Œä¸æ˜¯é”™è¯¯ã€‚</p>
<p>PHP 7.2.0 - 7.2.3 ç‰ˆæœ¬ä¸­æä¾›çš„å†…ç½®å¼‚å¸¸ï¼š</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="built_in">Exception</span></span><br><span class="line">  ClosedGeneratorException</span><br><span class="line">  DOMException</span><br><span class="line">  <span class="built_in">ErrorException</span></span><br><span class="line">  IntlException</span><br><span class="line">  <span class="built_in">LogicException</span></span><br><span class="line">    <span class="built_in">BadFunctionCallException</span></span><br><span class="line">      <span class="built_in">BadMethodCallException</span></span><br><span class="line">    <span class="built_in">DomainException</span></span><br><span class="line">    <span class="built_in">InvalidArgumentException</span></span><br><span class="line">    <span class="built_in">LengthException</span></span><br><span class="line">    <span class="built_in">OutOfRangeException</span></span><br><span class="line">  PharException</span><br><span class="line">  ReflectionException</span><br><span class="line">  <span class="built_in">RuntimeException</span></span><br><span class="line">    <span class="built_in">OutOfBoundsException</span></span><br><span class="line">    <span class="built_in">OverflowException</span></span><br><span class="line">    PDOException</span><br><span class="line">    <span class="built_in">RangeException</span></span><br><span class="line">    <span class="built_in">UnderflowException</span></span><br><span class="line">    <span class="built_in">UnexpectedValueException</span></span><br><span class="line">  SodiumException</span><br></pre></td></tr></table></figure>
<p>å…¼å®¹ PHP5 å’Œ PHP7 çš„å¼‚å¸¸å¤„ç†</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="comment">// Code that may throw an Exception or Error.</span></span><br><span class="line">&#125; <span class="keyword">catch</span> (<span class="built_in">Throwable</span> <span class="variable">$t</span>) &#123;</span><br><span class="line">    <span class="comment">// Executed only in PHP 7, will not match in PHP 5.x.</span></span><br><span class="line">&#125; <span class="keyword">catch</span> (<span class="built_in">Exception</span> <span class="variable">$e</span>) &#123;</span><br><span class="line">    <span class="comment">// Executed only in PHP 5.x, will not be reached in PHP 7.</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="è‡ªå®šä¹‰æ•è·é”™è¯¯å’Œå¼‚å¸¸"><a href="#è‡ªå®šä¹‰æ•è·é”™è¯¯å’Œå¼‚å¸¸" class="headerlink" title="è‡ªå®šä¹‰æ•è·é”™è¯¯å’Œå¼‚å¸¸"></a>è‡ªå®šä¹‰æ•è·é”™è¯¯å’Œå¼‚å¸¸</h2><ul>
<li>æœªæ•è·çš„ <code>Error</code> å’Œ <code>Exception</code> é€šè¿‡ <code>set_exception_handler()</code> åšåç»­æ¸…ç†å’Œæ—¥å¿—è®°å½•</li>
<li>å…¶ä»–é”™è¯¯ä»ç„¶é€šè¿‡ <code>set_error_handler()</code> æ¥å¤„ç†ï¼Œåœ¨å¤„ç†çš„æ—¶å€™ä½¿ç”¨æ›´åŠ æ˜ç¡®çš„ <code>E_*</code> ç±»å‹ï¼Œå¹¶æŠ›å‡º <code>ErrorException</code> è®°å½•è°ƒç”¨æ ˆ</li>
</ul>
<p>ä»¥ä¸‹å®ä¾‹ä¸­ä½¿ç”¨ <code>set_error_handler()</code> å‡½æ•°å»æ•è·é”™è¯¯ï¼Œè®¾ç½®ä¸€ä¸ªç”¨æˆ·è‡ªå®šä¹‰çš„é”™è¯¯å¤„ç†å‡½æ•°ï¼Œè¿™é‡Œæˆ‘å°±ç²—æš´çš„æŠ›å‡º äº† <code>ErrorException</code> å¼‚å¸¸ï¼Œå½“ç„¶å®˜æ–¹æ–‡æ¡£ä¹Ÿæ˜ç¡®è¯´äº†è¿™ä¸ªå‡½æ•°ä¸èƒ½æ•è· <code>E_ERROR</code>ã€<code>E_PARSE</code>ã€<code>E_CORE_ERROR</code>ã€<code>E_CORE_WARNING</code>ã€<code>E_COMPILE_ERROR</code>ã€<code>E_COMPILE_WARNING</code> å’Œåœ¨è°ƒç”¨ <code>set_error_handler()</code> å‡½æ•°æ‰€åœ¨æ–‡ä»¶ä¸­äº§ç”Ÿçš„å¤§å¤šæ•° <code>E_STRICT</code> å¼‚å¸¸ï¼Œè¨€å¤–ä¹‹è¯­ä¹Ÿå°±æ˜¯ä»…èƒ½æ•è·ç”¨æˆ·å®šä¹‰çš„é”™è¯¯å’Œå¼‚å¸¸ã€‚ä½¿ç”¨ <code>set_exception_handler()</code> å‡½æ•°å»è®¾ç½®é»˜è®¤çš„å¼‚å¸¸å¤„ç†ç¨‹åºï¼Œç”¨åœ¨æ²¡æœ‰ç”¨ <code>try/catch</code> å—æ¥æ•è·çš„å¼‚å¸¸ï¼Œä¹Ÿå°±æ˜¯è¯´ä¸ç®¡ä½ æŠ›å‡ºçš„å¼‚å¸¸æœ‰æ²¡æœ‰äººæ•è·ï¼Œå¦‚æœæ²¡æœ‰äººæ•è·å°±ä¼šè¿›å…¥åˆ°è¯¥æ–¹æ³•ä¸­ï¼Œå¹¶ä¸”åœ¨å›è°ƒå‡½æ•°è°ƒç”¨åå¼‚å¸¸ä¼šä¸­æ­¢ã€‚ä½¿ç”¨ <code>register_shutdown_function()</code> å‡½æ•°å»æ•è· PHP çš„é”™è¯¯ï¼š<code>Fatal or Parse Error</code> ç­‰ï¼Œæ­£ç”±äºè¿™ä¸ªå‡½æ•°æ˜¯ PHP è„šæœ¬æ‰§è¡Œç»“æŸå‰çš„æœ€åä¸€ä¸ªæœ‰æ•ˆè°ƒç”¨ï¼Œæ‰€ä»¥æˆ‘ä»¬æ‰ç”¨å®ƒæ¥å®Œæˆä¸€äº›ä¸å¯æ€è®®çš„äº‹æƒ…ã€‚ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œéƒ½ä¼šåœ¨è¿™ä¸ªå‡½æ•°çš„å›è°ƒå‡½æ•°ä¸­ä½¿ç”¨ <code>error_get_last()</code> å‡½æ•°æ¥è·å–æ‰§è¡Œäº§ç”Ÿçš„é”™è¯¯ï¼Œé¡ºä¾¿è¯´ä¸€ä¸‹ï¼Œåƒè¯­æ³•è¿™æ ·çš„é”™è¯¯æ˜¯æ•è·ä¸åˆ°çš„</p>
<h3 id="æ­£å¸¸æƒ…å†µæ—¶çš„å¼‚å¸¸æ•è·"><a href="#æ­£å¸¸æƒ…å†µæ—¶çš„å¼‚å¸¸æ•è·" class="headerlink" title="æ­£å¸¸æƒ…å†µæ—¶çš„å¼‚å¸¸æ•è·"></a>æ­£å¸¸æƒ…å†µæ—¶çš„å¼‚å¸¸æ•è·</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ErrorHandler</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">register</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        error_reporting(E_ALL);</span><br><span class="line">        set_error_handler([<span class="keyword">__CLASS__</span>, <span class="string">&#x27;handleError&#x27;</span>]);</span><br><span class="line">        set_exception_handler([<span class="keyword">__CLASS__</span>, <span class="string">&#x27;handleException&#x27;</span>]);</span><br><span class="line">        register_shutdown_function([<span class="keyword">__CLASS__</span>, <span class="string">&#x27;handleShutdown&#x27;</span>]);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">handleError</span>(<span class="params"><span class="variable">$code</span>, <span class="variable">$message</span>, <span class="variable">$file</span>, <span class="variable">$line</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> \<span class="built_in">ErrorException</span>(<span class="variable">$message</span>, <span class="variable">$code</span>, <span class="number">1</span>, <span class="variable">$file</span>, <span class="variable">$line</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">handleException</span>(<span class="params"><span class="variable">$e</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="built_in">self</span>::handle(<span class="variable">$e</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">handleShutdown</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="variable">$error</span> = error_get_last();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (<span class="literal">null</span> !== <span class="variable">$error</span> &amp;&amp; <span class="built_in">self</span>::isFatal(<span class="variable">$error</span>[<span class="string">&#x27;type&#x27;</span>])) &#123;</span><br><span class="line">            <span class="built_in">self</span>::handleException(<span class="variable">$error</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> \Exception|\Throwable $e</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">handle</span>(<span class="params"><span class="variable">$e</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="variable">$message</span> = <span class="variable">$e</span>-&gt;getMessage() . PHP_EOL;</span><br><span class="line">        <span class="keyword">echo</span> <span class="variable">$message</span>;</span><br><span class="line"></span><br><span class="line">        error_log(<span class="variable">$message</span>, <span class="number">3</span>, <span class="keyword">__DIR__</span> . <span class="string">&#x27;/run.log&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">isFatal</span>(<span class="params"><span class="variable">$type</span></span>): <span class="title">bool</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="variable">$types</span> = [E_ERROR, E_CORE_ERROR, E_COMPILE_ERROR, E_PARSE];</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> in_array(<span class="variable">$type</span>, <span class="variable">$types</span>, <span class="literal">true</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">ErrorHandler::register();</span><br><span class="line"></span><br><span class="line"><span class="variable">$object</span> = <span class="literal">null</span>;</span><br><span class="line"><span class="variable">$object</span>-&gt;toArray();</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»“æœ</span></span><br><span class="line">Call to a member <span class="function"><span class="keyword">function</span> <span class="title">toArray</span>(<span class="params"></span>) <span class="title">on</span> <span class="title">null</span></span></span><br><span class="line"><span class="function">æ­¤æ—¶é”™è¯¯å·²ç»è®°å½•åˆ°æ—¥å¿—æ–‡ä»¶ä¸­</span></span><br></pre></td></tr></table></figure>
<h3 id="å†™é”™è¯­æ³•æ—¶çš„å¼‚å¸¸æ•è·"><a href="#å†™é”™è¯­æ³•æ—¶çš„å¼‚å¸¸æ•è·" class="headerlink" title="å†™é”™è¯­æ³•æ—¶çš„å¼‚å¸¸æ•è·"></a>å†™é”™è¯­æ³•æ—¶çš„å¼‚å¸¸æ•è·</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æ­¤å¤„ç•¥å» ErrorHandler ç±»ä»£ç ï¼Œè¯¦è§ä¸Šé¢</span></span><br><span class="line">ErrorHandler::register();</span><br><span class="line"></span><br><span class="line"><span class="variable">$object</span> = <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¿™å„¿æ•…æ„ä¸å†™åˆ†å·</span></span><br><span class="line"><span class="variable">$object</span>-&gt;toArray()</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»“æœ</span></span><br><span class="line">PHP Parse <span class="built_in">error</span>:  syntax <span class="built_in">error</span>, unexpected end of file in ...</span><br><span class="line">PHP</span><br><span class="line">PHP Dump <span class="variable">$_SERVER</span></span><br><span class="line">PHP</span><br><span class="line"></span><br><span class="line">Parse <span class="built_in">error</span>: syntax <span class="built_in">error</span>, unexpected end of file in ...</span><br></pre></td></tr></table></figure>
<p>äº‹æƒ…è¿›å±•åˆ°è¿™é‡Œï¼ŒæŒ‰ç†æ¥è¯´ï¼Œæˆ‘åº”è¯¥å°±æ­¤åœç¬”æ”¶å°¾ï¼Œå¼„ä¸ªæ€»ç»“ä¹‹ç±»çš„ä¸€å¿½æ‚ ä¸€ä¸‹æ­£åœ¨é˜…è¯»çš„ä½ ã€‚ä½†æ˜¯å‘¢ï¼Œæˆ‘åˆå¿½ç„¶æƒ³èµ·æ¥ PHP é‚£ä¹ˆå¤šçš„æ¡†æ¶æ˜¯å¦‚ä½•å¤„ç†è¿™ä¸ªäº‹æƒ…çš„ï¼Œæˆ‘æƒ³ä½ ä¹Ÿå¥½å¥‡ï¼Œä¸å¦¨æˆ‘ä»¬å»çœ‹çœ‹</p>
<h2 id="æ¡†æ¶ä¸­çš„é”™è¯¯å¼‚å¸¸å¤„ç†"><a href="#æ¡†æ¶ä¸­çš„é”™è¯¯å¼‚å¸¸å¤„ç†" class="headerlink" title="æ¡†æ¶ä¸­çš„é”™è¯¯å¼‚å¸¸å¤„ç†"></a>æ¡†æ¶ä¸­çš„é”™è¯¯å¼‚å¸¸å¤„ç†</h2><p>å¾ˆé—æ†¾çš„å‘Šè¯‰ä½ ï¼Œæˆ‘ä¸ä¼šå‰–ææ¡†æ¶æºç ï¼Œæˆ‘åªæƒ³åšä¸ª <code>demo</code> å¾—ç‘Ÿä¸€ä¸‹ï¼Œå‰©ä¸‹å…¨äº¤ç»™ä½ ã€‚æ­¤å¤„æˆ‘ä»¥ <code>symfony debug</code> ä¸ºä¾‹</p>
<blockquote>
<ul>
<li><a href="https://github.com/symfony/debug">Symfony debug GitHub</a></li>
<li><a href="https://symfony.com/components/Debug">Symfony debug Docs</a></li>
</ul>
</blockquote>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// å®‰è£… symfony/debug</span><br><span class="line">$ composer require symfony/debug</span><br></pre></td></tr></table></figure>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">require</span> <span class="keyword">__DIR__</span> . <span class="string">&#x27;/vendor/autoload.php&#x27;</span>;</span><br><span class="line"></span><br><span class="line">\Symfony\Component\Debug\Debug::enable();</span><br><span class="line">\Symfony\Component\Debug\ErrorHandler::register();</span><br><span class="line"></span><br><span class="line"><span class="variable">$object</span> = <span class="literal">null</span>;</span><br><span class="line"><span class="variable">$object</span>-&gt;toArray();</span><br></pre></td></tr></table></figure>
<p><img src="https://inotes.oss-cn-beijing.aliyuncs.com/php/201812/php-error-exception-handler.png" alt="php-error-exception-handler.png"></p>
]]></content>
      <categories>
        <category>php</category>
      </categories>
      <tags>
        <tag>php</tag>
      </tags>
  </entry>
  <entry>
    <title>PHP - å¼€å‘ç”Ÿæ€åœˆ</title>
    <url>/2018/02/28/php-ecosphere/</url>
    <content><![CDATA[<h1 id="å¼€å‘åŒ…"><a href="#å¼€å‘åŒ…" class="headerlink" title="å¼€å‘åŒ…"></a>å¼€å‘åŒ…</h1><ul>
<li><a href="https://github.com/composer/composer">Composer - Dependency Management for PHP</a></li>
<li><a href="https://github.com/guzzle/guzzle">Guzzle - Guzzle is a PHP HTTP client that makes it easy to send HTTP requests and trivial to integrate with web services</a></li>
<li><a href="https://github.com/phalcon/zephir">Zephir is a compiled high level language aimed to the creation of C-extensions for PHP</a></li>
<li><a href="https://github.com/swoole/swoole-src">Swoole - Event-driven asynchronous &amp; concurrent &amp; coroutine networking engine with high performance for PHP</a></li>
<li><a href="https://github.com/FriendsOfPHP/Sami">Sami - An API documentation generator</a></li>
<li><a href="https://github.com/Intervention/image">Intervention Image - Intervention Image is a PHP image handling and manipulation library providing an easier and expressive way to create, edit, and compose images.</a></li>
<li><a href="https://github.com/Seldaek/monolog">Monolog - Sends your logs to files, sockets, inboxes, databases and various web services</a></li>
<li><a href="https://github.com/vlucas/phpdotenv">PHP dotenv - Loads environment variables from .env to getenv()</a></li>
</ul>
<h1 id="å¾®æ¡†æ¶"><a href="#å¾®æ¡†æ¶" class="headerlink" title="å¾®æ¡†æ¶"></a>å¾®æ¡†æ¶</h1><ul>
<li><a href="https://github.com/laravel/lumen">Lumen - The stunningly fast micro-framework by Laravel</a></li>
<li><a href="https://github.com/slimphp/Slim">Slim - Slim is a PHP micro-framework that helps you quickly write simple yet powerful web applications and APIs</a></li>
<li><a href="https://github.com/silexphp/Silex">Silex - The PHP micro-framework based on the Symfony Components</a></li>
<li><a href="https://github.com/vlucas/bulletphp">Bullet - Bullet is a resource-oriented micro PHP framework built around HTTP URIs</a></li>
<li><a href="https://github.com/alexbilbie/Proton">Proton - Proton is a StackPHP compatible micro framework</a></li>
<li><a href="https://github.com/bcosca/fatfree">Fat-Free - A powerful yet easy-to-use PHP micro-framework designed to help you build dynamic and robust Web applications - fast</a></li>
</ul>
<h1 id="Web-æ¡†æ¶"><a href="#Web-æ¡†æ¶" class="headerlink" title="Web æ¡†æ¶"></a>Web æ¡†æ¶</h1><ul>
<li><a href="https://github.com/laravel/laravel">Laravel - A PHP framework for web artisans</a></li>
<li><a href="https://github.com/symfony/symfony">Symfony - The Symfony PHP framework</a></li>
<li><a href="https://github.com/cakephp/cakephp">CakePHP - The Rapid Development Framework for PHP</a></li>
<li><a href="https://github.com/yiisoft/yii2">Yii 2 - The Fast, Secure and Professional PHP Framework</a></li>
<li><a href="https://github.com/zendframework/zendframework">Zend Framework - PHP Official Framework</a></li>
<li><a href="https://github.com/bcit-ci/CodeIgniter">CodeIgniter - CodeIgniter is an Application Development Framework</a></li>
<li><a href="https://github.com/phalcon/cphalcon">Phalcon - High performance, full-stack PHP framework delivered as a C extension</a></li>
<li><a href="https://github.com/phpixie/project/">PHPixie - A lightweight MVC PHP framework designed for speed and simplicty</a></li>
<li><a href="https://github.com/fuelphp/fuelphp">FuelPHP - FuelPHP is a fast, lightweight PHP 5.4 framework</a></li>
<li><a href="https://github.com/top-think/think">ThinkPHP - ä¸º API å¼€å‘è€Œè®¾è®¡çš„é«˜æ€§èƒ½ PHP æ¡†æ¶</a></li>
</ul>
<h1 id="ä»£ç è´¨é‡"><a href="#ä»£ç è´¨é‡" class="headerlink" title="ä»£ç è´¨é‡"></a>ä»£ç è´¨é‡</h1><ul>
<li><a href="https://github.com/squizlabs/PHP_CodeSniffer">PHP CodeSniffer - PHP_CodeSniffer tokenizes PHP, JavaScript and CSS files and detects violations of a defined set of coding standards</a></li>
<li><a href="https://github.com/FriendsOfPHP/PHP-CS-Fixer">PHP CS Fixer - The PHP Coding Standards Fixer (PHP CS Fixer) tool fixes your code to follow standards</a></li>
<li><a href="https://github.com/phpmd/phpmd">PHPMD - PHPMD is a spin-off project of PHP Depend and aims to be a PHP equivalent of the well known Java tool PMD. PHPMD can be seen as an user friendly frontend application for the raw metrics stream measured by PHP Depend</a></li>
</ul>
]]></content>
      <categories>
        <category>php</category>
      </categories>
      <tags>
        <tag>php</tag>
      </tags>
  </entry>
  <entry>
    <title>PHP - è¾“å‡ºä¸­çš„ä»£ç è¯­æ³•é«˜äº®</title>
    <url>/2018/03/18/php-highlight/</url>
    <content><![CDATA[<p>ä»£ç é«˜äº®ä¸€ç›´ä»¥æ¥æ˜¯ç¨‹åºå‘˜çš„ä¸€é¡¹åŸºæœ¬è¯‰æ±‚ï¼Œå·²æˆä¸ºå„å¤§ç¼–è¾‘å™¨ã€IDE çš„æ ‡é…ã€‚å½“ç„¶è¿™ä¸ªèŒƒå›´å¯ä»¥å†æ‰©å¤§äº›ï¼Œç°åœ¨åŸºæœ¬ä¸Šæœ‰ä»£ç çš„åœ°æ–¹å°±æœ‰ä»£ç é«˜äº®äº†ï¼Œæ— è®ºä½ åœ¨å“ªæ¡èˆ¹ä¸Šã€‚å•¥ï¼Ÿä¸æ”¯æŒä»£ç é«˜äº®ï¼Œè¿™ä¸æ‰¯çŠŠå­å—ï¼Ÿä½œä¸ºä¸€ä¸ªæœ‰ç‚¹æ‰¯è°ˆçš„ç¨‹åºå‘˜ï¼Œæˆ‘å¯¹æ²¡æœ‰ä»£ç è¯­æ³•é«˜äº®çš„è¿™ä»¶äº‹æ˜¯åšå†³ä¸èƒ½å¿å—çš„ã€‚</p>
<span id="more"></span>
<h1 id="å†…ç½®çš„é«˜äº®å‡½æ•°"><a href="#å†…ç½®çš„é«˜äº®å‡½æ•°" class="headerlink" title="å†…ç½®çš„é«˜äº®å‡½æ•°"></a>å†…ç½®çš„é«˜äº®å‡½æ•°</h1><h2 id="å­—ç¬¦ä¸²çš„è¯­æ³•é«˜äº®"><a href="#å­—ç¬¦ä¸²çš„è¯­æ³•é«˜äº®" class="headerlink" title="å­—ç¬¦ä¸²çš„è¯­æ³•é«˜äº®"></a>å­—ç¬¦ä¸²çš„è¯­æ³•é«˜äº®</h2><p>è¯­æ³•é«˜äº®çš„ç›¸å…³é…ç½®ï¼š</p>
<table>
<thead>
<tr>
<th>åç§°</th>
<th>é»˜è®¤</th>
<th>å¯ä¿®æ”¹èŒƒå›´</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>ignore_user_abort</code></td>
<td><code>&quot;0&quot;</code></td>
<td>PHP_INI_ALL</td>
</tr>
<tr>
<td><code>highlight.string</code></td>
<td><code>&quot;#DD0000&quot;</code></td>
<td>PHP_INI_ALL</td>
</tr>
<tr>
<td><code>highlight.comment</code></td>
<td><code>&quot;#FF8000&quot;</code></td>
<td>PHP_INI_ALL</td>
</tr>
<tr>
<td><code>highlight.keyword</code></td>
<td><code>&quot;#007700&quot;</code></td>
<td>PHP_INI_ALL</td>
</tr>
<tr>
<td><code>highlight.bg</code> - åœ¨ PHP 5.4.0 ä¸­å·²ç§»é™¤</td>
<td><code>&quot;#FFFFFF&quot;</code></td>
<td>PHP_INI_ALL</td>
</tr>
<tr>
<td><code>highlight.default</code></td>
<td><code>#000000&quot;</code></td>
<td>PHP_INI_ALL</td>
</tr>
<tr>
<td><code>highlight.html</code></td>
<td><code>&quot;#0000BB&quot;</code></td>
<td>PHP_INI_ALL</td>
</tr>
<tr>
<td><code>browscap</code></td>
<td><code>NULL</code></td>
<td>PHP_INI_SYSTEM</td>
</tr>
</tbody>
</table>
<h3 id="å®ä¾‹ä¸€"><a href="#å®ä¾‹ä¸€" class="headerlink" title="å®ä¾‹ä¸€"></a>å®ä¾‹ä¸€</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$string</span> = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line"><span class="variable">$string</span> .= <span class="string">&quot;&lt;?php \r\n\r\n&quot;</span>;</span><br><span class="line"><span class="variable">$string</span> .= <span class="string">&quot;echo &#x27;hello world, hello highlight.&#x27;;\r\n\r\n&quot;</span>;</span><br><span class="line"><span class="variable">$string</span> .= <span class="string">&quot;\$array = [&#x27;a&#x27;, &#x27;b&#x27;, &#x27;c&#x27;, &#x27;d&#x27;, &#x27;e&#x27;];\r\n&quot;</span>;</span><br><span class="line"><span class="variable">$string</span> .= <span class="string">&quot;function pr(\$vars)\r\n&quot;</span>;</span><br><span class="line"><span class="variable">$string</span> .= <span class="string">&quot;&#123;\r\n&quot;</span>;</span><br><span class="line"><span class="variable">$string</span> .= <span class="string">&quot;\tforeach (\$vars as \$key =&gt; \$var) &#123;\r\n&quot;</span>;</span><br><span class="line"><span class="variable">$string</span> .= <span class="string">&quot;\t\tif (\$key % 2 === 0) &#123;\r\n&quot;</span>;</span><br><span class="line"><span class="variable">$string</span> .= <span class="string">&quot;\t\t\t\$array[\$key] = \$var . &#x27;_test&#x27;;\r\n&quot;</span>;</span><br><span class="line"><span class="variable">$string</span> .= <span class="string">&quot;\t\t&#125;\r\n&quot;</span>;</span><br><span class="line"><span class="variable">$string</span> .= <span class="string">&quot;\t&#125;\r\n&quot;</span>;</span><br><span class="line"><span class="variable">$string</span> .= <span class="string">&quot;&#125;\r\n&quot;</span>;</span><br><span class="line"><span class="variable">$string</span> .= <span class="string">&#x27;pr($array);&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> highlight_string(<span class="variable">$string</span>, <span class="literal">true</span>);</span><br></pre></td></tr></table></figure>
<p><img src="https://inotes.oss-cn-beijing.aliyuncs.com/php/201812/php-highlight-1.png" alt="php-highlight-1.png"></p>
<h3 id="å®ä¾‹äºŒ"><a href="#å®ä¾‹äºŒ" class="headerlink" title="å®ä¾‹äºŒ"></a>å®ä¾‹äºŒ</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> highlight_text(file_get_contents(<span class="string">&#x27;date.php&#x27;</span>));</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">highlight_text</span>(<span class="params"><span class="variable">$text</span></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ini_set(<span class="string">&#x27;highlight.comment&#x27;</span>, <span class="string">&#x27;#546E78&#x27;</span>);</span><br><span class="line">    ini_set(<span class="string">&#x27;highlight.default&#x27;</span>, <span class="string">&#x27;#DD7455&#x27;</span>);</span><br><span class="line">    ini_set(<span class="string">&#x27;highlight.html&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;#D56162; font-family: Courier; font-weight: bold&#x27;</span>);</span><br><span class="line">    ini_set(<span class="string">&#x27;highlight.keyword&#x27;</span>, <span class="string">&#x27;#5083E6&#x27;</span>);</span><br><span class="line">    ini_set(<span class="string">&#x27;highlight.string&#x27;</span>, <span class="string">&#x27;#C3E88D&#x27;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="variable">$text</span> = trim(<span class="variable">$text</span>);</span><br><span class="line">    <span class="variable">$text</span> = highlight_string(<span class="string">&#x27;&lt;?php &#x27;</span> . <span class="variable">$text</span>, <span class="literal">true</span>);</span><br><span class="line">    <span class="variable">$text</span> = trim(<span class="variable">$text</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// remove custom added &quot;<span class="meta">&lt;?php</span> &quot;</span></span><br><span class="line">    <span class="variable">$pattern</span></span><br><span class="line">        = <span class="string">&#x27;|&lt;span style=&quot;color: \#[a-zA-Z0-9]&#123;0,6&#125;&quot;&gt;&amp;lt;\?php&amp;nbsp;&lt;/span&gt;|&#x27;</span>;</span><br><span class="line">    <span class="variable">$text</span> = preg_replace(<span class="variable">$pattern</span>, <span class="string">&#x27;&#x27;</span>, <span class="variable">$text</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="variable">$text</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="https://inotes.oss-cn-beijing.aliyuncs.com/php/201812/php-highlight-2.png" alt="php-highlight-2.png"></p>
<h3 id="å®ä¾‹ä¸‰"><a href="#å®ä¾‹ä¸‰" class="headerlink" title="å®ä¾‹ä¸‰"></a>å®ä¾‹ä¸‰</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span> highlight(); <span class="meta">?&gt;</span></span><br><span class="line">  <span class="variable">$string</span> = <span class="string">&#x27;[ PHP è¯­æ³•é«˜äº®å¤§æ³•å¥½ ]&#x27;</span>;</span><br><span class="line"><span class="meta">&lt;?php</span> highlight(); <span class="meta">?&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">highlight</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">static</span> <span class="variable">$on</span> = <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (! <span class="variable">$on</span>) &#123;</span><br><span class="line">        ob_start();</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="variable">$buffer</span> = <span class="string">&quot;&lt;?php\n&quot;</span> . ob_get_contents() . <span class="string">&#x27;?&gt;&#x27;</span>;</span><br><span class="line">        ob_end_clean();</span><br><span class="line">        highlight_string(<span class="variable">$buffer</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable">$on</span> = ! <span class="variable">$on</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">`<span class="number">3</span>` è¡Œè¾“å‡ºï¼Œæˆ‘å°±æ‡’çš„æˆªå›¾äº†</span><br><span class="line"></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="æ–‡ä»¶çš„è¯­æ³•é«˜äº®"><a href="#æ–‡ä»¶çš„è¯­æ³•é«˜äº®" class="headerlink" title="æ–‡ä»¶çš„è¯­æ³•é«˜äº®"></a>æ–‡ä»¶çš„è¯­æ³•é«˜äº®</h2><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line">highlight_file(<span class="string">&#x27;date.php&#x27;</span>);</span><br></pre></td></tr></table></figure>
<p><img src="https://inotes.oss-cn-beijing.aliyuncs.com/php/201812/php-highlight-file.png" alt="php-highlight-file.png"></p>
<h1 id="æ‰©å±•é«˜äº®æ”¯æŒ"><a href="#æ‰©å±•é«˜äº®æ”¯æŒ" class="headerlink" title="æ‰©å±•é«˜äº®æ”¯æŒ"></a>æ‰©å±•é«˜äº®æ”¯æŒ</h1><blockquote>
<ul>
<li><a href="https://github.com/aramk/crayon-syntax-highlighter">Syntax Highlighter supporting multiple languages, themes, fonts, highlighting from a URL, local file or post text</a></li>
<li><a href="https://github.com/scrivo/highlight.php">A port of highlight.js by Ivan Sagalaev to PHP</a></li>
</ul>
</blockquote>
<p>è¿™ç§æ’ä»¶æ¯”è¾ƒå¤šï¼Œè¿™å„¿æˆ‘é€‰æ‹© <code>highlight.php</code>ï¼Œè¿™æ¬¾æ’ä»¶æ”¯æŒå¾ˆå¤šè¯­è¨€çš„ä»£ç é«˜äº®ï¼ŒæŒ‰å®˜æ–¹çš„è¯´æ³•ï¼Œæ”¯æŒè¾¾ <code>176</code> ç§è¯­è¨€ï¼Œæ— è®ºå¦‚ä½•å·²ç»å¤Ÿç”¨äº†ã€‚</p>
<h2 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// å®‰è£… scrivo/highlight.php</span><br><span class="line">$ composer require scrivo/highlight.php</span><br></pre></td></tr></table></figure>
<h2 id="å®ä¾‹"><a href="#å®ä¾‹" class="headerlink" title="å®ä¾‹"></a>å®ä¾‹</h2><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">require</span> <span class="string">&#x27;./vendor/autoload.php&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable">$highlight</span> = <span class="keyword">new</span> \Highlight\Highlighter();</span><br><span class="line"><span class="variable">$code</span> = file_get_contents(<span class="string">&#x27;date.php&#x27;</span>);</span><br><span class="line"><span class="variable">$object</span> = <span class="variable">$highlight</span>-&gt;highlight(<span class="string">&#x27;php&#x27;</span>, <span class="variable">$code</span>);</span><br><span class="line"></span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">  &lt;link rel=<span class="string">&quot;stylesheet&quot;</span></span><br><span class="line">        href=<span class="string">&quot;&lt;?= &#x27;./vendor/scrivo/highlight.php/styles/monokai.css&#x27; ?&gt;&quot;</span>&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;pre <span class="class"><span class="keyword">class</span>=&quot;<span class="title">hljs</span> &lt;?= $<span class="title">object</span>-&gt;<span class="title">language</span> ?&gt;&quot;&gt;&lt;?= $<span class="title">object</span>-&gt;<span class="title">value</span> ?&gt;&lt;/<span class="title">pre</span>&gt;</span></span><br><span class="line"><span class="class">&lt;/<span class="title">body</span>&gt;</span></span><br><span class="line"><span class="class">&lt;/<span class="title">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><img src="https://inotes.oss-cn-beijing.aliyuncs.com/php/201812/php-highlight-ext.png" alt="php-highlight-ext.png"></p>
]]></content>
      <categories>
        <category>php</category>
      </categories>
      <tags>
        <tag>php</tag>
      </tags>
  </entry>
  <entry>
    <title>PHP ä»è·¯å¾„ä¸­è·å–æ–‡ä»¶çš„æ‰©å±•å</title>
    <url>/2018/09/05/php-get-file-extension/</url>
    <content><![CDATA[<p><img src="/images/2019/201904101212.png" alt="201904101212.png"></p>
<p>ğŸ˜„è¿™æ˜¯ä¸€é“å¦¥å¦¥çš„å­—ç¬¦ä¸²æ“ä½œé¢˜å‘€ï¼ŒæºäºæŸé“é¢è¯•é¢˜ï¼Œç©ä¸€ç©ï¼Œå¼€å¿ƒå°±å¥½ã€‚</p>
<span id="more"></span>
<h1 id="ä½¿ç”¨-pathinfo-å‡½æ•°"><a href="#ä½¿ç”¨-pathinfo-å‡½æ•°" class="headerlink" title="ä½¿ç”¨ pathinfo å‡½æ•°"></a>ä½¿ç”¨ pathinfo å‡½æ•°</h1><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ä»è·¯å¾„ä¸­è·å–æ–‡ä»¶çš„æ‰©å±•åã€‚</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> string $path</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> string</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">ext_name</span>(<span class="params"><span class="keyword">string</span> <span class="variable">$path</span></span>): <span class="title">string</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> pathinfo(<span class="variable">$path</span>, PATHINFO_EXTENSION);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æˆ–è€…</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ä»è·¯å¾„ä¸­è·å–æ–‡ä»¶çš„æ‰©å±•åã€‚</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> string $path</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> string</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">ext_name</span>(<span class="params"><span class="keyword">string</span> <span class="variable">$path</span></span>): <span class="title">string</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> pathinfo(<span class="variable">$path</span>)[<span class="string">&#x27;extension&#x27;</span>];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="ä½¿ç”¨-preg-split-å‡½æ•°"><a href="#ä½¿ç”¨-preg-split-å‡½æ•°" class="headerlink" title="ä½¿ç”¨ preg_split å‡½æ•°"></a>ä½¿ç”¨ preg_split å‡½æ•°</h1><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ä»è·¯å¾„ä¸­è·å–æ–‡ä»¶çš„æ‰©å±•åã€‚</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> string $path</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> string</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">ext_name</span>(<span class="params"><span class="keyword">string</span> <span class="variable">$path</span></span>): <span class="title">string</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="variable">$array</span> = preg_split(<span class="string">&#x27;/[\\.]/&#x27;</span>, <span class="variable">$path</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="variable">$array</span>[count(<span class="variable">$array</span>) - <span class="number">1</span>];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="ä½¿ç”¨-end-å‡½æ•°"><a href="#ä½¿ç”¨-end-å‡½æ•°" class="headerlink" title="ä½¿ç”¨ end å‡½æ•°"></a>ä½¿ç”¨ end å‡½æ•°</h1><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ä»è·¯å¾„ä¸­è·å–æ–‡ä»¶çš„æ‰©å±•åã€‚</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> string $path</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> string</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">ext_name</span>(<span class="params"><span class="keyword">string</span> <span class="variable">$path</span></span>): <span class="title">string</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="variable">$array</span> = explode(<span class="string">&#x27;.&#x27;</span>, <span class="variable">$path</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> end(<span class="variable">$array</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="ä½¿ç”¨-strrchr-å‡½æ•°"><a href="#ä½¿ç”¨-strrchr-å‡½æ•°" class="headerlink" title="ä½¿ç”¨ strrchr å‡½æ•°"></a>ä½¿ç”¨ strrchr å‡½æ•°</h1><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ä»è·¯å¾„ä¸­è·å–æ–‡ä»¶çš„æ‰©å±•åã€‚</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> string $path</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> string</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">ext_name</span>(<span class="params"><span class="keyword">string</span> <span class="variable">$path</span></span>): <span class="title">string</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> substr(strrchr(<span class="variable">$path</span>, <span class="string">&#x27;.&#x27;</span>), <span class="number">1</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="ä½¿ç”¨-strrpos-å‡½æ•°"><a href="#ä½¿ç”¨-strrpos-å‡½æ•°" class="headerlink" title="ä½¿ç”¨ strrpos å‡½æ•°"></a>ä½¿ç”¨ strrpos å‡½æ•°</h1><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ä»è·¯å¾„ä¸­è·å–æ–‡ä»¶çš„æ‰©å±•åã€‚</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> string $path</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> string</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">ext_name</span>(<span class="params"><span class="keyword">string</span> <span class="variable">$path</span></span>): <span class="title">string</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> substr(<span class="variable">$path</span>, strrpos(<span class="variable">$path</span>, <span class="string">&#x27;.&#x27;</span>) + <span class="number">1</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="ä½¿ç”¨-preg-replace-å‡½æ•°"><a href="#ä½¿ç”¨-preg-replace-å‡½æ•°" class="headerlink" title="ä½¿ç”¨ preg_replace å‡½æ•°"></a>ä½¿ç”¨ preg_replace å‡½æ•°</h1><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ä»è·¯å¾„ä¸­è·å–æ–‡ä»¶çš„æ‰©å±•åã€‚</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> string $path</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> string</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">ext_name</span>(<span class="params"><span class="keyword">string</span> <span class="variable">$path</span></span>): <span class="title">string</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> preg_replace(<span class="string">&#x27;/^.*\.([^.]+)$/D&#x27;</span>, <span class="string">&quot;<span class="subst">$1</span>&quot;</span>, <span class="variable">$path</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="ä½¿ç”¨-SplFileInfo-ç±»"><a href="#ä½¿ç”¨-SplFileInfo-ç±»" class="headerlink" title="ä½¿ç”¨ SplFileInfo ç±»"></a>ä½¿ç”¨ SplFileInfo ç±»</h1><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ä»è·¯å¾„ä¸­è·å–æ–‡ä»¶çš„æ‰©å±•åã€‚</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> string $path</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> string</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">ext_name</span>(<span class="params"><span class="keyword">string</span> <span class="variable">$path</span></span>): <span class="title">string</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> (<span class="keyword">new</span> \<span class="built_in">SplFileInfo</span>(<span class="variable">$path</span>))-&gt;getExtension();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å‡½æ•°è°ƒç”¨ï¼š</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> ext_name(<span class="variable">$_SERVER</span>[<span class="string">&#x27;PHP_SELF&#x27;</span>]);</span><br></pre></td></tr></table></figure>
<p>è¾“å‡ºç»“æœï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">php</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>php</category>
      </categories>
      <tags>
        <tag>php</tag>
      </tags>
  </entry>
  <entry>
    <title>PHP ä¸­çš„å‡½æ•°å¼ç¼–ç¨‹</title>
    <url>/2018/06/01/php-functional-programming/</url>
    <content><![CDATA[<p>åœ¨æœ€è¿‘çš„å­¦ä¹ ä¸­ï¼Œä¸æ–­å¬åˆ°çœ‹åˆ°å‡½æ•°å¼ç¼–ç¨‹ï¼Œæ®è¯´å¸¸è§çš„ç¼–ç¨‹èŒƒå¼æœ‰å‘½ä»¤å¼ç¼–ç¨‹ã€å‡½æ•°å¼ç¼–ç¨‹ã€é€»è¾‘å¼ç¼–ç¨‹ç­‰ï¼Œè€Œå¸¸è§çš„é¢å‘å¯¹è±¡ç¼–ç¨‹å±…ç„¶æ˜¯ä¸€ç§å‘½ä»¤å¼ç¼–ç¨‹ã€‚å¯¹äºå‡½æ•°å¼ç¼–ç¨‹æ¥è¯´ï¼Œå…¶åªå…³å¿ƒã€å®šä¹‰è¾“å…¥æ•°æ®å’Œè¾“å‡ºæ•°æ®ç›¸å…³çš„å…³ç³»ï¼Œä¹Ÿå°±æ˜¯æ˜ å°„ã€‚å‡½æ•°å¼ç¼–ç¨‹å…³å¿ƒæ•°æ®çš„æ˜ å°„ï¼Œå‘½ä»¤å¼ç¼–ç¨‹å…³å¿ƒè§£å†³é—®é¢˜çš„æ­¥éª¤ã€‚</p>
<h1 id="å‡½æ•°å¼ç¼–ç¨‹æ¦‚å¿µ"><a href="#å‡½æ•°å¼ç¼–ç¨‹æ¦‚å¿µ" class="headerlink" title="å‡½æ•°å¼ç¼–ç¨‹æ¦‚å¿µ"></a>å‡½æ•°å¼ç¼–ç¨‹æ¦‚å¿µ</h1><h2 id="å®šä¹‰"><a href="#å®šä¹‰" class="headerlink" title="å®šä¹‰"></a>å®šä¹‰</h2><p>å‡½æ•°å¼ç¼–ç¨‹ - <code>Functional Programming</code>ï¼Œä¸€ç§ç¼–ç¨‹èŒƒå¼ï¼Œä¹Ÿå°±æ˜¯å¦‚ä½•ç¼–å†™ç¨‹åºçš„æ–¹æ³•è®ºã€‚å®ƒå±äºã€ç»“æ„åŒ–ç¼–ç¨‹ã€çš„ä¸€ç§ï¼Œä¸»è¦æ€æƒ³æ˜¯æŠŠè¿ç®—è¿‡ç¨‹å°½é‡å†™æˆä¸€ç³»åˆ—åµŒå¥—çš„å‡½æ•°è°ƒç”¨ã€‚</p>
<h2 id="ç‰¹æ€§"><a href="#ç‰¹æ€§" class="headerlink" title="ç‰¹æ€§"></a>ç‰¹æ€§</h2><ul>
<li>é—­åŒ…å’Œé«˜é˜¶å‡½æ•°ã€‚</li>
<li>æƒ°æ€§è®¡ç®—ã€‚</li>
<li>é€’å½’ã€‚</li>
<li>å‡½æ•°æ˜¯ã€ç¬¬ä¸€ç­‰å…¬æ°‘ã€ï¼šå‡½æ•°ä¸å…¶ä»–æ•°æ®ç±»å‹ä¸€æ ·ï¼Œå¤„äºå¹³ç­‰åœ°ä½ï¼Œå¯ä»¥èµ‹å€¼ç»™å…¶ä»–å˜é‡ï¼Œä¹Ÿå¯ä»¥ä½œä¸ºå‚æ•°ï¼Œä¼ å…¥å¦ä¸€ä¸ªå‡½æ•°ï¼Œæˆ–è€…ä½œä¸ºåˆ«çš„å‡½æ•°çš„è¿”å›å€¼ã€‚</li>
<li>åªç”¨ã€è¡¨è¾¾å¼ã€ï¼Œä¸ç”¨ã€è¯­å¥ã€</li>
<li>æ²¡æœ‰ã€å‰¯ä½œç”¨ã€ï¼šå‡½æ•°å†…éƒ¨ä¸å¤–éƒ¨äº’åŠ¨ï¼ˆæœ€å…¸å‹çš„æƒ…å†µï¼Œå°±æ˜¯ä¿®æ”¹å…¨å±€å˜é‡çš„å€¼ï¼‰ï¼Œäº§ç”Ÿè¿ç®—ä»¥å¤–çš„å…¶ä»–ç»“æœã€‚</li>
<li>ä¸ä¿®æ”¹çŠ¶æ€ï¼šå‡½æ•°ä¸ç»´æŠ¤ä»»ä½•çŠ¶æ€ï¼Œåªè¿”å›æ–°çš„å€¼ï¼Œä¸ä¿®æ”¹ç³»ç»Ÿå˜é‡ã€‚</li>
<li>å¼•ç”¨é€æ˜æ€§ï¼šå¦‚æœæä¾›åŒæ ·çš„è¾“å…¥ï¼Œé‚£ä¹ˆå‡½æ•°æ€»æ˜¯è¿”å›åŒæ ·çš„ç»“æœã€‚</li>
</ul>
<h2 id="ä¼˜ç‚¹"><a href="#ä¼˜ç‚¹" class="headerlink" title="ä¼˜ç‚¹"></a>ä¼˜ç‚¹</h2><ul>
<li>ä»£ç ç®€æ´ï¼Œå¼€å‘å¿«é€Ÿã€‚</li>
<li>æ¥è¿‘è‡ªç„¶è¯­è¨€ï¼Œæ˜“äºç†è§£ã€‚</li>
<li>æ›´æ–¹ä¾¿çš„ä»£ç ç®¡ç†ã€‚</li>
<li>æ˜“äºã€å¹¶å‘ç¼–ç¨‹ã€ã€‚</li>
<li>ä»£ç çš„çƒ­å‡çº§ã€‚</li>
</ul>
<h1 id="å‡½æ•°å¼ç¼–ç¨‹å®ä¾‹"><a href="#å‡½æ•°å¼ç¼–ç¨‹å®ä¾‹" class="headerlink" title="å‡½æ•°å¼ç¼–ç¨‹å®ä¾‹"></a>å‡½æ•°å¼ç¼–ç¨‹å®ä¾‹</h1><h2 id="å®ä¾‹ä¸€"><a href="#å®ä¾‹ä¸€" class="headerlink" title="å®ä¾‹ä¸€"></a>å®ä¾‹ä¸€</h2><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">map</span>(<span class="params"><span class="keyword">callable</span> <span class="variable">$fn</span></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params"><span class="variable">$args</span></span>) <span class="keyword">use</span> (<span class="params"><span class="variable">$fn</span></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">foreach</span> (<span class="variable">$args</span> <span class="keyword">as</span> <span class="variable">$key</span> =&gt; <span class="variable">$val</span>) &#123;</span><br><span class="line">            <span class="keyword">yield</span> <span class="variable">$key</span> =&gt; <span class="variable">$fn</span>(<span class="variable">$val</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable">$a</span> = <span class="function"><span class="keyword">function</span> (<span class="params"><span class="variable">$value</span></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable">$value</span> * <span class="number">2</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="variable">$b</span> = <span class="function"><span class="keyword">function</span> (<span class="params"><span class="variable">$value</span></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> ucwords(<span class="variable">$value</span>);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="variable">$result1</span> = iterator_to_array(map(<span class="variable">$a</span>)([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]));</span><br><span class="line"><span class="variable">$result2</span> = iterator_to_array(map(<span class="variable">$b</span>)([<span class="string">&#x27;php&#x27;</span>, <span class="string">&#x27;java&#x27;</span>, <span class="string">&#x27;python&#x27;</span>]));</span><br><span class="line"></span><br><span class="line">var_dump(<span class="variable">$result1</span>, <span class="variable">$result2</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»“æœ</span></span><br><span class="line"><span class="keyword">array</span>(<span class="number">4</span>) &#123;</span><br><span class="line">  [<span class="number">0</span>]=&gt;</span><br><span class="line">  <span class="keyword">int</span>(<span class="number">2</span>)</span><br><span class="line">  [<span class="number">1</span>]=&gt;</span><br><span class="line">  <span class="keyword">int</span>(<span class="number">4</span>)</span><br><span class="line">  [<span class="number">2</span>]=&gt;</span><br><span class="line">  <span class="keyword">int</span>(<span class="number">6</span>)</span><br><span class="line">  [<span class="number">3</span>]=&gt;</span><br><span class="line">  <span class="keyword">int</span>(<span class="number">8</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">array</span>(<span class="number">3</span>) &#123;</span><br><span class="line">  [<span class="number">0</span>]=&gt;</span><br><span class="line">  <span class="keyword">string</span>(<span class="number">3</span>) <span class="string">&quot;Php&quot;</span></span><br><span class="line">  [<span class="number">1</span>]=&gt;</span><br><span class="line">  <span class="keyword">string</span>(<span class="number">4</span>) <span class="string">&quot;Java&quot;</span></span><br><span class="line">  [<span class="number">2</span>]=&gt;</span><br><span class="line">  <span class="keyword">string</span>(<span class="number">6</span>) <span class="string">&quot;Python&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="å®ä¾‹äºŒ"><a href="#å®ä¾‹äºŒ" class="headerlink" title="å®ä¾‹äºŒ"></a>å®ä¾‹äºŒ</h2><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">filter</span>(<span class="params"><span class="keyword">callable</span> <span class="variable">$fn</span></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params"><span class="variable">$args</span></span>) <span class="keyword">use</span> (<span class="params"><span class="variable">$fn</span></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">foreach</span> (<span class="variable">$args</span> <span class="keyword">as</span> <span class="variable">$key</span> =&gt; <span class="variable">$val</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (<span class="variable">$fn</span>(<span class="variable">$val</span>)) &#123;</span><br><span class="line">                <span class="keyword">yield</span> <span class="variable">$key</span> =&gt; <span class="variable">$val</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable">$a</span> = <span class="function"><span class="keyword">function</span> (<span class="params"><span class="variable">$value</span></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable">$value</span> % <span class="number">2</span> &gt; <span class="number">0</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="variable">$b</span> = <span class="function"><span class="keyword">function</span> (<span class="params"><span class="variable">$value</span></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> ord(<span class="variable">$value</span>) &gt; <span class="number">97</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="variable">$result1</span> = iterator_to_array(filter(<span class="variable">$a</span>)([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]));</span><br><span class="line"><span class="variable">$result2</span> = iterator_to_array(filter(<span class="variable">$b</span>)([<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>, <span class="string">&#x27;d&#x27;</span>, <span class="string">&#x27;e&#x27;</span>]));</span><br><span class="line"></span><br><span class="line">var_dump(<span class="variable">$result1</span>, <span class="variable">$result2</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»“æœ</span></span><br><span class="line"><span class="keyword">array</span>(<span class="number">3</span>) &#123;</span><br><span class="line">  [<span class="number">0</span>]=&gt;</span><br><span class="line">  <span class="keyword">int</span>(<span class="number">1</span>)</span><br><span class="line">  [<span class="number">2</span>]=&gt;</span><br><span class="line">  <span class="keyword">int</span>(<span class="number">3</span>)</span><br><span class="line">  [<span class="number">4</span>]=&gt;</span><br><span class="line">  <span class="keyword">int</span>(<span class="number">5</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">array</span>(<span class="number">4</span>) &#123;</span><br><span class="line">  [<span class="number">1</span>]=&gt;</span><br><span class="line">  <span class="keyword">string</span>(<span class="number">1</span>) <span class="string">&quot;b&quot;</span></span><br><span class="line">  [<span class="number">2</span>]=&gt;</span><br><span class="line">  <span class="keyword">string</span>(<span class="number">1</span>) <span class="string">&quot;c&quot;</span></span><br><span class="line">  [<span class="number">3</span>]=&gt;</span><br><span class="line">  <span class="keyword">string</span>(<span class="number">1</span>) <span class="string">&quot;d&quot;</span></span><br><span class="line">  [<span class="number">4</span>]=&gt;</span><br><span class="line">  <span class="keyword">string</span>(<span class="number">1</span>) <span class="string">&quot;e&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="å®ä¾‹ä¸‰"><a href="#å®ä¾‹ä¸‰" class="headerlink" title="å®ä¾‹ä¸‰"></a>å®ä¾‹ä¸‰</h2><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">reduce</span>(<span class="params"><span class="keyword">callable</span> <span class="variable">$fn</span></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params"><span class="variable">$args</span></span>) <span class="keyword">use</span> (<span class="params"><span class="variable">$fn</span></span>) </span>&#123;</span><br><span class="line">        <span class="variable">$accumulator</span> = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">foreach</span> (<span class="variable">$args</span> <span class="keyword">as</span> <span class="variable">$value</span>) &#123;</span><br><span class="line">            <span class="variable">$accumulator</span> = <span class="variable">$fn</span>(<span class="variable">$accumulator</span>, <span class="variable">$value</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="variable">$accumulator</span>;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable">$a</span> = <span class="function"><span class="keyword">function</span> (<span class="params"><span class="variable">$a</span>, <span class="variable">$b</span></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable">$a</span> + <span class="variable">$b</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="variable">$b</span> = <span class="function"><span class="keyword">function</span> (<span class="params"><span class="variable">$a</span>, <span class="variable">$b</span></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> sqrt(<span class="variable">$a</span>) + sqrt(<span class="variable">$b</span>);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="variable">$result1</span> = reduce(<span class="variable">$a</span>)([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]);</span><br><span class="line"><span class="variable">$result2</span> = round(reduce(<span class="variable">$b</span>)([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]), <span class="number">2</span>);</span><br><span class="line"></span><br><span class="line">var_dump(<span class="variable">$result1</span>, <span class="variable">$result2</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»“æœ</span></span><br><span class="line"><span class="keyword">int</span>(<span class="number">15</span>)</span><br><span class="line"><span class="keyword">float</span>(<span class="number">4.19</span>)</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>php</category>
      </categories>
      <tags>
        <tag>php</tag>
      </tags>
  </entry>
  <entry>
    <title>PHP ä¸­çš„æµ®ç‚¹æ•°</title>
    <url>/2018/04/18/php-float-number/</url>
    <content><![CDATA[<p>å¯¹æµ®ç‚¹æ•°è¿›è¡Œæ¯”è¾ƒè¿ç®—æ˜¯ä¸€ä¸ªå‘çˆ¹çš„äº‹ï¼Œç”±äºæ ½åœ¨è¿™ä¸ªé—®é¢˜ä¸Šçš„æ¬¡æ•°æ¯”è¾ƒå¤šï¼Œæ€»æ˜¯è®°åƒä¸è®°æ‰“çš„ï¼Œç—›å®šæ€ç—›åæ‰“ç®—æ•´ç†ä¸€ä¸‹ï¼Œé¿å…ä¸‹æ¬¡å†çŠ¯ã€‚</p>
<span id="more"></span>
<h1 id="æµ®ç‚¹æ•°çš„é™·é˜±å®ä¾‹"><a href="#æµ®ç‚¹æ•°çš„é™·é˜±å®ä¾‹" class="headerlink" title="æµ®ç‚¹æ•°çš„é™·é˜±å®ä¾‹"></a>æµ®ç‚¹æ•°çš„é™·é˜±å®ä¾‹</h1><blockquote>
<ul>
<li><a href="http://www.laruence.com/2013/03/26/2884.html">PHP æµ®ç‚¹æ•°çš„ä¸€ä¸ªå¸¸è§é—®é¢˜çš„è§£ç­”</a></li>
<li><a href="https://www.zhihu.com/question/21711083">IEEE 754 æ ¼å¼æ˜¯ä»€ä¹ˆï¼Ÿ</a></li>
</ul>
</blockquote>
<h2 id="æµ®ç‚¹æ•°è®¡ç®—é”™è¯¯å®ä¾‹"><a href="#æµ®ç‚¹æ•°è®¡ç®—é”™è¯¯å®ä¾‹" class="headerlink" title="æµ®ç‚¹æ•°è®¡ç®—é”™è¯¯å®ä¾‹"></a>æµ®ç‚¹æ•°è®¡ç®—é”™è¯¯å®ä¾‹</h2><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$float</span> = <span class="number">0.58</span>;</span><br><span class="line"></span><br><span class="line">var_dump(<span class="variable">$float</span> * <span class="number">100</span>);</span><br><span class="line">var_dump(intval(<span class="variable">$float</span> * <span class="number">100</span>));</span><br><span class="line"></span><br><span class="line"><span class="keyword">double</span>(<span class="number">58</span>)</span><br><span class="line"><span class="keyword">int</span>(<span class="number">57</span>) <span class="comment">// å±…ç„¶æ˜¯ 57</span></span><br></pre></td></tr></table></figure>
<h2 id="æµ®ç‚¹æ•°æ¯”è¾ƒé”™è¯¯å®ä¾‹"><a href="#æµ®ç‚¹æ•°æ¯”è¾ƒé”™è¯¯å®ä¾‹" class="headerlink" title="æµ®ç‚¹æ•°æ¯”è¾ƒé”™è¯¯å®ä¾‹"></a>æµ®ç‚¹æ•°æ¯”è¾ƒé”™è¯¯å®ä¾‹</h2><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$a</span> = <span class="number">0.1</span>;</span><br><span class="line"><span class="variable">$b</span> = <span class="number">0.2</span>;</span><br><span class="line"></span><br><span class="line">var_dump(<span class="variable">$a</span>);</span><br><span class="line">var_dump(<span class="variable">$b</span>);</span><br><span class="line">var_dump(<span class="variable">$a</span> + <span class="variable">$b</span>);</span><br><span class="line">var_dump(<span class="variable">$a</span> + <span class="variable">$b</span> === <span class="number">0.3</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»“æœ</span></span><br><span class="line"><span class="keyword">double</span>(<span class="number">0.1</span>)</span><br><span class="line"><span class="keyword">double</span>(<span class="number">0.2</span>)</span><br><span class="line"><span class="keyword">double</span>(<span class="number">0.3</span>)</span><br><span class="line"><span class="keyword">bool</span>(<span class="literal">false</span>) <span class="comment">// å±…ç„¶æ˜¯ false</span></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<div class="note danger">
            <p>æµ®ç‚¹æ•°çš„ç²¾åº¦</p><ul><li>æµ®ç‚¹æ•°çš„ç²¾åº¦æœ‰é™ã€‚å°½ç®¡å–å†³äºç³»ç»Ÿï¼ŒPHP é€šå¸¸ä½¿ç”¨ IEEE 754 åŒç²¾åº¦æ ¼å¼ï¼Œåˆ™ç”±äºå–æ•´è€Œå¯¼è‡´çš„æœ€å¤§ç›¸å¯¹è¯¯å·®ä¸º 1.11e-16ã€‚éåŸºæœ¬æ•°å­¦è¿ç®—å¯èƒ½ä¼šç»™å‡ºæ›´å¤§è¯¯å·®ï¼Œå¹¶ä¸”è¦è€ƒè™‘åˆ°è¿›è¡Œå¤åˆè¿ç®—æ—¶çš„è¯¯å·®ä¼ é€’</li><li>æ­¤å¤–ï¼Œä»¥åè¿›åˆ¶èƒ½å¤Ÿç²¾ç¡®è¡¨ç¤ºçš„æœ‰ç†æ•°å¦‚ <code>0.1</code> æˆ– <code>0.7</code>ï¼Œæ— è®ºæœ‰å¤šå°‘å°¾æ•°éƒ½ä¸èƒ½è¢«å†…éƒ¨æ‰€ä½¿ç”¨çš„äºŒè¿›åˆ¶ç²¾ç¡®è¡¨ç¤ºï¼Œå› æ­¤ä¸èƒ½åœ¨ä¸ä¸¢å¤±ä¸€ç‚¹ç‚¹ç²¾åº¦çš„æƒ…å†µä¸‹è½¬æ¢ä¸ºäºŒè¿›åˆ¶çš„æ ¼å¼ã€‚è¿™å°±ä¼šé€ æˆæ··ä¹±çš„ç»“æœï¼Œä¾‹å¦‚ï¼š<code>floor((0.1+0.7)*10</code> é€šå¸¸ä¼šè¿”å› <code>7</code> è€Œä¸æ˜¯é¢„æœŸä¸­çš„ <code>8</code>ï¼Œå› ä¸ºè¯¥ç»“æœå†…éƒ¨çš„è¡¨ç¤ºå…¶å®æ˜¯ç±»ä¼¼ <code>7.9999999999999991118...</code></li><li>æ‰€ä»¥ï¼Œæ°¸è¿œä¸è¦ç›¸ä¿¡æµ®ç‚¹æ•°ç»“æœç²¾ç¡®åˆ°äº†æœ€åä¸€ä½ï¼Œä¹Ÿæ°¸è¿œä¸è¦æ¯”è¾ƒä¸¤ä¸ªæµ®ç‚¹æ•°æ˜¯å¦ç›¸ç­‰ã€‚å¦‚æœç¡®å®éœ€è¦æ›´é«˜çš„ç²¾åº¦ï¼Œåº”è¯¥ä½¿ç”¨ <strong><a href="http://php.net/manual/zh/ref.bc.php">ä»»æ„ç²¾åº¦æ•°å­¦å‡½æ•°</a></strong> æˆ–è€… <strong><a href="http://php.net/manual/zh/ref.gmp.php"><code>gmp</code> å‡½æ•°</a></strong></li></ul>
          </div>
<h1 id="ç²¾åº¦æ•°å­¦å‡½æ•°"><a href="#ç²¾åº¦æ•°å­¦å‡½æ•°" class="headerlink" title="ç²¾åº¦æ•°å­¦å‡½æ•°"></a>ç²¾åº¦æ•°å­¦å‡½æ•°</h1><table>
<thead>
<tr>
<th>åç§°</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>bcadd()</code></td>
<td>ä»»æ„ç²¾åº¦æ•°å­—çš„åŠ æ³•è®¡ç®—</td>
</tr>
<tr>
<td><code>bccomp()</code></td>
<td>æ¯”è¾ƒä¸¤ä¸ªä»»æ„ç²¾åº¦çš„æ•°å­—</td>
</tr>
<tr>
<td><code>bcdiv()</code></td>
<td>ä¸¤ä¸ªä»»æ„ç²¾åº¦çš„æ•°å­—é™¤æ³•è®¡ç®—</td>
</tr>
<tr>
<td><code>bcmod()</code></td>
<td>å¯¹ä¸€ä¸ªä»»æ„ç²¾åº¦æ•°å­—å–æ¨¡</td>
</tr>
<tr>
<td><code>bcmul()</code></td>
<td>ä¸¤ä¸ªä»»æ„ç²¾åº¦æ•°å­—ä¹˜æ³•è®¡ç®—</td>
</tr>
<tr>
<td><code>bcpow()</code></td>
<td>ä»»æ„ç²¾åº¦æ•°å­—çš„ä¹˜æ–¹</td>
</tr>
<tr>
<td><code>bcpowmod()</code></td>
<td>ä»»æ„ç²¾åº¦æ•°å­—ä¹˜æ–¹æ±‚æ¨¡</td>
</tr>
<tr>
<td><code>bcscale()</code></td>
<td>è®¾ç½®æ‰€æœ‰ <code>bc</code> æ•°å­¦å‡½æ•°çš„é»˜è®¤å°æ•°ç‚¹ä¿ç•™ä½æ•°</td>
</tr>
<tr>
<td><code>bcsqrt()</code></td>
<td>ä»»æ„ç²¾åº¦æ•°å­—çš„äºŒæ¬¡æ–¹æ ¹</td>
</tr>
<tr>
<td><code>bcsub()</code></td>
<td>ä¸¤ä¸ªä»»æ„ç²¾åº¦æ•°å­—çš„å‡æ³•</td>
</tr>
</tbody>
</table>
<div class="note danger">
            <p>ä½¿ç”¨ <code>bcscale()</code> è®¾ç½®çš„ä½æ•°ï¼Œè¶…å‡ºéƒ¨åˆ†æ˜¯ä¸¢å¼ƒæ‰ï¼Œè€Œä¸æ˜¯å››èˆäº”å…¥</p>
          </div>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">declare</span>(strict_types=<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable">$a</span> = <span class="string">&#x27;0.19&#x27;</span>;</span><br><span class="line"><span class="variable">$b</span> = <span class="string">&#x27;0.81&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable">$array</span> = [</span><br><span class="line">    <span class="string">&#x27;bcadd&#x27;</span>    =&gt; bcadd(<span class="variable">$a</span>, <span class="variable">$b</span>, <span class="number">2</span>),</span><br><span class="line">    <span class="string">&#x27;bccomp&#x27;</span>   =&gt; bccomp(bcadd(<span class="variable">$a</span>, <span class="variable">$b</span>), <span class="string">&#x27;1&#x27;</span>, <span class="number">1</span>), <span class="comment">// ä¸¤ä¸ªæ•°ç›¸ç­‰è¿”å› 0</span></span><br><span class="line">    <span class="string">&#x27;bcdiv&#x27;</span>    =&gt; bcdiv(<span class="string">&#x27;100&#x27;</span>, <span class="string">&#x27;3&#x27;</span>, <span class="number">4</span>),</span><br><span class="line">    <span class="string">&#x27;bcmod&#x27;</span>    =&gt; bcmod(PHP_VERSION, <span class="string">&#x27;2&#x27;</span>),</span><br><span class="line">    <span class="string">&#x27;bcmul&#x27;</span>    =&gt; bcmul(<span class="variable">$a</span>, <span class="variable">$b</span>, <span class="number">4</span>),</span><br><span class="line">    <span class="string">&#x27;bcpow&#x27;</span>    =&gt; bcpow(<span class="string">&#x27;2.2&#x27;</span>, <span class="string">&#x27;3&#x27;</span>, <span class="number">3</span>),</span><br><span class="line">    <span class="string">&#x27;bcpowmod&#x27;</span> =&gt; bcpowmod(<span class="string">&#x27;2&#x27;</span>, <span class="string">&#x27;2&#x27;</span>, <span class="string">&#x27;3&#x27;</span>),</span><br><span class="line">    <span class="string">&#x27;bcscale&#x27;</span>  =&gt; bcscale(<span class="number">6</span>), <span class="comment">// è®¾ç½®æ–°çš„å°æ•°ç‚¹ä¿ç•™ä½æ•°</span></span><br><span class="line">    <span class="string">&#x27;bcsqrt&#x27;</span>   =&gt; bcsqrt(<span class="string">&#x27;4&#x27;</span>),</span><br><span class="line">    <span class="string">&#x27;bcsub&#x27;</span>    =&gt; bcsub(<span class="variable">$b</span>, <span class="variable">$a</span>),</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line">print_r(<span class="variable">$array</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»“æœ</span></span><br><span class="line"><span class="keyword">Array</span></span><br><span class="line">(</span><br><span class="line">    [bcadd] =&gt; <span class="number">1.00</span></span><br><span class="line">    [bccomp] =&gt; <span class="number">0</span></span><br><span class="line">    [bcdiv] =&gt; <span class="number">33.3333</span></span><br><span class="line">    [bcmod] =&gt; <span class="number">0</span></span><br><span class="line">    [bcmul] =&gt; <span class="number">0.1539</span></span><br><span class="line">    [bcpow] =&gt; <span class="number">10.648</span></span><br><span class="line">    [bcpowmod] =&gt; <span class="number">1</span></span><br><span class="line">    [bcscale] =&gt; <span class="number">1</span></span><br><span class="line">    [bcsqrt] =&gt; <span class="number">2.000000</span></span><br><span class="line">    [bcsub] =&gt; <span class="number">0.620000</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<h1 id="æ­£ç¡®çš„å§¿åŠ¿"><a href="#æ­£ç¡®çš„å§¿åŠ¿" class="headerlink" title="æ­£ç¡®çš„å§¿åŠ¿"></a>æ­£ç¡®çš„å§¿åŠ¿</h1><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">declare</span>(strict_types=<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable">$a</span> = <span class="string">&#x27;0.185&#x27;</span>;</span><br><span class="line"><span class="variable">$b</span> = <span class="string">&#x27;0.804&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable">$c</span> = <span class="number">0.185</span>;</span><br><span class="line"><span class="variable">$d</span> = <span class="number">0.804</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable">$e</span> = <span class="number">101.1988654321</span>;</span><br><span class="line"><span class="variable">$f</span> = <span class="number">101.1988456789</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable">$g</span> = <span class="number">1.23456789</span>;</span><br><span class="line"><span class="variable">$h</span> = <span class="number">1.23456780</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable">$epsilon</span> = <span class="number">0.00001</span>; <span class="comment">// æœºå™¨æå°å€¼ï¼ˆepsilonï¼‰æˆ–æœ€å°å•å…ƒå–æ•´æ•°ï¼Œæ˜¯è®¡ç®—ä¸­æ‰€èƒ½æ¥å—çš„æœ€å°çš„å·®åˆ«å€¼</span></span><br><span class="line"></span><br><span class="line">var_dump(bcadd(<span class="variable">$a</span>, <span class="variable">$b</span>, <span class="number">2</span>) === <span class="string">&#x27;0.98&#x27;</span>);</span><br><span class="line">var_dump(round(<span class="variable">$c</span> + <span class="variable">$d</span>, <span class="number">2</span>) === <span class="number">0.99</span>);</span><br><span class="line">var_dump(bccomp((<span class="keyword">string</span>)<span class="variable">$e</span>, (<span class="keyword">string</span>)<span class="variable">$f</span>, <span class="number">3</span>) === <span class="number">0</span>);</span><br><span class="line">var_dump(abs(<span class="variable">$g</span> - <span class="variable">$h</span>) &lt; <span class="variable">$epsilon</span>); <span class="comment">// è¯¯å·®å°äºè¿™ä¸ªå€¼å¯ä»¥æ¥å—</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»“æœ</span></span><br><span class="line"><span class="keyword">bool</span>(<span class="literal">true</span>)</span><br><span class="line"><span class="keyword">bool</span>(<span class="literal">true</span>)</span><br><span class="line"><span class="keyword">bool</span>(<span class="literal">true</span>)</span><br><span class="line"><span class="keyword">bool</span>(<span class="literal">true</span>)</span><br></pre></td></tr></table></figure>
<p>æœªå®Œå¾…ç»­â€¦</p>
]]></content>
      <categories>
        <category>php</category>
      </categories>
      <tags>
        <tag>php</tag>
      </tags>
  </entry>
  <entry>
    <title>PHP é­”æœ¯æ–¹æ³•</title>
    <url>/2018/01/18/php-magic-methods/</url>
    <content><![CDATA[<h2 id="é­”æœ¯æ–¹æ³•"><a href="#é­”æœ¯æ–¹æ³•" class="headerlink" title="é­”æœ¯æ–¹æ³•"></a>é­”æœ¯æ–¹æ³•</h2><blockquote>
<p><code>PHP</code> å°†æ‰€æœ‰ä»¥ <code>__</code>ï¼ˆä¸¤ä¸ªä¸‹åˆ’çº¿ï¼‰å¼€å¤´çš„ç±»æ–¹æ³•ä¿ç•™ä¸ºé­”æœ¯æ–¹æ³•ã€‚æ‰€ä»¥åœ¨å®šä¹‰ç±»æ–¹æ³•æ—¶ï¼Œé™¤äº†å¿ƒä¸‹é­”æœ¯æ–¹æ³•ï¼Œå»ºè®®ä¸è¦ä»¥ <code>__</code> ä¸ºå‰ç¼€</p>
</blockquote>
<span id="more"></span>
<table>
<thead>
<tr>
<th>åç§°</th>
<th>è¯´æ˜</th>
<th>å¤‡æ³¨</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>__construct()</code></td>
<td>ç±»çš„æ„é€ å‡½æ•°</td>
<td></td>
</tr>
<tr>
<td><code>__destruct()</code></td>
<td>ç±»çš„ææ„å‡½æ•°</td>
<td></td>
</tr>
<tr>
<td><code>__call()</code></td>
<td>åœ¨å¯¹è±¡ä¸­è°ƒç”¨ä¸€ä¸ªä¸å¯è®¿é—®æ–¹æ³•æ—¶è°ƒç”¨</td>
<td></td>
</tr>
<tr>
<td><code>__callStatic()</code></td>
<td>ç”¨é™æ€æ–¹å¼ä¸­è°ƒç”¨ä¸€ä¸ªä¸å¯è®¿é—®æ–¹æ³•æ—¶è°ƒç”¨</td>
<td></td>
</tr>
<tr>
<td><code>__get()</code></td>
<td>è·å¾—ä¸€ä¸ªç±»çš„æˆå‘˜å˜é‡æ—¶è°ƒç”¨</td>
<td></td>
</tr>
<tr>
<td><code>__set()</code></td>
<td>è®¾ç½®ä¸€ä¸ªç±»çš„æˆå‘˜å˜é‡æ—¶è°ƒç”¨</td>
<td></td>
</tr>
<tr>
<td><code>__isset()</code></td>
<td>å½“å¯¹ä¸å¯è®¿é—®å±æ€§è°ƒç”¨ <code>isset()</code> æˆ– <code>empty()</code> æ—¶è°ƒç”¨</td>
<td></td>
</tr>
<tr>
<td><code>__unset()</code></td>
<td>å½“å¯¹ä¸å¯è®¿é—®å±æ€§è°ƒç”¨ <code>unset()</code> æ—¶è¢«è°ƒç”¨</td>
<td></td>
</tr>
<tr>
<td><code>__sleep()</code></td>
<td>æ‰§è¡Œ <code>serialize()</code> æ—¶ï¼Œå…ˆä¼šè°ƒç”¨è¿™ä¸ªå‡½æ•°</td>
<td></td>
</tr>
<tr>
<td><code>__wakeup()</code></td>
<td>æ‰§è¡Œ <code>unserialize()</code> æ—¶ï¼Œå…ˆä¼šè°ƒç”¨è¿™ä¸ªå‡½æ•°</td>
<td></td>
</tr>
<tr>
<td><code>__toString()</code></td>
<td>ç”¨äºä¸€ä¸ªç±»è¢«å½“æˆå­—ç¬¦ä¸²æ—¶åº”æ€æ ·å›åº”</td>
<td></td>
</tr>
<tr>
<td><code>__invoke()</code></td>
<td>å½“å°è¯•ä»¥è°ƒç”¨å‡½æ•°çš„æ–¹å¼è°ƒç”¨ä¸€ä¸ªå¯¹è±¡æ—¶ï¼Œ<code>__invoke()</code> æ–¹æ³•ä¼šè¢«è‡ªåŠ¨è°ƒç”¨</td>
<td></td>
</tr>
<tr>
<td><code>__set_state()</code></td>
<td>è°ƒç”¨ <code>var_export()</code> å¯¼å‡ºç±»æ—¶ï¼Œæ­¤é™æ€æ–¹æ³•ä¼šè¢«è°ƒç”¨</td>
<td></td>
</tr>
<tr>
<td><code>__clone()</code></td>
<td>å½“å¤åˆ¶å®Œæˆæ—¶ï¼Œå¦‚æœå®šä¹‰äº† <code>__clone()</code> æ–¹æ³•ï¼Œåˆ™æ–°åˆ›å»ºçš„å¯¹è±¡ï¼ˆå¤åˆ¶ç”Ÿæˆçš„å¯¹è±¡ï¼‰ä¸­çš„ <code>__clone()</code> æ–¹æ³•ä¼šè¢«è°ƒç”¨ï¼Œå¯ç”¨äºä¿®æ”¹å±æ€§çš„å€¼ï¼ˆå¦‚æœæœ‰å¿…è¦çš„è¯ï¼‰</td>
<td></td>
</tr>
<tr>
<td><code>__debugInfo()</code></td>
<td>å½“æ‰“å°ä¸€ä¸ªå¯¹è±¡ä»¥è·å–æ˜¾ç¤ºçš„å±æ€§æ—¶ï¼Œæ­¤æ–¹æ³•è¢« <code>var_dump()</code> è°ƒç”¨ã€‚å¦‚æœæ­¤æ–¹æ³•æœªåœ¨å¯¹è±¡ä¸Šå®šä¹‰ï¼Œåˆ™å°†æ˜¾ç¤ºæ‰€æœ‰å…¬å¼€çš„ï¼Œå—ä¿æŠ¤çš„å’Œç§æœ‰çš„å±æ€§</td>
</tr>
</tbody>
</table>
<h2 id="æ–¹æ³•å®ä¾‹"><a href="#æ–¹æ³•å®ä¾‹" class="headerlink" title="æ–¹æ³•å®ä¾‹"></a>æ–¹æ³•å®ä¾‹</h2><h3 id="construct-å’Œ-destruct"><a href="#construct-å’Œ-destruct" class="headerlink" title="__construct() å’Œ __destruct()"></a><code>__construct()</code> å’Œ <code>__destruct()</code></h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Object</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="keyword">echo</span> <span class="keyword">__METHOD__</span> . PHP_EOL;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__destruct</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="keyword">echo</span> <span class="keyword">__METHOD__</span> . PHP_EOL;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Test</span> <span class="keyword">extends</span> <span class="title">Object</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="keyword">echo</span> <span class="keyword">__METHOD__</span> . PHP_EOL;</span><br><span class="line">		<span class="built_in">parent</span>::__construct();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__destruct</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="keyword">echo</span> <span class="keyword">__METHOD__</span> . PHP_EOL;</span><br><span class="line">		<span class="built_in">parent</span>::__destruct();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> Test();</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»“æœ</span></span><br><span class="line">Test::__construct</span><br><span class="line"><span class="keyword">Object</span>::__construct</span><br><span class="line">Test::__destruct</span><br><span class="line"><span class="keyword">Object</span>::__destruct</span><br></pre></td></tr></table></figure>
<h3 id="call-å’Œ-callStatic"><a href="#call-å’Œ-callStatic" class="headerlink" title="__call() å’Œ __callStatic()"></a><code>__call()</code> å’Œ <code>__callStatic()</code></h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Object</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__call</span>(<span class="params"><span class="variable">$name</span>, <span class="variable">$arguments</span></span>)</span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="keyword">echo</span> <span class="string">&quot;Calling object method &#x27;<span class="subst">$name</span>&#x27; &quot;</span> . implode(<span class="string">&#x27;, &#x27;</span>, <span class="variable">$arguments</span>) . PHP_EOL;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">__callStatic</span>(<span class="params"><span class="variable">$name</span>, <span class="variable">$arguments</span></span>)</span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="keyword">echo</span> <span class="string">&quot;Calling static method &#x27;<span class="subst">$name</span>&#x27; &quot;</span> . implode(<span class="string">&#x27;, &#x27;</span>, <span class="variable">$arguments</span>) . PHP_EOL;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable">$object</span> = <span class="keyword">new</span> <span class="keyword">Object</span>();</span><br><span class="line"><span class="variable">$object</span>-&gt;getCall(<span class="string">&#x27;in object context&#x27;</span>);</span><br><span class="line"><span class="keyword">Object</span>::getCallStatic(<span class="string">&#x27;in static context&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»“æœ</span></span><br><span class="line">Calling <span class="keyword">object</span> method <span class="string">&#x27;getCall&#x27;</span> in <span class="keyword">object</span> context</span><br><span class="line">Calling <span class="built_in">static</span> method <span class="string">&#x27;getCallStatic&#x27;</span> in <span class="built_in">static</span> context</span><br></pre></td></tr></table></figure>
<h3 id="get-set-isset-unset"><a href="#get-set-isset-unset" class="headerlink" title="__get(), __set(), __isset(), __unset()"></a><code>__get()</code>, <code>__set()</code>, <code>__isset()</code>, <code>__unset()</code></h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Object</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">	<span class="keyword">private</span> <span class="variable">$data</span> = [];</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__set</span>(<span class="params"><span class="variable">$key</span>, <span class="variable">$val</span></span>)</span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="keyword">echo</span> <span class="keyword">__METHOD__</span> . PHP_EOL;</span><br><span class="line">		<span class="keyword">$this</span>-&gt;data[<span class="variable">$key</span>] = <span class="variable">$val</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__get</span>(<span class="params"><span class="variable">$key</span></span>)</span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="keyword">if</span> (array_key_exists(<span class="variable">$key</span>, <span class="keyword">$this</span>-&gt;data)) &#123;</span><br><span class="line">			<span class="keyword">echo</span> <span class="keyword">__METHOD__</span> . PHP_EOL;</span><br><span class="line">			<span class="keyword">return</span> <span class="keyword">$this</span>-&gt;data[<span class="variable">$key</span>];</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__isset</span>(<span class="params"><span class="variable">$key</span></span>)</span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="keyword">echo</span> <span class="keyword">__METHOD__</span> . PHP_EOL;</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">isset</span>(<span class="keyword">$this</span>-&gt;data[<span class="variable">$key</span>]);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__unset</span>(<span class="params"><span class="variable">$key</span></span>)</span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="keyword">echo</span> <span class="keyword">__METHOD__</span> . PHP_EOL;</span><br><span class="line">		<span class="keyword">unset</span>(<span class="keyword">$this</span>-&gt;data[<span class="variable">$key</span>]);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable">$object</span> = <span class="keyword">new</span> <span class="keyword">Object</span>();</span><br><span class="line"><span class="variable">$object</span>-&gt;property = <span class="string">&#x27;This is the property of the object.&#x27;</span>;</span><br><span class="line"><span class="variable">$object</span>-&gt;property;</span><br><span class="line"><span class="keyword">isset</span>(<span class="variable">$object</span>-&gt;property);</span><br><span class="line"><span class="keyword">unset</span>(<span class="variable">$object</span>-&gt;property);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»“æœ</span></span><br><span class="line"><span class="keyword">Object</span>::__set</span><br><span class="line"><span class="keyword">Object</span>::__get</span><br><span class="line"><span class="keyword">Object</span>::__isset</span><br><span class="line"><span class="keyword">Object</span>::__unset</span><br></pre></td></tr></table></figure>
<h3 id="sleep-å’Œ-wakeup"><a href="#sleep-å’Œ-wakeup" class="headerlink" title="__sleep() å’Œ __wakeup"></a><code>__sleep()</code> å’Œ <code>__wakeup</code></h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Object</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">protected</span> <span class="variable">$link</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="variable">$server</span>, <span class="variable">$username</span>, <span class="variable">$password</span>, <span class="variable">$database</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params"><span class="variable">$server</span>, <span class="variable">$username</span>, <span class="variable">$password</span>, <span class="variable">$database</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="keyword">__METHOD__</span> . PHP_EOL;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;server = <span class="variable">$server</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;username = <span class="variable">$username</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;password = <span class="variable">$password</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;database = <span class="variable">$database</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__sleep</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="keyword">__METHOD__</span> . PHP_EOL;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> [<span class="string">&#x27;server&#x27;</span>, <span class="string">&#x27;username&#x27;</span>, <span class="string">&#x27;password&#x27;</span>, <span class="string">&#x27;database&#x27;</span>];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__wakeup</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="keyword">__METHOD__</span> . PHP_EOL;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;connect();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">function</span> <span class="title">connect</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="keyword">__METHOD__</span> . PHP_EOL;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;link = mysqli_connect(</span><br><span class="line">            <span class="keyword">$this</span>-&gt;server,</span><br><span class="line">            <span class="keyword">$this</span>-&gt;username,</span><br><span class="line">            <span class="keyword">$this</span>-&gt;password</span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable">$object</span> = <span class="keyword">new</span> <span class="keyword">Object</span>(<span class="string">&#x27;localhost&#x27;</span>, <span class="string">&#x27;root&#x27;</span>, <span class="string">&#x27;&#x27;</span>, <span class="string">&#x27;test&#x27;</span>);</span><br><span class="line"><span class="variable">$serialize</span> = serialize(<span class="variable">$object</span>);</span><br><span class="line">unserialize(<span class="variable">$serialize</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»“æœ</span></span><br><span class="line"><span class="keyword">Object</span>::__construct</span><br><span class="line"><span class="keyword">Object</span>::__sleep</span><br><span class="line"><span class="keyword">Object</span>::__wakeup</span><br><span class="line"><span class="keyword">Object</span>::connect</span><br></pre></td></tr></table></figure>
<h3 id="toString-NaN"><a href="#toString-NaN" class="headerlink" title="__toString()"></a><code>__toString()</code></h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Object</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__toString</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">__METHOD__</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable">$object</span> = <span class="keyword">new</span> <span class="keyword">Object</span>();</span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$object</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»“æœ</span></span><br><span class="line"><span class="keyword">Object</span>::__toString</span><br></pre></td></tr></table></figure>
<h3 id="invoke"><a href="#invoke" class="headerlink" title="__invoke()"></a><code>__invoke()</code></h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Object</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__invoke</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="keyword">echo</span> <span class="keyword">__METHOD__</span> . PHP_EOL;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable">$object</span> = <span class="keyword">new</span> <span class="keyword">Object</span>();</span><br><span class="line">var_dump(is_callable(<span class="variable">$object</span>()));</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»“æœ</span></span><br><span class="line"><span class="keyword">Object</span>::__invoke</span><br><span class="line"><span class="keyword">bool</span>(<span class="literal">false</span>)</span><br></pre></td></tr></table></figure>
<h3 id="set-state"><a href="#set-state" class="headerlink" title="__set_state()"></a><code>__set_state()</code></h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Object</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="variable">$a</span>;</span><br><span class="line">	<span class="keyword">public</span> <span class="variable">$b</span>;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">__set_state</span>(<span class="params"><span class="keyword">array</span> <span class="variable">$array</span></span>)</span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="keyword">echo</span> <span class="keyword">__METHOD__</span> . PHP_EOL;</span><br><span class="line">		<span class="variable">$object</span> = <span class="keyword">new</span> <span class="keyword">Object</span>();</span><br><span class="line">		<span class="variable">$object</span>-&gt;a = <span class="variable">$array</span>[<span class="string">&#x27;a&#x27;</span>];</span><br><span class="line">		<span class="variable">$object</span>-&gt;b = <span class="variable">$array</span>[<span class="string">&#x27;b&#x27;</span>];</span><br><span class="line"></span><br><span class="line">		<span class="keyword">return</span> <span class="variable">$object</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable">$object</span> = <span class="keyword">new</span> <span class="keyword">Object</span>();</span><br><span class="line"><span class="variable">$object</span>-&gt;a = <span class="string">&#x27;this is a&#x27;</span>;</span><br><span class="line"><span class="variable">$object</span>-&gt;b = <span class="string">&#x27;this is b&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">eval</span>(<span class="string">&#x27;$b = &#x27;</span> . var_export(<span class="variable">$object</span>, <span class="literal">true</span>) . <span class="string">&#x27;;&#x27;</span>);</span><br><span class="line">var_dump(<span class="variable">$b</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»“æœ</span></span><br><span class="line"><span class="keyword">Object</span>::__set_state</span><br><span class="line"><span class="keyword">object</span>(<span class="keyword">Object</span>)<span class="comment">#2 (2) &#123;</span></span><br><span class="line">  [<span class="string">&quot;a&quot;</span>]=&gt;</span><br><span class="line">  <span class="keyword">string</span>(<span class="number">9</span>) <span class="string">&quot;this is a&quot;</span></span><br><span class="line">  [<span class="string">&quot;b&quot;</span>]=&gt;</span><br><span class="line">  <span class="keyword">string</span>(<span class="number">9</span>) <span class="string">&quot;this is b&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="clone"><a href="#clone" class="headerlink" title="__clone()"></a><code>__clone()</code></h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Object</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="built_in">static</span> <span class="variable">$count</span> = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">public</span> <span class="variable">$instance</span>;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="keyword">__METHOD__</span> . PHP_EOL;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;instance = ++<span class="built_in">self</span>::<span class="variable">$count</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__clone</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="keyword">__METHOD__</span> . PHP_EOL;</span><br><span class="line">		<span class="keyword">$this</span>-&gt;instance = ++<span class="built_in">self</span>::<span class="variable">$count</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Cloneable</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="variable">$object1</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$object2</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="keyword">__METHOD__</span> . PHP_EOL;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__clone</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="keyword">__METHOD__</span> . PHP_EOL;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å¼ºåˆ¶å¤åˆ¶ä¸€ä»½ this-&gt;objectï¼Œå¦åˆ™ä»ç„¶æŒ‡å‘åŒä¸€ä¸ªå¯¹è±¡</span></span><br><span class="line">		<span class="keyword">$this</span>-&gt;object1 = <span class="keyword">clone</span> <span class="keyword">$this</span>-&gt;object1;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable">$cloneable</span> = <span class="keyword">new</span> Cloneable();</span><br><span class="line"><span class="variable">$cloneable</span>-&gt;object1 = <span class="keyword">new</span> <span class="keyword">Object</span>();</span><br><span class="line"><span class="variable">$cloneable</span>-&gt;object2 = <span class="keyword">new</span> <span class="keyword">Object</span>();</span><br><span class="line"></span><br><span class="line"><span class="variable">$clone</span> = <span class="keyword">clone</span> <span class="variable">$cloneable</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">print</span> <span class="string">&quot;Original Object:\n&quot;</span>;</span><br><span class="line">var_dump(<span class="variable">$cloneable</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">print</span> <span class="string">&quot;Cloned Object:\n&quot;</span>;</span><br><span class="line">var_dump(<span class="variable">$clone</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»“æœ</span></span><br><span class="line">Cloneable::__construct</span><br><span class="line"><span class="keyword">Object</span>::__construct</span><br><span class="line"><span class="keyword">Object</span>::__construct</span><br><span class="line">Cloneable::__clone</span><br><span class="line"><span class="keyword">Object</span>::__clone</span><br><span class="line">Original <span class="keyword">Object</span>:</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Cloneable</span>#1 (2) </span>&#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="variable">$object1</span> =&gt;</span><br><span class="line">  <span class="class"><span class="keyword">class</span> <span class="title">Object</span>#2 (1) </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$instance</span> =&gt;</span><br><span class="line">    <span class="keyword">int</span>(<span class="number">1</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">public</span> <span class="variable">$object2</span> =&gt;</span><br><span class="line">  <span class="class"><span class="keyword">class</span> <span class="title">Object</span>#3 (1) </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$instance</span> =&gt;</span><br><span class="line">    <span class="keyword">int</span>(<span class="number">2</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">Cloned <span class="keyword">Object</span>:</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Cloneable</span>#4 (2) </span>&#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="variable">$object1</span> =&gt;</span><br><span class="line">  <span class="class"><span class="keyword">class</span> <span class="title">Object</span>#5 (1) </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$instance</span> =&gt;</span><br><span class="line">    <span class="keyword">int</span>(<span class="number">3</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">public</span> <span class="variable">$object2</span> =&gt;</span><br><span class="line">  <span class="class"><span class="keyword">class</span> <span class="title">Object</span>#3 (1) </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$instance</span> =&gt;</span><br><span class="line">    <span class="keyword">int</span>(<span class="number">2</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="debugInfo"><a href="#debugInfo" class="headerlink" title="__debugInfo()"></a><code>__debugInfo()</code></h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line">date_default_timezone_set(<span class="string">&#x27;PRC&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Object</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="variable">$year</span>, <span class="variable">$month</span>, <span class="variable">$day</span>, <span class="variable">$hour</span>, <span class="variable">$minute</span>, <span class="variable">$second</span>;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__debugInfo</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="variable">$date</span> = <span class="keyword">$this</span>-&gt;year . <span class="string">&#x27;-&#x27;</span> . <span class="keyword">$this</span>-&gt;month . <span class="string">&#x27;-&#x27;</span> . <span class="keyword">$this</span>-&gt;day;</span><br><span class="line">		<span class="variable">$time</span> = <span class="keyword">$this</span>-&gt;hour . <span class="string">&#x27;:&#x27;</span> . <span class="keyword">$this</span>-&gt;minute . <span class="string">&#x27;:&#x27;</span> . <span class="keyword">$this</span>-&gt;second;</span><br><span class="line">		<span class="variable">$datetime</span> = <span class="variable">$date</span> . <span class="string">&#x27; &#x27;</span> . <span class="variable">$time</span>;</span><br><span class="line">		<span class="keyword">return</span> [</span><br><span class="line">			<span class="string">&#x27;date&#x27;</span> =&gt; <span class="variable">$date</span>,</span><br><span class="line">			<span class="string">&#x27;time&#x27;</span> =&gt; <span class="variable">$time</span>,</span><br><span class="line">			<span class="string">&#x27;datetime&#x27;</span> =&gt; <span class="variable">$datetime</span>,</span><br><span class="line">			<span class="string">&#x27;property&#x27;</span> =&gt; call_user_func(<span class="string">&#x27;get_object_vars&#x27;</span>, <span class="keyword">$this</span>),</span><br><span class="line">		];</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable">$object</span> = <span class="keyword">new</span> <span class="keyword">Object</span>();</span><br><span class="line"><span class="variable">$object</span>-&gt;year = date(<span class="string">&#x27;Y&#x27;</span>);</span><br><span class="line"><span class="variable">$object</span>-&gt;month = date(<span class="string">&#x27;m&#x27;</span>);</span><br><span class="line"><span class="variable">$object</span>-&gt;day = date(<span class="string">&#x27;d&#x27;</span>);</span><br><span class="line"><span class="variable">$object</span>-&gt;hour = date(<span class="string">&#x27;H&#x27;</span>);</span><br><span class="line"><span class="variable">$object</span>-&gt;minute = date(<span class="string">&#x27;i&#x27;</span>);</span><br><span class="line"><span class="variable">$object</span>-&gt;second = date(<span class="string">&#x27;s&#x27;</span>);</span><br><span class="line">var_dump(<span class="variable">$object</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»“æœ</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Object</span>#1 (4) </span>&#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="variable">$date</span> =&gt;</span><br><span class="line">  <span class="keyword">string</span>(<span class="number">10</span>) <span class="string">&quot;2018-01-18&quot;</span></span><br><span class="line">  <span class="keyword">public</span> <span class="variable">$time</span> =&gt;</span><br><span class="line">  <span class="keyword">string</span>(<span class="number">8</span>) <span class="string">&quot;17:27:45&quot;</span></span><br><span class="line">  <span class="keyword">public</span> <span class="variable">$datetime</span> =&gt;</span><br><span class="line">  <span class="keyword">string</span>(<span class="number">19</span>) <span class="string">&quot;2018-01-18 17:27:45&quot;</span></span><br><span class="line">  <span class="keyword">public</span> <span class="variable">$property</span> =&gt;</span><br><span class="line">  <span class="keyword">array</span>(<span class="number">6</span>) &#123;</span><br><span class="line">    <span class="string">&#x27;year&#x27;</span> =&gt;</span><br><span class="line">    <span class="keyword">string</span>(<span class="number">4</span>) <span class="string">&quot;2018&quot;</span></span><br><span class="line">    <span class="string">&#x27;month&#x27;</span> =&gt;</span><br><span class="line">    <span class="keyword">string</span>(<span class="number">2</span>) <span class="string">&quot;01&quot;</span></span><br><span class="line">    <span class="string">&#x27;day&#x27;</span> =&gt;</span><br><span class="line">    <span class="keyword">string</span>(<span class="number">2</span>) <span class="string">&quot;18&quot;</span></span><br><span class="line">    <span class="string">&#x27;hour&#x27;</span> =&gt;</span><br><span class="line">    <span class="keyword">string</span>(<span class="number">2</span>) <span class="string">&quot;17&quot;</span></span><br><span class="line">    <span class="string">&#x27;minute&#x27;</span> =&gt;</span><br><span class="line">    <span class="keyword">string</span>(<span class="number">2</span>) <span class="string">&quot;27&quot;</span></span><br><span class="line">    <span class="string">&#x27;second&#x27;</span> =&gt;</span><br><span class="line">    <span class="keyword">string</span>(<span class="number">2</span>) <span class="string">&quot;45&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="é­”æœ¯å¸¸é‡"><a href="#é­”æœ¯å¸¸é‡" class="headerlink" title="é­”æœ¯å¸¸é‡"></a>é­”æœ¯å¸¸é‡</h2><table>
<thead>
<tr>
<th>åç§°</th>
<th>è¯´æ˜</th>
<th>å¤‡æ³¨</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>__LINE__</code></td>
<td>æ–‡ä»¶ä¸­çš„å½“å‰è¡Œå·</td>
<td></td>
</tr>
<tr>
<td><code>__FILE__</code></td>
<td>æ–‡ä»¶çš„å®Œæ•´è·¯å¾„å’Œæ–‡ä»¶å</td>
<td></td>
</tr>
<tr>
<td><code>__DIR__</code></td>
<td>æ–‡ä»¶æ‰€åœ¨çš„ç›®å½•</td>
<td></td>
</tr>
<tr>
<td><code>__FUNCTION__</code></td>
<td>å‡½æ•°åç§°</td>
<td></td>
</tr>
<tr>
<td><code>__CLASS__</code></td>
<td>ç±»çš„åç§°</td>
<td></td>
</tr>
<tr>
<td><code>__TRAIT__</code></td>
<td><code>Trait</code> çš„åå­—</td>
<td></td>
</tr>
<tr>
<td><code>__METHOD__</code></td>
<td>ç±»çš„æ–¹æ³•å</td>
<td></td>
</tr>
<tr>
<td><code>__NAMESPACE__</code></td>
<td>å½“å‰å‘½åç©ºé—´çš„åç§°</td>
</tr>
</tbody>
</table>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> <span class="title">App</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">trait</span> <span class="title">ObjectTrait</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getTrait</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="keyword">__TRAIT__</span> . PHP_EOL;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Object</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">use</span> <span class="title">ObjectTrait</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="keyword">__LINE__</span> . PHP_EOL;</span><br><span class="line">        <span class="keyword">echo</span> <span class="keyword">__FILE__</span> . PHP_EOL;</span><br><span class="line">        <span class="keyword">echo</span> <span class="keyword">__DIR__</span> . PHP_EOL;</span><br><span class="line">        <span class="keyword">echo</span> <span class="keyword">__FUNCTION__</span> . PHP_EOL;</span><br><span class="line">        <span class="keyword">echo</span> <span class="keyword">__CLASS__</span> . PHP_EOL;</span><br><span class="line">        <span class="keyword">echo</span> <span class="keyword">$this</span>-&gt;getTrait();</span><br><span class="line">        <span class="keyword">echo</span> <span class="keyword">__METHOD__</span> . PHP_EOL;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable">$object</span> = <span class="keyword">new</span> <span class="keyword">Object</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»“æœ</span></span><br><span class="line"><span class="number">19</span></span><br><span class="line">/Users/xxx/Downloads/test/vscode.php</span><br><span class="line">/Users/xxx/Downloads/test</span><br><span class="line">__construct</span><br><span class="line">App\<span class="keyword">Object</span></span><br><span class="line">App\ObjectTrait</span><br><span class="line">App\<span class="keyword">Object</span>::__construct</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>php</category>
      </categories>
      <tags>
        <tag>php</tag>
      </tags>
  </entry>
  <entry>
    <title>PHP æ–¹æ³•æ£€æµ‹å‡½æ•°</title>
    <url>/2018/03/04/php-method-detection-function/</url>
    <content><![CDATA[<p>PHP ä¸­ä¸€å…±æä¾›äº† 3 ç§æ–¹æ³•æ£€æµ‹å‡½æ•°ï¼Œåˆ†åˆ«æ˜¯ï¼š<code>function_exists / method_exists / is_callable</code>ï¼Œè¿™ä¸‰ä¸ªå‡½æ•°åˆ†åˆ«é€‚ç”¨äºä¸åŒçš„åœºæ™¯ï¼Œç°å°†å…¶ç”¨æ³•åšä¸€è¯´æ˜ã€‚</p>
<span id="more"></span>
<h2 id="æ£€æµ‹å‡½æ•°æ˜¯å¦å­˜åœ¨"><a href="#æ£€æµ‹å‡½æ•°æ˜¯å¦å­˜åœ¨" class="headerlink" title="æ£€æµ‹å‡½æ•°æ˜¯å¦å­˜åœ¨"></a>æ£€æµ‹å‡½æ•°æ˜¯å¦å­˜åœ¨</h2><blockquote>
<p>è¿™ç±»å‡½æ•°ä¸€èˆ¬æŒ‡ PHP å†…æ ¸æä¾›çš„ä¸€äº›å·¥å…·å‡½æ•°æˆ–è€…ç”¨æˆ·è‡ªå®šä¹‰çš„å‡½æ•°</p>
</blockquote>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (! function_exists(<span class="string">&#x27;dd&#x27;</span>)) &#123;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">dd</span>(<span class="params">...<span class="variable">$vars</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">foreach</span> (<span class="variable">$vars</span> <span class="keyword">as</span> <span class="variable">$var</span>) &#123;</span><br><span class="line">            print_r(<span class="variable">$var</span>);</span><br><span class="line">            <span class="keyword">echo</span> PHP_EOL;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">die</span>(<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">dd(<span class="string">&#x27;test&#x27;</span>, <span class="string">&#x27;hello&#x27;</span>, <span class="string">&#x27;world&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»“æœ</span></span><br><span class="line">test</span><br><span class="line">hello</span><br><span class="line">world</span><br></pre></td></tr></table></figure>
<h2 id="æ£€æµ‹ç±»çš„æ–¹æ³•æ˜¯å¦å­˜åœ¨"><a href="#æ£€æµ‹ç±»çš„æ–¹æ³•æ˜¯å¦å­˜åœ¨" class="headerlink" title="æ£€æµ‹ç±»çš„æ–¹æ³•æ˜¯å¦å­˜åœ¨"></a>æ£€æµ‹ç±»çš„æ–¹æ³•æ˜¯å¦å­˜åœ¨</h2><h3 id="èƒ½æ£€æµ‹å‡ºçš„æ–¹æ³•"><a href="#èƒ½æ£€æµ‹å‡ºçš„æ–¹æ³•" class="headerlink" title="èƒ½æ£€æµ‹å‡ºçš„æ–¹æ³•"></a>èƒ½æ£€æµ‹å‡ºçš„æ–¹æ³•</h3><blockquote>
<p><code>method_exists()</code> èƒ½æ£€æµ‹å‡ºå¯¹è±¡ä¸­çš„ <code>static</code>, <code>final</code>, <code>abstract</code> æ–¹æ³•ï¼Œè¿˜èƒ½æ£€æµ‹å‡º <code>public</code>, <code>protected</code>, <code>private</code> ä¿®é¥°çš„æ–¹æ³•</p>
</blockquote>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Foo</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (method_exists(<span class="keyword">$this</span>, <span class="string">&#x27;publicMethod&#x27;</span>)) &#123;</span><br><span class="line">            <span class="keyword">$this</span>-&gt;publicMethod();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">abstract</span> <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">abstractMethod</span>(<span class="params"></span>)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">final</span> <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">finalMethod</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Bar</span> <span class="keyword">extends</span> <span class="title">Foo</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">publicMethod</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> <span class="function"><span class="keyword">function</span> <span class="title">protectedMethod</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">function</span> <span class="title">privateMethod</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">abstractMethod</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">staticMethod</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable">$result</span> = [</span><br><span class="line">    method_exists(Bar::class, <span class="string">&#x27;__construct&#x27;</span>),</span><br><span class="line">    method_exists(Bar::class, <span class="string">&#x27;publicMethod&#x27;</span>),</span><br><span class="line">    method_exists(Bar::class, <span class="string">&#x27;protectedMethod&#x27;</span>),</span><br><span class="line">    method_exists(Bar::class, <span class="string">&#x27;privateMethod&#x27;</span>),</span><br><span class="line">    method_exists(Bar::class, <span class="string">&#x27;abstractMethod&#x27;</span>),</span><br><span class="line">    method_exists(Bar::class, <span class="string">&#x27;staticMethod&#x27;</span>),</span><br><span class="line">    method_exists(Bar::class, <span class="string">&#x27;finalMethod&#x27;</span>),</span><br><span class="line">];</span><br><span class="line">var_dump(<span class="variable">$result</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»“æœ</span></span><br><span class="line"><span class="keyword">array</span>(<span class="number">7</span>) &#123;</span><br><span class="line">  [<span class="number">0</span>] =&gt;</span><br><span class="line">  <span class="keyword">bool</span>(<span class="literal">true</span>)</span><br><span class="line">  [<span class="number">1</span>] =&gt;</span><br><span class="line">  <span class="keyword">bool</span>(<span class="literal">true</span>)</span><br><span class="line">  [<span class="number">2</span>] =&gt;</span><br><span class="line">  <span class="keyword">bool</span>(<span class="literal">true</span>)</span><br><span class="line">  [<span class="number">3</span>] =&gt;</span><br><span class="line">  <span class="keyword">bool</span>(<span class="literal">true</span>)</span><br><span class="line">  [<span class="number">4</span>] =&gt;</span><br><span class="line">  <span class="keyword">bool</span>(<span class="literal">true</span>)</span><br><span class="line">  [<span class="number">5</span>] =&gt;</span><br><span class="line">  <span class="keyword">bool</span>(<span class="literal">true</span>)</span><br><span class="line">  [<span class="number">6</span>] =&gt;</span><br><span class="line">  <span class="keyword">bool</span>(<span class="literal">true</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="ä¸èƒ½æ£€æµ‹å‡ºçš„æ–¹æ³•"><a href="#ä¸èƒ½æ£€æµ‹å‡ºçš„æ–¹æ³•" class="headerlink" title="ä¸èƒ½æ£€æµ‹å‡ºçš„æ–¹æ³•"></a>ä¸èƒ½æ£€æµ‹å‡ºçš„æ–¹æ³•</h2><blockquote>
<p><code>method_exists()</code> æ— æ³•æ£€æµ‹å‡ºä½¿ç”¨é­”æ³•æ–¹æ³• <code>__call</code> è°ƒç”¨çš„å‡½æ•°</p>
</blockquote>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Foo</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getName</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">__METHOD__</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__call</span>(<span class="params"><span class="variable">$method</span>, <span class="variable">$arguments</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (method_exists(<span class="keyword">$this</span>, <span class="variable">$method</span>)) &#123;</span><br><span class="line">            <span class="keyword">return</span> call_user_func_array([<span class="keyword">$this</span>, <span class="variable">$method</span>], <span class="variable">$arguments</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable">$foo</span> = <span class="keyword">new</span> Foo();</span><br><span class="line">var_dump(<span class="variable">$foo</span>-&gt;getName());</span><br><span class="line">var_dump(<span class="variable">$foo</span>-&gt;getDescription());</span><br><span class="line">var_dump(method_exists(<span class="variable">$foo</span>, <span class="string">&#x27;getName&#x27;</span>));</span><br><span class="line">var_dump(method_exists(<span class="variable">$foo</span>, <span class="string">&#x27;getDescription&#x27;</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»“æœ</span></span><br><span class="line"><span class="keyword">string</span>(<span class="number">12</span>) <span class="string">&quot;Foo::getName&quot;</span></span><br><span class="line"><span class="literal">NULL</span></span><br><span class="line"><span class="keyword">bool</span>(<span class="literal">true</span>)</span><br><span class="line"><span class="keyword">bool</span>(<span class="literal">false</span>)</span><br></pre></td></tr></table></figure>
<h2 id="æ£€æµ‹å‚æ•°æ˜¯å¦ä¸ºåˆæ³•çš„å¯è°ƒç”¨ç»“æ„"><a href="#æ£€æµ‹å‚æ•°æ˜¯å¦ä¸ºåˆæ³•çš„å¯è°ƒç”¨ç»“æ„" class="headerlink" title="æ£€æµ‹å‚æ•°æ˜¯å¦ä¸ºåˆæ³•çš„å¯è°ƒç”¨ç»“æ„"></a>æ£€æµ‹å‚æ•°æ˜¯å¦ä¸ºåˆæ³•çš„å¯è°ƒç”¨ç»“æ„</h2><h3 id="é»˜è®¤è°ƒç”¨"><a href="#é»˜è®¤è°ƒç”¨" class="headerlink" title="é»˜è®¤è°ƒç”¨"></a>é»˜è®¤è°ƒç”¨</h3><blockquote>
<p><code>is_callable()</code> å¯ä»¥åˆ¤æ–­å‡ºæ˜¯å¦èƒ½å¤Ÿè¿›è¡Œè°ƒç”¨ã€‚é»˜è®¤ç¬¬äºŒä¸ªå‚æ•°ä¸º <code>false</code>ï¼Œè¡¨ç¤ºè¯¥å›è°ƒæ“ä½œæœ‰æƒé™èƒ½å¤Ÿè¢«è°ƒç”¨ï¼Œå¦‚æœä¸º <code>true</code> çš„è¯ï¼Œä»…ä»…éªŒè¯ä¼ é€’çš„å¯èƒ½æ˜¯å‡½æ•°æˆ–æ–¹æ³•ï¼Œè¡¨ç¤ºåªæ£€æµ‹å…¶å­˜åœ¨å…·æœ‰å¯å›è°ƒçš„æ ¼å¼</p>
</blockquote>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Foo</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (method_exists(<span class="keyword">$this</span>, <span class="string">&#x27;publicMethod&#x27;</span>)) &#123;</span><br><span class="line">            <span class="keyword">$this</span>-&gt;publicMethod();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">abstract</span> <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">abstractMethod</span>(<span class="params"></span>)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">final</span> <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">finalMethod</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Bar</span> <span class="keyword">extends</span> <span class="title">Foo</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">publicMethod</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> <span class="function"><span class="keyword">function</span> <span class="title">protectedMethod</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">function</span> <span class="title">privateMethod</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">abstractMethod</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">staticMethod</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable">$bar</span> = <span class="keyword">new</span> Bar();</span><br><span class="line"><span class="variable">$callables</span> = [</span><br><span class="line">    is_callable([<span class="variable">$bar</span>, <span class="string">&#x27;__construct&#x27;</span>], <span class="literal">false</span>, <span class="variable">$a</span>),</span><br><span class="line">    is_callable([<span class="variable">$bar</span>, <span class="string">&#x27;publicMethod&#x27;</span>], <span class="literal">false</span>, <span class="variable">$b</span>),</span><br><span class="line">    is_callable([<span class="variable">$bar</span>, <span class="string">&#x27;protectedMethod&#x27;</span>], <span class="literal">false</span>, <span class="variable">$c</span>),</span><br><span class="line">    is_callable([<span class="variable">$bar</span>, <span class="string">&#x27;privateMethod&#x27;</span>], <span class="literal">false</span>, <span class="variable">$d</span>),</span><br><span class="line">    is_callable([<span class="variable">$bar</span>, <span class="string">&#x27;abstractMethod&#x27;</span>], <span class="literal">false</span>, <span class="variable">$e</span>),</span><br><span class="line">    is_callable([<span class="variable">$bar</span>, <span class="string">&#x27;staticMethod&#x27;</span>], <span class="literal">false</span>, <span class="variable">$f</span>),</span><br><span class="line">    is_callable([<span class="variable">$bar</span>, <span class="string">&#x27;finalMethod&#x27;</span>], <span class="literal">false</span>, <span class="variable">$g</span>),</span><br><span class="line">];</span><br><span class="line"><span class="variable">$names</span> = [<span class="variable">$a</span>, <span class="variable">$b</span>, <span class="variable">$c</span>, <span class="variable">$d</span>, <span class="variable">$e</span>, <span class="variable">$f</span>, <span class="variable">$g</span>];</span><br><span class="line">var_dump(<span class="variable">$callables</span>);</span><br><span class="line">var_dump(<span class="variable">$names</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»“æœ</span></span><br><span class="line"><span class="keyword">array</span>(<span class="number">7</span>) &#123;</span><br><span class="line">  [<span class="number">0</span>] =&gt;</span><br><span class="line">  <span class="keyword">bool</span>(<span class="literal">true</span>)</span><br><span class="line">  [<span class="number">1</span>] =&gt;</span><br><span class="line">  <span class="keyword">bool</span>(<span class="literal">true</span>)</span><br><span class="line">  [<span class="number">2</span>] =&gt;</span><br><span class="line">  <span class="keyword">bool</span>(<span class="literal">false</span>)</span><br><span class="line">  [<span class="number">3</span>] =&gt;</span><br><span class="line">  <span class="keyword">bool</span>(<span class="literal">false</span>)</span><br><span class="line">  [<span class="number">4</span>] =&gt;</span><br><span class="line">  <span class="keyword">bool</span>(<span class="literal">true</span>)</span><br><span class="line">  [<span class="number">5</span>] =&gt;</span><br><span class="line">  <span class="keyword">bool</span>(<span class="literal">true</span>)</span><br><span class="line">  [<span class="number">6</span>] =&gt;</span><br><span class="line">  <span class="keyword">bool</span>(<span class="literal">true</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">array</span>(<span class="number">7</span>) &#123;</span><br><span class="line">  [<span class="number">0</span>] =&gt;</span><br><span class="line">  <span class="keyword">string</span>(<span class="number">16</span>) <span class="string">&quot;Bar::__construct&quot;</span></span><br><span class="line">  [<span class="number">1</span>] =&gt;</span><br><span class="line">  <span class="keyword">string</span>(<span class="number">17</span>) <span class="string">&quot;Bar::publicMethod&quot;</span></span><br><span class="line">  [<span class="number">2</span>] =&gt;</span><br><span class="line">  <span class="keyword">string</span>(<span class="number">20</span>) <span class="string">&quot;Bar::protectedMethod&quot;</span></span><br><span class="line">  [<span class="number">3</span>] =&gt;</span><br><span class="line">  <span class="keyword">string</span>(<span class="number">18</span>) <span class="string">&quot;Bar::privateMethod&quot;</span></span><br><span class="line">  [<span class="number">4</span>] =&gt;</span><br><span class="line">  <span class="keyword">string</span>(<span class="number">19</span>) <span class="string">&quot;Bar::abstractMethod&quot;</span></span><br><span class="line">  [<span class="number">5</span>] =&gt;</span><br><span class="line">  <span class="keyword">string</span>(<span class="number">17</span>) <span class="string">&quot;Bar::staticMethod&quot;</span></span><br><span class="line">  [<span class="number">6</span>] =&gt;</span><br><span class="line">  <span class="keyword">string</span>(<span class="number">16</span>) <span class="string">&quot;Bar::finalMethod&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="é­”æœ¯æ–¹æ³•ä¸­è°ƒç”¨"><a href="#é­”æœ¯æ–¹æ³•ä¸­è°ƒç”¨" class="headerlink" title="é­”æœ¯æ–¹æ³•ä¸­è°ƒç”¨"></a>é­”æœ¯æ–¹æ³•ä¸­è°ƒç”¨</h3><blockquote>
<p>å¦‚æœè®¾ç½®äº† <code>__call()</code> æ–¹æ³•çš„è¯ï¼Œé‚£ä¹ˆæ£€æµ‹å‡ºæ¥çš„ä»»ä½•æ–¹æ³•éƒ½æ˜¯è¿”å› <code>true</code></p>
</blockquote>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Foo</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (method_exists(<span class="keyword">$this</span>, <span class="string">&#x27;publicMethod&#x27;</span>)) &#123;</span><br><span class="line">            <span class="keyword">$this</span>-&gt;publicMethod();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">abstract</span> <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">abstractMethod</span>(<span class="params"></span>)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">final</span> <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">finalMethod</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Bar</span> <span class="keyword">extends</span> <span class="title">Foo</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">publicMethod</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> <span class="function"><span class="keyword">function</span> <span class="title">protectedMethod</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">function</span> <span class="title">privateMethod</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">abstractMethod</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">staticMethod</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__call</span>(<span class="params"><span class="variable">$method</span>, <span class="variable">$arguments</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable">$bar</span> = <span class="keyword">new</span> Bar();</span><br><span class="line"><span class="variable">$callables</span> = [</span><br><span class="line">    is_callable([<span class="variable">$bar</span>, <span class="string">&#x27;__construct&#x27;</span>], <span class="literal">false</span>, <span class="variable">$a</span>),</span><br><span class="line">    is_callable([<span class="variable">$bar</span>, <span class="string">&#x27;publicMethod&#x27;</span>], <span class="literal">false</span>, <span class="variable">$b</span>),</span><br><span class="line">    is_callable([<span class="variable">$bar</span>, <span class="string">&#x27;protectedMethod&#x27;</span>], <span class="literal">false</span>, <span class="variable">$c</span>),</span><br><span class="line">    is_callable([<span class="variable">$bar</span>, <span class="string">&#x27;privateMethod&#x27;</span>], <span class="literal">false</span>, <span class="variable">$d</span>),</span><br><span class="line">    is_callable([<span class="variable">$bar</span>, <span class="string">&#x27;abstractMethod&#x27;</span>], <span class="literal">false</span>, <span class="variable">$e</span>),</span><br><span class="line">    is_callable([<span class="variable">$bar</span>, <span class="string">&#x27;staticMethod&#x27;</span>], <span class="literal">false</span>, <span class="variable">$f</span>),</span><br><span class="line">    is_callable([<span class="variable">$bar</span>, <span class="string">&#x27;finalMethod&#x27;</span>], <span class="literal">false</span>, <span class="variable">$g</span>),</span><br><span class="line">    is_callable([<span class="variable">$bar</span>, <span class="string">&#x27;notExistMethod&#x27;</span>], <span class="literal">true</span>, <span class="variable">$h</span>),</span><br><span class="line">];</span><br><span class="line"><span class="variable">$names</span> = [<span class="variable">$a</span>, <span class="variable">$b</span>, <span class="variable">$c</span>, <span class="variable">$d</span>, <span class="variable">$e</span>, <span class="variable">$f</span>, <span class="variable">$g</span>, <span class="variable">$h</span>];</span><br><span class="line">var_dump(<span class="variable">$callables</span>);</span><br><span class="line">var_dump(<span class="variable">$names</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»“æœ</span></span><br><span class="line"><span class="keyword">array</span>(<span class="number">8</span>) &#123;</span><br><span class="line">  [<span class="number">0</span>] =&gt;</span><br><span class="line">  <span class="keyword">bool</span>(<span class="literal">true</span>)</span><br><span class="line">  [<span class="number">1</span>] =&gt;</span><br><span class="line">  <span class="keyword">bool</span>(<span class="literal">true</span>)</span><br><span class="line">  [<span class="number">2</span>] =&gt;</span><br><span class="line">  <span class="keyword">bool</span>(<span class="literal">true</span>)</span><br><span class="line">  [<span class="number">3</span>] =&gt;</span><br><span class="line">  <span class="keyword">bool</span>(<span class="literal">true</span>)</span><br><span class="line">  [<span class="number">4</span>] =&gt;</span><br><span class="line">  <span class="keyword">bool</span>(<span class="literal">true</span>)</span><br><span class="line">  [<span class="number">5</span>] =&gt;</span><br><span class="line">  <span class="keyword">bool</span>(<span class="literal">true</span>)</span><br><span class="line">  [<span class="number">6</span>] =&gt;</span><br><span class="line">  <span class="keyword">bool</span>(<span class="literal">true</span>)</span><br><span class="line">  [<span class="number">7</span>] =&gt;</span><br><span class="line">  <span class="keyword">bool</span>(<span class="literal">true</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">array</span>(<span class="number">8</span>) &#123;</span><br><span class="line">  [<span class="number">0</span>] =&gt;</span><br><span class="line">  <span class="keyword">string</span>(<span class="number">16</span>) <span class="string">&quot;Bar::__construct&quot;</span></span><br><span class="line">  [<span class="number">1</span>] =&gt;</span><br><span class="line">  <span class="keyword">string</span>(<span class="number">17</span>) <span class="string">&quot;Bar::publicMethod&quot;</span></span><br><span class="line">  [<span class="number">2</span>] =&gt;</span><br><span class="line">  <span class="keyword">string</span>(<span class="number">20</span>) <span class="string">&quot;Bar::protectedMethod&quot;</span></span><br><span class="line">  [<span class="number">3</span>] =&gt;</span><br><span class="line">  <span class="keyword">string</span>(<span class="number">18</span>) <span class="string">&quot;Bar::privateMethod&quot;</span></span><br><span class="line">  [<span class="number">4</span>] =&gt;</span><br><span class="line">  <span class="keyword">string</span>(<span class="number">19</span>) <span class="string">&quot;Bar::abstractMethod&quot;</span></span><br><span class="line">  [<span class="number">5</span>] =&gt;</span><br><span class="line">  <span class="keyword">string</span>(<span class="number">17</span>) <span class="string">&quot;Bar::staticMethod&quot;</span></span><br><span class="line">  [<span class="number">6</span>] =&gt;</span><br><span class="line">  <span class="keyword">string</span>(<span class="number">16</span>) <span class="string">&quot;Bar::finalMethod&quot;</span></span><br><span class="line">  [<span class="number">7</span>] =&gt;</span><br><span class="line">  <span class="keyword">string</span>(<span class="number">19</span>) <span class="string">&quot;Bar::notExistMethod&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="ç»“è®º"><a href="#ç»“è®º" class="headerlink" title="ç»“è®º"></a>ç»“è®º</h2><p>å¦‚æœ <code>is_callable()</code> çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ <code>string</code>ï¼Œé‚£ä¹ˆå’Œ <code>function_exists()</code> ç›¸ä¼¼ï¼›å¦‚æœæ˜¯æ•°ç»„åˆ™å’Œ <code>method_exists()</code> ç›¸ä¼¼ï¼Œä½†åˆæœ‰ä¸åŒ</p>
<ul>
<li><code>method_exists()</code> ä¸ä¼šè€ƒè™‘ç±»æ–¹æ³•çš„å®šä¹‰èŒƒå›´ <code>public</code>ã€<code>protected</code>ã€<code>private</code>ï¼Œåªè¦å­˜åœ¨å°±è¿”å› <code>true</code>ï¼›è€Œ <code>is_callable()</code> ä¼šåœ¨æ–¹æ³•æ˜¯è¢« <code>protected</code>ã€<code>private</code> æ—¶è¿”å› <code>false</code></li>
<li><code>is_callable()</code> ä¼šå»è°ƒç”¨ <code>__call()</code> é­”æœ¯æ–¹æ³•æ¥åˆ¤æ–­ï¼Œè€Œ <code>method_exists()</code> ä¸ä¼š</li>
</ul>
]]></content>
      <categories>
        <category>php</category>
      </categories>
      <tags>
        <tag>php</tag>
      </tags>
  </entry>
  <entry>
    <title>PHP å½’å¹¶æ’åº</title>
    <url>/2018/05/04/php-merge-sort/</url>
    <content><![CDATA[<p>å½’å¹¶æ’åºåˆ©ç”¨å½’å¹¶ï¼ˆåˆå¹¶ï¼‰çš„æ€æƒ³å®ç°çš„æ’åºæ–¹æ³•ã€‚å®ƒçš„åŸç†æ˜¯å‡è®¾åˆå§‹åºåˆ—å«æœ‰ <code>n</code> ä¸ªå…ƒç´ ï¼Œåˆ™å¯ä»¥çœ‹æˆæ˜¯ <code>n</code> ä¸ªæœ‰åºçš„å­åºåˆ—ï¼Œæ¯ä¸ªå­åºåˆ—çš„é•¿åº¦ä¸º <code>1</code>ï¼Œç„¶åä¸¤ä¸¤å½’å¹¶ï¼Œå¾—åˆ° <code>n / 2</code> ä¸ªé•¿åº¦ä¸º <code>2</code> æˆ– <code>1</code> çš„æœ‰åºåºåˆ—ï¼›å†ä¸¤ä¸¤å½’å¹¶ï¼Œâ€¦â€¦ï¼Œå¦‚æ­¤é‡å¤ï¼Œç›´è‡³å¾—åˆ°ä¸€ä¸ªé•¿åº¦ä¸º <code>n</code> çš„æœ‰åºåºåˆ—ä¸ºæ­¢ï¼Œè¿™ç§æ’åºæ–¹æ³•å°±æˆä¸ºä¸¤è·¯å½’å¹¶æ’åºã€‚</p>
<h2 id="æ¦‚å¿µ"><a href="#æ¦‚å¿µ" class="headerlink" title="æ¦‚å¿µ"></a>æ¦‚å¿µ</h2><p>å½’å¹¶æ’åºæ˜¯å»ºç«‹åœ¨å½’å¹¶æ“ä½œä¸Šçš„ä¸€ç§æœ‰æ•ˆçš„æ’åºç®—æ³•ã€‚è¯¥ç®—æ³•æ˜¯é‡‡ç”¨åˆ†æ²»æ³•ï¼ˆDivide and Conquerï¼‰çš„ä¸€ä¸ªéå¸¸å…¸å‹çš„åº”ç”¨ï¼Œä¸”å„å±‚åˆ†æ²»é€’å½’å¯ä»¥åŒæ—¶è¿›è¡Œã€‚åœ¨å½’å¹¶æ“ä½œä¸­å°†ä¸¤ä¸ªå·²ç»æ’åºçš„åºåˆ—åˆå¹¶æˆä¸€ä¸ªåºåˆ—çš„æ“ä½œã€‚å½’å¹¶æ’åºç®—æ³•ä¾èµ–å½’å¹¶æ“ä½œã€‚</p>
<h2 id="å®ç°"><a href="#å®ç°" class="headerlink" title="å®ç°"></a>å®ç°</h2><h3 id="æ–¹æ¡ˆä¸€"><a href="#æ–¹æ¡ˆä¸€" class="headerlink" title="æ–¹æ¡ˆä¸€"></a>æ–¹æ¡ˆä¸€</h3><p>é€’å½’æ³• - <code>Top-down</code>ï¼š</p>
<ol>
<li>ç”³è¯·ç©ºé—´ï¼Œä½¿å…¶å¤§å°ä¸ºä¸¤ä¸ªå·²ç»æ’åºåºåˆ—ä¹‹å’Œï¼Œè¯¥ç©ºé—´ç”¨æ¥å­˜æ”¾åˆå¹¶åçš„åºåˆ—</li>
<li>è®¾å®šä¸¤ä¸ªæŒ‡é’ˆï¼Œæœ€åˆä½ç½®åˆ†åˆ«ä¸ºä¸¤ä¸ªå·²ç»æ’åºåºåˆ—çš„èµ·å§‹ä½ç½®</li>
<li>æ¯”è¾ƒä¸¤ä¸ªæŒ‡é’ˆæ‰€æŒ‡å‘çš„å…ƒç´ ï¼Œé€‰æ‹©ç›¸å¯¹å°çš„å…ƒç´ æ”¾å…¥åˆ°åˆå¹¶ç©ºé—´ï¼Œå¹¶ç§»åŠ¨æŒ‡é’ˆåˆ°ä¸‹ä¸€ä½ç½®</li>
<li>é‡å¤æ­¥éª¤ <code>3</code> ç›´åˆ°æŸä¸€æŒ‡é’ˆåˆ°è¾¾åºåˆ—å°¾</li>
<li>å°†å¦ä¸€åºåˆ—å‰©ä¸‹çš„æ‰€æœ‰å…ƒç´ ç›´æ¥å¤åˆ¶åˆ°åˆå¹¶åºåˆ—å°¾</li>
</ol>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MergeSort</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ä¸»è¿è¡Œæ–¹æ³•ã€‚</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> void</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">main</span>(<span class="params"></span>): <span class="title">void</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="variable">$random</span> = <span class="built_in">self</span>::random();</span><br><span class="line">        <span class="variable">$array</span> = <span class="built_in">self</span>::sort(<span class="variable">$random</span>, <span class="number">0</span>, count(<span class="variable">$random</span>) - <span class="number">1</span>);</span><br><span class="line">        print_r(<span class="variable">$array</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å½’å¹¶æ’åºã€‚</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> array $array</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> int   $left</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> int   $right</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> array</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">sort</span>(<span class="params"><span class="keyword">array</span> &amp;<span class="variable">$array</span>, <span class="keyword">int</span> <span class="variable">$left</span>, <span class="keyword">int</span> <span class="variable">$right</span></span>): <span class="title">array</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="variable">$left</span> &lt; <span class="variable">$right</span>) &#123;</span><br><span class="line">            <span class="variable">$middle</span> = (<span class="keyword">int</span>)floor(<span class="variable">$left</span> + <span class="variable">$right</span>) / <span class="number">2</span>;</span><br><span class="line">            <span class="built_in">self</span>::sort(<span class="variable">$array</span>, <span class="variable">$left</span>, <span class="variable">$middle</span>);</span><br><span class="line">            <span class="built_in">self</span>::sort(<span class="variable">$array</span>, <span class="variable">$middle</span> + <span class="number">1</span>, <span class="variable">$right</span>);</span><br><span class="line">            <span class="built_in">self</span>::merge(<span class="variable">$array</span>, <span class="variable">$left</span>, <span class="variable">$middle</span>, <span class="variable">$right</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="variable">$array</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆå¹¶æ•°ç»„ã€‚</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> array $array</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> int   $left</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> int   $middle</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> int   $right</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> void</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">merge</span>(<span class="params"><span class="keyword">array</span> &amp;<span class="variable">$array</span>, <span class="keyword">int</span> <span class="variable">$left</span>, <span class="keyword">int</span> <span class="variable">$middle</span>, <span class="keyword">int</span> <span class="variable">$right</span></span>): <span class="title">void</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="variable">$i</span> = <span class="variable">$left</span>;</span><br><span class="line">        <span class="variable">$j</span> = <span class="variable">$middle</span> + <span class="number">1</span>;</span><br><span class="line">        <span class="variable">$k</span> = <span class="variable">$left</span>;</span><br><span class="line">        <span class="variable">$tmp</span> = [];</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> (<span class="variable">$i</span> &lt;= <span class="variable">$middle</span> &amp;&amp; <span class="variable">$j</span> &lt;= <span class="variable">$right</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (<span class="built_in">self</span>::compare(<span class="variable">$array</span>[<span class="variable">$i</span>], <span class="variable">$array</span>[<span class="variable">$j</span>]) &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="variable">$tmp</span>[<span class="variable">$k</span>++] = <span class="variable">$array</span>[<span class="variable">$j</span>++];</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="variable">$tmp</span>[<span class="variable">$k</span>++] = <span class="variable">$array</span>[<span class="variable">$i</span>++];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> (<span class="variable">$i</span> &lt;= <span class="variable">$middle</span>) &#123;</span><br><span class="line">            <span class="variable">$tmp</span>[<span class="variable">$k</span>++] = <span class="variable">$array</span>[<span class="variable">$i</span>++];</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> (<span class="variable">$j</span> &lt;= <span class="variable">$right</span>) &#123;</span><br><span class="line">            <span class="variable">$tmp</span>[<span class="variable">$k</span>++] = <span class="variable">$array</span>[<span class="variable">$j</span>++];</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="variable">$k</span> = <span class="variable">$left</span>; <span class="variable">$k</span> &lt;= <span class="variable">$right</span>; <span class="variable">$k</span>++) &#123;</span><br><span class="line">            <span class="variable">$array</span>[<span class="variable">$k</span>] = <span class="variable">$tmp</span>[<span class="variable">$k</span>];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ¯”è¾ƒå¤§å°ã€‚</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> int $x</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> int $y</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> int</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">compare</span>(<span class="params"><span class="keyword">int</span> <span class="variable">$x</span>, <span class="keyword">int</span> <span class="variable">$y</span></span>): <span class="title">int</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable">$x</span> &lt;=&gt; <span class="variable">$y</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * äº’æ¢ä½ç½®ã€‚</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> int $x</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> int $y</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> void</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">swap</span>(<span class="params"><span class="keyword">int</span> &amp;<span class="variable">$x</span>, <span class="keyword">int</span> &amp;<span class="variable">$y</span></span>): <span class="title">void</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="variable">$x</span> !== <span class="variable">$y</span>) &#123;</span><br><span class="line">            <span class="variable">$t</span> = <span class="variable">$x</span>;</span><br><span class="line">            <span class="variable">$x</span> = <span class="variable">$y</span>;</span><br><span class="line">            <span class="variable">$y</span> = <span class="variable">$t</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ç”Ÿæˆéšæœºæ•°ç»„ã€‚</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> int $low</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> int $high</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> int $num</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> array</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">random</span>(<span class="params"><span class="keyword">int</span> <span class="variable">$low</span> = <span class="number">1</span>, <span class="keyword">int</span> <span class="variable">$high</span> = <span class="number">9999</span>, <span class="keyword">int</span> <span class="variable">$num</span> = <span class="number">10</span></span>): <span class="title">array</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="variable">$num</span> = <span class="variable">$num</span> &gt; <span class="variable">$high</span> ? <span class="variable">$high</span> : <span class="variable">$num</span>;</span><br><span class="line">        <span class="variable">$range</span> = range(<span class="variable">$low</span>, <span class="variable">$high</span>);</span><br><span class="line">        <span class="variable">$array</span> = array_rand(array_flip(<span class="variable">$range</span>), <span class="variable">$num</span>);</span><br><span class="line">        shuffle(<span class="variable">$array</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="variable">$array</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">MergeSort::main();</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»“æœ</span></span><br><span class="line"><span class="keyword">Array</span></span><br><span class="line">(</span><br><span class="line">    [<span class="number">0</span>] =&gt; <span class="number">1167</span></span><br><span class="line">    [<span class="number">1</span>] =&gt; <span class="number">2750</span></span><br><span class="line">    [<span class="number">2</span>] =&gt; <span class="number">3331</span></span><br><span class="line">    [<span class="number">3</span>] =&gt; <span class="number">4187</span></span><br><span class="line">    [<span class="number">4</span>] =&gt; <span class="number">4526</span></span><br><span class="line">    [<span class="number">5</span>] =&gt; <span class="number">5246</span></span><br><span class="line">    [<span class="number">6</span>] =&gt; <span class="number">5325</span></span><br><span class="line">    [<span class="number">7</span>] =&gt; <span class="number">6238</span></span><br><span class="line">    [<span class="number">8</span>] =&gt; <span class="number">7737</span></span><br><span class="line">    [<span class="number">9</span>] =&gt; <span class="number">9883</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p>ç”±äº <code>PHP</code> å…·å¤‡æ•°ç»„åˆ†å‰²å’Œæ•°ç»„åˆå¹¶è¿™æ ·çš„å‡½æ•°ï¼Œæ‰€ä»¥ä»¥ä¸Šçš„å®ç°å¯ä»¥æ›´åŠ ç®€å•</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MergeSort</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ä¸»è¿è¡Œæ–¹æ³•ã€‚</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> void</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">main</span>(<span class="params"></span>): <span class="title">void</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="variable">$random</span> = <span class="built_in">self</span>::random();</span><br><span class="line">        <span class="variable">$array</span> = <span class="built_in">self</span>::sort(<span class="variable">$random</span>);</span><br><span class="line">        print_r(<span class="variable">$array</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å½’å¹¶æ’åºã€‚</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> array $array</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> array</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">sort</span>(<span class="params"><span class="keyword">array</span> &amp;<span class="variable">$array</span></span>): <span class="title">array</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="variable">$count</span> = count(<span class="variable">$array</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (<span class="variable">$count</span> &lt;= <span class="number">1</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="variable">$array</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å‘ä¸Šå–æ•´ã€‚</span></span><br><span class="line">        <span class="variable">$middle</span> = (<span class="variable">$count</span> &gt;&gt; <span class="number">1</span>) + (<span class="variable">$count</span> &amp; <span class="number">1</span>);</span><br><span class="line">        <span class="variable">$chunk</span> = array_chunk(<span class="variable">$array</span>, <span class="variable">$middle</span>);</span><br><span class="line"></span><br><span class="line">        <span class="variable">$left</span> = <span class="built_in">self</span>::sort(<span class="variable">$chunk</span>[<span class="number">0</span>]);</span><br><span class="line">        <span class="variable">$right</span> = <span class="built_in">self</span>::sort(<span class="variable">$chunk</span>[<span class="number">1</span>]);</span><br><span class="line"></span><br><span class="line">        <span class="variable">$arr</span> = [];</span><br><span class="line">        <span class="keyword">while</span> (count(<span class="variable">$left</span>) &amp;&amp; count(<span class="variable">$right</span>)) &#123;</span><br><span class="line">            <span class="keyword">if</span> (<span class="built_in">self</span>::compare(<span class="variable">$left</span>[<span class="number">0</span>], <span class="variable">$right</span>[<span class="number">0</span>]) &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="variable">$arr</span>[] = array_shift(<span class="variable">$right</span>);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="variable">$arr</span>[] = array_shift(<span class="variable">$left</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> array_merge(<span class="variable">$arr</span>, <span class="variable">$left</span>, <span class="variable">$right</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ¯”è¾ƒå¤§å°ã€‚</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> int $x</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> int $y</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> int</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">compare</span>(<span class="params"><span class="keyword">int</span> <span class="variable">$x</span>, <span class="keyword">int</span> <span class="variable">$y</span></span>): <span class="title">int</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable">$x</span> &lt;=&gt; <span class="variable">$y</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * äº’æ¢ä½ç½®ã€‚</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> int $x</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> int $y</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> void</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">swap</span>(<span class="params"><span class="keyword">int</span> &amp;<span class="variable">$x</span>, <span class="keyword">int</span> &amp;<span class="variable">$y</span></span>): <span class="title">void</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="variable">$x</span> !== <span class="variable">$y</span>) &#123;</span><br><span class="line">            <span class="variable">$t</span> = <span class="variable">$x</span>;</span><br><span class="line">            <span class="variable">$x</span> = <span class="variable">$y</span>;</span><br><span class="line">            <span class="variable">$y</span> = <span class="variable">$t</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ç”Ÿæˆéšæœºæ•°ç»„ã€‚</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> int $low</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> int $high</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> int $num</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> array</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">random</span>(<span class="params"><span class="keyword">int</span> <span class="variable">$low</span> = <span class="number">1</span>, <span class="keyword">int</span> <span class="variable">$high</span> = <span class="number">9999</span>, <span class="keyword">int</span> <span class="variable">$num</span> = <span class="number">10</span></span>): <span class="title">array</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="variable">$num</span> = <span class="variable">$num</span> &gt; <span class="variable">$high</span> ? <span class="variable">$high</span> : <span class="variable">$num</span>;</span><br><span class="line">        <span class="variable">$range</span> = range(<span class="variable">$low</span>, <span class="variable">$high</span>);</span><br><span class="line">        <span class="variable">$array</span> = array_rand(array_flip(<span class="variable">$range</span>), <span class="variable">$num</span>);</span><br><span class="line">        shuffle(<span class="variable">$array</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="variable">$array</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">MergeSort::main();</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»“æœ</span></span><br><span class="line"><span class="keyword">Array</span></span><br><span class="line">(</span><br><span class="line">    [<span class="number">0</span>] =&gt; <span class="number">1281</span></span><br><span class="line">    [<span class="number">1</span>] =&gt; <span class="number">1337</span></span><br><span class="line">    [<span class="number">2</span>] =&gt; <span class="number">3213</span></span><br><span class="line">    [<span class="number">3</span>] =&gt; <span class="number">4078</span></span><br><span class="line">    [<span class="number">4</span>] =&gt; <span class="number">5350</span></span><br><span class="line">    [<span class="number">5</span>] =&gt; <span class="number">5857</span></span><br><span class="line">    [<span class="number">6</span>] =&gt; <span class="number">5889</span></span><br><span class="line">    [<span class="number">7</span>] =&gt; <span class="number">8088</span></span><br><span class="line">    [<span class="number">8</span>] =&gt; <span class="number">8190</span></span><br><span class="line">    [<span class="number">9</span>] =&gt; <span class="number">8440</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<h3 id="æ–¹æ¡ˆäºŒ"><a href="#æ–¹æ¡ˆäºŒ" class="headerlink" title="æ–¹æ¡ˆäºŒ"></a>æ–¹æ¡ˆäºŒ</h3><p>è¿­ä»£æ³• - <code>Bottom-up</code>ï¼š</p>
<ol>
<li>å°†åºåˆ—æ¯ç›¸é‚»ä¸¤ä¸ªæ•°å­—è¿›è¡Œå½’å¹¶æ“ä½œï¼Œå½¢æˆ <code>ceil(n/2)</code> ä¸ªåºåˆ—ï¼Œæ’åºåæ¯ä¸ªåºåˆ—åŒ…å«ä¸¤/ä¸€ä¸ªå…ƒç´ </li>
<li>è‹¥æ­¤æ—¶åºåˆ—æ•°ä¸æ˜¯ <code>1</code> ä¸ªåˆ™å°†ä¸Šè¿°åºåˆ—å†æ¬¡å½’å¹¶ï¼Œå½¢æˆ <code>ceil(n/4)</code> ä¸ªåºåˆ—ï¼Œæ¯ä¸ªåºåˆ—åŒ…å«å››/ä¸‰ä¸ªå…ƒç´ </li>
<li>é‡å¤æ­¥éª¤ <code>2</code>ï¼Œç›´åˆ°æ‰€æœ‰å…ƒç´ æ’åºå®Œæ¯•ï¼Œå³åºåˆ—æ•°ä¸º <code>1</code></li>
</ol>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment">// ä»¥åå®Œå–„â€¦â€¦</span></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>php</category>
      </categories>
      <tags>
        <tag>php</tag>
        <tag>algorithm</tag>
      </tags>
  </entry>
  <entry>
    <title>PHP æ’å…¥æ’åº</title>
    <url>/2018/04/14/php-insertion-sort/</url>
    <content><![CDATA[<p>æ’å…¥æ’åºæ˜¯ä¸€ç§è¾ƒä¸ºç®€å•çš„æ’åºç®—æ³•ï¼Œå®ƒçš„åŸºæœ¬æ€æƒ³æ˜¯é€šè¿‡æ„å»ºæœ‰åºåºåˆ—ï¼Œå¯¹äºæœªæ’åºæ•°æ®ï¼Œåœ¨å·²æ’åºåºåˆ—ä¸­ä»åå‘å‰æ‰«æï¼Œæ‰¾åˆ°ç›¸åº”ä½ç½®å¹¶æ’å…¥ã€‚ä¸ºæ­¤æœ‰äººå½¢è±¡çš„æŠŠæ’å…¥æ’åºæ¯”æ‹Ÿä¸ºæ‰“æ‰‘å…‹æŠ“ç‰Œçš„è¿‡ç¨‹ï¼Œé€šå¸¸æˆ‘ä»¬å³æ‰‹æŠ“ç‰Œï¼Œæ²¡æŠ“ä¸€å¼ ç‰Œï¼Œå°±æ”¾åˆ°å·¦æ‰‹ï¼ŒæŠ“ä¸‹ä¸€å¼ ç‰Œåï¼Œä¼šæŠŠè¿™å¼ ç‰Œä¾æ¬¡ä¸å·¦æ‰‹ä¸Šçš„ç‰Œæ¯”è¾ƒï¼Œå¹¶æŠŠå®ƒæ’å…¥åˆ°ä¸€ä¸ªåˆé€‚çš„ä½ç½®ï¼ˆæŒ‰ç‰Œé¢å¤§å°ï¼‰ï¼Œè¿™ä¸ªæ¯”æ‹Ÿå®åœ¨æ˜¯å¤ªç‰›é€¼äº†ã€‚</p>
<h2 id="æ¦‚å¿µ"><a href="#æ¦‚å¿µ" class="headerlink" title="æ¦‚å¿µ"></a>æ¦‚å¿µ</h2><p>æ’å…¥æ’åº - <code>Insertion Sort</code>ï¼šæ˜¯ä¸€ç§ç®€å•ç›´è§‚çš„æ’åºç®—æ³•ã€‚å®ƒçš„å·¥ä½œåŸç†æ˜¯é€šè¿‡æ„å»ºæœ‰åºåºåˆ—ï¼Œå¯¹äºæœªæ’åºæ•°æ®ï¼Œåœ¨å·²æ’åºåºåˆ—ä¸­ä»åå‘å‰æ‰«æï¼Œæ‰¾åˆ°ç›¸åº”ä½ç½®å¹¶æ’å…¥ã€‚æ’å…¥æ’åºåœ¨å®ç°ä¸Šï¼Œé€šå¸¸é‡‡ç”¨ <code>in-place</code> æ’åºï¼ˆå³åªéœ€ç”¨åˆ° <code>O(1)</code> çš„é¢å¤–ç©ºé—´çš„æ’åºï¼‰ï¼Œå› è€Œåœ¨ä»åå‘å‰æ‰«æè¿‡ç¨‹ä¸­ï¼Œéœ€è¦åå¤æŠŠå·²æ’åºå…ƒç´ é€æ­¥å‘åæŒªä½ï¼Œä¸ºæœ€æ–°å…ƒç´ æä¾›æ’å…¥ç©ºé—´ã€‚</p>
<h2 id="æ­¥éª¤"><a href="#æ­¥éª¤" class="headerlink" title="æ­¥éª¤"></a>æ­¥éª¤</h2><ol>
<li>ä»ç¬¬ä¸€ä¸ªå…ƒç´ å¼€å§‹ï¼Œè¯¥å…ƒç´ å¯ä»¥è®¤ä¸ºå·²ç»è¢«æ’åº</li>
<li>å–å‡ºä¸‹ä¸€ä¸ªå…ƒç´ ï¼Œåœ¨å·²ç»æ’åºçš„å…ƒç´ åºåˆ—ä¸­ä»åå‘å‰æ‰«æ</li>
<li>å¦‚æœè¯¥å…ƒç´ ï¼ˆå·²æ’åºï¼‰å¤§äºæ–°å…ƒç´ ï¼Œå°†è¯¥å…ƒç´ ç§»åˆ°ä¸‹ä¸€ä½ç½®</li>
<li>é‡å¤æ­¥éª¤ 3ï¼Œç›´åˆ°æ‰¾åˆ°å·²æ’åºçš„å…ƒç´ å°äºæˆ–è€…ç­‰äºæ–°å…ƒç´ çš„ä½ç½®</li>
<li>å°†æ–°å…ƒç´ æ’å…¥åˆ°è¯¥ä½ç½®å</li>
<li>é‡å¤æ­¥éª¤ 2~5</li>
</ol>
<h2 id="å®ç°"><a href="#å®ç°" class="headerlink" title="å®ç°"></a>å®ç°</h2><h3 id="æ–¹æ¡ˆä¸€"><a href="#æ–¹æ¡ˆä¸€" class="headerlink" title="æ–¹æ¡ˆä¸€"></a>æ–¹æ¡ˆä¸€</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">InsertionSort</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ä¸»è¿è¡Œæ–¹æ³•</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> void</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">main</span>(<span class="params"></span>): <span class="title">void</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="variable">$random</span> = <span class="built_in">self</span>::random();</span><br><span class="line">        <span class="variable">$array</span> = <span class="built_in">self</span>::sort(<span class="variable">$random</span>);</span><br><span class="line">        print_r(<span class="variable">$array</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ’å…¥æ’åº</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> array $array</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> array</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">sort</span>(<span class="params"><span class="keyword">array</span> &amp;<span class="variable">$array</span></span>): <span class="title">array</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="variable">$count</span> = count(<span class="variable">$array</span>) - <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="variable">$i</span> = <span class="number">0</span>; <span class="variable">$i</span> &lt; <span class="variable">$count</span>; <span class="variable">$i</span>++) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="variable">$j</span> = <span class="variable">$i</span>; <span class="variable">$j</span> &gt;= <span class="number">0</span>; <span class="variable">$j</span>--) &#123;</span><br><span class="line">                <span class="keyword">if</span> (<span class="built_in">self</span>::compare(<span class="variable">$array</span>[<span class="variable">$j</span>], <span class="variable">$array</span>[<span class="variable">$j</span> + <span class="number">1</span>]) &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                    <span class="built_in">self</span>::swap(<span class="variable">$array</span>[<span class="variable">$j</span>], <span class="variable">$array</span>[<span class="variable">$j</span> + <span class="number">1</span>]);</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="variable">$array</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ¯”è¾ƒå¤§å°</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> int $x</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> int $y</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> int</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">compare</span>(<span class="params"><span class="keyword">int</span> <span class="variable">$x</span>, <span class="keyword">int</span> <span class="variable">$y</span></span>): <span class="title">int</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable">$x</span> &lt;=&gt; <span class="variable">$y</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * äº’æ¢ä½ç½®</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> int $x</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> int $y</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> void</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">swap</span>(<span class="params"><span class="keyword">int</span> &amp;<span class="variable">$x</span>, <span class="keyword">int</span> &amp;<span class="variable">$y</span></span>): <span class="title">void</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="variable">$x</span> !== <span class="variable">$y</span>) &#123;</span><br><span class="line">            <span class="variable">$t</span> = <span class="variable">$x</span>;</span><br><span class="line">            <span class="variable">$x</span> = <span class="variable">$y</span>;</span><br><span class="line">            <span class="variable">$y</span> = <span class="variable">$t</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ç”Ÿæˆéšæœºæ•°ç»„</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> int $low</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> int $high</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> int $num</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> array</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">random</span>(<span class="params"><span class="keyword">int</span> <span class="variable">$low</span> = <span class="number">1</span>, <span class="keyword">int</span> <span class="variable">$high</span> = <span class="number">9999</span>, <span class="keyword">int</span> <span class="variable">$num</span> = <span class="number">10</span></span>): <span class="title">array</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="variable">$num</span> = <span class="variable">$num</span> &gt; <span class="variable">$high</span> ? <span class="variable">$high</span> : <span class="variable">$num</span>;</span><br><span class="line">        <span class="variable">$range</span> = range(<span class="variable">$low</span>, <span class="variable">$high</span>);</span><br><span class="line">        <span class="variable">$array</span> = array_rand(array_flip(<span class="variable">$range</span>), <span class="variable">$num</span>);</span><br><span class="line">        shuffle(<span class="variable">$array</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="variable">$array</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">InsertionSort::main();</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»“æœ</span></span><br><span class="line"><span class="keyword">Array</span></span><br><span class="line">(</span><br><span class="line">    [<span class="number">0</span>] =&gt; <span class="number">84</span></span><br><span class="line">    [<span class="number">1</span>] =&gt; <span class="number">1841</span></span><br><span class="line">    [<span class="number">2</span>] =&gt; <span class="number">3900</span></span><br><span class="line">    [<span class="number">3</span>] =&gt; <span class="number">4762</span></span><br><span class="line">    [<span class="number">4</span>] =&gt; <span class="number">5708</span></span><br><span class="line">    [<span class="number">5</span>] =&gt; <span class="number">5938</span></span><br><span class="line">    [<span class="number">6</span>] =&gt; <span class="number">6136</span></span><br><span class="line">    [<span class="number">7</span>] =&gt; <span class="number">6148</span></span><br><span class="line">    [<span class="number">8</span>] =&gt; <span class="number">6228</span></span><br><span class="line">    [<span class="number">9</span>] =&gt; <span class="number">9207</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<h3 id="æ–¹æ¡ˆäºŒ"><a href="#æ–¹æ¡ˆäºŒ" class="headerlink" title="æ–¹æ¡ˆäºŒ"></a>æ–¹æ¡ˆäºŒ</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">InsertionSort</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ä¸»è¿è¡Œæ–¹æ³•</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> void</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">main</span>(<span class="params"></span>): <span class="title">void</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="variable">$random</span> = <span class="built_in">self</span>::random();</span><br><span class="line">        <span class="variable">$array</span> = <span class="built_in">self</span>::sort(<span class="variable">$random</span>);</span><br><span class="line">        print_r(<span class="variable">$array</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ’å…¥æ’åº</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> array $array</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> array</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">sort</span>(<span class="params"><span class="keyword">array</span> &amp;<span class="variable">$array</span></span>): <span class="title">array</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="variable">$count</span> = count(<span class="variable">$array</span>) - <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="variable">$i</span> = <span class="number">0</span>; <span class="variable">$i</span> &lt; <span class="variable">$count</span>; <span class="variable">$i</span>++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (<span class="built_in">self</span>::compare(<span class="variable">$array</span>[<span class="variable">$i</span>], <span class="variable">$array</span>[<span class="variable">$i</span> + <span class="number">1</span>]) &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="variable">$pivot</span> = <span class="variable">$array</span>[<span class="variable">$i</span> + <span class="number">1</span>];</span><br><span class="line">                <span class="keyword">for</span> (<span class="variable">$j</span> = <span class="variable">$i</span>; <span class="variable">$j</span> &gt;= <span class="number">0</span> &amp;&amp; <span class="variable">$array</span>[<span class="variable">$j</span>] &gt; <span class="variable">$pivot</span>; <span class="variable">$j</span>--) &#123;</span><br><span class="line">                    <span class="variable">$array</span>[<span class="variable">$j</span> + <span class="number">1</span>] = <span class="variable">$array</span>[<span class="variable">$j</span>];</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="variable">$array</span>[<span class="variable">$j</span> + <span class="number">1</span>] = <span class="variable">$pivot</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="variable">$array</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ¯”è¾ƒå¤§å°</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> int $x</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> int $y</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> int</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">compare</span>(<span class="params"><span class="keyword">int</span> <span class="variable">$x</span>, <span class="keyword">int</span> <span class="variable">$y</span></span>): <span class="title">int</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable">$x</span> &lt;=&gt; <span class="variable">$y</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * äº’æ¢ä½ç½®</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> int $x</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> int $y</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> void</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">swap</span>(<span class="params"><span class="keyword">int</span> &amp;<span class="variable">$x</span>, <span class="keyword">int</span> &amp;<span class="variable">$y</span></span>): <span class="title">void</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="variable">$x</span> !== <span class="variable">$y</span>) &#123;</span><br><span class="line">            <span class="variable">$t</span> = <span class="variable">$x</span>;</span><br><span class="line">            <span class="variable">$x</span> = <span class="variable">$y</span>;</span><br><span class="line">            <span class="variable">$y</span> = <span class="variable">$t</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ç”Ÿæˆéšæœºæ•°ç»„</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> int $low</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> int $high</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> int $num</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> array</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">random</span>(<span class="params"><span class="keyword">int</span> <span class="variable">$low</span> = <span class="number">1</span>, <span class="keyword">int</span> <span class="variable">$high</span> = <span class="number">9999</span>, <span class="keyword">int</span> <span class="variable">$num</span> = <span class="number">10</span></span>): <span class="title">array</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="variable">$num</span> = <span class="variable">$num</span> &gt; <span class="variable">$high</span> ? <span class="variable">$high</span> : <span class="variable">$num</span>;</span><br><span class="line">        <span class="variable">$range</span> = range(<span class="variable">$low</span>, <span class="variable">$high</span>);</span><br><span class="line">        <span class="variable">$array</span> = array_rand(array_flip(<span class="variable">$range</span>), <span class="variable">$num</span>);</span><br><span class="line">        shuffle(<span class="variable">$array</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="variable">$array</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">InsertionSort::main();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»“æœ</span></span><br><span class="line"><span class="keyword">Array</span></span><br><span class="line">(</span><br><span class="line">    [<span class="number">0</span>] =&gt; <span class="number">133</span></span><br><span class="line">    [<span class="number">1</span>] =&gt; <span class="number">161</span></span><br><span class="line">    [<span class="number">2</span>] =&gt; <span class="number">393</span></span><br><span class="line">    [<span class="number">3</span>] =&gt; <span class="number">1273</span></span><br><span class="line">    [<span class="number">4</span>] =&gt; <span class="number">1274</span></span><br><span class="line">    [<span class="number">5</span>] =&gt; <span class="number">2041</span></span><br><span class="line">    [<span class="number">6</span>] =&gt; <span class="number">5046</span></span><br><span class="line">    [<span class="number">7</span>] =&gt; <span class="number">7325</span></span><br><span class="line">    [<span class="number">8</span>] =&gt; <span class="number">7950</span></span><br><span class="line">    [<span class="number">9</span>] =&gt; <span class="number">9988</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<h3 id="æ–¹æ¡ˆä¸‰"><a href="#æ–¹æ¡ˆä¸‰" class="headerlink" title="æ–¹æ¡ˆä¸‰"></a>æ–¹æ¡ˆä¸‰</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">InsertionSort</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ä¸»è¿è¡Œæ–¹æ³•</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> void</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">main</span>(<span class="params"></span>): <span class="title">void</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="variable">$random</span> = <span class="built_in">self</span>::random();</span><br><span class="line">        <span class="variable">$array</span> = <span class="built_in">self</span>::sort(<span class="variable">$random</span>);</span><br><span class="line">        print_r(<span class="variable">$array</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ’å…¥æ’åº</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> array $array</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> array</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">sort</span>(<span class="params"><span class="keyword">array</span> &amp;<span class="variable">$array</span></span>): <span class="title">array</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="variable">$count</span> = count(<span class="variable">$array</span>) - <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="variable">$i</span> = <span class="number">0</span>; <span class="variable">$i</span> &lt; <span class="variable">$count</span>; <span class="variable">$i</span>++) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="variable">$j</span> = <span class="variable">$i</span>; <span class="variable">$j</span> &gt;= <span class="number">0</span> &amp;&amp; <span class="built_in">self</span>::compare(<span class="variable">$array</span>[<span class="variable">$j</span>], <span class="variable">$array</span>[<span class="variable">$j</span> + <span class="number">1</span>]) &gt; <span class="number">0</span>; <span class="variable">$j</span>--) &#123;</span><br><span class="line">                <span class="built_in">self</span>::swap(<span class="variable">$array</span>[<span class="variable">$j</span>], <span class="variable">$array</span>[<span class="variable">$j</span> + <span class="number">1</span>]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="variable">$array</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ¯”è¾ƒå¤§å°</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> int $x</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> int $y</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> int</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">compare</span>(<span class="params"><span class="keyword">int</span> <span class="variable">$x</span>, <span class="keyword">int</span> <span class="variable">$y</span></span>): <span class="title">int</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable">$x</span> &lt;=&gt; <span class="variable">$y</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * äº’æ¢ä½ç½®</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> int $x</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> int $y</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> void</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">swap</span>(<span class="params"><span class="keyword">int</span> &amp;<span class="variable">$x</span>, <span class="keyword">int</span> &amp;<span class="variable">$y</span></span>): <span class="title">void</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="variable">$x</span> !== <span class="variable">$y</span>) &#123;</span><br><span class="line">            <span class="variable">$t</span> = <span class="variable">$x</span>;</span><br><span class="line">            <span class="variable">$x</span> = <span class="variable">$y</span>;</span><br><span class="line">            <span class="variable">$y</span> = <span class="variable">$t</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ç”Ÿæˆéšæœºæ•°ç»„</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> int $low</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> int $high</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> int $num</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> array</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">random</span>(<span class="params"><span class="keyword">int</span> <span class="variable">$low</span> = <span class="number">1</span>, <span class="keyword">int</span> <span class="variable">$high</span> = <span class="number">9999</span>, <span class="keyword">int</span> <span class="variable">$num</span> = <span class="number">10</span></span>): <span class="title">array</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="variable">$num</span> = <span class="variable">$num</span> &gt; <span class="variable">$high</span> ? <span class="variable">$high</span> : <span class="variable">$num</span>;</span><br><span class="line">        <span class="variable">$range</span> = range(<span class="variable">$low</span>, <span class="variable">$high</span>);</span><br><span class="line">        <span class="variable">$array</span> = array_rand(array_flip(<span class="variable">$range</span>), <span class="variable">$num</span>);</span><br><span class="line">        shuffle(<span class="variable">$array</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="variable">$array</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">InsertionSort::main();</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»“æœ</span></span><br><span class="line"><span class="keyword">Array</span></span><br><span class="line">(</span><br><span class="line">    [<span class="number">0</span>] =&gt; <span class="number">57</span></span><br><span class="line">    [<span class="number">1</span>] =&gt; <span class="number">896</span></span><br><span class="line">    [<span class="number">2</span>] =&gt; <span class="number">2172</span></span><br><span class="line">    [<span class="number">3</span>] =&gt; <span class="number">3428</span></span><br><span class="line">    [<span class="number">4</span>] =&gt; <span class="number">4236</span></span><br><span class="line">    [<span class="number">5</span>] =&gt; <span class="number">4844</span></span><br><span class="line">    [<span class="number">6</span>] =&gt; <span class="number">6524</span></span><br><span class="line">    [<span class="number">7</span>] =&gt; <span class="number">7586</span></span><br><span class="line">    [<span class="number">8</span>] =&gt; <span class="number">8172</span></span><br><span class="line">    [<span class="number">9</span>] =&gt; <span class="number">8650</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>php</category>
      </categories>
      <tags>
        <tag>php</tag>
        <tag>algorithm</tag>
      </tags>
  </entry>
  <entry>
    <title>Phalcon æ¡†æ¶ä¹‹å¯åŠ¨æµç¨‹</title>
    <url>/2018/03/06/php-phalcon-bootstrap/</url>
    <content><![CDATA[<p>ç¨€é‡Œç³Šæ¶‚çš„ä½¿ç”¨ <code>Phalcon</code> ä¸€å¹´å¤šäº†ï¼Œå¯¹äºå…¶è¿è¡Œçš„çš„æµç¨‹ä¹ŸçŸ¥é“ä¸ªå¤§æ¦‚ï¼Œæœ¬æ¥è®¡åˆ’å°½æ—©æ¢³ç†ä¸€ä¸‹ï¼Œæ•´ç†ä¸‹å­¦ä¹ å¿ƒå¾—ï¼Œä½†æ˜¯ï¼Œç”±äºç§ç§åŸå› è¿˜æ˜¯æ²¡å¥½å¥½æ•´ç†è®°å½•ã€‚å¥½è®°æ€§ä¸å¦‚çƒ‚ç¬”å¤´ï¼Œå†ç»è¿‡æ¥æ¥å›å›ç¿»æ–‡æ¡£è¿‡ç¨‹ä¸­æ„ˆåŠ ç—›æ¨è‡ªå·±çš„è®°å¿†åŠ›äº†ï¼Œæ–‡æ¡£ä¸Šæ‰¾èµ·æ¥ä¹Ÿä¸è§å¾—å®¹æ˜“ï¼Œè¿˜æ˜¯è€è€å®å®è®°å½•ä¸€ä¸‹å¸¸ç”¨çš„ä¸€äº›ä¸œè¥¿å§ï¼Œè¿™æ ·åœ¨ä¸€ä¸ªåœ°æ–¹æ‰¾æ€»èƒœè¿‡åœ¨ä¸€ä¸ªåºå¤§çš„æ‰‹å†Œè·³æ¥è·³å»å§ã€‚é¡ºä¾¿æä¸€ä¸‹ï¼Œ<a href="https://docs.phalconphp.com/en/3.3/introduction"><code>Phalcon</code></a> çš„å®˜æ–¹æ–‡æ¡£è¶Šæ¥è¶Šå¥½ç”¨äº†ã€‚</p>
<h2 id="åˆ›å»ºé¡¹ç›®"><a href="#åˆ›å»ºé¡¹ç›®" class="headerlink" title="åˆ›å»ºé¡¹ç›®"></a>åˆ›å»ºé¡¹ç›®</h2><p>æ‰§è¡Œä»¥ä¸‹çš„å‘½ä»¤åˆ›å»ºä¸€ä¸ªæ ‡å‡†çš„ <code>Phalcon Micro Project</code></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ phalcon project --name example --enable-webtools --directory ./ --<span class="built_in">type</span> micro --use-config-ini --trace</span><br></pre></td></tr></table></figure>
<p>å…¥å£æ–‡ä»¶</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">use</span> <span class="title">Phalcon</span>\<span class="title">Di</span>\<span class="title">FactoryDefault</span>;</span><br><span class="line"><span class="keyword">use</span> <span class="title">Phalcon</span>\<span class="title">Mvc</span>\<span class="title">Micro</span>;</span><br><span class="line"></span><br><span class="line">error_reporting(E_ALL);</span><br><span class="line"></span><br><span class="line">define(<span class="string">&#x27;BASE_PATH&#x27;</span>, dirname(<span class="keyword">__DIR__</span>));</span><br><span class="line">define(<span class="string">&#x27;APP_PATH&#x27;</span>, BASE_PATH . <span class="string">&#x27;/app&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * The FactoryDefault Dependency Injector automatically registers the services that</span></span><br><span class="line"><span class="comment">     * provide a full stack framework. These default services can be overidden with custom ones.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="variable">$di</span> = <span class="keyword">new</span> FactoryDefault();</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Include Services</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">include</span> APP_PATH . <span class="string">&#x27;/config/services.php&#x27;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Get config service for use in inline setup below</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="variable">$config</span> = <span class="variable">$di</span>-&gt;getConfig();</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Include Autoloader</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">include</span> APP_PATH . <span class="string">&#x27;/config/loader.php&#x27;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Starting the application</span></span><br><span class="line"><span class="comment">     * Assign service locator to the application</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="variable">$app</span> = <span class="keyword">new</span> Micro(<span class="variable">$di</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Include Application</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">include</span> APP_PATH . <span class="string">&#x27;/app.php&#x27;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Handle the request</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="variable">$app</span>-&gt;handle();</span><br><span class="line"></span><br><span class="line">&#125; <span class="keyword">catch</span> (\<span class="built_in">Exception</span> <span class="variable">$e</span>) &#123;</span><br><span class="line">      <span class="keyword">echo</span> <span class="variable">$e</span>-&gt;getMessage() . <span class="string">&#x27;&lt;br&gt;&#x27;</span>;</span><br><span class="line">      <span class="keyword">echo</span> <span class="string">&#x27;&lt;pre&gt;&#x27;</span> . <span class="variable">$e</span>-&gt;getTraceAsString() . <span class="string">&#x27;&lt;/pre&gt;&#x27;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç®€å•æ¥è¯´ï¼Œå°±æ˜¯</p>
<ul>
<li>åˆ›å»ºä¾èµ–æ³¨å…¥å®¹å™¨</li>
<li>å¼•å…¥æœåŠ¡ï¼Œå°†ä¾èµ–åŠæœåŠ¡æ”¶é›†åˆ°å®¹å™¨ä¸­</li>
<li>è‡ªåŠ¨åŠ è½½</li>
<li>å°†å®¹å™¨æ³¨å…¥ç»™åº”ç”¨ç¨‹åº</li>
<li>è¯·æ±‚å¤„ç†å¹¶å“åº”</li>
</ul>
<h2 id="ä¾èµ–æ³¨å†Œ"><a href="#ä¾èµ–æ³¨å†Œ" class="headerlink" title="ä¾èµ–æ³¨å†Œ"></a>ä¾èµ–æ³¨å†Œ</h2><h3 id="ç³»ç»Ÿé»˜è®¤æ³¨å†Œ"><a href="#ç³»ç»Ÿé»˜è®¤æ³¨å†Œ" class="headerlink" title="ç³»ç»Ÿé»˜è®¤æ³¨å†Œ"></a>ç³»ç»Ÿé»˜è®¤æ³¨å†Œ</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Include Services</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">include</span> APP_PATH . <span class="string">&#x27;/config/services.php&#x27;</span>;</span><br></pre></td></tr></table></figure>
<p><code>services.php</code> é»˜è®¤æ³¨å†Œäº† é…ç½® - <code>\Phalcon\Config\Adapter\Ini(ConfigFile)</code>, è§†å›¾ - <code>Phalcon\Mvc\View\Simple</code>, <code>URL</code> - <code>Phalcon\Mvc\Url</code> å’Œ <code>Phalcon\Db\Adapter\Pdo\XxxAdapter</code> è¿™å››ä¸ªç»„ä»¶ï¼ŒåŒæ—¶å½“åº”ç”¨ç¨‹åºå¯åŠ¨æ—¶ï¼Œ<code>DI</code> ä¸­é»˜è®¤æ³¨å†Œäº†å…¶å®ƒæœåŠ¡</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="variable">$services</span> = <span class="variable">$app</span>-&gt;getDI()-&gt;getServices();</span><br><span class="line"><span class="keyword">foreach</span> (<span class="variable">$services</span> <span class="keyword">as</span> <span class="variable">$key</span> =&gt; <span class="variable">$service</span>) &#123;</span><br><span class="line">    var_dump(<span class="variable">$key</span>);</span><br><span class="line">    var_dump(get_class(<span class="variable">$app</span>-&gt;getDI()-&gt;get(<span class="variable">$key</span>)));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¾“å‡ºåçš„ <code>Phalcon</code> æ³¨å†ŒæœåŠ¡å¦‚ä¸‹ï¼š</p>
<blockquote>
<p>å…¶ä¸­ <code>url</code>ã€<code>config</code>ã€<code>view</code>ã€<code>db</code>ã€<code>application</code> æ˜¯æ²¡æœ‰å¯¹åº”çš„ä¾èµ–æœåŠ¡çš„</p>
</blockquote>
<ul>
<li><code>router - Phalcon\Mvc\Router</code>: è·¯ç”±</li>
<li><code>dispatcher - Phalcon\Mvc\Dispatcher</code>: è°ƒåº¦ï¼Œå°†è·¯ç”±å‘½ä¸­çš„ç»“æœåˆ†å‘åˆ°å¯¹åº”çš„å¤„ç†å•å…ƒä¸Š</li>
<li><code>url - Phalcon\Mvc\Url</code>: è§£æç”Ÿæˆ <code>URL</code></li>
<li><code>modelsManager - Phalcon\Mvc\Model\Manager</code>: æ¨¡å‹ç®¡ç†å™¨</li>
<li><code>modelsMetadata - Phalcon\Mvc\Model\MetaData\Memory</code>: <code>ORM</code> æ˜ å°„</li>
<li><code>response - Phalcon\Http\Response</code>: å“åº”</li>
<li><code>cookies - Phalcon\Http\Response\Cookies</code>: <code>Cookies</code></li>
<li><code>request - Phalcon\Http\Request</code>: è¯·æ±‚</li>
<li><code>filter - Phalcon\Filter</code>: è¿‡æ»¤å™¨</li>
<li><code>escaper - Phalcon\Escaper</code>: è½¬ä¹‰å·¥å…·</li>
<li><code>security - Phalcon\Security</code>: å®‰å…¨å·¥å…·(å¯†ç  <code>Hash</code>ã€<code>CRSF</code> ä¿æŠ¤)</li>
<li><code>crypt - Phalcon\Crypt</code>: å¯†ç å·¥å…·</li>
<li><code>annotations - Phalcon\Annotations\Adapter\Memory</code>: æ³¨é‡Šåˆ†æ</li>
<li><code>flash - Phalcon\Flash\Direct</code>: æç¤ºä¿¡æ¯è¾“å‡º</li>
<li><code>flashSession - Phalcon\Flash\Session</code>: æç¤ºä¿¡æ¯é€šè¿‡ <code>Session</code> å»¶è¿Ÿè¾“å‡º</li>
<li><code>tag - Phalcon\Tag</code>: è§†å›¾åŠ©æ‰‹</li>
<li><code>session - Phalcon\Session\Adapter\Files</code>: <code>Session</code></li>
<li><code>sessionBag - Phalcon\Session\Bag</code>: <code>Session</code> åŒ…</li>
<li><code>eventsManager - Phalcon\Events\Manager</code>: äº‹ä»¶</li>
<li><code>transactionManager - Phalcon\Mvc\Model\Transaction\Manager</code>: äº‹åŠ¡</li>
<li><code>assets - Phalcon\Assets\Manager</code>: èµ„äº§</li>
<li><code>config - \Phalcon\Config\Adapter\Ini(ConfigFile)</code>: é…ç½®</li>
<li><code>view - Phalcon\Mvc\View\Simple</code>: è§†å›¾</li>
<li><code>db - Phalcon\Db\Adapter\Pdo\Mysql</code>: æ•°æ®åº“ï¼Œå¯é€‰(<code>MySQL</code>ã€<code>Postgresql</code> ç­‰)</li>
<li><code>application - Phalcon\Mvc\Micro</code>: åº”ç”¨</li>
</ul>
<h3 id="ä¾èµ–æ³¨å†Œå±æ€§çš„æ”¹å˜"><a href="#ä¾èµ–æ³¨å†Œå±æ€§çš„æ”¹å˜" class="headerlink" title="ä¾èµ–æ³¨å†Œå±æ€§çš„æ”¹å˜"></a>ä¾èµ–æ³¨å†Œå±æ€§çš„æ”¹å˜</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Set routing capabilities</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="variable">$router</span> = <span class="variable">$app</span>-&gt;getDI()-&gt;get(<span class="string">&#x27;router&#x27;</span>);</span><br><span class="line"><span class="variable">$router</span>-&gt;setUriSource(\Phalcon\Mvc\Router::URI_SOURCE_SERVER_REQUEST_URI);</span><br></pre></td></tr></table></figure>
<h2 id="æ¨¡å—æ³¨å†Œ"><a href="#æ¨¡å—æ³¨å†Œ" class="headerlink" title="æ¨¡å—æ³¨å†Œ"></a>æ¨¡å—æ³¨å†Œ</h2><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Composer autoloader</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">require</span> BASE_PATH . <span class="string">&#x27;/vendor/autoload.php&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Registering an autoloader</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="variable">$loader</span> = <span class="keyword">new</span> \Phalcon\Loader();</span><br><span class="line"></span><br><span class="line"><span class="variable">$loader</span>-&gt;registerNamespaces([</span><br><span class="line">    <span class="string">&#x27;App\\Model&#x27;</span>     =&gt; <span class="string">&#x27;../app/models&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;App\\Component&#x27;</span> =&gt; <span class="string">&#x27;../app/components&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;App\\Util&#x27;</span>      =&gt; <span class="string">&#x27;../app/utils&#x27;</span>,</span><br><span class="line">])-&gt;register();</span><br><span class="line"></span><br><span class="line"><span class="variable">$loader</span>-&gt;registerDirs([</span><br><span class="line">    <span class="variable">$config</span>-&gt;application-&gt;modelsDir,</span><br><span class="line">])-&gt;register();</span><br></pre></td></tr></table></figure>
<p>æ¨¡å—æ³¨å†Œï¼Œå…¶å®å°±æ˜¯å‘Šè¯‰åº”ç”¨ç¨‹åºéœ€è¦å¼•å¯¼çš„æ¨¡å—è·¯å¾„å’Œç±»å</p>
<h2 id="MVC-åˆ†å±‚"><a href="#MVC-åˆ†å±‚" class="headerlink" title="MVC åˆ†å±‚"></a><code>MVC</code> åˆ†å±‚</h2><blockquote>
<ul>
<li>æ­¤å¤„çš„ <code>$app</code> æŒ‡çš„å°±æ˜¯åˆ›å»ºçš„ <code>Micro</code> å¯¹è±¡ï¼Œä¸€å¼€å§‹æˆ‘ä»¬åˆ›å»ºçš„åº”ç”¨ç±»å‹ä¸º <code>Phalcon Micro Project</code></li>
<li><code>$app-&gt;handle();</code> æ˜¯æ•´ä¸ª <code>MVC</code> çš„æ ¸å¿ƒï¼Œè¿™ä¸ªæ–¹æ³•å¤„ç†äº† <code>MVC</code> çš„å…¨éƒ¨æµç¨‹ï¼Œå®ƒè·å¾—æ‰€æœ‰è¯·æ±‚åï¼Œåœ¨å¤„ç†è¿‡ç¨‹ä¸­é€šè¿‡äº‹ä»¶é©±åŠ¨è§¦å‘ä¸€ç³»åˆ—çš„ <code>app</code> äº‹ä»¶ï¼Œæœ€ç»ˆè¿”å›ä¸€ä¸ªå®Œæ•´çš„ <code>Phalcon\Http\Response</code> å¯¹è±¡</li>
</ul>
</blockquote>
<h3 id="è‡ªæ£€"><a href="#è‡ªæ£€" class="headerlink" title="è‡ªæ£€"></a>è‡ªæ£€</h3><p>è¿™ä¸ªé˜¶æ®µï¼Œä¸»è¦æ£€æŸ¥ <code>DI</code>ï¼Œç¡®ä¿å¿…è¦çš„æœåŠ¡æ³¨å†Œè¿›æ¥</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment">// å¦‚æœå°† `db` æœåŠ¡æ³¨é‡Šæ‰ï¼Œä¼šæŠ›å‡ºä¸‹é¢çš„å¼‚å¸¸</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Database connection is created based in the parameters defined in the configuration file</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="comment">// $di-&gt;setShared(&#x27;db&#x27;, function () &#123;</span></span><br><span class="line"><span class="comment">//     $config = $this-&gt;getConfig();</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//     $class = &#x27;Phalcon\Db\Adapter\Pdo\\&#x27; . $config-&gt;database-&gt;adapter;</span></span><br><span class="line"><span class="comment">//     $params = [</span></span><br><span class="line"><span class="comment">//         &#x27;host&#x27;     =&gt; $config-&gt;database-&gt;host,</span></span><br><span class="line"><span class="comment">//         &#x27;username&#x27; =&gt; $config-&gt;database-&gt;username,</span></span><br><span class="line"><span class="comment">//         &#x27;password&#x27; =&gt; $config-&gt;database-&gt;password,</span></span><br><span class="line"><span class="comment">//         &#x27;dbname&#x27;   =&gt; $config-&gt;database-&gt;dbname,</span></span><br><span class="line"><span class="comment">//         &#x27;charset&#x27;  =&gt; $config-&gt;database-&gt;charset,</span></span><br><span class="line"><span class="comment">//     ];</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//     if ($config-&gt;database-&gt;adapter == &#x27;Postgresql&#x27;) &#123;</span></span><br><span class="line"><span class="comment">//         unset($params[&#x27;charset&#x27;]);</span></span><br><span class="line"><span class="comment">//     &#125;</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//     $connection = new $class($params);</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//     return $connection;</span></span><br><span class="line"><span class="comment">// &#125;);</span></span><br><span class="line"></span><br><span class="line">Service <span class="string">&#x27;db&#x27;</span> wasn<span class="string">&#x27;t found in the dependency injection container</span></span><br></pre></td></tr></table></figure>
<p>æ¥ä¸‹æ¥ï¼Œ<code>app</code> å¯ä»¥æŠŠäº‹ä»¶ç»‘å®šåˆ° <code>Phalcon\Events\Manager</code> ä¸Š</p>
<table>
<thead>
<tr>
<th>äº‹ä»¶åç§°</th>
<th>è§¦å‘ç‚¹</th>
<th>å¤‡æ³¨</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>boot</code></td>
<td>å½“åº”ç”¨å¤„ç†å®ƒé¦–ä¸ªè¯·æ±‚æ—¶è¢«æ‰§è¡Œ</td>
<td></td>
</tr>
<tr>
<td><code>beforeStartModule</code></td>
<td>åˆå§‹åŒ–æ¨¡å—ä¹‹å‰ï¼Œä»…å½“æ¨¡å—è¢«æ³¨å†Œæ—¶</td>
<td></td>
</tr>
<tr>
<td><code>afterStartModule</code></td>
<td>åˆå§‹åŒ–æ¨¡å—ä¹‹åï¼Œä»…å½“æ¨¡å—è¢«æ³¨å†Œæ—¶</td>
<td></td>
</tr>
<tr>
<td><code>beforeHandleRequest</code></td>
<td>è°ƒåº¦åˆ†å‘å¾ªç¯ä¹‹å‰</td>
<td></td>
</tr>
<tr>
<td><code>afterHandleRequest</code></td>
<td>è°ƒåº¦åˆ†å‘å¾ªç¯ä¹‹å</td>
</tr>
</tbody>
</table>
<p>å°†ä¸€ä¸ªäº‹ä»¶ç»‘å®šåˆ°äº‹ä»¶ç®¡ç†å™¨ä¸Š</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">use</span> <span class="title">Phalcon</span>\<span class="title">Events</span>\<span class="title">Event</span>;</span><br><span class="line"><span class="keyword">use</span> <span class="title">Phalcon</span>\<span class="title">Events</span>\<span class="title">Manager</span> <span class="title">as</span> <span class="title">EventsManager</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable">$eventsManager</span> = <span class="keyword">new</span> EventsManager();</span><br><span class="line"></span><br><span class="line"><span class="variable">$application</span>-&gt;setEventsManager(<span class="variable">$eventsManager</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable">$eventsManager</span>-&gt;attach(</span><br><span class="line">    <span class="string">&quot;application&quot;</span>,</span><br><span class="line">    <span class="function"><span class="keyword">function</span> (<span class="params">Event <span class="variable">$event</span>, <span class="variable">$application</span></span>) </span>&#123;</span><br><span class="line">        <span class="comment">// ...</span></span><br><span class="line">    &#125;</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<p>åšå®Œè¿™äº›è‡ªæ£€åï¼Œå°±é¡ºå¾—åœ°è¿›å…¥äº†è·¯ç”±é˜¶æ®µ</p>
<h3 id="è·¯ç”±"><a href="#è·¯ç”±" class="headerlink" title="è·¯ç”±"></a>è·¯ç”±</h3><p>ä» <code>DI</code> ä¸­å®¹å™¨ä¸­é€šè¿‡é”®å <code>router</code> è·å–è·¯ç”±æœåŠ¡ï¼Œå°† <code>uri</code> ä¼ å…¥è·¯ç”±å¹¶è°ƒç”¨è·¯ç”±çš„ <code>handle()</code> æ–¹æ³•</p>
<p>è·¯ç”±çš„ <code>handle()</code> æ–¹æ³•ä¹Ÿæ˜¯å¥½è„¾æ°”ï¼Œè´Ÿè´£æŠŠå°†è¯·æ±‚ä¸­çš„åŸå§‹ <code>uri</code> æ£€æŸ¥(è·¯ç”±æ˜¯å¦å‘½ä¸­)è§£æåï¼Œè½¬æ¢ä¸ºå¯¹åº”çš„ <code>Module</code>ï¼Œ<code>Controller</code>ï¼Œ<code>Action</code> ç­‰ï¼Œå¹¶é€šè¿‡ <code>$router-&gt;getModuleName()</code> è·å–æ¨¡å—åï¼Œåˆ¤æ–­æ¨¡å—æ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœå­˜åœ¨å°±åŠ è½½ç›¸åº”çš„æ¨¡å—å¯åŠ¨æ¨¡å—ï¼Œå¦åˆ™ï¼Œå°±ç›´æ¥è¿›å…¥åˆ°è·¯ç”±çš„åˆ†å‘é˜¶æ®µ</p>
<h3 id="æ¨¡å—"><a href="#æ¨¡å—" class="headerlink" title="æ¨¡å—"></a>æ¨¡å—</h3><p>ä¹‹å‰ç»‘å®šåˆ°äº‹ä»¶ç®¡ç†å™¨ä¸Šäº‹ä»¶å°±ä¼šå› ä¸ºæŒ‡å®šçš„è·¯ç”±è€Œè§¦å‘ï¼Œäº‹ä»¶è§¦å‘åæ£€æŸ¥æ¨¡å—çš„æ­£ç¡®æ€§ï¼Œæ ¹æ®æ¨¡å—æ–‡ä»¶ä¸­å®šä¹‰çš„ <code>className</code>ï¼Œ<code>path</code> ç­‰ï¼Œå°†æ¨¡å—å¼•å¯¼æ–‡ä»¶åŠ è½½è¿›æ¥ï¼Œå¹¶è°ƒç”¨æ¨¡å—å¼•å¯¼æ–‡ä»¶ä¸­å¿…é¡»å­˜åœ¨çš„æ–¹æ³•. ä¹Ÿå°±æ˜¯è¯´ï¼Œè‡ªå®šä¹‰çš„æ¨¡å—å¿…é¡»å®ç° <code>ModuleDefinitionInterface</code> å®šä¹‰çš„ <code>registerAutoloaders(\Phalcon\DiInterface $dependencyInjector = null)</code> å’Œ <code>registerServices(\Phalcon\DiInterface $dependencyInjector)</code> æ–¹æ³•</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> <span class="title">Phalcon</span>\<span class="title">Mvc</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Phalcon\Mvc\ModuleDefinitionInterface</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * This interface must be implemented by class module definitions</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">ModuleDefinitionInterface</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Registers an autoloader related to the module</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> \Phalcon\DiInterface $dependencyInjector</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">registerAutoloaders</span>(<span class="params">\Phalcon\DiInterface <span class="variable">$dependencyInjector</span> = <span class="literal">null</span></span>)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Registers services related to the module</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> \Phalcon\DiInterface $dependencyInjector</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">registerServices</span>(<span class="params">\Phalcon\DiInterface <span class="variable">$dependencyInjector</span></span>)</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ¨¡å—å¯åŠ¨å®Œæˆåè§¦å‘ <code>afterStartModule</code> äº‹ä»¶ï¼Œæ ‡å¿—ç€æ­£å¼è¿›å…¥è·¯ç”±çš„è°ƒåº¦åˆ†å‘é˜¶æ®µ</p>
<h3 id="åˆ†å‘"><a href="#åˆ†å‘" class="headerlink" title="åˆ†å‘"></a>åˆ†å‘</h3><p><code>Phalcon</code> çš„è·¯ç”±è°ƒåº¦åˆ†å‘æ˜¯ç”± <code>Phalcon\Mvc\Dispatcher</code> æ¥å®Œæˆ. æ‰€è°“åˆ†å‘ï¼Œå°±æ˜¯ <code>Phalcon</code> æ ¹æ®è¯·æ±‚çš„åŸå§‹ <code>uri</code>ï¼Œå°†å…¶åŒ¹é…åˆ°çš„åœ°å€è§£æåˆ°å¯¹åº”çš„ <code>Controller</code> åŠ <code>Action</code>ï¼Œå¹¶è¿”å› <code>Action</code> ç»“æœ</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> <span class="title">Phalcon</span>\<span class="title">Mvc</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Phalcon\Mvc\Dispatcher</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * Dispatching is the process of taking the request object, extracting the module name,</span></span><br><span class="line"><span class="comment"> * controller name, action name, and optional parameters contained in it, and then</span></span><br><span class="line"><span class="comment"> * instantiating a controller and calling an action of that controller.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * &lt;code&gt;</span></span><br><span class="line"><span class="comment"> * $di = new \Phalcon\Di();</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * $dispatcher = new \Phalcon\Mvc\Dispatcher();</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * $dispatcher-&gt;setDI($di);</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * $dispatcher-&gt;setControllerName(&quot;posts&quot;);</span></span><br><span class="line"><span class="comment"> * $dispatcher-&gt;setActionName(&quot;index&quot;);</span></span><br><span class="line"><span class="comment"> * $dispatcher-&gt;setParams([]);</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * $controller = $dispatcher-&gt;dispatch();</span></span><br><span class="line"><span class="comment"> * &lt;/code&gt;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Dispatcher</span> <span class="keyword">extends</span> \<span class="title">Phalcon</span>\<span class="title">Dispatcher</span> <span class="keyword">implements</span> \<span class="title">Phalcon</span>\<span class="title">Mvc</span>\<span class="title">DispatcherInterface</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">protected</span> <span class="variable">$_handlerSuffix</span> = <span class="string">&quot;Controller&quot;</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> <span class="variable">$_defaultHandler</span> = <span class="string">&quot;index&quot;</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> <span class="variable">$_defaultAction</span> = <span class="string">&quot;index&quot;</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Sets the default controller suffix</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> string $controllerSuffix</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">setControllerSuffix</span>(<span class="params"><span class="variable">$controllerSuffix</span></span>) </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Sets the default controller name</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> string $controllerName</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">setDefaultController</span>(<span class="params"><span class="variable">$controllerName</span></span>) </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Sets the controller name to be dispatched</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> string $controllerName</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">setControllerName</span>(<span class="params"><span class="variable">$controllerName</span></span>) </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Gets last dispatched controller name</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> string</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getControllerName</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Gets previous dispatched namespace name</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> string</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getPreviousNamespaceName</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Gets previous dispatched controller name</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> string</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getPreviousControllerName</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Gets previous dispatched action name</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> string</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getPreviousActionName</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Throws an internal exception</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> string $message</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> int $exceptionCode</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="function"><span class="keyword">function</span> <span class="title">_throwDispatchException</span>(<span class="params"><span class="variable">$message</span>, <span class="variable">$exceptionCode</span> = <span class="number">0</span></span>) </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Handles a user exception</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> \Exception $exception</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="function"><span class="keyword">function</span> <span class="title">_handleException</span>(<span class="params">\<span class="built_in">Exception</span> <span class="variable">$exception</span></span>) </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Possible controller class name that will be located to dispatch the request</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> string</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getControllerClass</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Returns the latest dispatched controller</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> \Phalcon\Mvc\ControllerInterface</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getLastController</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Returns the active controller in the dispatcher</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> \Phalcon\Mvc\ControllerInterface</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getActiveController</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç”±äºè¿™é‡Œæˆ‘åˆ›å»ºçš„æ˜¯ <code>Phalcon Micro Project</code>ï¼Œä¸»è¦ç”¨æ¥å†™æ¥å£ <code>API</code> ç”¨çš„ï¼Œæ‰€ä»¥è¿™ä¸ªè¿‡ç¨‹ä¸­å°±æ²¡æœ‰æåŠ <code>View</code>ã€‚å½“ç„¶ <code>View</code> æ¨¡å—å¹¶ä¸æ˜¯åœ¨è¿™ä¸ªé˜¶æ®µå¯åŠ¨çš„ï¼Œå®ƒä¹Ÿæ˜¯å…ˆäºè°ƒåº¦åˆ†å‘å‰å¯åŠ¨çš„ã€‚å¦‚æœè°ƒåº¦åˆ†å‘é˜¶æ®µå‡ºç°ä»»ä½•é”™è¯¯ï¼Œéƒ½éœ€è¦ <code>View</code> å°†é—®é¢˜æ˜¾ç¤ºå‡ºæ¥çš„</p>
<p>è°ƒåº¦å™¨ä¹Ÿæ˜¯ä» <code>DI</code> å®¹å™¨ä¸­é€šè¿‡é”®å <code>dispatcher</code> è·å–çš„ï¼Œè·¯ç”±çš„åˆ†å‘éœ€è¦è°ƒåº¦å™¨åˆ†æ´¾ï¼Œå› æ­¤è°ƒåº¦å™¨éœ€è¦å–å¾—è·¯ç”±çš„è¯¦æƒ…ä¿¡æ¯ï¼Œå¦‚ï¼šå‘½åç©ºé—´\æ¨¡å—å\ç±»å\åŠ¨ä½œå\å‚æ•°</p>
<h3 id="æ¸²æŸ“"><a href="#æ¸²æŸ“" class="headerlink" title="æ¸²æŸ“"></a>æ¸²æŸ“</h3><h3 id="å“åº”"><a href="#å“åº”" class="headerlink" title="å“åº”"></a>å“åº”</h3><p>èµ°åˆ°è¿™é‡Œï¼Œéœ€è¦æ±‡æ€»ä¸€ä¸ªå”¯ä¸€çš„å“åº”ä¸€è‡´å¯¹å¤–ã€‚æ­¤æ—¶ä¼šè§¦å‘ <code>beforeSendResponse</code>ï¼Œå¹¶è°ƒç”¨ <code>Phalcon\Http\Response-&gt;sendHeaders()</code> å’Œ <code>Phalcon\Http\Response-&gt;sendCookies()</code>ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥å»è®¾ç½®ï¼Œç„¶åå¯¹å¤–è¿”å›ä¸€ä¸ª <code>Phalcon\Http\Response</code> å“åº”</p>
<p>æœªå®Œå¾…ç»­â€¦â€¦</p>
]]></content>
      <categories>
        <category>php</category>
      </categories>
      <tags>
        <tag>php</tag>
      </tags>
  </entry>
  <entry>
    <title>Phalcon æ¡†æ¶ä¹‹å‘½ä»¤è¡Œ</title>
    <url>/2018/03/07/php-phalcon-command/</url>
    <content><![CDATA[<p>è¿™å¹´å¤´å“ªä¸ªæ¡†æ¶è¦æ˜¯ä¸æä¾›å‘½ä»¤è¡Œäº¤äº’æ¥å£å’Œè„šæ‰‹æ¶ï¼Œå°±ä¸å¥½æ„æ€è‡ªç§°æ˜¯æ¡†æ¶ã€‚äº‹å®ä¸Šï¼Œä¸€ä¸ªä¼˜ç§€çš„æ¡†æ¶æ€»ä¼šé¢é¢ä¿±åˆ°çš„ï¼Œæ¡†æ¶æœ¬æ¥å°±æ˜¯è®©å¼€å‘è€…å‡è½»è´Ÿæ‹…ï¼Œé¿å…é‡å¤é€ è½®å­çš„ï¼Œè®©å¼€å‘è€…ä¸“æ³¨ä¸šåŠ¡æœ¬èº«ï¼Œè€Œä¸æ˜¯æŠŠæ—¶é—´ç²¾åŠ›æ¶ˆè€—åœ¨ç£¨åˆ€ä¸Šé¢ã€‚å½“ç„¶è¿™æ˜¯æŸ„åŒåˆƒå‰‘ï¼Œç†æƒ³çš„çŠ¶æ€ç†åº”æ˜¯ä¸šåŠ¡æŠ€æœ¯å¹¶é©¾é½é©±ã€‚æ— è®ºæ˜¯å»ºé€ é’¢é“å¤§å¦çš„ <code>Symfony</code>ï¼Œè¿˜æ˜¯åˆ›é€ è‰ºæœ¯å®¶å›­ <code>Laravel</code>ï¼Œå…¶å‘½ä»¤è¡Œå¼ºå¤§çš„ä»¤äººæœ›è€Œå´æ­¥ã€‚å›è¿‡å¤´æ¥çœ‹ä¸€çœ‹é€Ÿåº¦ä¸æ¿€æƒ…çš„ <code>Phalcon</code> å§</p>
<h2 id="å®‰è£…å‘½ä»¤"><a href="#å®‰è£…å‘½ä»¤" class="headerlink" title="å®‰è£…å‘½ä»¤"></a>å®‰è£…å‘½ä»¤</h2><blockquote>
<ul>
<li><a href="https://docs.phalconphp.com/en/latest/reference/tools.html">Phalcon Developer Tools for Offical Website</a></li>
<li><a href="https://github.com/phalcon/phalcon-devtools">Phalcon Developer Tools for Official GitHub</a></li>
</ul>
</blockquote>
<h3 id="æŒ‡å®šçš„ç›®å½•"><a href="#æŒ‡å®šçš„ç›®å½•" class="headerlink" title="æŒ‡å®šçš„ç›®å½•"></a>æŒ‡å®šçš„ç›®å½•</h3><blockquote>
<p>å°† <code>phalcon</code> å‘½ä»¤åŠ å…¥åˆ°ç³»ç»Ÿ <code>PATH</code> å˜é‡ä¸­</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> ~</span><br><span class="line">$ git <span class="built_in">clone</span> https://github.com/phalcon/phalcon-devtools.git .phalcon-devtools</span><br><span class="line">$ <span class="built_in">cd</span> .phalcon-devtools</span><br><span class="line">$ ln -s ~/phalcon-devtools/phalcon.php /usr/<span class="built_in">local</span>/bin/phalcon</span><br><span class="line">$ chmod a+x /usr/<span class="built_in">local</span>/bin/phalcon</span><br><span class="line">æˆ–è€…</span><br><span class="line">$ <span class="built_in">cd</span> ~</span><br><span class="line">$ composer global require phalcon/devtools</span><br><span class="line">$ vim ~/.zshrc <span class="comment"># vim ~/.bashrc</span></span><br><span class="line">$ <span class="built_in">export</span> PATH=<span class="string">&quot;<span class="variable">$PATH</span>:<span class="variable">$HOME</span>/.composer/vendor/bin/phalcon&quot;</span></span><br></pre></td></tr></table></figure>
<h2 id="åˆ›å»ºé¡¹ç›®"><a href="#åˆ›å»ºé¡¹ç›®" class="headerlink" title="åˆ›å»ºé¡¹ç›®"></a>åˆ›å»ºé¡¹ç›®</h2><blockquote>
<p>æ”¯æŒçš„é¡¹ç›®ç±»å‹ï¼š<code>cli</code>ï¼Œ<code>micro</code>ï¼Œ<code>simple</code> - é»˜è®¤ï¼Œ<code>modules</code>ï¼Œå…± <code>4</code> ç§ç±»å‹çš„é¡¹ç›®</p>
</blockquote>
<h3 id="å¯ç”¨å‘½ä»¤ä¸€è§ˆ"><a href="#å¯ç”¨å‘½ä»¤ä¸€è§ˆ" class="headerlink" title="å¯ç”¨å‘½ä»¤ä¸€è§ˆ"></a>å¯ç”¨å‘½ä»¤ä¸€è§ˆ</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ phalcon</span><br><span class="line"></span><br><span class="line">Phalcon DevTools (3.2.12)</span><br><span class="line"></span><br><span class="line">Available commands:</span><br><span class="line">  info             (<span class="built_in">alias</span> of: i)</span><br><span class="line">  commands         (<span class="built_in">alias</span> of: list, enumerate)</span><br><span class="line">  controller       (<span class="built_in">alias</span> of: create-controller)</span><br><span class="line">  module           (<span class="built_in">alias</span> of: create-module)</span><br><span class="line">  model            (<span class="built_in">alias</span> of: create-model)</span><br><span class="line">  all-models       (<span class="built_in">alias</span> of: create-all-models)</span><br><span class="line">  project          (<span class="built_in">alias</span> of: create-project)</span><br><span class="line">  scaffold         (<span class="built_in">alias</span> of: create-scaffold)</span><br><span class="line">  migration        (<span class="built_in">alias</span> of: create-migration)</span><br><span class="line">  webtools         (<span class="built_in">alias</span> of: create-webtools)</span><br><span class="line">  serve            (<span class="built_in">alias</span> of: server)</span><br><span class="line">  console          (<span class="built_in">alias</span> of: shell, psysh)</span><br></pre></td></tr></table></figure>
<h3 id="åˆ›å»ºé»˜è®¤é¡¹ç›®"><a href="#åˆ›å»ºé»˜è®¤é¡¹ç›®" class="headerlink" title="åˆ›å»ºé»˜è®¤é¡¹ç›®"></a>åˆ›å»ºé»˜è®¤é¡¹ç›®</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// åˆ›å»ºä¸€ä¸ª `cli` ç±»å‹çš„é¡¹ç›®</span><br><span class="line">$ phalcon project cli</span><br><span class="line"></span><br><span class="line">// åˆ›å»ºä¸€ä¸ª `micro` ç±»å‹çš„é¡¹ç›®</span><br><span class="line">$ phalcon project micro</span><br><span class="line"></span><br><span class="line">// åˆ›å»ºä¸€ä¸ª `simple` ç±»å‹çš„é¡¹ç›®</span><br><span class="line">$ phalcon project simple</span><br><span class="line"></span><br><span class="line">// åˆ›å»ºä¸€ä¸ª `modules` ç±»å‹çš„é¡¹ç›®</span><br><span class="line">$ phalcon project modules</span><br></pre></td></tr></table></figure>
<h3 id="åˆ›å»ºå®šåˆ¶é¡¹ç›®"><a href="#åˆ›å»ºå®šåˆ¶é¡¹ç›®" class="headerlink" title="åˆ›å»ºå®šåˆ¶é¡¹ç›®"></a>åˆ›å»ºå®šåˆ¶é¡¹ç›®</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ phalcon project --name example --enable-webtools --directory ./ --<span class="built_in">type</span> simple --use-config-ini --trace</span><br></pre></td></tr></table></figure>
<h2 id="åˆ›å»ºæ§åˆ¶å™¨å’Œæ¨¡å‹"><a href="#åˆ›å»ºæ§åˆ¶å™¨å’Œæ¨¡å‹" class="headerlink" title="åˆ›å»ºæ§åˆ¶å™¨å’Œæ¨¡å‹"></a>åˆ›å»ºæ§åˆ¶å™¨å’Œæ¨¡å‹</h2><h3 id="åœ¨åˆ›å»ºæ§åˆ¶å™¨å’Œæ¨¡å‹æ—¶ï¼Œå…ˆæ³¨å†Œå‘½åç©ºé—´"><a href="#åœ¨åˆ›å»ºæ§åˆ¶å™¨å’Œæ¨¡å‹æ—¶ï¼Œå…ˆæ³¨å†Œå‘½åç©ºé—´" class="headerlink" title="åœ¨åˆ›å»ºæ§åˆ¶å™¨å’Œæ¨¡å‹æ—¶ï¼Œå…ˆæ³¨å†Œå‘½åç©ºé—´"></a>åœ¨åˆ›å»ºæ§åˆ¶å™¨å’Œæ¨¡å‹æ—¶ï¼Œå…ˆæ³¨å†Œå‘½åç©ºé—´</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment">// loader.php</span></span><br><span class="line"><span class="variable">$loader</span> = <span class="keyword">new</span> \Phalcon\Loader();</span><br><span class="line"></span><br><span class="line"><span class="variable">$loader</span>-&gt;registerNamespaces([</span><br><span class="line">    <span class="string">&#x27;App\\Controller&#x27;</span> =&gt; <span class="string">&#x27;../app/controllers&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;App\\Model&#x27;</span>      =&gt; <span class="string">&#x27;../app/models&#x27;</span>,</span><br><span class="line">])-&gt;register();</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * We&#x27;re a registering a set of directories taken from the configuration file.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="variable">$loader</span>-&gt;registerDirs([</span><br><span class="line">    <span class="variable">$config</span>-&gt;application-&gt;controllersDir,</span><br><span class="line">    <span class="variable">$config</span>-&gt;application-&gt;modelsDir,</span><br><span class="line">])-&gt;register();</span><br></pre></td></tr></table></figure>
<h3 id="åˆ›å»ºæ§åˆ¶å™¨"><a href="#åˆ›å»ºæ§åˆ¶å™¨" class="headerlink" title="åˆ›å»ºæ§åˆ¶å™¨"></a>åˆ›å»ºæ§åˆ¶å™¨</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ phalcon controller --name article --base-class ControllerBase --force</span><br><span class="line">æˆ–è€…</span><br><span class="line">$ phalcon controller --name article --namespace App\\Controller --base-class ControllerBase --force</span><br></pre></td></tr></table></figure>
<h3 id="åˆ›å»ºæ¨¡å‹"><a href="#åˆ›å»ºæ¨¡å‹" class="headerlink" title="åˆ›å»ºæ¨¡å‹"></a>åˆ›å»ºæ¨¡å‹</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ phalcon model --name user</span><br><span class="line">æˆ–è€…</span><br><span class="line">$ phalcon model --name users --namespace App\\Model --get-set --doc --force --camelize --trace --mapcolumn --annotate</span><br></pre></td></tr></table></figure>
<h3 id="åˆ›å»ºè¿ç§»"><a href="#åˆ›å»ºè¿ç§»" class="headerlink" title="åˆ›å»ºè¿ç§»"></a>åˆ›å»ºè¿ç§»</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ phalcon migration --action=generate --config=./app/config/config.php --version=1.0.0 --descr=init --force</span><br></pre></td></tr></table></figure>
<h3 id="åˆ›å»ºè„šæ‰‹æ¶"><a href="#åˆ›å»ºè„šæ‰‹æ¶" class="headerlink" title="åˆ›å»ºè„šæ‰‹æ¶"></a>åˆ›å»ºè„šæ‰‹æ¶</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ phalcon scaffold --table-name=user --get-set --force --trace</span><br></pre></td></tr></table></figure>
<h3 id="è¿è¡Œå†…ç½®æœåŠ¡å™¨"><a href="#è¿è¡Œå†…ç½®æœåŠ¡å™¨" class="headerlink" title="è¿è¡Œå†…ç½®æœåŠ¡å™¨"></a>è¿è¡Œå†…ç½®æœåŠ¡å™¨</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ phalcon serve --hostname=127.0.0.1 --port=8080 --basepath=.htrouter.php --rootpath=public</span><br></pre></td></tr></table></figure>
<h2 id="é—®é¢˜"><a href="#é—®é¢˜" class="headerlink" title="é—®é¢˜"></a>é—®é¢˜</h2><p><a href="https://forum.phalconphp.com/discussion/4448/error-sqlstatehy000-2002-no-such-file-or-directory">Error: SQLSTATE[HY000] [2002] No such file or directory</a></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// ç¼–è¾‘ php.ini æ–‡ä»¶ä¸­çš„ PDO é»˜è®¤ socket</span><br><span class="line">$ pdo_mysql.default_socket=/usr/<span class="built_in">local</span>/var/run/mysql/mysql.sock</span><br></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="operator">/</span><span class="operator">/</span> æŸ¥è¯¢ socket å˜é‡</span><br><span class="line">$ <span class="keyword">SHOW</span> VARIABLES <span class="keyword">LIKE</span> <span class="string">&#x27;%socket%&#x27;</span>;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>php</category>
      </categories>
      <tags>
        <tag>php</tag>
        <tag>phalcon</tag>
      </tags>
  </entry>
  <entry>
    <title>PHP ä¸­çš„è¾“å‡ºç¼“å†²åŒº</title>
    <url>/2018/03/05/php-output-buffer/</url>
    <content><![CDATA[<p>ä»¥å‰æ€»ä»¥ä¸º <code>echo</code>ï¼Œ<code>print</code> ä¹‹ç±»çš„è¾“å‡ºå·¥å…·èƒŒåæ²¡ä»€ä¹ˆäº†ä¸èµ·çš„é€»è¾‘ï¼Œä¸å°±æ˜¯ç»™ä¸ªå­—ç¬¦ä¸²è®©ç»ˆç«¯æ˜¾ç¤ºä¸€ä¸‹å—ï¼Ÿå…¶å®ä¸ç„¶ï¼Œæ¯ä¸€ä¸ªç²¾å¿ƒè®¾è®¡çš„è¯­è¨€ç‰¹æ€§ï¼Œå‡½æ•°ï¼Œæ–¹æ³•â€¦â€¦èƒŒåéƒ½å¯è°“ç‹¬å…·åŒ å¿ƒï¼Œä½ çœ‹ï¼ŒPHP è¯­è¨€ä»æ¥éƒ½ä¸ä¼šè®¾è®¡ä¸€ä¸ªä¸€æ— æ˜¯å¤„çš„å·¥å…·å‡ºæ¥ï¼Œé‚£äº›é›•ç¢å‡ºæ¥çš„ç‰¹æ€§éƒ½æ˜¯é‚£ä¹ˆçš„æ°åˆ°å¥½å¤„ã€‚</p>
<h1 id="ç¼“å†²åŒºçš„ä¸€äº›è¯´æ˜"><a href="#ç¼“å†²åŒºçš„ä¸€äº›è¯´æ˜" class="headerlink" title="ç¼“å†²åŒºçš„ä¸€äº›è¯´æ˜"></a>ç¼“å†²åŒºçš„ä¸€äº›è¯´æ˜</h1><ul>
<li>æ­£å¸¸æƒ…å†µä¸‹ï¼Œä»»ä½•ä¼šè¾“å‡ºå†…å®¹çš„å‡½æ•°éƒ½ä¼šç”¨åˆ°è¾“å‡ºç¼“å†²åŒº</li>
<li>è¾“å‡ºç¼“å†²åŒºä¸æ˜¯å”¯ä¸€ç”¨äºç¼“å†²è¾“å‡ºçš„å±‚ï¼Œå®ƒå®é™…ä¸Šæ˜¯å¾ˆå¤šå±‚ä¸­çš„ä¸€ä¸ª</li>
<li><code>SAPI</code> ä¸­çš„è¾“å‡ºç¼“å†²åŒº</li>
</ul>
<p>æ•°æ®å†™å…¥é¡ºåºï¼š<code>echo/print</code> =&gt; PHP è¾“å‡ºç¼“å†²åŒº =&gt; <code>SAPI</code> ç¼“å†²åŒº =&gt; <code>TCP</code> ç¼“å†²åŒº =&gt; æµè§ˆå™¨</p>
<p><img src="https://inotes.oss-cn-beijing.aliyuncs.com/php/201812/php-ob-main.png" alt="php-ob-main.png"></p>
<h1 id="é»˜è®¤çš„è¾“å‡ºç¼“å†²åŒº"><a href="#é»˜è®¤çš„è¾“å‡ºç¼“å†²åŒº" class="headerlink" title="é»˜è®¤çš„è¾“å‡ºç¼“å†²åŒº"></a>é»˜è®¤çš„è¾“å‡ºç¼“å†²åŒº</h1><p>åœ¨ <code>PHP-FPM</code> ä¸­ï¼Œä¸ç¼“å†²åŒºç›¸å…³çš„é…ç½®ã€‚</p>
<blockquote>
<p>è¿™äº›å€¼é€šè¿‡ <code>ini_set()</code> è®¾ç½®åä¹Ÿä¸èµ·ä½œç”¨ï¼Œæ¢å¥è¯è¯´å°±æ˜¯è®¾ç½®çš„å¤ªè¿Ÿäº†ï¼Œå› ä¸ºè¾“å‡ºç¼“å†²åŒºå±‚åœ¨ PHP ç¨‹åºå¯åŠ¨æ—¶ï¼Œè¿˜æ²¡æœ‰è¿è¡Œä»»ä½•è„šæœ¬è§£æä¹‹å‰å°±å·²ç»å¯åŠ¨äº†ã€‚è¿™äº›å€¼éœ€è¦åœ¨ <code>php.ini</code> æˆ–è€…åœ¨æ‰§è¡Œç¨‹åºæ—¶ä½¿ç”¨ <code>-d</code> é€‰é¡¹æ‰æœ‰æ•ˆ</p>
</blockquote>
<h2 id="output-buffering"><a href="#output-buffering" class="headerlink" title="output_buffering"></a>output_buffering</h2><p>é»˜è®¤å€¼ä¸º <code>4096</code>ï¼Œè®¾ç½®ä¸º <code>Off</code> æˆ–è€… <code>0</code>ï¼Œè¡¨ç¤ºç¦ç”¨è¾“å‡ºç¼“å†²åŒºï¼›è®¾ç½®ä¸º <code>On</code>ï¼Œè¡¨ç¤ºè¾“å‡ºç¼“å†²åŒºä¸å—é™åˆ¶ï¼Œæ…ç”¨ï¼›</p>
<h2 id="implicit-flush"><a href="#implicit-flush" class="headerlink" title="implicit_flush"></a>implicit_flush</h2><p>é»˜è®¤å€¼ä¸º <code>Off</code>ï¼Œè®¾ç½®ä¸º <code>On</code>ï¼Œè¡¨ç¤ºä¸€æ—¦æœ‰ä»»ä½•è¾“å‡ºå†™åˆ° <code>SAPI</code> ç¼“å†²åŒºå±‚ï¼Œå®ƒéƒ½ä¼šç«‹å³åˆ·æ–°ï¼Œä¹Ÿå°±æ˜¯æŠŠæ•°æ®å†™åˆ°æ›´ä½å±‚ï¼Œå¹¶ä¸”ç¼“å†²åŒºä¼šè¢«æ¸…ç©º</p>
<h2 id="output-handler"><a href="#output-handler" class="headerlink" title="output_handler"></a>output_handler</h2><p>å›è°ƒå‡½æ•°ï¼Œå®ƒå¯ä»¥åœ¨ç¼“å†²åŒºåˆ·æ–°ä¹‹å‰ä¿®æ”¹ç¼“å†²ä¸­çš„å†…å®¹ã€‚PHP çš„æ‰©å±•æä¾›äº†å¾ˆå¤šå›è°ƒå‡½æ•°ï¼š</p>
<ul>
<li><code>ob_gzhandler</code>ï¼šä½¿ç”¨ <code>ext/zlib</code> å‹ç¼©è¾“å‡º</li>
<li><code>mb_output_handler</code>ï¼šä½¿ç”¨ <code>ext/mbstring</code> è½¬æ¢å­—ç¬¦ç¼–ç </li>
<li><code>ob_iconv_handler</code>ï¼šä½¿ç”¨ <code>ext/iconv</code> è½¬æ¢å­—ç¬¦ç¼–ç </li>
<li><code>ob_tidyhandler</code>ï¼šä½¿ç”¨ <code>ext/tidy</code> æ•´ç†è¾“å‡ºçš„ HTML æ–‡æœ¬</li>
<li><code>ob_[inflate/deflate]_handler</code>ï¼šä½¿ç”¨ <code>ext/http</code> å‹ç¼©è¾“å‡º</li>
<li><code>ob_etaghandler</code>ï¼šä½¿ç”¨ <code>ext/http</code> è‡ªåŠ¨ç”Ÿæˆ HTTP çš„ Etag</li>
</ul>
<h2 id="å®ä¾‹"><a href="#å®ä¾‹" class="headerlink" title="å®ä¾‹"></a>å®ä¾‹</h2><p>è®¾ç½®ç¼“å†²åŒºå¤§å°ä¸º 16 å­—èŠ‚ï¼Œä½¿ç”¨ PHP å†…ç½®çš„ Web æœåŠ¡å™¨ SAPIã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ php -d output_buffering=16 -d implicit_flush=1 -S 127.0.0.1:8080 -t ~/Downloads/<span class="built_in">test</span></span><br></pre></td></tr></table></figure>
<p>æµè§ˆå™¨è®¿é—®è„šæœ¬</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ç¨‹åºè„šæœ¬è¿è¡Œçš„åå‘ç¼“å†²åŒºå†™å…¥ 15 ä¸ªå­—èŠ‚</span></span><br><span class="line"><span class="keyword">echo</span> str_repeat(<span class="string">&#x27;Hello&#x27;</span>, <span class="number">3</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¿›å…¥ 2 ç§’ä¼‘çœ çŠ¶æ€</span></span><br><span class="line">sleep(<span class="number">2</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ­¤æ—¶è¿™ä¸ªå­—èŠ‚å¡«æ»¡äº†ç¼“å†²åŒºï¼Œç¼“å†²åŒºä¼šç«‹å³åˆ·æ–°è‡ªèº«ï¼ŒæŠŠæ•°æ®ä¼ é€’ç»™ SAPI å±‚çš„ç¼“å†²åŒº</span></span><br><span class="line"><span class="comment">// ç”±äº implicit_flush=1ï¼ŒSAPI å±‚çš„ç¼“å†²åŒºä¹Ÿä¼šç«‹å³åˆ·æ–°åˆ°ä¸‹ä¸€å±‚</span></span><br><span class="line"><span class="comment">// æµè§ˆå™¨è¾“å‡º HelloHelloHelloW</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&#x27;W&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¿›å…¥ 2 ç§’ä¼‘çœ çŠ¶æ€</span></span><br><span class="line">sleep(<span class="number">2</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ­¤æ—¶å°†è¿™ 2 ä¸ªå­—èŠ‚å†™å…¥åˆ°ç¼“å†²åŒºï¼Œç”±äºè¿˜ä¸å¤Ÿå¡«æ»¡ç¼“å†²åŒºï¼Œè¿™æ—¶è¿˜ä¸ä¼šè¾“å‡ºåˆ°æµè§ˆå™¨</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&#x27;or&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¿›å…¥ 2 ç§’ä¼‘çœ çŠ¶æ€</span></span><br><span class="line">sleep(<span class="number">2</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ­¤æ—¶è„šæœ¬æ‰§è¡Œå®Œæ¯•ï¼Œåœ¨æ‰§è¡Œå®Œæ¯•ä¹‹å‰ï¼Œå°†è¿™ 2 ä¸ªå­—èŠ‚å†™å…¥åˆ°ç¼“å†²åŒºï¼Œè¿˜æ˜¯ä¸å¤Ÿå¡«æ»¡ç¼“å†²åŒº</span></span><br><span class="line"><span class="comment">// ä½†è¿™æ—¶è„šæœ¬å·²ç»æ‰§è¡Œå®Œæ¯•ï¼Œç¼“å†²åŒºå°†å·²æœ‰çš„æ•°æ®å…¨éƒ¨è¾“å‡ºæµè§ˆå™¨</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&#x27;ld&#x27;</span>;</span><br></pre></td></tr></table></figure>
<h1 id="æ¶ˆæ¯å¤´å’Œæ¶ˆæ¯ä½“"><a href="#æ¶ˆæ¯å¤´å’Œæ¶ˆæ¯ä½“" class="headerlink" title="æ¶ˆæ¯å¤´å’Œæ¶ˆæ¯ä½“"></a>æ¶ˆæ¯å¤´å’Œæ¶ˆæ¯ä½“</h1><p>å¦‚æœä½¿ç”¨äº†è¾“å‡ºç¼“å†²åŒºå±‚ï¼Œé‚£ä¹ˆ PHP ä¼šæ¥ç®¡è¿™äº›æ¶ˆæ¯å¤´å’Œæ¶ˆæ¯ä½“çš„å‘é€ã€‚</p>
<p>PHP ä¸­æœ‰å…³ä¸æ¶ˆæ¯å¤´çš„å‡½æ•°éƒ½ä½¿ç”¨äº†å†…éƒ¨çš„ <code>sapi_header_op()</code> å‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°è´Ÿè´£æŠŠå†…å®¹å†™å…¥åˆ°æ¶ˆæ¯å¤´ç¼“å†²åŒºä¸­ï¼Œæ‰€ä»¥æˆ‘ä»¬æ‰èƒ½ä¼˜é›…çš„ä½¿ç”¨ <code>header()</code>ï¼Œ<code>setcookie()</code> è¯¸å¦‚æ­¤ç±»çš„æ–¹æ³•ã€‚</p>
<p>åœ¨è¾“å‡ºå†…å®¹æ—¶ï¼Œå†…å®¹ä¼šå…ˆè¢«å†™å…¥åˆ°è¾“å‡ºç¼“å†²åŒºï¼ˆå¯èƒ½æ˜¯å¤šä¸ªï¼‰ï¼Œå½“ç¼“å†²åŒºä¸­çš„å†…å®¹éœ€è¦è¢«å‘é€æ—¶ï¼ŒPHP ä¼šå…ˆå‘é€æ¶ˆæ¯å¤´ï¼Œå†å‘é€æ¶ˆæ¯ä½“ï¼Œä½ çœ‹ï¼Œæ‰€æœ‰çš„è¿™äº›éƒ½ä¸è´¹å¹ç°ä¹‹åŠ›ï¼ŒPHP ä¸ºæˆ‘ä»¬æå®šäº†æ‰€æœ‰çš„äº‹æƒ…ã€‚</p>
<h1 id="ç”¨æˆ·çš„è¾“å‡ºç¼“å†²åŒº"><a href="#ç”¨æˆ·çš„è¾“å‡ºç¼“å†²åŒº" class="headerlink" title="ç”¨æˆ·çš„è¾“å‡ºç¼“å†²åŒº"></a>ç”¨æˆ·çš„è¾“å‡ºç¼“å†²åŒº</h1><p>å¤šä¸ªç¼“å†²åŒºä¼šç»„æˆä¸€ä¸ªå †æ ˆç»“æ„ï¼Œæ¯ä¸ªæ–°å»ºçš„ç¼“å†²åŒºéƒ½ä¼šå †å åˆ°ä¹‹å‰çš„ç¼“å†²åŒºä¸Šï¼Œæ¯å½“å®ƒè¢«å¡«æ»¡æˆ–è€…æº¢å‡ºï¼Œéƒ½ä¼šæ‰§è¡Œåˆ·æ–°æ“ä½œï¼Œç„¶åæŠŠå…¶ä¸­çš„æ•°æ®ä¼ é€’ç»™ä¸‹ä¸€ä¸ªç¼“å†²åŒºã€‚</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line">ob_start(<span class="function"><span class="keyword">function</span> (<span class="params"><span class="variable">$parameter</span></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">static</span> <span class="variable">$index</span> = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="variable">$index</span>++ . <span class="string">&#x27;: &#x27;</span> . <span class="variable">$parameter</span> . <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">&#125;, <span class="number">6</span>);</span><br><span class="line"></span><br><span class="line">ob_start(<span class="string">&#x27;handle&#x27;</span>, <span class="number">3</span>);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">handle</span>(<span class="params"><span class="variable">$parameter</span></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> ucfirst(<span class="variable">$parameter</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ­¤æ—¶å­—ç¬¦ä¸²è¢«å†™å…¥åˆ°ç¬¬äºŒä¸ªç¼“å†²åŒºï¼Œç¼“å†²åŒºçš„é•¿åº¦ä¸å¤Ÿè®¾å®šå€¼ï¼Œä¸ä¼šåˆ·æ–°è¿™ä¸ªç¼“å†²åŒº</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&#x27;fo&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¼‘çœ  2 ç§’</span></span><br><span class="line">sleep(<span class="number">2</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 1. æ­¤æ—¶å­—ç¬¦ä¸²å†™å…¥åˆ°ç¬¬äºŒä¸ªç¼“å†²åŒºåï¼Œç”±äº chunk_size ä¸º 3ï¼Œæ‰€ä»¥ç¬¬äºŒä¸ªç¼“å†²åŒºä¼šåˆ·æ–°</span></span><br><span class="line"><span class="comment">// 2. å¹¶ä¸”å°†è¿”å›çš„å­—ç¬¦ä¸² Foo å†™å…¥åˆ°ç¬¬ä¸€ä¸ªç¼“å†²åŒº</span></span><br><span class="line"><span class="comment">// 3. æ­¤åˆ»ç¬¬ä¸€ä¸ªç¼“å†²åŒºæœªè¢«å¡«æ»¡</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&#x27;o&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¼‘çœ  2 ç§’</span></span><br><span class="line">sleep(<span class="number">2</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 1. æ­¤æ—¶å­—ç¬¦ä¸²å†™å…¥åˆ°ç¬¬äºŒä¸ªç¼“å†²åŒºåï¼Œç«‹å³åˆ·æ–°ç¼“å†²åŒº</span></span><br><span class="line"><span class="comment">// 2. å¹¶ä¸”å°†è¿”å›çš„å­—ç¬¦ä¸² HelloWorld å†™å…¥åˆ°ç¬¬ä¸€ä¸ªç¼“å†²åŒº</span></span><br><span class="line"><span class="comment">// 3. ä¸Šä¸€æ¬¡ç¼“å†²åŒºçš„ Foo ä¸ æœ¬æ¬¡çš„ HelloWorld åˆå¹¶</span></span><br><span class="line"><span class="comment">// 4. ç”±äºç¬¬ä¸€ä¸ªç¼“å†²åŒº chunk_size ä¸º 10ï¼Œè¿™æ—¶ç¼“å†²å·²ç»è¢«å¡«æ»¡ï¼Œæ‰€ä»¥ç¬¬ä¸€ä¸ªç¼“å†²åŒºä¼šåˆ·æ–°è¾“å‡ºåˆ°æµè§ˆå™¨</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&#x27;helloWorld&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¼‘çœ  2 ç§’</span></span><br><span class="line">sleep(<span class="number">2</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 1. æ­¤æ—¶å­—ç¬¦ä¸²å†™å…¥åˆ°ç¬¬äºŒä¸ªç¼“å†²åŒºåï¼Œç«‹å³åˆ·æ–°ç¼“å†²åŒº</span></span><br><span class="line"><span class="comment">// 2. å¹¶ä¸”å°†è¿”å›çš„å­—ç¬¦ä¸² Enough å†™å…¥åˆ°ç¬¬ä¸€ä¸ªç¼“å†²åŒº</span></span><br><span class="line"><span class="comment">// 3. ç”±äºä¸Šä¸€æ¬¡çš„ç¼“å†²è¢«å¡«æ»¡åˆ·æ–°è¾“å‡ºäº†ï¼Œæ­£å¥½æœ¬æ¬¡çš„ç¼“å†²åŒºä¹Ÿåˆšå¥½è¢«å¡«æ»¡ï¼Œæ‰€æœ‰ç¬¬ä¸€ä¸ªç¼“å†²åŒºä¼šåˆ·æ–°è¾“å‡ºåˆ°æµè§ˆå™¨</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&#x27;enough&#x27;</span>;</span><br><span class="line"></span><br><span class="line">sleep(<span class="number">2</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// é‡å¤æ­¤å‰çš„æ­¥éª¤ï¼Œç”±äºè„šæœ¬å·²ç»æ‰§è¡Œç»“æœï¼Œè¢«è¿«åˆ·æ–°è¾“å‡ºåˆ°æµè§ˆå™¨</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&#x27;exit&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»“æœ</span></span><br><span class="line"><span class="number">0</span>: FooHelloWorld <span class="number">1</span>: Enough <span class="number">2</span>: <span class="keyword">Exit</span></span><br></pre></td></tr></table></figure>
<h1 id="è¾“å‡ºç¼“å†²åŒºå®ä¾‹"><a href="#è¾“å‡ºç¼“å†²åŒºå®ä¾‹" class="headerlink" title="è¾“å‡ºç¼“å†²åŒºå®ä¾‹"></a>è¾“å‡ºç¼“å†²åŒºå®ä¾‹</h1><h2 id="é»˜è®¤çš„ç¼“å†²åŒºè¾“å‡º"><a href="#é»˜è®¤çš„ç¼“å†²åŒºè¾“å‡º" class="headerlink" title="é»˜è®¤çš„ç¼“å†²åŒºè¾“å‡º"></a>é»˜è®¤çš„ç¼“å†²åŒºè¾“å‡º</h2><p>åœ¨è„šæœ¬å¤„ç†ç»“æŸä¹‹å‰ï¼Œæµè§ˆå™¨ç«¯ä¸ä¼šè¾“å‡ºï¼Œç”±äºæ•°æ®é‡å¤ªå°ï¼Œè¾“å‡ºç¼“å†²åŒºæ²¡æœ‰å†™æ»¡ã€‚å†™å…¥æ•°æ®çš„é¡ºåºï¼šPHP ç¼“å†²åŒºã€TCP ç¼“å†²åŒºã€æµè§ˆå™¨</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$i</span> = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">while</span> (<span class="variable">$i</span> &lt; <span class="number">10</span>) &#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="variable">$i</span> . <span class="string">&#x27;&lt;br&gt;&#x27;</span>;</span><br><span class="line">    <span class="variable">$i</span>++;</span><br><span class="line">    sleep(<span class="variable">$i</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="å…³é—­åçš„ç¼“å†²åŒºè¾“å‡º"><a href="#å…³é—­åçš„ç¼“å†²åŒºè¾“å‡º" class="headerlink" title="å…³é—­åçš„ç¼“å†²åŒºè¾“å‡º"></a>å…³é—­åçš„ç¼“å†²åŒºè¾“å‡º</h2><p>å°† <code>output_buffering</code> çš„å€¼æ”¹ä¸º <code>0</code>ï¼Œæ‰§è¡Œè„šæœ¬åï¼Œå› åº”ç¼“å†²åŒºçš„å®¹é‡è®¾ç½®ä¸º <code>0</code>ï¼Œå³ç¦ç”¨äº† PHP ç¼“å†²åŒºæœºåˆ¶ã€‚è¿™æ—¶æµè§ˆå™¨ç«¯ä¼šæŒ‰ç¨‹åºå®šä¹‰çš„æ—¶é—´é—´éš”ä¸æ–­è¾“å‡ºï¼Œä¸ä¼šå‡ºç°æµè§ˆå™¨ç•Œé¢ç©ºç™½ç­‰å¾…çš„æƒ…å†µã€‚å†™å…¥æ•°æ®çš„é¡ºåºï¼šTCP ç¼“å†²åŒºã€æµè§ˆå™¨</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$i</span> = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">while</span> (<span class="variable">$i</span> &lt; <span class="number">10</span>) &#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="variable">$i</span> . <span class="string">&#x27;&lt;br&gt;&#x27;</span>;</span><br><span class="line">    flush();</span><br><span class="line">    sleep(<span class="number">1</span>);</span><br><span class="line">    <span class="variable">$i</span>++;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="è‡ªå®šä¹‰çš„ç¼“å†²åŒºè¾“å‡º"><a href="#è‡ªå®šä¹‰çš„ç¼“å†²åŒºè¾“å‡º" class="headerlink" title="è‡ªå®šä¹‰çš„ç¼“å†²åŒºè¾“å‡º"></a>è‡ªå®šä¹‰çš„ç¼“å†²åŒºè¾“å‡º</h2><p>å°† <code>output_buffing</code> å€¼æ”¹ä¸ºé»˜è®¤çš„ <code>4096</code></p>
<p>ä½¿ç”¨ <code>dd</code> å‘½ä»¤å‡†å¤‡ä¸€ä¸ªå¤§å°ä¸º <code>4096</code> æ–‡ä»¶</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ dd <span class="keyword">if</span>=/dev/zero of=file4096 bs=4096 count=1</span><br><span class="line">$ ll file4096</span><br><span class="line">-rw-r--r--  1 majinyun  staff   4.0K Mar 16 11:16 file4096</span><br></pre></td></tr></table></figure>
<p>è„šæœ¬åœ¨æ¯æ¬¡æ‰§è¡Œæ—¶ï¼Œç”±äºè¯»å–çš„æ–‡ä»¶å†…å®¹å¤§å°æ­£å¥½ç­‰äºç¼“å†²åŒºçš„å¤§å°ï¼Œæ‰€ä»¥ä¼šç«‹å³åˆ·æ–°ç¼“å†²åŒºï¼Œè¾“å‡ºåˆ°å®¢æˆ·ç«¯æµè§ˆå™¨ï¼Œåœ¨æ­¤è¿‡ç¨‹ä¸­æµè§ˆå™¨ä¸ä¼šå‡ºç°ç©ºç™½ç­‰å¾…æœŸï¼Œè€Œä¼šæŒç»­è¾“å‡ºç¨‹åºä¸­æŒ‡å®šçš„å†…å®¹</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$filename</span> = dirname(dirname(<span class="keyword">__DIR__</span>)) . <span class="string">&#x27;/../Downloads/test/file4096&#x27;</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="variable">$i</span> = <span class="number">0</span>; <span class="variable">$i</span> &lt; <span class="number">10</span>; <span class="variable">$i</span>++) &#123;</span><br><span class="line">    <span class="keyword">echo</span> file_get_contents(<span class="variable">$filename</span>) . <span class="variable">$i</span> . <span class="string">&#x27;&lt;br&gt;&#x27;</span>;</span><br><span class="line">    sleep(<span class="number">1</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="ä½¿ç”¨-ob-start-åçš„ç¼“å†²åŒºè¾“å‡º"><a href="#ä½¿ç”¨-ob-start-åçš„ç¼“å†²åŒºè¾“å‡º" class="headerlink" title="ä½¿ç”¨ ob_start åçš„ç¼“å†²åŒºè¾“å‡º"></a>ä½¿ç”¨ ob_start åçš„ç¼“å†²åŒºè¾“å‡º</h2><p>ä½¿ç”¨ <code>ob_start()</code> åï¼ŒPHP çš„ç¼“å†²åŒºä¼šè¢«æ‰©å±•åˆ°è¶³å¤Ÿå¤§ï¼Œç›´åˆ° <code>ob_end_flush()</code> å‡½æ•°è°ƒç”¨æˆ–è€…è„šæœ¬è¿è¡Œç»“æŸåï¼Œæ‰å‘é€ç¼“å†²åŒºä¸­çš„æ•°æ®åˆ°å®¢æˆ·ç«¯æµè§ˆå™¨</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line">ob_start();</span><br><span class="line"></span><br><span class="line"><span class="variable">$filename</span> = dirname(<span class="keyword">__DIR__</span>, <span class="number">3</span>) . <span class="string">&#x27;/Downloads/test/f4096&#x27;</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="variable">$i</span> = <span class="number">0</span>; <span class="variable">$i</span> &lt; <span class="number">10</span>; <span class="variable">$i</span>++) &#123;</span><br><span class="line">    <span class="keyword">echo</span> file_get_contents(<span class="variable">$filename</span>) . <span class="variable">$i</span> . <span class="string">&#x27;&lt;br&gt;&#x27;</span>;</span><br><span class="line">    sleep(<span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line">ob_end_flush();</span><br></pre></td></tr></table></figure>
<p>æ‰§è¡Œè„šæœ¬åï¼Œ<code>ob_get_contents()</code> ä¼šè·å–ä¸€åˆ†ç¼“å†²åŒºä¸­çš„å‰¯æœ¬ï¼Œç»“æœä¸­æœ‰ä¸¤æ¬¡è¾“å‡º</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line">ob_start();</span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&#x27;hello world&#x27;</span> . <span class="string">&#x27;&lt;br&gt;&#x27;</span>;</span><br><span class="line"><span class="variable">$contents</span> = ob_get_contents();</span><br><span class="line"></span><br><span class="line">ob_end_flush();</span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$contents</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»“æœ</span></span><br><span class="line">hello world</span><br><span class="line">hello world</span><br></pre></td></tr></table></figure>
<p>æ‰§è¡Œè„šæœ¬ç»“æŸåï¼Œç”±äºä½¿ç”¨äº† <code>ob_end_clean()</code> å‡½æ•°ï¼Œå°† PHP ç¼“å†²åŒºä¸­çš„å†…å®¹ç»™åˆ é™¤äº†ï¼Œæ‰€ä»¥ç»“æœä¸­ä»…æœ‰ä¸€æ¬¡è¾“å‡º</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line">ob_start();</span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&#x27;hello world&#x27;</span> . <span class="string">&#x27;&lt;br&gt;&#x27;</span>;</span><br><span class="line"><span class="variable">$contents</span> = ob_get_contents();</span><br><span class="line"></span><br><span class="line">ob_end_clean();</span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$contents</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»“æœ</span></span><br><span class="line">hello world</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>php</category>
      </categories>
      <tags>
        <tag>php</tag>
      </tags>
  </entry>
  <entry>
    <title>PHP74 æ–°ç‰¹æ€§</title>
    <url>/2019/11/29/php-php74-new-features/</url>
    <content><![CDATA[<p><img src="/images/2019/201911291254.png" alt="201911291254.png"></p>
<p>PHP 7.4.0 æä¾›äº†è®¸å¤šæ”¹è¿›å’Œæ–°ç‰¹æ€§ï¼Œæ¯”å¦‚ï¼š</p>
<ul>
<li><a href="https://www.php.net/manual/zh/migration74.new-features.php#migration74.new-features.core.typed-properties">Typed Properties</a></li>
<li><a href="https://www.php.net/manual/zh/migration74.new-features.php#migration74.new-features.core.arrow-functions">Array Functions</a></li>
<li><a href="https://www.php.net/manual/zh/migration74.new-features.php#migration74.new-features.core.type-variance">Limited Return Type Convariance and Argument Type Contravariance</a></li>
<li><a href="https://www.php.net/manual/zh/migration74.new-features.php#migration74.new-features.core.unpack-inside-array">Unpacking Inside Arrays</a></li>
<li><a href="https://www.php.net/manual/zh/migration74.new-features.php#migration74.new-features.core.numeric-literal-separator">Numeric Literal Separator</a></li>
<li><a href="https://www.php.net/manual/zh/migration74.new-features.php#migration74.new-features.core.weakreference">Weak References</a></li>
<li><a href="https://www.php.net/manual/zh/migration74.new-features.php#migration74.new-features.core.tostring-exceptions">Allow Exception from __toString()</a></li>
<li><a href="https://www.php.net/manual/zh/opcache.configuration.php#ini.opcache.preload">Opcache Preloading</a></li>
<li><a href="https://www.php.net/manual/zh/migration74.deprecated.php">Several Deprecations</a></li>
<li><a href="https://www.php.net/manual/zh/migration74.deprecated.php">Extensions Removed from the Core</a></li>
</ul>
<span id="more"></span>
<h1 id="æœ‰ç±»å‹çš„ç±»å±æ€§"><a href="#æœ‰ç±»å‹çš„ç±»å±æ€§" class="headerlink" title="æœ‰ç±»å‹çš„ç±»å±æ€§"></a>æœ‰ç±»å‹çš„ç±»å±æ€§</h1><p>ç±»å±æ€§ç°åœ¨æ”¯æŒç±»å‹å£°æ˜ã€‚</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">User</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span> <span class="variable">$id</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">string</span> <span class="variable">$name</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable">$user</span> = <span class="keyword">new</span> User();</span><br><span class="line"><span class="variable">$user</span>-&gt;id = <span class="string">&#x27;123&#x27;</span>;</span><br><span class="line"><span class="variable">$user</span>-&gt;name = <span class="number">123</span>;</span><br><span class="line"></span><br><span class="line">var_dump(<span class="variable">$user</span>-&gt;id, <span class="variable">$user</span>-&gt;name);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»“æœ</span></span><br><span class="line"><span class="keyword">int</span>(<span class="number">123</span>)</span><br><span class="line"><span class="keyword">string</span>(<span class="number">3</span>) <span class="string">&quot;123&quot;</span></span><br></pre></td></tr></table></figure>
<h1 id="ç®­å¤´å‡½æ•°"><a href="#ç®­å¤´å‡½æ•°" class="headerlink" title="ç®­å¤´å‡½æ•°"></a>ç®­å¤´å‡½æ•°</h1><p>ç®­å¤´å‡½æ•°ä¸ºä½¿ç”¨éšå¼æŒ‰å€¼èŒƒå›´ç»‘å®šå®šä¹‰å‡½æ•°æä¾›äº†ä¸€ç§ç®€å†™è¯­æ³•ã€‚</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$factor</span> = <span class="number">10</span>;</span><br><span class="line"><span class="variable">$nums</span> = array_map(<span class="function"><span class="keyword">fn</span>(<span class="params"><span class="variable">$n</span></span>) =&gt;</span> <span class="variable">$n</span> * <span class="variable">$factor</span>, [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]);</span><br><span class="line"></span><br><span class="line">var_dump(<span class="variable">$nums</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»“æœ</span></span><br><span class="line"><span class="keyword">array</span>(<span class="number">4</span>) &#123;</span><br><span class="line">  [<span class="number">0</span>]=&gt;</span><br><span class="line">  <span class="keyword">int</span>(<span class="number">10</span>)</span><br><span class="line">  [<span class="number">1</span>]=&gt;</span><br><span class="line">  <span class="keyword">int</span>(<span class="number">20</span>)</span><br><span class="line">  [<span class="number">2</span>]=&gt;</span><br><span class="line">  <span class="keyword">int</span>(<span class="number">30</span>)</span><br><span class="line">  [<span class="number">3</span>]=&gt;</span><br><span class="line">  <span class="keyword">int</span>(<span class="number">40</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="æœ‰é™è¿”å›ç±»å‹åå˜å’Œå‚æ•°ç±»å‹é€†å˜"><a href="#æœ‰é™è¿”å›ç±»å‹åå˜å’Œå‚æ•°ç±»å‹é€†å˜" class="headerlink" title="æœ‰é™è¿”å›ç±»å‹åå˜å’Œå‚æ•°ç±»å‹é€†å˜"></a>æœ‰é™è¿”å›ç±»å‹åå˜å’Œå‚æ•°ç±»å‹é€†å˜</h1><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">B</span> <span class="keyword">extends</span> <span class="title">A</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Producer</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">method</span>(<span class="params"></span>): <span class="title">A</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="keyword">__METHOD__</span>, PHP_EOL;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> A();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ChildProducer</span> <span class="keyword">extends</span> <span class="title">Producer</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">method</span>(<span class="params"></span>): <span class="title">B</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="keyword">__METHOD__</span>, PHP_EOL;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> B();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable">$producer</span> = <span class="keyword">new</span> Producer();</span><br><span class="line"><span class="variable">$childProducer</span> = <span class="keyword">new</span> ChildProducer();</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (<span class="variable">$producer</span>-&gt;method() <span class="keyword">instanceof</span> A) &#123;</span><br><span class="line">    var_dump(<span class="string">&#x27;æˆ‘ç‰¹ä¹ˆå°±è¿”å› A çš„å®ä¾‹&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> (<span class="variable">$childProducer</span>-&gt;method() <span class="keyword">instanceof</span> B) &#123;</span><br><span class="line">    var_dump(<span class="string">&#x27;æˆ‘ç‰¹ä¹ˆå°±è¿”å› B çš„å®ä¾‹&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»“æœ</span></span><br><span class="line">Producer::method</span><br><span class="line"><span class="keyword">string</span>(<span class="number">30</span>) <span class="string">&quot;æˆ‘ç‰¹ä¹ˆå°±è¿”å› A çš„å®ä¾‹&quot;</span></span><br><span class="line">ChildProducer::method</span><br><span class="line"><span class="keyword">string</span>(<span class="number">30</span>) <span class="string">&quot;æˆ‘ç‰¹ä¹ˆå°±è¿”å› B çš„å®ä¾‹&quot;</span></span><br></pre></td></tr></table></figure>
<h1 id="Null-åˆå¹¶è¿ç®—ç¬¦"><a href="#Null-åˆå¹¶è¿ç®—ç¬¦" class="headerlink" title="Null åˆå¹¶è¿ç®—ç¬¦"></a>Null åˆå¹¶è¿ç®—ç¬¦</h1><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">defaultValue</span>(<span class="params"></span>): <span class="title">string</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable">$array</span> = <span class="variable">$_REQUEST</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// PHP74 ä¹‹å‰</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (! <span class="keyword">isset</span>(<span class="variable">$array</span>[<span class="string">&#x27;key&#x27;</span>])) &#123;</span><br><span class="line">    <span class="variable">$array</span>[<span class="string">&#x27;key&#x27;</span>] = defaultValue();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// PHP74 å¼€å§‹</span></span><br><span class="line"><span class="variable">$array</span>[<span class="string">&#x27;key&#x27;</span>] ??= defaultValue();</span><br><span class="line"></span><br><span class="line"><span class="comment">// è™½ç„¶ä»¥ä¸‹ä»£ç ä¹Ÿå¯ä»¥ï¼Œä½†æ˜¯æœ¬äººå¼ºçƒˆåå¯¹è¿™æ ·å†™ï¼Œä¸è¦é—®æˆ‘ä¸ºä»€ä¹ˆã€‚ä»£ç å—æˆ‘æ€»æ˜¯ç”¨ &#123;&#125; åŒ…èµ·æ¥</span></span><br><span class="line"><span class="keyword">if</span> (! <span class="keyword">isset</span>(<span class="variable">$array</span>[<span class="string">&#x27;key&#x27;</span>])) <span class="variable">$array</span>[<span class="string">&#x27;key&#x27;</span>] = defaultValue();</span><br></pre></td></tr></table></figure>
<h1 id="åœ¨æ•°ç»„å†…éƒ¨å±•å¼€å…ƒç´ "><a href="#åœ¨æ•°ç»„å†…éƒ¨å±•å¼€å…ƒç´ " class="headerlink" title="åœ¨æ•°ç»„å†…éƒ¨å±•å¼€å…ƒç´ "></a>åœ¨æ•°ç»„å†…éƒ¨å±•å¼€å…ƒç´ </h1><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$parts</span> = [<span class="string">&#x27;apple&#x27;</span>, <span class="string">&#x27;pear&#x27;</span>];</span><br><span class="line"><span class="variable">$fruits</span> = [<span class="string">&#x27;banana&#x27;</span>, <span class="string">&#x27;orange&#x27;</span>, ...<span class="variable">$parts</span>, <span class="string">&#x27;watermelon&#x27;</span>];</span><br><span class="line"></span><br><span class="line">var_dump(<span class="variable">$fruits</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»“æœ</span></span><br><span class="line"><span class="keyword">array</span>(<span class="number">5</span>) &#123;</span><br><span class="line">  [<span class="number">0</span>]=&gt;</span><br><span class="line">  <span class="keyword">string</span>(<span class="number">6</span>) <span class="string">&quot;banana&quot;</span></span><br><span class="line">  [<span class="number">1</span>]=&gt;</span><br><span class="line">  <span class="keyword">string</span>(<span class="number">6</span>) <span class="string">&quot;orange&quot;</span></span><br><span class="line">  [<span class="number">2</span>]=&gt;</span><br><span class="line">  <span class="keyword">string</span>(<span class="number">5</span>) <span class="string">&quot;apple&quot;</span></span><br><span class="line">  [<span class="number">3</span>]=&gt;</span><br><span class="line">  <span class="keyword">string</span>(<span class="number">4</span>) <span class="string">&quot;pear&quot;</span></span><br><span class="line">  [<span class="number">4</span>]=&gt;</span><br><span class="line">  <span class="keyword">string</span>(<span class="number">10</span>) <span class="string">&quot;watermelon&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="æ•°å­—å­—é¢é‡åˆ†éš”ç¬¦"><a href="#æ•°å­—å­—é¢é‡åˆ†éš”ç¬¦" class="headerlink" title="æ•°å­—å­—é¢é‡åˆ†éš”ç¬¦"></a>æ•°å­—å­—é¢é‡åˆ†éš”ç¬¦</h1><blockquote>
<p>äººçœ¼å¹¶æœªé’ˆå¯¹å¿«é€Ÿè§£æé•¿æ•°å­—åºåˆ—è¿›è¡Œä¼˜åŒ–ã€‚ å› æ­¤ï¼Œç¼ºå°‘è§†è§‰åˆ†éš”ç¬¦ä¼šä½¿è¯»å–å’Œè°ƒè¯•ä»£ç èŠ±è´¹æ›´é•¿çš„æ—¶é—´ï¼Œå¹¶å¯èƒ½å¯¼è‡´æ„å¤–é”™è¯¯ã€‚</p>
</blockquote>
<p>æ‰€ä»¥ <strong>æ•°å­—å­—é¢é‡åˆ†éš”ç¬¦</strong> å°±æ˜¯è§£å†³äººçœ¼å¿«é€Ÿè¯†åˆ«è€Œåšå‡ºçš„ä¼˜åŒ–ï¼Œä½ çœ‹ï¼Œä»£ç çš„çš„ç¡®ç¡®æ˜¯æœºå™¨å»æ‰§è¡Œçš„ï¼Œä½†æ›´é‡è¦çš„æ˜¯ <strong>å¯è¯»</strong>ã€<strong>å¯å†™</strong>ã€<em>å¯èµ</em>ã€<em>å¯èµ</em> ğŸ˜‚ã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">6.674_083e-11; // <span class="built_in">float</span></span><br><span class="line">299_792_458;   // decimal</span><br><span class="line">0xCAFE_F00D;   // hexadecimal</span><br><span class="line">0b0101_1111;   // binary</span><br><span class="line">0137_041;      // octal</span><br><span class="line"></span><br><span class="line">1_000_000; // versus 1000000</span><br><span class="line">3.141_592; // versus 3.141592</span><br><span class="line">0x02_56_12; // versus 0x025612</span><br><span class="line">0b0010_1101; // versus 0b00101101</span><br><span class="line">0267_3432; // versus 02673432</span><br><span class="line">1_123.456_7e2 // versus 1123.4567e2</span><br></pre></td></tr></table></figure>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line">usleep(<span class="number">345126</span>); <span class="comment">// without separator</span></span><br><span class="line"></span><br><span class="line">usleep(<span class="number">345_126</span>); <span class="comment">// with separator</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (<span class="number">12345678989876</span> === <span class="number">12345678998876</span>) &#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&#x27;Equal&#x27;</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&#x27;Unequal&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> PHP_EOL;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (<span class="number">12_345_678_989_876</span> === <span class="number">12_345_678_998_876</span>) &#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&#x27;Equal&#x27;</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&#x27;Unequal&#x27;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="å¼±å¼•ç”¨"><a href="#å¼±å¼•ç”¨" class="headerlink" title="å¼±å¼•ç”¨"></a>å¼±å¼•ç”¨</h1><h1 id="å…è®¸æ¥è‡ª-toString-çš„å¼‚å¸¸"><a href="#å…è®¸æ¥è‡ª-toString-çš„å¼‚å¸¸" class="headerlink" title="å…è®¸æ¥è‡ª toString() çš„å¼‚å¸¸"></a>å…è®¸æ¥è‡ª toString() çš„å¼‚å¸¸</h1><ul>
<li><a href="https://bugs.php.net/bug.php?id=53648">Request #53648 Allow __toString() to throw exceptions</a></li>
</ul>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CustomException</span> <span class="keyword">extends</span> \<span class="title">Exception</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Foo</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__toString</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> CustomException(<span class="string">&#x27;Oops!&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable">$foo</span> = <span class="keyword">new</span> Foo();</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">    var_dump((<span class="keyword">string</span>) <span class="variable">$foo</span>);</span><br><span class="line">&#125; <span class="keyword">catch</span> (CustomException <span class="variable">$e</span>) &#123;</span><br><span class="line">    var_dump(<span class="variable">$e</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»“æœ</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// PHP56</span></span><br><span class="line">PHP Fatal <span class="built_in">error</span>:  Method Foo::__toString() must not <span class="keyword">throw</span> an <span class="built_in">exception</span> in /path/to/User.php on line <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// PHP73</span></span><br><span class="line">PHP Fatal <span class="built_in">error</span>:  Method Foo::__toString() must not <span class="keyword">throw</span> an <span class="built_in">exception</span>, caught CustomException: Oops! in /path/to/a.php on line <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// PHP74</span></span><br><span class="line"><span class="keyword">object</span>(CustomException)<span class="comment">#2 (7) &#123;</span></span><br><span class="line">  [<span class="string">&quot;message&quot;</span>:<span class="keyword">protected</span>]=&gt;</span><br><span class="line">  <span class="keyword">string</span>(<span class="number">5</span>) <span class="string">&quot;Oops!&quot;</span></span><br><span class="line">  [<span class="string">&quot;string&quot;</span>:<span class="string">&quot;Exception&quot;</span>:<span class="keyword">private</span>]=&gt;</span><br><span class="line">  <span class="keyword">string</span>(<span class="number">0</span>) <span class="string">&quot;&quot;</span></span><br><span class="line">  [<span class="string">&quot;code&quot;</span>:<span class="keyword">protected</span>]=&gt;</span><br><span class="line">  <span class="keyword">int</span>(<span class="number">0</span>)</span><br><span class="line">  [<span class="string">&quot;file&quot;</span>:<span class="keyword">protected</span>]=&gt;</span><br><span class="line">  <span class="keyword">string</span>(<span class="number">47</span>) <span class="string">&quot;/Users/xxx/Codes/example/untitled/User.php&quot;</span></span><br><span class="line">  [<span class="string">&quot;line&quot;</span>:<span class="keyword">protected</span>]=&gt;</span><br><span class="line">  <span class="keyword">int</span>(<span class="number">11</span>)</span><br><span class="line">  [<span class="string">&quot;trace&quot;</span>:<span class="string">&quot;Exception&quot;</span>:<span class="keyword">private</span>]=&gt;</span><br><span class="line">  <span class="keyword">array</span>(<span class="number">1</span>) &#123;</span><br><span class="line">    [<span class="number">0</span>]=&gt;</span><br><span class="line">    <span class="keyword">array</span>(<span class="number">6</span>) &#123;</span><br><span class="line">      [<span class="string">&quot;file&quot;</span>]=&gt;</span><br><span class="line">      <span class="keyword">string</span>(<span class="number">47</span>) <span class="string">&quot;/Users/xxx/Codes/example/untitled/User.php&quot;</span></span><br><span class="line">      [<span class="string">&quot;line&quot;</span>]=&gt;</span><br><span class="line">      <span class="keyword">int</span>(<span class="number">18</span>)</span><br><span class="line">      [<span class="string">&quot;function&quot;</span>]=&gt;</span><br><span class="line">      <span class="keyword">string</span>(<span class="number">10</span>) <span class="string">&quot;__toString&quot;</span></span><br><span class="line">      [<span class="string">&quot;class&quot;</span>]=&gt;</span><br><span class="line">      <span class="keyword">string</span>(<span class="number">3</span>) <span class="string">&quot;Foo&quot;</span></span><br><span class="line">      [<span class="string">&quot;type&quot;</span>]=&gt;</span><br><span class="line">      <span class="keyword">string</span>(<span class="number">2</span>) <span class="string">&quot;-&gt;&quot;</span></span><br><span class="line">      [<span class="string">&quot;args&quot;</span>]=&gt;</span><br><span class="line">      <span class="keyword">array</span>(<span class="number">0</span>) &#123;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  [<span class="string">&quot;previous&quot;</span>:<span class="string">&quot;Exception&quot;</span>:<span class="keyword">private</span>]=&gt;</span><br><span class="line">  <span class="literal">NULL</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="Opcache-é¢„åŠ è½½"><a href="#Opcache-é¢„åŠ è½½" class="headerlink" title="Opcache é¢„åŠ è½½"></a>Opcache é¢„åŠ è½½</h1><p><strong><code>opcache.preload</code> <a href="https://www.php.net/manual/zh/language.types.string.php"><code>string</code></a></strong>ï¼šæŒ‡å®šè¦åœ¨æœåŠ¡å™¨å¯åŠ¨æ—¶æœŸè¿›è¡Œç¼–è¯‘å’Œç¼“å­˜çš„ PHP è„šæœ¬æ–‡ä»¶ï¼Œè¿™äº›æ–‡ä»¶ä¹Ÿå¯èƒ½é€šè¿‡ include æˆ–è€… opcache_compile_file() å‡½æ•°æ¥é¢„åŠ è½½å…¶ä»–æ–‡ä»¶ã€‚æ‰€æœ‰è¿™äº›æ–‡ä»¶ä¸­åŒ…å«çš„å®ä½“ï¼ŒåŒ…æ‹¬å‡½æ•°ã€ç±»ç­‰ï¼Œåœ¨æœåŠ¡å™¨å¯åŠ¨çš„æ—¶å€™å°±è¢«åŠ è½½å’Œç¼“å­˜ï¼Œå¯¹äºç”¨æˆ·ä»£ç æ¥è®²æ˜¯ã€å¼€ç®±å¯ç”¨ã€çš„ã€‚</p>
<h1 id="ä¸€äº›ä¸æ¨è"><a href="#ä¸€äº›ä¸æ¨è" class="headerlink" title="ä¸€äº›ä¸æ¨è"></a>ä¸€äº›ä¸æ¨è</h1><p><a href="https://www.php.net/manual/zh/migration74.deprecated.php">Deprecated Features</a></p>
<h1 id="ä»æ ¸å¿ƒä¸­ç§»é™¤çš„æ‰©å±•"><a href="#ä»æ ¸å¿ƒä¸­ç§»é™¤çš„æ‰©å±•" class="headerlink" title="ä»æ ¸å¿ƒä¸­ç§»é™¤çš„æ‰©å±•"></a>ä»æ ¸å¿ƒä¸­ç§»é™¤çš„æ‰©å±•</h1><p><a href="https://www.php.net/manual/zh/migration74.removed-extensions.php">Removed Extensions</a></p>
]]></content>
      <categories>
        <category>php</category>
      </categories>
      <tags>
        <tag>php</tag>
      </tags>
  </entry>
  <entry>
    <title>PHP7 æ–°ç‰¹æ€§</title>
    <url>/2018/01/19/php-php7-new-features/</url>
    <content><![CDATA[<p>æ”¶é›†æ•´ç†äº†ä¸€äº› <code>PHP7</code> çš„æ–°ç‰¹æ€§ã€‚</p>
<span id="more"></span>
<h1 id="æ ‡é‡ç±»å‹å£°æ˜"><a href="#æ ‡é‡ç±»å‹å£°æ˜" class="headerlink" title="æ ‡é‡ç±»å‹å£°æ˜"></a>æ ‡é‡ç±»å‹å£°æ˜</h1><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">declare</span>(strict_types = <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">paramInt</span>(<span class="params"><span class="keyword">int</span> ...<span class="variable">$value</span></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> array_sum(<span class="variable">$value</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">paramFloat</span>(<span class="params"><span class="keyword">float</span> ...<span class="variable">$value</span></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> array_values(<span class="variable">$value</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">paramString</span>(<span class="params"><span class="keyword">string</span> ...<span class="variable">$value</span></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> implode(<span class="string">&#x27;,&#x27;</span>, <span class="variable">$value</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">paramBool</span>(<span class="params"><span class="keyword">bool</span> ...<span class="variable">$value</span></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable">$value</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">var_dump(paramInt(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>));</span><br><span class="line">var_dump(paramFloat(<span class="number">1.1</span>, <span class="number">2.2</span>, <span class="number">3.3</span>));</span><br><span class="line">var_dump(paramString(<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>));</span><br><span class="line">var_dump(paramBool(<span class="literal">true</span>, <span class="literal">false</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»“æœ</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span>(<span class="number">6</span>)</span><br><span class="line"><span class="keyword">array</span>(<span class="number">3</span>) &#123;</span><br><span class="line">  [<span class="number">0</span>] =&gt;</span><br><span class="line">  <span class="keyword">double</span>(<span class="number">1.1</span>)</span><br><span class="line">  [<span class="number">1</span>] =&gt;</span><br><span class="line">  <span class="keyword">double</span>(<span class="number">2.2</span>)</span><br><span class="line">  [<span class="number">2</span>] =&gt;</span><br><span class="line">  <span class="keyword">double</span>(<span class="number">3.3</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">string</span>(<span class="number">5</span>) <span class="string">&quot;a,b,c&quot;</span></span><br><span class="line"><span class="keyword">array</span>(<span class="number">2</span>) &#123;</span><br><span class="line">  [<span class="number">0</span>] =&gt;</span><br><span class="line">  <span class="keyword">bool</span>(<span class="literal">true</span>)</span><br><span class="line">  [<span class="number">1</span>] =&gt;</span><br><span class="line">  <span class="keyword">bool</span>(<span class="literal">false</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="è¿”å›å€¼ç±»å‹å£°æ˜"><a href="#è¿”å›å€¼ç±»å‹å£°æ˜" class="headerlink" title="è¿”å›å€¼ç±»å‹å£°æ˜"></a>è¿”å›å€¼ç±»å‹å£°æ˜</h1><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">declare</span>(strict_types = <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">returnInt</span>(<span class="params"><span class="keyword">int</span> ...<span class="variable">$value</span></span>) : <span class="title">int</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> array_sum(<span class="variable">$value</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">returnFloat</span>(<span class="params"><span class="keyword">float</span> ...<span class="variable">$value</span></span>) : <span class="title">float</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> array_sum(<span class="variable">$value</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">returnString</span>(<span class="params"><span class="keyword">string</span> ...<span class="variable">$value</span></span>) : <span class="title">string</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> implode(<span class="string">&#x27;,&#x27;</span>, <span class="variable">$value</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">returnBool</span>(<span class="params"><span class="keyword">bool</span> <span class="variable">$value</span></span>) : <span class="title">bool</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable">$value</span> ? <span class="literal">true</span> : <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">returnArray</span>(<span class="params"><span class="keyword">array</span> ...<span class="variable">$value</span></span>) : <span class="title">array</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable">$value</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">var_dump(returnInt(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>));</span><br><span class="line">var_dump(returnFloat(<span class="number">1.1</span>, <span class="number">2.2</span>, <span class="number">3.3</span>));</span><br><span class="line">var_dump(returnString(<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>));</span><br><span class="line">var_dump(returnBool(<span class="literal">true</span>));</span><br><span class="line">var_dump(returnArray([<span class="string">&#x27;hello&#x27;</span>], [<span class="string">&#x27;world&#x27;</span>], [<span class="string">&#x27;!&#x27;</span>]));</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»“æœ</span></span><br><span class="line"><span class="keyword">int</span>(<span class="number">6</span>)</span><br><span class="line"><span class="keyword">double</span>(<span class="number">6.6</span>)</span><br><span class="line"><span class="keyword">string</span>(<span class="number">5</span>) <span class="string">&quot;a,b,c&quot;</span></span><br><span class="line"><span class="keyword">bool</span>(<span class="literal">true</span>)</span><br><span class="line"><span class="keyword">array</span>(<span class="number">3</span>) &#123;</span><br><span class="line">  [<span class="number">0</span>] =&gt;</span><br><span class="line">  <span class="keyword">array</span>(<span class="number">1</span>) &#123;</span><br><span class="line">    [<span class="number">0</span>] =&gt;</span><br><span class="line">    <span class="keyword">string</span>(<span class="number">5</span>) <span class="string">&quot;hello&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">  [<span class="number">1</span>] =&gt;</span><br><span class="line">  <span class="keyword">array</span>(<span class="number">1</span>) &#123;</span><br><span class="line">    [<span class="number">0</span>] =&gt;</span><br><span class="line">    <span class="keyword">string</span>(<span class="number">5</span>) <span class="string">&quot;world&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">  [<span class="number">2</span>] =&gt;</span><br><span class="line">  <span class="keyword">array</span>(<span class="number">1</span>) &#123;</span><br><span class="line">    [<span class="number">0</span>] =&gt;</span><br><span class="line">    <span class="keyword">string</span>(<span class="number">1</span>) <span class="string">&quot;!&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="NULL-åˆå¹¶è¿ç®—ç¬¦"><a href="#NULL-åˆå¹¶è¿ç®—ç¬¦" class="headerlink" title="NULL åˆå¹¶è¿ç®—ç¬¦"></a>NULL åˆå¹¶è¿ç®—ç¬¦</h1><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ¤æ–­ UID æ˜¯å¦å­˜åœ¨</span></span><br><span class="line"><span class="variable">$uid</span> = <span class="keyword">isset</span>(<span class="variable">$_REQUEST</span>[<span class="string">&#x27;uid&#x27;</span>]) ? <span class="variable">$_REQUEST</span>[<span class="string">&#x27;uid&#x27;</span>] : <span class="string">&#x27;unknown&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¸Šé¢çš„ä»£ç å¯ä»¥æ›¿æ¢ä¸ºå¦‚ä¸‹ä»£ç </span></span><br><span class="line"><span class="variable">$uid</span> = <span class="variable">$_REQUEST</span>[<span class="string">&#x27;uid&#x27;</span>] ?? <span class="string">&#x27;unknown&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¦‚æœ SESSION ä¸­ä¸å­˜åœ¨ UIDï¼Œå°±å– REQUEST ä¸­çš„ UID</span></span><br><span class="line"><span class="variable">$uid</span> = <span class="variable">$_SESSION</span>[<span class="string">&#x27;uid&#x27;</span>] ?? <span class="variable">$_REQUEST</span>[<span class="string">&#x27;uid&#x27;</span>] ?? <span class="string">&#x27;unknown&#x27;</span>;</span><br><span class="line">var_dump(<span class="variable">$uid</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»“æœ</span></span><br><span class="line"><span class="keyword">string</span>(<span class="number">7</span>) <span class="string">&quot;unknown&quot;</span></span><br></pre></td></tr></table></figure>
<h1 id="å¤ªç©ºé£èˆ¹æ“ä½œç¬¦"><a href="#å¤ªç©ºé£èˆ¹æ“ä½œç¬¦" class="headerlink" title="å¤ªç©ºé£èˆ¹æ“ä½œç¬¦"></a>å¤ªç©ºé£èˆ¹æ“ä½œç¬¦</h1><blockquote>
<p>è¿˜æœ‰è¿™ç§æ“ä½œï¼Ÿå½“ç„¶æœ‰ï¼Œä¸”çœ‹å¦‚ä¸‹å®ä¾‹</p>
</blockquote>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// PHP7 ä¹‹å‰</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">compare</span>(<span class="params"><span class="variable">$a</span>, <span class="variable">$b</span></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable">$a</span> == <span class="variable">$b</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> (<span class="variable">$a</span> &gt; <span class="variable">$b</span>) ? <span class="number">1</span> : -<span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable">$a</span> = <span class="variable">$b</span> = [</span><br><span class="line">    <span class="string">&#x27;e&#x27;</span> =&gt; <span class="number">70</span>,</span><br><span class="line">    <span class="string">&#x27;d&#x27;</span> =&gt; <span class="number">10</span>,</span><br><span class="line">    <span class="string">&#x27;b&#x27;</span> =&gt; <span class="number">80</span>,</span><br><span class="line">    <span class="string">&#x27;a&#x27;</span> =&gt; <span class="number">20</span>,</span><br><span class="line">    <span class="string">&#x27;c&#x27;</span> =&gt; <span class="number">90</span>,</span><br><span class="line">];</span><br><span class="line">uasort(<span class="variable">$a</span>, <span class="string">&#x27;compare&#x27;</span>);</span><br><span class="line">print_r(<span class="variable">$a</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»“æœ</span></span><br><span class="line"><span class="keyword">Array</span></span><br><span class="line">(</span><br><span class="line">    [d] =&gt; <span class="number">10</span></span><br><span class="line">    [a] =&gt; <span class="number">20</span></span><br><span class="line">    [e] =&gt; <span class="number">70</span></span><br><span class="line">    [b] =&gt; <span class="number">80</span></span><br><span class="line">    [c] =&gt; <span class="number">90</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">// PHP7</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">after_compare</span>(<span class="params"><span class="variable">$a</span>, <span class="variable">$b</span></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable">$a</span> &lt;=&gt; <span class="variable">$b</span>;</span><br><span class="line">&#125;</span><br><span class="line">uksort(<span class="variable">$b</span>, <span class="string">&#x27;after_compare&#x27;</span>);</span><br><span class="line">print_r(<span class="variable">$b</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»“æœ</span></span><br><span class="line"><span class="keyword">Array</span></span><br><span class="line">(</span><br><span class="line">    [a] =&gt; <span class="number">20</span></span><br><span class="line">    [b] =&gt; <span class="number">80</span></span><br><span class="line">    [c] =&gt; <span class="number">90</span></span><br><span class="line">    [d] =&gt; <span class="number">10</span></span><br><span class="line">    [e] =&gt; <span class="number">70</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<h1 id="é€šè¿‡-define-å®šä¹‰å¸¸é‡æ•°ç»„"><a href="#é€šè¿‡-define-å®šä¹‰å¸¸é‡æ•°ç»„" class="headerlink" title="é€šè¿‡ define() å®šä¹‰å¸¸é‡æ•°ç»„"></a>é€šè¿‡ define() å®šä¹‰å¸¸é‡æ•°ç»„</h1><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line">define(<span class="string">&#x27;ROLES&#x27;</span>, [</span><br><span class="line">    <span class="string">&#x27;ADMIN&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;MANAGER&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;USER&#x27;</span>,</span><br><span class="line">]);</span><br><span class="line"></span><br><span class="line">var_dump(ROLES[<span class="number">0</span>], ROLES[<span class="number">1</span>], ROLES[<span class="number">2</span>]);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»“æœ</span></span><br><span class="line"><span class="keyword">string</span>(<span class="number">5</span>) <span class="string">&quot;ADMIN&quot;</span></span><br><span class="line"><span class="keyword">string</span>(<span class="number">7</span>) <span class="string">&quot;MANAGER&quot;</span></span><br><span class="line"><span class="keyword">string</span>(<span class="number">4</span>) <span class="string">&quot;USER&quot;</span></span><br></pre></td></tr></table></figure>
<h1 id="åŒ¿åç±»"><a href="#åŒ¿åç±»" class="headerlink" title="åŒ¿åç±»"></a>åŒ¿åç±»</h1><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">Logger</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">log</span>(<span class="params"><span class="keyword">string</span> <span class="variable">$msg</span></span>)</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">App</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="variable">$logger</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">setLogger</span>(<span class="params">Logger <span class="variable">$logger</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;logger = <span class="variable">$logger</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getLogger</span>(<span class="params"></span>) : <span class="title">Logger</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">$this</span>-&gt;logger;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable">$app</span> = <span class="keyword">new</span> App();</span><br><span class="line"><span class="variable">$app</span>-&gt;setLogger(<span class="keyword">new</span> <span class="class"><span class="keyword">class</span> <span class="keyword">implements</span> <span class="title">Logger</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">log</span>(<span class="params"><span class="keyword">string</span> <span class="variable">$msg</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable">$msg</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">var_dump(<span class="variable">$app</span>-&gt;getLogger()-&gt;log(<span class="string">&#x27;Hello World!&#x27;</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»“æœ</span></span><br><span class="line"><span class="keyword">string</span>(<span class="number">12</span>) <span class="string">&quot;Hello World!&quot;</span></span><br></pre></td></tr></table></figure>
<h1 id="Unicode-codepoint-è½¬è¯‘è¯­æ³•"><a href="#Unicode-codepoint-è½¬è¯‘è¯­æ³•" class="headerlink" title="Unicode codepoint è½¬è¯‘è¯­æ³•"></a>Unicode codepoint è½¬è¯‘è¯­æ³•</h1><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line">$ğŸ˜„ = <span class="string">&#x27;æ„‰å¿«é«˜å…´&#x27;</span>;</span><br><span class="line">$ğŸ‡¨ğŸ‡³ = <span class="string">&#x27;æˆ‘çš„ç¥–å›½&#x27;</span>;</span><br><span class="line">$ğŸŒˆ = <span class="string">&#x27;é›¨åå½©è™¹&#x27;</span>;</span><br><span class="line"><span class="variable">$try</span> = <span class="string">&quot;^_^ \u&#123;0050&#125;\u&#123;0048&#125;\u&#123;0050&#125;\u&#123;0037&#125; - \u&#123;1F64F&#125;&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable">$array</span> = [$ğŸ˜„, $ğŸ‡¨ğŸ‡³, $ğŸŒˆ, <span class="variable">$try</span>];</span><br><span class="line">print_r(<span class="variable">$array</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">Array</span></span><br><span class="line">(</span><br><span class="line">    [<span class="number">0</span>] =&gt; æ„‰å¿«é«˜å…´</span><br><span class="line">    [<span class="number">1</span>] =&gt; æˆ‘çš„ç¥–å›½</span><br><span class="line">    [<span class="number">2</span>] =&gt; é›¨åå½©è™¹</span><br><span class="line">    [<span class="number">3</span>] =&gt; ^_^ PHP7 - ğŸ™</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<h1 id="Closure-call"><a href="#Closure-call" class="headerlink" title="Closure::call()"></a>Closure::call()</h1><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Object</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="variable">$name</span> = <span class="string">&#x27;Object Name&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// PHP7 ä¹‹å‰</span></span><br><span class="line"><span class="variable">$beforeName</span> = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">$this</span>-&gt;name;</span><br><span class="line">&#125;;</span><br><span class="line">var_dump(<span class="variable">$beforeName</span>-&gt;bindTo(<span class="keyword">new</span> <span class="keyword">Object</span>(), <span class="string">&#x27;Object&#x27;</span>)());</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»“æœ</span></span><br><span class="line"><span class="keyword">string</span>(<span class="number">11</span>) <span class="string">&quot;Object Name&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// PHP7</span></span><br><span class="line"><span class="variable">$afterName</span> = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">$this</span>-&gt;name;</span><br><span class="line">&#125;;</span><br><span class="line">var_dump(<span class="variable">$afterName</span>-&gt;call(<span class="keyword">new</span> <span class="keyword">Object</span>()));</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»“æœ</span></span><br><span class="line"><span class="keyword">string</span>(<span class="number">11</span>) <span class="string">&quot;Object Name&quot;</span></span><br></pre></td></tr></table></figure>
<h1 id="ä¸º-unserialize-æä¾›è¿‡æ»¤"><a href="#ä¸º-unserialize-æä¾›è¿‡æ»¤" class="headerlink" title="ä¸º unserialize() æä¾›è¿‡æ»¤"></a>ä¸º unserialize() æä¾›è¿‡æ»¤</h1><blockquote>
<p>ç‰¹æ€§æ—¨åœ¨æä¾›æ›´å®‰å…¨çš„æ–¹å¼è§£åŒ…ä¸å¯é çš„æ•°æ®ã€‚å®ƒé€šè¿‡ç™½åå•çš„æ–¹å¼æ¥é˜²æ­¢æ½œåœ¨çš„ä»£ç æ³¨å…¥ã€‚</p>
</blockquote>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Test</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$name</span> = <span class="string">&#x27;test&#x27;</span>;</span><br><span class="line">    <span class="keyword">protected</span> <span class="variable">$weight</span> = <span class="number">60</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="variable">$age</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;age = <span class="number">18</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getAge</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">$this</span>-&gt;age;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable">$test</span> = serialize(<span class="keyword">new</span> Test());</span><br><span class="line"></span><br><span class="line"><span class="comment">// å…è®¸è§£æ class</span></span><br><span class="line"><span class="variable">$a</span> = unserialize(<span class="variable">$test</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// å°†æ‰€æœ‰çš„å¯¹è±¡éƒ½è½¬æ¢ä¸º __PHP_Incomplete_Class å¯¹è±¡ï¼Œä¸å…è®¸è§£æ class</span></span><br><span class="line"><span class="variable">$b</span> = unserialize(<span class="variable">$test</span>, [<span class="string">&#x27;allowed_classes&#x27;</span> =&gt; <span class="literal">false</span>]);</span><br><span class="line"></span><br><span class="line"><span class="comment">// å°†é™¤ Test ä¹‹å¤–çš„æ‰€æœ‰å¯¹è±¡éƒ½è½¬æ¢ä¸º __PHP_Incomplete_Class å¯¹è±¡ï¼Œå…è®¸è§£æ class</span></span><br><span class="line"><span class="variable">$c</span> = unserialize(<span class="variable">$test</span>, [<span class="string">&#x27;allowed_classes&#x27;</span> =&gt; [<span class="string">&#x27;Test&#x27;</span>]]);</span><br><span class="line"></span><br><span class="line"><span class="comment">// é»˜è®¤æƒ…å†µä¸‹æ‰€æœ‰çš„ç±»éƒ½æ˜¯å¯æ¥å—çš„ï¼Œç­‰åŒäºçœç•¥ç¬¬äºŒä¸ªå‚æ•°ï¼Œå…è®¸è§£æ class</span></span><br><span class="line"><span class="variable">$d</span> = unserialize(<span class="variable">$test</span>, [<span class="string">&#x27;allowed_classes&#x27;</span> =&gt; <span class="literal">true</span>]);</span><br><span class="line">print_r([</span><br><span class="line">    <span class="variable">$a</span>-&gt;getAge(),</span><br><span class="line">    <span class="comment">// $b-&gt;getAge(), // PHP Fatal error: main(): The script tried to execute a method or access a property of an incomplete object.</span></span><br><span class="line">    <span class="variable">$c</span>-&gt;getAge(),</span><br><span class="line">    <span class="variable">$d</span>-&gt;getAge(),</span><br><span class="line">]);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»“æœ</span></span><br><span class="line"><span class="keyword">Array</span></span><br><span class="line">(</span><br><span class="line">    [<span class="number">0</span>] =&gt; <span class="number">18</span></span><br><span class="line">    [<span class="number">1</span>] =&gt; <span class="number">18</span></span><br><span class="line">    [<span class="number">2</span>] =&gt; <span class="number">18</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<h1 id="IntlChar"><a href="#IntlChar" class="headerlink" title="IntlChar"></a>IntlChar</h1><blockquote>
<p>éœ€è¦ <code>intl</code> æ‰©å±•ã€‚</p>
</blockquote>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$array</span> = [</span><br><span class="line">    <span class="string">&#x27;è·å– UNICODE ç‰ˆæœ¬&#x27;</span> =&gt; IntlChar::UNICODE_VERSION,</span><br><span class="line">    <span class="string">&#x27;è·å–å­—ç¬¦åç§°&#x27;</span> =&gt; IntlChar::charName(<span class="string">&#x27;@&#x27;</span>),</span><br><span class="line">    <span class="string">&#x27;è·å–ä¸­æ‹¬å·åŒ¹é…çš„é—­åˆæ‹¬å·&#x27;</span> =&gt; IntlChar::getBidiPairedBracket(<span class="string">&#x27;[&#x27;</span>),</span><br><span class="line">    <span class="string">&#x27;è·å– A å­—ç¬¦çš„é•œåƒå­—ç¬¦&#x27;</span> =&gt; IntlChar::charMirror(<span class="string">&#x27;&lt;&#x27;</span>),</span><br><span class="line">    <span class="string">&#x27;åˆ¤æ–­ ? æ˜¯å¦æœ‰é•œåƒå­—ç¬¦&#x27;</span> =&gt; IntlChar::isMirrored(<span class="string">&#x27;?&#x27;</span>) ? <span class="string">&#x27;OK&#x27;</span> : <span class="string">&#x27;NO&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;è·å– codepoint è¡¨ç¤ºçš„å­—ç¬¦&#x27;</span> =&gt; IntlChar::chr(<span class="number">65</span>),</span><br><span class="line">];</span><br><span class="line">print_r(<span class="variable">$array</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»“æœ</span></span><br><span class="line"><span class="keyword">Array</span></span><br><span class="line">(</span><br><span class="line">    [è·å– UNICODE ç‰ˆæœ¬] =&gt; <span class="number">10.0</span></span><br><span class="line">    [è·å–å­—ç¬¦åç§°] =&gt; COMMERCIAL AT</span><br><span class="line">    [è·å–ä¸­æ‹¬å·åŒ¹é…çš„é—­åˆæ‹¬å·] =&gt; ]</span><br><span class="line">    [è·å– A å­—ç¬¦çš„é•œåƒå­—ç¬¦] =&gt; &gt;</span><br><span class="line">    [åˆ¤æ–­ ? æ˜¯å¦æœ‰é•œåƒå­—ç¬¦] =&gt; NO</span><br><span class="line">    [è·å– codepoint è¡¨ç¤ºçš„å­—ç¬¦] =&gt; A</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<h1 id="é¢„æœŸ"><a href="#é¢„æœŸ" class="headerlink" title="é¢„æœŸ"></a>é¢„æœŸ</h1><table>
<thead>
<tr>
<th>æŒ‡ç¤º</th>
<th>é»˜è®¤å€¼</th>
<th>å¯èƒ½çš„å€¼</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>zend.assertions</code></td>
<td><code>1</code></td>
<td>1 - ç”Ÿæˆå¹¶æ‰§è¡Œä»£ç ï¼ˆå¼€å‘æ¨¡å¼ï¼‰ã€‚2 - ç”Ÿæˆä»£ç ï¼Œä½†åœ¨è¿è¡Œæ—¶è·³è¿‡å®ƒã€‚-1 - ä¸ç”Ÿæˆä»£ç ï¼ˆç”Ÿäº§æ¨¡å¼ï¼‰</td>
</tr>
<tr>
<td><code>assert.exception</code></td>
<td><code>0</code></td>
<td>1 - å½“æ–­è¨€å¤±è´¥æ—¶ï¼ŒæŠ›å‡ºæä¾›çš„å¼‚å¸¸ä½œä¸ºå¼‚å¸¸ï¼Œæˆ–è€…åœ¨ç¤ºæä¾›å¼‚å¸¸çš„æƒ…å†µä¸‹æŠ›å‡ºæ–°çš„ <code>AssertionError</code> å¯¹è±¡ã€‚0 - å¦‚ä¸Šæ‰€è¿°ä½¿ç”¨æˆ–ç”Ÿæˆ <code>Throwable</code>ï¼Œä½†åªç”ŸæˆåŸºäºè¯¥å¯¹è±¡çš„è­¦å‘Šï¼Œè€Œä¸æ˜¯æŠ›å‡ºå®ƒï¼ˆä¸ <code>PHP5</code> è¡Œä¸ºå…¼å®¹ï¼‰</td>
</tr>
</tbody>
</table>
<h2 id="zend-assertions-ä¸º-1"><a href="#zend-assertions-ä¸º-1" class="headerlink" title="zend.assertions ä¸º 1"></a>zend.assertions ä¸º 1</h2><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line">ini_set(<span class="string">&#x27;zend.assertions&#x27;</span>, <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyException</span> <span class="keyword">extends</span> <span class="title">AssertionError</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">assert(<span class="literal">true</span> == <span class="literal">false</span>, <span class="keyword">new</span> MyException(<span class="string">&#x27;Some error message&#x27;</span>));</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&#x27;this is a test&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»“æœ</span></span><br><span class="line">PHP Warning:  assert(): MyException: Some <span class="built_in">error</span> message</span><br><span class="line">...</span><br><span class="line">Warning: assert(): MyException: Some <span class="built_in">error</span> message</span><br><span class="line">...</span><br><span class="line">this is a test</span><br></pre></td></tr></table></figure>
<h2 id="zend-assertions-ä¸º-0"><a href="#zend-assertions-ä¸º-0" class="headerlink" title="zend.assertions ä¸º 0"></a>zend.assertions ä¸º 0</h2><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line">ini_set(<span class="string">&#x27;zend.assertions&#x27;</span>, <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyException</span> <span class="keyword">extends</span> <span class="title">AssertionError</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">assert(<span class="literal">true</span> == <span class="literal">false</span>, <span class="keyword">new</span> MyException(<span class="string">&#x27;Some error message&#x27;</span>));</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&#x27;this is a test&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»“æœ</span></span><br><span class="line">this is a test</span><br></pre></td></tr></table></figure>
<h2 id="zend-assertions-ä¸º-1-1"><a href="#zend-assertions-ä¸º-1-1" class="headerlink" title="zend.assertions ä¸º -1"></a>zend.assertions ä¸º -1</h2><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line">ini_set(<span class="string">&#x27;zend.assertions&#x27;</span>, -<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyException</span> <span class="keyword">extends</span> <span class="title">AssertionError</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">assert(<span class="literal">true</span> == <span class="literal">false</span>, <span class="keyword">new</span> MyException(<span class="string">&#x27;Some error message&#x27;</span>));</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&#x27;this is a test&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»“æœ</span></span><br><span class="line">PHP Warning:  zend.assertions may be completely enabled <span class="keyword">or</span> disabled only in php.ini</span><br><span class="line">...</span><br><span class="line">PHP Warning:  assert(): MyException: Some <span class="built_in">error</span> message</span><br><span class="line">...</span><br><span class="line">Warning: zend.assertions may be completely enabled <span class="keyword">or</span> disabled only in php.ini</span><br><span class="line">...</span><br><span class="line">Warning: assert(): MyException: Some <span class="built_in">error</span> message</span><br><span class="line">...</span><br><span class="line">this is a test</span><br></pre></td></tr></table></figure>
<h2 id="assert-exception-ä¸º-1"><a href="#assert-exception-ä¸º-1" class="headerlink" title="assert.exception ä¸º 1"></a>assert.exception ä¸º 1</h2><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line">ini_set(<span class="string">&#x27;assert.exception&#x27;</span>, <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyException</span> <span class="keyword">extends</span> <span class="title">AssertionError</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">assert(<span class="literal">true</span> == <span class="literal">false</span>, <span class="keyword">new</span> MyException(<span class="string">&#x27;Some error message&#x27;</span>));</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&#x27;this is a test&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»“æœ</span></span><br><span class="line">PHP Fatal <span class="built_in">error</span>:  Uncaught MyException: Some <span class="built_in">error</span> message</span><br><span class="line">...</span><br><span class="line">Fatal <span class="built_in">error</span>: Uncaught MyException: Some <span class="built_in">error</span> message</span><br><span class="line">...</span><br><span class="line">MyException: Some <span class="built_in">error</span> message</span><br><span class="line">...</span><br><span class="line">æ³¨æ„ï¼š this is a test æ˜¯æ²¡æœ‰è¾“å‡ºçš„</span><br></pre></td></tr></table></figure>
<h2 id="assert-exception-ä¸º-0"><a href="#assert-exception-ä¸º-0" class="headerlink" title="assert.exception ä¸º 0"></a>assert.exception ä¸º 0</h2><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line">ini_set(<span class="string">&#x27;assert.exception&#x27;</span>, <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyException</span> <span class="keyword">extends</span> <span class="title">AssertionError</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">assert(<span class="literal">true</span> == <span class="literal">false</span>, <span class="keyword">new</span> MyException(<span class="string">&#x27;Some error message&#x27;</span>));</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&#x27;this is a test&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»“æœ</span></span><br><span class="line">PHP Warning:  assert(): MyException: Some <span class="built_in">error</span> message</span><br><span class="line">...</span><br><span class="line">Warning: assert(): MyException: Some <span class="built_in">error</span> message</span><br><span class="line">...</span><br><span class="line">this is a test</span><br></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th>ç‰ˆæœ¬</th>
<th>æè¿°</th>
<th>å¤‡æ³¨</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>7.2.0</code></td>
<td>å½“ <code>assertion</code> è¢«åºŸå¼ƒæ—¶ä½¿ç”¨å­—ç¬¦ä¸²ã€‚å½“ <code>assert.active</code> å’Œ <code>zend.assertions</code> éƒ½è®¾ç½®ä¸º <code>1</code> æ—¶ï¼Œå®ƒä¼šå‘å‡º <code>E_DEPRECATED</code> é€šçŸ¥</td>
<td></td>
</tr>
<tr>
<td><code>7.0.0</code></td>
<td><code>assert()</code> ç°åœ¨æ˜¯ä¸€ä¸ªè¯­è¨€æ„é€ è€Œä¸æ˜¯ä¸€ä¸ªå‡½æ•°ã€‚<code>assertion</code> ç°åœ¨å¯ä»¥æ˜¯ä¸€ä¸ªè¡¨è¾¾å¼ã€‚ç¬¬äºŒä¸ªå‚æ•°ç°åœ¨è¢«è§£é‡Šä¸º <code>exception</code>ï¼ˆå¦‚æœç»™å‡º <code>Throwable</code> å¯¹è±¡ï¼‰ï¼Œæˆ–è€… <code>description</code> ä» <code>PHP 5.4.8</code> èµ·æ”¯æŒ</td>
<td></td>
</tr>
<tr>
<td><code>5.4.8</code></td>
<td>æ·»åŠ äº† <code>description</code> å‚æ•°ã€‚<code>description</code> ç°åœ¨ä¹Ÿæä¾›ç»™ <code>ASSERT_CALLBACK</code> æ¨¡å¼ä¸‹çš„å›è°ƒå‡½æ•°ä½œä¸ºç¬¬å››ä¸ªå‚æ•°</td>
</tr>
</tbody>
</table>
<h1 id="use-ä»¥ç»„å£°æ˜"><a href="#use-ä»¥ç»„å£°æ˜" class="headerlink" title="use ä»¥ç»„å£°æ˜"></a>use ä»¥ç»„å£°æ˜</h1><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// PHP7 ä¹‹å‰çš„ä»£ç </span></span><br><span class="line"><span class="keyword">use</span> <span class="title">Some</span>\<span class="title">Classes</span>\<span class="title">ClassA</span>;</span><br><span class="line"><span class="keyword">use</span> <span class="title">Some</span>\<span class="title">Classes</span>\<span class="title">ClassB</span>;</span><br><span class="line"><span class="keyword">use</span> <span class="title">Some</span>\<span class="title">Classes</span>\<span class="title">ClassC</span> <span class="title">as</span> <span class="title">C</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">use</span> <span class="title">function</span> <span class="title">Some</span>\<span class="title">Functions</span>\<span class="title">funca</span>;</span><br><span class="line"><span class="keyword">use</span> <span class="title">function</span> <span class="title">Some</span>\<span class="title">Functions</span>\<span class="title">funcb</span>;</span><br><span class="line"><span class="keyword">use</span> <span class="title">function</span> <span class="title">Some</span>\<span class="title">Functions</span>\<span class="title">funcc</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">use</span> <span class="title">const</span> <span class="title">Some</span>\<span class="title">Consts</span>\<span class="title">ConstA</span>;</span><br><span class="line"><span class="keyword">use</span> <span class="title">const</span> <span class="title">Some</span>\<span class="title">Consts</span>\<span class="title">ConstB</span>;</span><br><span class="line"><span class="keyword">use</span> <span class="title">const</span> <span class="title">Some</span>\<span class="title">Consts</span>\<span class="title">ConstC</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// PHP7 åŠä¹‹åçš„ä»£ç </span></span><br><span class="line"><span class="keyword">use</span> <span class="title">Some</span>\<span class="title">Classes</span>\&#123;<span class="title">ClassA</span>, <span class="title">ClassB</span>, <span class="title">ClassC</span> <span class="title">as</span> <span class="title">C</span>&#125;;</span><br><span class="line"><span class="keyword">use</span> <span class="title">function</span> <span class="title">Some</span>\<span class="title">Functions</span>\&#123;<span class="title">funca</span>, <span class="title">funcb</span>, <span class="title">funcc</span>&#125;;</span><br><span class="line"><span class="keyword">use</span> <span class="title">const</span> <span class="title">Some</span>\<span class="title">Functions</span>\&#123;<span class="title">ConstA</span>, <span class="title">ConstB</span>, <span class="title">ConstC</span>&#125;;</span><br></pre></td></tr></table></figure>
<h1 id="ç”Ÿæˆå™¨å¯ä»¥è¿”å›è¡¨è¾¾å¼"><a href="#ç”Ÿæˆå™¨å¯ä»¥è¿”å›è¡¨è¾¾å¼" class="headerlink" title="ç”Ÿæˆå™¨å¯ä»¥è¿”å›è¡¨è¾¾å¼"></a>ç”Ÿæˆå™¨å¯ä»¥è¿”å›è¡¨è¾¾å¼</h1><blockquote>
<p>æ­¤ç‰¹æ€§åŸºäº <code>PHP 5.5</code> ç‰ˆæœ¬ä¸­å¼•å…¥çš„ç”Ÿæˆå™¨ç‰¹æ€§æ„å»ºçš„ã€‚ å®ƒå…è®¸åœ¨ç”Ÿæˆå™¨å‡½æ•°ä¸­é€šè¿‡ä½¿ç”¨ <code>return</code> è¯­æ³•æ¥è¿”å›ä¸€ä¸ªè¡¨è¾¾å¼ï¼ˆä½†æ˜¯ä¸å…è®¸è¿”å›å¼•ç”¨å€¼ï¼‰ï¼Œå¯ä»¥é€šè¿‡è°ƒç”¨ <code>Generator::getReturn()</code> æ–¹æ³•æ¥è·å–ç”Ÿæˆå™¨çš„è¿”å›å€¼ï¼Œä½†æ˜¯è¿™ä¸ªæ–¹æ³•åªèƒ½åœ¨ç”Ÿæˆå™¨å®Œæˆäº§ç”Ÿå·¥ä½œä»¥åè°ƒç”¨ä¸€æ¬¡</p>
</blockquote>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$gen</span> = (<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">yield</span> <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">yield</span> <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">3</span>;</span><br><span class="line">&#125;)();</span><br><span class="line"></span><br><span class="line"><span class="keyword">foreach</span> (<span class="variable">$gen</span> <span class="keyword">as</span> <span class="variable">$value</span>) &#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="variable">$value</span>, PHP_EOL;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$gen</span>::getReturn(), PHP_EOL;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»“æœ</span></span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="number">3</span></span><br></pre></td></tr></table></figure>
<h1 id="ç”Ÿæˆå™¨å§”æ‰˜"><a href="#ç”Ÿæˆå™¨å§”æ‰˜" class="headerlink" title="ç”Ÿæˆå™¨å§”æ‰˜"></a>ç”Ÿæˆå™¨å§”æ‰˜</h1><blockquote>
<p>åªéœ€åœ¨æœ€å¤–å±‚ç”Ÿæˆå…¶ä¸­ä½¿ç”¨ <code>yield from</code>ï¼Œå°±å¯ä»¥æŠŠä¸€ä¸ªç”Ÿæˆå™¨è‡ªåŠ¨å§”æ´¾ç»™å…¶ä»–çš„ç”Ÿæˆå™¨ï¼Œ<code>Traversable</code> å¯¹è±¡æˆ–è€… <code>array</code></p>
</blockquote>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">gen</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">yield</span> <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">yield</span> <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">yield</span> <span class="keyword">from</span> other();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">other</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">yield</span> <span class="number">3</span>;</span><br><span class="line">    <span class="keyword">yield</span> <span class="number">4</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">foreach</span> (gen() <span class="keyword">as</span> <span class="variable">$value</span>) &#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="variable">$value</span>, PHP_EOL;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»“æœ</span></span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="number">3</span></span><br><span class="line"><span class="number">4</span></span><br></pre></td></tr></table></figure>
<h1 id="æ•´æ•°é™¤æ³•å‡½æ•°-intdiv"><a href="#æ•´æ•°é™¤æ³•å‡½æ•°-intdiv" class="headerlink" title="æ•´æ•°é™¤æ³•å‡½æ•° intdiv()"></a>æ•´æ•°é™¤æ³•å‡½æ•° intdiv()</h1><blockquote>
<p>æ•´å‹å€¼å¯ä»¥ä½¿ç”¨åè¿›åˆ¶ã€åå…­è¿›åˆ¶ã€å…«è¿›åˆ¶æˆ–äºŒè¿›åˆ¶è¡¨ç¤ºï¼Œå‰é¢å¯ä»¥åŠ ä¸Šå¯é€‰çš„ç¬¦å·ï¼ˆ<code>-</code> æˆ–è€… <code>+</code>ï¼‰ã€‚å…¶ä¸­ï¼ŒäºŒè¿›åˆ¶è¡¨è¾¾çš„ <code>integer</code> è‡ª <code>PHP 5.4.0</code> èµ·å¯ç”¨ï¼›è¦ä½¿ç”¨å…«è¿›åˆ¶è¡¨è¾¾ï¼Œæ•°å­—å‰å¿…é¡»åŠ ä¸Š <code>0</code>ï¼ˆé›¶ï¼‰ï¼›è¦ä½¿ç”¨åå…­è¿›åˆ¶è¡¨è¾¾ï¼Œæ•°å­—å‰å¿…é¡»åŠ ä¸Š <code>0x</code>ï¼›è¦ä½¿ç”¨äºŒè¿›åˆ¶è¡¨è¾¾ï¼Œæ•°å­—å‰å¿…é¡»åŠ ä¸Š <code>0b</code></p>
</blockquote>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$value</span> = intdiv(<span class="number">1000</span>, <span class="number">33</span>);</span><br><span class="line">var_dump(<span class="variable">$value</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»“æœ</span></span><br><span class="line"><span class="keyword">int</span>(<span class="number">30</span>)</span><br></pre></td></tr></table></figure>
<h1 id="ä¼šè¯é€‰é¡¹"><a href="#ä¼šè¯é€‰é¡¹" class="headerlink" title="ä¼šè¯é€‰é¡¹"></a>ä¼šè¯é€‰é¡¹</h1><blockquote>
<p>åœ¨è°ƒç”¨ <code>session_start()</code> çš„æ—¶å€™ï¼Œ ä¼ å…¥çš„é€‰é¡¹å‚æ•°ä¸­ä¹Ÿæ”¯æŒ <code>session.lazy_write</code> è¡Œä¸ºï¼Œ é»˜è®¤æƒ…å†µä¸‹è¿™ä¸ªé…ç½®é¡¹æ˜¯æ‰“å¼€çš„ã€‚å®ƒçš„ä½œç”¨æ˜¯æ§åˆ¶ <code>PHP</code> åªæœ‰åœ¨ä¼šè¯ä¸­çš„æ•°æ®å‘ç”Ÿå˜åŒ–çš„æ—¶å€™æ‰å†™å…¥ä¼šè¯å­˜å‚¨æ–‡ä»¶ï¼Œå¦‚æœä¼šè¯ä¸­çš„æ•°æ®æ²¡æœ‰å‘ç”Ÿæ”¹å˜ï¼Œé‚£ä¹ˆ <code>PHP</code> ä¼šåœ¨è¯»å–å®Œä¼šè¯æ•°æ®ä¹‹åï¼Œç«‹å³å…³é—­ä¼šè¯å­˜å‚¨æ–‡ä»¶ï¼Œä¸åšä»»ä½•ä¿®æ”¹ï¼Œå¯ä»¥é€šè¿‡è®¾ç½® <code>read_and_close</code> æ¥å®ç°</p>
</blockquote>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line">session_start([</span><br><span class="line">    <span class="string">&#x27;cache_limiter&#x27;</span> =&gt; <span class="string">&#x27;private&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;read_and_close&#x27;</span> =&gt; <span class="literal">true</span>,</span><br><span class="line">]);</span><br><span class="line">var_dump(ini_get(<span class="string">&#x27;session.cache_limiter&#x27;</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»“æœ</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">string</span>(<span class="number">7</span>) <span class="string">&quot;private&quot;</span></span><br></pre></td></tr></table></figure>
<h1 id="æ‰§è¡Œä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼æœç´¢å¹¶ä¸”ä½¿ç”¨ä¸€ä¸ªå›è°ƒè¿›è¡Œæ›¿æ¢"><a href="#æ‰§è¡Œä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼æœç´¢å¹¶ä¸”ä½¿ç”¨ä¸€ä¸ªå›è°ƒè¿›è¡Œæ›¿æ¢" class="headerlink" title="æ‰§è¡Œä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼æœç´¢å¹¶ä¸”ä½¿ç”¨ä¸€ä¸ªå›è°ƒè¿›è¡Œæ›¿æ¢"></a>æ‰§è¡Œä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼æœç´¢å¹¶ä¸”ä½¿ç”¨ä¸€ä¸ªå›è°ƒè¿›è¡Œæ›¿æ¢</h1><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å°†å­—ç¬¦ä¸²ä¸­çš„å¹´ä»½å¢åŠ ä¸€å¹´</span></span><br><span class="line"><span class="variable">$text</span> = <span class="string">&quot;Fools day is 04/01/2017\nChristmas day was 12/24/2017\n&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> preg_replace_callback(</span><br><span class="line">    <span class="string">&quot;|(\d&#123;2&#125;/\d&#123;2&#125;/)(\d&#123;4&#125;)|&quot;</span>,</span><br><span class="line">    <span class="function"><span class="keyword">function</span> (<span class="params"><span class="variable">$match</span></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable">$match</span>[<span class="number">1</span>] . (<span class="variable">$match</span>[<span class="number">2</span>] + <span class="number">1</span>);</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="variable">$text</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> PHP_EOL;</span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> preg_replace_callback_array(</span><br><span class="line">    [</span><br><span class="line">        <span class="string">&#x27;|(\d&#123;2&#125;/\d&#123;2&#125;/)(\d&#123;4&#125;)|&#x27;</span> =&gt; <span class="function"><span class="keyword">function</span> (<span class="params"><span class="variable">$match</span></span>) </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="variable">$match</span>[<span class="number">1</span>] . (<span class="variable">$match</span>[<span class="number">2</span>] + <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    ],</span><br><span class="line">    <span class="variable">$text</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»“æœ</span></span><br><span class="line">Fools day is <span class="number">04</span>/<span class="number">01</span>/<span class="number">2018</span></span><br><span class="line">Christmas day was <span class="number">12</span>/<span class="number">24</span>/<span class="number">2018</span></span><br><span class="line"></span><br><span class="line">Fools day is <span class="number">04</span>/<span class="number">01</span>/<span class="number">2018</span></span><br><span class="line">Christmas day was <span class="number">12</span>/<span class="number">24</span>/<span class="number">2018</span></span><br></pre></td></tr></table></figure>
<h1 id="ä¼ªéšæœºæ•°äº§ç”Ÿå™¨-CSPRNG"><a href="#ä¼ªéšæœºæ•°äº§ç”Ÿå™¨-CSPRNG" class="headerlink" title="ä¼ªéšæœºæ•°äº§ç”Ÿå™¨ CSPRNG"></a>ä¼ªéšæœºæ•°äº§ç”Ÿå™¨ CSPRNG</h1><blockquote>
<p><code>bin2hex()</code> - å‡½æ•°æŠŠåŒ…å«æ•°æ®çš„äºŒè¿›åˆ¶å­—ç¬¦ä¸²è½¬æ¢ä¸ºåå…­è¿›åˆ¶å€¼ã€‚</p>
</blockquote>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$array</span> = [</span><br><span class="line">    bin2hex(random_bytes(<span class="number">4</span>)),</span><br><span class="line">    bin2hex(random_bytes(<span class="number">16</span>)),</span><br><span class="line">    random_int(<span class="number">10</span>, <span class="number">99</span>),</span><br><span class="line">    random_int(<span class="number">1000</span>, <span class="number">9999</span>),</span><br><span class="line">];</span><br><span class="line">print_r(<span class="variable">$array</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»“æœ</span></span><br><span class="line"><span class="keyword">Array</span></span><br><span class="line">(</span><br><span class="line">    [<span class="number">0</span>] =&gt; <span class="number">49</span>a44caf</span><br><span class="line">    [<span class="number">1</span>] =&gt; ae67bae0c8695dc6684dddb31364ea0e</span><br><span class="line">    [<span class="number">2</span>] =&gt; <span class="number">59</span></span><br><span class="line">    [<span class="number">3</span>] =&gt; <span class="number">6021</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<h1 id="é”™è¯¯å¤„ç†æ–¹å¼"><a href="#é”™è¯¯å¤„ç†æ–¹å¼" class="headerlink" title="é”™è¯¯å¤„ç†æ–¹å¼"></a>é”™è¯¯å¤„ç†æ–¹å¼</h1><blockquote>
<p>åœ¨ <code>PHP7</code> ä¸­æ”¹å˜äº†å¤§å¤šæ•°é”™è¯¯çš„æŠ¥å‘Šæ–¹å¼ã€‚ä¸å†é€šè¿‡ <code>PHP5</code> ä½¿ç”¨çš„ä¼ ç»Ÿé”™è¯¯æŠ¥å‘Šæœºåˆ¶æ¥æŠ¥å‘Šé”™è¯¯ï¼Œç°åœ¨å¤§å¤šæ•°é”™è¯¯è¢«ä½œä¸º <code>Error</code> å¼‚å¸¸æŠ›å‡ºã€‚è¿™ç§ <code>Error</code> å¼‚å¸¸å¯ä»¥åƒ <code>Exception</code> å¼‚å¸¸ä¸€æ ·è¢«ç¬¬ä¸€ä¸ªåŒ¹é…çš„ <code>try / catch</code> å—æ‰€æ•è·ã€‚å¦‚æœæ²¡æœ‰åŒ¹é…çš„ <code>catch</code> å—ï¼Œåˆ™è°ƒç”¨å¼‚å¸¸å¤„ç†å‡½æ•°ï¼ˆäº‹å…ˆé€šè¿‡ <code>set_exception_handler()</code> æ³¨å†Œï¼‰è¿›è¡Œå¤„ç†ã€‚å¦‚æœå°šæœªæ³¨å†Œå¼‚å¸¸å¤„ç†å‡½æ•°ï¼Œåˆ™æŒ‰ç…§ä¼ ç»Ÿæ–¹å¼å¤„ç†ï¼šè¢«æŠ¥å‘Šä¸ºä¸€ä¸ªè‡´å‘½é”™è¯¯ï¼ˆ<code>Fatal Error</code>ï¼‰ã€‚</p>
</blockquote>
<p>ç”±äºé”™è¯¯å±‚æ¬¡ç»“æ„ä¸ä» <code>Exception</code> æ‰©å±•ï¼Œå› æ­¤ä½¿ç”¨ <code>catchï¼ˆException $ eï¼‰&#123;...&#125;</code> å—å¤„ç† <code>PHP5</code> ä¸­æœªæ•è·çš„å¼‚å¸¸çš„ä»£ç å°†ä¸ä¼šå¤„ç†æ­¤ç±»é”™è¯¯ã€‚éœ€è¦ä¸€ä¸ª <code>catchï¼ˆError $ eï¼‰&#123;...&#125;</code> å—æˆ–ä¸€ä¸ª <code>set_exception_handler()</code> å¤„ç†ç¨‹åºæ¥å¤„ç†è‡´å‘½é”™è¯¯ã€‚</p>
<p><img src="http://om804c7s2.bkt.clouddn.com/2018-01-20-1509440575356777.jpg" alt="2018-01-20-1509440575356777.jpg"></p>
<p><code>Error</code> å±‚æ¬¡ç»“æ„</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">- Throwable</span><br><span class="line">    - Error</span><br><span class="line">        - ArithmeticError</span><br><span class="line">        - DivisionByZeroError</span><br><span class="line">        - AssertionError</span><br><span class="line">        - ParseError</span><br><span class="line">        - TypeError</span><br><span class="line">    - Exception</span><br><span class="line">        - ...</span><br></pre></td></tr></table></figure>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Division</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">protected</span> <span class="variable">$value</span> = <span class="number">100</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">doDivision</span>(<span class="params"></span>) : <span class="title">string</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="variable">$value</span> = <span class="keyword">$this</span>-&gt;value % <span class="number">0</span>;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (<span class="built_in">DivisionByZeroError</span> <span class="variable">$e</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="variable">$e</span>-&gt;getMessage();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable">$division</span> = <span class="keyword">new</span> Division();</span><br><span class="line"><span class="keyword">print</span> <span class="variable">$division</span>-&gt;doDivision();</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»“æœ</span></span><br><span class="line">Modulo by zero</span><br></pre></td></tr></table></figure>
<h1 id="å¼ƒç”¨çš„åŠŸèƒ½"><a href="#å¼ƒç”¨çš„åŠŸèƒ½" class="headerlink" title="å¼ƒç”¨çš„åŠŸèƒ½"></a>å¼ƒç”¨çš„åŠŸèƒ½</h1><h2 id="å¼ƒç”¨-PHP4-é£æ ¼çš„æ„é€ å‡½æ•°"><a href="#å¼ƒç”¨-PHP4-é£æ ¼çš„æ„é€ å‡½æ•°" class="headerlink" title="å¼ƒç”¨ PHP4 é£æ ¼çš„æ„é€ å‡½æ•°"></a>å¼ƒç”¨ PHP4 é£æ ¼çš„æ„é€ å‡½æ•°</h2><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Test</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">Test</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">print</span> <span class="keyword">__METHOD__</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">new</span> Test();</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»“æœ</span></span><br><span class="line">PHP Deprecated : Methods with the same name <span class="keyword">as</span> their <span class="class"><span class="keyword">class</span> <span class="title">will</span></span></span><br><span class="line"><span class="class"><span class="title">not</span> <span class="title">be</span> <span class="title">constructors</span> <span class="title">in</span> <span class="title">a</span> <span class="title">future</span> <span class="title">version</span> <span class="title">of</span> <span class="title">PHP</span>;</span></span><br><span class="line"><span class="class"><span class="title">Test</span> <span class="title">has</span> <span class="title">a</span> <span class="title">deprecated</span> <span class="title">constructor</span> <span class="title">in</span> ...</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class"><span class="title">Deprecated</span> : <span class="title">Methods</span> <span class="title">with</span> <span class="title">the</span> <span class="title">same</span> <span class="title">name</span> <span class="title">as</span> <span class="title">their</span> <span class="title">class</span> <span class="title">will</span></span></span><br><span class="line"><span class="class"><span class="title">not</span> <span class="title">be</span> <span class="title">constructors</span> <span class="title">in</span> <span class="title">a</span> <span class="title">future</span> <span class="title">version</span> <span class="title">of</span> <span class="title">PHP</span>;</span></span><br><span class="line"><span class="class"><span class="title">Test</span> <span class="title">has</span> <span class="title">a</span> <span class="title">deprecated</span> <span class="title">constructor</span> <span class="title">in</span> ...</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class"><span class="title">Test</span>::<span class="title">Test</span></span></span><br></pre></td></tr></table></figure>
<h2 id="å¼ƒç”¨äº†é™æ€è°ƒç”¨éé™æ€æ–¹æ³•"><a href="#å¼ƒç”¨äº†é™æ€è°ƒç”¨éé™æ€æ–¹æ³•" class="headerlink" title="å¼ƒç”¨äº†é™æ€è°ƒç”¨éé™æ€æ–¹æ³•"></a>å¼ƒç”¨äº†é™æ€è°ƒç”¨éé™æ€æ–¹æ³•</h2><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Test</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">get</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">print</span> <span class="string">&#x27;non-static call.&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">Test::get();</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»“æœ</span></span><br><span class="line">PHP Deprecated:  Non-<span class="built_in">static</span> method Test::get() should not be called statically in ...</span><br><span class="line">...</span><br><span class="line">Deprecated: Non-<span class="built_in">static</span> method Test::get() should not be called statically in ...</span><br><span class="line">...</span><br><span class="line">non-<span class="built_in">static</span> call.</span><br></pre></td></tr></table></figure>
<h2 id="password-hash-salt-é€‰é¡¹è¢«å¼ƒç”¨"><a href="#password-hash-salt-é€‰é¡¹è¢«å¼ƒç”¨" class="headerlink" title="password_hash() salt é€‰é¡¹è¢«å¼ƒç”¨"></a>password_hash() salt é€‰é¡¹è¢«å¼ƒç”¨</h2><p>å‡½æ•°åŸ <code>salt</code> ä¸å†éœ€è¦ç”±å¼€å‘è€…æä¾›äº†ã€‚å‡½æ•°å†…éƒ¨é»˜è®¤å¸¦æœ‰ <code>salt</code> èƒ½åŠ›ï¼Œæ— éœ€å¼€å‘è€…æä¾› <code>salt</code> å€¼</p>
<h2 id="capture-session-meta-SSL-ä¸Šä¸‹æ–‡é€‰é¡¹è¢«å¼ƒç”¨"><a href="#capture-session-meta-SSL-ä¸Šä¸‹æ–‡é€‰é¡¹è¢«å¼ƒç”¨" class="headerlink" title="capture_session_meta SSL ä¸Šä¸‹æ–‡é€‰é¡¹è¢«å¼ƒç”¨"></a>capture_session_meta SSL ä¸Šä¸‹æ–‡é€‰é¡¹è¢«å¼ƒç”¨</h2><p>è¯¥ <code>capture_session_meta</code> <code>SSL</code> ä¸Šä¸‹æ–‡é€‰é¡¹å·²è¢«å¼ƒç”¨ã€‚ç°åœ¨ï¼Œé€šè¿‡ <code>stream_get_meta_data()</code> å‡½æ•°ä½¿ç”¨ <code>SSL</code> å…ƒæ•°æ®</p>
<h2 id="ç§»é™¤çš„æ‰©å±•"><a href="#ç§»é™¤çš„æ‰©å±•" class="headerlink" title="ç§»é™¤çš„æ‰©å±•"></a>ç§»é™¤çš„æ‰©å±•</h2><ul>
<li><code>ereg</code></li>
<li><code>mssql</code></li>
<li><code>mysql</code></li>
<li><code>sybase_ct</code></li>
</ul>
<h2 id="ç§»é™¤çš„-SAPI"><a href="#ç§»é™¤çš„-SAPI" class="headerlink" title="ç§»é™¤çš„ SAPI"></a>ç§»é™¤çš„ SAPI</h2><blockquote>
<p><code>PHP7+</code> ç‰ˆæœ¬ç§»é™¤äº†ä»¥ä¸‹ <code>SAPI</code>ã€‚</p>
</blockquote>
<ul>
<li>aolserver</li>
<li>apache</li>
<li>apache_hooks</li>
<li>apache2filter</li>
<li>caudium</li>
<li>continuity</li>
<li>isapi</li>
<li>milter</li>
<li>nsapi</li>
<li>phttpd</li>
<li>pi3web</li>
<li>roxen</li>
<li>thttpd</li>
<li>tux</li>
<li>webjames</li>
</ul>
<h2 id="ç§»é™¤çš„å‡½æ•°åˆ—è¡¨"><a href="#ç§»é™¤çš„å‡½æ•°åˆ—è¡¨" class="headerlink" title="ç§»é™¤çš„å‡½æ•°åˆ—è¡¨"></a>ç§»é™¤çš„å‡½æ•°åˆ—è¡¨</h2><ul>
<li>ä» <code>PHP 4.1.0</code> å¼€å§‹è¢«åºŸå¼ƒäº† <code>call_user_func()</code> å’Œ <code>call_user_func_array()</code></li>
<li>å·²åºŸå¼ƒçš„ <code>mcrypt_generic_end()</code> å‡½æ•°å·²è¢«ç§»é™¤ï¼Œå¯ä»¥ä½¿ç”¨ <code>mcrypt_generic_deinit()</code> ä»£æ›¿</li>
<li>å·²åºŸå¼ƒçš„ <code>mcrypt_ecb()</code>ã€<code>mcrypt_cbc()</code>ã€ <code>mcrypt_cfb()</code> å’Œ <code>mcrypt_ofb()</code> å‡½æ•°å·²è¢«ç§»é™¤</li>
<li><code>set_magic_quotes_runtime()</code> ï¼ˆåˆ«åï¼š<code>magic_quotes_runtime()</code>ï¼‰å·²è¢«ç§»é™¤ï¼›å®ƒä»¬åœ¨ <code>PHP5.3.0</code> ä¸­å·²ç»è¢«åºŸå¼ƒï¼Œå¹¶ä¸”åœ¨ <code>PHP5.4.0</code> ä¹Ÿç”±äºé­”æœ¯å¼•å·çš„åºŸå¼ƒè€Œå¤±å»åŠŸèƒ½</li>
<li>å·²åºŸå¼ƒçš„ <code>set_socket_blocking()</code> å‡½æ•°å·²è¢«ç§»é™¤ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ <code>stream_set_blocking()</code> ä»£æ›¿</li>
<li>åœ¨ <code>PHP-FPM</code> ä¸å†ä½¿ç”¨ <code>dl()</code>ï¼Œåœ¨ <code>CLI</code> å’Œ <code>embed SAPIs</code> ä¸­ä»å¯ç”¨</li>
<li><code>GD</code> åº“ä¸­ä¸‹åˆ—å‡½æ•°è¢«ç§»é™¤ï¼š<code>imagepsbbox()</code>ã€<code>imagepsencodefont()</code>ã€<code>imagepsextendfont()</code>ã€<code>imagepsfreefont()</code>ã€<code>imagepsloadfont()</code>ã€<code>imagepsslantfont()</code>ã€<code>imagepstext()</code></li>
<li>åœ¨é…ç½®æ–‡ä»¶ <code>php.ini</code> ä¸­ï¼Œ<code>always_populate_raw_post_data</code>ã€<code>asp_tags</code>ã€<code>xsl.security_prefs</code> è¢«ç§»é™¤äº†</li>
</ul>
]]></content>
      <categories>
        <category>php</category>
      </categories>
      <tags>
        <tag>php</tag>
      </tags>
  </entry>
  <entry>
    <title>PHP å¼€å‘åˆ©å™¨ä¹‹ PhpStorm</title>
    <url>/2018/01/21/php-phpstorm/</url>
    <content><![CDATA[<h1 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h1><blockquote>
<p>Lightning-smart PHP IDE. PhpStorm deeply understands your code.<br><a href="https://en.wikipedia.org/wiki/Comparison_of_integrated_development_environments#PHP">å¼€å‘ <code>PHP</code> çš„ä¸€ä¼—å·¥å…·</a></p>
</blockquote>
<p>æ€»è€Œè¨€ä¹‹ï¼Œå°±æ˜¯å·¨ç‰›é€¼ <code>PHP</code> é›†æˆå¼€å‘ <code>IDE</code>ï¼Œæ— å‡ºå…¶å³è€…ã€‚å¦‚æœä½ è¿˜æŒ£æ‰åœ¨ <code>Atom</code>ï¼Œ<code>Sublime Text</code>ï¼Œ<code>Vim</code>ï¼Œ<code>EditPlus</code>ï¼Œ<code>Notepad++</code>ï¼Œ<code>PHP Development Tools (PDT)</code>ï¼Œ<code>Zend Studio</code>ï¼Œ<code>Eclipse PDT</code>ï¼Œ<code>NetBeans</code>ï¼Œ<code>KDevelop</code>ï¼Œ<code>PHPEdit</code>ï¼Œ<code>PHP Tools for Visual Studio</code> ç­‰ç­‰å·¥å…·ä¸Šï¼Œä¸å¦‚ç”¨ä¸€ç«™å¼çš„ <code>PhpStorm</code>ï¼Œé¿å…æŠ˜è…¾ï¼Œä¸“æ³¨ä»£ç æœ¬èº«ã€‚</p>
<p>æˆ‘ä¸æƒ³å†’çŠ¯è°ï¼Œè‡³äºä»€ä¹ˆ <code>Editor VS IDE</code> ä¹‹ç±»çš„ç§ç§å’±å…ˆä¸äº‰è®ºäº†å¥½å—ï¼Ÿè¯´ä»€ä¹ˆ <code>Editor</code> å¿« <code>IDE</code> æ…¢ï¼ˆä¾æˆ‘çœ‹è¿™æ ·çš„äººä¸æ˜¯å‚»å°±æ˜¯è ¢ï¼‰ï¼Œè°ä¸çŸ¥é“ç”¨ <code>PHP</code> å†™ä¸ªå•æ–‡ä»¶çš„ <code>hello world</code> ç¨‹åºæ¯”æ¡†æ¶å†™å‡ºæ¥çš„å¿«ï¼ä¸è¿‡è¯´æ˜ä¸€ä¸‹ï¼Œ<code>PhpStorm</code> æ¯”è¾ƒåƒå†…å­˜ã€‚</p>
<h2 id="ä¸»è¦çš„æ¡†æ¶æ”¯æŒ"><a href="#ä¸»è¦çš„æ¡†æ¶æ”¯æŒ" class="headerlink" title="ä¸»è¦çš„æ¡†æ¶æ”¯æŒ"></a>ä¸»è¦çš„æ¡†æ¶æ”¯æŒ</h2><p><code>PhpStorm</code> éå¸¸é€‚åˆå·¥ä½œåœ¨ <code>Symfony</code>ï¼Œ<code>Drupal</code>ï¼Œ<code>WordPress</code>ï¼Œ<code>Zend Framework</code>ï¼Œ<code>Laravel</code>ï¼Œ<code>Magento</code>ï¼Œ<code>Joomla</code>ï¼Œ<code>CakePHP</code>ï¼Œ<code>Yii</code> å’Œå…¶å®ƒçš„æ¡†æ¶ä¸­ã€‚</p>
<h2 id="æ‰€æœ‰çš„-PHP-å·¥å…·"><a href="#æ‰€æœ‰çš„-PHP-å·¥å…·" class="headerlink" title="æ‰€æœ‰çš„ PHP å·¥å…·"></a>æ‰€æœ‰çš„ <code>PHP</code> å·¥å…·</h2><p>ç¼–è¾‘å™¨å®é™…ä¸Š <code>gets</code> ä½ çš„ä»£ç å¹¶ä¸”æ·±åº¦ç†è§£å®ƒçš„ç»“æ„ï¼Œä¸ºç°ä»£å’Œé—ç•™é¡¹ç›®æä¾›äº†æ‰€æœ‰çš„ <code>PHP</code> è¯­è¨€ç‰¹æ€§ã€‚å®ƒæä¾›äº†æœ€å¥½çš„ä»£ç å®Œæˆï¼Œé‡æ„ï¼Œå³æ—¶é”™è¯¯é¢„é˜²å’Œå…¶å®ƒæ›´å¤šçš„åŠŸèƒ½ã€‚</p>
<h2 id="å›Šæ‹¬å‰ç«¯æŠ€æœ¯"><a href="#å›Šæ‹¬å‰ç«¯æŠ€æœ¯" class="headerlink" title="å›Šæ‹¬å‰ç«¯æŠ€æœ¯"></a>å›Šæ‹¬å‰ç«¯æŠ€æœ¯</h2><p>å……åˆ†åˆ©ç”¨è¯¸å¦‚ <code>HTML5</code>ï¼Œ<code>CSS</code>ï¼Œ<code>Sass</code>ï¼Œ<code>Less</code>ï¼Œ<code>Stylus</code>ï¼Œ<code>CoffeeScript</code>ï¼Œ<code>TypeScript</code>ï¼Œ<code>Emmet</code> å’Œ <code>JavaScript</code> ç­‰å‰æ²¿çš„å‰ç«¯æŠ€æœ¯ï¼Œå¹¶æä¾›é‡æ„ï¼Œè®¾è®¡å’Œæœ‰æ•ˆçš„å•å…ƒæµ‹è¯•ã€‚åœ¨æµè§ˆå™¨å³æ—¶æŸ¥çœ‹æ›´æ”¹å¤šäºäº†æœ‰ <code>Live Edit</code></p>
<h2 id="å†…ç½®çš„å¼€å‘è€…å·¥å…·"><a href="#å†…ç½®çš„å¼€å‘è€…å·¥å…·" class="headerlink" title="å†…ç½®çš„å¼€å‘è€…å·¥å…·"></a>å†…ç½®çš„å¼€å‘è€…å·¥å…·</h2><p><code>IDE</code> æ”¯æŒå¾ˆå¤šå¸¸è§„ä»»åŠ¡ï¼Œç”±äºæœ‰äº†ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿé›†æˆï¼Œæ”¯æŒè¿œç¨‹éƒ¨ç½²ï¼Œ<code>database/SQL</code>ï¼Œå‘½ä»¤è¡Œå·¥å…·ï¼Œ<code>Vagrant</code>ï¼Œ<code>Composer</code>ï¼Œ<code>REST Client</code> ä»¥åŠè®¸å¤šå…¶å®ƒå·¥å…·</p>
<h2 id="ä¸‰åˆä¸€-PhpStorm-WebStorm-PHP-DB-SQL"><a href="#ä¸‰åˆä¸€-PhpStorm-WebStorm-PHP-DB-SQL" class="headerlink" title="ä¸‰åˆä¸€ - PhpStorm = WebStorm + PHP + DB/SQL"></a>ä¸‰åˆä¸€ - <code>PhpStorm = WebStorm + PHP + DB/SQL</code></h2><blockquote>
<p>å¦‚æœå®‰è£…äº† <code>PhpStorm</code>ï¼Œ<code>WebStorm</code> å¯ä»¥æ‰”æ‰äº†ï¼Œæ˜¯çš„ï¼Œ<code>PhpStorm</code> å°±è¿™ä¹ˆç‰›å‰</p>
</blockquote>
<p><code>WebStorm</code> çš„æ‰€æœ‰åŠŸèƒ½éƒ½åŒ…å«åœ¨ <code>PhpStorm</code> ä¸­ï¼Œå¯¹ <code>PHP</code> å’Œ <code>Databases/SQL</code> æ”¯æŒçš„å…¨é¢æ”¯æŒå°†è¢«æ·»åŠ åˆ°é¡¶å±‚</p>
<h2 id="æ™ºèƒ½ç¼–ç ååŠ©"><a href="#æ™ºèƒ½ç¼–ç ååŠ©" class="headerlink" title="æ™ºèƒ½ç¼–ç ååŠ©"></a>æ™ºèƒ½ç¼–ç ååŠ©</h2><p>åœ¨ä½ é”®å…¥çš„æ—¶å€™ï¼Œæ•°ç™¾ä¸ªæ£€æŸ¥å·¥å…·ä¼šæ£€æŸ¥ä½ çš„ä»£ç ï¼Œåˆ†ææ•´ä¸ªé¡¹ç›®ã€‚<code>PHPDoc</code> æ”¯æŒï¼Œä»£ç ï¼ˆé‡æ–°ï¼‰ç¼–æ’å’Œæ ¼å¼åŒ–ï¼Œå¿«é€Ÿä¿®å¤å’Œå…¶å®ƒåŠŸèƒ½å¯ä»¥å¸®åŠ©ä½ ç¼–å†™æ˜“äºç»´æŠ¤çš„æ•´æ´ä»£ç </p>
<h2 id="æ™ºèƒ½ä»£ç å¯¼èˆª"><a href="#æ™ºèƒ½ä»£ç å¯¼èˆª" class="headerlink" title="æ™ºèƒ½ä»£ç å¯¼èˆª"></a>æ™ºèƒ½ä»£ç å¯¼èˆª</h2><p>è®©ä½ æˆä¸ºä»£ç åº“çš„ä¸»äººåº”è¯¥å½’åŠŸäºé«˜æ•ˆï¼Œé—ªç”µèˆ¬çš„å¯¼èˆªåŠŸèƒ½ã€‚<code>IDE</code> ç†è§£ä½ æƒ³å»çš„åœ°æ–¹ï¼Œå¹¶ç«‹å³åˆ°è¾¾é‚£é‡Œ</p>
<h2 id="å¿«é€Ÿè€Œå®‰å…¨çš„é‡æ„"><a href="#å¿«é€Ÿè€Œå®‰å…¨çš„é‡æ„" class="headerlink" title="å¿«é€Ÿè€Œå®‰å…¨çš„é‡æ„"></a>å¿«é€Ÿè€Œå®‰å…¨çš„é‡æ„</h2><p>ä½¿ç”¨ <code>Safe Rename</code>ï¼Œ<code>Move</code>ï¼Œ<code>Delete</code>ï¼Œ<code>Extract Method</code>ï¼Œ<code>Inline Variable</code>ï¼Œ<code>Push members Up / Pull members Down</code>ï¼Œ<code>Change Signature</code> å’Œè®¸å¤šå…¶å®ƒé‡æ„ï¼Œå¯é çš„é‡æ„ä½ çš„ä»£ç ã€‚ç‰¹å®šäºè¯­è¨€çš„é‡æ„åªéœ€è¦ç‚¹å‡»å‡ ä¸‹å°±å¯ä»¥å¸®åŠ©ä½ æ‰§è¡Œé¡¹ç›®èŒƒå›´å†…çš„æ›´æ”¹ï¼Œå¹¶ä¸”å¯ä»¥å®‰å…¨äº†æ’¤æ¶ˆ</p>
<h2 id="å®¹æ˜“è°ƒè¯•å’Œæµ‹è¯•"><a href="#å®¹æ˜“è°ƒè¯•å’Œæµ‹è¯•" class="headerlink" title="å®¹æ˜“è°ƒè¯•å’Œæµ‹è¯•"></a>å®¹æ˜“è°ƒè¯•å’Œæµ‹è¯•</h2><p><code>PhpStorm</code> ä»¥å…¶é›¶é…ç½®çš„å¯è§†åŒ–è°ƒè¯•å™¨è€Œé—»åï¼Œæä¾›éå‡¡çš„æ´å¯ŸåŠ›ï¼Œè®©ä½ åœ¨æ¯ä¸ªæ­¥éª¤ä¸­äº†è§£ä½ çš„åº”ç”¨ç¨‹åºå‘ç”Ÿäº†ä»€ä¹ˆã€‚å®ƒå·¥ä½œåœ¨ <code>Xdebug</code> å’Œ <code>Zend Debugger</code>ï¼Œå¯ä»¥åœ¨æœ¬åœ°å’Œè¿œç¨‹ä½¿ç”¨ã€‚ä½¿ç”¨ <code>PHPUnit</code> è¿›è¡Œå•å…ƒæµ‹è¯•ï¼Œä¸ <code>Behat</code> å’Œåˆ†æå™¨é›†æˆ <code>BDD</code> ä¹Ÿæ˜¯å¯ç”¨çš„</p>
<h1 id="PhpStorm-ä¿¡æ¯"><a href="#PhpStorm-ä¿¡æ¯" class="headerlink" title="PhpStorm ä¿¡æ¯"></a><code>PhpStorm</code> ä¿¡æ¯</h1><h2 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><p><a href="https://www.jetbrains.com/phpstorm/"><code>JetBranins PhpStorm</code></a></p>
<h2 id="ç ´è§£"><a href="#ç ´è§£" class="headerlink" title="ç ´è§£"></a>ç ´è§£</h2><p><a href="http://idea.lanyus.com/"><code>IntelliJ IDEA</code> æ³¨å†Œç </a></p>
<h1 id="PhpStorm-å¿«æ·é”®"><a href="#PhpStorm-å¿«æ·é”®" class="headerlink" title="PhpStorm å¿«æ·é”®"></a><code>PhpStorm</code> å¿«æ·é”®</h1><h2 id="é€‰é¡¹"><a href="#é€‰é¡¹" class="headerlink" title="é€‰é¡¹"></a>é€‰é¡¹</h2><h3 id="PhpStorm"><a href="#PhpStorm" class="headerlink" title="PhpStorm"></a><code>PhpStorm</code></h3><table>
<thead>
<tr>
<th style="text-align:left">Key</th>
<th style="text-align:left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>Command+,</code></td>
<td style="text-align:left"><code>Preferences...</code>: åå¥½</td>
</tr>
<tr>
<td style="text-align:left"><code>Command+H</code></td>
<td style="text-align:left"><code>Hide PhpStorm</code>: éšè— PhpStorm</td>
</tr>
<tr>
<td style="text-align:left"><code>Option+Command+H</code></td>
<td style="text-align:left"><code>Hide Others</code>: éšè—å…¶å®ƒ</td>
</tr>
<tr>
<td style="text-align:left"><code>Command+Q</code></td>
<td style="text-align:left"><code>Quit PhpStorm</code></td>
</tr>
</tbody>
</table>
<h3 id="File"><a href="#File" class="headerlink" title="File"></a><code>File</code></h3><table>
<thead>
<tr>
<th style="text-align:left">Key</th>
<th style="text-align:left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>Command+N</code></td>
<td style="text-align:left"><code>New...</code>: æ–°å»º</td>
</tr>
<tr>
<td style="text-align:left"><code>Shift+Command+S</code></td>
<td style="text-align:left"><code>Save As...</code>: å¦å­˜ä¸º</td>
</tr>
<tr>
<td style="text-align:left"><code>Command+S</code></td>
<td style="text-align:left"><code>Save All</code>: ä¿å­˜</td>
</tr>
<tr>
<td style="text-align:left"><code>Option+Command+Y</code></td>
<td style="text-align:left"><code>Synchronize</code>: åŒæ­¥</td>
</tr>
</tbody>
</table>
<h3 id="Edit"><a href="#Edit" class="headerlink" title="Edit"></a><code>Edit</code></h3><table>
<thead>
<tr>
<th style="text-align:left">Key</th>
<th style="text-align:left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>Command+Z</code></td>
<td style="text-align:left"><code>Undo</code>: æ’¤é”€</td>
</tr>
<tr>
<td style="text-align:left"><code>Shift+Command+Z</code></td>
<td style="text-align:left"><code>Redo</code>: é‡åš</td>
</tr>
<tr>
<td style="text-align:left"><code>Command+X</code></td>
<td style="text-align:left"><code>Cut</code>: å‰ªåˆ‡</td>
</tr>
<tr>
<td style="text-align:left"><code>Command+C</code></td>
<td style="text-align:left"><code>Copy</code>: å¤åˆ¶</td>
</tr>
<tr>
<td style="text-align:left"><code>Shift+Command+C</code></td>
<td style="text-align:left"><code>Copy Path</code>: å¤åˆ¶è·¯å¾„</td>
</tr>
<tr>
<td style="text-align:left"><code>Option+Shift+Command+C</code></td>
<td style="text-align:left"><code>Copy Reference</code>: å¤åˆ¶å¼•ç”¨</td>
</tr>
<tr>
<td style="text-align:left"><code>Command+V</code></td>
<td style="text-align:left"><code>Paste</code>: ç²˜è´´</td>
</tr>
<tr>
<td style="text-align:left"><code>Shift+Command+V</code></td>
<td style="text-align:left"><code>Paste from History...</code>: ä»ç²˜è´´æ¿å†å²ä¸­é€‰æ‹©ç²˜è´´</td>
</tr>
<tr>
<td style="text-align:left"><code>Option+Shift+Command+V</code></td>
<td style="text-align:left"><code>Paste Simple</code>: ç®€å•ç²˜è´´</td>
</tr>
<tr>
<td style="text-align:left"><code>Delete</code></td>
<td style="text-align:left"><code>Delete</code>: åˆ é™¤</td>
</tr>
<tr>
<td style="text-align:left"><code>Find</code></td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left"><code>Command+F</code></td>
<td style="text-align:left"><code>Find...</code>: æŸ¥æ‰¾</td>
</tr>
<tr>
<td style="text-align:left"><code>Command+R</code></td>
<td style="text-align:left"><code>Replace...</code>: æ›¿æ¢</td>
</tr>
<tr>
<td style="text-align:left"><code>Command+G</code></td>
<td style="text-align:left"><code>Find Next / Move to Next Occurrence</code>: æŸ¥æ‰¾ä¸‹ä¸€ä¸ª / ç§»åŠ¨åˆ°ä¸‹ä¸€ä¸ªå‡ºç°çš„åœ°æ–¹</td>
</tr>
<tr>
<td style="text-align:left"><code>Shift+Command+G</code></td>
<td style="text-align:left"><code>Find Previous / Move to Previous Occurrence</code>: æŸ¥æ‰¾ä¸Šä¸€ä¸ª / ç§»åŠ¨åˆ°ä¸Šä¸€ä¸ªå‡ºç°çš„åœ°æ–¹</td>
</tr>
<tr>
<td style="text-align:left"><code>Control+Command+G</code></td>
<td style="text-align:left"><code>Select All Occurrences</code>: é€‰ä¸­æ‰€æœ‰å‡ºç°çš„åœ°æ–¹</td>
</tr>
<tr>
<td style="text-align:left"><code>Control+G</code></td>
<td style="text-align:left"><code>Add Selection for Next Occurrence</code>: é€‰ä¸­ä¸‹ä¸€ä¸ªå‡ºç°çš„åœ°æ–¹</td>
</tr>
<tr>
<td style="text-align:left"><code>Control+Shift+G</code></td>
<td style="text-align:left"><code>Unselect Occurrence</code>: å–æ¶ˆé€‰ä¸­çš„åœ°æ–¹</td>
</tr>
<tr>
<td style="text-align:left"><code>Shift+Command+F</code></td>
<td style="text-align:left"><code>Find in Path...</code>: åœ¨è·¯å¾„ä¸­æŸ¥æ‰¾</td>
</tr>
<tr>
<td style="text-align:left"><code>Shift+Command+R</code></td>
<td style="text-align:left"><code>Replace in Path...</code>: åœ¨è·¯å¾„ä¸­æ›¿æ¢</td>
</tr>
<tr>
<td style="text-align:left"><code>Option+F7</code></td>
<td style="text-align:left"><code>Find Usages</code>: æŸ¥æ‰¾ä½¿ç”¨çš„åœ°æ–¹</td>
</tr>
<tr>
<td style="text-align:left"><code>Option+Shift+Command+F7</code></td>
<td style="text-align:left"><code>Find Usages Settings...</code>: æŸ¥æ‰¾ä½¿ç”¨è®¾ç½®</td>
</tr>
<tr>
<td style="text-align:left"><code>Option+Command+F7</code></td>
<td style="text-align:left"><code>Show Usages</code>: æ˜¾ç¤ºä½¿ç”¨çš„åœ°æ–¹</td>
</tr>
<tr>
<td style="text-align:left"><code>Command+F7</code></td>
<td style="text-align:left"><code>Find Usages in File</code>: åœ¨æ–‡ä»¶ä¸­æŸ¥æ‰¾ä½¿ç”¨çš„åœ°æ–¹</td>
</tr>
<tr>
<td style="text-align:left"><code>Shift+Command+F7</code></td>
<td style="text-align:left"><code>Highlight Usages in File</code>: åœ¨æ–‡ä»¶ä¸­é«˜äº®ä½¿ç”¨çš„åœ°æ–¹</td>
</tr>
<tr>
<td style="text-align:left"><code>Option+Command+X</code></td>
<td style="text-align:left"><code>Find by XPath...</code>: é€šè¿‡è‡ªå®šä¹‰è·¯å¾„æŸ¥æ‰¾</td>
</tr>
<tr>
<td style="text-align:left"><code>Shift+Command+8</code></td>
<td style="text-align:left"><code>Column Selection Mode</code>: åˆ—é€‰æ‹©æ¨¡å¼</td>
</tr>
<tr>
<td style="text-align:left"><code>Command+A</code></td>
<td style="text-align:left"><code>Select All</code>: é€‰ä¸­æ‰€æœ‰</td>
</tr>
<tr>
<td style="text-align:left"><code>Option+â†‘</code></td>
<td style="text-align:left"><code>Extend Selection</code>: æ‰©å±•é€‰ä¸­</td>
</tr>
<tr>
<td style="text-align:left"><code>Option+â†“</code></td>
<td style="text-align:left"><code>Shrink Selection</code>: ç¼©å°é€‰ä¸­</td>
</tr>
<tr>
<td style="text-align:left"><code>Control+Shift+J</code></td>
<td style="text-align:left"><code>Join Lines</code>: åˆå¹¶è¡Œ</td>
</tr>
<tr>
<td style="text-align:left"><code>Command+D</code></td>
<td style="text-align:left"><code>Duplicate Line</code>: å¤åˆ¶è¡Œ</td>
</tr>
<tr>
<td style="text-align:left"><code>Tab</code></td>
<td style="text-align:left"><code>Indent Selection</code>: é€‰ä¸­å‘å³ç¼©è¿›</td>
</tr>
<tr>
<td style="text-align:left"><code>Shift+Tab</code></td>
<td style="text-align:left"><code>Unindent Line of Selection</code>: é€‰ä¸­å‘å·¦ç¼©è¿›</td>
</tr>
<tr>
<td style="text-align:left"><code>Shift+Command+U</code></td>
<td style="text-align:left"><code>Toggle Case</code>: å¤§å°å†™åˆ‡æ¢</td>
</tr>
<tr>
<td style="text-align:left"><code>Tab</code></td>
<td style="text-align:left"><code>Next Parameter</code>: ä¸‹ä¸€ä¸ªå‚æ•°</td>
</tr>
<tr>
<td style="text-align:left"><code>Shift+Tab</code></td>
<td style="text-align:left"><code>Previous Parameter</code>: ä¸Šä¸€ä¸ªå‚æ•°</td>
</tr>
</tbody>
</table>
<h3 id="View"><a href="#View" class="headerlink" title="View"></a><code>View</code></h3><table>
<thead>
<tr>
<th style="text-align:left">Key</th>
<th style="text-align:left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>Tool Windows</code></td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left"><code>Command+1</code></td>
<td style="text-align:left"><code>Project</code>: é¡¹ç›®</td>
</tr>
<tr>
<td style="text-align:left"><code>Command+2</code></td>
<td style="text-align:left"><code>Favorites</code>: å–œå¥½</td>
</tr>
<tr>
<td style="text-align:left"><code>Command+3</code></td>
<td style="text-align:left"><code>Find</code>: æŸ¥æ‰¾</td>
</tr>
<tr>
<td style="text-align:left"><code>Command+4</code></td>
<td style="text-align:left"><code>Run</code>: è¿è¡Œ</td>
</tr>
<tr>
<td style="text-align:left"><code>Command+5</code></td>
<td style="text-align:left"><code>Debug</code>: è°ƒè¯•</td>
</tr>
<tr>
<td style="text-align:left"><code>Command+6</code></td>
<td style="text-align:left"><code>TODO</code>: å¾…åŠäº‹é¡¹</td>
</tr>
<tr>
<td style="text-align:left"><code>Command+7</code></td>
<td style="text-align:left"><code>Structure</code>: ç»“æ„</td>
</tr>
<tr>
<td style="text-align:left"><code>Command+8</code></td>
<td style="text-align:left"><code>Hierarchy</code>: ç»§æ‰¿</td>
</tr>
<tr>
<td style="text-align:left"><code>Command+9</code></td>
<td style="text-align:left"><code>Version Control</code>: ç‰ˆæœ¬æ§åˆ¶</td>
</tr>
<tr>
<td style="text-align:left"><code>Option+F12</code></td>
<td style="text-align:left"><code>Terminal</code>: ç»ˆç«¯</td>
</tr>
<tr>
<td style="text-align:left"><code>F1</code></td>
<td style="text-align:left"><code>Quick Documentation</code>: å¿«é€Ÿåˆ°æ–‡æ¡£</td>
</tr>
<tr>
<td style="text-align:left"><code>Command+P</code></td>
<td style="text-align:left"><code>Parameter Info</code>: å‚æ•°ä¿¡æ¯</td>
</tr>
<tr>
<td style="text-align:left"><code>Command+E</code></td>
<td style="text-align:left"><code>Recent Files</code>: æœ€è¿‘æ‰“å¼€çš„æ–‡ä»¶</td>
</tr>
<tr>
<td style="text-align:left"><code>Shift+Command+E</code></td>
<td style="text-align:left"><code>Recently Changed Files</code>: æœ€è¿‘ä¿®æ”¹çš„æ–‡ä»¶</td>
</tr>
<tr>
<td style="text-align:left"><code>Option+Shift+C</code></td>
<td style="text-align:left"><code>Recent Changes</code>: æœ€è¿‘ä¿®æ”¹æ–‡ä»¶å†å²è®°å½•</td>
</tr>
<tr>
<td style="text-align:left"><code>Command+D</code></td>
<td style="text-align:left"><code>Compare With...</code>: å½“å‰æ–‡ä»¶ä¸å†å²è®°å½•æ¯”è¾ƒ</td>
</tr>
<tr>
<td style="text-align:left"><code>Control+</code>`</td>
<td style="text-align:left"><code>Quick Switch Scheme...</code>: å¿«é€Ÿåˆ‡æ¢æ¨¡å¼</td>
</tr>
<tr>
<td style="text-align:left"><code>Control+Command+F</code></td>
<td style="text-align:left"><code>Enter Full Screen</code>: å…¨å±</td>
</tr>
</tbody>
</table>
<h3 id="Navigate"><a href="#Navigate" class="headerlink" title="Navigate"></a><code>Navigate</code></h3><table>
<thead>
<tr>
<th style="text-align:left">Key</th>
<th style="text-align:left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>Command+O</code></td>
<td style="text-align:left"><code>Class...</code>: æœç´¢ç±»</td>
</tr>
<tr>
<td style="text-align:left"><code>Shift+Command+O</code></td>
<td style="text-align:left"><code>File...</code>: æœç´¢æ–‡ä»¶</td>
</tr>
<tr>
<td style="text-align:left"><code>Option+Command+O</code></td>
<td style="text-align:left"><code>Symbol...</code>: æœç´¢ç¬¦å·</td>
</tr>
<tr>
<td style="text-align:left"><code>Option+Command+.</code></td>
<td style="text-align:left"><code>Custom Folding...</code>: æœç´¢è‡ªå®šä¹‰æŠ˜å </td>
</tr>
<tr>
<td style="text-align:left"><code>Command+L</code></td>
<td style="text-align:left"><code>Line...</code>: å®šä½è¡Œ</td>
</tr>
<tr>
<td style="text-align:left"><code>Command+[</code></td>
<td style="text-align:left"><code>Back</code>: åé€€</td>
</tr>
<tr>
<td style="text-align:left"><code>Command+]</code></td>
<td style="text-align:left"><code>Forward</code>: å‰è¿›</td>
</tr>
<tr>
<td style="text-align:left"><code>Shift+Command+Delete</code></td>
<td style="text-align:left"><code>Last Edit Location</code>: æœ€åç¼–è¾‘ä½ç½®</td>
</tr>
<tr>
<td style="text-align:left"><code>Bookmarks</code></td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left"><code>F3</code></td>
<td style="text-align:left"><code>Toggle Bookmark</code>: åˆ‡æ¢ä¹¦ç­¾</td>
</tr>
<tr>
<td style="text-align:left"><code>Option+F3</code></td>
<td style="text-align:left"><code>Toggle Bookmark with Mnemonic</code>: åˆ‡æ¢ä¹¦ç­¾è®°å¿†</td>
</tr>
<tr>
<td style="text-align:left"><code>Command+F3</code></td>
<td style="text-align:left"><code>Show Bookmark</code>: æ˜¾ç¤ºä¹¦ç­¾</td>
</tr>
<tr>
<td style="text-align:left"><code>Option+F1</code></td>
<td style="text-align:left"><code>Select In...</code>: é€‰æ‹©ç›®æ ‡</td>
</tr>
<tr>
<td style="text-align:left"><code>Command+â†‘</code></td>
<td style="text-align:left"><code>Jump to Navigation Bar</code>: è·³è½¬åˆ°å¯¼èˆªæ </td>
</tr>
<tr>
<td style="text-align:left"><code>Command+B</code></td>
<td style="text-align:left"><code>Declaration</code>: è·³è½¬åˆ°å‡½æ•°å£°æ˜</td>
</tr>
<tr>
<td style="text-align:left"><code>Option+Command+B</code></td>
<td style="text-align:left"><code>Implementation(s)</code>: è·³è½¬åˆ°æ¥å£å®ç°ç±»</td>
</tr>
<tr>
<td style="text-align:left"><code>Shift+Command+B</code></td>
<td style="text-align:left"><code>Type Declaration</code>: è·³è½¬åˆ°ç±»å‹å£°æ˜</td>
</tr>
<tr>
<td style="text-align:left"><code>Command+U</code></td>
<td style="text-align:left"><code>Super Method</code>: è·³è½¬åˆ°è¶…çº§æ–¹æ³•</td>
</tr>
<tr>
<td style="text-align:left"><code>Shift+Command+T</code></td>
<td style="text-align:left"><code>Test</code>: è·³è½¬åˆ°æµ‹è¯•ç±»</td>
</tr>
<tr>
<td style="text-align:left"><code>Control+Command+â†‘</code></td>
<td style="text-align:left"><code>Related Symbol...</code>: ç›¸å…³ç¬¦å·</td>
</tr>
<tr>
<td style="text-align:left"><code>Command+F12</code></td>
<td style="text-align:left"><code>File Structure</code>: æ–‡ä»¶ç»“æ„</td>
</tr>
<tr>
<td style="text-align:left"><code>Control+H</code></td>
<td style="text-align:left"><code>Type Hierarchy</code>: ç±»å‹ç»§æ‰¿</td>
</tr>
<tr>
<td style="text-align:left"><code>Shift+Command+H</code></td>
<td style="text-align:left"><code>Method Hierarchy</code>: æ–¹æ³•ç»§æ‰¿</td>
</tr>
<tr>
<td style="text-align:left"><code>Control+Option+H</code></td>
<td style="text-align:left"><code>Call Hierarchy</code>: è°ƒç”¨ç»§æ‰¿</td>
</tr>
<tr>
<td style="text-align:left"><code>F2</code></td>
<td style="text-align:left"><code>Next Highlighted Error</code>: ä¸‹ä¸€ä¸ªé«˜äº®é”™è¯¯</td>
</tr>
<tr>
<td style="text-align:left"><code>Shift+F2</code></td>
<td style="text-align:left"><code>Previous Highlighted Error</code>: ä¸Šä¸€ä¸ªé«˜äº®é”™è¯¯</td>
</tr>
<tr>
<td style="text-align:left"><code>Control+Option+â†’</code></td>
<td style="text-align:left"><code>Next Emmet Edit Point</code>: ä¸‹ä¸€ä¸ª Emmet ç¼–è¾‘ç‚¹</td>
</tr>
<tr>
<td style="text-align:left"><code>Control+Option+â†</code></td>
<td style="text-align:left"><code>Previous Emmet Edit Point</code>: ä¸Šä¸€ä¸ª Emmet ç¼–è¾‘ç‚¹</td>
</tr>
<tr>
<td style="text-align:left"><code>Control+â†“</code></td>
<td style="text-align:left"><code>Next Method</code>: ä¸‹ä¸€ä¸ªæ–¹æ³•</td>
</tr>
<tr>
<td style="text-align:left"><code>Control+â†‘</code></td>
<td style="text-align:left"><code>Previous Method</code>: ä¸Šä¸€ä¸ªæ–¹æ³•</td>
</tr>
</tbody>
</table>
<h3 id="Code"><a href="#Code" class="headerlink" title="Code"></a><code>Code</code></h3><table>
<thead>
<tr>
<th style="text-align:left">Key</th>
<th style="text-align:left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>Control+O</code></td>
<td style="text-align:left"><code>Override Method...</code>: è¦†ç›–æ–¹æ³•</td>
</tr>
<tr>
<td style="text-align:left"><code>Control+I</code></td>
<td style="text-align:left"><code>Implement Method...</code>: å®ç°æ–¹æ³•</td>
</tr>
<tr>
<td style="text-align:left"><code>Command+N</code></td>
<td style="text-align:left"><code>Generate...</code>: ç”Ÿæˆ</td>
</tr>
<tr>
<td style="text-align:left"><code>Option+Command+T</code></td>
<td style="text-align:left"><code>Surround With...</code>: ç¯ç»•</td>
</tr>
<tr>
<td style="text-align:left"><code>Shift+Command+Delete</code></td>
<td style="text-align:left"><code>Unwrap / Remove</code>: æ‰“å¼€ / ç§»é™¤</td>
</tr>
<tr>
<td style="text-align:left"><code>Completion</code></td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left"><code>Option+/</code></td>
<td style="text-align:left"><code>Cyclic Expand Word</code>: å¾ªç¯å±•å¼€å•è¯(å‘å‰)</td>
</tr>
<tr>
<td style="text-align:left"><code>Shift+Option+?</code></td>
<td style="text-align:left"><code>Cyclic Expand Word(Backward)</code>: å¾ªç¯å±•å¼€å•è¯(å‘å)</td>
</tr>
<tr>
<td style="text-align:left"><code>Folding</code></td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left"><code>Command++</code></td>
<td style="text-align:left"><code>Expand</code>: å±•å¼€</td>
</tr>
<tr>
<td style="text-align:left"><code>Command+-</code></td>
<td style="text-align:left"><code>Collapse</code>: æŠ˜å </td>
</tr>
<tr>
<td style="text-align:left"><code>Option+Command++</code></td>
<td style="text-align:left"><code>Expand Recursively</code>: é€’å½’å±•å¼€</td>
</tr>
<tr>
<td style="text-align:left"><code>Option+Command+-</code></td>
<td style="text-align:left"><code>Collapse Recursively</code>: é€’å½’æŠ˜å </td>
</tr>
<tr>
<td style="text-align:left"><code>Shift+Command++</code></td>
<td style="text-align:left"><code>Expand All</code>: å±•å¼€æ‰€æœ‰</td>
</tr>
<tr>
<td style="text-align:left"><code>Shift+Command+-</code></td>
<td style="text-align:left"><code>Collapse All</code>: æŠ˜å æ‰€æœ‰</td>
</tr>
<tr>
<td style="text-align:left"><code>Command+J</code></td>
<td style="text-align:left"><code>Insert Live Template...</code>: æ’å…¥æ¨¡æ¿</td>
</tr>
<tr>
<td style="text-align:left"><code>Option+Command+J</code></td>
<td style="text-align:left"><code>Surround with Live Template...</code>: ç¯ç»•æ¨¡æ¿</td>
</tr>
<tr>
<td style="text-align:left"><code>Command+/</code></td>
<td style="text-align:left"><code>Comment with Line Comment</code>: è¡Œæ³¨é‡Š</td>
</tr>
<tr>
<td style="text-align:left"><code>Option+Command+/</code></td>
<td style="text-align:left"><code>Comment with Block Comment</code>: å—æ³¨é‡Š</td>
</tr>
<tr>
<td style="text-align:left"><code>Option+Command+L</code></td>
<td style="text-align:left"><code>Reformat Code</code>: æ ¼å¼åŒ–ä»£ç </td>
</tr>
<tr>
<td style="text-align:left"><code>Option+Shift+Command+L</code></td>
<td style="text-align:left"><code>Show Reformat File Dialog</code>: å¼¹å‡ºæ ¼å¼åŒ–å¯¹è¯æ¡†</td>
</tr>
<tr>
<td style="text-align:left"><code>Control+Option+I</code></td>
<td style="text-align:left"><code>Auto-Indent Lines</code>: è‡ªåŠ¨ç¼©è¿›è¡Œ</td>
</tr>
<tr>
<td style="text-align:left"><code>Control+Option+O</code></td>
<td style="text-align:left"><code>Optimize Imports</code>: ä¼˜åŒ–å¯¼å…¥</td>
</tr>
<tr>
<td style="text-align:left"><code>Shift+Command+â†“</code></td>
<td style="text-align:left"><code>Move Statement Down</code>: å£°æ˜å‘ä¸‹ç§»åŠ¨</td>
</tr>
<tr>
<td style="text-align:left"><code>Shift+Command+â†‘</code></td>
<td style="text-align:left"><code>Move Statement Up</code>: å£°æ˜å‘ä¸‹ç§»åŠ¨</td>
</tr>
<tr>
<td style="text-align:left"><code>Option+Shift+Command+â†</code></td>
<td style="text-align:left"><code>Move Element Left</code>: å…ƒç´ å‘å·¦ç§»åŠ¨</td>
</tr>
<tr>
<td style="text-align:left"><code>Option+Shift+Command+â†’</code></td>
<td style="text-align:left"><code>Move Element Right</code>: å…ƒç´ å‘å³ç§»åŠ¨</td>
</tr>
<tr>
<td style="text-align:left"><code>Option+Shift+â†“</code></td>
<td style="text-align:left"><code>Move Line Down</code>: è¡Œå‘ä¸‹ç§»åŠ¨</td>
</tr>
<tr>
<td style="text-align:left"><code>Option+Shift+â†‘</code></td>
<td style="text-align:left"><code>Move Line Up</code>: è¡Œå‘ä¸Šç§»åŠ¨</td>
</tr>
<tr>
<td style="text-align:left"><code>Option+Shift+Command+I</code></td>
<td style="text-align:left"><code>Run Inspection by Name...</code>: é€šè¿‡åç§°è¿è¡Œæ£€æŸ¥</td>
</tr>
<tr>
<td style="text-align:left"><code>Option+Shift+Command+H</code></td>
<td style="text-align:left"><code>Configure Current File Analysis...</code>: é…ç½®å½“å‰æ–‡ä»¶åˆ†æ</td>
</tr>
<tr>
<td style="text-align:left"><code>Command+.</code></td>
<td style="text-align:left"><code>Fold Selection / Remove region</code>: æŠ˜å é€‰æ‹© / ç§»é™¤åŒºåŸŸ</td>
</tr>
</tbody>
</table>
<h3 id="Refactor"><a href="#Refactor" class="headerlink" title="Refactor"></a><code>Refactor</code></h3><table>
<thead>
<tr>
<th style="text-align:left">Key</th>
<th style="text-align:left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>Control+T</code></td>
<td style="text-align:left"><code>Refactor This...</code>: é‡æ„</td>
</tr>
<tr>
<td style="text-align:left"><code>Shift+F6</code></td>
<td style="text-align:left"><code>Rename</code>: é‡å‘½å</td>
</tr>
<tr>
<td style="text-align:left"><code>Command+F6</code></td>
<td style="text-align:left"><code>Change Signature...</code>: æ”¹å˜ç­¾å</td>
</tr>
<tr>
<td style="text-align:left"><code>F6</code></td>
<td style="text-align:left"><code>Move...</code>: ç§»åŠ¨</td>
</tr>
<tr>
<td style="text-align:left"><code>F5</code></td>
<td style="text-align:left"><code>Copy...</code>: å¤åˆ¶</td>
</tr>
<tr>
<td style="text-align:left"><code>Command+Delete</code></td>
<td style="text-align:left"><code>Safe Delete</code>: å®‰å…¨åˆ é™¤</td>
</tr>
<tr>
<td style="text-align:left"><code>Extract</code></td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left"><code>Option+Command+V</code></td>
<td style="text-align:left"><code>Variable...</code>: å˜é‡</td>
</tr>
<tr>
<td style="text-align:left"><code>Option+Command+C</code></td>
<td style="text-align:left"><code>Constant...</code>: å¸¸é‡</td>
</tr>
<tr>
<td style="text-align:left"><code>Option+Command+F</code></td>
<td style="text-align:left"><code>Field...</code>: å­—æ®µ</td>
</tr>
<tr>
<td style="text-align:left"><code>Option+Command+P</code></td>
<td style="text-align:left"><code>Parameter...</code>: å‚æ•°</td>
</tr>
<tr>
<td style="text-align:left"><code>Option+Command+M</code></td>
<td style="text-align:left"><code>Method...</code>: æ–¹æ³•</td>
</tr>
</tbody>
</table>
<h3 id="Run"><a href="#Run" class="headerlink" title="Run"></a><code>Run</code></h3><table>
<thead>
<tr>
<th style="text-align:left">Key</th>
<th style="text-align:left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>Control+R</code></td>
<td style="text-align:left"><code>Run</code>: è¿è¡Œ</td>
</tr>
<tr>
<td style="text-align:left"><code>Control+D</code></td>
<td style="text-align:left"><code>Debug</code>: è°ƒè¯•</td>
</tr>
<tr>
<td style="text-align:left"><code>Control+Option+R</code></td>
<td style="text-align:left"><code>Run...</code>: è¿è¡Œ</td>
</tr>
<tr>
<td style="text-align:left"><code>Control+Option+D</code></td>
<td style="text-align:left"><code>Debug...</code>: è°ƒè¯•</td>
</tr>
<tr>
<td style="text-align:left"><code>Command+F2</code></td>
<td style="text-align:left"><code>Stop</code>: åœæ­¢</td>
</tr>
<tr>
<td style="text-align:left"><code>Command+F8</code></td>
<td style="text-align:left"><code>Step Over</code>: æ­¥è¿‡</td>
</tr>
<tr>
<td style="text-align:left"><code>Option+Shift+F8</code></td>
<td style="text-align:left"><code>Force Step Over</code>: å¼ºåˆ¶æ­¥è¿‡</td>
</tr>
<tr>
<td style="text-align:left"><code>F7</code></td>
<td style="text-align:left"><code>Step Into</code>: æ­¥å…¥</td>
</tr>
<tr>
<td style="text-align:left"><code>Command+F7</code></td>
<td style="text-align:left"><code>Force Step Into</code>: å¼ºåˆ¶æ­¥å…¥</td>
</tr>
<tr>
<td style="text-align:left"><code>Shift+F7</code></td>
<td style="text-align:left"><code>Smart Step Over</code>: æ™ºèƒ½æ­¥å…¥</td>
</tr>
<tr>
<td style="text-align:left"><code>Shift+F8</code></td>
<td style="text-align:left"><code>Step Out</code>: è·³è¿‡</td>
</tr>
<tr>
<td style="text-align:left"><code>Option+F9</code></td>
<td style="text-align:left"><code>Run to Cursor</code>: è¿è¡Œåˆ°å…‰æ ‡å¤„</td>
</tr>
<tr>
<td style="text-align:left"><code>Option+Command+F9</code></td>
<td style="text-align:left"><code>Force Run to Cursor</code>: å¼ºåˆ¶è¿è¡Œåˆ°å…‰æ ‡å¤„</td>
</tr>
<tr>
<td style="text-align:left"><code>Option+Command+R</code></td>
<td style="text-align:left"><code>Resume Program</code>: æ¢å¤ç¨‹åº</td>
</tr>
<tr>
<td style="text-align:left"><code>Option+F8</code></td>
<td style="text-align:left"><code>Evaluate Expression...</code>: è¯„ä¼°è¡¨è¾¾</td>
</tr>
<tr>
<td style="text-align:left"><code>Option+Command+F8</code></td>
<td style="text-align:left"><code>Quick Evaluate Expression</code>: å¿«é€Ÿè¯„ä¼°è¡¨è¾¾</td>
</tr>
<tr>
<td style="text-align:left"><code>Option+F10</code></td>
<td style="text-align:left"><code>Show Execution Point</code>: æ˜¾ç¤ºæ‰§è¡Œçš„æ–­ç‚¹</td>
</tr>
<tr>
<td style="text-align:left"><code>Command+F8</code></td>
<td style="text-align:left"><code>Toggle Line Breakpoint</code>: åˆ‡æ¢æ–­ç‚¹</td>
</tr>
<tr>
<td style="text-align:left"><code>Option+Shift+Command+F8</code></td>
<td style="text-align:left"><code>Toggle Temporary Line Breakpoint</code>: åˆ‡æ¢ä¸´æ—¶æ–­ç‚¹</td>
</tr>
<tr>
<td style="text-align:left"><code>Shift+Command+F8</code></td>
<td style="text-align:left"><code>View Breakpoints...</code>: æŸ¥çœ‹æ–­ç‚¹</td>
</tr>
</tbody>
</table>
<h3 id="Tools"><a href="#Tools" class="headerlink" title="Tools"></a><code>Tools</code></h3><table>
<thead>
<tr>
<th style="text-align:left">Key</th>
<th style="text-align:left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>Tasks &amp; Contexts</code></td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left"><code>Option+Shift+T</code></td>
<td style="text-align:left"><code>Switch Task...</code>: åˆ‡æ¢ä»»åŠ¡</td>
</tr>
<tr>
<td style="text-align:left"><code>Option+Shift+N</code></td>
<td style="text-align:left"><code>Open Task...</code>: æ‰“å¼€ä»»åŠ¡</td>
</tr>
<tr>
<td style="text-align:left"><code>Option+Shift+W</code></td>
<td style="text-align:left"><code>Close Active Task...</code>: å…³é—­æ¿€æ´»ä»»åŠ¡</td>
</tr>
<tr>
<td style="text-align:left"><code>Option+Shift+B</code></td>
<td style="text-align:left"><code>Open in Browser</code>: ç”¨æµè§ˆå™¨æ‰“å¼€</td>
</tr>
<tr>
<td style="text-align:left"><code>Option+Shift+X</code></td>
<td style="text-align:left"><code>Clear+Context</code>: æ¸…é™¤ä¸Šä¸‹æ–‡</td>
</tr>
<tr>
<td style="text-align:left"><code>Shift+Command+N</code></td>
<td style="text-align:left"><code>New Scratch File...</code>: æ–°å»ºä¸´æ—¶æ–‡ä»¶</td>
</tr>
<tr>
<td style="text-align:left"><code>Option+Command+F6</code></td>
<td style="text-align:left"><code>Show Code Coverage Data</code>: æ˜¾ç¤ºä»£ç è¦†ç›–æ•°æ®</td>
</tr>
<tr>
<td style="text-align:left"><code>Deployment</code></td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left"><code>Option+Shift+Command+X</code></td>
<td style="text-align:left"><code>Upload to...</code>: ä¸Šä¼ åˆ°</td>
</tr>
<tr>
<td style="text-align:left"><code>Shift+Command+X</code></td>
<td style="text-align:left"><code>Run Command...</code>: è¿è¡Œå‘½ä»¤è¡Œ</td>
</tr>
</tbody>
</table>
<h3 id="VCS"><a href="#VCS" class="headerlink" title="VCS"></a><code>VCS</code></h3><table>
<thead>
<tr>
<th style="text-align:left">Key</th>
<th style="text-align:left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>Control+V</code></td>
<td style="text-align:left"><code>VCS Operations Popup...</code>: VCS æ“ä½œå¼¹å‡º</td>
</tr>
<tr>
<td style="text-align:left"><code>Command+K</code></td>
<td style="text-align:left"><code>Commit Changes...</code>: æäº¤ä¿®æ”¹</td>
</tr>
<tr>
<td style="text-align:left"><code>Command+T</code></td>
<td style="text-align:left"><code>Update Project...</code>: æ›´æ–°é¡¹ç›®</td>
</tr>
<tr>
<td style="text-align:left"><code>Git</code></td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left"><code>Option+Command+A</code></td>
<td style="text-align:left"><code>Add</code>: æ·»åŠ </td>
</tr>
<tr>
<td style="text-align:left"><code>Shift+Command+K</code></td>
<td style="text-align:left"><code>Push...</code>: æ¨é€</td>
</tr>
</tbody>
</table>
<h3 id="Window"><a href="#Window" class="headerlink" title="Window"></a><code>Window</code></h3><table>
<thead>
<tr>
<th style="text-align:left">Key</th>
<th style="text-align:left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>Command+M</code></td>
<td style="text-align:left"><code>Minimize</code>: æœ€å°åŒ–</td>
</tr>
<tr>
<td style="text-align:left"><code>Control+Command+=</code></td>
<td style="text-align:left"><code>Zoom</code>: å˜ç„¦</td>
</tr>
<tr>
<td style="text-align:left"><code>Shift+F12</code></td>
<td style="text-align:left"><code>Restore Default Layout</code>: æ¢å¤é»˜è®¤çš„å¸ƒå±€</td>
</tr>
<tr>
<td style="text-align:left"><code>Active Tool Window</code></td>
</tr>
<tr>
<td style="text-align:left"><code>Shift+â‹</code></td>
<td style="text-align:left"><code>Hide Active Tool Window</code>:</td>
</tr>
<tr>
<td style="text-align:left"><code>Shift+Command+F12</code></td>
<td style="text-align:left"><code>Hide All Tool Windows</code>:</td>
</tr>
<tr>
<td style="text-align:left"><code>Control+Shift+F4</code></td>
<td style="text-align:left"><code>Close Active Tab</code>:</td>
</tr>
<tr>
<td style="text-align:left"><code>F12</code></td>
<td style="text-align:left"><code>Jump to Last Tool Window</code>:</td>
</tr>
<tr>
<td style="text-align:left"><code>Shift+Command+&#39;</code></td>
<td style="text-align:left"><code>Maximize Tool Window</code>:</td>
</tr>
<tr>
<td style="text-align:left"><code>Editor Tabs</code></td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left"><code>Shift+Command+]</code></td>
<td style="text-align:left"><code>Select Next Tab</code>: é€‰æ‹©ä¸‹ä¸€ä¸ªæ ‡ç­¾</td>
</tr>
<tr>
<td style="text-align:left"><code>Shift+Command+[</code></td>
<td style="text-align:left"><code>Select Previous Tab</code>: é€‰æ‹©ä¸Šä¸€ä¸ªæ ‡ç­¾</td>
</tr>
<tr>
<td style="text-align:left"><code>Command+W</code></td>
<td style="text-align:left"><code>Close</code>: å…³é—­æ ‡ç­¾çª—å£</td>
</tr>
<tr>
<td style="text-align:left"><code>Option+Tab</code></td>
<td style="text-align:left"><code>Goto Next Splitter</code>:</td>
</tr>
<tr>
<td style="text-align:left"><code>Option+Shift+Tab</code></td>
<td style="text-align:left"><code>Goto Previous Splitter</code>:</td>
</tr>
<tr>
<td style="text-align:left"><code>Command+</code>`</td>
<td style="text-align:left"><code>Next Project Window</code>: ä¸‹ä¸€ä¸ªé¡¹ç›®çª—å£</td>
</tr>
<tr>
<td style="text-align:left"><code>Shift+Command+</code>`</td>
<td style="text-align:left"><code>Previous Project Window</code>: ä¸Šä¸€ä¸ªé¡¹ç›®çª—å£</td>
</tr>
</tbody>
</table>
<h3 id="Help"><a href="#Help" class="headerlink" title="Help"></a><code>Help</code></h3><table>
<thead>
<tr>
<th style="text-align:left">Key</th>
<th style="text-align:left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>Shift+Command+A</code></td>
<td style="text-align:left"><code>Find Action</code>: æŸ¥æ‰¾åŠ¨ä½œ</td>
</tr>
</tbody>
</table>
<h2 id="ä¸»é¢˜"><a href="#ä¸»é¢˜" class="headerlink" title="ä¸»é¢˜"></a>ä¸»é¢˜</h2><blockquote>
<ul>
<li><a href="https://github.com/daylerees/colour-schemes">Colour schemes for a variety of editors created by Dayle Rees</a></li>
</ul>
</blockquote>
<h2 id="å¸®åŠ©"><a href="#å¸®åŠ©" class="headerlink" title="å¸®åŠ©"></a>å¸®åŠ©</h2><h1 id="å…¶å®ƒ"><a href="#å…¶å®ƒ" class="headerlink" title="å…¶å®ƒ"></a>å…¶å®ƒ</h1><h2 id="æ’ä»¶"><a href="#æ’ä»¶" class="headerlink" title="æ’ä»¶"></a>æ’ä»¶</h2><blockquote>
<ul>
<li><a href="https://github.com/kalessil/phpinspectionsea">A Static Code Analyzer for PHP (a PhpStorm/Idea Plugin)</a></li>
<li><a href="https://github.com/adelf/idea-php-dotenv-plugin/">environment parameters completion, based on .env file keys</a></li>
<li><a href="https://github.com/JetBrains/ideavim">Vim emulation plug-in for IDEs based on the IntelliJ platform</a></li>
<li><a href="https://github.com/JetBrains/ideolog">Interactive viewer for â€˜.logâ€™ files</a></li>
</ul>
</blockquote>
<h2 id="æ•™ç¨‹"><a href="#æ•™ç¨‹" class="headerlink" title="æ•™ç¨‹"></a>æ•™ç¨‹</h2><blockquote>
<ul>
<li><a href="https://laracasts.com/series/how-to-be-awesome-in-phpstorm">Be Awesome in PHPStorm</a></li>
<li><a href="https://www.jetbrains.com/phpstorm/documentation/phpstorm-video-tutorials.html">Getting Started</a></li>
</ul>
</blockquote>
<h2 id="é—®é¢˜"><a href="#é—®é¢˜" class="headerlink" title="é—®é¢˜"></a>é—®é¢˜</h2><blockquote>
<ul>
<li><a href="http://www.cnblogs.com/zhangjianqiang/articles/5716768.html">ä¼˜åŒ– phpstorm è¿è¡Œå¡é¡¿é—®é¢˜</a></li>
<li><a href="https://gist.github.com/paranoidjk/36891e7e117a86aa01ee">phpstorm åœ¨ mac ä¸Šå¡é¡¿</a></li>
<li><a href="https://www.zhihu.com/question/35203203">mac ä¸‹ intellij idea å˜å¾—ç‰¹åˆ«å¡è¯¥å¦‚ä½•è§£å†³</a></li>
</ul>
</blockquote>
]]></content>
      <categories>
        <category>devtools</category>
      </categories>
      <tags>
        <tag>php</tag>
        <tag>devtools</tag>
      </tags>
  </entry>
  <entry>
    <title>PHP èŒƒå›´ä¸­çš„é‡å å…³ç³»</title>
    <url>/2018/05/02/php-range-overlap/</url>
    <content><![CDATA[<p>è¿™ç¯‡ç®—æ˜¯æœ€è¿‘å†™äº†ä¸€å † <code>bug</code> åçš„åçœå§ï¼Œæ—¥å¸¸å¼€å‘ä¸­ï¼Œæˆ‘ä»¬æ€»æ˜¯è¦å¤„ç†å„ç§è¾¹ç•Œé—®é¢˜ï¼Œå°¤ä¸ºå¸¸è§çš„å°±æ˜¯ç»™å®šä¸€ç»„èŒƒå›´ï¼Œåˆ¤æ–­ç»™å®šçš„èŒƒå›´æ˜¯å¦åœ¨ç›®æ ‡èŒƒå›´ä¹‹å†…æˆ–è€…ä¹‹å¤–æˆ–è€…é‡å ä¹‹ç±»çš„ã€‚è¿™ä¸€ç±»çš„åˆ¤æ–­æƒ…å†µç¨ä¸æ³¨æ„å°±å®¹æ˜“æ»‹ç”Ÿ <code>bug</code>ï¼Œæ—¢ç„¶æˆ‘å·²ç»ä¸­æªäº†ï¼Œé‚£ä¹ˆæˆ‘å°±æ¥è¯´è¯´è¿™ä¸ªæƒ…å†µå¦‚ä½•å¤„ç†ã€‚</p>
<span id="more"></span>
<h2 id="é—®é¢˜"><a href="#é—®é¢˜" class="headerlink" title="é—®é¢˜"></a>é—®é¢˜</h2><p>æ£€æŸ¥ç»™å®šçš„ä¸€ç»„èŒƒå›´çš„ä»»æ„ä¸€ä¸ªç«¯ç‚¹æ˜¯å¦åœ¨ç›®æ ‡èŒƒå›´ä¹‹å†…</p>
<p>æ ¹æ®è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬é©¬ä¸Šæƒ³åˆ°è¿™ä¸ªè¦ç¡®å®šä¸¤ç§æƒ…å†µï¼š</p>
<ul>
<li>åŒ…å«ç«¯ç‚¹æœ¬èº«ï¼Œå³æŸä¸ªç«¯ç‚¹åªè¦é‡å å°±ç®—ï¼Œæ¯”å¦‚ï¼š<code>[1, 2]</code> åœ¨ <code>[2, 3]</code> ç«¯ç‚¹ä¹‹å†…ï¼Œé‡å éƒ¨åˆ†ä¸º <code>2</code></li>
<li>ä¸åŒ…å«ç«¯ç‚¹æœ¬èº«ï¼Œå³ä½¿æœ‰é‡å çš„ç«¯ç‚¹ä¹Ÿä¸èƒ½ç®—ï¼Œæ¯”å¦‚ï¼š<code>[1, 2]</code> ä¸åœ¨ <code>[2, 3]</code> ç«¯ç‚¹ä¹‹å†…ï¼Œè™½ç„¶æœ‰é‡å éƒ¨åˆ†ï¼ŒæŠ±æ­‰çš„æ˜¯æ­¤ <code>2</code> éå½¼ <code>2</code></li>
</ul>
<p>è‡³äºåŒ…ä¸åŒ…å«ç«¯ç‚¹æœ¬èº«ï¼Œè§†å…·ä½“çš„æƒ…å†µè€Œå®š</p>
<h2 id="æ–¹æ¡ˆ"><a href="#æ–¹æ¡ˆ" class="headerlink" title="æ–¹æ¡ˆ"></a>æ–¹æ¡ˆ</h2><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Range</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">main</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="variable">$source</span> = [<span class="number">1</span>, <span class="number">4</span>];</span><br><span class="line">        <span class="variable">$target</span> = [<span class="number">4</span>, <span class="number">6</span>];</span><br><span class="line"></span><br><span class="line">        <span class="comment">// åŒ…å«ç«¯ç‚¹é‡å çš„æƒ…å†µã€‚</span></span><br><span class="line">        <span class="variable">$overlapWith</span> = <span class="built_in">self</span>::overlapWith(<span class="variable">$source</span>, <span class="variable">$target</span>, <span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ä¸åŒ…å«ç«¯ç‚¹é‡å çš„æƒ…å†µã€‚</span></span><br><span class="line">        <span class="variable">$nonOverlapWith</span> = <span class="built_in">self</span>::overlapWith(<span class="variable">$source</span>, <span class="variable">$target</span>);</span><br><span class="line"></span><br><span class="line">        var_dump(<span class="variable">$overlapWith</span>, <span class="variable">$nonOverlapWith</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ˜¯å¦ç»™å®šçš„èŒƒå›´åŒ…å«åœ¨ç›®æ ‡èŒƒå›´ä¸­ã€‚</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> array $source</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> array $target</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> bool  $overlap</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> bool</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">overlapWith</span>(<span class="params"><span class="keyword">array</span> <span class="variable">$source</span>, <span class="keyword">array</span> <span class="variable">$target</span>, <span class="variable">$overlap</span> = <span class="literal">false</span></span>): <span class="title">bool</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        sort(<span class="variable">$source</span>);</span><br><span class="line">        sort(<span class="variable">$target</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (<span class="variable">$overlap</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">self</span>::includeOverlap(<span class="variable">$source</span>, <span class="variable">$target</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">self</span>::exclusiveOverlap(<span class="variable">$source</span>, <span class="variable">$target</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">includeOverlap</span>(<span class="params"><span class="keyword">array</span> <span class="variable">$source</span>, <span class="keyword">array</span> <span class="variable">$target</span></span>): <span class="title">bool</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        [<span class="variable">$begin</span>, <span class="variable">$end</span>] = <span class="variable">$source</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (<span class="variable">$target</span>[<span class="number">1</span>] &lt; <span class="variable">$begin</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (<span class="variable">$target</span>[<span class="number">0</span>] &gt; <span class="variable">$end</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">exclusiveOverlap</span>(<span class="params"><span class="keyword">array</span> <span class="variable">$source</span>, <span class="keyword">array</span> <span class="variable">$target</span></span>): <span class="title">bool</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        [<span class="variable">$begin</span>, <span class="variable">$end</span>] = <span class="variable">$source</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (<span class="variable">$target</span>[<span class="number">1</span>] &lt;= <span class="variable">$begin</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (<span class="variable">$target</span>[<span class="number">0</span>] &gt;= <span class="variable">$end</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Range::main();</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»“æœ</span></span><br><span class="line"><span class="keyword">bool</span>(<span class="literal">true</span>)</span><br><span class="line"><span class="keyword">bool</span>(<span class="literal">false</span>)</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>php</category>
      </categories>
      <tags>
        <tag>php</tag>
      </tags>
  </entry>
  <entry>
    <title>PHP7 ä¸­çš„ list</title>
    <url>/2018/03/01/php-php7-list/</url>
    <content><![CDATA[<p>åœ¨ PHP 5.4 ä¹‹å‰å®šä¹‰æ•°ç»„åªèƒ½ç”¨ <code>array()</code>ï¼Œä½†åœ¨ PHP 5.4 ä¹‹åå¯ä»¥ç”¨ <code>[]</code>ï¼Œè¿™ä¸ªçœŸæ˜¯æ–¹ä¾¿äº†å¤ªå¤šï¼Œé¡ºä¾¿è¿˜çœäº† 5 ä¸ªå­—ç¬¦ã€‚åƒ <code>array()</code> ä¸€æ ·ï¼Œ<code>list()</code> ä¸æ˜¯çœŸæ­£çš„å‡½æ•°ï¼Œè€Œæ˜¯è¯­è¨€ç»“æ„ã€‚<code>list()</code> å¯ä»¥åœ¨å•æ¬¡æ“ä½œå†…å°±ä¸ºä¸€ç»„å˜é‡èµ‹å€¼ã€‚</p>
<h1 id="å˜é‡èµ‹å€¼"><a href="#å˜é‡èµ‹å€¼" class="headerlink" title="å˜é‡èµ‹å€¼"></a>å˜é‡èµ‹å€¼</h1><blockquote>
<ul>
<li>PHP 5 é‡Œï¼Œ<code>list()</code> ä»æœ€å³è¾¹çš„å‚æ•°å¼€å§‹èµ‹å€¼ï¼›PHP 7 é‡Œï¼Œ<code>list()</code> ä»æœ€å·¦è¾¹çš„å‚æ•°å¼€å§‹èµ‹å€¼</li>
<li>å‡ºç°åœ¨å·¦å€¼ä¸­çš„ <code>[]</code> å¹¶ä¸æ˜¯æ•°ç»„çš„ç®€å†™ï¼Œæ˜¯ <code>list()</code> çš„ç®€å†™</li>
</ul>
</blockquote>
<ul>
<li><a href="http://php.net/manual/zh/migration70.incompatible.php#migration70.incompatible.variable-handling.list.order">èµ‹å€¼æ“ä½œçš„é¡ºåºå‘ç”Ÿäº†å˜åŒ–</a></li>
<li><a href="http://php.net/manual/zh/migration70.incompatible.php#migration70.incompatible.variable-handling.list.empty">list() è¡¨è¾¾å¼ä¸å†å¯ä»¥å®Œå…¨ä¸ºç©º</a></li>
<li><a href="http://php.net/manual/zh/migration70.incompatible.php#migration70.incompatible.variable-handling.list.string">    å­—ç¬¦ä¸²æ— æ³•å†è¢«æ‹†åŒ…ï¼ˆunpackï¼‰</a></li>
</ul>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">list</span>(<span class="variable">$hello</span>, <span class="variable">$world</span>) = [<span class="string">&#x27;hello&#x27;</span>, <span class="string">&#x27;world&#x27;</span>];</span><br><span class="line">var_dump(<span class="variable">$hello</span>, <span class="variable">$world</span>);</span><br><span class="line"></span><br><span class="line">[<span class="variable">$new</span>, <span class="variable">$old</span>] = [<span class="string">&#x27;new&#x27;</span>, <span class="string">&#x27;old&#x27;</span>];</span><br><span class="line">var_dump(<span class="variable">$new</span>, <span class="variable">$old</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»“æœ</span></span><br><span class="line"><span class="keyword">string</span>(<span class="number">5</span>) <span class="string">&quot;hello&quot;</span></span><br><span class="line"><span class="keyword">string</span>(<span class="number">5</span>) <span class="string">&quot;world&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">string</span>(<span class="number">3</span>) <span class="string">&quot;new&quot;</span></span><br><span class="line"><span class="keyword">string</span>(<span class="number">3</span>) <span class="string">&quot;old&quot;</span></span><br></pre></td></tr></table></figure>
<h1 id="æ•°ç»„ç´¢å¼•"><a href="#æ•°ç»„ç´¢å¼•" class="headerlink" title="æ•°ç»„ç´¢å¼•"></a>æ•°ç»„ç´¢å¼•</h1><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line">[<span class="variable">$a</span>[<span class="number">0</span>], <span class="variable">$a</span>[<span class="number">1</span>], <span class="variable">$a</span>[<span class="number">2</span>]] = [<span class="string">&#x27;hello&#x27;</span>, <span class="string">&#x27;world&#x27;</span>, <span class="string">&#x27;!&#x27;</span>];</span><br><span class="line">var_dump(<span class="variable">$a</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»“æœ</span></span><br><span class="line"><span class="keyword">array</span>(<span class="number">3</span>) &#123;</span><br><span class="line">  [<span class="number">0</span>] =&gt;</span><br><span class="line">  <span class="keyword">string</span>(<span class="number">5</span>) <span class="string">&quot;hello&quot;</span></span><br><span class="line">  [<span class="number">1</span>] =&gt;</span><br><span class="line">  <span class="keyword">string</span>(<span class="number">5</span>) <span class="string">&quot;world&quot;</span></span><br><span class="line">  [<span class="number">2</span>] =&gt;</span><br><span class="line">  <span class="keyword">string</span>(<span class="number">1</span>) <span class="string">&quot;!&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="äº’ç›¸åµŒå¥—"><a href="#äº’ç›¸åµŒå¥—" class="headerlink" title="äº’ç›¸åµŒå¥—"></a>äº’ç›¸åµŒå¥—</h1><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¸åˆæ³•</span></span><br><span class="line"><span class="keyword">list</span>([<span class="variable">$a</span>, <span class="variable">$b</span>], [<span class="variable">$c</span>, <span class="variable">$d</span>]) = [[<span class="number">1</span>, <span class="number">2</span>], [<span class="number">3</span>, <span class="number">4</span>]];</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¸åˆæ³•</span></span><br><span class="line">[<span class="keyword">list</span>(<span class="variable">$a</span>, <span class="variable">$b</span>), <span class="keyword">list</span>(<span class="variable">$c</span>, <span class="variable">$d</span>)] = [[<span class="number">1</span>, <span class="number">2</span>], [<span class="number">3</span>, <span class="number">4</span>]];</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆæ³•</span></span><br><span class="line">[[<span class="variable">$a</span>, <span class="variable">$b</span>], [<span class="variable">$c</span>, <span class="variable">$d</span>]] = [[<span class="number">1</span>, <span class="number">2</span>], [<span class="number">3</span>, <span class="number">4</span>]];</span><br></pre></td></tr></table></figure>
<h1 id="å¾ªç¯ä¸­ä½¿ç”¨"><a href="#å¾ªç¯ä¸­ä½¿ç”¨" class="headerlink" title="å¾ªç¯ä¸­ä½¿ç”¨"></a>å¾ªç¯ä¸­ä½¿ç”¨</h1><h2 id="é¡ºåºç´¢å¼•"><a href="#é¡ºåºç´¢å¼•" class="headerlink" title="é¡ºåºç´¢å¼•"></a>é¡ºåºç´¢å¼•</h2><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$array</span> = [[<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>], [<span class="string">&#x27;c&#x27;</span>, <span class="string">&#x27;d&#x27;</span>], [<span class="string">&#x27;e&#x27;</span>, <span class="string">&#x27;f&#x27;</span>]];</span><br><span class="line"><span class="keyword">foreach</span> (<span class="variable">$array</span> <span class="keyword">as</span> <span class="variable">$key</span> =&gt; [<span class="variable">$x</span>, <span class="variable">$y</span>]) &#123;</span><br><span class="line">    <span class="keyword">echo</span> sprintf(<span class="string">&#x27;ç¬¬ %d æ¬¡å¾ªç¯çš„å€¼ï¼š&#x27;</span>, <span class="variable">$key</span> + <span class="number">1</span>);</span><br><span class="line">    <span class="keyword">echo</span> <span class="variable">$x</span>, <span class="string">&#x27;-&gt;&#x27;</span>, <span class="variable">$y</span> . PHP_EOL;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»“æœ</span></span><br><span class="line">ç¬¬ <span class="number">1</span> æ¬¡å¾ªç¯çš„å€¼ï¼ša-&gt;b</span><br><span class="line">ç¬¬ <span class="number">2</span> æ¬¡å¾ªç¯çš„å€¼ï¼šc-&gt;d</span><br><span class="line">ç¬¬ <span class="number">3</span> æ¬¡å¾ªç¯çš„å€¼ï¼še-&gt;f</span><br></pre></td></tr></table></figure>
<h2 id="æŒ‡å®šç´¢å¼•"><a href="#æŒ‡å®šç´¢å¼•" class="headerlink" title="æŒ‡å®šç´¢å¼•"></a>æŒ‡å®šç´¢å¼•</h2><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$array</span> = [</span><br><span class="line">    [<span class="string">&#x27;x&#x27;</span> =&gt; <span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;y&#x27;</span> =&gt; <span class="string">&#x27;b&#x27;</span>],</span><br><span class="line">    [<span class="string">&#x27;x&#x27;</span> =&gt; <span class="string">&#x27;c&#x27;</span>, <span class="string">&#x27;y&#x27;</span> =&gt; <span class="string">&#x27;d&#x27;</span>],</span><br><span class="line">    [<span class="string">&#x27;x&#x27;</span> =&gt; <span class="string">&#x27;e&#x27;</span>, <span class="string">&#x27;y&#x27;</span> =&gt; <span class="string">&#x27;f&#x27;</span>],</span><br><span class="line">];</span><br><span class="line"><span class="keyword">foreach</span> (<span class="variable">$array</span> <span class="keyword">as</span> <span class="variable">$key</span> =&gt; [<span class="string">&#x27;x&#x27;</span> =&gt; <span class="variable">$x</span>, <span class="string">&#x27;y&#x27;</span> =&gt; <span class="variable">$y</span>]) &#123;</span><br><span class="line">    <span class="keyword">echo</span> sprintf(<span class="string">&#x27;ç¬¬ %d æ¬¡å¾ªç¯çš„å€¼ï¼š&#x27;</span>, <span class="variable">$key</span> + <span class="number">1</span>);</span><br><span class="line">    <span class="keyword">echo</span> <span class="variable">$x</span>, <span class="string">&#x27;-&gt;&#x27;</span>, <span class="variable">$y</span> . PHP_EOL;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»“æœ</span></span><br><span class="line">ç¬¬ <span class="number">1</span> æ¬¡å¾ªç¯çš„å€¼ï¼ša-&gt;b</span><br><span class="line">ç¬¬ <span class="number">2</span> æ¬¡å¾ªç¯çš„å€¼ï¼šc-&gt;d</span><br><span class="line">ç¬¬ <span class="number">3</span> æ¬¡å¾ªç¯çš„å€¼ï¼še-&gt;f</span><br></pre></td></tr></table></figure>
<h1 id="å…è®¸æŒ‡å®šé”®"><a href="#å…è®¸æŒ‡å®šé”®" class="headerlink" title="å…è®¸æŒ‡å®šé”®"></a>å…è®¸æŒ‡å®šé”®</h1><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$array</span> = [<span class="string">&#x27;x&#x27;</span> =&gt; <span class="number">1</span>, <span class="string">&#x27;y&#x27;</span> =&gt; <span class="number">2</span>, <span class="string">&#x27;z&#x27;</span> =&gt; <span class="number">3</span>];</span><br><span class="line">[<span class="string">&#x27;x&#x27;</span> =&gt; <span class="variable">$x</span>, <span class="string">&#x27;y&#x27;</span> =&gt; <span class="variable">$y</span>, <span class="string">&#x27;z&#x27;</span> =&gt; <span class="variable">$z</span>] = <span class="variable">$array</span>;</span><br><span class="line">var_dump(<span class="variable">$x</span>, <span class="variable">$y</span>, <span class="variable">$z</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç›¸å½“äº</span></span><br><span class="line"><span class="variable">$x</span> = <span class="variable">$array</span>[<span class="string">&#x27;x&#x27;</span>];</span><br><span class="line"><span class="variable">$y</span> = <span class="variable">$array</span>[<span class="string">&#x27;y&#x27;</span>];</span><br><span class="line"><span class="variable">$z</span> = <span class="variable">$array</span>[<span class="string">&#x27;z&#x27;</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»“æœ</span></span><br><span class="line"><span class="keyword">int</span>(<span class="number">1</span>)</span><br><span class="line"><span class="keyword">int</span>(<span class="number">2</span>)</span><br><span class="line"><span class="keyword">int</span>(<span class="number">3</span>)</span><br></pre></td></tr></table></figure>
<h1 id="è°ƒæ•´é¡ºåº"><a href="#è°ƒæ•´é¡ºåº" class="headerlink" title="è°ƒæ•´é¡ºåº"></a>è°ƒæ•´é¡ºåº</h1><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// PHP 5 ä¼šæŠ¥ PHP Notice:  Undefined offset: 0...</span></span><br><span class="line"><span class="keyword">list</span>(<span class="variable">$a</span>, <span class="variable">$b</span>) = [<span class="number">1</span> =&gt; <span class="string">&#x27;a&#x27;</span>, <span class="number">2</span> =&gt; <span class="string">&#x27;b&#x27;</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">// PHP 7 å¤„ç†èµ·æ¥ä¸è´¹å¹ç°ä¹‹åŠ›</span></span><br><span class="line">[<span class="number">10</span> =&gt; <span class="variable">$a</span>, <span class="number">11</span> =&gt; <span class="variable">$b</span>, <span class="number">12</span> =&gt; <span class="variable">$c</span>] = [<span class="number">10</span> =&gt; <span class="string">&#x27;a&#x27;</span>, <span class="number">11</span> =&gt; <span class="string">&#x27;b&#x27;</span>, <span class="number">12</span> =&gt; <span class="string">&#x27;c&#x27;</span>];</span><br><span class="line">var_dump(<span class="variable">$a</span>, <span class="variable">$b</span>, <span class="variable">$c</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»“æœ</span></span><br><span class="line"><span class="keyword">string</span>(<span class="number">1</span>) <span class="string">&quot;a&quot;</span></span><br><span class="line"><span class="keyword">string</span>(<span class="number">1</span>) <span class="string">&quot;b&quot;</span></span><br><span class="line"><span class="keyword">string</span>(<span class="number">1</span>) <span class="string">&quot;c&quot;</span></span><br></pre></td></tr></table></figure>
<h1 id="æ··åˆé”®"><a href="#æ··åˆé”®" class="headerlink" title="æ··åˆé”®"></a>æ··åˆé”®</h1><blockquote>
<p>PHP 7 ä¸­ <code>list()</code> æ”¯æŒæ··åˆå½¢å¼çš„ <code>key</code></p>
</blockquote>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// PHP 5 ä¼šæŠ¥ PHP Notice:  Undefined offset: 0...</span></span><br><span class="line"><span class="keyword">list</span>(<span class="variable">$a</span>, <span class="variable">$b</span>, <span class="variable">$c</span>) = [<span class="number">1</span> =&gt; <span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;x&#x27;</span> =&gt; <span class="string">&#x27;b&#x27;</span>, <span class="number">2</span> =&gt; <span class="string">&#x27;c&#x27;</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">// PHP 7 å¤„ç†èµ·æ¥æ¯«æ— å‹åŠ›</span></span><br><span class="line"></span><br><span class="line">[<span class="number">10</span> =&gt; <span class="variable">$a</span>, <span class="string">&#x27;x&#x27;</span> =&gt; <span class="variable">$b</span>, <span class="number">12</span> =&gt; <span class="variable">$c</span>] = [<span class="number">10</span> =&gt; <span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;x&#x27;</span> =&gt; <span class="string">&#x27;b&#x27;</span>, <span class="number">12</span> =&gt; <span class="string">&#x27;c&#x27;</span>];</span><br><span class="line">var_dump(<span class="variable">$a</span>, <span class="variable">$b</span>, <span class="variable">$c</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»“æœ</span></span><br><span class="line"><span class="keyword">string</span>(<span class="number">1</span>) <span class="string">&quot;a&quot;</span></span><br><span class="line"><span class="keyword">string</span>(<span class="number">1</span>) <span class="string">&quot;b&quot;</span></span><br><span class="line"><span class="keyword">string</span>(<span class="number">1</span>) <span class="string">&quot;c&quot;</span></span><br></pre></td></tr></table></figure>
<h1 id="å¤åˆå½¢å¼"><a href="#å¤åˆå½¢å¼" class="headerlink" title="å¤åˆå½¢å¼"></a>å¤åˆå½¢å¼</h1><h2 id="é”®åä¸€è‡´"><a href="#é”®åä¸€è‡´" class="headerlink" title="é”®åä¸€è‡´"></a>é”®åä¸€è‡´</h2><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$array</span> = [</span><br><span class="line">    [<span class="string">&#x27;m&#x27;</span> =&gt; <span class="number">11</span>, <span class="string">&#x27;n&#x27;</span> =&gt; <span class="number">22</span>],</span><br><span class="line">    [<span class="string">&#x27;m&#x27;</span> =&gt; <span class="string">&#x27;hello&#x27;</span>, <span class="string">&#x27;n&#x27;</span> =&gt; <span class="string">&#x27;world&#x27;</span>],</span><br><span class="line">    [<span class="string">&#x27;m&#x27;</span> =&gt; <span class="literal">true</span>, <span class="string">&#x27;n&#x27;</span> =&gt; <span class="literal">false</span>],</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line">[</span><br><span class="line">    [<span class="string">&#x27;m&#x27;</span> =&gt; <span class="variable">$m1</span>, <span class="string">&#x27;n&#x27;</span> =&gt; <span class="variable">$n1</span>],</span><br><span class="line">    [<span class="string">&#x27;m&#x27;</span> =&gt; <span class="variable">$m2</span>, <span class="string">&#x27;n&#x27;</span> =&gt; <span class="variable">$n2</span>],</span><br><span class="line">    [<span class="string">&#x27;m&#x27;</span> =&gt; <span class="variable">$m3</span>, <span class="string">&#x27;n&#x27;</span> =&gt; <span class="variable">$n3</span>],</span><br><span class="line">]</span><br><span class="line">    = <span class="variable">$array</span>;</span><br><span class="line"></span><br><span class="line">var_dump(<span class="string">&quot;<span class="subst">$m1</span> <span class="subst">$n1</span>&quot;</span>, <span class="string">&quot;<span class="subst">$m2</span> <span class="subst">$n2</span>&quot;</span>, <span class="string">&quot;<span class="subst">$m3</span> <span class="subst">$n3</span>&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»“æœ</span></span><br><span class="line"><span class="keyword">string</span>(<span class="number">6</span>) <span class="string">&quot;11 22&quot;</span></span><br><span class="line"><span class="keyword">string</span>(<span class="number">12</span>) <span class="string">&quot;hello world&quot;</span></span><br><span class="line"><span class="keyword">string</span>(<span class="number">3</span>) <span class="string">&quot;1 &quot;</span></span><br></pre></td></tr></table></figure>
<h2 id="é”®åä¸åŒ"><a href="#é”®åä¸åŒ" class="headerlink" title="é”®åä¸åŒ"></a>é”®åä¸åŒ</h2><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$array</span> = [</span><br><span class="line">    <span class="string">&#x27;x&#x27;</span> =&gt; [<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>],</span><br><span class="line">    <span class="string">&#x27;y&#x27;</span> =&gt; [<span class="number">1</span>, <span class="number">2</span>],</span><br><span class="line">    <span class="string">&#x27;z&#x27;</span> =&gt; [<span class="literal">true</span>, <span class="literal">false</span>],</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line">[<span class="string">&#x27;x&#x27;</span> =&gt; [<span class="variable">$a</span>, <span class="variable">$b</span>], <span class="string">&#x27;y&#x27;</span> =&gt; [<span class="variable">$c</span>, <span class="variable">$d</span>], <span class="string">&#x27;z&#x27;</span> =&gt; [<span class="variable">$e</span>, <span class="variable">$f</span>]] = <span class="variable">$array</span>;</span><br><span class="line"></span><br><span class="line">var_dump(<span class="string">&quot;<span class="subst">$a</span> <span class="subst">$b</span>&quot;</span>, <span class="string">&quot;<span class="subst">$c</span> <span class="subst">$d</span>&quot;</span>, <span class="string">&quot;<span class="subst">$e</span> <span class="subst">$f</span>&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»“æœ</span></span><br><span class="line"><span class="keyword">string</span>(<span class="number">3</span>) <span class="string">&quot;a b&quot;</span></span><br><span class="line"><span class="keyword">string</span>(<span class="number">3</span>) <span class="string">&quot;1 2&quot;</span></span><br><span class="line"><span class="keyword">string</span>(<span class="number">2</span>) <span class="string">&quot;1 &quot;</span></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>php</category>
      </categories>
      <tags>
        <tag>php</tag>
      </tags>
  </entry>
  <entry>
    <title>PHP é€‰æ‹©æ’åº</title>
    <url>/2018/04/18/php-selection-sort/</url>
    <content><![CDATA[<p>é€‰æ‹©æ’åºåˆ†ä¸ºç®€å•é€‰æ‹©æ’åºã€æ ‘å½¢é€‰æ‹©æ’åºå’Œå †æ’åºä¸‰ç±»ï¼Œæ­¤ä¸‰ç±»ä¸­ï¼Œç®€å•é€‰æ‹©æ’åºæ˜¯æœ€ç®€å•ï¼Œä¹Ÿæ˜¯æœ€å¥½ç†è§£çš„ã€‚</p>
<span id="more"></span>
<h2 id="æ¦‚å¿µ"><a href="#æ¦‚å¿µ" class="headerlink" title="æ¦‚å¿µ"></a>æ¦‚å¿µ</h2><p>é€‰æ‹©æ’åº - <code>Selection Sort</code>ï¼šæ˜¯ä¸€ç§ç®€å•ç›´è§‚çš„æ’åºç®—æ³•ã€‚é¡¾åæ€æ„ï¼Œå°±æ˜¯ç›´æ¥ä»å¾…æ’åºæ•°ç»„é‡Œé€‰æ‹©ä¸€ä¸ªæœ€å°(æˆ–æœ€å¤§)çš„æ•°å­—ï¼Œæ¯æ¬¡éƒ½æ‹¿ä¸€ä¸ªæœ€å°æ•°å­—å‡ºæ¥ï¼Œé¡ºåºæ”¾å…¥æ–°æ•°ç»„ï¼Œç›´åˆ°å…¨éƒ¨æ‹¿å®Œ</p>
<h2 id="æ­¥éª¤"><a href="#æ­¥éª¤" class="headerlink" title="æ­¥éª¤"></a>æ­¥éª¤</h2><ol>
<li>åœ¨æœªæ’åºåºåˆ—ä¸­æ‰¾åˆ°æœ€å°ï¼ˆå¤§ï¼‰å…ƒç´ ï¼Œå­˜æ”¾åˆ°æ’åºåºåˆ—çš„èµ·å§‹ä½ç½®</li>
<li>ä»å‰©ä½™æœªæ’åºå…ƒç´ ä¸­ç»§ç»­å¯»æ‰¾æœ€å°ï¼ˆå¤§ï¼‰å…ƒç´ ï¼Œç„¶åæ”¾åˆ°å·²æ’åºåºåˆ—çš„æœ«å°¾</li>
<li>ä»¥æ­¤ç±»æ¨ï¼Œç›´åˆ°æ‰€æœ‰å…ƒç´ å‡æ’åºå®Œæ¯•</li>
</ol>
<h2 id="å®ç°"><a href="#å®ç°" class="headerlink" title="å®ç°"></a>å®ç°</h2><h3 id="æ–¹å¼ä¸€"><a href="#æ–¹å¼ä¸€" class="headerlink" title="æ–¹å¼ä¸€"></a>æ–¹å¼ä¸€</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SelectionSort</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ä¸»è¿è¡Œæ–¹æ³•</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> void</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">main</span>(<span class="params"></span>): <span class="title">void</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="variable">$random</span> = <span class="built_in">self</span>::random();</span><br><span class="line">        <span class="variable">$array</span> = <span class="built_in">self</span>::sort(<span class="variable">$random</span>);</span><br><span class="line">        print_r(<span class="variable">$array</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * é€‰æ‹©æ’åº</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> array $array</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> array</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">sort</span>(<span class="params"><span class="keyword">array</span> &amp;<span class="variable">$array</span></span>): <span class="title">array</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="variable">$count</span> = count(<span class="variable">$array</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="variable">$i</span> = <span class="number">0</span>; <span class="variable">$i</span> &lt; <span class="variable">$count</span>; <span class="variable">$i</span>++) &#123;</span><br><span class="line">            <span class="variable">$position</span> = <span class="variable">$i</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="variable">$j</span> = <span class="variable">$i</span> + <span class="number">1</span>; <span class="variable">$j</span> &lt; <span class="variable">$count</span>; <span class="variable">$j</span>++) &#123;</span><br><span class="line">                <span class="keyword">if</span> (<span class="built_in">self</span>::compare(<span class="variable">$array</span>[<span class="variable">$position</span>], <span class="variable">$array</span>[<span class="variable">$j</span>]) &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                    <span class="variable">$position</span> = <span class="variable">$j</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (<span class="variable">$position</span> !== <span class="variable">$i</span>) &#123;</span><br><span class="line">                <span class="built_in">self</span>::swap(<span class="variable">$array</span>[<span class="variable">$position</span>], <span class="variable">$array</span>[<span class="variable">$i</span>]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="variable">$array</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ¯”è¾ƒå¤§å°</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> int $x</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> int $y</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> int</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">compare</span>(<span class="params"><span class="keyword">int</span> <span class="variable">$x</span>, <span class="keyword">int</span> <span class="variable">$y</span></span>): <span class="title">int</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable">$x</span> &lt;=&gt; <span class="variable">$y</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * äº’æ¢ä½ç½®</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> int $x</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> int $y</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> void</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">swap</span>(<span class="params"><span class="keyword">int</span> &amp;<span class="variable">$x</span>, <span class="keyword">int</span> &amp;<span class="variable">$y</span></span>): <span class="title">void</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="variable">$x</span> !== <span class="variable">$y</span>) &#123;</span><br><span class="line">            <span class="variable">$t</span> = <span class="variable">$x</span>;</span><br><span class="line">            <span class="variable">$x</span> = <span class="variable">$y</span>;</span><br><span class="line">            <span class="variable">$y</span> = <span class="variable">$t</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ç”Ÿæˆéšæœºæ•°ç»„</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> int $low</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> int $high</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> int $num</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> array</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">random</span>(<span class="params"><span class="keyword">int</span> <span class="variable">$low</span> = <span class="number">1</span>, <span class="keyword">int</span> <span class="variable">$high</span> = <span class="number">9999</span>, <span class="keyword">int</span> <span class="variable">$num</span> = <span class="number">10</span></span>): <span class="title">array</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="variable">$num</span> = <span class="variable">$num</span> &gt; <span class="variable">$high</span> ? <span class="variable">$high</span> : <span class="variable">$num</span>;</span><br><span class="line">        <span class="variable">$range</span> = range(<span class="variable">$low</span>, <span class="variable">$high</span>);</span><br><span class="line">        <span class="variable">$array</span> = array_rand(array_flip(<span class="variable">$range</span>), <span class="variable">$num</span>);</span><br><span class="line">        shuffle(<span class="variable">$array</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="variable">$array</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">SelectionSort::main();</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»“æœ</span></span><br><span class="line"><span class="keyword">Array</span></span><br><span class="line">(</span><br><span class="line">    [<span class="number">0</span>] =&gt; <span class="number">312</span></span><br><span class="line">    [<span class="number">1</span>] =&gt; <span class="number">1124</span></span><br><span class="line">    [<span class="number">2</span>] =&gt; <span class="number">1267</span></span><br><span class="line">    [<span class="number">3</span>] =&gt; <span class="number">1884</span></span><br><span class="line">    [<span class="number">4</span>] =&gt; <span class="number">2609</span></span><br><span class="line">    [<span class="number">5</span>] =&gt; <span class="number">4177</span></span><br><span class="line">    [<span class="number">6</span>] =&gt; <span class="number">4773</span></span><br><span class="line">    [<span class="number">7</span>] =&gt; <span class="number">7728</span></span><br><span class="line">    [<span class="number">8</span>] =&gt; <span class="number">8237</span></span><br><span class="line">    [<span class="number">9</span>] =&gt; <span class="number">8963</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<h3 id="æ–¹å¼äºŒ"><a href="#æ–¹å¼äºŒ" class="headerlink" title="æ–¹å¼äºŒ"></a>æ–¹å¼äºŒ</h3><p>æ ‘å½¢é€‰æ‹©æ’åº - <code>Tree Selection Sort</code>ï¼šåˆåé”¦æ ‡èµ›æ’åºï¼Œæ˜¯ä¸€ç§æŒ‰ç…§é”¦æ ‡èµ›çš„æ€æƒ³è¿›è¡Œé€‰æ‹©æ’åºçš„æ–¹æ³•</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// è¿™ä¸ªç®—æ³•ç›®å‰æä¸å®šï¼Œé¢„ç•™ä½ç½®ï¼Œå¾…ä»¥åå†å®ç°</span></span><br></pre></td></tr></table></figure>
<h3 id="æ–¹å¼ä¸‰"><a href="#æ–¹å¼ä¸‰" class="headerlink" title="æ–¹å¼ä¸‰"></a>æ–¹å¼ä¸‰</h3><p>å †æ’åº - <code>Heap Sort</code>ï¼šæ˜¯æŒ‡åˆ©ç”¨å †è¿™ç§æ•°æ®ç»“æ„æ‰€è®¾è®¡çš„ä¸€ç§æ’åºç®—æ³•ã€‚å®ƒæ˜¯é€‰æ‹©æ’åºçš„ä¸€ç§ã€‚å¯ä»¥åˆ©ç”¨æ•°ç»„çš„ç‰¹ç‚¹å¿«é€Ÿå®šä½æŒ‡å®šç´¢å¼•çš„å…ƒç´ ã€‚å †åˆ†ä¸ºå¤§æ ¹å †å’Œå°æ ¹å †ï¼Œæ˜¯å®Œå…¨äºŒå‰æ ‘ã€‚å¤§æ ¹å †çš„è¦æ±‚æ˜¯æ¯ä¸ªèŠ‚ç‚¹çš„å€¼éƒ½ä¸å¤§äºå…¶çˆ¶èŠ‚ç‚¹çš„å€¼ã€‚åœ¨æ•°ç»„çš„éé™åºæ’åºä¸­ï¼Œéœ€è¦ä½¿ç”¨çš„å°±æ˜¯å¤§æ ¹å †ï¼Œå› ä¸ºæ ¹æ®å¤§æ ¹å †çš„è¦æ±‚å¯çŸ¥ï¼Œæœ€å¤§çš„å€¼ä¸€å®šåœ¨å †é¡¶</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// è¿™ä¸ªç®—æ³•ç›®å‰æä¸å®šï¼Œé¢„ç•™ä½ç½®ï¼Œå¾…ä»¥åå†å®ç°</span></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>php</category>
      </categories>
      <tags>
        <tag>php</tag>
        <tag>algorithm</tag>
      </tags>
  </entry>
  <entry>
    <title>PHP ä¸­å‘é€ HTTP è¯·æ±‚çš„æ–¹å¼</title>
    <url>/2018/06/21/php-send-http-request/</url>
    <content><![CDATA[<p>é€šå¸¸æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å‘é€ <code>HTTP</code> è¯·æ±‚é‡‡ç”¨ <code>PHP</code> å°è£…çš„ <code>cURL</code> æ‰©å±•å‡½æ•°æ¥å®ç°ã€‚</p>
<span id="more"></span>
<h2 id="cURL-æ–¹å¼"><a href="#cURL-æ–¹å¼" class="headerlink" title="cURL æ–¹å¼"></a>cURL æ–¹å¼</h2><h3 id="æ‰©å±•å‡½æ•°å®ç°"><a href="#æ‰©å±•å‡½æ•°å®ç°" class="headerlink" title="æ‰©å±•å‡½æ•°å®ç°"></a>æ‰©å±•å‡½æ•°å®ç°</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆå§‹åŒ–ä¸€ä¸ª cURL èµ„æºå¯¹è±¡ã€‚</span></span><br><span class="line"><span class="variable">$curl</span> = curl_init();</span><br><span class="line"></span><br><span class="line"><span class="variable">$options</span> = [</span><br><span class="line">    <span class="comment">// True å°† curl_exec() è·å–çš„ä¿¡æ¯ä»¥å­—ç¬¦ä¸²è¿”å›ï¼Œè€Œä¸æ˜¯ç›´æ¥è¾“å‡ºã€‚</span></span><br><span class="line">    CURLOPT_RETURNTRANSFER =&gt; <span class="literal">true</span>,</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç¦ç”¨æ—¶ä¸ä¼šå°†å¤´æ–‡ä»¶çš„ä¿¡æ¯ä½œä¸ºæ•°æ®æµè¾“å‡ºã€‚</span></span><br><span class="line">    CURLOPT_HEADER         =&gt; <span class="literal">false</span>,</span><br><span class="line"></span><br><span class="line">    <span class="comment">// True æ—¶å°†ä¼šæ ¹æ®æœåŠ¡å™¨è¿”å› HTTP å¤´ä¸­çš„ &quot;Location: &quot; é‡å®šå‘ã€‚</span></span><br><span class="line">    CURLOPT_FOLLOWLOCATION =&gt; <span class="literal">true</span>,</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¦‚æœä¸ºç©ºå­—ç¬¦ä¸² &quot;&quot;ï¼Œä¼šå‘é€æ‰€æœ‰æ”¯æŒçš„ç¼–ç ç±»å‹ã€‚</span></span><br><span class="line">    CURLOPT_ENCODING       =&gt; <span class="string">&#x27;&#x27;</span>,</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åœ¨ HTTP è¯·æ±‚ä¸­åŒ…å«ä¸€ä¸ª &quot;User-Agent: &quot; å¤´çš„å­—ç¬¦ä¸²ã€‚</span></span><br><span class="line">    CURLOPT_USERAGENT      =&gt; <span class="string">&#x27;spider&#x27;</span>,</span><br><span class="line"></span><br><span class="line">    <span class="comment">// True æ—¶å°†æ ¹æ® Location: é‡å®šå‘æ—¶ï¼Œè‡ªåŠ¨è®¾ç½® Header ä¸­çš„ Referer: ä¿¡æ¯ã€‚</span></span><br><span class="line">    CURLOPT_AUTOREFERER    =&gt; <span class="literal">true</span>,</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åœ¨å°è¯•è¿æ¥æ—¶ç­‰å¾…çš„ç§’æ•°ã€‚è®¾ç½®ä¸º 0ï¼Œåˆ™æ— é™ç­‰å¾…ã€‚</span></span><br><span class="line">    CURLOPT_CONNECTTIMEOUT =&gt; <span class="number">120</span>,</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å…è®¸ cURL å‡½æ•°æ‰§è¡Œçš„æœ€é•¿ç§’æ•°ã€‚</span></span><br><span class="line">    CURLOPT_TIMEOUT        =&gt; <span class="number">120</span>,</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æŒ‡å®šæœ€å¤šçš„ HTTP é‡å®šå‘æ¬¡æ•°ï¼Œè¿™ä¸ªé€‰é¡¹æ˜¯å’Œ CURLOPT_FOLLOWLOCATION ä¸€èµ·ä½¿ç”¨çš„ã€‚</span></span><br><span class="line">    CURLOPT_MAXREDIRS      =&gt; <span class="number">10</span>,</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å…¨éƒ¨æ•°æ®ä½¿ç”¨ HTTP åè®®ä¸­çš„ &quot;POST&quot; æ“ä½œæ¥å‘é€ã€‚</span></span><br><span class="line">    CURLOPT_POSTFIELDS     =&gt; <span class="string">&#x27;phone=your-phone&amp;password=your-password&#x27;</span>,</span><br><span class="line"></span><br><span class="line">    <span class="comment">// True æ—¶ä¼šå‘é€ POST è¯·æ±‚ï¼Œç±»å‹ä¸ºï¼šapplication/x-www-form-urlencodedï¼Œæ˜¯ HTML è¡¨å•æäº¤æ—¶æœ€å¸¸è§çš„ä¸€ç§ã€‚</span></span><br><span class="line">    CURLOPT_POST           =&gt; <span class="literal">true</span>,</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¯ç”¨ cURL éªŒè¯å¯¹ç­‰è¯ä¹¦ã€‚</span></span><br><span class="line">    CURLOPT_SSL_VERIFYPEER =&gt; <span class="literal">true</span>,</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ä¸æ£€æŸ¥æœåŠ¡å™¨ SSL è¯ä¹¦ä¸­çš„å…¬ç”¨åã€‚</span></span><br><span class="line">    CURLOPT_SSL_VERIFYHOST =&gt; <span class="number">0</span>,</span><br><span class="line"></span><br><span class="line">    <span class="comment">// False ç¦æ­¢ cURL éªŒè¯å¯¹ç­‰è¯ä¹¦ã€‚</span></span><br><span class="line">    CURLOPT_SSL_VERIFYPEER =&gt; <span class="literal">false</span>,</span><br><span class="line"></span><br><span class="line">    <span class="comment">// True ä¼šè¾“å‡ºæ‰€æœ‰çš„ä¿¡æ¯ï¼Œå†™å…¥åˆ° STDERRï¼Œæˆ–åœ¨ CURLOPT_STDERR ä¸­æŒ‡å®šçš„æ–‡ä»¶ã€‚</span></span><br><span class="line">    CURLOPT_VERBOSE        =&gt; <span class="literal">true</span>,</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è®¾ç½®ä½ éœ€è¦æŠ“å–çš„ URLã€‚</span></span><br><span class="line">    CURLOPT_URL            =&gt; <span class="string">&#x27;http://www.example.com/users/login&#x27;</span>,</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// è®¾ç½®å¤šä¸ª cURL ä¼ è¾“é€‰é¡¹ã€‚</span></span><br><span class="line">curl_setopt_array(<span class="variable">$curl</span>, <span class="variable">$options</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¿è¡Œ cURLï¼Œè¯·æ±‚ç½‘é¡µã€‚</span></span><br><span class="line"><span class="variable">$content</span> = curl_exec(<span class="variable">$curl</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable">$response</span> = [</span><br><span class="line">    <span class="string">&#x27;errno&#x27;</span>   =&gt; curl_errno(<span class="variable">$curl</span>),</span><br><span class="line">    <span class="string">&#x27;errmsg&#x27;</span>  =&gt; curl_error(<span class="variable">$curl</span>),</span><br><span class="line">    <span class="string">&#x27;header&#x27;</span>  =&gt; curl_getinfo(<span class="variable">$curl</span>),</span><br><span class="line">    <span class="string">&#x27;content&#x27;</span> =&gt; <span class="variable">$content</span>,</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="comment">// å…³é—­ cURL è¯·æ±‚ã€‚</span></span><br><span class="line">curl_close(<span class="variable">$curl</span>);</span><br><span class="line"></span><br><span class="line">print_r(<span class="variable">$response</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»“æœ</span></span><br><span class="line">*   Trying <span class="number">101.201</span>.xxx.xxx...</span><br><span class="line">* TCP_NODELAY set</span><br><span class="line">* Connected to www.example.com (<span class="number">101.201</span>.xxx.xxx) port <span class="number">80</span> (<span class="comment">#0)</span></span><br><span class="line">&gt; POST /users/login HTTP/<span class="number">1.1</span></span><br><span class="line">Host: www.example.com</span><br><span class="line">User-Agent: spider</span><br><span class="line">Accept: *<span class="comment">/*</span></span><br><span class="line"><span class="comment">Accept-Encoding: deflate, gzip</span></span><br><span class="line"><span class="comment">Content-Length: 41</span></span><br><span class="line"><span class="comment">Content-Type: application/x-www-form-urlencoded</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">* upload completely sent off: 41 out of 41 bytes</span></span><br><span class="line"><span class="comment">array(26) &#123;</span></span><br><span class="line"><span class="comment">  [&quot;url&quot;]=&gt;</span></span><br><span class="line"><span class="comment">  string(37) &quot;http://www.example.com/users/login&quot;</span></span><br><span class="line"><span class="comment">  [&quot;content_type&quot;]=&gt;</span></span><br><span class="line"><span class="comment">  string(24) &quot;text/html; charset=UTF-8&quot;</span></span><br><span class="line"><span class="comment">  [&quot;http_code&quot;]=&gt;</span></span><br><span class="line"><span class="comment">  int(200)</span></span><br><span class="line"><span class="comment">  [&quot;header_size&quot;]=&gt;</span></span><br><span class="line"><span class="comment">  int(463)</span></span><br><span class="line"><span class="comment">  [&quot;request_size&quot;]=&gt;</span></span><br><span class="line"><span class="comment">  int(231)</span></span><br><span class="line"><span class="comment">  [&quot;filetime&quot;]=&gt;</span></span><br><span class="line"><span class="comment">  int(-1)</span></span><br><span class="line"><span class="comment">  [&quot;ssl_verify_result&quot;]=&gt;</span></span><br><span class="line"><span class="comment">  int(0)</span></span><br><span class="line"><span class="comment">  [&quot;redirect_count&quot;]=&gt;</span></span><br><span class="line"><span class="comment">  int(0)</span></span><br><span class="line"><span class="comment">  [&quot;total_time&quot;]=&gt;</span></span><br><span class="line"><span class="comment">  float(0.224392)</span></span><br><span class="line"><span class="comment">  [&quot;namelookup_time&quot;]=&gt;</span></span><br><span class="line"><span class="comment">  float(0.015103)</span></span><br><span class="line"><span class="comment">  [&quot;connect_time&quot;]=&gt;</span></span><br><span class="line"><span class="comment">  float(0.030847)</span></span><br><span class="line"><span class="comment">  [&quot;pretransfer_time&quot;]=&gt;</span></span><br><span class="line"><span class="comment">  float(0.03103)</span></span><br><span class="line"><span class="comment">  [&quot;size_upload&quot;]=&gt;</span></span><br><span class="line"><span class="comment">  float(41)</span></span><br><span class="line"><span class="comment">  [&quot;size_download&quot;]=&gt;</span></span><br><span class="line"><span class="comment">  float(98)</span></span><br><span class="line"><span class="comment">  [&quot;speed_download&quot;]=&gt;</span></span><br><span class="line"><span class="comment">  float(436)</span></span><br><span class="line"><span class="comment">  [&quot;speed_upload&quot;]=&gt;</span></span><br><span class="line"><span class="comment">  float(182)</span></span><br><span class="line"><span class="comment">  [&quot;download_content_length&quot;]=&gt;</span></span><br><span class="line"><span class="comment">  float(-1)</span></span><br><span class="line"><span class="comment">  [&quot;upload_content_length&quot;]=&gt;</span></span><br><span class="line"><span class="comment">  float(41)</span></span><br><span class="line"><span class="comment">  [&quot;starttransfer_time&quot;]=&gt;</span></span><br><span class="line"><span class="comment">  float(0.224266)</span></span><br><span class="line"><span class="comment">  [&quot;redirect_time&quot;]=&gt;</span></span><br><span class="line"><span class="comment">  float(0)</span></span><br><span class="line"><span class="comment">  [&quot;redirect_url&quot;]=&gt;</span></span><br><span class="line"><span class="comment">  string(0) &quot;&quot;</span></span><br><span class="line"><span class="comment">  [&quot;primary_ip&quot;]=&gt;</span></span><br><span class="line"><span class="comment">  string(15) &quot;101.201.xxx.xxx&quot;</span></span><br><span class="line"><span class="comment">  [&quot;certinfo&quot;]=&gt;</span></span><br><span class="line"><span class="comment">  array(0) &#123;</span></span><br><span class="line"><span class="comment">  &#125;</span></span><br><span class="line"><span class="comment">  [&quot;primary_port&quot;]=&gt;</span></span><br><span class="line"><span class="comment">  int(80)</span></span><br><span class="line"><span class="comment">  [&quot;local_ip&quot;]=&gt;</span></span><br><span class="line"><span class="comment">  string(14) &quot;192.168.xxx.xxx&quot;</span></span><br><span class="line"><span class="comment">  [&quot;local_port&quot;]=&gt;</span></span><br><span class="line"><span class="comment">  int(52637)</span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment">&lt; HTTP/1.1 200 OK</span></span><br><span class="line"><span class="comment">&lt; Server: nginx</span></span><br><span class="line"><span class="comment">&lt; Date: Fri, 22 Jun 2018 01:43:45 GMT</span></span><br><span class="line"><span class="comment">&lt; Content-Type: text/html; charset=UTF-8</span></span><br><span class="line"><span class="comment">&lt; Transfer-Encoding: chunked</span></span><br><span class="line"><span class="comment">&lt; Connection: keep-alive</span></span><br><span class="line"><span class="comment">&lt; Vary: Accept-Encoding</span></span><br><span class="line"><span class="comment">&lt; Set-Cookie: SESSID=pau0p79qdallgaee2kcj963n16; expires=Fri, 22-Jun-2018 02:13:45 GMT; Max-Age=1800; path=/; HttpOnly</span></span><br><span class="line"><span class="comment">&lt; Expires: Thu, 19 Nov 1981 08:52:00 GMT</span></span><br><span class="line"><span class="comment">&lt; Cache-Control: no-store, no-cache, must-revalidate, post-check=0, pre-check=0</span></span><br><span class="line"><span class="comment">&lt; Pragma: no-cache</span></span><br><span class="line"><span class="comment">&lt; Content-Encoding: gzip</span></span><br><span class="line"><span class="comment">&lt;</span></span><br><span class="line"><span class="comment">* Connection #0 to host www.example.com left intact</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">Process finished with exit code 0</span></span><br></pre></td></tr></table></figure>
<h3 id="æ‰©å±•åŒ…å®ç°"><a href="#æ‰©å±•åŒ…å®ç°" class="headerlink" title="æ‰©å±•åŒ…å®ç°"></a>æ‰©å±•åŒ…å®ç°</h3><blockquote>
<ul>
<li><a href="https://github.com/guzzle/guzzle">Guzzle GitHub</a></li>
<li><a href="http://guzzlephp.org/">Guzzle Documentation</a></li>
</ul>
</blockquote>
<p>è¿™é‡Œæ¨èä½¿ç”¨ <code>Guzzle</code> æ‰©å±•åŒ…ï¼Œè¯šå®çš„è¯´ï¼Œä¹Ÿæ²¡æœ‰ç†ç”±ä¸ä½¿ç”¨å®ƒã€‚<code>Guzzle</code> æ˜¯ä¸€ä¸ª <code>PHP HTTP</code> å®¢æˆ·ç«¯ï¼Œå¯ä»¥è½»æ¾å‘é€ <code>HTTP</code> è¯·æ±‚ï¼Œå¹¶ä¸”å¯ä»¥è½»æ¾é›†æˆ <code>Web</code>æœåŠ¡ã€‚</p>
<h4 id="ç‰¹æ€§"><a href="#ç‰¹æ€§" class="headerlink" title="ç‰¹æ€§"></a>ç‰¹æ€§</h4><ul>
<li>ç”¨äºæ„å»ºæŸ¥è¯¢å­—ç¬¦ä¸²ï¼Œ<code>POST</code> è¯·æ±‚ï¼Œæµå¼ä¼ è¾“å¤§å‹ä¸Šä¼ ï¼Œæµå¼ä¼ è¾“å¤§å‹ä¸‹è½½ï¼Œä½¿ç”¨ <code>HTTP cookie</code>ï¼Œä¸Šä¼  <code>JSON</code> æ•°æ®ç­‰çš„ç®€å•æ¥å£ï¼Œç­‰ç­‰â€¦â€¦</li>
<li>å¯ä»¥ä½¿ç”¨ç›¸åŒçš„æ¥å£å‘é€åŒæ­¥å’Œå¼‚æ­¥è¯·æ±‚ã€‚</li>
<li>ä¸ºè¯·æ±‚ï¼Œå“åº”å’Œæµé€‰æ‹© <code>PSR-7</code> æ¥å£ã€‚ è¿™ä½¿æ‚¨å¯ä»¥ä¸ <code>Guzzle</code> ä¸€èµ·ä½¿ç”¨å…¶ä»– <code>PSR-7</code> å…¼å®¹åº“ã€‚</li>
<li>æŠ½è±¡å‡ºåº•å±‚çš„ <code>HTTP</code> ä¼ è¾“ï¼Œå…è®¸æ‚¨ç¼–å†™ç¯å¢ƒå’Œä¼ è¾“ä¸å¯çŸ¥çš„ä»£ç ; å³ä¸ä¾èµ–äº <code>cURL</code>ï¼Œ<code>PHP</code> æµï¼Œå¥—æ¥å­—æˆ–éé˜»å¡äº‹ä»¶å¾ªç¯ã€‚</li>
<li>ä¸­é—´ä»¶ç³»ç»Ÿå…è®¸æ‚¨å¢å¼ºå’Œç»„åˆå®¢æˆ·ç«¯è¡Œä¸ºã€‚</li>
</ul>
<h4 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ composer require guzzlehttp/guzzle</span><br></pre></td></tr></table></figure>
<h4 id="è¯·æ±‚"><a href="#è¯·æ±‚" class="headerlink" title="è¯·æ±‚"></a>è¯·æ±‚</h4><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">require</span> <span class="string">&#x27;../vendor/autoload.php&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="variable">$client</span> = <span class="keyword">new</span> \GuzzleHttp\Client();</span><br><span class="line">    <span class="variable">$request</span> = <span class="variable">$client</span>-&gt;request(<span class="string">&#x27;GET&#x27;</span>, <span class="string">&#x27;https://api.github.com/repos/guzzle/guzzle&#x27;</span>);</span><br><span class="line">&#125; <span class="keyword">catch</span> (\GuzzleHttp\<span class="built_in">Exception</span>\GuzzleException <span class="variable">$e</span>) &#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="variable">$e</span>-&gt;getMessage();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable">$response</span> = [</span><br><span class="line">    <span class="string">&#x27;status_code&#x27;</span>  =&gt; <span class="variable">$request</span>-&gt;getStatusCode(),</span><br><span class="line">    <span class="string">&#x27;content_type&#x27;</span> =&gt; <span class="variable">$request</span>-&gt;getHeaderLine(<span class="string">&#x27;content-type&#x27;</span>),</span><br><span class="line">    <span class="string">&#x27;body&#x27;</span>         =&gt; <span class="variable">$request</span>-&gt;getBody(),</span><br><span class="line">];</span><br><span class="line">print_r(<span class="variable">$response</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// å‘é€ä¸€ä¸ªå¼‚æ­¥è¯·æ±‚ã€‚</span></span><br><span class="line"><span class="variable">$request</span> = <span class="keyword">new</span> \GuzzleHttp\Psr7\Request(<span class="string">&#x27;GET&#x27;</span>, <span class="string">&#x27;https://www.baidu.com&#x27;</span>);</span><br><span class="line"><span class="variable">$promise</span> = <span class="variable">$client</span>-&gt;sendAsync(<span class="variable">$request</span>)-&gt;then(<span class="function"><span class="keyword">function</span> (<span class="params"><span class="variable">$response</span></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">echo</span> PHP_EOL, <span class="string">&#x27;I completed! &#x27;</span>, PHP_EOL, <span class="variable">$response</span>-&gt;getBody();</span><br><span class="line">&#125;);</span><br><span class="line"><span class="variable">$promise</span>-&gt;wait();</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»“æœ</span></span><br><span class="line"><span class="keyword">Array</span></span><br><span class="line">(</span><br><span class="line">    [status_code] =&gt; <span class="number">200</span></span><br><span class="line">    [content_type] =&gt; application/json; charset=utf-<span class="number">8</span></span><br><span class="line">    [body] =&gt; GuzzleHttp\Psr7\Stream <span class="keyword">Object</span></span><br><span class="line">        (</span><br><span class="line">            [stream:GuzzleHttp\Psr7\Stream:<span class="keyword">private</span>] =&gt; Resource id <span class="comment">#42</span></span><br><span class="line">            [size:GuzzleHttp\Psr7\Stream:<span class="keyword">private</span>] =&gt;</span><br><span class="line">            [seekable:GuzzleHttp\Psr7\Stream:<span class="keyword">private</span>] =&gt; <span class="number">1</span></span><br><span class="line">            [readable:GuzzleHttp\Psr7\Stream:<span class="keyword">private</span>] =&gt; <span class="number">1</span></span><br><span class="line">            [writable:GuzzleHttp\Psr7\Stream:<span class="keyword">private</span>] =&gt; <span class="number">1</span></span><br><span class="line">            [uri:GuzzleHttp\Psr7\Stream:<span class="keyword">private</span>] =&gt; php:<span class="comment">//temp</span></span><br><span class="line">            [customMetadata:GuzzleHttp\Psr7\Stream:<span class="keyword">private</span>] =&gt; <span class="keyword">Array</span></span><br><span class="line">                (</span><br><span class="line">                )</span><br><span class="line"></span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">I completed!</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">	&lt;script&gt;</span><br><span class="line">		location.replace(location.href.replace(<span class="string">&quot;https://&quot;</span>,<span class="string">&quot;http://&quot;</span>));</span><br><span class="line">	&lt;/script&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">	&lt;noscript&gt;&lt;meta http-equiv=<span class="string">&quot;refresh&quot;</span> content=<span class="string">&quot;0;url=http://www.baidu.com/&quot;</span>&gt;&lt;/noscript&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<h2 id="Stream-æ–¹å¼"><a href="#Stream-æ–¹å¼" class="headerlink" title="Stream æ–¹å¼"></a>Stream æ–¹å¼</h2><blockquote>
<p><a href="http://laravelacademy.org/post/7459.html">Stream çš„æ¦‚è¿°ä¸ä½¿ç”¨è¯¦è§£</a></p>
</blockquote>
<h3 id="PHP-å†…ç½®çš„-Stream-åŒ…è£…ç±»"><a href="#PHP-å†…ç½®çš„-Stream-åŒ…è£…ç±»" class="headerlink" title="PHP å†…ç½®çš„ Stream åŒ…è£…ç±»"></a>PHP å†…ç½®çš„ Stream åŒ…è£…ç±»</h3><h4 id="è·å–å·²æ³¨å†Œçš„å¥—æ¥å­—ä¼ è¾“åè®®åˆ—è¡¨"><a href="#è·å–å·²æ³¨å†Œçš„å¥—æ¥å­—ä¼ è¾“åè®®åˆ—è¡¨" class="headerlink" title="è·å–å·²æ³¨å†Œçš„å¥—æ¥å­—ä¼ è¾“åè®®åˆ—è¡¨"></a>è·å–å·²æ³¨å†Œçš„å¥—æ¥å­—ä¼ è¾“åè®®åˆ—è¡¨</h4><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line">print_r(stream_get_transports());</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»“æœ</span></span><br><span class="line"><span class="keyword">Array</span></span><br><span class="line">(</span><br><span class="line">    [<span class="number">0</span>] =&gt; tcp</span><br><span class="line">    [<span class="number">1</span>] =&gt; udp</span><br><span class="line">    [<span class="number">2</span>] =&gt; unix</span><br><span class="line">    [<span class="number">3</span>] =&gt; udg</span><br><span class="line">    [<span class="number">4</span>] =&gt; ssl</span><br><span class="line">    [<span class="number">5</span>] =&gt; tls</span><br><span class="line">    [<span class="number">6</span>] =&gt; tlsv1.<span class="number">0</span></span><br><span class="line">    [<span class="number">7</span>] =&gt; tlsv1.<span class="number">1</span></span><br><span class="line">    [<span class="number">8</span>] =&gt; tlsv1.<span class="number">2</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<h4 id="è·å–å·²æ³¨å†Œçš„æµç±»å‹"><a href="#è·å–å·²æ³¨å†Œçš„æµç±»å‹" class="headerlink" title="è·å–å·²æ³¨å†Œçš„æµç±»å‹"></a>è·å–å·²æ³¨å†Œçš„æµç±»å‹</h4><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line">print_r(stream_get_wrappers());</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»“æœ</span></span><br><span class="line"><span class="keyword">Array</span></span><br><span class="line">(</span><br><span class="line">    [<span class="number">0</span>] =&gt; https</span><br><span class="line">    [<span class="number">1</span>] =&gt; ftps</span><br><span class="line">    [<span class="number">2</span>] =&gt; compress.zlib</span><br><span class="line">    [<span class="number">3</span>] =&gt; compress.bzip2</span><br><span class="line">    [<span class="number">4</span>] =&gt; php</span><br><span class="line">    [<span class="number">5</span>] =&gt; file</span><br><span class="line">    [<span class="number">6</span>] =&gt; glob</span><br><span class="line">    [<span class="number">7</span>] =&gt; data</span><br><span class="line">    [<span class="number">8</span>] =&gt; http</span><br><span class="line">    [<span class="number">9</span>] =&gt; ftp</span><br><span class="line">    [<span class="number">10</span>] =&gt; phar</span><br><span class="line">    [<span class="number">11</span>] =&gt; zip</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<h4 id="è·å–å·²æ³¨å†Œçš„æ•°æ®æµè¿‡æ»¤å™¨åˆ—è¡¨"><a href="#è·å–å·²æ³¨å†Œçš„æ•°æ®æµè¿‡æ»¤å™¨åˆ—è¡¨" class="headerlink" title="è·å–å·²æ³¨å†Œçš„æ•°æ®æµè¿‡æ»¤å™¨åˆ—è¡¨"></a>è·å–å·²æ³¨å†Œçš„æ•°æ®æµè¿‡æ»¤å™¨åˆ—è¡¨</h4><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line">print_r(stream_get_filters());</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»“æœ</span></span><br><span class="line"><span class="keyword">Array</span></span><br><span class="line">(</span><br><span class="line">    [<span class="number">0</span>] =&gt; zlib.*</span><br><span class="line">    [<span class="number">1</span>] =&gt; bzip2.*</span><br><span class="line">    [<span class="number">2</span>] =&gt; convert.iconv.*</span><br><span class="line">    [<span class="number">3</span>] =&gt; <span class="keyword">string</span>.rot13</span><br><span class="line">    [<span class="number">4</span>] =&gt; <span class="keyword">string</span>.toupper</span><br><span class="line">    [<span class="number">5</span>] =&gt; <span class="keyword">string</span>.tolower</span><br><span class="line">    [<span class="number">6</span>] =&gt; <span class="keyword">string</span>.strip_tags</span><br><span class="line">    [<span class="number">7</span>] =&gt; convert.*</span><br><span class="line">    [<span class="number">8</span>] =&gt; consumed</span><br><span class="line">    [<span class="number">9</span>] =&gt; dechunk</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<h3 id="æµä¸Šä¸‹æ–‡"><a href="#æµä¸Šä¸‹æ–‡" class="headerlink" title="æµä¸Šä¸‹æ–‡"></a>æµä¸Šä¸‹æ–‡</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$data</span> = [<span class="string">&#x27;phone&#x27;</span> =&gt; <span class="string">&#x27;your-phone&#x27;</span>, <span class="string">&#x27;password&#x27;</span> =&gt; <span class="string">&#x27;your-password&#x27;</span>, <span class="string">&#x27;sign&#x27;</span> =&gt; <span class="string">&#x27;your-sign&#x27;</span>];</span><br><span class="line"><span class="variable">$data</span> = http_build_query(<span class="variable">$data</span>);</span><br><span class="line"><span class="variable">$options</span> = [</span><br><span class="line">    <span class="string">&#x27;http&#x27;</span> =&gt; [</span><br><span class="line">        <span class="string">&#x27;method&#x27;</span>  =&gt; <span class="string">&#x27;POST&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;header&#x27;</span>  =&gt; <span class="string">&#x27;Content-type: application/x-www-form-urlencoded\r\nContent-length:&#x27;</span> . mb_strlen(<span class="variable">$data</span>) . <span class="string">&quot;\r\n&quot;</span>,</span><br><span class="line">        <span class="string">&#x27;content&#x27;</span> =&gt; <span class="variable">$data</span>,</span><br><span class="line">    ],</span><br><span class="line">];</span><br><span class="line"><span class="variable">$context</span> = stream_context_create(<span class="variable">$options</span>);</span><br><span class="line"><span class="variable">$result</span> = file_get_contents(<span class="string">&#x27;http://www.example.com/users/login&#x27;</span>, <span class="literal">false</span>, <span class="variable">$context</span>);</span><br><span class="line"><span class="variable">$result</span> = json_decode(<span class="variable">$result</span>, <span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line">print_r(<span class="variable">$result</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»“æœ</span></span><br><span class="line"><span class="keyword">Array</span></span><br><span class="line">(</span><br><span class="line">    [status] =&gt;</span><br><span class="line">    [msg] =&gt; è´¦å·ä¸å­˜åœ¨æˆ–è¢«ç¦ç”¨</span><br><span class="line">    [data] =&gt; <span class="keyword">Array</span></span><br><span class="line">        (</span><br><span class="line">        )</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<h3 id="æµè¿‡æ»¤å™¨"><a href="#æµè¿‡æ»¤å™¨" class="headerlink" title="æµè¿‡æ»¤å™¨"></a>æµè¿‡æ»¤å™¨</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ touch test.txt</span><br><span class="line">$ vim test.txt</span><br><span class="line">HELLO</span><br><span class="line">WORLD</span><br><span class="line">THIS IS A TEST</span><br></pre></td></tr></table></figure>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$handle</span> = fopen(<span class="string">&#x27;./test.txt&#x27;</span>, <span class="string">&#x27;rb&#x27;</span>);</span><br><span class="line">stream_filter_append(<span class="variable">$handle</span>, <span class="string">&#x27;string.tolower&#x27;</span>);</span><br><span class="line"><span class="keyword">while</span> (feof(<span class="variable">$handle</span>) !== <span class="literal">true</span>) &#123;</span><br><span class="line">    <span class="keyword">echo</span> fgets(<span class="variable">$handle</span>);</span><br><span class="line">&#125;</span><br><span class="line">fclose(<span class="variable">$handle</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»“æœ</span></span><br><span class="line">hello</span><br><span class="line">world</span><br><span class="line">this is a test</span><br></pre></td></tr></table></figure>
<h2 id="Socket-æ–¹å¼"><a href="#Socket-æ–¹å¼" class="headerlink" title="Socket æ–¹å¼"></a>Socket æ–¹å¼</h2><h3 id="ç®€å•è¯·æ±‚"><a href="#ç®€å•è¯·æ±‚" class="headerlink" title="ç®€å•è¯·æ±‚"></a>ç®€å•è¯·æ±‚</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$fp</span> = fsockopen(<span class="string">&#x27;www.baidu.com&#x27;</span>, <span class="number">80</span>, <span class="variable">$errno</span>, <span class="variable">$errstr</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (! <span class="variable">$fp</span>) &#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;<span class="subst">$errstr</span> (<span class="subst">$errno</span>)&lt;br /&gt;\n&quot;</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="variable">$out</span> = <span class="string">&quot;GET / HTTP/1.1\r\n&quot;</span>;</span><br><span class="line">    <span class="variable">$out</span> .= <span class="string">&quot;Host: www.baidu.com\r\n&quot;</span>;</span><br><span class="line">    <span class="variable">$out</span> .= <span class="string">&quot;Connection: Close\r\n\r\n&quot;</span>;</span><br><span class="line">    fwrite(<span class="variable">$fp</span>, <span class="variable">$out</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> (! feof(<span class="variable">$fp</span>)) &#123;</span><br><span class="line">        <span class="keyword">echo</span> fgets(<span class="variable">$fp</span>, <span class="number">128</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    fclose(<span class="variable">$fp</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»“æœ</span></span><br><span class="line">HTTP/<span class="number">1.1</span> <span class="number">200</span> OK</span><br><span class="line">Accept-Ranges: bytes</span><br><span class="line">Cache-Control: no-cache</span><br><span class="line">Content-Length: <span class="number">14615</span></span><br><span class="line">Content-Type: text/html</span><br><span class="line">Date: Fri, <span class="number">22</span> Jun <span class="number">2018</span> <span class="number">03</span>:<span class="number">07</span>:<span class="number">09</span> GMT</span><br><span class="line">Last-Modified: Mon, <span class="number">11</span> Jun <span class="number">2018</span> <span class="number">11</span>:<span class="number">19</span>:<span class="number">00</span> GMT</span><br><span class="line">P3p: CP=<span class="string">&quot; OTI DSP COR IVA OUR IND COM &quot;</span></span><br><span class="line">Pragma: no-cache</span><br><span class="line">Server: BWS/<span class="number">1.1</span></span><br><span class="line">Set-Cookie: BAIDUID=CB118091B64A7DB3972039E431BB631D:FG=<span class="number">1</span>; expires=Thu, <span class="number">31</span>-Dec-<span class="number">37</span> <span class="number">23</span>:<span class="number">55</span>:<span class="number">55</span> GMT; max-age=<span class="number">2147483647</span>; path=/; domain=.baidu.com</span><br><span class="line">Set-Cookie: BIDUPSID=CB118091B64A7DB3972039E431BB631D; expires=Thu, <span class="number">31</span>-Dec-<span class="number">37</span> <span class="number">23</span>:<span class="number">55</span>:<span class="number">55</span> GMT; max-age=<span class="number">2147483647</span>; path=/; domain=.baidu.com</span><br><span class="line">Set-Cookie: PSTM=<span class="number">1529636829</span>; expires=Thu, <span class="number">31</span>-Dec-<span class="number">37</span> <span class="number">23</span>:<span class="number">55</span>:<span class="number">55</span> GMT; max-age=<span class="number">2147483647</span>; path=/; domain=.baidu.com</span><br><span class="line">Vary: Accept-Encoding</span><br><span class="line">X-Ua-Compatible: IE=Edge,chrome=<span class="number">1</span></span><br><span class="line">Connection: close</span><br><span class="line"></span><br><span class="line">&lt;!DOCTYPE html&gt;&lt;!--STATUS OK--&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;...&lt;/head&gt;</span><br><span class="line">&lt;body&gt;...&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<h3 id="ç®€å•é€šä¿¡"><a href="#ç®€å•é€šä¿¡" class="headerlink" title="ç®€å•é€šä¿¡"></a>ç®€å•é€šä¿¡</h3><p>åˆ›å»º TCP Socket æœåŠ¡å™¨</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line">error_reporting(E_ALL);</span><br><span class="line"></span><br><span class="line">set_time_limit(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">ob_implicit_flush();</span><br><span class="line"></span><br><span class="line"><span class="variable">$host</span> = <span class="string">&#x27;127.0.0.1&#x27;</span>;</span><br><span class="line"><span class="variable">$port</span> = <span class="number">9004</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ›å»ºä¸€ä¸ª TCP Socketã€‚</span></span><br><span class="line"><span class="variable">$socket</span> = socket_create(</span><br><span class="line">    AF_INET,</span><br><span class="line">    SOCK_STREAM,</span><br><span class="line">    SOL_TCP</span><br><span class="line">) <span class="keyword">or</span> <span class="keyword">die</span>(<span class="string">&#x27;socket_create() failed: &#x27;</span> . socket_strerror(socket_last_error()));</span><br><span class="line"></span><br><span class="line"><span class="comment">// åœ¨å¥—æ¥å­—èµ„æºä¸Šè®¾ç½®é˜»å¡æ¨¡å¼ã€‚</span></span><br><span class="line">socket_set_block(<span class="variable">$socket</span>) <span class="keyword">or</span> <span class="keyword">die</span>(<span class="string">&#x27;socket_set_block() failed: &#x27;</span> . socket_strerror(socket_last_error(<span class="variable">$socket</span>)));</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»™å¥—æ¥å­—ç»‘å®šåå­—ã€‚</span></span><br><span class="line">socket_bind(<span class="variable">$socket</span>, <span class="variable">$host</span>, <span class="variable">$port</span>) <span class="keyword">or</span> <span class="keyword">die</span>(<span class="string">&#x27;socket_bind() failed: &#x27;</span> . socket_strerror(socket_last_error(<span class="variable">$socket</span>)));</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¾¦å¬å¥—æ¥å­—ä¸Šçš„è¿æ¥ã€‚</span></span><br><span class="line">socket_listen(<span class="variable">$socket</span>, <span class="number">5</span>) <span class="keyword">or</span> <span class="keyword">die</span>(<span class="string">&#x27;socket_listen() failed: &#x27;</span> . socket_strerror(socket_last_error(<span class="variable">$socket</span>)));</span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;Listening the socket on <span class="subst">$host</span>:<span class="subst">$port</span> ... &quot;</span>, PHP_EOL;</span><br><span class="line"></span><br><span class="line"><span class="variable">$clientId</span> = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> ((<span class="variable">$client</span> = socket_accept(<span class="variable">$socket</span>)) &lt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&#x27;socket_accept() failed: &#x27;</span> . socket_strerror(socket_last_error(<span class="variable">$client</span>));</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="variable">$clientId</span>++;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&#x27;Client #&#x27;</span> . <span class="variable">$clientId</span> . <span class="string">&#x27;: Connect&#x27;</span>, PHP_EOL;</span><br><span class="line"></span><br><span class="line">    <span class="variable">$welcome</span> = <span class="string">&quot;\nWelcome to the PHP Socket Server. \n&quot;</span> .</span><br><span class="line">        <span class="string">&quot;To quit client type &#x27;quit&#x27;. To shut down the server type &#x27;shutdown&#x27;.\n&quot;</span>;</span><br><span class="line">    socket_write(<span class="variable">$client</span>, <span class="variable">$welcome</span>, strlen(<span class="variable">$welcome</span>));</span><br><span class="line"></span><br><span class="line">    <span class="variable">$curBuf</span> = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">    <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="literal">false</span> === (<span class="variable">$buf</span> = socket_read(<span class="variable">$client</span>, <span class="number">2048</span>))) &#123;</span><br><span class="line">            <span class="keyword">echo</span> <span class="string">&#x27;socket_read() failed: &#x27;</span> . socket_strerror(socket_last_error(<span class="variable">$client</span>)) . PHP_EOL;</span><br><span class="line">            <span class="keyword">break</span> <span class="number">2</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (<span class="variable">$buf</span> === <span class="string">&quot;\r\n&quot;</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (<span class="variable">$curBuf</span> === <span class="string">&quot;quit\r\n&quot;</span>) &#123;</span><br><span class="line">                <span class="keyword">echo</span> <span class="string">&#x27;Client #&#x27;</span> . <span class="variable">$clientId</span> . <span class="string">&#x27;: Disconnect&#x27;</span>, PHP_EOL;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125; <span class="keyword">elseif</span> (<span class="variable">$curBuf</span> === <span class="string">&quot;shutdown\r\n&quot;</span>) &#123;</span><br><span class="line">                <span class="keyword">echo</span> <span class="string">&#x27;Client #&#x27;</span> . <span class="variable">$clientId</span> . <span class="string">&#x27;: Shutdown server&#x27;</span>, PHP_EOL;</span><br><span class="line">                socket_close(<span class="variable">$client</span>);</span><br><span class="line">                <span class="keyword">break</span> <span class="number">2</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="variable">$buffer</span> = <span class="string">&#x27;Output: &#x27;</span> . ucwords(str_replace(<span class="string">&quot;\r\n&quot;</span>, <span class="string">&#x27; &#x27;</span>, <span class="variable">$curBuf</span>)) . PHP_EOL;</span><br><span class="line">                socket_write(<span class="variable">$client</span>, <span class="variable">$buffer</span>, strlen(<span class="variable">$buffer</span>));</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">echo</span> <span class="string">&#x27;Client #&#x27;</span> . <span class="variable">$clientId</span> . <span class="string">&#x27;: &#x27;</span> . <span class="variable">$curBuf</span> . PHP_EOL;</span><br><span class="line">            <span class="variable">$curBuf</span> = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="variable">$curBuf</span> .= <span class="variable">$buf</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    socket_close(<span class="variable">$client</span>);</span><br><span class="line">&#125;</span><br><span class="line">socket_close(<span class="variable">$socket</span>);</span><br></pre></td></tr></table></figure>
<p>è¿è¡Œï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ php server.php</span><br><span class="line"></span><br><span class="line">// é‡å¯ä¸€ä¸ªç»ˆç«¯çª—å£ï¼Œå®‰è£… telnet</span><br><span class="line">$ brew install telnet</span><br><span class="line"></span><br><span class="line">// ä½¿ç”¨ telnet è¿›è¡Œæµ‹è¯•</span><br><span class="line">$ telnet 127.0.0.1 9004</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>php</category>
      </categories>
      <tags>
        <tag>php</tag>
      </tags>
  </entry>
  <entry>
    <title>PHP ä¸­çš„æµ…å…‹éš†å’Œæ·±å…‹éš†</title>
    <url>/2018/04/27/php-shallow-and-deep-clone/</url>
    <content><![CDATA[<p>å˜é‡æœ‰å€¼ä¼ é€’å’Œå¼•ç”¨ä¼ é€’ï¼Œå…¶å®ï¼Œå¯¹è±¡ä¹Ÿå¦‚æ­¤ï¼Œæ‰€ä»¥ï¼Œå¯¹è±¡æœ‰æµ…å…‹éš†å’Œæ·±å…‹éš†è¿™ä¹ˆä¸€è¯´ã€‚æµ…å…‹éš†ä¹Ÿå«æµ…å¤åˆ¶æˆ–æµ…æ‹·è´ï¼Œæ·±å…‹éš†ä¹Ÿå«æ·±å¤åˆ¶æˆ–æ·±æ‹·è´ã€‚å”‰ï¼Œåç§°å¤åç§°ï¼Œåç§°ä½•å…¶å¤šï¼Ÿ</p>
<span id="more"></span>
<h1 id="æµ…å…‹éš†"><a href="#æµ…å…‹éš†" class="headerlink" title="æµ…å…‹éš†"></a>æµ…å…‹éš†</h1><blockquote>
<p><a href="http://php.net/manual/zh/language.references.php">å¼•ç”¨çš„è§£é‡Šï¼Œå®˜æ–¹è¯´çš„æœ€é è°±</a></p>
</blockquote>
<div class="note danger">
            <p>è‡ª <code>PHP 5</code> èµ·ï¼Œ<code>new</code> è¿ç®—ç¬¦è‡ªåŠ¨è¿”å›ä¸€ä¸ªå¼•ç”¨</p>
          </div>
<p>æµ…å…‹éš†åœ¨èµ‹å€¼æ—¶ï¼Œå¼•ç”¨èµ‹å€¼ï¼Œç›¸å½“äºå–äº†ä¸€ä¸ªåˆ«åã€‚å¯¹å…¶ä¸­ä¸€ä¸ªçš„ä¿®æ”¹ï¼Œä¼šå½±å“åˆ°å¦ä¸€ä¸ª</p>
<h2 id="èµ‹å€¼"><a href="#èµ‹å€¼" class="headerlink" title="èµ‹å€¼"></a>èµ‹å€¼</h2><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="variable">$name</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">setName</span>(<span class="params"><span class="keyword">string</span> <span class="variable">$name</span></span>): <span class="title">self</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;name = <span class="variable">$name</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">$this</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getName</span>(<span class="params"></span>): <span class="title">string</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">$this</span>-&gt;name;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable">$jack1</span> = <span class="keyword">new</span> Student();</span><br><span class="line"><span class="variable">$jack1</span>-&gt;setName(<span class="string">&#x27;Jack 1&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable">$jack2</span> = <span class="variable">$jack1</span>;</span><br><span class="line"><span class="variable">$jack2</span>-&gt;setName(<span class="string">&#x27;Jack 2&#x27;</span>);</span><br><span class="line"></span><br><span class="line">var_dump(<span class="variable">$jack1</span>);</span><br><span class="line">var_dump(<span class="variable">$jack2</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»“æœ</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span>#1 (1) </span>&#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="variable">$name</span> =&gt;</span><br><span class="line">  <span class="keyword">string</span>(<span class="number">6</span>) <span class="string">&quot;Jack 2&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span>#1 (1) </span>&#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="variable">$name</span> =&gt;</span><br><span class="line">  <span class="keyword">string</span>(<span class="number">6</span>) <span class="string">&quot;Jack 2&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åœ¨ä»¥ä¸Šçš„åœºæ™¯ä¸­ï¼Œæ— è®ºä½ ä¿®æ”¹å“ªä¸ª <code>Jack</code>ï¼Œéƒ½ä¼šå½±å“åˆ°å¦ä¸€ä¸ªå¯¹è±¡ï¼Œå½“ç„¶æˆ‘è¿™æ ·è¯´ï¼Œå¯èƒ½æœ‰äº›äººä¸æœï¼Œæ¯”å¦‚ï¼š</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="variable">$name</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">setName</span>(<span class="params"><span class="keyword">string</span> <span class="variable">$name</span></span>): <span class="title">self</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;name = <span class="variable">$name</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">$this</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getName</span>(<span class="params"></span>): <span class="title">string</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">$this</span>-&gt;name;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable">$jack1</span> = <span class="keyword">new</span> Student();</span><br><span class="line"><span class="variable">$jack1</span>-&gt;setName(<span class="string">&#x27;Jack 1&#x27;</span>);</span><br><span class="line"></span><br><span class="line">var_dump(<span class="variable">$jack1</span>); <span class="comment">// è¿™å„¿è°ƒæ•´äº†ä¸‹æ‰§è¡Œé¡ºåº</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$jack2</span> = <span class="variable">$jack1</span>;</span><br><span class="line"><span class="variable">$jack2</span>-&gt;setName(<span class="string">&#x27;Jack 2&#x27;</span>);</span><br><span class="line"></span><br><span class="line">var_dump(<span class="variable">$jack2</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»“æœ</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span>#1 (1) </span>&#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="variable">$name</span> =&gt;</span><br><span class="line">  <span class="keyword">string</span>(<span class="number">6</span>) <span class="string">&quot;Jack 1&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span>#1 (1) </span>&#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="variable">$name</span> =&gt;</span><br><span class="line">  <span class="keyword">string</span>(<span class="number">6</span>) <span class="string">&quot;Jack 2&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>çœ‹åˆ°äº†å—ï¼Ÿä¸¤ä¸ª <code>Jack</code> çš„å­¦ç”Ÿåç§°å°±æ˜¯ä¸ä¸€æ ·ã€‚æ„Ÿè§‰åƒæ˜¯è¢«æ‰“è„¸äº†ï¼Œå¦‚æœä½ å† <code>$jack2</code> èµ‹å€¼åå†æ‰“å°ä¸€ä¸‹ <code>$jack1</code> è¯•è¯•ï¼Œçœ‹è°èƒ½ç¬‘åˆ°æœ€å</p>
<h2 id="å…‹éš†"><a href="#å…‹éš†" class="headerlink" title="å…‹éš†"></a>å…‹éš†</h2><div class="note danger">
            <p>ä½¿ç”¨ <code>clone</code> æ“ä½œå¤åˆ¶å¯¹è±¡æ—¶ï¼Œå½“è¢«å¤åˆ¶çš„å¯¹è±¡æœ‰å¯¹å…¶å®ƒå¯¹è±¡çš„å¼•ç”¨çš„æ—¶å€™ï¼Œå¼•ç”¨çš„å¯¹è±¡å°†ä¸ä¼šè¢«å¤åˆ¶</p>
          </div>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="variable">$name</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">setName</span>(<span class="params"><span class="keyword">string</span> <span class="variable">$name</span></span>): <span class="title">self</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;name = <span class="variable">$name</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">$this</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getName</span>(<span class="params"></span>): <span class="title">string</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">$this</span>-&gt;name;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Administration</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="variable">$classLeader</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">setClassLeader</span>(<span class="params">Student <span class="variable">$student</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;classLeader = <span class="variable">$student</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">$this</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> \Student</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getClassLeader</span>(<span class="params"></span>): <span class="title">Student</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">$this</span>-&gt;classLeader;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable">$jack</span> = <span class="keyword">new</span> Student();</span><br><span class="line"><span class="variable">$jack</span>-&gt;setName(<span class="string">&#x27;Jack&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable">$admin1</span> = <span class="keyword">new</span> Administration();</span><br><span class="line"><span class="variable">$admin1</span>-&gt;setClassLeader(<span class="variable">$jack</span>);</span><br><span class="line"><span class="variable">$admin2</span> = <span class="keyword">clone</span> <span class="variable">$admin1</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable">$admin2</span>-&gt;getClassLeader()-&gt;setName(<span class="string">&#x27;Lucy&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$admin1</span>-&gt;getClassLeader()-&gt;getName(), PHP_EOL, <span class="variable">$admin2</span>-&gt;getClassLeader()-&gt;getName();</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»“æœ</span></span><br><span class="line">Lucy</span><br><span class="line">Lucy</span><br></pre></td></tr></table></figure>
<p>æ“è›‹å‘€ï¼Œ<code>$admin1-&gt;getClassLeader()</code> å’Œ <code>$admin2-&gt;getClassLeader()</code> å±…ç„¶éƒ½æŒ‡å‘åŒä¸€ä¸ªå¯¹è±¡ã€‚ä½† <code>$admin1</code> å’Œ <code>$admin2</code> éƒ½æ˜¯è´§çœŸä»·å®çš„ä¸¤ä¸ªç‹¬ç«‹å¯¹è±¡ï¼Œå”¯ä¸€çš„é—æ†¾æ˜¯ä»–ä»¬çš„å±æ€§å‡ºå–äº†ä»–ä»¬ï¼Œçœ‹æ¥è¿™ä¹Ÿæ˜¯ä¸ªæµ…å¤åˆ¶</p>
<p>æ‰€ä»¥ï¼Œæµ…å…‹éš†æ—¶ï¼Œè¢«èµ‹å€¼å¯¹è±¡çš„æ‰€æœ‰å˜é‡éƒ½è¿˜ä¸åŸæ¥å¯¹è±¡æœ‰ç›¸åŒçš„å€¼ï¼Œè€Œæ‰€æœ‰çš„å¯¹å…¶ä»–å¯¹è±¡çš„å¼•ç”¨éƒ½ä»ç„¶æŒ‡å‘åŸæ¥çš„å¯¹è±¡</p>
<h1 id="æ·±å…‹éš†"><a href="#æ·±å…‹éš†" class="headerlink" title="æ·±å…‹éš†"></a>æ·±å…‹éš†</h1><h2 id="æ–¹æ¡ˆä¸€"><a href="#æ–¹æ¡ˆä¸€" class="headerlink" title="æ–¹æ¡ˆä¸€"></a>æ–¹æ¡ˆä¸€</h2><p>åŸºäºé­”æœ¯å˜é‡ <code>__clone()</code> çš„å®ç°</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="variable">$name</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">setName</span>(<span class="params"><span class="keyword">string</span> <span class="variable">$name</span></span>): <span class="title">self</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;name = <span class="variable">$name</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">$this</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getName</span>(<span class="params"></span>): <span class="title">string</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">$this</span>-&gt;name;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Administration</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="variable">$classLeader</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__clone</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;classLeader = <span class="keyword">clone</span> <span class="keyword">$this</span>-&gt;classLeader;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">setClassLeader</span>(<span class="params">Student <span class="variable">$student</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;classLeader = <span class="variable">$student</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">$this</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> \Student</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getClassLeader</span>(<span class="params"></span>): <span class="title">Student</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">$this</span>-&gt;classLeader;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable">$jack</span> = <span class="keyword">new</span> Student();</span><br><span class="line"><span class="variable">$jack</span>-&gt;setName(<span class="string">&#x27;Jack&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable">$admin1</span> = <span class="keyword">new</span> Administration();</span><br><span class="line"><span class="variable">$admin1</span>-&gt;setClassLeader(<span class="variable">$jack</span>);</span><br><span class="line"><span class="variable">$admin2</span> = <span class="keyword">clone</span> <span class="variable">$admin1</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable">$admin2</span>-&gt;getClassLeader()-&gt;setName(<span class="string">&#x27;Lucy&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">print</span> <span class="variable">$admin1</span>-&gt;getClassLeader()-&gt;getName();</span><br><span class="line"><span class="keyword">print</span> PHP_EOL;</span><br><span class="line"><span class="keyword">print</span> <span class="variable">$admin2</span>-&gt;getClassLeader()-&gt;getName();</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»“æœ</span></span><br><span class="line">Jack</span><br><span class="line">Lucy</span><br></pre></td></tr></table></figure>
<h2 id="æ–¹æ¡ˆäºŒ"><a href="#æ–¹æ¡ˆäºŒ" class="headerlink" title="æ–¹æ¡ˆäºŒ"></a>æ–¹æ¡ˆäºŒ</h2><p>åˆ©ç”¨ä¸²è¡ŒåŒ–åšæ·±å¤åˆ¶</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="variable">$name</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">setName</span>(<span class="params"><span class="keyword">string</span> <span class="variable">$name</span></span>): <span class="title">self</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;name = <span class="variable">$name</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">$this</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getName</span>(<span class="params"></span>): <span class="title">string</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">$this</span>-&gt;name;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Administration</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="variable">$classLeader</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">setClassLeader</span>(<span class="params">Student <span class="variable">$student</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;classLeader = <span class="variable">$student</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">$this</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> \Student</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getClassLeader</span>(<span class="params"></span>): <span class="title">Student</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">$this</span>-&gt;classLeader;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable">$jack</span> = <span class="keyword">new</span> Student();</span><br><span class="line"><span class="variable">$jack</span>-&gt;setName(<span class="string">&#x27;Jack&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable">$admin1</span> = <span class="keyword">new</span> Administration();</span><br><span class="line"><span class="variable">$admin1</span>-&gt;setClassLeader(<span class="variable">$jack</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">/** <span class="doctag">@var</span> \Administration $admin2 */</span></span><br><span class="line"><span class="variable">$admin2</span> = unserialize(serialize(<span class="variable">$admin1</span>));</span><br><span class="line"></span><br><span class="line"><span class="variable">$admin2</span>-&gt;getClassLeader()-&gt;setName(<span class="string">&#x27;Lucy&#x27;</span>);</span><br><span class="line"></span><br><span class="line">print_r([</span><br><span class="line">    <span class="variable">$admin1</span>-&gt;getClassLeader()-&gt;getName(),</span><br><span class="line">    <span class="variable">$admin2</span>-&gt;getClassLeader()-&gt;getName(),</span><br><span class="line">]);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»“æœ</span></span><br><span class="line"><span class="keyword">Array</span></span><br><span class="line">(</span><br><span class="line">    [<span class="number">0</span>] =&gt; Jack</span><br><span class="line">    [<span class="number">1</span>] =&gt; Lucy</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p>å½“ç„¶ï¼Œåˆ©ç”¨ä¸²è¡ŒåŒ–çš„è¿™ç§æ–¹æ¡ˆä¹Ÿå¯ä»¥å°è£…åˆ° <code>__clone()</code> æ–¹æ³•ä¸­</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__clone</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">foreach</span>(<span class="keyword">$this</span> <span class="keyword">as</span> <span class="variable">$key</span> =&gt; <span class="variable">$val</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (is_object(<span class="variable">$val</span>) || (\is_array(<span class="variable">$val</span>))) &#123;</span><br><span class="line">            <span class="keyword">$this</span>-&gt;&#123;<span class="variable">$key</span>&#125; = unserialize(serialize(<span class="variable">$val</span>));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ‰€ä»¥ï¼Œæ·±å…‹éš†æŠŠå¼•ç”¨å¯¹è±¡çš„å˜é‡æŒ‡å‘å¤åˆ¶è¿‡çš„æ–°å¯¹è±¡ï¼Œè€Œä¸æ˜¯åŸæœ‰çš„è¢«å¼•ç”¨çš„å¯¹è±¡</p>
]]></content>
      <categories>
        <category>php</category>
      </categories>
      <tags>
        <tag>php</tag>
      </tags>
  </entry>
  <entry>
    <title>Swoole èµ·æ­¥</title>
    <url>/2019/10/27/php-swoole-get-started/</url>
    <content><![CDATA[<p><img src="/images/2019/201910271404.png" alt="201910271404.png"></p>
<p>Swoole è™½ç„¶æ˜¯æ ‡å‡†çš„ PHP æ‰©å±•ï¼Œå®é™…ä¸Šä¸æ™®é€šçš„æ‰©å±•ä¸åŒã€‚æ™®é€šçš„æ‰©å±•åªæ˜¯æä¾›ä¸€ä¸ªåº“å‡½æ•°ã€‚è€Œ Swoole æ‰©å±•åœ¨è¿è¡Œåä¼šæ¥ç®¡ PHP çš„æ§åˆ¶æƒï¼Œè¿›å…¥äº‹ä»¶å¾ªç¯ã€‚å½“ IO äº‹ä»¶å‘ç”Ÿååº•å±‚ä¼šè‡ªåŠ¨å›è°ƒæŒ‡å®šçš„ PHP å‡½æ•°ã€‚è¯´å®ƒé‡æ–°å®šä¹‰äº† PHPï¼Œä¸€ç‚¹ä¹Ÿä¸å¤¸å¼ ã€‚</p>
<span id="more"></span>
<h1 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h1><ul>
<li><a href="https://www.swoole.co.uk">Coroutine asynchronous programming framework for PHP</a></li>
<li><a href="https://www.swoole.com/">Swooleï¼šé¢å‘ç”Ÿäº§ç¯å¢ƒçš„ PHP åç¨‹æ¡†æ¶</a></li>
<li><a href="https://linkeddestiny.gitbooks.io/easy-swoole/content/">Easy Swoole</a></li>
<li><a href="https://wiki.swoole.com/wiki/page/1.html">Swoole Wiki</a></li>
<li><a href="https://www.zhihu.com/question/35687627">Swoole åˆ°åº•æ˜¯ä¸ªä»€ä¹ˆä¸œè¥¿ï¼Ÿ</a></li>
</ul>
<p><a href="https://www.swoole.co.uk/">Swoole</a> æ˜¯é¢å‘ç”Ÿäº§ç¯å¢ƒçš„ PHP åç¨‹æ¡†æ¶ã€‚ä½¿ PHP å¼€å‘äººå‘˜å¯ä»¥ç¼–å†™é«˜æ€§èƒ½çš„åç¨‹ TCPã€UDPã€Unix Socketã€HTTPï¼ŒWebSocket æœåŠ¡ã€‚Swoole å¯ä»¥å¹¿æ³›åº”ç”¨äºäº’è”ç½‘ã€ç§»åŠ¨é€šä¿¡ã€ä¼ä¸šè½¯ä»¶ã€äº‘è®¡ç®—ã€ç½‘ç»œæ¸¸æˆã€ç‰©è”ç½‘ï¼ˆIOTï¼‰ã€è½¦è”ç½‘ã€æ™ºèƒ½å®¶å±…ç­‰é¢†åŸŸã€‚ ä½¿ç”¨ PHP + Swoole ä½œä¸ºç½‘ç»œé€šä¿¡æ¡†æ¶ï¼Œå¯ä»¥ä½¿ä¼ä¸š IT ç ”å‘å›¢é˜Ÿçš„æ•ˆç‡å¤§å¤§æå‡ï¼Œæ›´åŠ ä¸“æ³¨äºå¼€å‘åˆ›æ–°äº§å“ã€‚</p>
<h1 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h1><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">apt-get update &amp;&amp; apt-get install vim -y &amp;&amp; \</span><br><span class="line">apt-get install openssl -y &amp;&amp; \</span><br><span class="line">apt-get install libssl-dev -y &amp;&amp; \</span><br><span class="line">apt-get install wget -y &amp;&amp; \</span><br><span class="line">apt-get install git -y &amp;&amp; \</span><br><span class="line">apt-get install procps -y &amp;&amp; \</span><br><span class="line">apt-get install htop -y</span><br><span class="line"></span><br><span class="line"><span class="built_in">cd</span> /usr/<span class="built_in">local</span>/src &amp;&amp; \</span><br><span class="line">git <span class="built_in">clone</span> https://github.com/swoole/swoole-src.git &amp;&amp; \</span><br><span class="line"><span class="built_in">cd</span> swoole-src &amp;&amp; \</span><br><span class="line">git checkout v4.4.8 &amp;&amp; \</span><br><span class="line">phpize &amp;&amp; \</span><br><span class="line">./configure --enable-openssl &amp;&amp; \</span><br><span class="line">make &amp;&amp; make install</span><br><span class="line"></span><br><span class="line">touch /usr/<span class="built_in">local</span>/etc/php/conf.d/swoole.ini &amp;&amp; <span class="built_in">echo</span> <span class="string">&#x27;extension=swoole.so&#x27;</span> &gt; /usr/<span class="built_in">local</span>/etc/php/conf.d/swoole.ini</span><br></pre></td></tr></table></figure>
<h1 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h1><h2 id="åˆ›å»º-HTTP-æœåŠ¡å™¨"><a href="#åˆ›å»º-HTTP-æœåŠ¡å™¨" class="headerlink" title="åˆ›å»º HTTP æœåŠ¡å™¨"></a>åˆ›å»º HTTP æœåŠ¡å™¨</h2><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$http</span> = <span class="keyword">new</span> \Swoole\Http\Server(<span class="string">&#x27;127.0.0.1&#x27;</span>, <span class="number">8080</span>);</span><br><span class="line"><span class="variable">$http</span>-&gt;on(<span class="string">&#x27;start&#x27;</span>, <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> (<span class="params"><span class="variable">$server</span></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;Swoole http server is started at http://127.0.0.1:8080\n&quot;</span>;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="variable">$http</span>-&gt;on(<span class="string">&#x27;request&#x27;</span>, <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> (<span class="params"><span class="variable">$request</span>, <span class="variable">$response</span></span>) </span>&#123;</span><br><span class="line">    <span class="variable">$response</span>-&gt;header(<span class="string">&#x27;Content-Type&#x27;</span>, <span class="string">&#x27;text/plain&#x27;</span>);</span><br><span class="line">    <span class="variable">$response</span>-&gt;end(<span class="string">&quot;Hello World!\n&quot;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="variable">$http</span>-&gt;start();</span><br></pre></td></tr></table></figure>
<h2 id="åˆ›å»º-WebSocket-æœåŠ¡å™¨"><a href="#åˆ›å»º-WebSocket-æœåŠ¡å™¨" class="headerlink" title="åˆ›å»º WebSocket æœåŠ¡å™¨"></a>åˆ›å»º WebSocket æœåŠ¡å™¨</h2><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$websocket</span> = <span class="keyword">new</span> \Swoole\WebSocket\Server(<span class="string">&#x27;127.0.0.1&#x27;</span>, <span class="number">8080</span>);</span><br><span class="line"><span class="variable">$websocket</span>-&gt;on(<span class="string">&#x27;open&#x27;</span>, <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> (<span class="params"><span class="variable">$server</span>, <span class="variable">$request</span></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;Connection open: <span class="subst">&#123;$request-&gt;fd&#125;</span>\n&quot;</span>;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="variable">$websocket</span>-&gt;on(<span class="string">&#x27;message&#x27;</span>, <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> (<span class="params"><span class="variable">$server</span>, <span class="variable">$frame</span></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;Received message: <span class="subst">&#123;$frame-&gt;data&#125;</span>\n&quot;</span>;</span><br><span class="line">    <span class="variable">$server</span>-&gt;push(<span class="variable">$frame</span>-&gt;fd, json_encode([<span class="string">&#x27;hello&#x27;</span>, <span class="string">&#x27;world&#x27;</span>]));</span><br><span class="line">&#125;);</span><br><span class="line"><span class="variable">$websocket</span>-&gt;on(<span class="string">&#x27;close&#x27;</span>, <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> (<span class="params"><span class="variable">$server</span>, <span class="variable">$fd</span></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;Connection close: <span class="subst">&#123;$fd&#125;</span>\n&quot;</span>;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="variable">$websocket</span>-&gt;start();</span><br></pre></td></tr></table></figure>
<h2 id="åˆ›å»º-TCP-æœåŠ¡å™¨"><a href="#åˆ›å»º-TCP-æœåŠ¡å™¨" class="headerlink" title="åˆ›å»º TCP æœåŠ¡å™¨"></a>åˆ›å»º TCP æœåŠ¡å™¨</h2><p>TCP æœåŠ¡å™¨ï¼š</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$server</span> = <span class="keyword">new</span> \Swoole\Server(<span class="string">&#x27;127.0.0.1&#x27;</span>, <span class="number">8080</span>);</span><br><span class="line"><span class="variable">$server</span>-&gt;on(<span class="string">&#x27;connect&#x27;</span>, <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> (<span class="params"><span class="variable">$server</span>, <span class="variable">$request</span></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;Connection open: <span class="subst">&#123;$request-&gt;fd&#125;</span>\n&quot;</span>;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="variable">$server</span>-&gt;on(<span class="string">&#x27;receive&#x27;</span>, <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> (<span class="params"><span class="variable">$server</span>, <span class="variable">$fd</span>, <span class="variable">$id</span>, <span class="variable">$data</span></span>) </span>&#123;</span><br><span class="line">    <span class="variable">$server</span>-&gt;send(<span class="variable">$fd</span>, <span class="string">&quot;Swoole: <span class="subst">&#123;$data&#125;</span>&quot;</span>);</span><br><span class="line">    <span class="variable">$server</span>-&gt;close(<span class="variable">$fd</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="variable">$server</span>-&gt;on(<span class="string">&#x27;close&#x27;</span>, <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> (<span class="params"><span class="variable">$server</span>, <span class="variable">$fd</span></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;Connection close: <span class="subst">&#123;$fd&#125;</span>\n&quot;</span>;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="variable">$server</span>-&gt;start();</span><br></pre></td></tr></table></figure>
<p>TCP å®¢æˆ·ç«¯ï¼š</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$client</span> = <span class="keyword">new</span> \Swoole\Client(SWOOLE_SOCK_TCP, SWOOLE_SOCK_ASYNC);</span><br><span class="line"><span class="variable">$client</span>-&gt;on(<span class="string">&#x27;connect&#x27;</span>, <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> (<span class="params"><span class="variable">$client</span></span>) </span>&#123;</span><br><span class="line">    <span class="variable">$client</span>-&gt;send(<span class="string">&quot;Hello World!\n&quot;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="variable">$client</span>-&gt;on(<span class="string">&#x27;receive&#x27;</span>, <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> (<span class="params"><span class="variable">$client</span>, <span class="variable">$data</span></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;Received: <span class="subst">&#123;$data&#125;</span>\n&quot;</span>;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="variable">$client</span>-&gt;on(<span class="string">&#x27;error&#x27;</span>, <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> (<span class="params"><span class="variable">$client</span></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;Connection failed\n&quot;</span>;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="variable">$client</span>-&gt;on(<span class="string">&#x27;close&#x27;</span>, <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> (<span class="params"><span class="variable">$client</span></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;Connection close\n&quot;</span>;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="variable">$client</span>-&gt;connect(<span class="string">&#x27;127.0.0.1&#x27;</span>, <span class="number">8080</span>, <span class="number">0.5</span>);</span><br></pre></td></tr></table></figure>
<h1 id="é—®é¢˜"><a href="#é—®é¢˜" class="headerlink" title="é—®é¢˜"></a>é—®é¢˜</h1><ul>
<li><code>error &quot;Enable openssl support, require openssl library.</code>ï¼š</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// ç¡®å®š openssl ä½ç½®</span><br><span class="line"><span class="built_in">which</span> openssl</span><br><span class="line">/usr/<span class="built_in">local</span>/opt/openresty-openssl/bin/openssl</span><br><span class="line"></span><br><span class="line">// å®‰è£… swoole æ—¶æŒ‡å®š openssl è·¯å¾„</span><br><span class="line">pecl install swoole</span><br><span class="line">downloading swoole-4.4.8.tgz ...</span><br><span class="line">Starting to download swoole-4.4.8.tgz (1,427,235 bytes)</span><br><span class="line">.........................................................................................................................................................................................................................................................................................<span class="keyword">done</span>: 1,427,235 bytes</span><br><span class="line">391 <span class="built_in">source</span> files, building</span><br><span class="line">running: phpize</span><br><span class="line">Configuring <span class="keyword">for</span>:</span><br><span class="line">PHP Api Version:         20180731</span><br><span class="line">Zend Module Api No:      20180731</span><br><span class="line">Zend Extension Api No:   320180731</span><br><span class="line"><span class="built_in">enable</span> sockets supports? [no] : yes</span><br><span class="line"><span class="built_in">enable</span> openssl support? [no] : yes --with-openssl-dir=/usr/<span class="built_in">local</span>/opt/openssl@1.1/bin/openssl</span><br><span class="line"><span class="built_in">enable</span> http2 support? [no] : yes</span><br><span class="line"><span class="built_in">enable</span> mysqlnd support? [no] : yes</span><br><span class="line">building <span class="keyword">in</span> /private/tmp/pear/temp/pear-build-majinyunwRSXz0/swoole-4.4.8</span><br><span class="line"></span><br><span class="line">// å®‰è£…æˆåŠŸä¿¡æ¯</span><br><span class="line">Build process completed successfully</span><br><span class="line">Installing <span class="string">&#x27;/usr/local/Cellar/php/7.3.10/include/php/ext/swoole/config.h&#x27;</span></span><br><span class="line">Installing <span class="string">&#x27;/usr/local/Cellar/php/7.3.10/pecl/20180731/swoole.so&#x27;</span></span><br><span class="line">install ok: channel://pecl.php.net/swoole-4.4.8</span><br><span class="line">Extension swoole enabled <span class="keyword">in</span> php.ini</span><br></pre></td></tr></table></figure>
<p>æœªå®Œå¾…ç»­ã€‚ã€‚ã€‚</p>
]]></content>
      <categories>
        <category>php</category>
      </categories>
      <tags>
        <tag>php</tag>
        <tag>swoole</tag>
      </tags>
  </entry>
  <entry>
    <title>PHP éå†ç›®å½•ä¸‹çš„æ–‡ä»¶</title>
    <url>/2018/09/05/php-traversing-directory-files/</url>
    <content><![CDATA[<p><img src="/images/2019/201903151012.jpg" alt="201903151012.jpg"></p>
<p>â™»ï¸ä¸»è¦å½’åŠŸäº <strong>é€’å½’</strong> - <code>Recursion</code>ï¼Œåˆè¯‘ä¸ºé€’å›ï¼Œåœ¨æ•°å­¦ä¸è®¡ç®—æœºç§‘å­¦ä¸­ï¼Œæ˜¯æŒ‡åœ¨å‡½æ•°çš„å®šä¹‰ä¸­ä½¿ç”¨å‡½æ•°è‡ªèº«çš„æ–¹æ³•ã€‚é€’å½’ä¸€è¯è¿˜è¾ƒå¸¸ç”¨äºæè¿°ä»¥è‡ªç›¸ä¼¼æ–¹æ³•é‡å¤äº‹ç‰©çš„è¿‡ç¨‹ã€‚ä¾‹å¦‚ï¼Œå½“ä¸¤é¢é•œå­ç›¸äº’ä¹‹é—´è¿‘ä¼¼å¹³è¡Œæ—¶ï¼Œé•œä¸­åµŒå¥—çš„å›¾åƒæ˜¯ä»¥æ— é™é€’å½’çš„å½¢å¼å‡ºç°çš„ã€‚ä¹Ÿå¯ä»¥ç†è§£ä¸ºè‡ªæˆ‘å¤åˆ¶çš„è¿‡ç¨‹ï¼ˆæ‘˜è‡ªç»´åŸºç™¾ç§‘ï¼‰ã€‚</p>
<span id="more"></span>
<h1 id="ä½¿ç”¨-dir-å‡½æ•°"><a href="#ä½¿ç”¨-dir-å‡½æ•°" class="headerlink" title="ä½¿ç”¨ dir å‡½æ•°"></a>ä½¿ç”¨ dir å‡½æ•°</h1><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * éå†æŒ‡å®šæ–‡ä»¶å¤¹ä¸‹çš„æ–‡ä»¶ã€‚</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> string $directory</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> array</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">dir_list</span>(<span class="params"><span class="variable">$directory</span></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">static</span> <span class="variable">$array</span> = [];</span><br><span class="line"></span><br><span class="line">    <span class="variable">$dir</span> = dir(<span class="variable">$directory</span>);</span><br><span class="line">    <span class="keyword">while</span> (<span class="variable">$file</span> = <span class="variable">$dir</span>-&gt;read()) &#123;</span><br><span class="line">        <span class="keyword">if</span> (is_dir(<span class="string">&quot;<span class="subst">$directory</span>/<span class="subst">$file</span>&quot;</span>) &amp;&amp; <span class="variable">$file</span> !== <span class="string">&#x27;.&#x27;</span> &amp;&amp; <span class="variable">$file</span> !== <span class="string">&#x27;..&#x27;</span>) &#123;</span><br><span class="line">            dir_list(<span class="string">&quot;<span class="subst">$directory</span>/<span class="subst">$file</span>&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (<span class="variable">$file</span> !== <span class="string">&#x27;.&#x27;</span> &amp;&amp; <span class="variable">$file</span> !== <span class="string">&#x27;..&#x27;</span>) &#123;</span><br><span class="line">                <span class="variable">$array</span>[] = <span class="variable">$file</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="variable">$array</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="ä½¿ç”¨-readdir-å‡½æ•°"><a href="#ä½¿ç”¨-readdir-å‡½æ•°" class="headerlink" title="ä½¿ç”¨ readdir å‡½æ•°"></a>ä½¿ç”¨ readdir å‡½æ•°</h1><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * éå†æŒ‡å®šæ–‡ä»¶å¤¹ä¸‹çš„æ–‡ä»¶ã€‚</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> string $directory</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> array</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">dir_list</span>(<span class="params"><span class="keyword">string</span> <span class="variable">$directory</span></span>): <span class="title">array</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">static</span> <span class="variable">$array</span> = [];</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (<span class="variable">$dir</span> = opendir(<span class="variable">$directory</span>)) &#123;</span><br><span class="line">        <span class="keyword">while</span> (<span class="literal">false</span> !== <span class="variable">$file</span> = readdir(<span class="variable">$dir</span>)) &#123;</span><br><span class="line">            <span class="keyword">if</span> (is_dir(<span class="string">&quot;<span class="subst">$directory</span>/<span class="subst">$file</span>&quot;</span>) &amp;&amp; <span class="variable">$file</span> !== <span class="string">&#x27;.&#x27;</span> &amp;&amp; <span class="variable">$file</span> !== <span class="string">&#x27;..&#x27;</span>) &#123;</span><br><span class="line">                dir_list(<span class="string">&quot;<span class="subst">$directory</span>/<span class="subst">$file</span>&quot;</span>);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> (<span class="variable">$file</span> !== <span class="string">&#x27;.&#x27;</span> &amp;&amp; <span class="variable">$file</span> !== <span class="string">&#x27;..&#x27;</span>) &#123;</span><br><span class="line">                    <span class="variable">$array</span>[] = <span class="variable">$file</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        closedir(<span class="variable">$dir</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="variable">$array</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="ä½¿ç”¨-scandir-å‡½æ•°"><a href="#ä½¿ç”¨-scandir-å‡½æ•°" class="headerlink" title="ä½¿ç”¨ scandir å‡½æ•°"></a>ä½¿ç”¨ scandir å‡½æ•°</h1><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * éå†æŒ‡å®šæ–‡ä»¶å¤¹ä¸‹çš„æ–‡ä»¶ã€‚</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> string $directory</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> array</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">dir_list</span>(<span class="params"><span class="keyword">string</span> <span class="variable">$directory</span></span>): <span class="title">array</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">static</span> <span class="variable">$array</span> = [];</span><br><span class="line"></span><br><span class="line">    <span class="variable">$dir</span> = scandir(<span class="variable">$directory</span>);</span><br><span class="line">    <span class="keyword">foreach</span> (<span class="variable">$dir</span> <span class="keyword">as</span> <span class="variable">$file</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (is_dir(<span class="string">&quot;<span class="subst">$directory</span>/<span class="subst">$file</span>&quot;</span>) &amp;&amp; <span class="variable">$file</span> !== <span class="string">&#x27;.&#x27;</span> &amp;&amp; <span class="variable">$file</span> !== <span class="string">&#x27;..&#x27;</span>) &#123;</span><br><span class="line">            dir_list(<span class="string">&quot;<span class="subst">$directory</span>/<span class="subst">$file</span>&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (<span class="variable">$file</span> !== <span class="string">&#x27;.&#x27;</span> &amp;&amp; <span class="variable">$file</span> !== <span class="string">&#x27;..&#x27;</span>) &#123;</span><br><span class="line">                <span class="variable">$array</span>[] = <span class="variable">$file</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="variable">$array</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="ä½¿ç”¨-RecursiveIteratorIterator-ç±»"><a href="#ä½¿ç”¨-RecursiveIteratorIterator-ç±»" class="headerlink" title="ä½¿ç”¨ RecursiveIteratorIterator ç±»"></a>ä½¿ç”¨ RecursiveIteratorIterator ç±»</h1><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">dir_list</span>(<span class="params"><span class="keyword">string</span> <span class="variable">$directory</span></span>): <span class="title">array</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">static</span> <span class="variable">$array</span> = [];</span><br><span class="line"></span><br><span class="line">    <span class="variable">$iterator</span> = <span class="keyword">new</span> \<span class="built_in">RecursiveIteratorIterator</span>(</span><br><span class="line">        <span class="keyword">new</span> \<span class="built_in">RecursiveDirectoryIterator</span>(<span class="variable">$directory</span>, \<span class="built_in">RecursiveDirectoryIterator</span>::SKIP_DOTS),</span><br><span class="line">        \<span class="built_in">RecursiveIteratorIterator</span>::LEAVES_ONLY</span><br><span class="line">    );</span><br><span class="line">    <span class="keyword">foreach</span> (<span class="variable">$iterator</span> <span class="keyword">as</span> <span class="variable">$object</span>) &#123;</span><br><span class="line">        <span class="variable">$array</span>[] = <span class="variable">$object</span>-&gt;getFileName();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="variable">$array</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å‡½æ•°è°ƒç”¨ï¼š</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line">print_r(dir_list(dirname(<span class="variable">$_SERVER</span>[<span class="string">&#x27;PHP_SELF&#x27;</span>])));</span><br></pre></td></tr></table></figure>
<p>è¾“å‡ºç»“æœï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">Array</span><br><span class="line">(</span><br><span class="line">    [0] =&gt; myshell.sh</span><br><span class="line">    [1] =&gt; meeting.md</span><br><span class="line">    [2] =&gt; untitled.html</span><br><span class="line">    [3] =&gt; server.php</span><br><span class="line">    [4] =&gt; .DS_Store</span><br><span class="line">    [5] =&gt; index.php</span><br><span class="line">    [6] =&gt; desc.md</span><br><span class="line">    .</span><br><span class="line">    .</span><br><span class="line">    .</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>php</category>
      </categories>
      <tags>
        <tag>php</tag>
      </tags>
  </entry>
  <entry>
    <title>PHP å®‰è£… Xdebug æ‰©å±•æ¥è°ƒè¯•ç¨‹åº</title>
    <url>/2018/01/30/php-xdebug/</url>
    <content><![CDATA[<h1 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h1><blockquote>
<ul>
<li><a href="https://xdebug.org/index.php">Xdebug Website</a></li>
<li><a href="https://github.com/xdebug/xdebug">Xdebug GitHub</a></li>
</ul>
</blockquote>
<p><code>Xdebug</code> æ˜¯ <code>PHP</code> çš„ä¸€ä¸ªæ‰©å±•ï¼Œä»¥ååŠ©è°ƒè¯•å’Œå¼€å‘ã€‚å®ƒåŒ…å«ä¸€ä¸ª <code>single step debugger</code> ä¸ <code>IDEs</code> ä¸€èµ·ä½¿ç”¨ï¼›å®ƒå‡çº§äº† <code>PHP</code> çš„ <code>var_dump()</code> å‡½æ•°ï¼›å®ƒä¸ºé€šçŸ¥ã€è­¦å‘Šã€é”™è¯¯å’Œå¼‚å¸¸æ·»åŠ äº†å †æ ˆè·Ÿè¸ªï¼›å®ƒå…·æœ‰è®°å½•æ¯ä¸ªå‡½æ•°è°ƒç”¨å’Œå˜é‡èµ‹å€¼åˆ°ç£ç›˜çš„åŠŸèƒ½ï¼›å®ƒåŒ…å«ä¸€ä¸ªåˆ†æå™¨ï¼›å¹¶ä¸”æä¾›äº†ä¸ <code>PHPUnit</code> ä¸€èµ·ä½¿ç”¨æ—¶çš„ä»£ç è¦†ç›–åŠŸèƒ½ã€‚</p>
<h1 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h1><h2 id="Mac-å®‰è£…"><a href="#Mac-å®‰è£…" class="headerlink" title="Mac å®‰è£…"></a>Mac å®‰è£…</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ brew install homebrew/php/php71-xdebug</span><br></pre></td></tr></table></figure>
<h2 id="Linux-å®‰è£…"><a href="#Linux-å®‰è£…" class="headerlink" title="Linux å®‰è£…"></a>Linux å®‰è£…</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ git <span class="built_in">clone</span> https://github.com/xdebug/xdebug.git</span><br><span class="line">$ <span class="built_in">cd</span> xdebug</span><br><span class="line">$ phpize</span><br><span class="line">$ ./configure --enable-xdebug --with-php-config=/usr/<span class="built_in">local</span>/bin/php-config</span><br><span class="line">$ sudo make clean</span><br><span class="line">$ sudo make</span><br><span class="line">$ sudo make install</span><br></pre></td></tr></table></figure>
<h2 id="Windows-å®‰è£…"><a href="#Windows-å®‰è£…" class="headerlink" title="Windows å®‰è£…"></a>Windows å®‰è£…</h2><blockquote>
<p><a href="https://xdebug.org/download.php"><code>Xdebug Download Page</code></a></p>
</blockquote>
<p>ä¸‹è½½å¯¹åº”çš„ <code>Windows</code> ç‰ˆæœ¬ï¼Œå°† <code>php_xdebug-*.dll</code> å¤åˆ¶åˆ°ç›¸åº”çš„æ–‡ä»¶ä¸­</p>
<h1 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h1><h2 id="å°†ç”Ÿæˆçš„-xdebug-so-æ·»åŠ åˆ°-php-ini-æ–‡ä»¶ä¸­"><a href="#å°†ç”Ÿæˆçš„-xdebug-so-æ·»åŠ åˆ°-php-ini-æ–‡ä»¶ä¸­" class="headerlink" title="å°†ç”Ÿæˆçš„ xdebug.so æ·»åŠ åˆ° php.ini æ–‡ä»¶ä¸­"></a>å°†ç”Ÿæˆçš„ xdebug.so æ·»åŠ åˆ° php.ini æ–‡ä»¶ä¸­</h2><blockquote>
<p>ç”±äºä¸åŒçš„å®‰è£…æ–¹å¼ï¼Œé…ç½®æ–‡ä»¶çš„è·¯å¾„å¯èƒ½ä¸å¤ªä¸€æ ·ã€‚æœ‰çš„æ‰©å±•å¯èƒ½éœ€è¦å•ç‹¬çš„æ–‡ä»¶å»é…ç½®</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[xdebug]</span><br><span class="line">zend_extension=<span class="string">&quot;/path/to/xdebug.so&quot;</span></span><br></pre></td></tr></table></figure>
<h2 id="é‡å¯-php-fpm"><a href="#é‡å¯-php-fpm" class="headerlink" title="é‡å¯ php-fpm"></a>é‡å¯ php-fpm</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// Mac</span><br><span class="line">$ brew services restart php71</span><br><span class="line"></span><br><span class="line">// Linux</span><br><span class="line">$ sudo systemctl restart php71-fpm</span><br></pre></td></tr></table></figure>
<h2 id="æŸ¥çœ‹-xdebug-æ˜¯å¦æ­£ç¡®å®‰è£…"><a href="#æŸ¥çœ‹-xdebug-æ˜¯å¦æ­£ç¡®å®‰è£…" class="headerlink" title="æŸ¥çœ‹ xdebug æ˜¯å¦æ­£ç¡®å®‰è£…"></a>æŸ¥çœ‹ xdebug æ˜¯å¦æ­£ç¡®å®‰è£…</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ php -i | grep xdebug</span><br><span class="line">/usr/<span class="built_in">local</span>/etc/php/7.1/conf.d/ext-xdebug.ini</span><br><span class="line">xdebug</span><br><span class="line">xdebug support =&gt; enabled <span class="comment"># è¯´æ˜å·²ç»å®‰è£…æˆåŠŸ</span></span><br><span class="line">æˆ–è€…</span><br><span class="line">$ php --ini | grep xdebug</span><br><span class="line">/path/to/conf.d/ext-xdebug.ini</span><br><span class="line">$ cat /path/to/conf.d/ext-xdebug.ini</span><br><span class="line">[xdebug]</span><br><span class="line">zend_extension=<span class="string">&quot;/usr/local/opt/php71-xdebug/xdebug.so&quot;</span></span><br><span class="line">æˆ–è€…</span><br><span class="line">$ php --ri xdebug</span><br><span class="line">xdebug</span><br><span class="line"></span><br><span class="line">xdebug support =&gt; enabled</span><br></pre></td></tr></table></figure>
<h1 id="è¿›é˜¶"><a href="#è¿›é˜¶" class="headerlink" title="è¿›é˜¶"></a>è¿›é˜¶</h1><p>å½“ä½ ä¹ æƒ¯äº†ä½¿ç”¨ <code>var_dump()</code>ï¼Œ<code>echo</code>ï¼Œ<code>dd()</code>ï¼Œ<code>print_r()</code>ï¼Œ<code>print</code> ç­‰è¿™ç§æ–¹å¼è°ƒè¯•ä»£ç ï¼Œé‚£ä¹ˆä»ç°åœ¨èµ·å’±ä»¬æ¢ä¸€ç§è½»æ¾çš„æ–¹å¼æ¥è°ƒè¯•ä»£ç ã€‚</p>
<h2 id="é…ç½®-Xdebug-å‚æ•°"><a href="#é…ç½®-Xdebug-å‚æ•°" class="headerlink" title="é…ç½® Xdebug å‚æ•°"></a>é…ç½® Xdebug å‚æ•°</h2><blockquote>
<p>ä½¿ç”¨ <code>Homebrew</code> å®‰è£… <code>PHP</code> ç¯å¢ƒåï¼Œåœ¨å®‰è£…æ‰©å±•æ—¶ï¼Œä¸€èˆ¬ä¼šå•ç‹¬å»åŠ è½½æ‰©å±•çš„é…ç½®</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ vim /path/to/ext-xdebug.ini</span><br><span class="line">[xdebug]</span><br><span class="line">zend_extension=<span class="string">&quot;/usr/local/opt/php71-xdebug/xdebug.so&quot;</span></span><br><span class="line">xdebug.remote_enable = 1</span><br><span class="line">xdebug.idekey = PHPSTORM</span><br><span class="line">xdebug.remote_port = 9001</span><br><span class="line"></span><br><span class="line">xdebug.collect_vars = On</span><br><span class="line">xdebug.collect_params = 4</span><br><span class="line">xdebug.dump_globals = On</span><br><span class="line">xdebug.dump.SERVER = REQUEST_URI</span><br><span class="line">xdebug.show_local_vars = On</span><br></pre></td></tr></table></figure>
<h2 id="é…ç½®-PhpStorm-IDE"><a href="#é…ç½®-PhpStorm-IDE" class="headerlink" title="é…ç½® PhpStorm IDE"></a>é…ç½® PhpStorm IDE</h2><p><img src="https://inotes.oss-cn-beijing.aliyuncs.com/php/201812/php-phpstorm-dbgp.png" alt="php-phpstorm-dbgp.png"></p>
<h2 id="æ•ˆæœ"><a href="#æ•ˆæœ" class="headerlink" title="æ•ˆæœ"></a>æ•ˆæœ</h2><p>å¯¹äº†ï¼Œç”±äºæœ€è¿‘åœ¨è°ƒè¯•æ”¯ä»˜å®æ¥å£ï¼Œçœ‹åˆ°ä¸€äº›é”™è¯¯æç¤ºç ä»£ç ï¼Œæ²¡æœ‰ä¸Šä¸‹æ–‡çš„æç¤ºï¼ŒåŠ ä¸Šæœ¬äººç‰¹æ‡’ï¼Œä¸æƒ³åœ¨å¤šæ¬¡çš„è°ƒè¯•ä¸­è°ƒè¯•è·Ÿè¸ªï¼Œé¢å¯¹è¿™äº›ç»æœ›çš„é”™è¯¯æç¤ºï¼Œæ‡µé€¼äºæ­¤ï¼Œå¥½åœ¨æˆ‘æœ›çœ¼æ¬²ç©¿çš„æ—¶å€™ï¼ŒçŒ›ç„¶é—´æƒ³èµ·äº†æœ‰ä¸ªå« <code>xdebug</code> ä¸œä¸œï¼ŒçœŸç‰¹ä¹ˆé è°±ï¼Œè¿™ä¹Ÿæ˜¯è¿™ç¯‡æ–‡ç« çš„ç”±æ¥ï¼ŒèŠ±äº†åå‡ åˆ†é’Ÿçš„å·¥å¤«æŠŠè¿™è´§å®‰ç½®å¦¥å½“ï¼Œå°±èµ°ä¸Šäº†è°ƒè¯•çš„æ¼«æ¼«é•¿è·¯ï¼Œä½ çœ‹ç¥é©¬é”™è¯¯ä¸Šä¸‹æ–‡ä¸€è§ˆæ— ä½™çš„åŸå½¢æ¯•éœ²ï¼Œè°ƒè¯•ä»£ç æ€ä¸€ä¸ªçˆ½å­—äº†å¾—ï¼Œä¸è¯´äº†çœ‹å›¾ã€‚</p>
<p><img src="https://inotes.oss-cn-beijing.aliyuncs.com/php/201812/php-xdebug-display.png" alt="php-xdebug-display.png"></p>
<h1 id="é¡¹ç›®è°ƒè¯•"><a href="#é¡¹ç›®è°ƒè¯•" class="headerlink" title="é¡¹ç›®è°ƒè¯•"></a>é¡¹ç›®è°ƒè¯•</h1><h2 id="é…ç½®-Xdebug"><a href="#é…ç½®-Xdebug" class="headerlink" title="é…ç½® Xdebug"></a>é…ç½® Xdebug</h2><figure class="highlight ini"><table><tr><td class="code"><pre><span class="line"><span class="section">[xdebug]</span></span><br><span class="line"><span class="attr">zend_extension</span>=<span class="string">&quot;/usr/local/opt/php71-xdebug/xdebug.so&quot;</span></span><br><span class="line"><span class="attr">xdebug.remote_enable</span> = <span class="number">1</span></span><br><span class="line"><span class="attr">xdebug.idekey</span> = PHPSTORM</span><br><span class="line"><span class="attr">xdebug.remote_port</span> = <span class="number">9001</span></span><br><span class="line"><span class="attr">xdebug.remote_connect_back</span> = <span class="number">1</span></span><br><span class="line"><span class="attr">xdebug.profiler_enable</span> = <span class="number">1</span></span><br></pre></td></tr></table></figure>
<h2 id="é…ç½®-PhpStorm"><a href="#é…ç½®-PhpStorm" class="headerlink" title="é…ç½® PhpStorm"></a>é…ç½® PhpStorm</h2><h3 id="PHP-Debug-DBGp-Proxy"><a href="#PHP-Debug-DBGp-Proxy" class="headerlink" title="PHP Debug DBGp Proxy"></a>PHP Debug DBGp Proxy</h3><p><img src="https://inotes.oss-cn-beijing.aliyuncs.com/php/201812/php-xdebug-php-dbgp.png" alt="php-xdebug-php-dbgp.png"></p>
<p>é…ç½®å®Œæˆåé‡å¯ <code>php-fpm</code>ã€‚</p>
<h3 id="PHP-Servers"><a href="#PHP-Servers" class="headerlink" title="PHP Servers"></a>PHP Servers</h3><blockquote>
<p>å¦‚æœæ˜¯è™šæ‹Ÿæœºå¼€å‘ï¼Œè¯·é…ç½®é¡¹ç›®è·¯å¾„æ˜ å°„ã€‚</p>
</blockquote>
<p><img src="https://inotes.oss-cn-beijing.aliyuncs.com/php/201812/php-xdebug-server-config.png" alt="php-xdebug-server-config.png"></p>
<h3 id="PHP-Debug-Configurations"><a href="#PHP-Debug-Configurations" class="headerlink" title="PHP Debug Configurations"></a>PHP Debug Configurations</h3><p><code>Server</code> è¿™é‡Œé€‰æ‹©ä¸Šä¸€æ­¥é…ç½®çš„ <code>Server</code> å°±å¥½ã€‚</p>
<p><img src="https://inotes.oss-cn-beijing.aliyuncs.com/php/201812/php-xdebug-debug-config.png" alt="php-xdebug-debug-config.png"></p>
<h3 id="é¡¹ç›®è°ƒè¯•æ•ˆæœå›¾"><a href="#é¡¹ç›®è°ƒè¯•æ•ˆæœå›¾" class="headerlink" title="é¡¹ç›®è°ƒè¯•æ•ˆæœå›¾"></a>é¡¹ç›®è°ƒè¯•æ•ˆæœå›¾</h3><p>å½“æµè§ˆå™¨è¿è¡ŒæŒ‡å®šçš„ <code>URL</code>ï¼Œä¹Ÿå°±æ˜¯ <code>PHP Web Application</code> é…ç½®çš„ <code>Start URL</code> æ—¶ï¼Œå‡ºç° <code>Xdebug</code> æ§åˆ¶å°ï¼Œæ ¹æ®æ§åˆ¶å°æ¥è¿›è¡Œæ“ä½œ</p>
<p>è°ƒè¯•çª—å£è¯´æ˜ï¼š</p>
<ul>
<li><code>Debugger</code>ï¼šè°ƒè¯•å™¨ï¼Œæ¯”å¦‚ï¼šè·³è¿‡ï¼Œå•æ­¥è°ƒè¯•ç­‰æ“ä½œ</li>
<li><code>Frames</code>ï¼šè¿è¡Œçš„å¸§ï¼Œå½“å‰é¡¹ç›®è°ƒè¯•æ—¶è½½å…¥çš„å…³è”ç¨‹åº</li>
<li><code>Variables</code>ï¼šè°ƒè¯•ä¸­çš„æ‰€æœ‰å˜é‡</li>
<li><code>Watches</code>ï¼šç›‘è§†å™¨ï¼Œè‡ªå®šä¹‰å˜é‡ç›‘è§†</li>
</ul>
<p><img src="https://inotes.oss-cn-beijing.aliyuncs.com/php/201812/php-xdebug-phpstorm-debug.png" alt="php-xdebug-phpstorm-debug.png"></p>
<h1 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h1><blockquote>
<p><a href="https://www.jetbrains.com/help/phpstorm/configuring-xdebug.html"><code>Configuring Xdebug</code></a></p>
</blockquote>
]]></content>
      <categories>
        <category>php</category>
      </categories>
      <tags>
        <tag>php</tag>
      </tags>
  </entry>
  <entry>
    <title>PHP å¿«é€Ÿæ’åº</title>
    <url>/2018/04/17/php-quick-sort/</url>
    <content><![CDATA[<p>æ›¾ç»åœ¨ä¸€æ¬¡é¢è¯•ä¸­ï¼Œé¢è¯•å®˜é—®è¿‡æˆ‘è¿™ä¸ªç®—æ³•ï¼Œæˆ‘å½“æ—¶ä¸€è„¸æ‡µé€¼ï¼Œå°±è¯´å®ƒæ¯”è¾ƒå¿«ï¼Œæ‰€ä»¥å°±æ˜¯å¿«é€Ÿæ’åºï¼Œè‡³äºæ€ä¹ˆå¿«çš„ä¸€é—®ä¸‰ä¸çŸ¥ã€‚æ‰€è°“åƒä¸€å ‘é•¿ä¸€æ™ºå˜›ï¼Œä¸ç®¡ä½ æ€ä¹ˆç†è§£ï¼Œæœ€ç»ˆè¿˜ä¸å¾—ååº”åˆ°ä»£ç å®ç°ä¸Šä¹ˆï¼Ÿä¸è´¹è¯äº†ï¼Œä¸Šä»£ç ã€‚</p>
<span id="more"></span>
<h2 id="æ¦‚å¿µ"><a href="#æ¦‚å¿µ" class="headerlink" title="æ¦‚å¿µ"></a>æ¦‚å¿µ</h2><p>å¿«é€Ÿæ’åº - <code>Quick Sort</code>ï¼šåˆç§°åˆ’åˆ†äº¤æ¢æ’åº - <code>partition-exchange sort</code>ï¼Œç®€ç§°å¿«æ’ï¼Œä¸€ç§æ’åºç®—æ³•ï¼Œæœ€æ—©ç”±<a href="https://zh.wikipedia.org/wiki/ä¸œå°¼Â·éœå°”">ä¸œå°¼Â·éœå°”</a>æå‡ºã€‚åœ¨å¹³å‡çŠ¶å†µä¸‹ï¼Œæ’åº <code>n</code> ä¸ªé¡¹ç›®è¦ <code>O(n log n)</code> æ¬¡æ¯”è¾ƒã€‚åœ¨æœ€åçŠ¶å†µä¸‹åˆ™éœ€è¦ <code>O(n^2)</code> æ¬¡æ¯”è¾ƒï¼Œä½†è¿™ç§çŠ¶å†µå¹¶ä¸å¸¸è§ã€‚äº‹å®ä¸Šï¼Œå¿«é€Ÿæ’åº <code>O(n log n)</code> é€šå¸¸æ˜æ˜¾æ¯”å…¶ä»–ç®—æ³•æ›´å¿«ï¼Œå› ä¸ºå®ƒçš„å†…éƒ¨å¾ªç¯ ï¼ˆ<code>inner loop</code>ï¼‰å¯ä»¥åœ¨å¤§éƒ¨åˆ†çš„æ¶æ„ä¸Šå¾ˆæœ‰æ•ˆç‡åœ°è¾¾æˆã€‚</p>
<h2 id="æ­¥éª¤"><a href="#æ­¥éª¤" class="headerlink" title="æ­¥éª¤"></a>æ­¥éª¤</h2><ol>
<li>ä»æ•°åˆ—ä¸­æŒ‘å‡ºä¸€ä¸ªå…ƒç´ ï¼Œç§°ä¸ºã€åŸºå‡†ã€- <code>pivot</code></li>
<li>é‡æ–°æ’åºæ•°åˆ—ï¼Œæ‰€æœ‰æ¯”åŸºå‡†å€¼å°çš„å…ƒç´ æ‘†æ”¾åœ¨åŸºå‡†å‰é¢ï¼Œæ‰€æœ‰æ¯”åŸºå‡†å€¼å¤§çš„å…ƒç´ æ‘†åœ¨åŸºå‡†åé¢ï¼ˆç›¸åŒçš„æ•°å¯ä»¥åˆ°ä»»ä½•ä¸€è¾¹ï¼‰ã€‚åœ¨è¿™ä¸ªåˆ†åŒºç»“æŸä¹‹åï¼Œè¯¥åŸºå‡†å°±å¤„äºæ•°åˆ—çš„ä¸­é—´ä½ç½®ã€‚è¿™ä¸ªç§°ä¸ºåˆ†åŒºï¼ˆ<code>partition</code>ï¼‰æ“ä½œ</li>
<li>é€’å½’åœ°ï¼ˆ<code>recursively</code>ï¼‰æŠŠå°äºåŸºå‡†å€¼å…ƒç´ çš„å­æ•°åˆ—å’Œå¤§äºåŸºå‡†å€¼å…ƒç´ çš„å­æ•°åˆ—æ’åº</li>
</ol>
<h2 id="å®ç°"><a href="#å®ç°" class="headerlink" title="å®ç°"></a>å®ç°</h2><h3 id="æ–¹æ¡ˆä¸€"><a href="#æ–¹æ¡ˆä¸€" class="headerlink" title="æ–¹æ¡ˆä¸€"></a>æ–¹æ¡ˆä¸€</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">QuickSort</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ä¸»è¿è¡Œæ–¹æ³•</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> void</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">main</span>(<span class="params"></span>): <span class="title">void</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="variable">$random</span> = <span class="built_in">self</span>::random();</span><br><span class="line">        <span class="variable">$array</span> = <span class="built_in">self</span>::sort(<span class="variable">$random</span>);</span><br><span class="line">        print_r(<span class="variable">$array</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å¿«é€Ÿæ’åº</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> array $array</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> array</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">sort</span>(<span class="params"><span class="keyword">array</span> &amp;<span class="variable">$array</span></span>): <span class="title">array</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="variable">$count</span> = count(<span class="variable">$array</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (<span class="variable">$count</span> &lt;= <span class="number">1</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="variable">$array</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="variable">$pivot</span> = <span class="variable">$array</span>[<span class="number">0</span>]; <span class="comment">// å–æ•°ç»„ç¬¬ä¸€ä¸ªå…ƒç´ ä¸ºåŸºå‡†å€¼</span></span><br><span class="line"></span><br><span class="line">        <span class="variable">$left</span> = <span class="variable">$right</span> = [];</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="variable">$i</span> = <span class="number">1</span>; <span class="variable">$i</span> &lt; <span class="variable">$count</span>; <span class="variable">$i</span>++) &#123;</span><br><span class="line">            <span class="variable">$value</span> = <span class="variable">$array</span>[<span class="variable">$i</span>];</span><br><span class="line">            <span class="keyword">if</span> (<span class="built_in">self</span>::compare(<span class="variable">$pivot</span>, <span class="variable">$value</span>) &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="variable">$left</span>[] = <span class="variable">$array</span>[<span class="variable">$i</span>];</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="variable">$right</span>[] = <span class="variable">$array</span>[<span class="variable">$i</span>];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="variable">$left</span> = <span class="built_in">self</span>::sort(<span class="variable">$left</span>);</span><br><span class="line">        <span class="variable">$right</span> = <span class="built_in">self</span>::sort(<span class="variable">$right</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> array_merge(<span class="variable">$left</span>, (<span class="keyword">array</span>)<span class="variable">$pivot</span>, <span class="variable">$right</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ¯”è¾ƒå¤§å°</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> int $x</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> int $y</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> int</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">compare</span>(<span class="params"><span class="keyword">int</span> <span class="variable">$x</span>, <span class="keyword">int</span> <span class="variable">$y</span></span>): <span class="title">int</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable">$x</span> &lt;=&gt; <span class="variable">$y</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * äº’æ¢ä½ç½®</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> int $x</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> int $y</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> void</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">swap</span>(<span class="params"><span class="keyword">int</span> &amp;<span class="variable">$x</span>, <span class="keyword">int</span> &amp;<span class="variable">$y</span></span>): <span class="title">void</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="variable">$x</span> !== <span class="variable">$y</span>) &#123;</span><br><span class="line">            <span class="variable">$t</span> = <span class="variable">$x</span>;</span><br><span class="line">            <span class="variable">$x</span> = <span class="variable">$y</span>;</span><br><span class="line">            <span class="variable">$y</span> = <span class="variable">$t</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ç”Ÿæˆéšæœºæ•°ç»„</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> int $low</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> int $high</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> int $num</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> array</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">random</span>(<span class="params"><span class="keyword">int</span> <span class="variable">$low</span> = <span class="number">1</span>, <span class="keyword">int</span> <span class="variable">$high</span> = <span class="number">9999</span>, <span class="keyword">int</span> <span class="variable">$num</span> = <span class="number">10</span></span>): <span class="title">array</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="variable">$num</span> = <span class="variable">$num</span> &gt; <span class="variable">$high</span> ? <span class="variable">$high</span> : <span class="variable">$num</span>;</span><br><span class="line">        <span class="variable">$range</span> = range(<span class="variable">$low</span>, <span class="variable">$high</span>);</span><br><span class="line">        <span class="variable">$array</span> = array_rand(array_flip(<span class="variable">$range</span>), <span class="variable">$num</span>);</span><br><span class="line">        shuffle(<span class="variable">$array</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="variable">$array</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">QuickSort::main();</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»“æœ</span></span><br><span class="line"><span class="keyword">Array</span></span><br><span class="line">(</span><br><span class="line">    [<span class="number">0</span>] =&gt; <span class="number">1073</span></span><br><span class="line">    [<span class="number">1</span>] =&gt; <span class="number">1535</span></span><br><span class="line">    [<span class="number">2</span>] =&gt; <span class="number">3376</span></span><br><span class="line">    [<span class="number">3</span>] =&gt; <span class="number">3702</span></span><br><span class="line">    [<span class="number">4</span>] =&gt; <span class="number">3961</span></span><br><span class="line">    [<span class="number">5</span>] =&gt; <span class="number">4139</span></span><br><span class="line">    [<span class="number">6</span>] =&gt; <span class="number">4644</span></span><br><span class="line">    [<span class="number">7</span>] =&gt; <span class="number">5032</span></span><br><span class="line">    [<span class="number">8</span>] =&gt; <span class="number">5803</span></span><br><span class="line">    [<span class="number">9</span>] =&gt; <span class="number">6450</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<h3 id="æ–¹æ¡ˆäºŒ"><a href="#æ–¹æ¡ˆäºŒ" class="headerlink" title="æ–¹æ¡ˆäºŒ"></a>æ–¹æ¡ˆäºŒ</h3><p>ä½¿ç”¨ <code>Lomuto partition scheme</code> æ–¹å¼</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">QuickSort</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ä¸»è¿è¡Œæ–¹æ³•</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> void</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">main</span>(<span class="params"></span>): <span class="title">void</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="variable">$random</span> = <span class="built_in">self</span>::random();</span><br><span class="line">        <span class="variable">$array</span> = <span class="built_in">self</span>::sort(<span class="variable">$random</span>, <span class="number">0</span>, count(<span class="variable">$random</span>) - <span class="number">1</span>);</span><br><span class="line">        print_r(<span class="variable">$array</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å¿«é€Ÿæ’åº</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> array $array</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> int   $low</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> int   $high</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> array</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">sort</span>(<span class="params"><span class="keyword">array</span> &amp;<span class="variable">$array</span>, <span class="keyword">int</span> <span class="variable">$low</span>, <span class="keyword">int</span> <span class="variable">$high</span></span>): <span class="title">array</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="variable">$low</span> &lt; <span class="variable">$high</span>) &#123;</span><br><span class="line">            <span class="variable">$index</span> = <span class="built_in">self</span>::partition(<span class="variable">$array</span>, <span class="variable">$low</span>, <span class="variable">$high</span>);</span><br><span class="line">            <span class="built_in">self</span>::sort(<span class="variable">$array</span>, <span class="variable">$low</span>, <span class="variable">$index</span> - <span class="number">1</span>);</span><br><span class="line">            <span class="built_in">self</span>::sort(<span class="variable">$array</span>, <span class="variable">$index</span> + <span class="number">1</span>, <span class="variable">$high</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="variable">$array</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åŸåœ°åˆ†åŒº</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> array $array</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> int   $low</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> int   $high</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> int</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">partition</span>(<span class="params"><span class="keyword">array</span> &amp;<span class="variable">$array</span>, <span class="keyword">int</span> <span class="variable">$low</span>, <span class="keyword">int</span> <span class="variable">$high</span></span>): <span class="title">int</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="variable">$pivot</span> = <span class="variable">$array</span>[<span class="variable">$high</span>]; <span class="comment">// é€‰å–æœ€å³è¾¹çš„å…ƒç´ ä¸ºåŸºå‡†</span></span><br><span class="line">        <span class="variable">$i</span> = <span class="variable">$low</span> - <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="variable">$j</span> = <span class="variable">$low</span>; <span class="variable">$j</span> &lt; <span class="variable">$high</span>; <span class="variable">$j</span>++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (<span class="built_in">self</span>::compare(<span class="variable">$pivot</span>, <span class="variable">$array</span>[<span class="variable">$j</span>]) &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="variable">$i</span>++;</span><br><span class="line">                <span class="built_in">self</span>::swap(<span class="variable">$array</span>[<span class="variable">$i</span>], <span class="variable">$array</span>[<span class="variable">$j</span>]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">self</span>::swap(<span class="variable">$array</span>[<span class="variable">$i</span> + <span class="number">1</span>], <span class="variable">$array</span>[<span class="variable">$high</span>]);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="variable">$i</span> + <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ¯”è¾ƒå¤§å°</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> int $x</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> int $y</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> int</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">compare</span>(<span class="params"><span class="keyword">int</span> <span class="variable">$x</span>, <span class="keyword">int</span> <span class="variable">$y</span></span>): <span class="title">int</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable">$x</span> &lt;=&gt; <span class="variable">$y</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * äº’æ¢ä½ç½®</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> int $x</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> int $y</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> void</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">swap</span>(<span class="params"><span class="keyword">int</span> &amp;<span class="variable">$x</span>, <span class="keyword">int</span> &amp;<span class="variable">$y</span></span>): <span class="title">void</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="variable">$x</span> !== <span class="variable">$y</span>) &#123;</span><br><span class="line">            <span class="variable">$t</span> = <span class="variable">$x</span>;</span><br><span class="line">            <span class="variable">$x</span> = <span class="variable">$y</span>;</span><br><span class="line">            <span class="variable">$y</span> = <span class="variable">$t</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ç”Ÿæˆéšæœºæ•°ç»„</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> int $low</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> int $high</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> int $num</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> array</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">random</span>(<span class="params"><span class="keyword">int</span> <span class="variable">$low</span> = <span class="number">1</span>, <span class="keyword">int</span> <span class="variable">$high</span> = <span class="number">9999</span>, <span class="keyword">int</span> <span class="variable">$num</span> = <span class="number">10</span></span>): <span class="title">array</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="variable">$num</span> = <span class="variable">$num</span> &gt; <span class="variable">$high</span> ? <span class="variable">$high</span> : <span class="variable">$num</span>;</span><br><span class="line">        <span class="variable">$range</span> = range(<span class="variable">$low</span>, <span class="variable">$high</span>);</span><br><span class="line">        <span class="variable">$array</span> = array_rand(array_flip(<span class="variable">$range</span>), <span class="variable">$num</span>);</span><br><span class="line">        shuffle(<span class="variable">$array</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="variable">$array</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">QuickSort::main();</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»“æœ</span></span><br><span class="line"><span class="keyword">Array</span></span><br><span class="line">(</span><br><span class="line">    [<span class="number">0</span>] =&gt; <span class="number">1411</span></span><br><span class="line">    [<span class="number">1</span>] =&gt; <span class="number">3434</span></span><br><span class="line">    [<span class="number">2</span>] =&gt; <span class="number">3776</span></span><br><span class="line">    [<span class="number">3</span>] =&gt; <span class="number">6020</span></span><br><span class="line">    [<span class="number">4</span>] =&gt; <span class="number">6047</span></span><br><span class="line">    [<span class="number">5</span>] =&gt; <span class="number">6367</span></span><br><span class="line">    [<span class="number">6</span>] =&gt; <span class="number">7107</span></span><br><span class="line">    [<span class="number">7</span>] =&gt; <span class="number">7783</span></span><br><span class="line">    [<span class="number">8</span>] =&gt; <span class="number">9135</span></span><br><span class="line">    [<span class="number">9</span>] =&gt; <span class="number">9248</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<h3 id="æ–¹æ¡ˆä¸‰"><a href="#æ–¹æ¡ˆä¸‰" class="headerlink" title="æ–¹æ¡ˆä¸‰"></a>æ–¹æ¡ˆä¸‰</h3><p>ä½¿ç”¨ <code>Hoare partition scheme</code> æ–¹å¼</p>
<p>æœªå®Œå¾…ç»­â€¦</p>
]]></content>
      <categories>
        <category>php</category>
      </categories>
      <tags>
        <tag>php</tag>
        <tag>algorithm</tag>
      </tags>
  </entry>
  <entry>
    <title>RabbitMQ è¿è¡Œå’Œç®¡ç†</title>
    <url>/2018/08/24/rabbitmq-management/</url>
    <content><![CDATA[<span id="more"></span>
<h1 id="å‘½ä»¤è¡Œç®¡ç†"><a href="#å‘½ä»¤è¡Œç®¡ç†" class="headerlink" title="å‘½ä»¤è¡Œç®¡ç†"></a>å‘½ä»¤è¡Œç®¡ç†</h1><h2 id="è¿è¡Œç®¡ç†"><a href="#è¿è¡Œç®¡ç†" class="headerlink" title="è¿è¡Œç®¡ç†"></a>è¿è¡Œç®¡ç†</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// å¯åŠ¨ RabbitMQ</span><br><span class="line">$ sudo systemctl start rabbitmq-server.service</span><br><span class="line"></span><br><span class="line">// åœæ­¢ RabbitMQ</span><br><span class="line">$ sudo systemctl stop rabbitmq-server.service</span><br><span class="line"></span><br><span class="line">// é‡å¯ RabbitMQ</span><br><span class="line">$ sudo systemctl restart rabbitmq-server.service</span><br><span class="line"></span><br><span class="line">// æŸ¥çœ‹ RabbitMQ çŠ¶æ€</span><br><span class="line">$ sudo systemctl status rabbitmq-server.service</span><br></pre></td></tr></table></figure>
<h2 id="ç”¨æˆ·ç®¡ç†"><a href="#ç”¨æˆ·ç®¡ç†" class="headerlink" title="ç”¨æˆ·ç®¡ç†"></a>ç”¨æˆ·ç®¡ç†</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// åˆ›å»ºç”¨æˆ·</span><br><span class="line">$ sudo /usr/sbin/rabbitmqctl add_user user 123456</span><br><span class="line">Creating user <span class="string">&quot;user&quot;</span> ...</span><br><span class="line">...<span class="keyword">done</span>.</span><br><span class="line"></span><br><span class="line">// åˆ é™¤ç”¨æˆ·</span><br><span class="line">$ sudo /usr/sbin/rabbitmqctl delete_user user</span><br><span class="line">Deleting user <span class="string">&quot;user&quot;</span> ...</span><br><span class="line">...<span class="keyword">done</span>.</span><br><span class="line"></span><br><span class="line">// æŸ¥çœ‹ç”¨æˆ·åˆ—è¡¨</span><br><span class="line">$ sudo /usr/sbin/rabbitmqctl list_users</span><br><span class="line">Listing users ...</span><br><span class="line">guest	[administrator]</span><br><span class="line">...<span class="keyword">done</span>.</span><br><span class="line"></span><br><span class="line">// æ›´æ”¹ç”¨æˆ·å¯†ç </span><br><span class="line">$ sudo /usr/sbin/rabbitmqctl change_password user 123456</span><br><span class="line">Changing password <span class="keyword">for</span> user <span class="string">&quot;user&quot;</span> ...</span><br><span class="line">...<span class="keyword">done</span>.</span><br></pre></td></tr></table></figure>
<h2 id="è™šæ‹Ÿæœºç®¡ç†"><a href="#è™šæ‹Ÿæœºç®¡ç†" class="headerlink" title="è™šæ‹Ÿæœºç®¡ç†"></a>è™šæ‹Ÿæœºç®¡ç†</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// åˆ›å»ºè™šæ‹Ÿæœº</span><br><span class="line">$ sudo /usr/sbin/rabbitmqctl add_vhost test_vhost</span><br><span class="line">Creating vhost <span class="string">&quot;test_vhost&quot;</span> ...</span><br><span class="line">...<span class="keyword">done</span>.</span><br><span class="line"></span><br><span class="line">// åˆ é™¤è™šæ‹Ÿæœº</span><br><span class="line">$ sudo /usr/sbin/rabbitmqctl delete_vhost test_vhost</span><br><span class="line">Deleting vhost <span class="string">&quot;test_vhost&quot;</span> ...</span><br><span class="line">...<span class="keyword">done</span>.</span><br><span class="line"></span><br><span class="line">// æŸ¥çœ‹è™šæ‹Ÿæœºåˆ—è¡¨</span><br><span class="line">$ sudo /usr/sbin/rabbitmqctl list_vhosts</span><br><span class="line">Listing vhosts ...</span><br><span class="line">/</span><br><span class="line">...<span class="keyword">done</span>.</span><br></pre></td></tr></table></figure>
<h2 id="æƒé™æ§åˆ¶"><a href="#æƒé™æ§åˆ¶" class="headerlink" title="æƒé™æ§åˆ¶"></a>æƒé™æ§åˆ¶</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// æˆäºˆ user ç”¨æˆ·å®Œå…¨çš„è®¿é—®æƒé™ï¼ˆé…ç½®ã€å†™å’Œè¯»æƒé™ï¼‰</span><br><span class="line">$ sudo /usr/sbin/rabbitmqctl set_permissions -p test_vhost user <span class="string">&quot;.*&quot;</span> <span class="string">&quot;.*&quot;</span> <span class="string">&quot;.*&quot;</span></span><br><span class="line">Setting permissions <span class="keyword">for</span> user <span class="string">&quot;user&quot;</span> <span class="keyword">in</span> vhost <span class="string">&quot;test_vhost&quot;</span> ...</span><br><span class="line">...<span class="keyword">done</span>.</span><br><span class="line"></span><br><span class="line">// éªŒè¯æƒé™æ˜¯å¦èµ‹äºˆç»™äº† test_vhost è™šæ‹Ÿæœº</span><br><span class="line">$ sudo /usr/sbin/rabbitmqctl list_permissions -p test_vhost</span><br><span class="line">Listing permissions <span class="keyword">in</span> vhost <span class="string">&quot;test_vhost&quot;</span> ...</span><br><span class="line">user	.*	.*	.*</span><br><span class="line">...<span class="keyword">done</span>.</span><br><span class="line"></span><br><span class="line">// ç§»é™¤ç”¨æˆ·åœ¨ test_vhost è™šæ‹Ÿæœºä¸Šçš„æƒé™</span><br><span class="line">$ sudo /usr/sbin/rabbitmqctl clear_permissions -p test_vhost user</span><br><span class="line">Clearing permissions <span class="keyword">for</span> user <span class="string">&quot;user&quot;</span> <span class="keyword">in</span> vhost <span class="string">&quot;test_vhost&quot;</span> ...</span><br><span class="line">...<span class="keyword">done</span>.</span><br></pre></td></tr></table></figure>
<h1 id="Web-ç«¯ç®¡ç†"><a href="#Web-ç«¯ç®¡ç†" class="headerlink" title="Web ç«¯ç®¡ç†"></a>Web ç«¯ç®¡ç†</h1><h2 id="å®‰è£…-Management-æ’ä»¶"><a href="#å®‰è£…-Management-æ’ä»¶" class="headerlink" title="å®‰è£… Management æ’ä»¶"></a>å®‰è£… Management æ’ä»¶</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// æŸ¥çœ‹ RabbitMQ å†…ç½®çš„æ’ä»¶</span><br><span class="line">$ <span class="built_in">cd</span> /usr/lib/rabbitmq/lib/rabbitmq_server-3.3.5/plugins &amp;&amp; ll</span><br><span class="line">total 2.7M</span><br><span class="line">-rw-r--r-- 1 root root 250K Mar 24  2017 amqp_client-3.3.5.ez</span><br><span class="line">-rw-r--r-- 1 root root 225K Mar 24  2017 cowboy-0.5.0-rmq3.3.5-git4b93c2d.ez</span><br><span class="line">-rw-r--r-- 1 root root  95K Mar 24  2017 eldap-3.3.5-gite309de4.ez</span><br><span class="line">-rw-r--r-- 1 root root 269K Mar 24  2017 mochiweb-2.7.0-rmq3.3.5-git680dba8.ez</span><br><span class="line">-rw-r--r-- 1 root root 202K Mar 24  2017 rabbitmq_amqp1_0-3.3.5.ez</span><br><span class="line">-rw-r--r-- 1 root root  22K Mar 24  2017 rabbitmq_auth_backend_ldap-3.3.5.ez</span><br><span class="line">-rw-r--r-- 1 root root  13K Mar 24  2017 rabbitmq_auth_mechanism_ssl-3.3.5.ez</span><br><span class="line">-rw-r--r-- 1 root root 8.3K Mar 24  2017 rabbitmq_consistent_hash_exchange-3.3.5.ez</span><br><span class="line">-rw-r--r-- 1 root root 149K Mar 24  2017 rabbitmq_federation-3.3.5.ez</span><br><span class="line">-rw-r--r-- 1 root root  12K Mar 24  2017 rabbitmq_federation_management-3.3.5.ez</span><br><span class="line">-rw-r--r-- 1 root root 631K Mar 24  2017 rabbitmq_management-3.3.5.ez</span><br><span class="line">-rw-r--r-- 1 root root  18K Mar 24  2017 rabbitmq_management_agent-3.3.5.ez</span><br><span class="line">-rw-r--r-- 1 root root  41K Mar 24  2017 rabbitmq_management_visualiser-3.3.5.ez</span><br><span class="line">-rw-r--r-- 1 root root  64K Mar 24  2017 rabbitmq_mqtt-3.3.5.ez</span><br><span class="line">-rw-r--r-- 1 root root  69K Mar 24  2017 rabbitmq_shovel-3.3.5.ez</span><br><span class="line">-rw-r--r-- 1 root root  19K Mar 24  2017 rabbitmq_shovel_management-3.3.5.ez</span><br><span class="line">-rw-r--r-- 1 root root  91K Mar 24  2017 rabbitmq_stomp-3.3.5.ez</span><br><span class="line">-rw-r--r-- 1 root root  73K Mar 24  2017 rabbitmq_test-3.3.5.ez</span><br><span class="line">-rw-r--r-- 1 root root  44K Mar 24  2017 rabbitmq_tracing-3.3.5.ez</span><br><span class="line">-rw-r--r-- 1 root root  26K Mar 24  2017 rabbitmq_web_dispatch-3.3.5.ez</span><br><span class="line">-rw-r--r-- 1 root root  19K Mar 24  2017 rabbitmq_web_stomp-3.3.5.ez</span><br><span class="line">-rw-r--r-- 1 root root  51K Mar 24  2017 rabbitmq_web_stomp_examples-3.3.5.ez</span><br><span class="line">-rw-r--r-- 1 root root   59 Mar 24  2017 README</span><br><span class="line">-rw-r--r-- 1 root root  92K Mar 24  2017 sockjs-0.3.4-rmq3.3.5-git3132eb9.ez</span><br><span class="line">-rw-r--r-- 1 root root 165K Mar 24  2017 webmachine-1.10.3-rmq3.3.5-gite9359c7.ez</span><br><span class="line"></span><br><span class="line">// å®‰è£… Web ç«¯ç®¡ç†æ’ä»¶</span><br><span class="line">$ sudo /usr/sbin/rabbitmq-plugins <span class="built_in">enable</span> rabbitmq_management</span><br><span class="line">The following plugins have been enabled:</span><br><span class="line">  mochiweb</span><br><span class="line">  webmachine</span><br><span class="line">  rabbitmq_web_dispatch</span><br><span class="line">  amqp_client</span><br><span class="line">  rabbitmq_management_agent</span><br><span class="line">  rabbitmq_management</span><br><span class="line">Plugin configuration has changed. Restart RabbitMQ <span class="keyword">for</span> changes to take effect.</span><br><span class="line"></span><br><span class="line">// é‡å¯ RabbitMQ å³å¯ä»æµè§ˆå™¨è®¿é—®</span><br><span class="line">$ sudo systemctl restart rabbitmq-server.service</span><br></pre></td></tr></table></figure>
<h1 id="Api-ç®¡ç†"><a href="#Api-ç®¡ç†" class="headerlink" title="Api ç®¡ç†"></a>Api ç®¡ç†</h1><p>æœªå®Œå¾…ç»­â€¦</p>
]]></content>
      <categories>
        <category>rabbitmq</category>
      </categories>
      <tags>
        <tag>rabbitmq</tag>
      </tags>
  </entry>
  <entry>
    <title>PHP æºç å­¦ä¹ ä¸€</title>
    <url>/2021/09/12/php-src-learning1/</url>
    <content><![CDATA[<p>ğŸ¤·â€â™‚ï¸ çœ‹åˆ°æ…•è¯¾ç½‘æœ‰å¤§ä½¬è®²è§£ PHP æºç ï¼Œæ—¢ç„¶æ¥äº†ï¼Œé‚£å°±çœ‹çœ‹å§ï¼Œä»¥ä¸‹ä¸ºæ•´ç†çš„ç¬”è®°ã€‚</p>
<span id="more"></span>
<ul>
<li><a href="https://imajinyun.xyz/2021/09/12/php-src-learning1/"><strong>PHP æºç å­¦ä¹ ä¸€</strong></a></li>
<li><a href="https://imajinyun.xyz/2021/09/13/php-src-learning2/"><code>PHP æºç å­¦ä¹ äºŒ</code></a></li>
</ul>
<h1 id="ç¯å¢ƒå‡†å¤‡"><a href="#ç¯å¢ƒå‡†å¤‡" class="headerlink" title="ç¯å¢ƒå‡†å¤‡"></a>ç¯å¢ƒå‡†å¤‡</h1><ul>
<li><a href="https://www.vagrantup.com/docs/boxes">Boxes</a></li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// ä¹‹æ‰€ä»¥ä½¿ç”¨ hashicorp/bionic64ï¼Œæ˜¯å› ä¸ºè¿™ä¸ªé•œåƒæ˜¯å®˜æ–¹çš„ï¼Œå‘å°‘è€Œå·²</span><br><span class="line">$ vagrant init hashicorp/bionic64</span><br><span class="line"></span><br><span class="line">// è¿™æ˜¯æˆ‘æœ¬åœ°å·²ç»å®‰è£…çš„ä¸€äº›é•œåƒï¼Œæœ‰äº†é•œåƒå°±å¯ä»¥åœ¨å‡ åˆ†é’Ÿä¹‹å†…ç™»å½•åˆ°ä¸€å°å…¨æ–°çš„ Linux ç³»ç»Ÿä¸­</span><br><span class="line">$ vagrant box list</span><br><span class="line">centos/7           (virtualbox, 2004.01)</span><br><span class="line">hashicorp/bionic64 (virtualbox, 1.0.282)</span><br><span class="line">laravel/homestead  (virtualbox, 9.7.2)</span><br><span class="line">ubuntu/xenial64    (virtualbox, 20210804.0.0)</span><br><span class="line"></span><br><span class="line">// éœ€è¦æ¼«é•¿çš„ç­‰å¾…ï¼Œæœ‰å¯èƒ½è¿˜éœ€è¦ç¿»å¢™ï¼Œæˆ–è€…ä½ å¯ä»¥ä¸‹è½½é•œåƒåé€‰æ‹©å¯¼å…¥</span><br><span class="line">$ vagrant up</span><br></pre></td></tr></table></figure>
<h1 id="ç¼–è¯‘å®‰è£…"><a href="#ç¼–è¯‘å®‰è£…" class="headerlink" title="ç¼–è¯‘å®‰è£…"></a>ç¼–è¯‘å®‰è£…</h1><blockquote>
<p>å¦‚æœä» <a href="https://www.php.net/downloads">å®˜ç½‘</a> ä¸‹è½½ï¼Œä¸éœ€è¦è¿›è¡Œ <code>autoconf</code>ï¼›å¦‚æœä» <a href="https://github.com/php/php-src/tags">Github</a> ä¸‹è½½ï¼Œéœ€è¦åœ¨è§£å‹ç›®å½•ä¸­æ‰§è¡Œ <code>autoconf</code>ï¼Œç»è¿‡æœ¬äººå®‰è£…æŠ˜è…¾ï¼Œè®¤ä¸ºä»å®˜ç½‘ä¸‹è½½çš„åŒ…å®‰è£…æ¯”è¾ƒé¡ºåˆ©ã€‚</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ sudo -s</span><br><span class="line"><span class="comment"># apt-get update &amp;&amp; apt-get upgrade</span></span><br><span class="line"><span class="comment"># apt-get install autoconf bison re2c pkg-config libxml2-dev libsqlite3-dev gdb -y</span></span><br><span class="line"><span class="comment"># cd ~ &amp;&amp; mkdir codes</span></span><br><span class="line"><span class="comment"># cd ~/vagrant</span></span><br><span class="line"></span><br><span class="line">// å®‰è£… php80</span><br><span class="line"><span class="comment"># tar -zxvf php-src-php-8.0.1.tar.gz</span></span><br><span class="line"><span class="comment"># cd php-src-php-8.0.1</span></span><br><span class="line"><span class="comment"># autoconf</span></span><br><span class="line"><span class="comment"># ./configure --prefix=/home/vagrant/codes/php80 --enable-fpm --enable-debug</span></span><br><span class="line"><span class="comment"># make &amp;&amp; make install</span></span><br><span class="line">Installing shared extensions:     /home/vagrant/codes/php80/lib/php/extensions/debug-non-zts-20200930/</span><br><span class="line">Installing PHP CLI binary:        /home/vagrant/codes/php80/bin/</span><br><span class="line">Installing PHP CLI man page:      /home/vagrant/codes/php80/php/man/man1/</span><br><span class="line">Installing PHP FPM binary:        /home/vagrant/codes/php80/sbin/</span><br><span class="line">Installing PHP FPM defconfig:     /home/vagrant/codes/php80/etc/</span><br><span class="line">Installing PHP FPM man page:      /home/vagrant/codes/php80/php/man/man8/</span><br><span class="line">Installing PHP FPM status page:   /home/vagrant/codes/php80/php/php/fpm/</span><br><span class="line">Installing phpdbg binary:         /home/vagrant/codes/php80/bin/</span><br><span class="line">Installing phpdbg man page:       /home/vagrant/codes/php80/php/man/man1/</span><br><span class="line">Installing PHP CGI binary:        /home/vagrant/codes/php80/bin/</span><br><span class="line">Installing PHP CGI man page:      /home/vagrant/codes/php80/php/man/man1/</span><br><span class="line">Installing build environment:     /home/vagrant/codes/php80/lib/php/build/</span><br><span class="line">Installing header files:          /home/vagrant/codes/php80/include/php/</span><br><span class="line">Installing helper programs:       /home/vagrant/codes/php80/bin/</span><br><span class="line">  program: phpize</span><br><span class="line">  program: php-config</span><br><span class="line">Installing man pages:             /home/vagrant/codes/php80/php/man/man1/</span><br><span class="line">  page: phpize.1</span><br><span class="line">  page: php-config.1</span><br><span class="line">/vagrant/php-8.0.10/build/shtool install -c ext/phar/phar.phar /home/vagrant/codes/php80/bin/phar.phar</span><br><span class="line">ln -s -f phar.phar /home/vagrant/codes/php80/bin/phar</span><br><span class="line">Installing PDO headers:           /home/vagrant/codes/php80/include/php/ext/pdo/</span><br><span class="line"></span><br><span class="line">// å®‰è£… php74</span><br><span class="line"><span class="comment"># tar -zxvf php-src-php-7.4.23.tar.gz</span></span><br><span class="line"><span class="comment"># cd php-src-php-7.4.23</span></span><br><span class="line"><span class="comment"># autoconf</span></span><br><span class="line"><span class="comment"># ./configure --prefix=/home/vagrant/codes/php74 --enable-fpm --enable-debug</span></span><br><span class="line"><span class="comment"># make &amp;&amp; make install</span></span><br><span class="line">Installing shared extensions:     /home/vagrant/codes/php74/lib/php/extensions/debug-non-zts-20190902/</span><br><span class="line">Installing PHP CLI binary:        /home/vagrant/codes/php74/bin/</span><br><span class="line">Installing PHP CLI man page:      /home/vagrant/codes/php74/php/man/man1/</span><br><span class="line">Installing PHP FPM binary:        /home/vagrant/codes/php74/sbin/</span><br><span class="line">Installing PHP FPM defconfig:     /home/vagrant/codes/php74/etc/</span><br><span class="line">Installing PHP FPM man page:      /home/vagrant/codes/php74/php/man/man8/</span><br><span class="line">Installing PHP FPM status page:   /home/vagrant/codes/php74/php/php/fpm/</span><br><span class="line">Installing phpdbg binary:         /home/vagrant/codes/php74/bin/</span><br><span class="line">Installing phpdbg man page:       /home/vagrant/codes/php74/php/man/man1/</span><br><span class="line">Installing PHP CGI binary:        /home/vagrant/codes/php74/bin/</span><br><span class="line">Installing PHP CGI man page:      /home/vagrant/codes/php74/php/man/man1/</span><br><span class="line">Installing build environment:     /home/vagrant/codes/php74/lib/php/build/</span><br><span class="line">Installing header files:          /home/vagrant/codes/php74/include/php/</span><br><span class="line">Installing helper programs:       /home/vagrant/codes/php74/bin/</span><br><span class="line">  program: phpize</span><br><span class="line">  program: php-config</span><br><span class="line">Installing man pages:             /home/vagrant/codes/php74/php/man/man1/</span><br><span class="line">  page: phpize.1</span><br><span class="line">  page: php-config.1</span><br><span class="line">/vagrant/php-7.4.23/build/shtool install -c ext/phar/phar.phar /home/vagrant/codes/php74/bin/phar.phar</span><br><span class="line">ln -s -f phar.phar /home/vagrant/codes/php74/bin/phar</span><br><span class="line">Installing PDO headers:           /home/vagrant/codes/php74/include/php/ext/pdo/</span><br><span class="line"></span><br><span class="line">// å®‰è£… php73</span><br><span class="line"></span><br><span class="line"><span class="comment"># tar -zxvf php-src-php-7.3.30.tar.gz</span></span><br><span class="line"><span class="comment"># cd php-src-php-7.3.30</span></span><br><span class="line"><span class="comment"># autoconf</span></span><br><span class="line"><span class="comment"># ./configure --prefix=/home/vagrant/codes/php73 --enable-fpm --enable-debug</span></span><br><span class="line">Installing shared extensions:     /home/vagrant/codes/php73/lib/php/extensions/debug-non-zts-20180731/</span><br><span class="line">Installing PHP CLI binary:        /home/vagrant/codes/php73/bin/</span><br><span class="line">Installing PHP CLI man page:      /home/vagrant/codes/php73/php/man/man1/</span><br><span class="line">Installing PHP FPM binary:        /home/vagrant/codes/php73/sbin/</span><br><span class="line">Installing PHP FPM defconfig:     /home/vagrant/codes/php73/etc/</span><br><span class="line">Installing PHP FPM man page:      /home/vagrant/codes/php73/php/man/man8/</span><br><span class="line">Installing PHP FPM status page:   /home/vagrant/codes/php73/php/php/fpm/</span><br><span class="line">Installing phpdbg binary:         /home/vagrant/codes/php73/bin/</span><br><span class="line">Installing phpdbg man page:       /home/vagrant/codes/php73/php/man/man1/</span><br><span class="line">Installing PHP CGI binary:        /home/vagrant/codes/php73/bin/</span><br><span class="line">Installing PHP CGI man page:      /home/vagrant/codes/php73/php/man/man1/</span><br><span class="line">Installing build environment:     /home/vagrant/codes/php73/lib/php/build/</span><br><span class="line">Installing header files:          /home/vagrant/codes/php73/include/php/</span><br><span class="line">Installing helper programs:       /home/vagrant/codes/php73/bin/</span><br><span class="line">  program: phpize</span><br><span class="line">  program: php-config</span><br><span class="line">Installing man pages:             /home/vagrant/codes/php73/php/man/man1/</span><br><span class="line">  page: phpize.1</span><br><span class="line">  page: php-config.1</span><br><span class="line">Installing PEAR environment:      /home/vagrant/codes/php73/lib/php/</span><br><span class="line">[PEAR] Archive_Tar    - installed: 1.4.14</span><br><span class="line">[PEAR] Console_Getopt - installed: 1.4.3</span><br><span class="line">[PEAR] Structures_Graph- installed: 1.1.1</span><br><span class="line">[PEAR] XML_Util       - installed: 1.4.5</span><br><span class="line">warning: pear/PEAR dependency package <span class="string">&quot;pear/Archive_Tar&quot;</span> installed version 1.4.14 is not the recommended version 1.4.4</span><br><span class="line">[PEAR] PEAR           - installed: 1.10.13</span><br><span class="line">Wrote PEAR system config file at: /home/vagrant/codes/php73/etc/pear.conf</span><br><span class="line">You may want to add: /home/vagrant/codes/php73/lib/php to your php.ini include_path</span><br><span class="line">/vagrant/php-7.3.30/build/shtool install -c ext/phar/phar.phar /home/vagrant/codes/php73/bin</span><br><span class="line">ln -s -f phar.phar /home/vagrant/codes/php73/bin/phar</span><br><span class="line">Installing PDO headers:           /home/vagrant/codes/php73/include/php/ext/pdo/</span><br></pre></td></tr></table></figure>
<h1 id="åŸºå‡†æµ‹è¯•"><a href="#åŸºå‡†æµ‹è¯•" class="headerlink" title="åŸºå‡†æµ‹è¯•"></a>åŸºå‡†æµ‹è¯•</h1><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ sudo -s</span><br><span class="line"></span><br><span class="line">// php80 åŸºå‡†æµ‹è¯•</span><br><span class="line"><span class="comment"># /home/vagrant/codes/php80/bin/php /vagrant/php-8.0.10/Zend/bench.php</span></span><br><span class="line">simple             0.042</span><br><span class="line">simplecall         0.018</span><br><span class="line">simpleucall        0.076</span><br><span class="line">simpleudcall       0.090</span><br><span class="line">mandel             0.401</span><br><span class="line">mandel2            0.356</span><br><span class="line">ackermann(7)       0.100</span><br><span class="line">ary(50000)         0.019</span><br><span class="line">ary2(50000)        0.021</span><br><span class="line">ary3(2000)         0.213</span><br><span class="line">fibo(30)           0.312</span><br><span class="line">hash1(50000)       0.051</span><br><span class="line">hash2(500)         0.054</span><br><span class="line">heapsort(20000)    0.109</span><br><span class="line">matrix(20)         0.119</span><br><span class="line">nestedloop(12)     0.085</span><br><span class="line">sieve(30)          0.080</span><br><span class="line">strcat(200000)     0.029</span><br><span class="line">------------------------</span><br><span class="line">Total              2.174</span><br><span class="line"><span class="comment"># /home/vagrant/codes/php80/bin/php /vagrant/php-8.0.10/Zend/micro_bench.php</span></span><br><span class="line">empty_loop         0.076</span><br><span class="line">func()             0.284    0.208</span><br><span class="line">undef_func()       0.350    0.274</span><br><span class="line">int_func()         0.113    0.037</span><br><span class="line"><span class="variable">$x</span> = self::<span class="variable">$x</span>      0.344    0.268</span><br><span class="line">self::<span class="variable">$x</span> = 0       0.270    0.194</span><br><span class="line">isset(self::<span class="variable">$x</span>)    0.354    0.278</span><br><span class="line">empty(self::<span class="variable">$x</span>)    0.363    0.287</span><br><span class="line"><span class="variable">$x</span> = Foo::<span class="variable">$x</span>       0.279    0.203</span><br><span class="line">Foo::<span class="variable">$x</span> = 0        0.198    0.122</span><br><span class="line">isset(Foo::<span class="variable">$x</span>)     0.263    0.186</span><br><span class="line">empty(Foo::<span class="variable">$x</span>)     0.282    0.206</span><br><span class="line">self::f()          0.383    0.307</span><br><span class="line">Foo::f()           0.345    0.269</span><br><span class="line"><span class="variable">$x</span> = <span class="variable">$this</span>-&gt;x      0.488    0.412</span><br><span class="line"><span class="variable">$this</span>-&gt;x = 0       0.223    0.147</span><br><span class="line"><span class="variable">$this</span>-&gt;x += 2      0.511    0.435</span><br><span class="line">++<span class="variable">$this</span>-&gt;x         0.340    0.264</span><br><span class="line">--<span class="variable">$this</span>-&gt;x         0.350    0.274</span><br><span class="line"><span class="variable">$this</span>-&gt;x++         0.369    0.293</span><br><span class="line"><span class="variable">$this</span>-&gt;x--         0.333    0.256</span><br><span class="line">isset(<span class="variable">$this</span>-&gt;x)    0.732    0.656</span><br><span class="line">empty(<span class="variable">$this</span>-&gt;x)    0.347    0.270</span><br><span class="line"><span class="variable">$this</span>-&gt;f()         0.325    0.249</span><br><span class="line"><span class="variable">$x</span> = Foo::TEST     0.411    0.335</span><br><span class="line">new Foo()          1.083    1.007</span><br><span class="line"><span class="variable">$x</span> = TEST          0.208    0.132</span><br><span class="line"><span class="variable">$x</span> = <span class="variable">$_GET</span>         0.390    0.314</span><br><span class="line"><span class="variable">$x</span> = <span class="variable">$GLOBALS</span>[<span class="string">&#x27;v&#x27;</span>] 0.624    0.548</span><br><span class="line"><span class="variable">$x</span> = <span class="variable">$hash</span>[<span class="string">&#x27;v&#x27;</span>]    0.475    0.399</span><br><span class="line"><span class="variable">$x</span> = <span class="variable">$str</span>[0]       0.294    0.218</span><br><span class="line"><span class="variable">$x</span> = <span class="variable">$a</span> ?: null    0.491    0.415</span><br><span class="line"><span class="variable">$x</span> = <span class="variable">$f</span> ?: tmp     0.437    0.361</span><br><span class="line"><span class="variable">$x</span> = <span class="variable">$f</span> ? <span class="variable">$f</span> : <span class="variable">$a</span>  0.351    0.275</span><br><span class="line"><span class="variable">$x</span> = <span class="variable">$f</span> ? <span class="variable">$f</span> : tmp 0.312    0.236</span><br><span class="line">------------------------</span><br><span class="line">Total             12.997</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">// php74 åŸºå‡†æµ‹è¯•</span><br><span class="line"><span class="comment"># /home/vagrant/codes/php74/bin/php /vagrant/php-7.4.23/Zend/bench.php</span></span><br><span class="line">simple             0.068</span><br><span class="line">simplecall         0.032</span><br><span class="line">simpleucall        0.073</span><br><span class="line">simpleudcall       0.087</span><br><span class="line">mandel             0.429</span><br><span class="line">mandel2            0.374</span><br><span class="line">ackermann(7)       0.098</span><br><span class="line">ary(50000)         0.019</span><br><span class="line">ary2(50000)        0.021</span><br><span class="line">ary3(2000)         0.211</span><br><span class="line">fibo(30)           0.326</span><br><span class="line">hash1(50000)       0.051</span><br><span class="line">hash2(500)         0.057</span><br><span class="line">heapsort(20000)    0.109</span><br><span class="line">matrix(20)         0.134</span><br><span class="line">nestedloop(12)     0.122</span><br><span class="line">sieve(30)          0.070</span><br><span class="line">strcat(200000)     0.021</span><br><span class="line">------------------------</span><br><span class="line">Total              2.303</span><br><span class="line"><span class="comment"># /home/vagrant/codes/php74/bin/php /vagrant/php-7.4.23/Zend/micro_bench.php</span></span><br><span class="line">empty_loop         0.081</span><br><span class="line">func()             0.346    0.265</span><br><span class="line">undef_func()       0.478    0.397</span><br><span class="line">int_func()         0.174    0.093</span><br><span class="line"><span class="variable">$x</span> = self::<span class="variable">$x</span>      0.406    0.325</span><br><span class="line">self::<span class="variable">$x</span> = 0       0.314    0.234</span><br><span class="line">isset(self::<span class="variable">$x</span>)    0.411    0.330</span><br><span class="line">empty(self::<span class="variable">$x</span>)    0.420    0.339</span><br><span class="line"><span class="variable">$x</span> = Foo::<span class="variable">$x</span>       0.305    0.224</span><br><span class="line">Foo::<span class="variable">$x</span> = 0        0.229    0.148</span><br><span class="line">isset(Foo::<span class="variable">$x</span>)     0.304    0.223</span><br><span class="line">empty(Foo::<span class="variable">$x</span>)     0.318    0.237</span><br><span class="line">self::f()          0.461    0.381</span><br><span class="line">Foo::f()           0.436    0.355</span><br><span class="line"><span class="variable">$x</span> = <span class="variable">$this</span>-&gt;x      0.277    0.196</span><br><span class="line"><span class="variable">$this</span>-&gt;x = 0       0.220    0.139</span><br><span class="line"><span class="variable">$this</span>-&gt;x += 2      0.413    0.333</span><br><span class="line">++<span class="variable">$this</span>-&gt;x         0.327    0.247</span><br><span class="line">--<span class="variable">$this</span>-&gt;x         0.335    0.255</span><br><span class="line"><span class="variable">$this</span>-&gt;x++         0.351    0.270</span><br><span class="line"><span class="variable">$this</span>-&gt;x--         0.350    0.269</span><br><span class="line">isset(<span class="variable">$this</span>-&gt;x)    0.407    0.326</span><br><span class="line">empty(<span class="variable">$this</span>-&gt;x)    0.438    0.358</span><br><span class="line"><span class="variable">$this</span>-&gt;f()         0.429    0.349</span><br><span class="line"><span class="variable">$x</span> = Foo::TEST     0.428    0.347</span><br><span class="line">new Foo()          1.193    1.113</span><br><span class="line"><span class="variable">$x</span> = TEST          0.252    0.171</span><br><span class="line"><span class="variable">$x</span> = <span class="variable">$_GET</span>         0.509    0.429</span><br><span class="line"><span class="variable">$x</span> = <span class="variable">$GLOBALS</span>[<span class="string">&#x27;v&#x27;</span>] 0.876    0.795</span><br><span class="line"><span class="variable">$x</span> = <span class="variable">$hash</span>[<span class="string">&#x27;v&#x27;</span>]    0.539    0.459</span><br><span class="line"><span class="variable">$x</span> = <span class="variable">$str</span>[0]       0.361    0.280</span><br><span class="line"><span class="variable">$x</span> = <span class="variable">$a</span> ?: null    0.435    0.354</span><br><span class="line"><span class="variable">$x</span> = <span class="variable">$f</span> ?: tmp     0.392    0.312</span><br><span class="line"><span class="variable">$x</span> = <span class="variable">$f</span> ? <span class="variable">$f</span> : <span class="variable">$a</span>  0.384    0.303</span><br><span class="line"><span class="variable">$x</span> = <span class="variable">$f</span> ? <span class="variable">$f</span> : tmp 0.360    0.280</span><br><span class="line">------------------------</span><br><span class="line">Total             13.961</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">// php73 åŸºå‡†æµ‹è¯•</span><br><span class="line"><span class="comment"># /home/vagrant/codes/php73/bin/php /vagrant/php-7.3.30/Zend/bench.php</span></span><br><span class="line">simple             0.075</span><br><span class="line">simplecall         0.025</span><br><span class="line">simpleucall        0.118</span><br><span class="line">simpleudcall       0.099</span><br><span class="line">mandel             0.512</span><br><span class="line">mandel2            0.540</span><br><span class="line">ackermann(7)       0.135</span><br><span class="line">ary(50000)         0.022</span><br><span class="line">ary2(50000)        0.032</span><br><span class="line">ary3(2000)         0.310</span><br><span class="line">fibo(30)           0.460</span><br><span class="line">hash1(50000)       0.068</span><br><span class="line">hash2(500)         0.068</span><br><span class="line">heapsort(20000)    0.160</span><br><span class="line">matrix(20)         0.187</span><br><span class="line">nestedloop(12)     0.147</span><br><span class="line">sieve(30)          0.083</span><br><span class="line">strcat(200000)     0.034</span><br><span class="line">------------------------</span><br><span class="line">Total              3.077</span><br><span class="line"><span class="comment"># /home/vagrant/codes/php73/bin/php /vagrant/php-7.3.30/Zend/micro_bench.php</span></span><br><span class="line">empty_loop         0.084</span><br><span class="line">func()             0.319    0.235</span><br><span class="line">undef_func()       0.572    0.488</span><br><span class="line">int_func()         0.151    0.067</span><br><span class="line"><span class="variable">$x</span> = self::<span class="variable">$x</span>      0.319    0.235</span><br><span class="line">self::<span class="variable">$x</span> = 0       0.306    0.222</span><br><span class="line">isset(self::<span class="variable">$x</span>)    0.285    0.201</span><br><span class="line">empty(self::<span class="variable">$x</span>)    0.300    0.216</span><br><span class="line"><span class="variable">$x</span> = Foo::<span class="variable">$x</span>       0.243    0.159</span><br><span class="line">Foo::<span class="variable">$x</span> = 0        0.246    0.162</span><br><span class="line">isset(Foo::<span class="variable">$x</span>)     0.244    0.160</span><br><span class="line">empty(Foo::<span class="variable">$x</span>)     0.254    0.170</span><br><span class="line">self::f()          0.390    0.307</span><br><span class="line">Foo::f()           0.353    0.269</span><br><span class="line"><span class="variable">$x</span> = <span class="variable">$this</span>-&gt;x      0.262    0.178</span><br><span class="line"><span class="variable">$this</span>-&gt;x = 0       0.206    0.122</span><br><span class="line"><span class="variable">$this</span>-&gt;x += 2      0.365    0.281</span><br><span class="line">++<span class="variable">$this</span>-&gt;x         0.265    0.181</span><br><span class="line">--<span class="variable">$this</span>-&gt;x         0.267    0.183</span><br><span class="line"><span class="variable">$this</span>-&gt;x++         0.290    0.206</span><br><span class="line"><span class="variable">$this</span>-&gt;x--         0.296    0.212</span><br><span class="line">isset(<span class="variable">$this</span>-&gt;x)    0.379    0.295</span><br><span class="line">empty(<span class="variable">$this</span>-&gt;x)    0.375    0.291</span><br><span class="line"><span class="variable">$this</span>-&gt;f()         0.399    0.315</span><br><span class="line"><span class="variable">$x</span> = Foo::TEST     0.406    0.322</span><br><span class="line">new Foo()          1.153    1.070</span><br><span class="line"><span class="variable">$x</span> = TEST          0.232    0.148</span><br><span class="line"><span class="variable">$x</span> = <span class="variable">$_GET</span>         0.447    0.363</span><br><span class="line"><span class="variable">$x</span> = <span class="variable">$GLOBALS</span>[<span class="string">&#x27;v&#x27;</span>] 0.660    0.576</span><br><span class="line"><span class="variable">$x</span> = <span class="variable">$hash</span>[<span class="string">&#x27;v&#x27;</span>]    0.471    0.387</span><br><span class="line"><span class="variable">$x</span> = <span class="variable">$str</span>[0]       0.319    0.236</span><br><span class="line"><span class="variable">$x</span> = <span class="variable">$a</span> ?: null    0.373    0.289</span><br><span class="line"><span class="variable">$x</span> = <span class="variable">$f</span> ?: tmp     0.386    0.303</span><br><span class="line"><span class="variable">$x</span> = <span class="variable">$f</span> ? <span class="variable">$f</span> : <span class="variable">$a</span>  0.346    0.262</span><br><span class="line"><span class="variable">$x</span> = <span class="variable">$f</span> ? <span class="variable">$f</span> : tmp 0.325    0.241</span><br><span class="line">------------------------</span><br><span class="line">Total             12.285</span><br></pre></td></tr></table></figure>
<h1 id="æ–°çš„ç‰¹æ€§"><a href="#æ–°çš„ç‰¹æ€§" class="headerlink" title="æ–°çš„ç‰¹æ€§"></a>æ–°çš„ç‰¹æ€§</h1><ul>
<li><a href="https://www.php.net/releases/8.0/en.php">PHP 8</a></li>
</ul>
<h1 id="è°ƒè¯•è¿è¡Œ"><a href="#è°ƒè¯•è¿è¡Œ" class="headerlink" title="è°ƒè¯•è¿è¡Œ"></a>è°ƒè¯•è¿è¡Œ</h1><h2 id="å¸¸ç”¨çš„-GDB-å‘½ä»¤"><a href="#å¸¸ç”¨çš„-GDB-å‘½ä»¤" class="headerlink" title="å¸¸ç”¨çš„ GDB å‘½ä»¤"></a>å¸¸ç”¨çš„ GDB å‘½ä»¤</h2><ul>
<li><a href="http://www.gdbtutorial.com/">GDB Tutorial</a></li>
</ul>
<table>
<thead>
<tr>
<th>Command</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>r</code></td>
<td>Start running program until a breakpoint or end of program</td>
</tr>
<tr>
<td><code>b fun</code></td>
<td>Set a breakpoint at the begining of function <code>fun</code></td>
</tr>
<tr>
<td><code>b N</code></td>
<td>Set a breakpoint at line number N of source file currently executing</td>
</tr>
<tr>
<td><code>b file.c:N</code></td>
<td>Set a breakpoint at line number N of file <code>file.c</code></td>
</tr>
<tr>
<td><code>d N</code></td>
<td>Remove breakpoint number N</td>
</tr>
<tr>
<td><code>info break</code></td>
<td>List all breakpoints</td>
</tr>
<tr>
<td><code>c</code></td>
<td>Continues/Resumes running the program until the next breakpoint or end of program</td>
</tr>
<tr>
<td><code>f</code></td>
<td>Runs until the current function is finished</td>
</tr>
<tr>
<td><code>s</code></td>
<td>Runs the next line of the program</td>
</tr>
<tr>
<td><code>s N</code></td>
<td>Runs the next N lines of program</td>
</tr>
<tr>
<td><code>n</code></td>
<td>Like s, but it does not step into functions</td>
</tr>
<tr>
<td><code>p var</code></td>
<td>Prints the current value of the variable <code>var</code></td>
</tr>
<tr>
<td><code>set var=val</code></td>
<td>Assign <code>val</code> value to the variable <code>var</code></td>
</tr>
<tr>
<td><code>bt</code></td>
<td>Prints a stack trace</td>
</tr>
<tr>
<td><code>q</code></td>
<td>Quit from gdb</td>
</tr>
</tbody>
</table>
<h2 id="æºç ä¸­çš„å®šä¹‰"><a href="#æºç ä¸­çš„å®šä¹‰" class="headerlink" title="æºç ä¸­çš„å®šä¹‰"></a>æºç ä¸­çš„å®šä¹‰</h2><ul>
<li>å˜é‡ç±»å‹çš„å®šä¹‰ï¼š</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* Regular data types: Must be in sync with zend_variables.c. */</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> IS_UNDEF					0</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> IS_NULL						1</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> IS_FALSE					2</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> IS_TRUE						3</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> IS_LONG						4</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> IS_DOUBLE					5</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> IS_STRING					6</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> IS_ARRAY					7</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> IS_OBJECT					8</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> IS_RESOURCE					9</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> IS_REFERENCE				10</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> IS_CONSTANT_AST				11 <span class="comment">/* Constant expressions */</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* Fake types used only for type hinting.</span></span><br><span class="line"><span class="comment"> * These are allowed to overlap with the types below. */</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> IS_CALLABLE					12</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> IS_ITERABLE					13</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> IS_VOID						14</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> IS_STATIC					15</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> IS_MIXED					16</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* internal types */</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> IS_INDIRECT             	12</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> IS_PTR						13</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> IS_ALIAS_PTR				14</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> _IS_ERROR					15</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* used for casts */</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> _IS_BOOL					17</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> _IS_NUMBER					18</span></span><br></pre></td></tr></table></figure>
<ul>
<li>_zend_value &amp; _zend_sructï¼š</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">union</span> _<span class="title">zend_value</span> &#123;</span></span><br><span class="line">	zend_long         lval;				<span class="comment">/* long value */</span></span><br><span class="line">	<span class="keyword">double</span>            dval;				<span class="comment">/* double value */</span></span><br><span class="line">	zend_refcounted  *counted;</span><br><span class="line">	zend_string      *str;</span><br><span class="line">	zend_array       *arr;</span><br><span class="line">	zend_object      *obj;</span><br><span class="line">	zend_resource    *res;</span><br><span class="line">	zend_reference   *ref;</span><br><span class="line">	zend_ast_ref     *ast;</span><br><span class="line">	zval             *zv;</span><br><span class="line">	<span class="keyword">void</span>             *ptr;</span><br><span class="line">	zend_class_entry *ce;</span><br><span class="line">	zend_function    *func;</span><br><span class="line">	<span class="class"><span class="keyword">struct</span> &#123;</span></span><br><span class="line">		<span class="keyword">uint32_t</span> w1;</span><br><span class="line">		<span class="keyword">uint32_t</span> w2;</span><br><span class="line">	&#125; ww;</span><br><span class="line">&#125; zend_value;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> _<span class="title">zval_struct</span> &#123;</span></span><br><span class="line">	zend_value        value;			<span class="comment">/* value */</span></span><br><span class="line">	<span class="class"><span class="keyword">union</span> &#123;</span></span><br><span class="line">		<span class="keyword">uint32_t</span> type_info;</span><br><span class="line">		<span class="class"><span class="keyword">struct</span> &#123;</span></span><br><span class="line">			<span class="built_in">ZEND_ENDIAN_LOHI_3</span>(</span><br><span class="line">				zend_uchar    type,			<span class="comment">/* active type */</span></span><br><span class="line">				zend_uchar    type_flags,</span><br><span class="line">				<span class="keyword">union</span> &#123;</span><br><span class="line">					<span class="keyword">uint16_t</span>  extra;        <span class="comment">/* not further specified */</span></span><br><span class="line">				&#125; u)</span><br><span class="line">		&#125; v;</span><br><span class="line">	&#125; u1;</span><br><span class="line">	<span class="class"><span class="keyword">union</span> &#123;</span></span><br><span class="line">		<span class="keyword">uint32_t</span>     next;                 <span class="comment">/* hash collision chain */</span></span><br><span class="line">		<span class="keyword">uint32_t</span>     cache_slot;           <span class="comment">/* cache slot (for RECV_INIT) */</span></span><br><span class="line">		<span class="keyword">uint32_t</span>     opline_num;           <span class="comment">/* opline number (for FAST_CALL) */</span></span><br><span class="line">		<span class="keyword">uint32_t</span>     lineno;               <span class="comment">/* line number (for ast nodes) */</span></span><br><span class="line">		<span class="keyword">uint32_t</span>     num_args;             <span class="comment">/* arguments number for EX(This) */</span></span><br><span class="line">		<span class="keyword">uint32_t</span>     fe_pos;               <span class="comment">/* foreach position */</span></span><br><span class="line">		<span class="keyword">uint32_t</span>     fe_iter_idx;          <span class="comment">/* foreach iterator index */</span></span><br><span class="line">		<span class="keyword">uint32_t</span>     access_flags;         <span class="comment">/* class constant access flags */</span></span><br><span class="line">		<span class="keyword">uint32_t</span>     property_guard;       <span class="comment">/* single property guard */</span></span><br><span class="line">		<span class="keyword">uint32_t</span>     constant_flags;       <span class="comment">/* constant flags */</span></span><br><span class="line">		<span class="keyword">uint32_t</span>     extra;                <span class="comment">/* not further specified */</span></span><br><span class="line">	&#125; u2;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h2 id="æµ‹è¯•ç¨‹åº"><a href="#æµ‹è¯•ç¨‹åº" class="headerlink" title="æµ‹è¯•ç¨‹åº"></a>æµ‹è¯•ç¨‹åº</h2><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="variable">$a</span> = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$a</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable">$b</span> = <span class="number">3.14</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$b</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable">$c</span> = <span class="literal">null</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$c</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable">$d</span> = <span class="literal">true</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$d</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable">$e</span> = <span class="literal">false</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$e</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable">$f</span> = <span class="string">&#x27;string&#x27;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$f</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable">$g</span> = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$g</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable">$h</span> = <span class="keyword">new</span> \<span class="built_in">stdClass</span>();</span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$h</span>;</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># gdb /home/vagrant/codes/php80/bin/php</span></span><br><span class="line">(gdb) b ZEND_ECHO_SPEC_CV_HANDLER</span><br><span class="line">Breakpoint 1 at 0x5c96a8: file /vagrant/php-8.0.10/Zend/zend_vm_execute.h, line 37184.</span><br><span class="line">(gdb) r variables.php</span><br><span class="line">Starting program: /home/vagrant/codes/php80/bin/php variables.php</span><br><span class="line">[Thread debugging using libthread_db enabled]</span><br><span class="line">Using host libthread_db library <span class="string">&quot;/lib/x86_64-linux-gnu/libthread_db.so.1&quot;</span>.</span><br><span class="line"></span><br><span class="line">Breakpoint 1, ZEND_ECHO_SPEC_CV_HANDLER () at /vagrant/php-8.0.10/Zend/zend_vm_execute.h:37184</span><br><span class="line">37184		SAVE_OPLINE();</span><br></pre></td></tr></table></figure>
<ul>
<li>æ•´å‹ï¼š</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">(gdb) n</span><br><span class="line">37185		z = EX_VAR(opline-&gt;op1.var);</span><br><span class="line">(gdb) n</span><br><span class="line">37187		<span class="keyword">if</span> (Z_TYPE_P(z) == IS_STRING) &#123;</span><br><span class="line">(gdb) p z</span><br><span class="line"><span class="variable">$1</span> = (zval *) 0x7ffff3814070</span><br><span class="line">(gdb) p *z</span><br><span class="line"><span class="variable">$2</span> = &#123;value = &#123;lval = 1, dval = 4.9406564584124654e-324, counted = 0x1, str = 0x1, arr = 0x1, obj = 0x1, res = 0x1, ref = 0x1, ast = 0x1, zv = 0x1, ptr = 0x1,</span><br><span class="line">    ce = 0x1, func = 0x1, ww = &#123;w1 = 1, w2 = 0&#125;&#125;, u1 = &#123;type_info = 4, v = &#123;<span class="built_in">type</span> = 4 <span class="string">&#x27;\004&#x27;</span>, type_flags = 0 <span class="string">&#x27;\000&#x27;</span>, u = &#123;extra = 0&#125;&#125;&#125;, u2 = &#123;next = 0,</span><br><span class="line">    cache_slot = 0, opline_num = 0, lineno = 0, num_args = 0, fe_pos = 0, fe_iter_idx = 0, access_flags = 0, property_guard = 0, constant_flags = 0, extra = 0&#125;&#125;</span><br><span class="line">(gdb)</span><br></pre></td></tr></table></figure>
<ul>
<li>æµ®ç‚¹å‹ï¼š</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">(gdb) c</span><br><span class="line">Continuing.</span><br><span class="line">1</span><br><span class="line">Breakpoint 1, ZEND_ECHO_SPEC_CV_HANDLER () at /vagrant/php-8.0.10/Zend/zend_vm_execute.h:37184</span><br><span class="line">37184		SAVE_OPLINE();</span><br><span class="line">(gdb) n</span><br><span class="line">37185		z = EX_VAR(opline-&gt;op1.var);</span><br><span class="line">(gdb) n</span><br><span class="line">37187		<span class="keyword">if</span> (Z_TYPE_P(z) == IS_STRING) &#123;</span><br><span class="line">(gdb) p z</span><br><span class="line"><span class="variable">$3</span> = (zval *) 0x7ffff3814080</span><br><span class="line">(gdb) p *z</span><br><span class="line"><span class="variable">$4</span> = &#123;value = &#123;lval = 4614253070214989087, dval = 3.1400000000000001, counted = 0x40091eb851eb851f, str = 0x40091eb851eb851f, arr = 0x40091eb851eb851f,</span><br><span class="line">    obj = 0x40091eb851eb851f, res = 0x40091eb851eb851f, ref = 0x40091eb851eb851f, ast = 0x40091eb851eb851f, zv = 0x40091eb851eb851f, ptr = 0x40091eb851eb851f,</span><br><span class="line">    ce = 0x40091eb851eb851f, func = 0x40091eb851eb851f, ww = &#123;w1 = 1374389535, w2 = 1074339512&#125;&#125;, u1 = &#123;type_info = 5, v = &#123;<span class="built_in">type</span> = 5 <span class="string">&#x27;\005&#x27;</span>,</span><br><span class="line">      type_flags = 0 <span class="string">&#x27;\000&#x27;</span>, u = &#123;extra = 0&#125;&#125;&#125;, u2 = &#123;next = 0, cache_slot = 0, opline_num = 0, lineno = 0, num_args = 0, fe_pos = 0, fe_iter_idx = 0,</span><br><span class="line">    access_flags = 0, property_guard = 0, constant_flags = 0, extra = 0&#125;&#125;</span><br><span class="line">(gdb)</span><br></pre></td></tr></table></figure>
<ul>
<li>NULL å‹ï¼š</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">(gdb) c</span><br><span class="line">Continuing.</span><br><span class="line">3.14</span><br><span class="line">Breakpoint 1, ZEND_ECHO_SPEC_CV_HANDLER () at /vagrant/php-8.0.10/Zend/zend_vm_execute.h:37184</span><br><span class="line">37184		SAVE_OPLINE();</span><br><span class="line">(gdb) n</span><br><span class="line">37185		z = EX_VAR(opline-&gt;op1.var);</span><br><span class="line">(gdb) n</span><br><span class="line">37187		<span class="keyword">if</span> (Z_TYPE_P(z) == IS_STRING) &#123;</span><br><span class="line">(gdb) p z</span><br><span class="line"><span class="variable">$5</span> = (zval *) 0x7ffff3814090</span><br><span class="line">(gdb) p *z</span><br><span class="line"><span class="variable">$6</span> = &#123;value = &#123;lval = 2, dval = 9.8813129168249309e-324, counted = 0x2, str = 0x2, arr = 0x2, obj = 0x2, res = 0x2, ref = 0x2, ast = 0x2, zv = 0x2, ptr = 0x2,</span><br><span class="line">    ce = 0x2, func = 0x2, ww = &#123;w1 = 2, w2 = 0&#125;&#125;, u1 = &#123;type_info = 1, v = &#123;<span class="built_in">type</span> = 1 <span class="string">&#x27;\001&#x27;</span>, type_flags = 0 <span class="string">&#x27;\000&#x27;</span>, u = &#123;extra = 0&#125;&#125;&#125;, u2 = &#123;next = 0,</span><br><span class="line">    cache_slot = 0, opline_num = 0, lineno = 0, num_args = 0, fe_pos = 0, fe_iter_idx = 0, access_flags = 0, property_guard = 0, constant_flags = 0, extra = 0&#125;&#125;</span><br><span class="line">(gdb)</span><br></pre></td></tr></table></figure>
<ul>
<li>å¸ƒå°” TRUE å‹ï¼š</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">(gdb) c</span><br><span class="line">Continuing.</span><br><span class="line"></span><br><span class="line">Breakpoint 1, ZEND_ECHO_SPEC_CV_HANDLER () at /vagrant/php-8.0.10/Zend/zend_vm_execute.h:37184</span><br><span class="line">37184		SAVE_OPLINE();</span><br><span class="line">(gdb) n</span><br><span class="line">37185		z = EX_VAR(opline-&gt;op1.var);</span><br><span class="line">(gdb) n</span><br><span class="line">37187		if (Z_TYPE_P(z) == IS_STRING) &#123;</span><br><span class="line">(gdb) p z</span><br><span class="line">$7 = (zval *) 0x7ffff38140a0</span><br><span class="line">(gdb) p *z</span><br><span class="line">$8 = &#123;value = &#123;lval = 2, dval = 9.8813129168249309e-324, counted = 0x2, str = 0x2, arr = 0x2, obj = 0x2, res = 0x2, ref = 0x2, ast = 0x2, zv = 0x2, ptr = 0x2,</span><br><span class="line">    ce = 0x2, func = 0x2, ww = &#123;w1 = 2, w2 = 0&#125;&#125;, u1 = &#123;type_info = 3, v = &#123;type = 3 &#x27;\003&#x27;, type_flags = 0 &#x27;\000&#x27;, u = &#123;extra = 0&#125;&#125;&#125;, u2 = &#123;next = 0,</span><br><span class="line">    cache_slot = 0, opline_num = 0, lineno = 0, num_args = 0, fe_pos = 0, fe_iter_idx = 0, access_flags = 0, property_guard = 0, constant_flags = 0, extra = 0&#125;&#125;</span><br><span class="line">(gdb)</span><br></pre></td></tr></table></figure>
<ul>
<li>å¸ƒå°” FALSE å‹ï¼š</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">(gdb) c</span><br><span class="line">Continuing.</span><br><span class="line">1</span><br><span class="line">Breakpoint 1, ZEND_ECHO_SPEC_CV_HANDLER () at /vagrant/php-8.0.10/Zend/zend_vm_execute.h:37184</span><br><span class="line">37184		SAVE_OPLINE();</span><br><span class="line">(gdb) n</span><br><span class="line">37185		z = EX_VAR(opline-&gt;op1.var);</span><br><span class="line">(gdb) n</span><br><span class="line">37187		<span class="keyword">if</span> (Z_TYPE_P(z) == IS_STRING) &#123;</span><br><span class="line">(gdb) p z</span><br><span class="line"><span class="variable">$9</span> = (zval *) 0x7ffff38140b0</span><br><span class="line">(gdb) p *z</span><br><span class="line"><span class="variable">$10</span> = &#123;value = &#123;lval = 2, dval = 9.8813129168249309e-324, counted = 0x2, str = 0x2, arr = 0x2, obj = 0x2, res = 0x2, ref = 0x2, ast = 0x2, zv = 0x2, ptr = 0x2,</span><br><span class="line">    ce = 0x2, func = 0x2, ww = &#123;w1 = 2, w2 = 0&#125;&#125;, u1 = &#123;type_info = 2, v = &#123;<span class="built_in">type</span> = 2 <span class="string">&#x27;\002&#x27;</span>, type_flags = 0 <span class="string">&#x27;\000&#x27;</span>, u = &#123;extra = 0&#125;&#125;&#125;, u2 = &#123;next = 0,</span><br><span class="line">    cache_slot = 0, opline_num = 0, lineno = 0, num_args = 0, fe_pos = 0, fe_iter_idx = 0, access_flags = 0, property_guard = 0, constant_flags = 0, extra = 0&#125;&#125;</span><br><span class="line">(gdb)</span><br></pre></td></tr></table></figure>
<ul>
<li>å­—ç¬¦ä¸²å‹ï¼š</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">(gdb) c</span><br><span class="line">Continuing.</span><br><span class="line"></span><br><span class="line">Breakpoint 1, ZEND_ECHO_SPEC_CV_HANDLER () at /vagrant/php-8.0.10/Zend/zend_vm_execute.h:37184</span><br><span class="line">37184		SAVE_OPLINE();</span><br><span class="line">(gdb) n</span><br><span class="line">37185		z = EX_VAR(opline-&gt;op1.var);</span><br><span class="line">(gdb) n</span><br><span class="line">37187		<span class="keyword">if</span> (Z_TYPE_P(z) == IS_STRING) &#123;</span><br><span class="line">(gdb) p z</span><br><span class="line"><span class="variable">$11</span> = (zval *) 0x7ffff38140c0</span><br><span class="line">(gdb) p *z</span><br><span class="line"><span class="variable">$12</span> = &#123;value = &#123;lval = 93825011385696, dval = 4.6355714846336205e-310, counted = 0x555556798560, str = 0x555556798560, arr = 0x555556798560,</span><br><span class="line">    obj = 0x555556798560, res = 0x555556798560, ref = 0x555556798560, ast = 0x555556798560, zv = 0x555556798560, ptr = 0x555556798560, ce = 0x555556798560,</span><br><span class="line">    func = 0x555556798560, ww = &#123;w1 = 1450804576, w2 = 21845&#125;&#125;, u1 = &#123;type_info = 6, v = &#123;<span class="built_in">type</span> = 6 <span class="string">&#x27;\006&#x27;</span>, type_flags = 0 <span class="string">&#x27;\000&#x27;</span>, u = &#123;extra = 0&#125;&#125;&#125;, u2 = &#123;</span><br><span class="line">    next = 0, cache_slot = 0, opline_num = 0, lineno = 0, num_args = 0, fe_pos = 0, fe_iter_idx = 0, access_flags = 0, property_guard = 0, constant_flags = 0,</span><br><span class="line">    extra = 0&#125;&#125;</span><br><span class="line">(gdb) p <span class="variable">$12</span>.value.str</span><br><span class="line"><span class="variable">$13</span> = (zend_string *) 0x555556798560</span><br><span class="line">(gdb) p *<span class="variable">$12</span>.value.str</span><br><span class="line"><span class="variable">$14</span> = &#123;gc = &#123;refcount = 1, u = &#123;type_info = 470&#125;&#125;, h = 9223378990886268924, len = 6, val = <span class="string">&quot;s&quot;</span>&#125;</span><br><span class="line">(gdb) p *<span class="variable">$12</span>.value.str.val@6</span><br><span class="line"><span class="variable">$15</span> = <span class="string">&quot;string&quot;</span></span><br><span class="line">(gdb)</span><br></pre></td></tr></table></figure>
<ul>
<li>æ•°ç»„å‹ï¼š</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">(gdb) c</span><br><span class="line">Continuing.</span><br><span class="line">string</span><br><span class="line">Breakpoint 1, ZEND_ECHO_SPEC_CV_HANDLER () at /vagrant/php-8.0.10/Zend/zend_vm_execute.h:37184</span><br><span class="line">37184		SAVE_OPLINE();</span><br><span class="line">(gdb) n</span><br><span class="line">37185		z = EX_VAR(opline-&gt;op1.var);</span><br><span class="line">(gdb) n</span><br><span class="line">37187		<span class="keyword">if</span> (Z_TYPE_P(z) == IS_STRING) &#123;</span><br><span class="line">(gdb) p z</span><br><span class="line"><span class="variable">$16</span> = (zval *) 0x7ffff38140d0</span><br><span class="line">(gdb) p *z</span><br><span class="line"><span class="variable">$17</span> = &#123;value = &#123;lval = 140737279001440, dval = 6.9533454643786159e-310, counted = 0x7ffff3858360, str = 0x7ffff3858360, arr = 0x7ffff3858360,</span><br><span class="line">    obj = 0x7ffff3858360, res = 0x7ffff3858360, ref = 0x7ffff3858360, ast = 0x7ffff3858360, zv = 0x7ffff3858360, ptr = 0x7ffff3858360, ce = 0x7ffff3858360,</span><br><span class="line">    func = 0x7ffff3858360, ww = &#123;w1 = 4085613408, w2 = 32767&#125;&#125;, u1 = &#123;type_info = 775, v = &#123;<span class="built_in">type</span> = 7 <span class="string">&#x27;\a&#x27;</span>, type_flags = 3 <span class="string">&#x27;\003&#x27;</span>, u = &#123;extra = 0&#125;&#125;&#125;, u2 = &#123;</span><br><span class="line">    next = 0, cache_slot = 0, opline_num = 0, lineno = 0, num_args = 0, fe_pos = 0, fe_iter_idx = 0, access_flags = 0, property_guard = 0, constant_flags = 0,</span><br><span class="line">    extra = 0&#125;&#125;</span><br><span class="line">(gdb) p <span class="variable">$17</span>.value.arr</span><br><span class="line"><span class="variable">$18</span> = (zend_array *) 0x7ffff3858360</span><br><span class="line">(gdb) p *<span class="variable">$17</span>.value.arr</span><br><span class="line"><span class="variable">$19</span> = &#123;gc = &#123;refcount = 2, u = &#123;type_info = 7&#125;&#125;, u = &#123;v = &#123;flags = 20 <span class="string">&#x27;\024&#x27;</span>, _unused = 0 <span class="string">&#x27;\000&#x27;</span>, nIteratorsCount = 0 <span class="string">&#x27;\000&#x27;</span>, _unused2 = 0 <span class="string">&#x27;\000&#x27;</span>&#125;,</span><br><span class="line">    flags = 20&#125;, nTableMask = 4294967294, arData = 0x7ffff385c508, nNumUsed = 3, nNumOfElements = 3, nTableSize = 8, nInternalPointer = 0,</span><br><span class="line">  nNextFreeElement = 3, pDestructor = 0x555555a909a5 &lt;zval_ptr_dtor&gt;&#125;</span><br><span class="line">(gdb)</span><br></pre></td></tr></table></figure>
<ul>
<li>å¯¹è±¡å‹ï¼š</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">(gdb) c</span><br><span class="line">Continuing.</span><br><span class="line"></span><br><span class="line">Warning: Array to string conversion <span class="keyword">in</span> /home/vagrant/codes/tests/variables.php on line 21</span><br><span class="line">Array</span><br><span class="line">Breakpoint 1, ZEND_ECHO_SPEC_CV_HANDLER () at /vagrant/php-8.0.10/Zend/zend_vm_execute.h:37184</span><br><span class="line">37184		SAVE_OPLINE();</span><br><span class="line">(gdb) n</span><br><span class="line">37185		z = EX_VAR(opline-&gt;op1.var);</span><br><span class="line">(gdb) n</span><br><span class="line">37187		<span class="keyword">if</span> (Z_TYPE_P(z) == IS_STRING) &#123;</span><br><span class="line">(gdb) p z</span><br><span class="line"><span class="variable">$20</span> = (zval *) 0x7ffff38140e0</span><br><span class="line">(gdb) p *z</span><br><span class="line"><span class="variable">$21</span> = &#123;value = &#123;lval = 140737278651440, dval = 6.9533454470863183e-310, counted = 0x7ffff3802c30, str = 0x7ffff3802c30, arr = 0x7ffff3802c30,</span><br><span class="line">    obj = 0x7ffff3802c30, res = 0x7ffff3802c30, ref = 0x7ffff3802c30, ast = 0x7ffff3802c30, zv = 0x7ffff3802c30, ptr = 0x7ffff3802c30, ce = 0x7ffff3802c30,</span><br><span class="line">    func = 0x7ffff3802c30, ww = &#123;w1 = 4085263408, w2 = 32767&#125;&#125;, u1 = &#123;type_info = 776, v = &#123;<span class="built_in">type</span> = 8 <span class="string">&#x27;\b&#x27;</span>, type_flags = 3 <span class="string">&#x27;\003&#x27;</span>, u = &#123;extra = 0&#125;&#125;&#125;, u2 = &#123;</span><br><span class="line">    next = 0, cache_slot = 0, opline_num = 0, lineno = 0, num_args = 0, fe_pos = 0, fe_iter_idx = 0, access_flags = 0, property_guard = 0, constant_flags = 0,</span><br><span class="line">    extra = 0&#125;&#125;</span><br><span class="line">(gdb) p <span class="variable">$21</span>.value.obj</span><br><span class="line"><span class="variable">$22</span> = (zend_object *) 0x7ffff3802c30</span><br><span class="line">(gdb) p *<span class="variable">$21</span>.value.obj</span><br><span class="line"><span class="variable">$23</span> = &#123;gc = &#123;refcount = 1, u = &#123;type_info = 8&#125;&#125;, handle = 1, ce = 0x5555567f41c0, handlers = 0x555556752620 &lt;std_object_handlers&gt;, properties = 0x0,</span><br><span class="line">  properties_table = &#123;&#123;value = &#123;lval = 93825006738840, dval = 4.6355712550484294e-310, counted = 0x555556329d98, str = 0x555556329d98, arr = 0x555556329d98,</span><br><span class="line">        obj = 0x555556329d98, res = 0x555556329d98, ref = 0x555556329d98, ast = 0x555556329d98, zv = 0x555556329d98, ptr = 0x555556329d98, ce = 0x555556329d98,</span><br><span class="line">        func = 0x555556329d98, ww = &#123;w1 = 1446157720, w2 = 21845&#125;&#125;, u1 = &#123;type_info = 40, v = &#123;<span class="built_in">type</span> = 40 <span class="string">&#x27;(&#x27;</span>, type_flags = 0 <span class="string">&#x27;\000&#x27;</span>, u = &#123;extra = 0&#125;&#125;&#125;, u2 = &#123;</span><br><span class="line">        next = 0, cache_slot = 0, opline_num = 0, lineno = 0, num_args = 0, fe_pos = 0, fe_iter_idx = 0, access_flags = 0, property_guard = 0,</span><br><span class="line">        constant_flags = 0, extra = 0&#125;&#125;&#125;&#125;</span><br><span class="line">(gdb)</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>php</category>
      </categories>
      <tags>
        <tag>php</tag>
      </tags>
  </entry>
  <entry>
    <title>RabbitMQ æ¶ˆæ¯é˜Ÿåˆ—</title>
    <url>/2018/01/21/rabbitmq-service/</url>
    <content><![CDATA[<h1 id="æ¦‚å¿µ"><a href="#æ¦‚å¿µ" class="headerlink" title="æ¦‚å¿µ"></a>æ¦‚å¿µ</h1><blockquote>
<ul>
<li><a href="https://zh.wikipedia.org/zh/RabbitMQ"><code>RabbitMQ WIKI</code></a></li>
<li><a href="https://baike.baidu.com/item/rabbitmq"><code>RabbitMQ</code> ç™¾ç§‘</a></li>
<li><a href="http://www.rabbitmq.com/"><code>RabbitMQ</code> å®˜ç½‘</a></li>
<li><a href="http://www.rabbitmq.com/download.html"><code>RabbitMQ</code> å®‰è£…</a></li>
<li><a href="http://www.rabbitmq.com/getstarted.html"><code>RabbitMQ</code> æ•™ç¨‹</a></li>
<li><a href="http://www.rabbitmq.com/documentation.html"><code>RabbitMQ</code> æ–‡æ¡£</a></li>
<li><a href="http://www.rabbitmq.com/devtools.html"><code>RabbitMQ Clients &amp; Developer Tools</code></a></li>
</ul>
</blockquote>
<p>æ¶ˆæ¯é˜Ÿåˆ—ï¼ˆ<code>MQ - Message Queue</code>ï¼‰ï¼šæ˜¯ä¸€ç§åº”ç”¨ç¨‹åºå¯¹åº”ç”¨ç¨‹åºçš„é€šä¿¡æ–¹æ³•ã€‚åº”ç”¨ç¨‹åºé€šè¿‡è¯»å†™å‡ºå…¥é˜Ÿåˆ—çš„æ¶ˆæ¯ï¼ˆé’ˆå¯¹åº”ç”¨ç¨‹åºçš„æ•°æ®ï¼‰æ¥é€šä¿¡ï¼Œè€Œæ— éœ€ä¸“ç”¨è¿æ¥æ¥é“¾æ¥å®ƒä»¬ã€‚</p>
<p><code>RabbitMQ</code> æ˜¯æŒ‡å®ç°äº†é«˜çº§æ¶ˆæ¯é˜Ÿåˆ—åè®®ï¼ˆ<code>AMQPï¼šAdvanced Message Queuing Protocol</code>ï¼‰çš„å¼€æºæ¶ˆæ¯ä»£ç†è½¯ä»¶ï¼ˆäº¦ç§°é¢å‘æ¶ˆæ¯çš„ä¸­é—´ä»¶ï¼‰ã€‚</p>
<p><code>RabbitMQ</code> æ˜¯éƒ¨ç½²æœ€å¹¿æ³›çš„å¼€æºæ¶ˆæ¯ä»£ç†ã€‚<code>RabbitMQ</code> æ˜¯ä¸ªè½»é‡çº§å’Œæ˜“äºéƒ¨ç½²åœ¨äº‘ç«¯åœºæ‰€ã€‚å®ƒæ”¯æŒå¤šç§æ¶ˆæ¯ä¼ é€’åè®®ã€‚<code>RabbitMQ</code> å¯ä»¥éƒ¨ç½²åœ¨åˆ†å¸ƒå¼å’Œè”åˆçš„é…ç½®ä¸­ï¼Œä»¥æ»¡è¶³é«˜è§„æ¨¡ï¼Œé«˜å¯ç”¨æ€§è¦æ±‚ã€‚</p>
<h1 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h1><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// æ·»åŠ  erlang yum æº</span><br><span class="line">$ sudo vim /etc/yum.repos.d/rabbitmq-erlang.repo</span><br><span class="line">[rabbitmq-erlang]</span><br><span class="line">name=rabbitmq-erlang</span><br><span class="line">baseurl=https://dl.bintray.com/rabbitmq/rpm/erlang/21/el/7</span><br><span class="line">gpgcheck=1</span><br><span class="line">gpgkey=https://dl.bintray.com/rabbitmq/Keys/rabbitmq-release-signing-key.asc</span><br><span class="line">repo_gpgcheck=0</span><br><span class="line">enabled=1</span><br><span class="line"></span><br><span class="line">// æ›´æ–° yum æº</span><br><span class="line">$ sudo yum -y update</span><br><span class="line"></span><br><span class="line">// å®‰è£… erlang</span><br><span class="line">$ sudo yum install -y erlang</span><br><span class="line"></span><br><span class="line">// å®‰è£… rabbitmq-server</span><br><span class="line">$ sudo yum install -y rabbitmq-server</span><br><span class="line"></span><br><span class="line">// å¦‚æœä¸­é€”å‡ºç° file /usr/lib64/erlang/bin/epmd from install of erlang-erts-R16B-03.18.el7.x86_64 conflicts with file from package erlang-20.2.2-1.el7.centos.x86_64 è¿™ç§é”™è¯¯ï¼Œè¯·ç§»é™¤ erlang-20.2.2-1.el7.centos.x86_64 åŒ…å†è¯•</span><br><span class="line">$ sudo yum remove erlang-20.2.2-1.el7.centos.x86_64</span><br></pre></td></tr></table></figure>
<h1 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h1><h2 id="é…ç½®æ–‡ä»¶"><a href="#é…ç½®æ–‡ä»¶" class="headerlink" title="é…ç½®æ–‡ä»¶"></a>é…ç½®æ–‡ä»¶</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ find / -name <span class="string">&quot;rabbitmq.config.example&quot;</span></span><br><span class="line">$ sudo cp rabbitmq.config.example /etc/rabbitmq/rabbitmq.config</span><br></pre></td></tr></table></figure>
<h2 id="å¼€æ”¾é˜²ç«å¢™ç«¯å£"><a href="#å¼€æ”¾é˜²ç«å¢™ç«¯å£" class="headerlink" title="å¼€æ”¾é˜²ç«å¢™ç«¯å£"></a>å¼€æ”¾é˜²ç«å¢™ç«¯å£</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ sudo firewall-cmd --permanent --zone=public --add-port=15672/tcp</span><br><span class="line">$ sudo firewall-cmd --permanent --zone=public --add-port=5672/tcp</span><br><span class="line">$ sudo systemctl restart firewalld.service</span><br><span class="line">æˆ–</span><br><span class="line">$ sudo firewall-cmd --reload</span><br></pre></td></tr></table></figure>
<h2 id="RabbitMQ-æœåŠ¡"><a href="#RabbitMQ-æœåŠ¡" class="headerlink" title="RabbitMQ æœåŠ¡"></a><code>RabbitMQ</code> æœåŠ¡</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// å¼€å¯</span><br><span class="line">$ sudo systemctl start rabbitmq-server.service</span><br><span class="line"></span><br><span class="line">// é‡å¯</span><br><span class="line">$ sudo systemctl restart rabbitmq-server.service</span><br><span class="line"></span><br><span class="line">// åœæ­¢</span><br><span class="line">$ sudo systemctl stop rabbitmq-server.service</span><br></pre></td></tr></table></figure>
<h2 id="å¼€å¯-Web-ç•Œé¢"><a href="#å¼€å¯-Web-ç•Œé¢" class="headerlink" title="å¼€å¯ Web ç•Œé¢"></a>å¼€å¯ <code>Web</code> ç•Œé¢</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// å¼€å¯</span><br><span class="line">$ sudo rabbitmq-plugins <span class="built_in">enable</span> rabbitmq_management</span><br><span class="line"></span><br><span class="line">// ç¦ç”¨</span><br><span class="line">$ sudo rabbitmq-plugins <span class="built_in">disable</span> rabbitmq_management</span><br></pre></td></tr></table></figure>
<p>è®¿é—® <code>your-server-ip:15672</code> å°±èƒ½çœ‹åˆ° RabbitMQ Web ç•Œé¢ï¼Œé»˜è®¤çš„ç”¨æˆ·åï¼š<code>guest</code>ï¼Œå¯†ç ï¼š<code>guest</code></p>
<h1 id="å®ä¾‹"><a href="#å®ä¾‹" class="headerlink" title="å®ä¾‹"></a>å®ä¾‹</h1><blockquote>
<p>åŸºäº <code>Python</code> çš„å‘å¸ƒè®¢é˜…æ¨¡å¼ã€‚</p>
</blockquote>
<h2 id="å®‰è£…ä¾èµ–"><a href="#å®‰è£…ä¾èµ–" class="headerlink" title="å®‰è£…ä¾èµ–"></a>å®‰è£…ä¾èµ–</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// æ›´æ–° pip</span><br><span class="line">$ pip install --upgrade  pip</span><br><span class="line"></span><br><span class="line">// å®‰è£… pika åº“</span><br><span class="line">$ pip install pika</span><br></pre></td></tr></table></figure>
<h2 id="ç”Ÿäº§è€…"><a href="#ç”Ÿäº§è€…" class="headerlink" title="ç”Ÿäº§è€…"></a>ç”Ÿäº§è€…</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># producer.py</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> pika</span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"></span><br><span class="line"><span class="comment"># å»ºç«‹åˆ°ä»£ç†æœåŠ¡å™¨çš„è¿æ¥</span></span><br><span class="line">credentials = pika.PlainCredentials(<span class="string">&#x27;guest&#x27;</span>, <span class="string">&#x27;guest&#x27;</span>)</span><br><span class="line">parameters = pika.ConnectionParameters(<span class="string">&#x27;localhost&#x27;</span>, credentials=credentials)</span><br><span class="line">connection = pika.BlockingConnection(parameters)</span><br><span class="line"></span><br><span class="line"><span class="comment"># è·å–ä¿¡é“</span></span><br><span class="line">channel = connection.channel()</span><br><span class="line"></span><br><span class="line"><span class="comment"># å£°æ˜äº¤æ¢æœº</span></span><br><span class="line">channel.exchange_declare(exchange=<span class="string">&#x27;HelloExchange&#x27;</span>,</span><br><span class="line">                         exchange_type=<span class="string">&#x27;fanout&#x27;</span>,</span><br><span class="line">                         passive=<span class="literal">False</span>,</span><br><span class="line">                         durable=<span class="literal">True</span>,</span><br><span class="line">                         auto_delete=<span class="literal">False</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ›å»ºæ¶ˆæ¯</span></span><br><span class="line">message = <span class="string">&#x27; &#x27;</span>.join(sys.argv[<span class="number">1</span>:]) <span class="keyword">or</span> <span class="string">&quot;ğŸ”¥ info: Hello World!&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å‘å¸ƒæ¶ˆæ¯</span></span><br><span class="line">channel.basic_publish(exchange=<span class="string">&#x27;HelloExchange&#x27;</span>,</span><br><span class="line">                      routing_key=<span class="string">&#x27;hello&#x27;</span>,</span><br><span class="line">                      body=message)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27; [ğŸ˜­] Sent %r&#x27;</span> % message)</span><br><span class="line"></span><br><span class="line"><span class="comment"># å…³é—­è¿æ¥</span></span><br><span class="line">connection.close()</span><br></pre></td></tr></table></figure>
<h2 id="æ¶ˆè´¹è€…"><a href="#æ¶ˆè´¹è€…" class="headerlink" title="æ¶ˆè´¹è€…"></a>æ¶ˆè´¹è€…</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># customer.py</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> pika</span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"></span><br><span class="line"><span class="comment"># å»ºç«‹åˆ°ä»£ç†æœåŠ¡å™¨çš„è¿æ¥</span></span><br><span class="line">credentials = pika.PlainCredentials(<span class="string">&#x27;guest&#x27;</span>, <span class="string">&#x27;guest&#x27;</span>)</span><br><span class="line">parameters = pika.ConnectionParameters(<span class="string">&#x27;localhost&#x27;</span>, credentials=credentials)</span><br><span class="line">connection = pika.BlockingConnection(parameters)</span><br><span class="line"></span><br><span class="line"><span class="comment"># è·å–ä¿¡é“</span></span><br><span class="line">channel = connection.channel()</span><br><span class="line"></span><br><span class="line"><span class="comment"># å£°æ˜äº¤æ¢æœº</span></span><br><span class="line">channel.exchange_declare(exchange=<span class="string">&#x27;HelloExchange&#x27;</span>,</span><br><span class="line">                         exchange_type=<span class="string">&#x27;fanout&#x27;</span>,</span><br><span class="line">                         passive=<span class="literal">False</span>,</span><br><span class="line">                         durable=<span class="literal">True</span>,</span><br><span class="line">                         auto_delete=<span class="literal">False</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># å£°æ˜é˜Ÿåˆ—</span></span><br><span class="line">channel.queue_declare(queue=<span class="string">&#x27;HelloQueue&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># é€šè¿‡é”®ã€helloã€å°†é˜Ÿåˆ—å’Œäº¤æ¢æœºç»‘å®š</span></span><br><span class="line">channel.queue_bind(exchange=<span class="string">&#x27;HelloExchange&#x27;</span>,</span><br><span class="line">                   routing_key=<span class="string">&#x27;hello&#x27;</span>,</span><br><span class="line">                   queue=<span class="string">&#x27;HelloQueue&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27; [ğŸ¤·â€â™‚ï¸] Waiting for logs. To exit press CTRL+C&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># ç”¨æˆ·å¤„ç†ä¼ å…¥çš„æ¶ˆæ¯å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">callback</span>(<span class="params">channel, method, header, body</span>):</span></span><br><span class="line">    <span class="comment"># æ¶ˆæ¯ç¡®è®¤</span></span><br><span class="line">    channel.basic_ack(delivery_tag=method.delivery_tag)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> body.decode() == <span class="string">&#x27;quit&#x27;</span>:</span><br><span class="line">        <span class="comment"># åœæ­¢æ¶ˆè´¹</span></span><br><span class="line">        channel.stop_consuming()</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot; [ğŸ˜„] %r&quot;</span> % body.decode())</span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¢é˜…æ¶ˆè´¹è€…</span></span><br><span class="line">channel.basic_consume(callback, queue=<span class="string">&#x27;HelloQueue&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¼€å§‹æ¶ˆè´¹</span></span><br><span class="line">channel.start_consuming()</span><br></pre></td></tr></table></figure>
<h2 id="æµ‹è¯•"><a href="#æµ‹è¯•" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h2><p>åˆ†åˆ«æ‰“å¼€ä¸¤ä¸ªç»ˆç«¯çª—å£ï¼Œå‡è®¾ A çª—å£ä¸ºæ¶ˆè´¹çª—å£ï¼Œè¿è¡Œ <code>python ./customer.py</code>ï¼ŒB çª—å£ä¸ºç”Ÿäº§çª—å£ï¼Œè¿è¡Œ <code>python ./producer.py ä½ è¾“å…¥çš„å­—ç¬¦ä¸²</code>ï¼Œè§‚å¯Ÿè¿è¡Œæƒ…å†µã€‚</p>
]]></content>
      <categories>
        <category>rabbitmq</category>
      </categories>
      <tags>
        <tag>rabbitmq</tag>
      </tags>
  </entry>
  <entry>
    <title>Redis é›†ç¾¤æ­å»º</title>
    <url>/2020/01/16/redis-cluster/</url>
    <content><![CDATA[<p><code>Redis</code> æ˜¯ä¸€ä¸ª <code>K-V</code> å­˜å‚¨ç³»ç»Ÿï¼Œæ˜¯ä¸€ä¸ªé«˜æ€§èƒ½çš„ <code>K-V</code> æ•°æ®åº“ï¼Œæ˜¯ç›®å‰å¤§è§„æ¨¡ä½¿ç”¨çš„ç¼“å­˜ä¸­é—´ä»¶ã€‚å•èŠ‚ç‚¹çš„<code>Redis</code> å·²ç»å°±è¾¾åˆ°äº†å¾ˆé«˜çš„æ€§èƒ½ï¼Œä¸ºäº†æé«˜å¯ç”¨æ€§æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>Redis</code> é›†ç¾¤ã€‚</p>
<span id="more"></span>
<blockquote>
<p><a href="https://redis.io/">Redis Website</a></p>
</blockquote>
<h2 id="é›†ç¾¤ç®€ä»‹"><a href="#é›†ç¾¤ç®€ä»‹" class="headerlink" title="é›†ç¾¤ç®€ä»‹"></a>é›†ç¾¤ç®€ä»‹</h2><p><code>Redis</code> é›†ç¾¤æ˜¯ä¸€ä¸ªå¯ä»¥åœ¨å¤šä¸ª <code>Redis</code> èŠ‚ç‚¹ä¹‹é—´è¿›è¡Œæ•°æ®å…±äº«çš„è®¾æ–½ï¼ˆ<code>installation</code>ï¼‰ã€‚</p>
<p><code>Redis</code> é›†ç¾¤ä¸æ”¯æŒé‚£äº›éœ€è¦åŒæ—¶å¤„ç†å¤šä¸ªé”®çš„ <code>Redis</code> å‘½ä»¤ï¼Œ å› ä¸ºæ‰§è¡Œè¿™äº›å‘½ä»¤éœ€è¦åœ¨å¤šä¸ª <code>Redis</code> èŠ‚ç‚¹ä¹‹é—´ç§»åŠ¨æ•°æ®ï¼Œ å¹¶ä¸”åœ¨é«˜è´Ÿè½½çš„æƒ…å†µä¸‹ï¼Œ è¿™äº›å‘½ä»¤å°†é™ä½ <code>Redis</code> é›†ç¾¤çš„æ€§èƒ½ï¼Œå¹¶å¯¼è‡´ä¸å¯é¢„æµ‹çš„è¡Œä¸ºã€‚</p>
<p><code>Redis</code> é›†ç¾¤é€šè¿‡åˆ†åŒºï¼ˆ<code>partition</code>ï¼‰æ¥æä¾›ä¸€å®šç¨‹åº¦çš„å¯ç”¨æ€§ï¼ˆ<code>availability</code>ï¼‰ï¼šå³ä½¿é›†ç¾¤ä¸­æœ‰ä¸€éƒ¨åˆ†èŠ‚ç‚¹å¤±æ•ˆæˆ–è€…æ— æ³•è¿›è¡Œé€šè®¯ï¼Œé›†ç¾¤ä¹Ÿå¯ä»¥ç»§ç»­å¤„ç†å‘½ä»¤è¯·æ±‚ã€‚</p>
<p><code>Redis</code> é›†ç¾¤æä¾›äº†ä»¥ä¸‹ä¸¤ä¸ªå¥½å¤„ï¼š</p>
<ul>
<li>å°†æ•°æ®è‡ªåŠ¨åˆ‡åˆ†ï¼ˆ<code>split</code>ï¼‰åˆ°å¤šä¸ªèŠ‚ç‚¹çš„èƒ½åŠ›</li>
<li>å½“é›†ç¾¤ä¸­çš„ä¸€éƒ¨åˆ†èŠ‚ç‚¹å¤±æ•ˆæˆ–è€…æ— æ³•è¿›è¡Œé€šè®¯æ—¶ï¼Œä»ç„¶å¯ä»¥ç»§ç»­å¤„ç†å‘½ä»¤è¯·æ±‚çš„èƒ½åŠ›</li>
</ul>
<h2 id="é›†ç¾¤è¯´æ˜"><a href="#é›†ç¾¤è¯´æ˜" class="headerlink" title="é›†ç¾¤è¯´æ˜"></a>é›†ç¾¤è¯´æ˜</h2><h3 id="é›†ç¾¤æ•°æ®å…±äº«"><a href="#é›†ç¾¤æ•°æ®å…±äº«" class="headerlink" title="é›†ç¾¤æ•°æ®å…±äº«"></a>é›†ç¾¤æ•°æ®å…±äº«</h3><p><code>Redis</code> é›†ç¾¤ä½¿ç”¨æ•°æ®åˆ†ç‰‡ï¼ˆ<code>sharding</code>ï¼‰è€Œéä¸€è‡´æ€§å“ˆå¸Œï¼ˆ<code>consistency hashing</code>ï¼‰æ¥å®ç°ï¼šä¸€ä¸ª <code>Redis</code> é›†ç¾¤åŒ…å« <code>16384</code> ä¸ªå“ˆå¸Œæ§½ï¼ˆ<code>hash slot</code>ï¼‰ï¼Œæ•°æ®åº“ä¸­çš„æ¯ä¸ªé”®éƒ½å±äºè¿™ <code>16384</code> ä¸ªå“ˆå¸Œæ§½çš„å…¶ä¸­ä¸€ä¸ªï¼Œé›†ç¾¤ä½¿ç”¨å…¬å¼ <code>CRC16(key) % 16384</code> æ¥è®¡ç®—é”® <code>key</code> å±äºå“ªä¸ªæ§½ï¼Œå…¶ä¸­ <code>CRC16(key)</code> è¯­å¥ç”¨äºè®¡ç®—é”® <code>key</code> çš„ <code>CRC16</code> æ ¡éªŒå’Œã€‚</p>
<h3 id="é›†ç¾¤ä¸­çš„æ¯ä¸ªèŠ‚ç‚¹è´Ÿè´£å¤„ç†ä¸€éƒ¨åˆ†å“ˆå¸Œæ§½"><a href="#é›†ç¾¤ä¸­çš„æ¯ä¸ªèŠ‚ç‚¹è´Ÿè´£å¤„ç†ä¸€éƒ¨åˆ†å“ˆå¸Œæ§½" class="headerlink" title="é›†ç¾¤ä¸­çš„æ¯ä¸ªèŠ‚ç‚¹è´Ÿè´£å¤„ç†ä¸€éƒ¨åˆ†å“ˆå¸Œæ§½"></a>é›†ç¾¤ä¸­çš„æ¯ä¸ªèŠ‚ç‚¹è´Ÿè´£å¤„ç†ä¸€éƒ¨åˆ†å“ˆå¸Œæ§½</h3><p>ä¸€ä¸ªé›†ç¾¤å¯ä»¥æœ‰ä¸‰ä¸ªå“ˆå¸Œæ§½ï¼Œå…¶ä¸­ï¼š</p>
<ul>
<li>èŠ‚ç‚¹ <code>A</code> è´Ÿè´£å¤„ç† <code>0</code> å·è‡³ <code>5500</code> å·å“ˆå¸Œæ§½</li>
<li>èŠ‚ç‚¹ <code>B</code> è´Ÿè´£å¤„ç† <code>5501</code> å·è‡³ <code>11000</code> å·å“ˆå¸Œæ§½</li>
<li>èŠ‚ç‚¹ <code>C</code> è´Ÿè´£å¤„ç† <code>11001</code> å·è‡³ <code>16384</code> å·å“ˆå¸Œæ§½</li>
</ul>
<h3 id="é›†ç¾¤ä¸­çš„ä¸»ä»å¤åˆ¶"><a href="#é›†ç¾¤ä¸­çš„ä¸»ä»å¤åˆ¶" class="headerlink" title="é›†ç¾¤ä¸­çš„ä¸»ä»å¤åˆ¶"></a>é›†ç¾¤ä¸­çš„ä¸»ä»å¤åˆ¶</h3><p>ä¸ºäº†ä½¿å¾—é›†ç¾¤åœ¨ä¸€éƒ¨åˆ†èŠ‚ç‚¹ä¸‹çº¿æˆ–è€…æ— æ³•ä¸é›†ç¾¤çš„å¤§å¤šæ•°ï¼ˆ<code>majority</code>ï¼‰èŠ‚ç‚¹è¿›è¡Œé€šè®¯çš„æƒ…å†µä¸‹ï¼Œä»ç„¶å¯ä»¥æ­£å¸¸è¿ä½œï¼Œ<code>Redis</code> é›†ç¾¤å¯¹èŠ‚ç‚¹ä½¿ç”¨äº†ä¸»ä»å¤åˆ¶åŠŸèƒ½ï¼šé›†ç¾¤ä¸­çš„æ¯ä¸ªèŠ‚ç‚¹éƒ½æœ‰ <code>1</code> ä¸ªè‡³ <code>N</code> ä¸ªå¤åˆ¶å“ï¼ˆ<code>replica</code>ï¼‰ï¼Œå…¶ä¸­ä¸€ä¸ªå¤åˆ¶å“ä¸ºä¸»èŠ‚ç‚¹ï¼ˆ<code>master</code>ï¼‰ï¼Œè€Œå…¶ä½™çš„ <code>N-1</code> ä¸ªå¤åˆ¶å“ä¸ºä»èŠ‚ç‚¹ï¼ˆ<code>slave</code>ï¼‰</p>
<h3 id="é›†ç¾¤-TCP-ç«¯å£"><a href="#é›†ç¾¤-TCP-ç«¯å£" class="headerlink" title="é›†ç¾¤ TCP ç«¯å£"></a>é›†ç¾¤ <code>TCP</code> ç«¯å£</h3><p>æ¯ä¸ª <code>Redis Cluster</code> èŠ‚ç‚¹éƒ½éœ€è¦ <code>2</code> ä¸ª <code>TCP</code> è¿æ¥æ‰“å¼€ï¼Œæ­£å¸¸çš„ <code>Redis TCP</code> ç«¯å£è¢«æœåŠ¡äºå®¢æˆ·ç«¯ï¼Œä¾‹å¦‚ï¼š<code>6379</code>ï¼ŒåŠ ä¸Šé€šè¿‡å¢åŠ  <code>10000</code> åˆ°æ•°æ®ç«¯å£è·å–çš„ç«¯å£ï¼Œä¾‹å¦‚ï¼š<code>16379</code>ã€‚</p>
<p>ç¬¬äºŒä¸ªé«˜ç«¯å£è¢«ç”¨æ¥ <code>Redis Cluster Bus</code>ï¼Œä¹Ÿå°±æ˜¯ä½¿ç”¨äºŒè¿›åˆ¶åè®®çš„ä¸€ä¸ªèŠ‚ç‚¹åˆ°èŠ‚ç‚¹çš„é€šä¿¡ä¿¡é“ã€‚<code>Redis Cluster Bus</code> è¢«èŠ‚ç‚¹ç”¨äºæ•…éšœæ£€æµ‹ï¼Œé…ç½®æ›´æ–°ï¼Œæ•…éšœè½¬ç§»æˆæƒç­‰ç­‰ã€‚å®¢æˆ·ç«¯ä¸åº”è¯¥å°è¯•ä¸ <code>Redis Cluster Bus</code> ç«¯å£è¿›è¡Œé€šä¿¡ï¼Œè€Œæ˜¯å§‹ç»ˆä½¿ç”¨æ­£å¸¸çš„ <code>Redis</code> å‘½ä»¤ç«¯å£ï¼Œç„¶è€Œè¦ç¡®ä¿åœ¨é˜²ç«å¢™ä¸­æ‰“å¼€ä¸¤ä¸ªç«¯å£ï¼Œå¦åˆ™ <code>Redis Cluster</code> èŠ‚ç‚¹å°†æ— æ³•é€šä¿¡ã€‚</p>
<p>å‘½ä»¤ç«¯å£å’Œ <code>Redis Cluster Bus</code> ç«¯å£åç§»æ˜¯å›ºå®šçš„ï¼Œå§‹ç»ˆä¸º <code>10000</code>ã€‚</p>
<p>æ³¨æ„ï¼Œä¸ºäº†ä½¿ <code>Redis Cluster</code> æ­£å¸¸å·¥ä½œï¼Œä½ éœ€è¦ä¸ºæ¯ä¸ªèŠ‚ç‚¹ï¼š</p>
<ul>
<li>ç”¨äºå®¢æˆ·ç«¯è¿›è¡Œé€šä¿¡çš„æ™®é€šå®¢æˆ·ç«¯é€šä¿¡ç«¯å£ï¼ˆé€šå¸¸ä½¿ç”¨ <code>6379</code>ï¼‰å¯¹æ‰€æœ‰éœ€è¦åˆ°è¾¾é›†ç¾¤çš„å®¢æˆ·ç«¯ï¼Œä»¥åŠæ‰€æœ‰å…¶å®ƒé›†ç¾¤èŠ‚ç‚¹ï¼ˆä½¿ç”¨å®¢æˆ·ç«¯ç«¯å£è¿›è¡Œå¯†é’¥è¿ç§»ï¼‰éƒ½æ˜¯å¼€æ”¾çš„</li>
<li><code>Redis Cluster Bus</code> ç«¯å£ï¼ˆå®¢æˆ·ç«¯ç«¯å£ <code>+10000</code>ï¼‰å¿…é¡»å¯ä»æ‰€æœ‰å…¶å®ƒé›†ç¾¤èŠ‚ç‚¹è®¿é—®</li>
</ul>
<p>å¦‚æœä¸æ‰“å¼€ä¸¤ä¸ª <code>TCP</code> ç«¯å£ï¼Œé›†ç¾¤å°†æ— æ³•æŒ‰é¢„æœŸå·¥ä½œ</p>
<p><code>Redis Cluster Bus</code> ä½¿ç”¨ä¸åŒçš„äºŒè¿›åˆ¶åè®®è¿›è¡ŒèŠ‚å åˆ°èŠ‚ç‚¹çš„æ•°æ®äº¤æ¢ï¼Œè¿™æ›´é€‚åˆäºä½¿ç”¨å°‘é‡çš„å¸¦å®½å’Œå¤„ç†æ—¶é—´äº¤æ¢èŠ‚ç‚¹ä¹‹é—´çš„ä¿¡æ¯</p>
<h2 id="å®‰è£…ä¾èµ–"><a href="#å®‰è£…ä¾èµ–" class="headerlink" title="å®‰è£…ä¾èµ–"></a>å®‰è£…ä¾èµ–</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ sudo gpg --keyserver hkp://keys.gnupg.net --recv-keys 409B6B1796C275462A1703113804BB82D39DC0E3</span><br><span class="line">$ sudo curl -sSL https://get.rvm.io | bash -s stable</span><br><span class="line">$ sudo <span class="built_in">source</span> ~/.rvm/scripts/rvm</span><br><span class="line">$ sudo <span class="built_in">echo</span> <span class="string">&quot;ruby_url=https://cache.ruby-china.org/pub/ruby&quot;</span> &gt; ~/.rvm/user/db</span><br><span class="line">$ rvm -v</span><br><span class="line">$ sudo rvm install 2.4.1</span><br><span class="line">$ sudo gem update</span><br><span class="line">$ sudo gem install redis</span><br></pre></td></tr></table></figure>
<h2 id="é›†ç¾¤é…ç½®"><a href="#é›†ç¾¤é…ç½®" class="headerlink" title="é›†ç¾¤é…ç½®"></a>é›†ç¾¤é…ç½®</h2><h3 id="å®‰è£…-Redis"><a href="#å®‰è£…-Redis" class="headerlink" title="å®‰è£… Redis"></a>å®‰è£… Redis</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> ~</span><br><span class="line">$ wget http://download.redis.io/releases/redis-4.0.9.tar.gz</span><br><span class="line">$ tar xzf redis-4.0.9.tar.gz</span><br><span class="line">$ <span class="built_in">cd</span> redis-4.0.9</span><br><span class="line">$ sudo make</span><br></pre></td></tr></table></figure>
<h3 id="åˆ›å»ºé…ç½®ç›®å½•"><a href="#åˆ›å»ºé…ç½®ç›®å½•" class="headerlink" title="åˆ›å»ºé…ç½®ç›®å½•"></a>åˆ›å»ºé…ç½®ç›®å½•</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ sudo mkdir -pv /usr/<span class="built_in">local</span>/redis-cluster/&#123;bin,etc,<span class="built_in">log</span>,run,var&#125;</span><br></pre></td></tr></table></figure>
<h3 id="åˆ›å»ºé…ç½®æ–‡ä»¶"><a href="#åˆ›å»ºé…ç½®æ–‡ä»¶" class="headerlink" title="åˆ›å»ºé…ç½®æ–‡ä»¶"></a>åˆ›å»ºé…ç½®æ–‡ä»¶</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ sudo cp ~/redis-4.0.9/redis.conf /usr/<span class="built_in">local</span>/redis-cluster/etc/redis-7001.conf</span><br></pre></td></tr></table></figure>
<h3 id="å¤åˆ¶å‘½ä»¤æ–‡ä»¶"><a href="#å¤åˆ¶å‘½ä»¤æ–‡ä»¶" class="headerlink" title="å¤åˆ¶å‘½ä»¤æ–‡ä»¶"></a>å¤åˆ¶å‘½ä»¤æ–‡ä»¶</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> ~/redis-4.0.9/src/</span><br><span class="line">$ sudo cp mkreleasehdr.sh redis-benchmark redis-check-aof redis-check-rdb redis-sentinel redis-cli redis-server /usr/<span class="built_in">local</span>/redis-cluster/bin</span><br></pre></td></tr></table></figure>
<h3 id="ä¿®æ”¹é…ç½®æ–‡ä»¶"><a href="#ä¿®æ”¹é…ç½®æ–‡ä»¶" class="headerlink" title="ä¿®æ”¹é…ç½®æ–‡ä»¶"></a>ä¿®æ”¹é…ç½®æ–‡ä»¶</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ sudo vim /usr/<span class="built_in">local</span>/redis-cluster/etc/redis-7001.conf</span><br><span class="line"><span class="built_in">bind</span> 192.168.33.110</span><br><span class="line">port 7001</span><br><span class="line">daemonize yes</span><br><span class="line"></span><br><span class="line">pidfile /user/<span class="built_in">local</span>/redis-cluster/run/7001.pid</span><br><span class="line">logfile /usr/<span class="built_in">local</span>/redis-cluster/<span class="built_in">log</span>/7001.log</span><br><span class="line">dbfilename dump-7001.rdb</span><br><span class="line"></span><br><span class="line">dir /usr/<span class="built_in">local</span>/redis-cluster/var</span><br><span class="line"></span><br><span class="line">appendonly yes</span><br><span class="line">appendfilename <span class="string">&quot;appendonly-7001.aof&quot;</span></span><br><span class="line"></span><br><span class="line">cluster-enabled yes</span><br><span class="line">cluster-config-file nodes-7001.conf</span><br><span class="line">cluster-node-timeout 15000</span><br></pre></td></tr></table></figure>
<h3 id="å¤åˆ¶é…ç½®æ–‡ä»¶"><a href="#å¤åˆ¶é…ç½®æ–‡ä»¶" class="headerlink" title="å¤åˆ¶é…ç½®æ–‡ä»¶"></a>å¤åˆ¶é…ç½®æ–‡ä»¶</h3><blockquote>
<p>å°†å¤åˆ¶åçš„æ–‡ä»¶ä¸­çš„ <code>7001</code> æ¢æˆç›¸åº”çš„åç§°</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ sudo cp /usr/<span class="built_in">local</span>/redis-cluster/etc/redis-7001.conf /usr/<span class="built_in">local</span>/redis-cluster/etc/redis-7002.conf</span><br><span class="line">$ sudo cp /usr/<span class="built_in">local</span>/redis-cluster/etc/redis-7001.conf /usr/<span class="built_in">local</span>/redis-cluster/etc/redis-7003.conf</span><br><span class="line">$ sudo cp /usr/<span class="built_in">local</span>/redis-cluster/etc/redis-7001.conf /usr/<span class="built_in">local</span>/redis-cluster/etc/redis-7004.conf</span><br><span class="line">$ sudo cp /usr/<span class="built_in">local</span>/redis-cluster/etc/redis-7001.conf /usr/<span class="built_in">local</span>/redis-cluster/etc/redis-7005.conf</span><br><span class="line">$ sudo cp /usr/<span class="built_in">local</span>/redis-cluster/etc/redis-7001.conf /usr/<span class="built_in">local</span>/redis-cluster/etc/redis-7006.conf</span><br></pre></td></tr></table></figure>
<h2 id="é›†ç¾¤éƒ¨ç½²"><a href="#é›†ç¾¤éƒ¨ç½²" class="headerlink" title="é›†ç¾¤éƒ¨ç½²"></a>é›†ç¾¤éƒ¨ç½²</h2><h3 id="å¯åŠ¨èŠ‚ç‚¹"><a href="#å¯åŠ¨èŠ‚ç‚¹" class="headerlink" title="å¯åŠ¨èŠ‚ç‚¹"></a>å¯åŠ¨èŠ‚ç‚¹</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// å¯åŠ¨é…ç½®çš„æ‰€æœ‰èŠ‚ç‚¹</span><br><span class="line">$ sudo /usr/<span class="built_in">local</span>/redis-cluster/bin/redis-cli /usr/<span class="built_in">local</span>/redis-cluster/etc/redis-7001.conf</span><br><span class="line">$ sudo /usr/<span class="built_in">local</span>/redis-cluster/bin/redis-cli /usr/<span class="built_in">local</span>/redis-cluster/etc/redis-7002.conf</span><br><span class="line">$ sudo /usr/<span class="built_in">local</span>/redis-cluster/bin/redis-cli /usr/<span class="built_in">local</span>/redis-cluster/etc/redis-7003.conf</span><br><span class="line">$ sudo /usr/<span class="built_in">local</span>/redis-cluster/bin/redis-cli /usr/<span class="built_in">local</span>/redis-cluster/etc/redis-7004.conf</span><br><span class="line">$ sudo /usr/<span class="built_in">local</span>/redis-cluster/bin/redis-cli /usr/<span class="built_in">local</span>/redis-cluster/etc/redis-7005.conf</span><br><span class="line">$ sudo /usr/<span class="built_in">local</span>/redis-cluster/bin/redis-cli /usr/<span class="built_in">local</span>/redis-cluster/etc/redis-7006.conf</span><br></pre></td></tr></table></figure>
<h3 id="æ£€æŸ¥æœåŠ¡"><a href="#æ£€æŸ¥æœåŠ¡" class="headerlink" title="æ£€æŸ¥æœåŠ¡"></a>æ£€æŸ¥æœåŠ¡</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ ps -ef | grep redis</span><br><span class="line">root     20077     1  0 May18 ?        00:01:04 /usr/<span class="built_in">local</span>/bin/redis-server 192.168.33.110:7001 [cluster]</span><br><span class="line">root     20079     1  0 May18 ?        00:01:03 /usr/<span class="built_in">local</span>/bin/redis-server 192.168.33.110:7002 [cluster]</span><br><span class="line">root     20081     1  0 May18 ?        00:01:03 /usr/<span class="built_in">local</span>/bin/redis-server 192.168.33.110:7003 [cluster]</span><br><span class="line">root     20089     1  0 May18 ?        00:01:03 /usr/<span class="built_in">local</span>/bin/redis-server 192.168.33.110:7004 [cluster]</span><br><span class="line">root     20091     1  0 May18 ?        00:01:03 /usr/<span class="built_in">local</span>/bin/redis-server 192.168.33.110:7005 [cluster]</span><br><span class="line">root     20096     1  0 May18 ?        00:01:03 /usr/<span class="built_in">local</span>/bin/redis-server 192.168.33.110:7006 [cluster]</span><br></pre></td></tr></table></figure>
<h3 id="åœæ­¢èŠ‚ç‚¹"><a href="#åœæ­¢èŠ‚ç‚¹" class="headerlink" title="åœæ­¢èŠ‚ç‚¹"></a>åœæ­¢èŠ‚ç‚¹</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ sudo /usr/<span class="built_in">local</span>/redis-cluster/bin/redis-cli -c -h 192.168.33.110 -p 7001 shutdown</span><br></pre></td></tr></table></figure>
<h3 id="èŠ‚ç‚¹åŠ å…¥é›†ç¾¤"><a href="#èŠ‚ç‚¹åŠ å…¥é›†ç¾¤" class="headerlink" title="èŠ‚ç‚¹åŠ å…¥é›†ç¾¤"></a>èŠ‚ç‚¹åŠ å…¥é›†ç¾¤</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ sudo cp ~/redis-4.0.9/src/redis-trib.rb /usr/<span class="built_in">local</span>/redis-cluster/bin/redis-trib</span><br><span class="line">$ sudo chmod a+x /usr/<span class="built_in">local</span>/redis-cluster/bin/redis-trib</span><br><span class="line">$ sudo /usr/<span class="built_in">local</span>/redis-cluster/bin/redis-trib create --replicas 1 \</span><br><span class="line">&gt; 192.168.33.110:7001 \</span><br><span class="line">&gt; 192.168.33.110:7002 \</span><br><span class="line">&gt; 192.168.33.110:7003 \</span><br><span class="line">&gt; 192.168.33.110:7004 \</span><br><span class="line">&gt; 192.168.33.110:7005 \</span><br><span class="line">&gt; 192.168.33.110:7006 \</span><br><span class="line">&gt;&gt;&gt; Creating cluster</span><br><span class="line">&gt;&gt;&gt; Performing <span class="built_in">hash</span> slots allocation on 6 nodes...</span><br><span class="line">Using 3 masters:</span><br><span class="line">127.0.0.1:7001</span><br><span class="line">127.0.0.1:7002</span><br><span class="line">127.0.0.1:7003</span><br><span class="line">Adding replica 127.0.0.1:7005 to 127.0.0.1:7001</span><br><span class="line">Adding replica 127.0.0.1:7006 to 127.0.0.1:7002</span><br><span class="line">Adding replica 127.0.0.1:7004 to 127.0.0.1:7003</span><br><span class="line">&gt;&gt;&gt; Trying to optimize slaves allocation <span class="keyword">for</span> anti-affinity</span><br><span class="line">[WARNING] Some slaves are <span class="keyword">in</span> the same host as their master</span><br><span class="line">M: 4ed7d8f54311fb883431c1c5a4715c1ae59d5215 127.0.0.1:7001</span><br><span class="line">   slots:0-5460 (5461 slots) master</span><br><span class="line">M: 31030e4c35659d5de1146941a2d1f2c1524b53e9 127.0.0.1:7002</span><br><span class="line">   slots:5461-10922 (5462 slots) master</span><br><span class="line">M: 573752b8b0747bc2c7bb3e4a1edb0e467cfdef0e 127.0.0.1:7003</span><br><span class="line">   slots:10923-16383 (5461 slots) master</span><br><span class="line">S: 11f577639b081c1514f28a74764c9330d819dcb8 127.0.0.1:7004</span><br><span class="line">   replicates 573752b8b0747bc2c7bb3e4a1edb0e467cfdef0e</span><br><span class="line">S: ff6d7ca3ea29036385c89a5dc93f807f91307871 127.0.0.1:7005</span><br><span class="line">   replicates 4ed7d8f54311fb883431c1c5a4715c1ae59d5215</span><br><span class="line">S: a6f79f4d1de8d7bef4911e934b802829ed29a2d3 127.0.0.1:7006</span><br><span class="line">   replicates 31030e4c35659d5de1146941a2d1f2c1524b53e9</span><br><span class="line">Can I <span class="built_in">set</span> the above configuration? (<span class="built_in">type</span> <span class="string">&#x27;yes&#x27;</span> to accept): yes</span><br><span class="line">&gt;&gt;&gt; Nodes configuration updated</span><br><span class="line">&gt;&gt;&gt; Assign a different config epoch to each node</span><br><span class="line">&gt;&gt;&gt; Sending CLUSTER MEET messages to join the cluster</span><br><span class="line">Waiting <span class="keyword">for</span> the cluster to join..</span><br><span class="line">&gt;&gt;&gt; Performing Cluster Check (using node 127.0.0.1:7001)</span><br><span class="line">M: 4ed7d8f54311fb883431c1c5a4715c1ae59d5215 127.0.0.1:7001</span><br><span class="line">   slots:0-5460 (5461 slots) master</span><br><span class="line">   1 additional replica(s)</span><br><span class="line">S: 11f577639b081c1514f28a74764c9330d819dcb8 127.0.0.1:7004</span><br><span class="line">   slots: (0 slots) slave</span><br><span class="line">   replicates 573752b8b0747bc2c7bb3e4a1edb0e467cfdef0e</span><br><span class="line">S: a6f79f4d1de8d7bef4911e934b802829ed29a2d3 127.0.0.1:7006</span><br><span class="line">   slots: (0 slots) slave</span><br><span class="line">   replicates 31030e4c35659d5de1146941a2d1f2c1524b53e9</span><br><span class="line">S: ff6d7ca3ea29036385c89a5dc93f807f91307871 127.0.0.1:7005</span><br><span class="line">   slots: (0 slots) slave</span><br><span class="line">   replicates 4ed7d8f54311fb883431c1c5a4715c1ae59d5215</span><br><span class="line">M: 31030e4c35659d5de1146941a2d1f2c1524b53e9 127.0.0.1:7002</span><br><span class="line">   slots:5461-10922 (5462 slots) master</span><br><span class="line">   1 additional replica(s)</span><br><span class="line">M: 573752b8b0747bc2c7bb3e4a1edb0e467cfdef0e 127.0.0.1:7003</span><br><span class="line">   slots:10923-16383 (5461 slots) master</span><br><span class="line">   1 additional replica(s)</span><br><span class="line">[OK] All nodes agree about slots configuration.</span><br><span class="line">&gt;&gt;&gt; Check <span class="keyword">for</span> open slots...</span><br><span class="line">&gt;&gt;&gt; Check slots coverage...</span><br><span class="line">[OK] All 16384 slots covered.</span><br></pre></td></tr></table></figure>
<p>å¯ä»¥çœ‹åˆ°ï¼Œåˆ›å»ºé›†ç¾¤è¿™ä¸ªè¿‡ç¨‹æ¯”è¾ƒç¹çï¼Œå¯ä»¥åˆ›å»ºè„šæœ¬æ¥å®Œæˆè¿™äº›æ“ä½œ</p>
<ul>
<li>å¯åŠ¨è„šæœ¬</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ sudo vim /usr/<span class="built_in">local</span>/redis-cluster/bin/start.sh</span><br><span class="line"><span class="comment">#!/usr/bin/env bash</span></span><br><span class="line"></span><br><span class="line">RedisServerPath=/usr/<span class="built_in">local</span>/redis-cluster/bin</span><br><span class="line">RedisConfPath=/usr/<span class="built_in">local</span>/redis-cluster/etc</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> 1 2 3 4 5 6; <span class="keyword">do</span></span><br><span class="line">    <span class="variable">$RedisServerPath</span>/redis-server <span class="variable">$RedisConfPath</span>/redis-700<span class="variable">$i</span>.conf</span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line">/usr/<span class="built_in">local</span>/redis-cluster/bin/redis-trib.rb create --replicas 1 \</span><br><span class="line">192.168.33.110:7001 \</span><br><span class="line">192.168.33.110:7002 \</span><br><span class="line">192.168.33.110:7003 \</span><br><span class="line">192.168.33.110:7004 \</span><br><span class="line">192.168.33.110:7005 \</span><br><span class="line">192.168.33.110:7006 \</span><br><span class="line">$ sudo chmod a+x /usr/<span class="built_in">local</span>/redis-cluster/bin/start.sh</span><br></pre></td></tr></table></figure>
<ul>
<li>åœæ­¢è„šæœ¬</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ sudo vim /usr/<span class="built_in">local</span>/redis-cluster/bin/stop.sh</span><br><span class="line"><span class="comment">#!/usr/bin/env bash</span></span><br><span class="line"></span><br><span class="line">RedisClusterPath=/usr/<span class="built_in">local</span>/redis-cluster</span><br><span class="line">RedisCliPath=/usr/<span class="built_in">local</span>/redis-cluster/bin</span><br><span class="line">ip=192.168.33.110</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> 1 2 3 4 5 6; <span class="keyword">do</span></span><br><span class="line">    <span class="variable">$RedisCliPath</span>/redis-cli -c -h <span class="variable">$ip</span> -p 700<span class="variable">$i</span> shutdown</span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line">rm -rf <span class="variable">$RedisClusterPath</span>/<span class="built_in">log</span>/*</span><br><span class="line">rm -rf <span class="variable">$RedisClusterPath</span>/run/*</span><br><span class="line">rm -rf <span class="variable">$RedisClusterPath</span>/var/*</span><br><span class="line">$ sudo chmod a+x /usr/<span class="built_in">local</span>/redis-cluster/bin/stop.sh</span><br></pre></td></tr></table></figure>
<h3 id="æŸ¥çœ‹ä¿¡æ¯"><a href="#æŸ¥çœ‹ä¿¡æ¯" class="headerlink" title="æŸ¥çœ‹ä¿¡æ¯"></a>æŸ¥çœ‹ä¿¡æ¯</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ /usr/<span class="built_in">local</span>/redis-cluster/bin/redis-cli -c -h 192.168.33.110 -p 7001</span><br><span class="line">192.168.33.110:7001&gt; cluster nodes <span class="comment"># æŸ¥çœ‹èŠ‚ç‚¹ä¿¡æ¯</span></span><br><span class="line">5521b06a46910c873e7ee8a274f2cb9fc41ffed1 192.168.33.110:7003@17003 master - 0 1526681994008 3 connected 10923-16383</span><br><span class="line">8153a1b35e0fab1e48f0171653f6cffd82cbc5a6 192.168.33.110:7004@17004 slave d7e0395152496f41fe73fbbdabc8499c79f6632e 0 1526681996033 4 connected</span><br><span class="line">a2ff29661185f6ad17c99232d0490b3814ba0164 192.168.33.110:7006@17006 slave affc237bf177fd4ac591314736a1358e16545d0c 0 1526681995020 6 connected</span><br><span class="line">d7e0395152496f41fe73fbbdabc8499c79f6632e 192.168.33.110:7002@17002 master - 0 1526681993000 2 connected 5461-10922</span><br><span class="line">8b613e4b5abbdf3c2486dfcb8bc1e9dde1897820 192.168.33.110:7005@17005 slave 5521b06a46910c873e7ee8a274f2cb9fc41ffed1 0 1526681993000 5 connected</span><br><span class="line">affc237bf177fd4ac591314736a1358e16545d0c 192.168.33.110:7001@17001 myself,master - 0 1526681994000 1 connected 0-5460</span><br><span class="line">192.168.33.110:7001&gt; cluster info <span class="comment"># æŸ¥çœ‹é›†ç¾¤ä¿¡æ¯</span></span><br><span class="line">cluster_state:ok</span><br><span class="line">cluster_slots_assigned:16384</span><br><span class="line">cluster_slots_ok:16384</span><br><span class="line">cluster_slots_pfail:0</span><br><span class="line">cluster_slots_fail:0</span><br><span class="line">cluster_known_nodes:6</span><br><span class="line">cluster_size:3</span><br><span class="line">cluster_current_epoch:6</span><br><span class="line">cluster_my_epoch:1</span><br><span class="line">cluster_stats_messages_ping_sent:59501</span><br><span class="line">cluster_stats_messages_pong_sent:61755</span><br><span class="line">cluster_stats_messages_sent:121256</span><br><span class="line">cluster_stats_messages_ping_received:61750</span><br><span class="line">cluster_stats_messages_pong_received:59501</span><br><span class="line">cluster_stats_messages_meet_received:5</span><br><span class="line">cluster_stats_messages_received:121256</span><br></pre></td></tr></table></figure>
<h3 id="ç›¸å…³å‘½ä»¤"><a href="#ç›¸å…³å‘½ä»¤" class="headerlink" title="ç›¸å…³å‘½ä»¤"></a>ç›¸å…³å‘½ä»¤</h3><table>
<thead>
<tr>
<th>å‘½ä»¤</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>CLUSTER INFO</code></td>
<td>æ‰“å°é›†ç¾¤ä¿¡æ¯</td>
</tr>
<tr>
<td><code>CLUSTER NODES</code></td>
<td>åˆ—å‡ºé›†ç¾¤å½“å‰å·²çŸ¥çš„æ‰€æœ‰èŠ‚ç‚¹ä¿¡æ¯</td>
</tr>
<tr>
<td><code>CLUSTER MEET &lt;ip&gt; &lt;port&gt;</code></td>
<td>å°† <code>ip</code> å’Œ <code>port</code> æ‰€æŒ‡å®šçš„èŠ‚ç‚¹æ·»åŠ åˆ°é›†ç¾¤å½“ä¸­</td>
</tr>
<tr>
<td><code>CLUSTER FORGET &lt;node_id&gt;</code></td>
<td>ä»é›†ç¾¤ä¸­ç§»é™¤ <code>node_id</code> æŒ‡å®šçš„èŠ‚ç‚¹</td>
</tr>
<tr>
<td><code>CLUSTER REPLICATE &lt;node_id&gt;</code></td>
<td>å°†å½“å‰èŠ‚ç‚¹è®¾ç½®ä¸º <code>node_id</code> æŒ‡å®šçš„èŠ‚ç‚¹çš„ä»èŠ‚ç‚¹</td>
</tr>
<tr>
<td><code>CLUSTER SAVECONFIG</code></td>
<td>å°†èŠ‚ç‚¹çš„é…ç½®æ–‡ä»¶ä¿å­˜åˆ°ç¡¬ç›˜é‡Œé¢</td>
</tr>
<tr>
<td><code>CLUSTER ADDSLOTS &lt;slot&gt; [slot ...]</code></td>
<td>å°†ä¸€ä¸ªæˆ–å¤šä¸ªæ§½ï¼ˆ<code>slot</code>ï¼‰æŒ‡æ´¾ï¼ˆ<code>assign</code>ï¼‰ç»™å½“å‰èŠ‚ç‚¹</td>
</tr>
<tr>
<td><code>CLUSTER DELSLOTS &lt;slot&gt; [slot ...]</code></td>
<td>ç§»é™¤ä¸€ä¸ªæˆ–å¤šä¸ªæ§½å¯¹å½“å‰èŠ‚ç‚¹çš„æŒ‡æ´¾</td>
</tr>
<tr>
<td><code>CLUSTER FLUSHSLOTS</code></td>
<td>ç§»é™¤æŒ‡æ´¾ç»™å½“å‰èŠ‚ç‚¹çš„æ‰€æœ‰æ§½ï¼Œè®©å½“å‰èŠ‚ç‚¹å˜æˆä¸€ä¸ªæ²¡æœ‰æŒ‡æ´¾ä»»ä½•æ§½çš„èŠ‚ç‚¹</td>
</tr>
<tr>
<td><code>CLUSTER SETSLOT &lt;slot&gt; NODE &lt;node_id&gt;</code></td>
<td>å°†æ§½ <code>slot</code> æŒ‡æ´¾ç»™ <code>node_id</code> æŒ‡å®šçš„èŠ‚ç‚¹ï¼Œå¦‚æœæ§½å·²ç»æŒ‡æ´¾ç»™å¦ä¸€ä¸ªèŠ‚ç‚¹ï¼Œé‚£ä¹ˆå…ˆè®©å¦ä¸€ä¸ªèŠ‚ç‚¹åˆ é™¤è¯¥æ§½ï¼Œç„¶åå†è¿›è¡ŒæŒ‡æ´¾</td>
</tr>
<tr>
<td><code>CLUSTER SETSLOT &lt;slot&gt; MIGRATING &lt;node_id&gt;</code></td>
<td>å°†æœ¬èŠ‚ç‚¹çš„æ§½ <code>slot</code> è¿ç§»åˆ° <code>node_id</code> æŒ‡å®šçš„èŠ‚ç‚¹ä¸­</td>
</tr>
<tr>
<td><code>CLUSTER SETSLOT &lt;slot&gt; IMPORTING &lt;node_id&gt;</code></td>
<td>ä» <code>node_id</code> æŒ‡å®šçš„èŠ‚ç‚¹ä¸­å¯¼å…¥æ§½ <code>slot</code> åˆ°æœ¬èŠ‚ç‚¹</td>
</tr>
<tr>
<td><code>CLUSTER SETSLOT &lt;slot&gt; STABLE</code></td>
<td>å–æ¶ˆå¯¹æ§½ <code>slot</code> çš„å¯¼å…¥ï¼ˆ<code>import</code>ï¼‰æˆ–è€…è¿ç§»ï¼ˆ<code>migrate</code>ï¼‰</td>
</tr>
<tr>
<td><code>CLUSTER KEYSLOT &lt;key&gt;</code></td>
<td>è®¡ç®—é”® <code>key</code> åº”è¯¥è¢«æ”¾ç½®åœ¨å“ªä¸ªæ§½ä¸Š</td>
</tr>
<tr>
<td><code>CLUSTER COUNTKEYSINSLOT &lt;slot&gt;</code></td>
<td>è¿”å›æ§½ <code>slot</code> ç›®å‰åŒ…å«çš„é”®å€¼å¯¹æ•°é‡</td>
</tr>
<tr>
<td><code>CLUSTER GETKEYSINSLOT &lt;slot&gt; &lt;count&gt;</code></td>
<td>è¿”å› <code>count</code> ä¸ª <code>slot</code> æ§½ä¸­çš„é”®</td>
</tr>
</tbody>
</table>
<h2 id="å®ä¾‹æ“ä½œ"><a href="#å®ä¾‹æ“ä½œ" class="headerlink" title="å®ä¾‹æ“ä½œ"></a>å®ä¾‹æ“ä½œ</h2><h3 id="å®¢æˆ·ç«¯æ“ä½œ"><a href="#å®¢æˆ·ç«¯æ“ä½œ" class="headerlink" title="å®¢æˆ·ç«¯æ“ä½œ"></a>å®¢æˆ·ç«¯æ“ä½œ</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// ä»æŸä¸ªèŠ‚ç‚¹è®¾ç½®å€¼åï¼Œå»ä¸åŒçš„èŠ‚ç‚¹è·å–è®¾ç½®çš„å€¼</span><br><span class="line">$ /usr/<span class="built_in">local</span>/redis-cluster/bin/redis-cli -c -h 192.168.33.110 -p 7001</span><br><span class="line">192.168.33.110:7001&gt; <span class="built_in">set</span> foo bar</span><br><span class="line">-&gt; Redirected to slot [12182] located at 192.168.33.110:7003</span><br><span class="line">OK</span><br><span class="line">$ /usr/<span class="built_in">local</span>/redis-cluster/bin/redis-cli -c -h 192.168.33.110 -p 7001</span><br><span class="line">192.168.33.110:7001&gt; get foo</span><br><span class="line">-&gt; Redirected to slot [12182] located at 192.168.33.110:7003</span><br><span class="line"><span class="string">&quot;bar&quot;</span></span><br><span class="line">$ /usr/<span class="built_in">local</span>/redis-cluster/bin/redis-cli -c -h 192.168.33.110 -p 7002</span><br><span class="line">192.168.33.110:7002&gt; get foo</span><br><span class="line">-&gt; Redirected to slot [12182] located at 192.168.33.110:7003</span><br><span class="line"><span class="string">&quot;bar&quot;</span></span><br><span class="line">$ /usr/<span class="built_in">local</span>/redis-cluster/bin/redis-cli -c -h 192.168.33.110 -p 7003</span><br><span class="line">192.168.33.110:7003&gt; get foo</span><br><span class="line"><span class="string">&quot;bar&quot;</span></span><br><span class="line">$ /usr/<span class="built_in">local</span>/redis-cluster/bin/redis-cli -c -h 192.168.33.110 -p 7004</span><br><span class="line">192.168.33.110:7004&gt; get foo</span><br><span class="line">-&gt; Redirected to slot [12182] located at 192.168.33.110:7003</span><br><span class="line"><span class="string">&quot;bar&quot;</span></span><br><span class="line">$ /usr/<span class="built_in">local</span>/redis-cluster/bin/redis-cli -c -h 192.168.33.110 -p 7005</span><br><span class="line">192.168.33.110:7005&gt; get foo</span><br><span class="line">-&gt; Redirected to slot [12182] located at 192.168.33.110:7003</span><br><span class="line"><span class="string">&quot;bar&quot;</span></span><br><span class="line">$ /usr/<span class="built_in">local</span>/redis-cluster/bin/redis-cli -c -h 192.168.33.110 -p 7006</span><br><span class="line">192.168.33.110:7006&gt; get foo</span><br><span class="line">-&gt; Redirected to slot [12182] located at 192.168.33.110:7003</span><br><span class="line"><span class="string">&quot;bar&quot;</span></span><br></pre></td></tr></table></figure>
<h3 id="ç¨‹åºæ“ä½œ"><a href="#ç¨‹åºæ“ä½œ" class="headerlink" title="ç¨‹åºæ“ä½œ"></a>ç¨‹åºæ“ä½œ</h3><h4 id="ä¸‹è½½å®‰è£…"><a href="#ä¸‹è½½å®‰è£…" class="headerlink" title="ä¸‹è½½å®‰è£…"></a>ä¸‹è½½å®‰è£…</h4><blockquote>
<ul>
<li><a href="https://github.com/nrk/predis">Flexible and feature-complete Redis client for PHP and HHVM</a></li>
<li><a href="https://github.com/nrk/predis/wiki/Quick-tour">Quick tour</a></li>
</ul>
</blockquote>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> ~</span><br><span class="line">$ mkdir <span class="built_in">test</span></span><br><span class="line">$ <span class="built_in">cd</span> <span class="built_in">test</span></span><br><span class="line">$ composer init</span><br><span class="line">$ composer install</span><br><span class="line">$ composer require predis/predis</span><br></pre></td></tr></table></figure>
<h4 id="æµ‹è¯•ä»£ç "><a href="#æµ‹è¯•ä»£ç " class="headerlink" title="æµ‹è¯•ä»£ç "></a>æµ‹è¯•ä»£ç </h4><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">require</span> <span class="keyword">__DIR__</span> . <span class="string">&#x27;/vendor/autoload.php&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="variable">$i</span> = <span class="number">0</span>; <span class="variable">$i</span> &lt; <span class="number">6</span>; <span class="variable">$i</span>++) &#123;</span><br><span class="line">    <span class="variable">$parameters</span>[] = [</span><br><span class="line">        <span class="string">&#x27;host&#x27;</span>               =&gt; <span class="string">&#x27;192.168.33.110&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;port&#x27;</span>               =&gt; <span class="string">&#x27;700&#x27;</span> . <span class="variable">$i</span>,</span><br><span class="line">        <span class="string">&#x27;password&#x27;</span>           =&gt; <span class="literal">null</span>,</span><br><span class="line">        <span class="string">&#x27;database&#x27;</span>           =&gt; <span class="number">0</span>,</span><br><span class="line">        <span class="string">&#x27;timeout&#x27;</span>            =&gt; <span class="number">5</span>,</span><br><span class="line">        <span class="string">&#x27;read_write_timeout&#x27;</span> =&gt; <span class="number">5</span>,</span><br><span class="line">    ];</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable">$options</span> = [<span class="string">&#x27;cluster&#x27;</span> =&gt; <span class="string">&#x27;redis&#x27;</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="variable">$cluster</span> = <span class="keyword">new</span> \Predis\Client(<span class="variable">$parameters</span>, <span class="variable">$options</span>);</span><br><span class="line">&#125; <span class="keyword">catch</span> (\Predis\PredisException <span class="variable">$e</span>) &#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="variable">$e</span>-&gt;getMessage();</span><br><span class="line">    <span class="keyword">exit</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="variable">$i</span> = <span class="number">1</span>; <span class="variable">$i</span> &lt; <span class="number">100</span>; <span class="variable">$i</span>++) &#123;</span><br><span class="line">    <span class="variable">$format</span> = <span class="string">&#x27;No.%s is a RedisCluster test.&#x27;</span>;</span><br><span class="line">    <span class="variable">$cluster</span>-&gt;set(<span class="string">&quot;<span class="subst">$i</span>&quot;</span>, sprintf(<span class="variable">$format</span>, <span class="variable">$i</span>));</span><br><span class="line">    <span class="keyword">echo</span> <span class="variable">$cluster</span>-&gt;get(<span class="string">&quot;<span class="subst">$i</span>&quot;</span>) . PHP_EOL;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="æµ‹è¯•ç»“æœ"><a href="#æµ‹è¯•ç»“æœ" class="headerlink" title="æµ‹è¯•ç»“æœ"></a>æµ‹è¯•ç»“æœ</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ php cluster.php</span><br><span class="line">No.1 is a Redis cluster <span class="built_in">test</span>.</span><br><span class="line">No.2 is a Redis cluster <span class="built_in">test</span>.</span><br><span class="line">No.3 is a Redis cluster <span class="built_in">test</span>.</span><br><span class="line">...</span><br><span class="line">No.99 is a Redis cluster <span class="built_in">test</span>.</span><br><span class="line"></span><br><span class="line">$ /usr/<span class="built_in">local</span>/redis-cluster/bin/redis-cli -c -h 192.168.33.110 -p 7001</span><br><span class="line">192.168.33.110:7001&gt; get 11</span><br><span class="line"><span class="string">&quot;No.11 is a RedisCluster test.&quot;</span></span><br><span class="line">192.168.33.110:7001&gt; get 23</span><br><span class="line">-&gt; Redirected to slot [9671] located at 192.168.33.110:7002</span><br><span class="line"><span class="string">&quot;No.23 is a RedisCluster test.&quot;</span></span><br><span class="line">192.168.33.110:7002&gt; get 33</span><br><span class="line"><span class="string">&quot;No.33 is a RedisCluster test.&quot;</span></span><br><span class="line">192.168.33.110:7002&gt; get 67</span><br><span class="line"><span class="string">&quot;No.67 is a RedisCluster test.&quot;</span></span><br><span class="line">192.168.33.110:7002&gt; get 88</span><br><span class="line">-&gt; Redirected to slot [15207] located at 192.168.33.110:7003</span><br><span class="line"><span class="string">&quot;No.88 is a RedisCluster test.&quot;</span></span><br><span class="line">192.168.33.110:7003&gt; get 99</span><br><span class="line">-&gt; Redirected to slot [6263] located at 192.168.33.110:7002</span><br><span class="line"><span class="string">&quot;No.99 is a RedisCluster test.&quot;</span></span><br><span class="line">192.168.33.110:7002&gt; get 100</span><br><span class="line">-&gt; Redirected to slot [339] located at 192.168.33.110:7001</span><br><span class="line">(nil)</span><br><span class="line">192.168.33.110:7001&gt; get 17</span><br><span class="line">-&gt; Redirected to slot [12304] located at 192.168.33.110:7003</span><br><span class="line"><span class="string">&quot;No.17 is a RedisCluster test.&quot;</span></span><br><span class="line">192.168.33.110:7003&gt; get 42</span><br><span class="line">-&gt; Redirected to slot [8000] located at 192.168.33.110:7002</span><br><span class="line"><span class="string">&quot;No.42 is a RedisCluster test.&quot;</span></span><br><span class="line">192.168.33.110:7002&gt; get 56</span><br><span class="line">-&gt; Redirected to slot [11509] located at 192.168.33.110:7003</span><br><span class="line"><span class="string">&quot;No.56 is a RedisCluster test.&quot;</span></span><br><span class="line">192.168.33.110:7003&gt; get 61</span><br><span class="line">-&gt; Redirected to slot [2369] located at 192.168.33.110:7001</span><br><span class="line"><span class="string">&quot;No.61 is a RedisCluster test.&quot;</span></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>redis</category>
      </categories>
      <tags>
        <tag>redis</tag>
        <tag>linux</tag>
      </tags>
  </entry>
  <entry>
    <title>Redis å¸¸ç”¨å‘½ä»¤æ“ä½œ</title>
    <url>/2019/11/06/redis-command-operation/</url>
    <content><![CDATA[<p><img src="/images/2019/201911071247.png" alt="201911071247.png"></p>
<p>ğŸ§ƒ Redis å’Œå…¶ä»–å¾ˆå¤š key-value æ•°æ®åº“çš„ä¸åŒä¹‹å¤„åœ¨äºï¼ŒRedis ä¸ä»…æ”¯æŒç®€å•çš„å­—ç¬¦ä¸²é”®å€¼å¯¹ï¼Œå®ƒè¿˜æä¾›äº†ä¸€ç³»åˆ—æ•°æ®ç»“æ„ç±»å‹å€¼ï¼Œæ¯”å¦‚åˆ—è¡¨ã€å“ˆå¸Œã€é›†åˆå’Œæœ‰åºé›†ï¼Œå¹¶åœ¨è¿™äº›æ•°æ®ç»“æ„ç±»å‹ä¸Šå®šä¹‰äº†ä¸€å¥—å¼ºå¤§çš„ APIã€‚é€šè¿‡å¯¹ä¸åŒç±»å‹çš„å€¼è¿›è¡Œæ“ä½œï¼ŒRedis å¯ä»¥å¾ˆè½»æ˜“åœ°å®Œæˆå…¶ä»–åªæ”¯æŒå­—ç¬¦ä¸²é”®å€¼å¯¹çš„ key-value æ•°æ®åº“å¾ˆéš¾ï¼ˆæˆ–è€…æ— æ³•ï¼‰å®Œæˆçš„ä»»åŠ¡ã€‚åœ¨ Redis çš„å†…éƒ¨ï¼Œæ•°æ®ç»“æ„ç±»å‹å€¼ç”±é«˜æ•ˆçš„æ•°æ®ç»“æ„å’Œç®—æ³•è¿›è¡Œæ”¯æŒï¼Œå¹¶ä¸”åœ¨ Redis è‡ªèº«çš„æ„å»ºå½“ä¸­ï¼Œä¹Ÿå¤§é‡ç”¨åˆ°äº†è¿™äº›æ•°æ®ç»“æ„ã€‚</p>
<span id="more"></span>
<h1 id="æ•°æ®ç±»å‹"><a href="#æ•°æ®ç±»å‹" class="headerlink" title="æ•°æ®ç±»å‹"></a>æ•°æ®ç±»å‹</h1><ul>
<li>å­—ç¬¦ä¸²ï¼šString</li>
<li>å“ˆå¸Œæˆ–æ•£åˆ—ï¼šHash</li>
<li>åˆ—è¡¨ï¼šList</li>
<li>é›†åˆï¼šSet</li>
<li>æœ‰åºé›†åˆï¼šSorted Set</li>
</ul>
<h1 id="æ“ä½œå®ä¾‹"><a href="#æ“ä½œå®ä¾‹" class="headerlink" title="æ“ä½œå®ä¾‹"></a>æ“ä½œå®ä¾‹</h1><h2 id="å­—ç¬¦ä¸²"><a href="#å­—ç¬¦ä¸²" class="headerlink" title="å­—ç¬¦ä¸²"></a>å­—ç¬¦ä¸²</h2><blockquote>
<p>Redis æ•°æ®åº“æ˜¯ä»¥æ— åºçš„æ–¹å¼å­˜æ”¾æ•°æ®åº“é”®çš„ï¼Œä¸€ä¸ªæ–°åŠ å…¥çš„é”®å¯èƒ½ä¼šå‡ºç°åœ¨æ•°æ®åº“çš„ä»»ä½•ä½ç½®ä¸Šã€‚å› æ­¤æˆ‘ä»¬åœ¨ä½¿ç”¨ Redis çš„è¿‡ç¨‹ä¸­ä¸åº”è¯¥å¯¹é”®åœ¨æ•°æ®åº“ä¸­çš„æ‘†æ”¾ä½ç½®åšä»»ä½•å‡è®¾ï¼Œä»¥å…é€ æˆé”™è¯¯ã€‚</p>
</blockquote>
<ul>
<li>è®¾ç½®å­—ç¬¦ä¸²é”®å€¼ï¼š</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">127.0.0.1:6379&gt; SET phone 10086</span><br><span class="line">OK</span><br></pre></td></tr></table></figure>
<ul>
<li>è·å–å­—ç¬¦ä¸²é”®å€¼ï¼š</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">127.0.0.1:6379&gt; GET phone</span><br><span class="line"><span class="string">&quot;10086&quot;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>è¦†ç›–å­—ç¬¦ä¸²é”®å€¼ï¼š</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">127.0.0.1:6379&gt; SET redis <span class="string">&quot;Redis is an in-memory database that persists on disk&quot;</span></span><br><span class="line">OK</span><br><span class="line">127.0.0.1:6379&gt; GET redis</span><br><span class="line"><span class="string">&quot;Redis is an in-memory database that persists on disk&quot;</span></span><br><span class="line">127.0.0.1:6379&gt; SET redis <span class="string">&quot;Redis is often referred as a data structures server&quot;</span></span><br><span class="line">OK</span><br><span class="line">127.0.0.1:6379&gt; GET redis</span><br><span class="line"><span class="string">&quot;Redis is often referred as a data structures server&quot;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>ä»…åœ¨é”®æ²¡æœ‰å€¼æ—¶è¿›è¡Œè®¾ç½®ï¼š</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">127.0.0.1:6379&gt; GET password</span><br><span class="line">(nil)</span><br><span class="line">127.0.0.1:6379&gt; SET password <span class="string">&quot;password&quot;</span> NX</span><br><span class="line">OK</span><br><span class="line">127.0.0.1:6379&gt; GET password</span><br><span class="line"><span class="string">&quot;password&quot;</span></span><br><span class="line">127.0.0.1:6379&gt; SET password <span class="string">&quot;123456&quot;</span> NX</span><br><span class="line">(nil)</span><br><span class="line">127.0.0.1:6379&gt; GET password</span><br><span class="line"><span class="string">&quot;password&quot;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>ä»…åœ¨é”®å·²æœ‰å€¼æ—¶è¿›è¡Œè®¾ç½®ï¼š</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">127.0.0.1:6379&gt; GET redis:password</span><br><span class="line">(nil)</span><br><span class="line">127.0.0.1:6379&gt; SET redis:password <span class="string">&quot;redis.io&quot;</span> XX</span><br><span class="line">(nil)</span><br><span class="line">127.0.0.1:6379&gt; GET redis:password</span><br><span class="line">(nil)</span><br><span class="line">127.0.0.1:6379&gt; SET redis:password <span class="string">&quot;redis.io&quot;</span></span><br><span class="line">OK</span><br><span class="line">127.0.0.1:6379&gt; SET redis:password <span class="string">&quot;Redis.IO&quot;</span> XX</span><br><span class="line">OK</span><br></pre></td></tr></table></figure>
<ul>
<li>è·å–é”®ç›®å‰çš„å€¼ï¼Œç„¶åä¸ºé”®è®¾ç½®æ–°å€¼ï¼Œæœ€åæŠŠä¹‹å‰è·å–åˆ°çš„æ—§å€¼è¿”å›ï¼š</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">127.0.0.1:6379&gt; GET phone</span><br><span class="line">(nil)</span><br><span class="line">127.0.0.1:6379&gt; GETSET phone 10086</span><br><span class="line">(nil)</span><br><span class="line">127.0.0.1:6379&gt; SET phone 10086</span><br><span class="line">OK</span><br><span class="line">127.0.0.1:6379&gt; GETSET phone 10001</span><br><span class="line"><span class="string">&quot;10086&quot;</span></span><br><span class="line">127.0.0.1:6379&gt; GET phone</span><br><span class="line"><span class="string">&quot;10001&quot;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>ä¸€æ¬¡ä¸ºå¤šä¸ªå­—ç¬¦ä¸²é”®è®¾ç½®å€¼ï¼š</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">127.0.0.1:6379&gt; MSET a hello b world c 10086</span><br><span class="line">OK</span><br><span class="line">127.0.0.1:6379&gt; MGET a</span><br><span class="line">1) <span class="string">&quot;hello&quot;</span></span><br><span class="line">127.0.0.1:6379&gt; MGET b</span><br><span class="line">1) <span class="string">&quot;world&quot;</span></span><br><span class="line">127.0.0.1:6379&gt; MGET c</span><br><span class="line">1) <span class="string">&quot;10086&quot;</span></span><br><span class="line">127.0.0.1:6379&gt; MSET a redis b memory c 10001</span><br><span class="line">OK</span><br><span class="line">127.0.0.1:6379&gt; MGET a</span><br><span class="line">1) <span class="string">&quot;redis&quot;</span></span><br><span class="line">127.0.0.1:6379&gt; MGET b</span><br><span class="line">1) <span class="string">&quot;memory&quot;</span></span><br><span class="line">127.0.0.1:6379&gt; MGET c</span><br><span class="line">1) <span class="string">&quot;10001&quot;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>ä¸€æ¬¡è·å–å¤šä¸ªå­—ç¬¦ä¸²é”®çš„å€¼ï¼š</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">127.0.0.1:6379&gt; MSET a <span class="string">&quot;Hello World&quot;</span> b 10086</span><br><span class="line">OK</span><br><span class="line">127.0.0.1:6379&gt; MGET a b</span><br><span class="line">1) <span class="string">&quot;Hello World&quot;</span></span><br><span class="line">2) <span class="string">&quot;10086&quot;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>ä»…åœ¨é”®ä¸å­˜åœ¨æ—¶ï¼Œä¸€æ¬¡ä¸ºå¤šä¸ªå­—ç¬¦ä¸²é”®è®¾ç½®å€¼ï¼š</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">127.0.0.1:6379&gt; MSET a hello b world c 10086</span><br><span class="line">OK</span><br><span class="line">127.0.0.1:6379&gt; MSETNX a 1 b 2 c 3 d 4</span><br><span class="line">(<span class="built_in">integer</span>) 0</span><br><span class="line">127.0.0.1:6379&gt; MGET a b c d</span><br><span class="line">1) <span class="string">&quot;hello&quot;</span></span><br><span class="line">2) <span class="string">&quot;world&quot;</span></span><br><span class="line">3) <span class="string">&quot;10086&quot;</span></span><br><span class="line">4) (nil)</span><br><span class="line">127.0.0.1:6379&gt; MSETNX d 4</span><br><span class="line">(<span class="built_in">integer</span>) 1</span><br><span class="line">127.0.0.1:6379&gt; MGET a b c d</span><br><span class="line">1) <span class="string">&quot;hello&quot;</span></span><br><span class="line">2) <span class="string">&quot;world&quot;</span></span><br><span class="line">3) <span class="string">&quot;10086&quot;</span></span><br><span class="line">4) <span class="string">&quot;4&quot;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>è·å–å­—ç¬¦ä¸²å€¼çš„å­—èŠ‚é•¿åº¦ï¼š</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">127.0.0.1:6379&gt; SET org <span class="string">&quot;ä¸­å›½äººæ°‘è§£æ”¾å†›&quot;</span></span><br><span class="line">OK</span><br><span class="line">127.0.0.1:6379&gt; STRLEN org</span><br><span class="line">(<span class="built_in">integer</span>) 21</span><br><span class="line">127.0.0.1:6379&gt; SET str <span class="string">&quot;Hello World!&quot;</span></span><br><span class="line">OK</span><br><span class="line">127.0.0.1:6379&gt; STRLEN str</span><br><span class="line">(<span class="built_in">integer</span>) 12</span><br></pre></td></tr></table></figure>
<ul>
<li>è·å–å­—ç¬¦ä¸²å€¼æŒ‡å®šç´¢å¼•èŒƒå›´ä¸Šçš„å†…å®¹ï¼š</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">127.0.0.1:6379&gt; SET org Microsoft</span><br><span class="line">OK</span><br><span class="line">127.0.0.1:6379&gt; GETRANGE org 0 4</span><br><span class="line"><span class="string">&quot;Micro&quot;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>å¯¹å­—ç¬¦ä¸²çš„æŒ‡å®šç´¢å¼•èŒƒå›´è¿›è¡Œè®¾ç½®ï¼š</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">127.0.0.1:6379&gt; SET message <span class="string">&quot;Hello World&quot;</span></span><br><span class="line">OK</span><br><span class="line">127.0.0.1:6379&gt; SETRANGE message 6 Redis</span><br><span class="line">(<span class="built_in">integer</span>) 11</span><br><span class="line">127.0.0.1:6379&gt; GET message</span><br><span class="line"><span class="string">&quot;Hello Redis&quot;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>è‡ªåŠ¨æ‰©å±•è¢«ä¿®æ”¹çš„å­—ç¬¦ä¸²ï¼š</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">127.0.0.1:6379&gt; SET message <span class="string">&quot;Hello World&quot;</span></span><br><span class="line">OK</span><br><span class="line">127.0.0.1:6379&gt; GET message</span><br><span class="line"><span class="string">&quot;Hello World&quot;</span></span><br><span class="line">127.0.0.1:6379&gt; SETRANGE message 6 <span class="string">&quot;Redis, Hello World&quot;</span></span><br><span class="line">(<span class="built_in">integer</span>) 24</span><br><span class="line">127.0.0.1:6379&gt; GET message</span><br><span class="line"><span class="string">&quot;Hello Redis, Hello World&quot;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>åœ¨å€¼é‡Œé¢å¡«å……ç©ºå­—èŠ‚ï¼š</li>
</ul>
<blockquote>
<p><code>\x00</code> ç¬¦å·ä»£è¡¨ä¸€ä¸ªç©ºå­—ç¬¦ã€‚</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">127.0.0.1:6379&gt; SET message Hello</span><br><span class="line">OK</span><br><span class="line">127.0.0.1:6379&gt; get message</span><br><span class="line"><span class="string">&quot;Hello&quot;</span></span><br><span class="line">127.0.0.1:6379&gt; SETRANGE message 10 Redis</span><br><span class="line">(<span class="built_in">integer</span>) 15</span><br><span class="line">127.0.0.1:6379&gt; GET message</span><br><span class="line"><span class="string">&quot;Hello\x00\x00\x00\x00\x00Redis&quot;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>è¿½åŠ æ–°å†…å®¹åˆ°å€¼çš„æœ«å°¾ï¼š</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">127.0.0.1:6379&gt; SET message Hello</span><br><span class="line">OK</span><br><span class="line">127.0.0.1:6379&gt; APPEND message <span class="string">&quot; Redis&quot;</span></span><br><span class="line">(<span class="built_in">integer</span>) 11</span><br><span class="line">127.0.0.1:6379&gt; GET message</span><br><span class="line"><span class="string">&quot;Hello Redis&quot;</span></span><br><span class="line">127.0.0.1:6379&gt; APPEND message <span class="string">&quot;, Hello World&quot;</span></span><br><span class="line">(<span class="built_in">integer</span>) 24</span><br><span class="line">127.0.0.1:6379&gt; GET message</span><br><span class="line"><span class="string">&quot;Hello Redis, Hello World&quot;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>ä¸å­˜åœ¨çš„é”®è¿½åŠ å†…å®¹ï¼š</li>
</ul>
<blockquote>
<p>æ•ˆæœç­‰åŒäº <code>SET</code> å‘½ä»¤ã€‚</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">127.0.0.1:6379&gt; GET message</span><br><span class="line">(nil)</span><br><span class="line">127.0.0.1:6379&gt; APPEND message <span class="string">&quot;Hello Redis&quot;</span></span><br><span class="line">(<span class="built_in">integer</span>) 11</span><br><span class="line">127.0.0.1:6379&gt; APPEND message <span class="string">&quot;, Hello World&quot;</span></span><br><span class="line">(<span class="built_in">integer</span>) 24</span><br><span class="line">127.0.0.1:6379&gt; GET message</span><br><span class="line"><span class="string">&quot;Hello Redis, Hello World&quot;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>æ•´æ•°å€¼çš„åŠ æ³•ã€å‡æ³•æ“ä½œï¼š</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">127.0.0.1:6379&gt; SET number 1000</span><br><span class="line">OK</span><br><span class="line">127.0.0.1:6379&gt; GET number</span><br><span class="line"><span class="string">&quot;1000&quot;</span></span><br><span class="line">127.0.0.1:6379&gt; INCRBY number 100</span><br><span class="line">(<span class="built_in">integer</span>) 1100</span><br><span class="line">127.0.0.1:6379&gt; INCRBY number 300</span><br><span class="line">(<span class="built_in">integer</span>) 1400</span><br><span class="line">127.0.0.1:6379&gt; GET number</span><br><span class="line"><span class="string">&quot;1400&quot;</span></span><br><span class="line">127.0.0.1:6379&gt; DECRBY number 300</span><br><span class="line">(<span class="built_in">integer</span>) 1100</span><br><span class="line">127.0.0.1:6379&gt; DECRBY number 100</span><br><span class="line">(<span class="built_in">integer</span>) 1000</span><br><span class="line">127.0.0.1:6379&gt; get number</span><br><span class="line"><span class="string">&quot;1000&quot;</span></span><br></pre></td></tr></table></figure>
<p>é”™è¯¯çš„å®ä¾‹ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">127.0.0.1:6379&gt; SET number 1.105</span><br><span class="line">OK</span><br><span class="line">127.0.0.1:6379&gt; INCRBY number 1</span><br><span class="line">(error) ERR value is not an <span class="built_in">integer</span> or out of range</span><br><span class="line">127.0.0.1:6379&gt; SET message Hello</span><br><span class="line">OK</span><br><span class="line">127.0.0.1:6379&gt; DECRBY message 2</span><br><span class="line">(error) ERR value is not an <span class="built_in">integer</span> or out of range</span><br><span class="line">127.0.0.1:6379&gt; SET bignumber 123456789123456789123456789</span><br><span class="line">OK</span><br><span class="line">127.0.0.1:6379&gt; INCRBY bignumber 3</span><br><span class="line">(error) ERR value is not an <span class="built_in">integer</span> or out of range</span><br></pre></td></tr></table></figure>
<ul>
<li>ä¸å­˜åœ¨é”®çš„åŠ æ³•ã€å‡æ³•è¿ç®—ï¼š</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">127.0.0.1:6379&gt; GET a</span><br><span class="line">(nil)</span><br><span class="line">127.0.0.1:6379&gt; INCRBY a 10</span><br><span class="line">(<span class="built_in">integer</span>) 10</span><br><span class="line">127.0.0.1:6379&gt; DECRBY b 10</span><br><span class="line">(<span class="built_in">integer</span>) -10</span><br><span class="line">127.0.0.1:6379&gt; GET a</span><br><span class="line"><span class="string">&quot;10&quot;</span></span><br><span class="line">127.0.0.1:6379&gt; GET b</span><br><span class="line"><span class="string">&quot;-10&quot;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>æ•´æ•°çš„è‡ªå¢ã€è‡ªå‡æ“ä½œï¼š</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">127.0.0.1:6379&gt; GET x</span><br><span class="line">(nil)</span><br><span class="line">127.0.0.1:6379&gt; INCR x</span><br><span class="line">(<span class="built_in">integer</span>) 1</span><br><span class="line">127.0.0.1:6379&gt; INCR y</span><br><span class="line">(<span class="built_in">integer</span>) 1</span><br><span class="line">127.0.0.1:6379&gt; DECR x</span><br><span class="line">(<span class="built_in">integer</span>) 0</span><br><span class="line">127.0.0.1:6379&gt; DECR y</span><br><span class="line">(<span class="built_in">integer</span>) 0</span><br><span class="line">127.0.0.1:6379&gt; GET x</span><br><span class="line"><span class="string">&quot;0&quot;</span></span><br><span class="line">127.0.0.1:6379&gt; GET y</span><br><span class="line"><span class="string">&quot;0&quot;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>æµ®ç‚¹æ•°çš„åŠ æ³•ã€å‡æ³•åŠä¸å­˜åœ¨é”®çš„æ“ä½œï¼š</li>
</ul>
<blockquote>
<p><code>INCRBYFLOAT</code> åªä¼šä¿ç•™è®¡ç®—ç»“æœå°æ•°ç‚¹å 17 ä½æ•°å­—ã€‚</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">127.0.0.1:6379&gt; SET decimal 3.1415</span><br><span class="line">OK</span><br><span class="line">127.0.0.1:6379&gt; GET decimal</span><br><span class="line"><span class="string">&quot;3.1415&quot;</span></span><br><span class="line">127.0.0.1:6379&gt; INCRBYFLOAT decimal 2.55</span><br><span class="line"><span class="string">&quot;5.6915&quot;</span></span><br><span class="line">127.0.0.1:6379&gt; GET decimal</span><br><span class="line"><span class="string">&quot;5.6915&quot;</span></span><br><span class="line">127.0.0.1:6379&gt; INCRBYFLOAT decimal -2.55</span><br><span class="line"><span class="string">&quot;3.1415&quot;</span></span><br><span class="line">127.0.0.1:6379&gt; GET decimal</span><br><span class="line"><span class="string">&quot;3.1415&quot;</span></span><br><span class="line">127.0.0.1:6379&gt; GET point</span><br><span class="line">(nil)</span><br><span class="line">127.0.0.1:6379&gt; SET point 1.12345</span><br><span class="line">OK</span><br><span class="line">127.0.0.1:6379&gt; GET point</span><br><span class="line"><span class="string">&quot;1.12345&quot;</span></span><br><span class="line">127.0.0.1:6379&gt; GET x</span><br><span class="line">(nil)</span><br><span class="line">127.0.0.1:6379&gt; INCRBYFLOAT x 0.123456789123456789123456789</span><br><span class="line"><span class="string">&quot;0.12345678912345679&quot;</span></span><br><span class="line">127.0.0.1:6379&gt; GET x</span><br><span class="line"><span class="string">&quot;0.12345678912345679&quot;</span></span><br></pre></td></tr></table></figure>
<h2 id="å“ˆå¸Œæˆ–æ•£åˆ—"><a href="#å“ˆå¸Œæˆ–æ•£åˆ—" class="headerlink" title="å“ˆå¸Œæˆ–æ•£åˆ—"></a>å“ˆå¸Œæˆ–æ•£åˆ—</h2><ul>
<li>ä¸ºå­—æ®µè®¾ç½®å€¼ï¼š</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">127.0.0.1:6379&gt; HSET user:1001 name imajinyun age 18</span><br><span class="line">(<span class="built_in">integer</span>) 2</span><br><span class="line">127.0.0.1:6379&gt; HSET user:1001 gender male</span><br><span class="line">(<span class="built_in">integer</span>) 1</span><br><span class="line">127.0.0.1:6379&gt; HSET user:1001 created_at 1573036176</span><br><span class="line">(<span class="built_in">integer</span>) 1</span><br><span class="line">127.0.0.1:6379&gt; HGETALL user:1001</span><br><span class="line">1) <span class="string">&quot;name&quot;</span></span><br><span class="line">2) <span class="string">&quot;imajinyun&quot;</span></span><br><span class="line">3) <span class="string">&quot;age&quot;</span></span><br><span class="line">4) <span class="string">&quot;18&quot;</span></span><br><span class="line">5) <span class="string">&quot;gender&quot;</span></span><br><span class="line">6) <span class="string">&quot;male&quot;</span></span><br><span class="line">7) <span class="string">&quot;created_at&quot;</span></span><br><span class="line">8) <span class="string">&quot;1573036176&quot;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>ä½¿ç”¨æ–°å€¼è¦†ç›–æ—§å€¼ï¼š</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">127.0.0.1:6379&gt; HSET user:1001 name iphone</span><br><span class="line">(<span class="built_in">integer</span>) 1</span><br><span class="line">127.0.0.1:6379&gt; HSET user:1001 name imajinyun</span><br><span class="line">(<span class="built_in">integer</span>) 0</span><br><span class="line">127.0.0.1:6379&gt; HGET user:1001 name</span><br><span class="line"><span class="string">&quot;imajinyun&quot;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>ä»…åœ¨å­—æ®µä¸å­˜åœ¨çš„æƒ…å†µä¸‹ä¸ºå®ƒè®¾ç½®å€¼ï¼š</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">127.0.0.1:6379&gt; HSETNX user:1001 name peter</span><br><span class="line">(<span class="built_in">integer</span>) 1</span><br><span class="line">127.0.0.1:6379&gt; HSETNX user:1001 name imajinyun</span><br><span class="line">(<span class="built_in">integer</span>) 0</span><br><span class="line">127.0.0.1:6379&gt; HGET user:1001 name</span><br><span class="line"><span class="string">&quot;peter&quot;</span></span><br><span class="line">127.0.0.1:6379&gt; HSETNX user:1001 age 18</span><br><span class="line">(<span class="built_in">integer</span>) 1</span><br><span class="line">127.0.0.1:6379&gt; HGETALL user:1001</span><br><span class="line">1) <span class="string">&quot;name&quot;</span></span><br><span class="line">2) <span class="string">&quot;peter&quot;</span></span><br><span class="line">3) <span class="string">&quot;age&quot;</span></span><br><span class="line">4) <span class="string">&quot;18&quot;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>è·å–å•ä¸ªã€å¤šä¸ªå­—æ®µçš„å€¼ï¼š</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">127.0.0.1:6379&gt; HSET user:1001 name imajinyun age 18</span><br><span class="line">(<span class="built_in">integer</span>) 2</span><br><span class="line">127.0.0.1:6379&gt; HGET user:1001 name</span><br><span class="line"><span class="string">&quot;imajinyun&quot;</span></span><br><span class="line">127.0.0.1:6379&gt; HGET user:1001 age</span><br><span class="line"><span class="string">&quot;18&quot;</span></span><br><span class="line">127.0.0.1:6379&gt; HGETALL user:1001</span><br><span class="line">1) <span class="string">&quot;name&quot;</span></span><br><span class="line">2) <span class="string">&quot;imajinyun&quot;</span></span><br><span class="line">3) <span class="string">&quot;age&quot;</span></span><br><span class="line">4) <span class="string">&quot;18&quot;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>è·å–ä¸å­˜åœ¨çš„å­—æ®µæˆ–è€…ä¸å­˜åœ¨çš„å“ˆå¸Œï¼š</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">127.0.0.1:6379&gt; HSET user:1001 name imajinyun</span><br><span class="line">(<span class="built_in">integer</span>) 1</span><br><span class="line">127.0.0.1:6379&gt; HGET user:1001 age</span><br><span class="line">(nil)</span><br><span class="line">127.0.0.1:6379&gt; HGET user:1002 age</span><br><span class="line">(nil)</span><br><span class="line">127.0.0.1:6379&gt; HGETALL user:1002</span><br><span class="line">(empty list or <span class="built_in">set</span>)</span><br></pre></td></tr></table></figure>
<ul>
<li>å¯¹å­—æ®µå­˜å‚¨çš„æ•´æ•°å€¼è¿›è¡ŒåŠ æ³•æˆ–å‡æ³•æ“ä½œï¼š</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">127.0.0.1:6379&gt;</span><br></pre></td></tr></table></figure>
<h2 id="åˆ—è¡¨"><a href="#åˆ—è¡¨" class="headerlink" title="åˆ—è¡¨"></a>åˆ—è¡¨</h2><h2 id="é›†åˆ"><a href="#é›†åˆ" class="headerlink" title="é›†åˆ"></a>é›†åˆ</h2><h2 id="æœ‰åºé›†åˆ"><a href="#æœ‰åºé›†åˆ" class="headerlink" title="æœ‰åºé›†åˆ"></a>æœ‰åºé›†åˆ</h2><h1 id="å…¶å®ƒ"><a href="#å…¶å®ƒ" class="headerlink" title="å…¶å®ƒ"></a>å…¶å®ƒ</h1><p>æœªå®Œå¾…ç»­ã€‚ã€‚ã€‚</p>
]]></content>
      <categories>
        <category>redis</category>
      </categories>
      <tags>
        <tag>redis</tag>
      </tags>
  </entry>
  <entry>
    <title>PHP æºç å­¦ä¹ äºŒ</title>
    <url>/2021/09/13/php-src-learning2/</url>
    <content><![CDATA[<p>ğŸŸ é€šè¿‡ GDB è·Ÿè¸ªè°ƒè¯•æ¥äº†è§£ä¸€ä¸‹ <code>Zend String</code> å’Œ <code>Zend Array</code>ã€‚</p>
<span id="more"></span>
<ul>
<li><a href="https://imajinyun.xyz/2021/09/12/php-src-learning1/"><code>PHP æºç å­¦ä¹ ä¸€</code></a></li>
<li><a href="https://imajinyun.xyz/2021/09/13/php-src-learning2/"><strong>PHP æºç å­¦ä¹ äºŒ</strong></a></li>
</ul>
<h1 id="Zend-String"><a href="#Zend-String" class="headerlink" title="Zend String"></a>Zend String</h1><h2 id="Zend-String-Struct"><a href="#Zend-String-Struct" class="headerlink" title="Zend String Struct"></a>Zend String Struct</h2><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> _<span class="title">zend_string</span> &#123;</span></span><br><span class="line">	zend_refcounted_h gc;</span><br><span class="line">	zend_ulong        h;                <span class="comment">/* hash value */</span></span><br><span class="line">	<span class="keyword">size_t</span>            len;</span><br><span class="line">	<span class="keyword">char</span>              val[<span class="number">1</span>];</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> _<span class="title">zend_refcounted_h</span> &#123;</span></span><br><span class="line">	<span class="keyword">uint32_t</span>         refcount;			<span class="comment">/* reference counter 32-bit */</span></span><br><span class="line">	<span class="class"><span class="keyword">union</span> &#123;</span></span><br><span class="line">		<span class="keyword">uint32_t</span> type_info;</span><br><span class="line">	&#125; u;</span><br><span class="line">&#125; zend_refcounted_h;</span><br></pre></td></tr></table></figure>
<h2 id="Copy-on-write"><a href="#Copy-on-write" class="headerlink" title="Copy-on-write"></a>Copy-on-write</h2><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$c</span> = <span class="string">&#x27;Hello World!&#x27;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$c</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable">$a</span> = time() . <span class="string">&#x27;String&#x27;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$a</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Copy-on-write</span></span><br><span class="line"><span class="variable">$b</span> = <span class="variable">$a</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$a</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$b</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable">$b</span> = <span class="string">&#x27;Hello&#x27;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$a</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$b</span>;</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># gdb /home/vagrant/codes/php80/bin/php</span></span><br><span class="line">(gdb) b ZEND_ECHO_SPEC_CV_HANDLER</span><br><span class="line">Breakpoint 1 at 0x5c96a8: file /vagrant/php-8.0.10/Zend/zend_vm_execute.h, line 37184.</span><br><span class="line">(gdb) r copy-on-write.php</span><br><span class="line">Starting program: /home/vagrant/codes/php80/bin/php copy-on-write.php</span><br><span class="line">[Thread debugging using libthread_db enabled]</span><br><span class="line">Using host libthread_db library <span class="string">&quot;/lib/x86_64-linux-gnu/libthread_db.so.1&quot;</span>.</span><br><span class="line"></span><br><span class="line">Breakpoint 1, ZEND_ECHO_SPEC_CV_HANDLER () at /vagrant/php-8.0.10/Zend/zend_vm_execute.h:37184</span><br><span class="line">37184		SAVE_OPLINE();</span><br><span class="line">(gdb) n</span><br><span class="line">37185		z = EX_VAR(opline-&gt;op1.var);</span><br><span class="line">(gdb)</span><br><span class="line">37187		<span class="keyword">if</span> (Z_TYPE_P(z) == IS_STRING) &#123;</span><br><span class="line">(gdb) p z</span><br><span class="line"><span class="variable">$1</span> = (zval *) 0x7ffff3814070</span><br><span class="line">(gdb) p *z</span><br><span class="line"><span class="variable">$2</span> = &#123;value = &#123;lval = 140737278651680, dval = 6.9533454470981759e-310, counted = 0x7ffff3802d20, str = 0x7ffff3802d20, arr = 0x7ffff3802d20, obj = 0x7ffff3802d20, res = 0x7ffff3802d20, ref = 0x7ffff3802d20,</span><br><span class="line">    ast = 0x7ffff3802d20, zv = 0x7ffff3802d20, ptr = 0x7ffff3802d20, ce = 0x7ffff3802d20, func = 0x7ffff3802d20, ww = &#123;w1 = 4085263648, w2 = 32767&#125;&#125;, u1 = &#123;type_info = 6, v = &#123;<span class="built_in">type</span> = 6 <span class="string">&#x27;\006&#x27;</span>,</span><br><span class="line">      type_flags = 0 <span class="string">&#x27;\000&#x27;</span>, u = &#123;extra = 0&#125;&#125;&#125;, u2 = &#123;next = 0, cache_slot = 0, opline_num = 0, lineno = 0, num_args = 0, fe_pos = 0, fe_iter_idx = 0, access_flags = 0, property_guard = 0,</span><br><span class="line">    constant_flags = 0, extra = 0&#125;&#125;</span><br><span class="line">(gdb) p <span class="variable">$2</span>.value.str</span><br><span class="line"><span class="variable">$3</span> = (zend_string *) 0x7ffff3802d20</span><br><span class="line">(gdb) p *<span class="variable">$2</span>.value.str</span><br><span class="line"><span class="variable">$4</span> = &#123;gc = &#123;refcount = 1, u = &#123;type_info = 86&#125;&#125;, h = 13594750393630990530, len = 12, val = <span class="string">&quot;H&quot;</span>&#125;</span><br><span class="line">(gdb) p *<span class="variable">$2</span>.value.str.val@12</span><br><span class="line"><span class="variable">$5</span> = <span class="string">&quot;Hello World!&quot;</span></span><br><span class="line">(gdb) c</span><br><span class="line">Continuing.</span><br><span class="line">Hello World!</span><br><span class="line">Breakpoint 1, ZEND_ECHO_SPEC_CV_HANDLER () at /vagrant/php-8.0.10/Zend/zend_vm_execute.h:37184</span><br><span class="line">37184		SAVE_OPLINE();</span><br><span class="line">(gdb) n</span><br><span class="line">37185		z = EX_VAR(opline-&gt;op1.var);</span><br><span class="line">(gdb)</span><br><span class="line">37187		<span class="keyword">if</span> (Z_TYPE_P(z) == IS_STRING) &#123;</span><br><span class="line">(gdb) p z</span><br><span class="line"><span class="variable">$6</span> = (zval *) 0x7ffff3814080</span><br><span class="line">(gdb) p *z</span><br><span class="line"><span class="variable">$7</span> = &#123;value = &#123;lval = 140737278651760, dval = 6.9533454471021284e-310, counted = 0x7ffff3802d70, str = 0x7ffff3802d70, arr = 0x7ffff3802d70, obj = 0x7ffff3802d70, res = 0x7ffff3802d70, ref = 0x7ffff3802d70,</span><br><span class="line">    ast = 0x7ffff3802d70, zv = 0x7ffff3802d70, ptr = 0x7ffff3802d70, ce = 0x7ffff3802d70, func = 0x7ffff3802d70, ww = &#123;w1 = 4085263728, w2 = 32767&#125;&#125;, u1 = &#123;type_info = 262, v = &#123;<span class="built_in">type</span> = 6 <span class="string">&#x27;\006&#x27;</span>,</span><br><span class="line">      type_flags = 1 <span class="string">&#x27;\001&#x27;</span>, u = &#123;extra = 0&#125;&#125;&#125;, u2 = &#123;next = 0, cache_slot = 0, opline_num = 0, lineno = 0, num_args = 0, fe_pos = 0, fe_iter_idx = 0, access_flags = 0, property_guard = 0,</span><br><span class="line">    constant_flags = 0, extra = 0&#125;&#125;</span><br><span class="line">(gdb) p *z.value.str</span><br><span class="line"><span class="variable">$8</span> = &#123;gc = &#123;refcount = 1, u = &#123;type_info = 22&#125;&#125;, h = 0, len = 16, val = <span class="string">&quot;1&quot;</span>&#125;</span><br><span class="line">(gdb) p *z.value.str.val@16</span><br><span class="line"><span class="variable">$9</span> = <span class="string">&quot;1631431095String&quot;</span></span><br><span class="line">(gdb) c</span><br><span class="line">Continuing.</span><br><span class="line">1631431095String</span><br><span class="line">Breakpoint 1, ZEND_ECHO_SPEC_CV_HANDLER () at /vagrant/php-8.0.10/Zend/zend_vm_execute.h:37184</span><br><span class="line">37184		SAVE_OPLINE();</span><br><span class="line">(gdb) n</span><br><span class="line">37185		z = EX_VAR(opline-&gt;op1.var);</span><br><span class="line">(gdb)</span><br><span class="line">37187		<span class="keyword">if</span> (Z_TYPE_P(z) == IS_STRING) &#123;</span><br><span class="line">(gdb) p z</span><br><span class="line"><span class="variable">$10</span> = (zval *) 0x7ffff3814080</span><br><span class="line">(gdb) p *z</span><br><span class="line"><span class="variable">$11</span> = &#123;value = &#123;lval = 140737278651760, dval = 6.9533454471021284e-310, counted = 0x7ffff3802d70, str = 0x7ffff3802d70, arr = 0x7ffff3802d70, obj = 0x7ffff3802d70, res = 0x7ffff3802d70,</span><br><span class="line">    ref = 0x7ffff3802d70, ast = 0x7ffff3802d70, zv = 0x7ffff3802d70, ptr = 0x7ffff3802d70, ce = 0x7ffff3802d70, func = 0x7ffff3802d70, ww = &#123;w1 = 4085263728, w2 = 32767&#125;&#125;, u1 = &#123;type_info = 262, v = &#123;</span><br><span class="line">      <span class="built_in">type</span> = 6 <span class="string">&#x27;\006&#x27;</span>, type_flags = 1 <span class="string">&#x27;\001&#x27;</span>, u = &#123;extra = 0&#125;&#125;&#125;, u2 = &#123;next = 0, cache_slot = 0, opline_num = 0, lineno = 0, num_args = 0, fe_pos = 0, fe_iter_idx = 0, access_flags = 0, property_guard = 0,</span><br><span class="line">    constant_flags = 0, extra = 0&#125;&#125;</span><br><span class="line">(gdb) p *z.value.str</span><br><span class="line"><span class="variable">$12</span> = &#123;gc = &#123;refcount = 2, u = &#123;type_info = 22&#125;&#125;, h = 0, len = 16, val = <span class="string">&quot;1&quot;</span>&#125;</span><br><span class="line">(gdb) p *z.value.str.val@16</span><br><span class="line"><span class="variable">$13</span> = <span class="string">&quot;1631431095String&quot;</span></span><br><span class="line">(gdb) c</span><br><span class="line">Continuing.</span><br><span class="line">1631431095String</span><br><span class="line">Breakpoint 1, ZEND_ECHO_SPEC_CV_HANDLER () at /vagrant/php-8.0.10/Zend/zend_vm_execute.h:37184</span><br><span class="line">37184		SAVE_OPLINE();</span><br><span class="line">(gdb) n</span><br><span class="line">37185		z = EX_VAR(opline-&gt;op1.var);</span><br><span class="line">(gdb)</span><br><span class="line">37187		<span class="keyword">if</span> (Z_TYPE_P(z) == IS_STRING) &#123;</span><br><span class="line">(gdb) p z</span><br><span class="line"><span class="variable">$14</span> = (zval *) 0x7ffff3814090</span><br><span class="line">(gdb) p *z</span><br><span class="line"><span class="variable">$15</span> = &#123;value = &#123;lval = 140737278651760, dval = 6.9533454471021284e-310, counted = 0x7ffff3802d70, str = 0x7ffff3802d70, arr = 0x7ffff3802d70, obj = 0x7ffff3802d70, res = 0x7ffff3802d70,</span><br><span class="line">    ref = 0x7ffff3802d70, ast = 0x7ffff3802d70, zv = 0x7ffff3802d70, ptr = 0x7ffff3802d70, ce = 0x7ffff3802d70, func = 0x7ffff3802d70, ww = &#123;w1 = 4085263728, w2 = 32767&#125;&#125;, u1 = &#123;type_info = 262, v = &#123;</span><br><span class="line">      <span class="built_in">type</span> = 6 <span class="string">&#x27;\006&#x27;</span>, type_flags = 1 <span class="string">&#x27;\001&#x27;</span>, u = &#123;extra = 0&#125;&#125;&#125;, u2 = &#123;next = 0, cache_slot = 0, opline_num = 0, lineno = 0, num_args = 0, fe_pos = 0, fe_iter_idx = 0, access_flags = 0, property_guard = 0,</span><br><span class="line">    constant_flags = 0, extra = 0&#125;&#125;</span><br><span class="line">(gdb) p *z.value.str</span><br><span class="line"><span class="variable">$16</span> = &#123;gc = &#123;refcount = 2, u = &#123;type_info = 22&#125;&#125;, h = 0, len = 16, val = <span class="string">&quot;1&quot;</span>&#125;</span><br><span class="line">(gdb) p *z.value.str.val@16</span><br><span class="line"><span class="variable">$17</span> = <span class="string">&quot;1631431095String&quot;</span></span><br><span class="line">(gdb) c</span><br><span class="line">Continuing.</span><br><span class="line">1631431095String</span><br><span class="line">Breakpoint 1, ZEND_ECHO_SPEC_CV_HANDLER () at /vagrant/php-8.0.10/Zend/zend_vm_execute.h:37184</span><br><span class="line">37184		SAVE_OPLINE();</span><br><span class="line">(gdb) n</span><br><span class="line">37185		z = EX_VAR(opline-&gt;op1.var);</span><br><span class="line">(gdb)</span><br><span class="line">37187		<span class="keyword">if</span> (Z_TYPE_P(z) == IS_STRING) &#123;</span><br><span class="line">(gdb) p z</span><br><span class="line"><span class="variable">$18</span> = (zval *) 0x7ffff3814080</span><br><span class="line">(gdb) p *z</span><br><span class="line"><span class="variable">$19</span> = &#123;value = &#123;lval = 140737278651760, dval = 6.9533454471021284e-310, counted = 0x7ffff3802d70, str = 0x7ffff3802d70, arr = 0x7ffff3802d70, obj = 0x7ffff3802d70, res = 0x7ffff3802d70,</span><br><span class="line">    ref = 0x7ffff3802d70, ast = 0x7ffff3802d70, zv = 0x7ffff3802d70, ptr = 0x7ffff3802d70, ce = 0x7ffff3802d70, func = 0x7ffff3802d70, ww = &#123;w1 = 4085263728, w2 = 32767&#125;&#125;, u1 = &#123;type_info = 262, v = &#123;</span><br><span class="line">      <span class="built_in">type</span> = 6 <span class="string">&#x27;\006&#x27;</span>, type_flags = 1 <span class="string">&#x27;\001&#x27;</span>, u = &#123;extra = 0&#125;&#125;&#125;, u2 = &#123;next = 0, cache_slot = 0, opline_num = 0, lineno = 0, num_args = 0, fe_pos = 0, fe_iter_idx = 0, access_flags = 0, property_guard = 0,</span><br><span class="line">    constant_flags = 0, extra = 0&#125;&#125;</span><br><span class="line">(gdb) p *z.value.str</span><br><span class="line"><span class="variable">$20</span> = &#123;gc = &#123;refcount = 1, u = &#123;type_info = 22&#125;&#125;, h = 0, len = 16, val = <span class="string">&quot;1&quot;</span>&#125;</span><br><span class="line">(gdb) p *z.value.str.val@16</span><br><span class="line"><span class="variable">$21</span> = <span class="string">&quot;1631431095String&quot;</span></span><br><span class="line">(gdb) c</span><br><span class="line">Continuing.</span><br><span class="line">1631431095String</span><br><span class="line">Breakpoint 1, ZEND_ECHO_SPEC_CV_HANDLER () at /vagrant/php-8.0.10/Zend/zend_vm_execute.h:37184</span><br><span class="line">37184		SAVE_OPLINE();</span><br><span class="line">(gdb) n</span><br><span class="line">37185		z = EX_VAR(opline-&gt;op1.var);</span><br><span class="line">(gdb)</span><br><span class="line">37187		<span class="keyword">if</span> (Z_TYPE_P(z) == IS_STRING) &#123;</span><br><span class="line">(gdb) p z</span><br><span class="line"><span class="variable">$22</span> = (zval *) 0x7ffff3814090</span><br><span class="line">(gdb) p *z</span><br><span class="line"><span class="variable">$23</span> = &#123;value = &#123;lval = 140737278646144, dval = 6.9533454468246611e-310, counted = 0x7ffff3801780, str = 0x7ffff3801780, arr = 0x7ffff3801780, obj = 0x7ffff3801780, res = 0x7ffff3801780,</span><br><span class="line">    ref = 0x7ffff3801780, ast = 0x7ffff3801780, zv = 0x7ffff3801780, ptr = 0x7ffff3801780, ce = 0x7ffff3801780, func = 0x7ffff3801780, ww = &#123;w1 = 4085258112, w2 = 32767&#125;&#125;, u1 = &#123;type_info = 6, v = &#123;</span><br><span class="line">      <span class="built_in">type</span> = 6 <span class="string">&#x27;\006&#x27;</span>, type_flags = 0 <span class="string">&#x27;\000&#x27;</span>, u = &#123;extra = 0&#125;&#125;&#125;, u2 = &#123;next = 0, cache_slot = 0, opline_num = 0, lineno = 0, num_args = 0, fe_pos = 0, fe_iter_idx = 0, access_flags = 0, property_guard = 0,</span><br><span class="line">    constant_flags = 0, extra = 0&#125;&#125;</span><br><span class="line">(gdb) p *z.value.str</span><br><span class="line"><span class="variable">$24</span> = &#123;gc = &#123;refcount = 1, u = &#123;type_info = 86&#125;&#125;, h = 9223372247531462777, len = 5, val = <span class="string">&quot;H&quot;</span>&#125;</span><br><span class="line">(gdb) p *z.value.str.val@5</span><br><span class="line"><span class="variable">$25</span> = <span class="string">&quot;Hello&quot;</span></span><br><span class="line">(gdb)</span><br></pre></td></tr></table></figure>
<h2 id="å¼•ç”¨ç±»å‹"><a href="#å¼•ç”¨ç±»å‹" class="headerlink" title="å¼•ç”¨ç±»å‹"></a>å¼•ç”¨ç±»å‹</h2><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$a</span> = <span class="string">&#x27;String&#x27;</span>;</span><br><span class="line"><span class="variable">$b</span> = &amp;<span class="variable">$a</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$a</span> . <span class="string">&quot;\n&quot;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$b</span> . <span class="string">&quot;\n&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable">$b</span> = <span class="string">&#x27;Hello&#x27;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$a</span> . <span class="string">&quot;\n&quot;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$b</span> . <span class="string">&quot;\n&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">unset</span>(<span class="variable">$b</span>);</span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$a</span> . <span class="string">&quot;\n&quot;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$b</span> . <span class="string">&quot;\n&quot;</span>;</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># gdb /home/vagrant/codes/php80/bin/php</span></span><br><span class="line">(gdb) b ZEND_ECHO_SPEC_CV_HANDLER</span><br><span class="line">Breakpoint 1 at 0x5c96a8: file /vagrant/php-8.0.10/Zend/zend_vm_execute.h, line 37184.</span><br><span class="line">(gdb) r reference.php</span><br><span class="line">Starting program: /home/vagrant/codes/php80/bin/php reference.php</span><br><span class="line">[Thread debugging using libthread_db enabled]</span><br><span class="line">Using host libthread_db library <span class="string">&quot;/lib/x86_64-linux-gnu/libthread_db.so.1&quot;</span>.</span><br><span class="line"></span><br><span class="line">Breakpoint 1, ZEND_ECHO_SPEC_CV_HANDLER () at /vagrant/php-8.0.10/Zend/zend_vm_execute.h:37184</span><br><span class="line">37184		SAVE_OPLINE();</span><br><span class="line">(gdb) n</span><br><span class="line">37185		z = EX_VAR(opline-&gt;op1.var);</span><br><span class="line">(gdb)</span><br><span class="line">37187		<span class="keyword">if</span> (Z_TYPE_P(z) == IS_STRING) &#123;</span><br><span class="line">(gdb) p z</span><br><span class="line"><span class="variable">$1</span> = (zval *) 0x7ffff3814070</span><br><span class="line">(gdb) p *z</span><br><span class="line"><span class="variable">$2</span> = &#123;value = &#123;lval = 140737278645952, dval = 6.9533454468151751e-310, counted = 0x7ffff38016c0, str = 0x7ffff38016c0, arr = 0x7ffff38016c0, obj = 0x7ffff38016c0, res = 0x7ffff38016c0, ref = 0x7ffff38016c0,</span><br><span class="line">    ast = 0x7ffff38016c0, zv = 0x7ffff38016c0, ptr = 0x7ffff38016c0, ce = 0x7ffff38016c0, func = 0x7ffff38016c0, ww = &#123;w1 = 4085257920, w2 = 32767&#125;&#125;, u1 = &#123;type_info = 266, v = &#123;<span class="built_in">type</span> = 10 <span class="string">&#x27;\n&#x27;</span>,</span><br><span class="line">      type_flags = 1 <span class="string">&#x27;\001&#x27;</span>, u = &#123;extra = 0&#125;&#125;&#125;, u2 = &#123;next = 0, cache_slot = 0, opline_num = 0, lineno = 0, num_args = 0, fe_pos = 0, fe_iter_idx = 0, access_flags = 0, property_guard = 0,</span><br><span class="line">    constant_flags = 0, extra = 0&#125;&#125;</span><br><span class="line">(gdb) c</span><br><span class="line">Continuing.</span><br><span class="line">String</span><br><span class="line">Breakpoint 1, ZEND_ECHO_SPEC_CV_HANDLER () at /vagrant/php-8.0.10/Zend/zend_vm_execute.h:37184</span><br><span class="line">37184		SAVE_OPLINE();</span><br><span class="line">(gdb) n</span><br><span class="line">37185		z = EX_VAR(opline-&gt;op1.var);</span><br><span class="line">(gdb)</span><br><span class="line">37187		<span class="keyword">if</span> (Z_TYPE_P(z) == IS_STRING) &#123;</span><br><span class="line">(gdb) p z</span><br><span class="line"><span class="variable">$3</span> = (zval *) 0x7ffff3814080</span><br><span class="line">(gdb) p *z</span><br><span class="line"><span class="variable">$4</span> = &#123;value = &#123;lval = 140737278645952, dval = 6.9533454468151751e-310, counted = 0x7ffff38016c0, str = 0x7ffff38016c0, arr = 0x7ffff38016c0, obj = 0x7ffff38016c0, res = 0x7ffff38016c0, ref = 0x7ffff38016c0,</span><br><span class="line">    ast = 0x7ffff38016c0, zv = 0x7ffff38016c0, ptr = 0x7ffff38016c0, ce = 0x7ffff38016c0, func = 0x7ffff38016c0, ww = &#123;w1 = 4085257920, w2 = 32767&#125;&#125;, u1 = &#123;type_info = 266, v = &#123;<span class="built_in">type</span> = 10 <span class="string">&#x27;\n&#x27;</span>,</span><br><span class="line">      type_flags = 1 <span class="string">&#x27;\001&#x27;</span>, u = &#123;extra = 0&#125;&#125;&#125;, u2 = &#123;next = 0, cache_slot = 0, opline_num = 0, lineno = 0, num_args = 0, fe_pos = 0, fe_iter_idx = 0, access_flags = 0, property_guard = 0,</span><br><span class="line">    constant_flags = 0, extra = 0&#125;&#125;</span><br><span class="line">(gdb) p <span class="variable">$4</span>.value.ref</span><br><span class="line"><span class="variable">$5</span> = (zend_reference *) 0x7ffff38016c0</span><br><span class="line">(gdb) p *<span class="variable">$4</span>.value.ref</span><br><span class="line"><span class="variable">$6</span> = &#123;gc = &#123;refcount = 2, u = &#123;type_info = 26&#125;&#125;, val = &#123;value = &#123;lval = 140737278646080, dval = 6.9533454468214991e-310, counted = 0x7ffff3801740, str = 0x7ffff3801740, arr = 0x7ffff3801740,</span><br><span class="line">      obj = 0x7ffff3801740, res = 0x7ffff3801740, ref = 0x7ffff3801740, ast = 0x7ffff3801740, zv = 0x7ffff3801740, ptr = 0x7ffff3801740, ce = 0x7ffff3801740, func = 0x7ffff3801740, ww = &#123;w1 = 4085258048,</span><br><span class="line">        w2 = 32767&#125;&#125;, u1 = &#123;type_info = 6, v = &#123;<span class="built_in">type</span> = 6 <span class="string">&#x27;\006&#x27;</span>, type_flags = 0 <span class="string">&#x27;\000&#x27;</span>, u = &#123;extra = 0&#125;&#125;&#125;, u2 = &#123;next = 0, cache_slot = 0, opline_num = 0, lineno = 0, num_args = 0, fe_pos = 0,</span><br><span class="line">      fe_iter_idx = 0, access_flags = 0, property_guard = 0, constant_flags = 0, extra = 0&#125;&#125;, sources = &#123;ptr = 0x0, list = 0&#125;&#125;</span><br><span class="line">(gdb) p *<span class="variable">$4</span>.value.ref.val.value.str</span><br><span class="line"><span class="variable">$7</span> = &#123;gc = &#123;refcount = 1, u = &#123;type_info = 86&#125;&#125;, h = 9223378989633936348, len = 6, val = <span class="string">&quot;S&quot;</span>&#125;</span><br><span class="line">(gdb) p *<span class="variable">$4</span>.value.ref.val.value.str.val@6</span><br><span class="line"><span class="variable">$8</span> = <span class="string">&quot;String&quot;</span></span><br><span class="line">(gdb) c</span><br><span class="line">Continuing.</span><br><span class="line">String</span><br><span class="line">Breakpoint 1, ZEND_ECHO_SPEC_CV_HANDLER () at /vagrant/php-8.0.10/Zend/zend_vm_execute.h:37184</span><br><span class="line">37184		SAVE_OPLINE();</span><br><span class="line">(gdb) n</span><br><span class="line">37185		z = EX_VAR(opline-&gt;op1.var);</span><br><span class="line">(gdb)</span><br><span class="line">37187		<span class="keyword">if</span> (Z_TYPE_P(z) == IS_STRING) &#123;</span><br><span class="line">(gdb) p z</span><br><span class="line"><span class="variable">$9</span> = (zval *) 0x7ffff3814070</span><br><span class="line">(gdb) p *z</span><br><span class="line"><span class="variable">$10</span> = &#123;value = &#123;lval = 140737278645952, dval = 6.9533454468151751e-310, counted = 0x7ffff38016c0, str = 0x7ffff38016c0, arr = 0x7ffff38016c0, obj = 0x7ffff38016c0, res = 0x7ffff38016c0,</span><br><span class="line">    ref = 0x7ffff38016c0, ast = 0x7ffff38016c0, zv = 0x7ffff38016c0, ptr = 0x7ffff38016c0, ce = 0x7ffff38016c0, func = 0x7ffff38016c0, ww = &#123;w1 = 4085257920, w2 = 32767&#125;&#125;, u1 = &#123;type_info = 266, v = &#123;</span><br><span class="line">      <span class="built_in">type</span> = 10 <span class="string">&#x27;\n&#x27;</span>, type_flags = 1 <span class="string">&#x27;\001&#x27;</span>, u = &#123;extra = 0&#125;&#125;&#125;, u2 = &#123;next = 0, cache_slot = 0, opline_num = 0, lineno = 0, num_args = 0, fe_pos = 0, fe_iter_idx = 0, access_flags = 0, property_guard = 0,</span><br><span class="line">    constant_flags = 0, extra = 0&#125;&#125;</span><br><span class="line">(gdb) p *z.value.ref</span><br><span class="line"><span class="variable">$11</span> = &#123;gc = &#123;refcount = 2, u = &#123;type_info = 26&#125;&#125;, val = &#123;value = &#123;lval = 140737278646144, dval = 6.9533454468246611e-310, counted = 0x7ffff3801780, str = 0x7ffff3801780, arr = 0x7ffff3801780,</span><br><span class="line">      obj = 0x7ffff3801780, res = 0x7ffff3801780, ref = 0x7ffff3801780, ast = 0x7ffff3801780, zv = 0x7ffff3801780, ptr = 0x7ffff3801780, ce = 0x7ffff3801780, func = 0x7ffff3801780, ww = &#123;w1 = 4085258112,</span><br><span class="line">        w2 = 32767&#125;&#125;, u1 = &#123;type_info = 6, v = &#123;<span class="built_in">type</span> = 6 <span class="string">&#x27;\006&#x27;</span>, type_flags = 0 <span class="string">&#x27;\000&#x27;</span>, u = &#123;extra = 0&#125;&#125;&#125;, u2 = &#123;next = 0, cache_slot = 0, opline_num = 0, lineno = 0, num_args = 0, fe_pos = 0,</span><br><span class="line">      fe_iter_idx = 0, access_flags = 0, property_guard = 0, constant_flags = 0, extra = 0&#125;&#125;, sources = &#123;ptr = 0x0, list = 0&#125;&#125;</span><br><span class="line">(gdb) p *z.value.ref.val.value.str</span><br><span class="line"><span class="variable">$12</span> = &#123;gc = &#123;refcount = 1, u = &#123;type_info = 86&#125;&#125;, h = 9223372247531462777, len = 5, val = <span class="string">&quot;H&quot;</span>&#125;</span><br><span class="line">(gdb) p *z.value.ref.val.value.str.val@5</span><br><span class="line"><span class="variable">$13</span> = <span class="string">&quot;Hello&quot;</span></span><br><span class="line">(gdb) c</span><br><span class="line">Continuing.</span><br><span class="line">Hello</span><br><span class="line">Breakpoint 1, ZEND_ECHO_SPEC_CV_HANDLER () at /vagrant/php-8.0.10/Zend/zend_vm_execute.h:37184</span><br><span class="line">37184		SAVE_OPLINE();</span><br><span class="line">(gdb) n</span><br><span class="line">37185		z = EX_VAR(opline-&gt;op1.var);</span><br><span class="line">(gdb)</span><br><span class="line">37187		<span class="keyword">if</span> (Z_TYPE_P(z) == IS_STRING) &#123;</span><br><span class="line">(gdb) p z</span><br><span class="line"><span class="variable">$14</span> = (zval *) 0x7ffff3814080</span><br><span class="line">(gdb) p *z</span><br><span class="line"><span class="variable">$15</span> = &#123;value = &#123;lval = 140737278645952, dval = 6.9533454468151751e-310, counted = 0x7ffff38016c0, str = 0x7ffff38016c0, arr = 0x7ffff38016c0, obj = 0x7ffff38016c0, res = 0x7ffff38016c0,</span><br><span class="line">    ref = 0x7ffff38016c0, ast = 0x7ffff38016c0, zv = 0x7ffff38016c0, ptr = 0x7ffff38016c0, ce = 0x7ffff38016c0, func = 0x7ffff38016c0, ww = &#123;w1 = 4085257920, w2 = 32767&#125;&#125;, u1 = &#123;type_info = 266, v = &#123;</span><br><span class="line">      <span class="built_in">type</span> = 10 <span class="string">&#x27;\n&#x27;</span>, type_flags = 1 <span class="string">&#x27;\001&#x27;</span>, u = &#123;extra = 0&#125;&#125;&#125;, u2 = &#123;next = 0, cache_slot = 0, opline_num = 0, lineno = 0, num_args = 0, fe_pos = 0, fe_iter_idx = 0, access_flags = 0, property_guard = 0,</span><br><span class="line">    constant_flags = 0, extra = 0&#125;&#125;</span><br><span class="line">(gdb) p *z.value.ref</span><br><span class="line"><span class="variable">$16</span> = &#123;gc = &#123;refcount = 2, u = &#123;type_info = 26&#125;&#125;, val = &#123;value = &#123;lval = 140737278646144, dval = 6.9533454468246611e-310, counted = 0x7ffff3801780, str = 0x7ffff3801780, arr = 0x7ffff3801780,</span><br><span class="line">      obj = 0x7ffff3801780, res = 0x7ffff3801780, ref = 0x7ffff3801780, ast = 0x7ffff3801780, zv = 0x7ffff3801780, ptr = 0x7ffff3801780, ce = 0x7ffff3801780, func = 0x7ffff3801780, ww = &#123;w1 = 4085258112,</span><br><span class="line">        w2 = 32767&#125;&#125;, u1 = &#123;type_info = 6, v = &#123;<span class="built_in">type</span> = 6 <span class="string">&#x27;\006&#x27;</span>, type_flags = 0 <span class="string">&#x27;\000&#x27;</span>, u = &#123;extra = 0&#125;&#125;&#125;, u2 = &#123;next = 0, cache_slot = 0, opline_num = 0, lineno = 0, num_args = 0, fe_pos = 0,</span><br><span class="line">      fe_iter_idx = 0, access_flags = 0, property_guard = 0, constant_flags = 0, extra = 0&#125;&#125;, sources = &#123;ptr = 0x0, list = 0&#125;&#125;</span><br><span class="line">(gdb) p *z.value.ref.val.value.str</span><br><span class="line"><span class="variable">$17</span> = &#123;gc = &#123;refcount = 1, u = &#123;type_info = 86&#125;&#125;, h = 9223372247531462777, len = 5, val = <span class="string">&quot;H&quot;</span>&#125;</span><br><span class="line">(gdb) c</span><br><span class="line">Continuing.</span><br><span class="line">Hello</span><br><span class="line">Breakpoint 1, ZEND_ECHO_SPEC_CV_HANDLER () at /vagrant/php-8.0.10/Zend/zend_vm_execute.h:37184</span><br><span class="line">37184		SAVE_OPLINE();</span><br><span class="line">(gdb) n</span><br><span class="line">37185		z = EX_VAR(opline-&gt;op1.var);</span><br><span class="line">(gdb)</span><br><span class="line">37187		<span class="keyword">if</span> (Z_TYPE_P(z) == IS_STRING) &#123;</span><br><span class="line">(gdb) p z</span><br><span class="line"><span class="variable">$18</span> = (zval *) 0x7ffff3814080</span><br><span class="line">(gdb) p *z</span><br><span class="line"><span class="variable">$19</span> = &#123;value = &#123;lval = 140737278645952, dval = 6.9533454468151751e-310, counted = 0x7ffff38016c0, str = 0x7ffff38016c0, arr = 0x7ffff38016c0, obj = 0x7ffff38016c0, res = 0x7ffff38016c0,</span><br><span class="line">    ref = 0x7ffff38016c0, ast = 0x7ffff38016c0, zv = 0x7ffff38016c0, ptr = 0x7ffff38016c0, ce = 0x7ffff38016c0, func = 0x7ffff38016c0, ww = &#123;w1 = 4085257920, w2 = 32767&#125;&#125;, u1 = &#123;type_info = 0, v = &#123;</span><br><span class="line">      <span class="built_in">type</span> = 0 <span class="string">&#x27;\000&#x27;</span>, type_flags = 0 <span class="string">&#x27;\000&#x27;</span>, u = &#123;extra = 0&#125;&#125;&#125;, u2 = &#123;next = 0, cache_slot = 0, opline_num = 0, lineno = 0, num_args = 0, fe_pos = 0, fe_iter_idx = 0, access_flags = 0, property_guard = 0,</span><br><span class="line">    constant_flags = 0, extra = 0&#125;&#125;</span><br><span class="line">(gdb) p *z.value.ref</span><br><span class="line"><span class="variable">$20</span> = &#123;gc = &#123;refcount = 1, u = &#123;type_info = 26&#125;&#125;, val = &#123;value = &#123;lval = 140737278646144, dval = 6.9533454468246611e-310, counted = 0x7ffff3801780, str = 0x7ffff3801780, arr = 0x7ffff3801780,</span><br><span class="line">      obj = 0x7ffff3801780, res = 0x7ffff3801780, ref = 0x7ffff3801780, ast = 0x7ffff3801780, zv = 0x7ffff3801780, ptr = 0x7ffff3801780, ce = 0x7ffff3801780, func = 0x7ffff3801780, ww = &#123;w1 = 4085258112,</span><br><span class="line">        w2 = 32767&#125;&#125;, u1 = &#123;type_info = 6, v = &#123;<span class="built_in">type</span> = 6 <span class="string">&#x27;\006&#x27;</span>, type_flags = 0 <span class="string">&#x27;\000&#x27;</span>, u = &#123;extra = 0&#125;&#125;&#125;, u2 = &#123;next = 0, cache_slot = 0, opline_num = 0, lineno = 0, num_args = 0, fe_pos = 0,</span><br><span class="line">      fe_iter_idx = 0, access_flags = 0, property_guard = 0, constant_flags = 0, extra = 0&#125;&#125;, sources = &#123;ptr = 0x0, list = 0&#125;&#125;</span><br><span class="line">(gdb) p *z.value.ref.val.value.str</span><br><span class="line"><span class="variable">$21</span> = &#123;gc = &#123;refcount = 1, u = &#123;type_info = 86&#125;&#125;, h = 9223372247531462777, len = 5, val = <span class="string">&quot;H&quot;</span>&#125;</span><br><span class="line">(gdb) p *z.value.ref.val.value.str.val@5</span><br><span class="line"><span class="variable">$22</span> = <span class="string">&quot;Hello&quot;</span></span><br><span class="line">(gdb) c</span><br><span class="line">Continuing.</span><br><span class="line"></span><br><span class="line">Warning: Undefined variable <span class="variable">$b</span> <span class="keyword">in</span> /home/vagrant/codes/tests/reference.php on line 13</span><br><span class="line"></span><br><span class="line">Breakpoint 1, ZEND_ECHO_SPEC_CV_HANDLER () at /vagrant/php-8.0.10/Zend/zend_vm_execute.h:37184</span><br><span class="line">37184		SAVE_OPLINE();</span><br><span class="line">(gdb) n</span><br><span class="line">37185		z = EX_VAR(opline-&gt;op1.var);</span><br><span class="line">(gdb)</span><br><span class="line">37187		<span class="keyword">if</span> (Z_TYPE_P(z) == IS_STRING) &#123;</span><br><span class="line">(gdb) p z</span><br><span class="line"><span class="variable">$23</span> = (zval *) 0x7ffff3814070</span><br><span class="line">(gdb) p *z</span><br><span class="line"><span class="variable">$24</span> = &#123;value = &#123;lval = 140737278645952, dval = 6.9533454468151751e-310, counted = 0x7ffff38016c0, str = 0x7ffff38016c0, arr = 0x7ffff38016c0, obj = 0x7ffff38016c0, res = 0x7ffff38016c0,</span><br><span class="line">    ref = 0x7ffff38016c0, ast = 0x7ffff38016c0, zv = 0x7ffff38016c0, ptr = 0x7ffff38016c0, ce = 0x7ffff38016c0, func = 0x7ffff38016c0, ww = &#123;w1 = 4085257920, w2 = 32767&#125;&#125;, u1 = &#123;type_info = 266, v = &#123;</span><br><span class="line">      <span class="built_in">type</span> = 10 <span class="string">&#x27;\n&#x27;</span>, type_flags = 1 <span class="string">&#x27;\001&#x27;</span>, u = &#123;extra = 0&#125;&#125;&#125;, u2 = &#123;next = 0, cache_slot = 0, opline_num = 0, lineno = 0, num_args = 0, fe_pos = 0, fe_iter_idx = 0, access_flags = 0, property_guard = 0,</span><br><span class="line">    constant_flags = 0, extra = 0&#125;&#125;</span><br><span class="line">(gdb) p *z.value.ref</span><br><span class="line"><span class="variable">$25</span> = &#123;gc = &#123;refcount = 1, u = &#123;type_info = 26&#125;&#125;, val = &#123;value = &#123;lval = 140737278646144, dval = 6.9533454468246611e-310, counted = 0x7ffff3801780, str = 0x7ffff3801780, arr = 0x7ffff3801780,</span><br><span class="line">      obj = 0x7ffff3801780, res = 0x7ffff3801780, ref = 0x7ffff3801780, ast = 0x7ffff3801780, zv = 0x7ffff3801780, ptr = 0x7ffff3801780, ce = 0x7ffff3801780, func = 0x7ffff3801780, ww = &#123;w1 = 4085258112,</span><br><span class="line">        w2 = 32767&#125;&#125;, u1 = &#123;type_info = 6, v = &#123;<span class="built_in">type</span> = 6 <span class="string">&#x27;\006&#x27;</span>, type_flags = 0 <span class="string">&#x27;\000&#x27;</span>, u = &#123;extra = 0&#125;&#125;&#125;, u2 = &#123;next = 0, cache_slot = 0, opline_num = 0, lineno = 0, num_args = 0, fe_pos = 0,</span><br><span class="line">      fe_iter_idx = 0, access_flags = 0, property_guard = 0, constant_flags = 0, extra = 0&#125;&#125;, sources = &#123;ptr = 0x0, list = 0&#125;&#125;</span><br><span class="line">(gdb) p *z.value.ref.val.value.str</span><br><span class="line"><span class="variable">$26</span> = &#123;gc = &#123;refcount = 1, u = &#123;type_info = 86&#125;&#125;, h = 9223372247531462777, len = 5, val = <span class="string">&quot;H&quot;</span>&#125;</span><br><span class="line">(gdb) p *z.value.ref.val.value.str.val@5</span><br><span class="line"><span class="variable">$27</span> = <span class="string">&quot;Hello&quot;</span></span><br><span class="line">(gdb)</span><br></pre></td></tr></table></figure>
<h1 id="Zend-Array"><a href="#Zend-Array" class="headerlink" title="Zend Array"></a>Zend Array</h1><h2 id="Zend-Array-ç»“æ„ä½“"><a href="#Zend-Array-ç»“æ„ä½“" class="headerlink" title="Zend Array ç»“æ„ä½“"></a>Zend Array ç»“æ„ä½“</h2><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> _<span class="title">zend_array</span> <span class="title">HashTable</span>;</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> _<span class="title">zend_array</span> &#123;</span></span><br><span class="line">	zend_refcounted_h gc;</span><br><span class="line">	<span class="class"><span class="keyword">union</span> &#123;</span></span><br><span class="line">		<span class="class"><span class="keyword">struct</span> &#123;</span></span><br><span class="line">			<span class="built_in">ZEND_ENDIAN_LOHI_4</span>(</span><br><span class="line">				zend_uchar    flags,</span><br><span class="line">				zend_uchar    _unused,</span><br><span class="line">				zend_uchar    nIteratorsCount,</span><br><span class="line">				zend_uchar    _unused2)</span><br><span class="line">		&#125; v;</span><br><span class="line">		<span class="keyword">uint32_t</span> flags;</span><br><span class="line">	&#125; u;</span><br><span class="line">	<span class="keyword">uint32_t</span>          nTableMask;</span><br><span class="line">	Bucket            *arData;</span><br><span class="line">	<span class="keyword">uint32_t</span>          nNumUsed;</span><br><span class="line">	<span class="keyword">uint32_t</span>          nNumOfElements;</span><br><span class="line">	<span class="keyword">uint32_t</span>          nTableSize;</span><br><span class="line">	<span class="keyword">uint32_t</span>          nInternalPointer;</span><br><span class="line">	zend_long         nNextFreeElement;</span><br><span class="line">	<span class="keyword">dtor_func_t</span>       pDestructor;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * HashTable Data Layout</span></span><br><span class="line"><span class="comment"> * =====================</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> *                 +=============================+</span></span><br><span class="line"><span class="comment"> *                 | HT_HASH(ht, ht-&gt;nTableMask) |</span></span><br><span class="line"><span class="comment"> *                 | ...                         |</span></span><br><span class="line"><span class="comment"> *                 | HT_HASH(ht, -1)             |</span></span><br><span class="line"><span class="comment"> *                 +-----------------------------+</span></span><br><span class="line"><span class="comment"> * ht-&gt;arData ---&gt; | Bucket[0]                   |</span></span><br><span class="line"><span class="comment"> *                 | ...                         |</span></span><br><span class="line"><span class="comment"> *                 | Bucket[ht-&gt;nTableSize-1]    |</span></span><br><span class="line"><span class="comment"> *                 +=============================+</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure>
<h2 id="Zend-Array-è¿è¡Œè°ƒè¯•"><a href="#Zend-Array-è¿è¡Œè°ƒè¯•" class="headerlink" title="Zend Array è¿è¡Œè°ƒè¯•"></a>Zend Array è¿è¡Œè°ƒè¯•</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># gdb /home/vagrant/codes/php80/bin/php</span></span><br><span class="line">(gdb) b zend_compile</span><br><span class="line">Breakpoint 1 at 0x4deed8: file /vagrant/php-8.0.10/Zend/zend_language_scanner.c, line 603.</span><br><span class="line">(gdb) r array.php</span><br><span class="line">Starting program: /home/vagrant/codes/php80/bin/php array.php</span><br><span class="line">[Thread debugging using libthread_db enabled]</span><br><span class="line">Using host libthread_db library <span class="string">&quot;/lib/x86_64-linux-gnu/libthread_db.so.1&quot;</span>.</span><br><span class="line"></span><br><span class="line">Breakpoint 1, zend_compile (<span class="built_in">type</span>=2) at /vagrant/php-8.0.10/Zend/zend_language_scanner.c:603</span><br><span class="line">603	&#123;</span><br><span class="line">(gdb) s</span><br><span class="line">604		zend_op_array *op_array = NULL;</span><br><span class="line">(gdb) b _zend_hash_init</span><br><span class="line">Breakpoint 2 at 0x555555aa768c: file /vagrant/php-8.0.10/Zend/zend_hash.c, line 266.</span><br><span class="line">(gdb) c</span><br><span class="line">Continuing.</span><br><span class="line"></span><br><span class="line">Breakpoint 2, _zend_hash_init (ht=0x555556773ab0 &lt;compiler_globals+272&gt;, nSize=8, pDestructor=0x0, persistent=<span class="literal">false</span>) at /vagrant/php-8.0.10/Zend/zend_hash.c:266</span><br><span class="line">266		_zend_hash_init_int(ht, nSize, pDestructor, persistent);</span><br><span class="line">(gdb) s</span><br><span class="line">_zend_hash_init_int (ht=0x555556773ab0 &lt;compiler_globals+272&gt;, nSize=8, pDestructor=0x0, persistent=<span class="literal">false</span>) at /vagrant/php-8.0.10/Zend/zend_hash.c:251</span><br><span class="line">251		GC_SET_REFCOUNT(ht, 1);</span><br><span class="line">(gdb) bt</span><br><span class="line"><span class="comment">#0  _zend_hash_init_int (ht=0x555556773ab0 &lt;compiler_globals+272&gt;, nSize=8, pDestructor=0x0, persistent=false) at /vagrant/php-8.0.10/Zend/zend_hash.c:251</span></span><br><span class="line"><span class="comment">#1  0x0000555555aa76a3 in _zend_hash_init (ht=0x555556773ab0 &lt;compiler_globals+272&gt;, nSize=8, pDestructor=0x0, persistent=false) at /vagrant/php-8.0.10/Zend/zend_hash.c:266</span></span><br><span class="line"><span class="comment">#2  0x0000555555a5c950 in zend_file_context_begin (prev_context=0x7fffffffa940) at /vagrant/php-8.0.10/Zend/zend_compile.c:358</span></span><br><span class="line"><span class="comment">#3  0x0000555555a32fe4 in zend_compile (type=2) at /vagrant/php-8.0.10/Zend/zend_language_scanner.c:628</span></span><br><span class="line"><span class="comment">#4  0x0000555555a3316e in compile_file (file_handle=0x7fffffffd1d0, type=8) at /vagrant/php-8.0.10/Zend/zend_language_scanner.c:665</span></span><br><span class="line"><span class="comment">#5  0x000055555585b013 in phar_compile_file (file_handle=0x7fffffffd1d0, type=8) at /vagrant/php-8.0.10/ext/phar/phar.c:3364</span></span><br><span class="line"><span class="comment">#6  0x0000555555a94ae5 in zend_execute_scripts (type=8, retval=0x0, file_count=3) at /vagrant/php-8.0.10/Zend/zend.c:1674</span></span><br><span class="line"><span class="comment">#7  0x00005555559f740c in php_execute_script (primary_file=0x7fffffffd1d0) at /vagrant/php-8.0.10/main/main.c:2524</span></span><br><span class="line"><span class="comment">#8  0x0000555555b81550 in do_cli (argc=2, argv=0x55555678a980) at /vagrant/php-8.0.10/sapi/cli/php_cli.c:949</span></span><br><span class="line"><span class="comment">#9  0x0000555555b82596 in main (argc=2, argv=0x55555678a980) at /vagrant/php-8.0.10/sapi/cli/php_cli.c:1337</span></span><br><span class="line">(gdb) n</span><br><span class="line">252		GC_TYPE_INFO(ht) = GC_ARRAY | (persistent ? ((GC_PERSISTENT|GC_NOT_COLLECTABLE) &lt;&lt; <span class="string">GC_FLAGS_SHIFT) : 0);</span></span><br><span class="line"><span class="string">(gdb) p ht</span></span><br><span class="line"><span class="string">$1 = (HashTable *) 0x555556773ab0 &lt;compiler_globals+272&gt;</span></span><br><span class="line"><span class="string">(gdb) p *ht</span></span><br><span class="line"><span class="string">$2 = &#123;gc = &#123;refcount = 1, u = &#123;type_info = 0&#125;&#125;, u = &#123;v = &#123;flags = 0 &#x27;\000&#x27;, _unused = 0 &#x27;\000&#x27;, nIteratorsCount = 0 &#x27;\000&#x27;, _unused2 = 0 &#x27;\000&#x27;&#125;, flags = 0&#125;, nTableMask = 0, arData = 0x0, nNumUsed = 0,</span></span><br><span class="line"><span class="string">  nNumOfElements = 0, nTableSize = 0, nInternalPointer = 0, nNextFreeElement = 0, pDestructor = 0x0&#125;</span></span><br><span class="line"><span class="string">(gdb) n</span></span><br><span class="line"><span class="string">253		HT_FLAGS(ht) = HASH_FLAG_UNINITIALIZED;</span></span><br><span class="line"><span class="string">(gdb) p HASH_FLAG_UNINITIALIZED</span></span><br><span class="line"><span class="string">No symbol &quot;HASH_FLAG_UNINITIALIZED&quot; in current context.</span></span><br><span class="line"><span class="string">(gdb) p ht</span></span><br><span class="line"><span class="string">$3 = (HashTable *) 0x555556773ab0 &lt;compiler_globals+272&gt;</span></span><br><span class="line"><span class="string">(gdb) p *ht</span></span><br><span class="line"><span class="string">$4 = &#123;gc = &#123;refcount = 1, u = &#123;type_info = 7&#125;&#125;, u = &#123;v = &#123;flags = 0 &#x27;\000&#x27;, _unused = 0 &#x27;\000&#x27;, nIteratorsCount = 0 &#x27;\000&#x27;, _unused2 = 0 &#x27;\000&#x27;&#125;, flags = 0&#125;, nTableMask = 0, arData = 0x0, nNumUsed = 0,</span></span><br><span class="line"><span class="string">  nNumOfElements = 0, nTableSize = 0, nInternalPointer = 0, nNextFreeElement = 0, pDestructor = 0x0&#125;</span></span><br><span class="line"><span class="string">(gdb) n</span></span><br><span class="line"><span class="string">254		ht-&gt;nTableMask = HT_MIN_MASK;</span></span><br><span class="line"><span class="string">(gdb) p HT_MIN_MASK</span></span><br><span class="line"><span class="string">No symbol &quot;HT_MIN_MASK&quot; in current context.</span></span><br><span class="line"><span class="string">(gdb) p ht-&gt;nTableMask</span></span><br><span class="line"><span class="string">$5 = 0</span></span><br><span class="line"><span class="string">(gdb) n</span></span><br><span class="line"><span class="string">255		HT_SET_DATA_ADDR(ht, &amp;uninitialized_bucket);</span></span><br><span class="line"><span class="string">(gdb) p ht</span></span><br><span class="line"><span class="string">$6 = (HashTable *) 0x555556773ab0 &lt;compiler_globals+272&gt;</span></span><br><span class="line"><span class="string">(gdb) p *ht</span></span><br><span class="line"><span class="string">$7 = &#123;gc = &#123;refcount = 1, u = &#123;type_info = 7&#125;&#125;, u = &#123;v = &#123;flags = 8 &#x27;\b&#x27;, _unused = 0 &#x27;\000&#x27;, nIteratorsCount = 0 &#x27;\000&#x27;, _unused2 = 0 &#x27;\000&#x27;&#125;, flags = 8&#125;, nTableMask = 4294967294, arData = 0x0,</span></span><br><span class="line"><span class="string">  nNumUsed = 0, nNumOfElements = 0, nTableSize = 0, nInternalPointer = 0, nNextFreeElement = 0, pDestructor = 0x0&#125;</span></span><br><span class="line"><span class="string">(gdb) p (int32_t)4294967294</span></span><br><span class="line"><span class="string">$8 = -2</span></span><br><span class="line"><span class="string">(gdb) n</span></span><br><span class="line"><span class="string">256		ht-&gt;nNumUsed = 0;</span></span><br><span class="line"><span class="string">(gdb) p ht</span></span><br><span class="line"><span class="string">$9 = (HashTable *) 0x555556773ab0 &lt;compiler_globals+272&gt;</span></span><br><span class="line"><span class="string">(gdb) p *ht</span></span><br><span class="line"><span class="string">$10 = &#123;gc = &#123;refcount = 1, u = &#123;type_info = 7&#125;&#125;, u = &#123;v = &#123;flags = 8 &#x27;\b&#x27;, _unused = 0 &#x27;\000&#x27;, nIteratorsCount = 0 &#x27;\000&#x27;, _unused2 = 0 &#x27;\000&#x27;&#125;, flags = 8&#125;, nTableMask = 4294967294, arData = 0x5555563477f8,</span></span><br><span class="line"><span class="string">  nNumUsed = 0, nNumOfElements = 0, nTableSize = 0, nInternalPointer = 0, nNextFreeElement = 0, pDestructor = 0x0&#125;</span></span><br><span class="line"><span class="string">(gdb) n</span></span><br><span class="line"><span class="string">257		ht-&gt;nNumOfElements = 0;</span></span><br><span class="line"><span class="string">(gdb) n</span></span><br><span class="line"><span class="string">258		ht-&gt;nInternalPointer = 0;</span></span><br><span class="line"><span class="string">(gdb) n</span></span><br><span class="line"><span class="string">259		ht-&gt;nNextFreeElement = ZEND_LONG_MIN;</span></span><br><span class="line"><span class="string">(gdb) p ZEND_LONG_MIN</span></span><br><span class="line"><span class="string">No symbol &quot;ZEND_LONG_MIN&quot; in current context.</span></span><br><span class="line"><span class="string">(gdb) p ht-&gt;nNextFreeElement</span></span><br><span class="line"><span class="string">$11 = 0</span></span><br><span class="line"><span class="string">(gdb) p ht</span></span><br><span class="line"><span class="string">$12 = (HashTable *) 0x555556773ab0 &lt;compiler_globals+272&gt;</span></span><br><span class="line"><span class="string">(gdb) p *ht</span></span><br><span class="line"><span class="string">$13 = &#123;gc = &#123;refcount = 1, u = &#123;type_info = 7&#125;&#125;, u = &#123;v = &#123;flags = 8 &#x27;\b&#x27;, _unused = 0 &#x27;\000&#x27;, nIteratorsCount = 0 &#x27;\000&#x27;, _unused2 = 0 &#x27;\000&#x27;&#125;, flags = 8&#125;, nTableMask = 4294967294, arData = 0x5555563477f8,</span></span><br><span class="line"><span class="string">  nNumUsed = 0, nNumOfElements = 0, nTableSize = 0, nInternalPointer = 0, nNextFreeElement = 0, pDestructor = 0x0&#125;</span></span><br><span class="line"><span class="string">(gdb) n</span></span><br><span class="line"><span class="string">260		ht-&gt;pDestructor = pDestructor;</span></span><br><span class="line"><span class="string">(gdb)</span></span><br><span class="line"><span class="string">261		ht-&gt;nTableSize = zend_hash_check_size(nSize);</span></span><br><span class="line"><span class="string">(gdb) p nSize</span></span><br><span class="line"><span class="string">$14 = 8</span></span><br><span class="line"><span class="string">(gdb) p ht-&gt;nTableSize</span></span><br><span class="line"><span class="string">$15 = 0</span></span><br><span class="line"><span class="string">(gdb) n</span></span><br><span class="line"><span class="string">262	&#125;</span></span><br><span class="line"><span class="string">(gdb) p ht-&gt;nTableSize</span></span><br><span class="line"><span class="string">$16 = 8</span></span><br><span class="line"><span class="string">(gdb) p ht</span></span><br><span class="line"><span class="string">$17 = (HashTable *) 0x555556773ab0 &lt;compiler_globals+272&gt;</span></span><br><span class="line"><span class="string">(gdb) p *ht</span></span><br><span class="line"><span class="string">$18 = &#123;gc = &#123;refcount = 1, u = &#123;type_info = 7&#125;&#125;, u = &#123;v = &#123;flags = 8 &#x27;\b&#x27;, _unused = 0 &#x27;\000&#x27;, nIteratorsCount = 0 &#x27;\000&#x27;, _unused2 = 0 &#x27;\000&#x27;&#125;, flags = 8&#125;, nTableMask = 4294967294, arData = 0x5555563477f8,</span></span><br><span class="line"><span class="string">  nNumUsed = 0, nNumOfElements = 0, nTableSize = 8, nInternalPointer = 0, nNextFreeElement = -9223372036854775808, pDestructor = 0x0&#125;</span></span><br><span class="line"><span class="string">(gdb)</span></span><br><span class="line"><span class="string">$19 = &#123;gc = &#123;refcount = 1, u = &#123;type_info = 7&#125;&#125;, u = &#123;v = &#123;flags = 8 &#x27;\b&#x27;, _unused = 0 &#x27;\000&#x27;, nIteratorsCount = 0 &#x27;\000&#x27;, _unused2 = 0 &#x27;\000&#x27;&#125;, flags = 8&#125;, nTableMask = 4294967294, arData = 0x5555563477f8,</span></span><br><span class="line"><span class="string">  nNumUsed = 0, nNumOfElements = 0, nTableSize = 8, nInternalPointer = 0, nNextFreeElement = -9223372036854775808, pDestructor = 0x0&#125;</span></span><br><span class="line"><span class="string">(gdb) b zend_execute</span></span><br><span class="line"><span class="string">Breakpoint 3 at 0x555555b40f86: file /vagrant/php-8.0.10/Zend/zend_vm_execute.h, line 58454.</span></span><br><span class="line"><span class="string">(gdb) c</span></span><br><span class="line"><span class="string">Continuing.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Breakpoint 3, zend_execute (op_array=0x7ffff385c280, return_value=0x0) at /vagrant/php-8.0.10/Zend/zend_vm_execute.h:58454</span></span><br><span class="line"><span class="string">58454		if (EG(exception) != NULL) &#123;</span></span><br><span class="line"><span class="string">(gdb) p op_array</span></span><br><span class="line"><span class="string">$20 = (zend_op_array *) 0x7ffff385c280</span></span><br><span class="line"><span class="string">(gdb) p *op_array</span></span><br><span class="line"><span class="string">$21 = &#123;type = 2 &#x27;\002&#x27;, arg_flags = &quot;\000\000&quot;, fn_flags = 100663296, function_name = 0x0, scope = 0x0, prototype = 0x0, num_args = 0, required_num_args = 0, arg_info = 0x0, attributes = 0x0,</span></span><br><span class="line"><span class="string">  cache_size = 0, last_var = 1, T = 7, last = 15, opcodes = 0x7ffff3877000, run_time_cache__ptr = 0x0, static_variables_ptr__ptr = 0x7ffff385c2e0, static_variables = 0x0, vars = 0x7ffff388b028,</span></span><br><span class="line"><span class="string">  refcount = 0x7ffff388b000, last_live_range = 0, last_try_catch = 0, live_range = 0x0, try_catch_array = 0x0, filename = 0x7ffff3858300, line_start = 1, line_end = 16, doc_comment = 0x0, last_literal = 13,</span></span><br><span class="line"><span class="string">  literals = 0x7ffff38771e0, reserved = &#123;0x0, 0x0, 0x0, 0x0, 0x0, 0x0&#125;&#125;</span></span><br><span class="line"><span class="string">(gdb) p $21.opcodes[0]</span></span><br><span class="line"><span class="string">$22 = &#123;handler = 0x555555b4047e &lt;execute_ex+17348&gt;, op1 = &#123;constant = 80, var = 80, num = 80, opline_num = 80, jmp_offset = 80&#125;, op2 = &#123;constant = 480, var = 480, num = 480, opline_num = 480,</span></span><br><span class="line"><span class="string">    jmp_offset = 480&#125;, result = &#123;constant = 0, var = 0, num = 0, opline_num = 0, jmp_offset = 0&#125;, extended_value = 0, lineno = 3, opcode = 22 &#x27;\026&#x27;, op1_type = 8 &#x27;\b&#x27;, op2_type = 1 &#x27;\001&#x27;,</span></span><br><span class="line"><span class="string">  result_type = 0 &#x27;\000&#x27;&#125;</span></span><br><span class="line"><span class="string">(gdb) p $21.opcodes[1]</span></span><br><span class="line"><span class="string">$23 = &#123;handler = 0x555555b4043e &lt;execute_ex+17284&gt;, op1 = &#123;constant = 80, var = 80, num = 80, opline_num = 80, jmp_offset = 80&#125;, op2 = &#123;constant = 464, var = 464, num = 464, opline_num = 464,</span></span><br><span class="line"><span class="string">    jmp_offset = 464&#125;, result = &#123;constant = 1, var = 1, num = 1, opline_num = 1, jmp_offset = 1&#125;, extended_value = 0, lineno = 4, opcode = 23 &#x27;\027&#x27;, op1_type = 8 &#x27;\b&#x27;, op2_type = 1 &#x27;\001&#x27;,</span></span><br><span class="line"><span class="string">  result_type = 0 &#x27;\000&#x27;&#125;</span></span><br><span class="line"><span class="string">(gdb) n</span></span><br><span class="line"><span class="string">58458		object_or_called_scope = zend_get_this_object(EG(current_execute_data));</span></span><br><span class="line"><span class="string">(gdb)</span></span><br><span class="line"><span class="string">58459		if (EXPECTED(!object_or_called_scope)) &#123;</span></span><br><span class="line"><span class="string">(gdb)</span></span><br><span class="line"><span class="string">58460			object_or_called_scope = zend_get_called_scope(EG(current_execute_data));</span></span><br><span class="line"><span class="string">(gdb)</span></span><br><span class="line"><span class="string">58461			call_info = ZEND_CALL_TOP_CODE | ZEND_CALL_HAS_SYMBOL_TABLE;</span></span><br><span class="line"><span class="string">(gdb)</span></span><br><span class="line"><span class="string">58465		execute_data = zend_vm_stack_push_call_frame(call_info,</span></span><br><span class="line"><span class="string">(gdb)</span></span><br><span class="line"><span class="string">58467		if (EG(current_execute_data)) &#123;</span></span><br><span class="line"><span class="string">(gdb)</span></span><br><span class="line"><span class="string">58470			execute_data-&gt;symbol_table = &amp;EG(symbol_table);</span></span><br><span class="line"><span class="string">(gdb)</span></span><br><span class="line"><span class="string">58472		EX(prev_execute_data) = EG(current_execute_data);</span></span><br><span class="line"><span class="string">(gdb)</span></span><br><span class="line"><span class="string">58473		i_init_code_execute_data(execute_data, op_array, return_value);</span></span><br><span class="line"><span class="string">(gdb)</span></span><br><span class="line"><span class="string">58474		ZEND_OBSERVER_FCALL_BEGIN(execute_data);</span></span><br><span class="line"><span class="string">(gdb)</span></span><br><span class="line"><span class="string">58475		zend_execute_ex(execute_data);</span></span><br><span class="line"><span class="string">(gdb) s</span></span><br><span class="line"><span class="string">execute_ex (ex=0x7ffff3814020) at /vagrant/php-8.0.10/Zend/zend_vm_execute.h:50426</span></span><br><span class="line"><span class="string">50426	&#123;</span></span><br><span class="line"><span class="string">(gdb) n</span></span><br><span class="line"><span class="string">50443		vm_stack_data.orig_opline = opline;</span></span><br><span class="line"><span class="string">(gdb)</span></span><br><span class="line"><span class="string">50446		vm_stack_data.orig_execute_data = execute_data;</span></span><br><span class="line"><span class="string">(gdb)</span></span><br><span class="line"><span class="string">50447		execute_data = ex;</span></span><br><span class="line"><span class="string">(gdb)</span></span><br><span class="line"><span class="string">50452		memset(vm_stack_data.hybrid_jit_red_zone, 0, ZEND_VM_HYBRID_JIT_RED_ZONE_SIZE);</span></span><br><span class="line"><span class="string">(gdb)</span></span><br><span class="line"><span class="string">50453		if (zend_touch_vm_stack_data) &#123;</span></span><br><span class="line"><span class="string">(gdb)</span></span><br><span class="line"><span class="string">50459		if (UNEXPECTED(execute_data == NULL)) &#123;</span></span><br><span class="line"><span class="string">(gdb)</span></span><br><span class="line"><span class="string">53921		LOAD_OPLINE();</span></span><br><span class="line"><span class="string">(gdb)</span></span><br><span class="line"><span class="string">53922		ZEND_VM_LOOP_INTERRUPT_CHECK();</span></span><br><span class="line"><span class="string">(gdb)</span></span><br><span class="line"><span class="string">53929			HYBRID_SWITCH() &#123;</span></span><br><span class="line"><span class="string">(gdb)</span></span><br><span class="line"><span class="string">57722					ZEND_ASSIGN_SPEC_CV_CONST_RETVAL_UNUSED_HANDLER(ZEND_OPCODE_HANDLER_ARGS_PASSTHRU);</span></span><br><span class="line"><span class="string">(gdb) s</span></span><br><span class="line"><span class="string">ZEND_ASSIGN_SPEC_CV_CONST_RETVAL_UNUSED_HANDLER () at /vagrant/php-8.0.10/Zend/zend_vm_execute.h:40834</span></span><br><span class="line"><span class="string">40834		SAVE_OPLINE();</span></span><br><span class="line"><span class="string">(gdb) n</span></span><br><span class="line"><span class="string">40835		value = RT_CONSTANT(opline, opline-&gt;op2);</span></span><br><span class="line"><span class="string">(gdb)</span></span><br><span class="line"><span class="string">40836		variable_ptr = EX_VAR(opline-&gt;op1.var);</span></span><br><span class="line"><span class="string">(gdb) p value</span></span><br><span class="line"><span class="string">$24 = (zval *) 0x7ffff38771e0</span></span><br><span class="line"><span class="string">(gdb) p *value</span></span><br><span class="line"><span class="string">$25 = &#123;value = &#123;lval = 93825011099008, dval = 4.6355714704693513e-310, counted = 0x555556752580 &lt;zend_empty_array&gt;, str = 0x555556752580 &lt;zend_empty_array&gt;, arr = 0x555556752580 &lt;zend_empty_array&gt;,</span></span><br><span class="line"><span class="string">    obj = 0x555556752580 &lt;zend_empty_array&gt;, res = 0x555556752580 &lt;zend_empty_array&gt;, ref = 0x555556752580 &lt;zend_empty_array&gt;, ast = 0x555556752580 &lt;zend_empty_array&gt;,</span></span><br><span class="line"><span class="string">    zv = 0x555556752580 &lt;zend_empty_array&gt;, ptr = 0x555556752580 &lt;zend_empty_array&gt;, ce = 0x555556752580 &lt;zend_empty_array&gt;, func = 0x555556752580 &lt;zend_empty_array&gt;, ww = &#123;w1 = 1450517888, w2 = 21845&#125;&#125;,</span></span><br><span class="line"><span class="string">  u1 = &#123;type_info = 7, v = &#123;type = 7 &#x27;\a&#x27;, type_flags = 0 &#x27;\000&#x27;, u = &#123;extra = 0&#125;&#125;&#125;, u2 = &#123;next = 0, cache_slot = 0, opline_num = 0, lineno = 0, num_args = 0, fe_pos = 0, fe_iter_idx = 0, access_flags = 0,</span></span><br><span class="line"><span class="string">    property_guard = 0, constant_flags = 0, extra = 0&#125;&#125;</span></span><br><span class="line"><span class="string">(gdb) p $25.value.arr</span></span><br><span class="line"><span class="string">$26 = (zend_array *) 0x555556752580 &lt;zend_empty_array&gt;</span></span><br><span class="line"><span class="string">(gdb) p *$25.value.arr</span></span><br><span class="line"><span class="string">$27 = &#123;gc = &#123;refcount = 2, u = &#123;type_info = 71&#125;&#125;, u = &#123;v = &#123;flags = 8 &#x27;\b&#x27;, _unused = 0 &#x27;\000&#x27;, nIteratorsCount = 0 &#x27;\000&#x27;, _unused2 = 0 &#x27;\000&#x27;&#125;, flags = 8&#125;, nTableMask = 4294967294,</span></span><br><span class="line"><span class="string">  arData = 0x5555563477f8, nNumUsed = 0, nNumOfElements = 0, nTableSize = 8, nInternalPointer = 0, nNextFreeElement = 0, pDestructor = 0x555555a909a5 &lt;zval_ptr_dtor&gt;&#125;</span></span><br><span class="line"><span class="string">(gdb) n</span></span><br><span class="line"><span class="string">40838		value = zend_assign_to_variable(variable_ptr, value, IS_CONST, EX_USES_STRICT_TYPES());</span></span><br><span class="line"><span class="string">(gdb) p variable_ptr</span></span><br><span class="line"><span class="string">$28 = (zval *) 0x7ffff3814070</span></span><br><span class="line"><span class="string">(gdb) p *variable_ptr</span></span><br><span class="line"><span class="string">$29 = &#123;value = &#123;lval = 0, dval = 0, counted = 0x0, str = 0x0, arr = 0x0, obj = 0x0, res = 0x0, ref = 0x0, ast = 0x0, zv = 0x0, ptr = 0x0, ce = 0x0, func = 0x0, ww = &#123;w1 = 0, w2 = 0&#125;&#125;, u1 = &#123;type_info = 0,</span></span><br><span class="line"><span class="string">    v = &#123;type = 0 &#x27;\000&#x27;, type_flags = 0 &#x27;\000&#x27;, u = &#123;extra = 0&#125;&#125;&#125;, u2 = &#123;next = 0, cache_slot = 0, opline_num = 0, lineno = 0, num_args = 0, fe_pos = 0, fe_iter_idx = 0, access_flags = 0,</span></span><br><span class="line"><span class="string">    property_guard = 0, constant_flags = 0, extra = 0&#125;&#125;</span></span><br><span class="line"><span class="string">(gdb) n</span></span><br><span class="line"><span class="string">40845		ZEND_VM_NEXT_OPCODE_CHECK_EXCEPTION();</span></span><br><span class="line"><span class="string">(gdb)</span></span><br><span class="line"><span class="string">40846	&#125;</span></span><br><span class="line"><span class="string">(gdb)</span></span><br><span class="line"><span class="string">execute_ex (ex=0x7ffff3814020) at /vagrant/php-8.0.10/Zend/zend_vm_execute.h:57723</span></span><br><span class="line"><span class="string">57723					HYBRID_BREAK();</span></span><br><span class="line"><span class="string">(gdb)</span></span><br><span class="line"><span class="string">57706					ZEND_ASSIGN_DIM_SPEC_CV_CONST_OP_DATA_CONST_HANDLER(ZEND_OPCODE_HANDLER_ARGS_PASSTHRU);</span></span><br><span class="line"><span class="string">(gdb) s</span></span><br><span class="line"><span class="string">ZEND_ASSIGN_DIM_SPEC_CV_CONST_OP_DATA_CONST_HANDLER () at /vagrant/php-8.0.10/Zend/zend_vm_execute.h:40386</span></span><br><span class="line"><span class="string">40386		SAVE_OPLINE();</span></span><br><span class="line"><span class="string">(gdb) n</span></span><br><span class="line"><span class="string">40387		orig_object_ptr = object_ptr = EX_VAR(opline-&gt;op1.var);</span></span><br><span class="line"><span class="string">(gdb)</span></span><br><span class="line"><span class="string">40389		if (EXPECTED(Z_TYPE_P(object_ptr) == IS_ARRAY)) &#123;</span></span><br><span class="line"><span class="string">(gdb) p orig_object_ptr</span></span><br><span class="line"><span class="string">$30 = (zval *) 0x7ffff3814070</span></span><br><span class="line"><span class="string">(gdb) p *orig_object_ptr</span></span><br><span class="line"><span class="string">$31 = &#123;value = &#123;lval = 93825011099008, dval = 4.6355714704693513e-310, counted = 0x555556752580 &lt;zend_empty_array&gt;, str = 0x555556752580 &lt;zend_empty_array&gt;, arr = 0x555556752580 &lt;zend_empty_array&gt;,</span></span><br><span class="line"><span class="string">    obj = 0x555556752580 &lt;zend_empty_array&gt;, res = 0x555556752580 &lt;zend_empty_array&gt;, ref = 0x555556752580 &lt;zend_empty_array&gt;, ast = 0x555556752580 &lt;zend_empty_array&gt;,</span></span><br><span class="line"><span class="string">    zv = 0x555556752580 &lt;zend_empty_array&gt;, ptr = 0x555556752580 &lt;zend_empty_array&gt;, ce = 0x555556752580 &lt;zend_empty_array&gt;, func = 0x555556752580 &lt;zend_empty_array&gt;, ww = &#123;w1 = 1450517888, w2 = 21845&#125;&#125;,</span></span><br><span class="line"><span class="string">  u1 = &#123;type_info = 7, v = &#123;type = 7 &#x27;\a&#x27;, type_flags = 0 &#x27;\000&#x27;, u = &#123;extra = 0&#125;&#125;&#125;, u2 = &#123;next = 0, cache_slot = 0, opline_num = 0, lineno = 0, num_args = 0, fe_pos = 0, fe_iter_idx = 0, access_flags = 0,</span></span><br><span class="line"><span class="string">    property_guard = 0, constant_flags = 0, extra = 0&#125;&#125;</span></span><br><span class="line"><span class="string">(gdb) p *orig_object_ptr.value.arr</span></span><br><span class="line"><span class="string">$32 = &#123;gc = &#123;refcount = 2, u = &#123;type_info = 71&#125;&#125;, u = &#123;v = &#123;flags = 8 &#x27;\b&#x27;, _unused = 0 &#x27;\000&#x27;, nIteratorsCount = 0 &#x27;\000&#x27;, _unused2 = 0 &#x27;\000&#x27;&#125;, flags = 8&#125;, nTableMask = 4294967294,</span></span><br><span class="line"><span class="string">  arData = 0x5555563477f8, nNumUsed = 0, nNumOfElements = 0, nTableSize = 8, nInternalPointer = 0, nNextFreeElement = 0, pDestructor = 0x555555a909a5 &lt;zval_ptr_dtor&gt;&#125;</span></span><br><span class="line"><span class="string">(gdb) p object_ptr</span></span><br><span class="line"><span class="string">$33 = (zval *) 0x7ffff3814070</span></span><br><span class="line"><span class="string">(gdb) p *object_ptr</span></span><br><span class="line"><span class="string">$34 = &#123;value = &#123;lval = 93825011099008, dval = 4.6355714704693513e-310, counted = 0x555556752580 &lt;zend_empty_array&gt;, str = 0x555556752580 &lt;zend_empty_array&gt;, arr = 0x555556752580 &lt;zend_empty_array&gt;,</span></span><br><span class="line"><span class="string">    obj = 0x555556752580 &lt;zend_empty_array&gt;, res = 0x555556752580 &lt;zend_empty_array&gt;, ref = 0x555556752580 &lt;zend_empty_array&gt;, ast = 0x555556752580 &lt;zend_empty_array&gt;,</span></span><br><span class="line"><span class="string">    zv = 0x555556752580 &lt;zend_empty_array&gt;, ptr = 0x555556752580 &lt;zend_empty_array&gt;, ce = 0x555556752580 &lt;zend_empty_array&gt;, func = 0x555556752580 &lt;zend_empty_array&gt;, ww = &#123;w1 = 1450517888, w2 = 21845&#125;&#125;,</span></span><br><span class="line"><span class="string">  u1 = &#123;type_info = 7, v = &#123;type = 7 &#x27;\a&#x27;, type_flags = 0 &#x27;\000&#x27;, u = &#123;extra = 0&#125;&#125;&#125;, u2 = &#123;next = 0, cache_slot = 0, opline_num = 0, lineno = 0, num_args = 0, fe_pos = 0, fe_iter_idx = 0, access_flags = 0,</span></span><br><span class="line"><span class="string">    property_guard = 0, constant_flags = 0, extra = 0&#125;&#125;</span></span><br><span class="line"><span class="string">(gdb) p *object_ptr.value.arr</span></span><br><span class="line"><span class="string">$35 = &#123;gc = &#123;refcount = 2, u = &#123;type_info = 71&#125;&#125;, u = &#123;v = &#123;flags = 8 &#x27;\b&#x27;, _unused = 0 &#x27;\000&#x27;, nIteratorsCount = 0 &#x27;\000&#x27;, _unused2 = 0 &#x27;\000&#x27;&#125;, flags = 8&#125;, nTableMask = 4294967294,</span></span><br><span class="line"><span class="string">  arData = 0x5555563477f8, nNumUsed = 0, nNumOfElements = 0, nTableSize = 8, nInternalPointer = 0, nNextFreeElement = 0, pDestructor = 0x555555a909a5 &lt;zval_ptr_dtor&gt;&#125;</span></span><br><span class="line"><span class="string">(gdb) n</span></span><br><span class="line"><span class="string">40390	try_assign_dim_array:</span></span><br><span class="line"><span class="string">(gdb)</span></span><br><span class="line"><span class="string">40391			SEPARATE_ARRAY(object_ptr);</span></span><br><span class="line"><span class="string">(gdb) n</span></span><br><span class="line"><span class="string">40419				dim = RT_CONSTANT(opline, opline-&gt;op2);</span></span><br><span class="line"><span class="string">(gdb) p object_ptr</span></span><br><span class="line"><span class="string">$36 = (zval *) 0x7ffff3814070</span></span><br><span class="line"><span class="string">(gdb) p *object_ptr</span></span><br><span class="line"><span class="string">$37 = &#123;value = &#123;lval = 140737279001440, dval = 6.9533454643786159e-310, counted = 0x7ffff3858360, str = 0x7ffff3858360, arr = 0x7ffff3858360, obj = 0x7ffff3858360, res = 0x7ffff3858360,</span></span><br><span class="line"><span class="string">    ref = 0x7ffff3858360, ast = 0x7ffff3858360, zv = 0x7ffff3858360, ptr = 0x7ffff3858360, ce = 0x7ffff3858360, func = 0x7ffff3858360, ww = &#123;w1 = 4085613408, w2 = 32767&#125;&#125;, u1 = &#123;type_info = 775, v = &#123;</span></span><br><span class="line"><span class="string">      type = 7 &#x27;\a&#x27;, type_flags = 3 &#x27;\003&#x27;, u = &#123;extra = 0&#125;&#125;&#125;, u2 = &#123;next = 0, cache_slot = 0, opline_num = 0, lineno = 0, num_args = 0, fe_pos = 0, fe_iter_idx = 0, access_flags = 0, property_guard = 0,</span></span><br><span class="line"><span class="string">    constant_flags = 0, extra = 0&#125;&#125;</span></span><br><span class="line"><span class="string">(gdb)  p *object_ptr.value.arr</span></span><br><span class="line"><span class="string">$38 = &#123;gc = &#123;refcount = 1, u = &#123;type_info = 7&#125;&#125;, u = &#123;v = &#123;flags = 8 &#x27;\b&#x27;, _unused = 0 &#x27;\000&#x27;, nIteratorsCount = 0 &#x27;\000&#x27;, _unused2 = 0 &#x27;\000&#x27;&#125;, flags = 8&#125;, nTableMask = 4294967294, arData = 0x5555563477f8,</span></span><br><span class="line"><span class="string">  nNumUsed = 0, nNumOfElements = 0, nTableSize = 8, nInternalPointer = 0, nNextFreeElement = 0, pDestructor = 0x555555a909a5 &lt;zval_ptr_dtor&gt;&#125;</span></span><br><span class="line"><span class="string">(gdb) p *(HashTable*)0x555556752580</span></span><br><span class="line"><span class="string">$39 = &#123;gc = &#123;refcount = 2, u = &#123;type_info = 71&#125;&#125;, u = &#123;v = &#123;flags = 8 &#x27;\b&#x27;, _unused = 0 &#x27;\000&#x27;, nIteratorsCount = 0 &#x27;\000&#x27;, _unused2 = 0 &#x27;\000&#x27;&#125;, flags = 8&#125;, nTableMask = 4294967294,</span></span><br><span class="line"><span class="string">  arData = 0x5555563477f8, nNumUsed = 0, nNumOfElements = 0, nTableSize = 8, nInternalPointer = 0, nNextFreeElement = 0, pDestructor = 0x555555a909a5 &lt;zval_ptr_dtor&gt;&#125;</span></span><br><span class="line"><span class="string">(gdb) p *(HashTable*)0x7ffff3858360</span></span><br><span class="line"><span class="string">$40 = &#123;gc = &#123;refcount = 1, u = &#123;type_info = 7&#125;&#125;, u = &#123;v = &#123;flags = 8 &#x27;\b&#x27;, _unused = 0 &#x27;\000&#x27;, nIteratorsCount = 0 &#x27;\000&#x27;, _unused2 = 0 &#x27;\000&#x27;&#125;, flags = 8&#125;, nTableMask = 4294967294, arData = 0x5555563477f8,</span></span><br><span class="line"><span class="string">  nNumUsed = 0, nNumOfElements = 0, nTableSize = 8, nInternalPointer = 0, nNextFreeElement = 0, pDestructor = 0x555555a909a5 &lt;zval_ptr_dtor&gt;&#125;</span></span><br><span class="line"><span class="string">(gdb) n</span></span><br><span class="line"><span class="string">40421					variable_ptr = zend_fetch_dimension_address_inner_W_CONST(Z_ARRVAL_P(object_ptr), dim EXECUTE_DATA_CC);</span></span><br><span class="line"><span class="string">(gdb)</span></span><br><span class="line"><span class="string">40425				if (UNEXPECTED(variable_ptr == NULL)) &#123;</span></span><br><span class="line"><span class="string">(gdb) p *variable_ptr</span></span><br><span class="line"><span class="string">$41 = &#123;value = &#123;lval = 0, dval = 0, counted = 0x0, str = 0x0, arr = 0x0, obj = 0x0, res = 0x0, ref = 0x0, ast = 0x0, zv = 0x0, ptr = 0x0, ce = 0x0, func = 0x0, ww = &#123;w1 = 0, w2 = 0&#125;&#125;, u1 = &#123;type_info = 1,</span></span><br><span class="line"><span class="string">    v = &#123;type = 1 &#x27;\001&#x27;, type_flags = 0 &#x27;\000&#x27;, u = &#123;extra = 0&#125;&#125;&#125;, u2 = &#123;next = 21845, cache_slot = 21845, opline_num = 21845, lineno = 21845, num_args = 21845, fe_pos = 21845, fe_iter_idx = 21845,</span></span><br><span class="line"><span class="string">    access_flags = 21845, property_guard = 21845, constant_flags = 21845, extra = 21845&#125;&#125;</span></span><br><span class="line"><span class="string">(gdb) n</span></span><br><span class="line"><span class="string">40428				value = RT_CONSTANT((opline+1), (opline+1)-&gt;op1);</span></span><br><span class="line"><span class="string">(gdb)</span></span><br><span class="line"><span class="string">40429				value = zend_assign_to_variable(variable_ptr, value, IS_CONST, EX_USES_STRICT_TYPES());</span></span><br><span class="line"><span class="string">(gdb) p value</span></span><br><span class="line"><span class="string">$42 = (zval *) 0x7ffff3877200</span></span><br><span class="line"><span class="string">(gdb) p *value</span></span><br><span class="line"><span class="string">$43 = &#123;value = &#123;lval = 93825011376272, dval = 4.635571484168013e-310, counted = 0x555556796090, str = 0x555556796090, arr = 0x555556796090, obj = 0x555556796090, res = 0x555556796090, ref = 0x555556796090,</span></span><br><span class="line"><span class="string">    ast = 0x555556796090, zv = 0x555556796090, ptr = 0x555556796090, ce = 0x555556796090, func = 0x555556796090, ww = &#123;w1 = 1450795152, w2 = 21845&#125;&#125;, u1 = &#123;type_info = 6, v = &#123;type = 6 &#x27;\006&#x27;,</span></span><br><span class="line"><span class="string">      type_flags = 0 &#x27;\000&#x27;, u = &#123;extra = 0&#125;&#125;&#125;, u2 = &#123;next = 0, cache_slot = 0, opline_num = 0, lineno = 0, num_args = 0, fe_pos = 0, fe_iter_idx = 0, access_flags = 0, property_guard = 0,</span></span><br><span class="line"><span class="string">    constant_flags = 0, extra = 0&#125;&#125;</span></span><br><span class="line"><span class="string">(gdb) p *value.value.str</span></span><br><span class="line"><span class="string">$44 = &#123;gc = &#123;refcount = 1, u = &#123;type_info = 470&#125;&#125;, h = 9223372036854953478, len = 1, val = &quot;a&quot;&#125;</span></span><br><span class="line"><span class="string">(gdb) p *value.value.str.val@1</span></span><br><span class="line"><span class="string">$45 = &quot;a&quot;</span></span><br><span class="line"><span class="string">(gdb) n</span></span><br><span class="line"><span class="string">40431			if (UNEXPECTED(RETURN_VALUE_USED(opline))) &#123;</span></span><br><span class="line"><span class="string">(gdb)</span></span><br><span class="line"><span class="string">40487		ZEND_VM_NEXT_OPCODE_EX(1, 2);</span></span><br><span class="line"><span class="string">(gdb) p *(HashTable*)0x555556752580</span></span><br><span class="line"><span class="string">$46 = &#123;gc = &#123;refcount = 2, u = &#123;type_info = 71&#125;&#125;, u = &#123;v = &#123;flags = 8 &#x27;\b&#x27;, _unused = 0 &#x27;\000&#x27;, nIteratorsCount = 0 &#x27;\000&#x27;, _unused2 = 0 &#x27;\000&#x27;&#125;, flags = 8&#125;, nTableMask = 4294967294,</span></span><br><span class="line"><span class="string">  arData = 0x5555563477f8, nNumUsed = 0, nNumOfElements = 0, nTableSize = 8, nInternalPointer = 0, nNextFreeElement = 0, pDestructor = 0x555555a909a5 &lt;zval_ptr_dtor&gt;&#125;</span></span><br><span class="line"><span class="string">(gdb) p *(HashTable*)0x7ffff3858360</span></span><br><span class="line"><span class="string">$47 = &#123;gc = &#123;refcount = 1, u = &#123;type_info = 7&#125;&#125;, u = &#123;v = &#123;flags = 20 &#x27;\024&#x27;, _unused = 0 &#x27;\000&#x27;, nIteratorsCount = 0 &#x27;\000&#x27;, _unused2 = 0 &#x27;\000&#x27;&#125;, flags = 20&#125;, nTableMask = 4294967294,</span></span><br><span class="line"><span class="string">  arData = 0x7ffff385c3c8, nNumUsed = 2, nNumOfElements = 1, nTableSize = 8, nInternalPointer = 0, nNextFreeElement = 2, pDestructor = 0x555555a909a5 &lt;zval_ptr_dtor&gt;&#125;</span></span><br><span class="line"><span class="string">(gdb) n</span></span><br><span class="line"><span class="string">40488	&#125;</span></span><br><span class="line"><span class="string">(gdb)</span></span><br><span class="line"><span class="string">execute_ex (ex=0x7ffff3814020) at /vagrant/php-8.0.10/Zend/zend_vm_execute.h:57707</span></span><br><span class="line"><span class="string">57707					HYBRID_BREAK();</span></span><br><span class="line"><span class="string">(gdb)</span></span><br><span class="line"><span class="string">58090					ZEND_ASSIGN_DIM_SPEC_CV_UNUSED_OP_DATA_CONST_HANDLER(ZEND_OPCODE_HANDLER_ARGS_PASSTHRU);</span></span><br><span class="line"><span class="string">(gdb) s</span></span><br><span class="line"><span class="string">ZEND_ASSIGN_DIM_SPEC_CV_UNUSED_OP_DATA_CONST_HANDLER () at /vagrant/php-8.0.10/Zend/zend_vm_execute.h:45781</span></span><br><span class="line"><span class="string">45781		SAVE_OPLINE();</span></span><br><span class="line"><span class="string">(gdb) n</span></span><br><span class="line"><span class="string">45782		orig_object_ptr = object_ptr = EX_VAR(opline-&gt;op1.var);</span></span><br><span class="line"><span class="string">(gdb) p orig_object_ptr</span></span><br><span class="line"><span class="string">$48 = (zval *) 0x7ffff3814070</span></span><br><span class="line"><span class="string">(gdb) p *orig_object_ptr</span></span><br><span class="line"><span class="string">$49 = &#123;value = &#123;lval = 140737279001440, dval = 6.9533454643786159e-310, counted = 0x7ffff3858360, str = 0x7ffff3858360, arr = 0x7ffff3858360, obj = 0x7ffff3858360, res = 0x7ffff3858360,</span></span><br><span class="line"><span class="string">    ref = 0x7ffff3858360, ast = 0x7ffff3858360, zv = 0x7ffff3858360, ptr = 0x7ffff3858360, ce = 0x7ffff3858360, func = 0x7ffff3858360, ww = &#123;w1 = 4085613408, w2 = 32767&#125;&#125;, u1 = &#123;type_info = 775, v = &#123;</span></span><br><span class="line"><span class="string">      type = 7 &#x27;\a&#x27;, type_flags = 3 &#x27;\003&#x27;, u = &#123;extra = 0&#125;&#125;&#125;, u2 = &#123;next = 0, cache_slot = 0, opline_num = 0, lineno = 0, num_args = 0, fe_pos = 0, fe_iter_idx = 0, access_flags = 0, property_guard = 0,</span></span><br><span class="line"><span class="string">    constant_flags = 0, extra = 0&#125;&#125;</span></span><br><span class="line"><span class="string">(gdb) p *orig_object_ptr.value.arr</span></span><br><span class="line"><span class="string">$50 = &#123;gc = &#123;refcount = 1, u = &#123;type_info = 7&#125;&#125;, u = &#123;v = &#123;flags = 20 &#x27;\024&#x27;, _unused = 0 &#x27;\000&#x27;, nIteratorsCount = 0 &#x27;\000&#x27;, _unused2 = 0 &#x27;\000&#x27;&#125;, flags = 20&#125;, nTableMask = 4294967294,</span></span><br><span class="line"><span class="string">  arData = 0x7ffff385c3c8, nNumUsed = 2, nNumOfElements = 1, nTableSize = 8, nInternalPointer = 0, nNextFreeElement = 2, pDestructor = 0x555555a909a5 &lt;zval_ptr_dtor&gt;&#125;</span></span><br><span class="line"><span class="string">(gdb) p object_ptr</span></span><br><span class="line"><span class="string">$51 = (zval *) 0x7ffff3814070</span></span><br><span class="line"><span class="string">(gdb) p *object_ptr</span></span><br><span class="line"><span class="string">$52 = &#123;value = &#123;lval = 140737279001440, dval = 6.9533454643786159e-310, counted = 0x7ffff3858360, str = 0x7ffff3858360, arr = 0x7ffff3858360, obj = 0x7ffff3858360, res = 0x7ffff3858360,</span></span><br><span class="line"><span class="string">    ref = 0x7ffff3858360, ast = 0x7ffff3858360, zv = 0x7ffff3858360, ptr = 0x7ffff3858360, ce = 0x7ffff3858360, func = 0x7ffff3858360, ww = &#123;w1 = 4085613408, w2 = 32767&#125;&#125;, u1 = &#123;type_info = 775, v = &#123;</span></span><br><span class="line"><span class="string">      type = 7 &#x27;\a&#x27;, type_flags = 3 &#x27;\003&#x27;, u = &#123;extra = 0&#125;&#125;&#125;, u2 = &#123;next = 0, cache_slot = 0, opline_num = 0, lineno = 0, num_args = 0, fe_pos = 0, fe_iter_idx = 0, access_flags = 0, property_guard = 0,</span></span><br><span class="line"><span class="string">    constant_flags = 0, extra = 0&#125;&#125;</span></span><br><span class="line"><span class="string">(gdb) p *object_ptr.value.arr</span></span><br><span class="line"><span class="string">$53 = &#123;gc = &#123;refcount = 1, u = &#123;type_info = 7&#125;&#125;, u = &#123;v = &#123;flags = 20 &#x27;\024&#x27;, _unused = 0 &#x27;\000&#x27;, nIteratorsCount = 0 &#x27;\000&#x27;, _unused2 = 0 &#x27;\000&#x27;&#125;, flags = 20&#125;, nTableMask = 4294967294,</span></span><br><span class="line"><span class="string">  arData = 0x7ffff385c3c8, nNumUsed = 2, nNumOfElements = 1, nTableSize = 8, nInternalPointer = 0, nNextFreeElement = 2, pDestructor = 0x555555a909a5 &lt;zval_ptr_dtor&gt;&#125;</span></span><br><span class="line"><span class="string">(gdb) n</span></span><br><span class="line"><span class="string">45784		if (EXPECTED(Z_TYPE_P(object_ptr) == IS_ARRAY)) &#123;</span></span><br><span class="line"><span class="string">(gdb) p object_ptr</span></span><br><span class="line"><span class="string">$54 = (zval *) 0x7ffff3814070</span></span><br><span class="line"><span class="string">(gdb) p *object_ptr</span></span><br><span class="line"><span class="string">$55 = &#123;value = &#123;lval = 140737279001440, dval = 6.9533454643786159e-310, counted = 0x7ffff3858360, str = 0x7ffff3858360, arr = 0x7ffff3858360, obj = 0x7ffff3858360, res = 0x7ffff3858360,</span></span><br><span class="line"><span class="string">    ref = 0x7ffff3858360, ast = 0x7ffff3858360, zv = 0x7ffff3858360, ptr = 0x7ffff3858360, ce = 0x7ffff3858360, func = 0x7ffff3858360, ww = &#123;w1 = 4085613408, w2 = 32767&#125;&#125;, u1 = &#123;type_info = 775, v = &#123;</span></span><br><span class="line"><span class="string">      type = 7 &#x27;\a&#x27;, type_flags = 3 &#x27;\003&#x27;, u = &#123;extra = 0&#125;&#125;&#125;, u2 = &#123;next = 0, cache_slot = 0, opline_num = 0, lineno = 0, num_args = 0, fe_pos = 0, fe_iter_idx = 0, access_flags = 0, property_guard = 0,</span></span><br><span class="line"><span class="string">    constant_flags = 0, extra = 0&#125;&#125;</span></span><br><span class="line"><span class="string">(gdb) p *object_ptr.value.arr</span></span><br><span class="line"><span class="string">$56 = &#123;gc = &#123;refcount = 1, u = &#123;type_info = 7&#125;&#125;, u = &#123;v = &#123;flags = 20 &#x27;\024&#x27;, _unused = 0 &#x27;\000&#x27;, nIteratorsCount = 0 &#x27;\000&#x27;, _unused2 = 0 &#x27;\000&#x27;&#125;, flags = 20&#125;, nTableMask = 4294967294,</span></span><br><span class="line"><span class="string">  arData = 0x7ffff385c3c8, nNumUsed = 2, nNumOfElements = 1, nTableSize = 8, nInternalPointer = 0, nNextFreeElement = 2, pDestructor = 0x555555a909a5 &lt;zval_ptr_dtor&gt;&#125;</span></span><br><span class="line"><span class="string">(gdb) n</span></span><br><span class="line"><span class="string">45785	try_assign_dim_array:</span></span><br><span class="line"><span class="string">(gdb)</span></span><br><span class="line"><span class="string">45786			SEPARATE_ARRAY(object_ptr);</span></span><br><span class="line"><span class="string">(gdb) p *object_ptr.value.arr</span></span><br><span class="line"><span class="string">$57 = &#123;gc = &#123;refcount = 1, u = &#123;type_info = 7&#125;&#125;, u = &#123;v = &#123;flags = 20 &#x27;\024&#x27;, _unused = 0 &#x27;\000&#x27;, nIteratorsCount = 0 &#x27;\000&#x27;, _unused2 = 0 &#x27;\000&#x27;&#125;, flags = 20&#125;, nTableMask = 4294967294,</span></span><br><span class="line"><span class="string">  arData = 0x7ffff385c3c8, nNumUsed = 2, nNumOfElements = 1, nTableSize = 8, nInternalPointer = 0, nNextFreeElement = 2, pDestructor = 0x555555a909a5 &lt;zval_ptr_dtor&gt;&#125;</span></span><br><span class="line"><span class="string">(gdb) n</span></span><br><span class="line"><span class="string">45788				value = RT_CONSTANT((opline+1), (opline+1)-&gt;op1);</span></span><br><span class="line"><span class="string">(gdb)</span></span><br><span class="line"><span class="string">45792				variable_ptr = zend_hash_next_index_insert(Z_ARRVAL_P(object_ptr), value);</span></span><br><span class="line"><span class="string">(gdb) n</span></span><br><span class="line"><span class="string">45793				if (UNEXPECTED(variable_ptr == NULL)) &#123;</span></span><br><span class="line"><span class="string">(gdb) p variable_ptr</span></span><br><span class="line"><span class="string">$58 = (zval *) 0x7ffff385c408</span></span><br><span class="line"><span class="string">(gdb) p *variable_ptr</span></span><br><span class="line"><span class="string">$59 = &#123;value = &#123;lval = 93825011376320, dval = 4.6355714841703845e-310, counted = 0x5555567960c0, str = 0x5555567960c0, arr = 0x5555567960c0, obj = 0x5555567960c0, res = 0x5555567960c0, ref = 0x5555567960c0,</span></span><br><span class="line"><span class="string">    ast = 0x5555567960c0, zv = 0x5555567960c0, ptr = 0x5555567960c0, ce = 0x5555567960c0, func = 0x5555567960c0, ww = &#123;w1 = 1450795200, w2 = 21845&#125;&#125;, u1 = &#123;type_info = 6, v = &#123;type = 6 &#x27;\006&#x27;,</span></span><br><span class="line"><span class="string">      type_flags = 0 &#x27;\000&#x27;, u = &#123;extra = 0&#125;&#125;&#125;, u2 = &#123;next = 32767, cache_slot = 32767, opline_num = 32767, lineno = 32767, num_args = 32767, fe_pos = 32767, fe_iter_idx = 32767, access_flags = 32767,</span></span><br><span class="line"><span class="string">    property_guard = 32767, constant_flags = 32767, extra = 32767&#125;&#125;</span></span><br><span class="line"><span class="string">(gdb) n</span></span><br><span class="line"><span class="string">45809					if (UNEXPECTED(Z_REFCOUNTED_P(value))) &#123;</span></span><br><span class="line"><span class="string">(gdb)</span></span><br><span class="line"><span class="string">45826			if (UNEXPECTED(RETURN_VALUE_USED(opline))) &#123;</span></span><br><span class="line"><span class="string">(gdb)</span></span><br><span class="line"><span class="string">45882		ZEND_VM_NEXT_OPCODE_EX(1, 2);</span></span><br><span class="line"><span class="string">(gdb) p value</span></span><br><span class="line"><span class="string">$60 = (zval *) 0x7ffff3877210</span></span><br><span class="line"><span class="string">(gdb) p *value</span></span><br><span class="line"><span class="string">$61 = &#123;value = &#123;lval = 93825011376320, dval = 4.6355714841703845e-310, counted = 0x5555567960c0, str = 0x5555567960c0, arr = 0x5555567960c0, obj = 0x5555567960c0, res = 0x5555567960c0, ref = 0x5555567960c0,</span></span><br><span class="line"><span class="string">    ast = 0x5555567960c0, zv = 0x5555567960c0, ptr = 0x5555567960c0, ce = 0x5555567960c0, func = 0x5555567960c0, ww = &#123;w1 = 1450795200, w2 = 21845&#125;&#125;, u1 = &#123;type_info = 6, v = &#123;type = 6 &#x27;\006&#x27;,</span></span><br><span class="line"><span class="string">      type_flags = 0 &#x27;\000&#x27;, u = &#123;extra = 0&#125;&#125;&#125;, u2 = &#123;next = 0, cache_slot = 0, opline_num = 0, lineno = 0, num_args = 0, fe_pos = 0, fe_iter_idx = 0, access_flags = 0, property_guard = 0,</span></span><br><span class="line"><span class="string">    constant_flags = 0, extra = 0&#125;&#125;</span></span><br><span class="line"><span class="string">(gdb) p *value.value.str</span></span><br><span class="line"><span class="string">$62 = &#123;gc = &#123;refcount = 1, u = &#123;type_info = 470&#125;&#125;, h = 9223372036854953479, len = 1, val = &quot;b&quot;&#125;</span></span><br><span class="line"><span class="string">(gdb) p *(HashTable*)0x555556752580</span></span><br><span class="line"><span class="string">$63 = &#123;gc = &#123;refcount = 2, u = &#123;type_info = 71&#125;&#125;, u = &#123;v = &#123;flags = 8 &#x27;\b&#x27;, _unused = 0 &#x27;\000&#x27;, nIteratorsCount = 0 &#x27;\000&#x27;, _unused2 = 0 &#x27;\000&#x27;&#125;, flags = 8&#125;, nTableMask = 4294967294,</span></span><br><span class="line"><span class="string">  arData = 0x5555563477f8, nNumUsed = 0, nNumOfElements = 0, nTableSize = 8, nInternalPointer = 0, nNextFreeElement = 0, pDestructor = 0x555555a909a5 &lt;zval_ptr_dtor&gt;&#125;</span></span><br><span class="line"><span class="string">(gdb) p *(HashTable*)0x7ffff3858360</span></span><br><span class="line"><span class="string">$64 = &#123;gc = &#123;refcount = 1, u = &#123;type_info = 7&#125;&#125;, u = &#123;v = &#123;flags = 20 &#x27;\024&#x27;, _unused = 0 &#x27;\000&#x27;, nIteratorsCount = 0 &#x27;\000&#x27;, _unused2 = 0 &#x27;\000&#x27;&#125;, flags = 20&#125;, nTableMask = 4294967294,</span></span><br><span class="line"><span class="string">  arData = 0x7ffff385c3c8, nNumUsed = 3, nNumOfElements = 2, nTableSize = 8, nInternalPointer = 0, nNextFreeElement = 3, pDestructor = 0x555555a909a5 &lt;zval_ptr_dtor&gt;&#125;</span></span><br><span class="line"><span class="string">(gdb) p (int32_t)4294967294</span></span><br><span class="line"><span class="string">$65 = -2</span></span><br><span class="line"><span class="string">(gdb) p $64.arData[2]</span></span><br><span class="line"><span class="string">$66 = &#123;val = &#123;value = &#123;lval = 93825011376320, dval = 4.6355714841703845e-310, counted = 0x5555567960c0, str = 0x5555567960c0, arr = 0x5555567960c0, obj = 0x5555567960c0, res = 0x5555567960c0,</span></span><br><span class="line"><span class="string">      ref = 0x5555567960c0, ast = 0x5555567960c0, zv = 0x5555567960c0, ptr = 0x5555567960c0, ce = 0x5555567960c0, func = 0x5555567960c0, ww = &#123;w1 = 1450795200, w2 = 21845&#125;&#125;, u1 = &#123;type_info = 6, v = &#123;</span></span><br><span class="line"><span class="string">        type = 6 &#x27;\006&#x27;, type_flags = 0 &#x27;\000&#x27;, u = &#123;extra = 0&#125;&#125;&#125;, u2 = &#123;next = 32767, cache_slot = 32767, opline_num = 32767, lineno = 32767, num_args = 32767, fe_pos = 32767, fe_iter_idx = 32767,</span></span><br><span class="line"><span class="string">      access_flags = 32767, property_guard = 32767, constant_flags = 32767, extra = 32767&#125;&#125;, h = 2, key = 0x0&#125;</span></span><br><span class="line"><span class="string">(gdb) p $64.arData[2].val.value.str</span></span><br><span class="line"><span class="string">$67 = (zend_string *) 0x5555567960c0</span></span><br><span class="line"><span class="string">(gdb) p *$64.arData[2].val.value.str</span></span><br><span class="line"><span class="string">$68 = &#123;gc = &#123;refcount = 1, u = &#123;type_info = 470&#125;&#125;, h = 9223372036854953479, len = 1, val = &quot;b&quot;&#125;</span></span><br><span class="line"><span class="string">(gdb) p *$64.arData[2].val.value.str.val@1</span></span><br><span class="line"><span class="string">$69 = &quot;b&quot;</span></span><br><span class="line"><span class="string">(gdb) n</span></span><br><span class="line"><span class="string">45883	&#125;</span></span><br><span class="line"><span class="string">(gdb)</span></span><br><span class="line"><span class="string">execute_ex (ex=0x7ffff3814020) at /vagrant/php-8.0.10/Zend/zend_vm_execute.h:58091</span></span><br><span class="line"><span class="string">58091					HYBRID_BREAK();</span></span><br><span class="line"><span class="string">(gdb)</span></span><br><span class="line"><span class="string">57706					ZEND_ASSIGN_DIM_SPEC_CV_CONST_OP_DATA_CONST_HANDLER(ZEND_OPCODE_HANDLER_ARGS_PASSTHRU);</span></span><br><span class="line"><span class="string">(gdb) s</span></span><br><span class="line"><span class="string">ZEND_ASSIGN_DIM_SPEC_CV_CONST_OP_DATA_CONST_HANDLER () at /vagrant/php-8.0.10/Zend/zend_vm_execute.h:40386</span></span><br><span class="line"><span class="string">40386		SAVE_OPLINE();</span></span><br><span class="line"><span class="string">(gdb) n</span></span><br><span class="line"><span class="string">40387		orig_object_ptr = object_ptr = EX_VAR(opline-&gt;op1.var);</span></span><br><span class="line"><span class="string">(gdb)</span></span><br><span class="line"><span class="string">40389		if (EXPECTED(Z_TYPE_P(object_ptr) == IS_ARRAY)) &#123;</span></span><br><span class="line"><span class="string">(gdb) p object_ptr</span></span><br><span class="line"><span class="string">$70 = (zval *) 0x7ffff3814070</span></span><br><span class="line"><span class="string">(gdb) p *object_ptr</span></span><br><span class="line"><span class="string">$71 = &#123;value = &#123;lval = 140737279001440, dval = 6.9533454643786159e-310, counted = 0x7ffff3858360, str = 0x7ffff3858360, arr = 0x7ffff3858360, obj = 0x7ffff3858360, res = 0x7ffff3858360,</span></span><br><span class="line"><span class="string">    ref = 0x7ffff3858360, ast = 0x7ffff3858360, zv = 0x7ffff3858360, ptr = 0x7ffff3858360, ce = 0x7ffff3858360, func = 0x7ffff3858360, ww = &#123;w1 = 4085613408, w2 = 32767&#125;&#125;, u1 = &#123;type_info = 775, v = &#123;</span></span><br><span class="line"><span class="string">      type = 7 &#x27;\a&#x27;, type_flags = 3 &#x27;\003&#x27;, u = &#123;extra = 0&#125;&#125;&#125;, u2 = &#123;next = 0, cache_slot = 0, opline_num = 0, lineno = 0, num_args = 0, fe_pos = 0, fe_iter_idx = 0, access_flags = 0, property_guard = 0,</span></span><br><span class="line"><span class="string">    constant_flags = 0, extra = 0&#125;&#125;</span></span><br><span class="line"><span class="string">(gdb) n</span></span><br><span class="line"><span class="string">40390	try_assign_dim_array:</span></span><br><span class="line"><span class="string">(gdb)</span></span><br><span class="line"><span class="string">40391			SEPARATE_ARRAY(object_ptr);</span></span><br><span class="line"><span class="string">(gdb)</span></span><br><span class="line"><span class="string">40419				dim = RT_CONSTANT(opline, opline-&gt;op2);</span></span><br><span class="line"><span class="string">(gdb)</span></span><br><span class="line"><span class="string">40421					variable_ptr = zend_fetch_dimension_address_inner_W_CONST(Z_ARRVAL_P(object_ptr), dim EXECUTE_DATA_CC);</span></span><br><span class="line"><span class="string">(gdb) p dim</span></span><br><span class="line"><span class="string">$72 = (zval *) 0x7ffff3877220</span></span><br><span class="line"><span class="string">(gdb) p *dim</span></span><br><span class="line"><span class="string">$73 = &#123;value = &#123;lval = 140737278646400, dval = 6.9533454468373092e-310, counted = 0x7ffff3801880, str = 0x7ffff3801880, arr = 0x7ffff3801880, obj = 0x7ffff3801880, res = 0x7ffff3801880,</span></span><br><span class="line"><span class="string">    ref = 0x7ffff3801880, ast = 0x7ffff3801880, zv = 0x7ffff3801880, ptr = 0x7ffff3801880, ce = 0x7ffff3801880, func = 0x7ffff3801880, ww = &#123;w1 = 4085258368, w2 = 32767&#125;&#125;, u1 = &#123;type_info = 6, v = &#123;</span></span><br><span class="line"><span class="string">      type = 6 &#x27;\006&#x27;, type_flags = 0 &#x27;\000&#x27;, u = &#123;extra = 0&#125;&#125;&#125;, u2 = &#123;next = 0, cache_slot = 0, opline_num = 0, lineno = 0, num_args = 0, fe_pos = 0, fe_iter_idx = 0, access_flags = 0, property_guard = 0,</span></span><br><span class="line"><span class="string">    constant_flags = 0, extra = 0&#125;&#125;</span></span><br><span class="line"><span class="string">(gdb) p *dim.value.str</span></span><br><span class="line"><span class="string">$74 = &#123;gc = &#123;refcount = 1, u = &#123;type_info = 86&#125;&#125;, h = 9223372036860639297, len = 2, val = &quot;k&quot;&#125;</span></span><br><span class="line"><span class="string">(gdb) p *dim.value.str.val@2</span></span><br><span class="line"><span class="string">$75 = &quot;k1&quot;</span></span><br><span class="line"><span class="string">(gdb) n</span></span><br><span class="line"><span class="string">40425				if (UNEXPECTED(variable_ptr == NULL)) &#123;</span></span><br><span class="line"><span class="string">(gdb) p *variable_ptr</span></span><br><span class="line"><span class="string">$76 = &#123;value = &#123;lval = 0, dval = 0, counted = 0x0, str = 0x0, arr = 0x0, obj = 0x0, res = 0x0, ref = 0x0, ast = 0x0, zv = 0x0, ptr = 0x0, ce = 0x0, func = 0x0, ww = &#123;w1 = 0, w2 = 0&#125;&#125;, u1 = &#123;type_info = 1,</span></span><br><span class="line"><span class="string">    v = &#123;type = 1 &#x27;\001&#x27;, type_flags = 0 &#x27;\000&#x27;, u = &#123;extra = 0&#125;&#125;&#125;, u2 = &#123;next = 0, cache_slot = 0, opline_num = 0, lineno = 0, num_args = 0, fe_pos = 0, fe_iter_idx = 0, access_flags = 0,</span></span><br><span class="line"><span class="string">    property_guard = 0, constant_flags = 0, extra = 0&#125;&#125;</span></span><br><span class="line"><span class="string">(gdb) n</span></span><br><span class="line"><span class="string">40428				value = RT_CONSTANT((opline+1), (opline+1)-&gt;op1);</span></span><br><span class="line"><span class="string">(gdb)</span></span><br><span class="line"><span class="string">40429				value = zend_assign_to_variable(variable_ptr, value, IS_CONST, EX_USES_STRICT_TYPES());</span></span><br><span class="line"><span class="string">(gdb) p value</span></span><br><span class="line"><span class="string">$77 = (zval *) 0x7ffff3877230</span></span><br><span class="line"><span class="string">(gdb) p *value</span></span><br><span class="line"><span class="string">$78 = &#123;value = &#123;lval = 140737278646464, dval = 6.9533454468404712e-310, counted = 0x7ffff38018c0, str = 0x7ffff38018c0, arr = 0x7ffff38018c0, obj = 0x7ffff38018c0, res = 0x7ffff38018c0,</span></span><br><span class="line"><span class="string">    ref = 0x7ffff38018c0, ast = 0x7ffff38018c0, zv = 0x7ffff38018c0, ptr = 0x7ffff38018c0, ce = 0x7ffff38018c0, func = 0x7ffff38018c0, ww = &#123;w1 = 4085258432, w2 = 32767&#125;&#125;, u1 = &#123;type_info = 6, v = &#123;</span></span><br><span class="line"><span class="string">      type = 6 &#x27;\006&#x27;, type_flags = 0 &#x27;\000&#x27;, u = &#123;extra = 0&#125;&#125;&#125;, u2 = &#123;next = 0, cache_slot = 0, opline_num = 0, lineno = 0, num_args = 0, fe_pos = 0, fe_iter_idx = 0, access_flags = 0, property_guard = 0,</span></span><br><span class="line"><span class="string">    constant_flags = 0, extra = 0&#125;&#125;</span></span><br><span class="line"><span class="string">(gdb) p *value.value.str</span></span><br><span class="line"><span class="string">$79 = &#123;gc = &#123;refcount = 1, u = &#123;type_info = 86&#125;&#125;, h = 9223372036860639660, len = 2, val = &quot;v&quot;&#125;</span></span><br><span class="line"><span class="string">(gdb) p *value.value.str.val@2</span></span><br><span class="line"><span class="string">$80 = &quot;v1&quot;</span></span><br><span class="line"><span class="string">(gdb) n</span></span><br><span class="line"><span class="string">40431			if (UNEXPECTED(RETURN_VALUE_USED(opline))) &#123;</span></span><br><span class="line"><span class="string">(gdb)</span></span><br><span class="line"><span class="string">40487		ZEND_VM_NEXT_OPCODE_EX(1, 2);</span></span><br><span class="line"><span class="string">(gdb) p *(HashTable*)0x7ffff3858360</span></span><br><span class="line"><span class="string">$81 = &#123;gc = &#123;refcount = 1, u = &#123;type_info = 7&#125;&#125;, u = &#123;v = &#123;flags = 16 &#x27;\020&#x27;, _unused = 0 &#x27;\000&#x27;, nIteratorsCount = 0 &#x27;\000&#x27;, _unused2 = 0 &#x27;\000&#x27;&#125;, flags = 16&#125;, nTableMask = 4294967280,</span></span><br><span class="line"><span class="string">  arData = 0x7ffff3874340, nNumUsed = 3, nNumOfElements = 3, nTableSize = 8, nInternalPointer = 0, nNextFreeElement = 3, pDestructor = 0x555555a909a5 &lt;zval_ptr_dtor&gt;&#125;</span></span><br><span class="line"><span class="string">(gdb) p (int32_t)4294967280</span></span><br><span class="line"><span class="string">$82 = -16</span></span><br><span class="line"><span class="string">(gdb) n</span></span><br><span class="line"><span class="string">40488	&#125;</span></span><br><span class="line"><span class="string">(gdb)</span></span><br><span class="line"><span class="string">execute_ex (ex=0x7ffff3814020) at /vagrant/php-8.0.10/Zend/zend_vm_execute.h:57707</span></span><br><span class="line"><span class="string">57707					HYBRID_BREAK();</span></span><br><span class="line"><span class="string">(gdb)</span></span><br><span class="line"><span class="string">57706					ZEND_ASSIGN_DIM_SPEC_CV_CONST_OP_DATA_CONST_HANDLER(ZEND_OPCODE_HANDLER_ARGS_PASSTHRU);</span></span><br><span class="line"><span class="string">(gdb) s</span></span><br><span class="line"><span class="string">ZEND_ASSIGN_DIM_SPEC_CV_CONST_OP_DATA_CONST_HANDLER () at /vagrant/php-8.0.10/Zend/zend_vm_execute.h:40386</span></span><br><span class="line"><span class="string">40386		SAVE_OPLINE();</span></span><br><span class="line"><span class="string">(gdb) n</span></span><br><span class="line"><span class="string">40387		orig_object_ptr = object_ptr = EX_VAR(opline-&gt;op1.var);</span></span><br><span class="line"><span class="string">(gdb)</span></span><br><span class="line"><span class="string">40389		if (EXPECTED(Z_TYPE_P(object_ptr) == IS_ARRAY)) &#123;</span></span><br><span class="line"><span class="string">(gdb) p *object_ptr</span></span><br><span class="line"><span class="string">$83 = &#123;value = &#123;lval = 140737279001440, dval = 6.9533454643786159e-310, counted = 0x7ffff3858360, str = 0x7ffff3858360, arr = 0x7ffff3858360, obj = 0x7ffff3858360, res = 0x7ffff3858360,</span></span><br><span class="line"><span class="string">    ref = 0x7ffff3858360, ast = 0x7ffff3858360, zv = 0x7ffff3858360, ptr = 0x7ffff3858360, ce = 0x7ffff3858360, func = 0x7ffff3858360, ww = &#123;w1 = 4085613408, w2 = 32767&#125;&#125;, u1 = &#123;type_info = 775, v = &#123;</span></span><br><span class="line"><span class="string">      type = 7 &#x27;\a&#x27;, type_flags = 3 &#x27;\003&#x27;, u = &#123;extra = 0&#125;&#125;&#125;, u2 = &#123;next = 0, cache_slot = 0, opline_num = 0, lineno = 0, num_args = 0, fe_pos = 0, fe_iter_idx = 0, access_flags = 0, property_guard = 0,</span></span><br><span class="line"><span class="string">    constant_flags = 0, extra = 0&#125;&#125;</span></span><br><span class="line"><span class="string">(gdb) p *object_ptr.value.arr</span></span><br><span class="line"><span class="string">$84 = &#123;gc = &#123;refcount = 1, u = &#123;type_info = 7&#125;&#125;, u = &#123;v = &#123;flags = 16 &#x27;\020&#x27;, _unused = 0 &#x27;\000&#x27;, nIteratorsCount = 0 &#x27;\000&#x27;, _unused2 = 0 &#x27;\000&#x27;&#125;, flags = 16&#125;, nTableMask = 4294967280,</span></span><br><span class="line"><span class="string">  arData = 0x7ffff3874340, nNumUsed = 3, nNumOfElements = 3, nTableSize = 8, nInternalPointer = 0, nNextFreeElement = 3, pDestructor = 0x555555a909a5 &lt;zval_ptr_dtor&gt;&#125;</span></span><br><span class="line"><span class="string">(gdb) n</span></span><br><span class="line"><span class="string">40390	try_assign_dim_array:</span></span><br><span class="line"><span class="string">(gdb)</span></span><br><span class="line"><span class="string">40391			SEPARATE_ARRAY(object_ptr);</span></span><br><span class="line"><span class="string">(gdb)</span></span><br><span class="line"><span class="string">40419				dim = RT_CONSTANT(opline, opline-&gt;op2);</span></span><br><span class="line"><span class="string">(gdb)</span></span><br><span class="line"><span class="string">40421					variable_ptr = zend_fetch_dimension_address_inner_W_CONST(Z_ARRVAL_P(object_ptr), dim EXECUTE_DATA_CC);</span></span><br><span class="line"><span class="string">(gdb) p *dim</span></span><br><span class="line"><span class="string">$85 = &#123;value = &#123;lval = 140737278646528, dval = 6.9533454468436333e-310, counted = 0x7ffff3801900, str = 0x7ffff3801900, arr = 0x7ffff3801900, obj = 0x7ffff3801900, res = 0x7ffff3801900,</span></span><br><span class="line"><span class="string">    ref = 0x7ffff3801900, ast = 0x7ffff3801900, zv = 0x7ffff3801900, ptr = 0x7ffff3801900, ce = 0x7ffff3801900, func = 0x7ffff3801900, ww = &#123;w1 = 4085258496, w2 = 32767&#125;&#125;, u1 = &#123;type_info = 6, v = &#123;</span></span><br><span class="line"><span class="string">      type = 6 &#x27;\006&#x27;, type_flags = 0 &#x27;\000&#x27;, u = &#123;extra = 0&#125;&#125;&#125;, u2 = &#123;next = 0, cache_slot = 0, opline_num = 0, lineno = 0, num_args = 0, fe_pos = 0, fe_iter_idx = 0, access_flags = 0, property_guard = 0,</span></span><br><span class="line"><span class="string">    constant_flags = 0, extra = 0&#125;&#125;</span></span><br><span class="line"><span class="string">(gdb) n</span></span><br><span class="line"><span class="string">40425				if (UNEXPECTED(variable_ptr == NULL)) &#123;</span></span><br><span class="line"><span class="string">(gdb) p *variable_ptr</span></span><br><span class="line"><span class="string">$86 = &#123;value = &#123;lval = 0, dval = 0, counted = 0x0, str = 0x0, arr = 0x0, obj = 0x0, res = 0x0, ref = 0x0, ast = 0x0, zv = 0x0, ptr = 0x0, ce = 0x0, func = 0x0, ww = &#123;w1 = 0, w2 = 0&#125;&#125;, u1 = &#123;type_info = 1,</span></span><br><span class="line"><span class="string">    v = &#123;type = 1 &#x27;\001&#x27;, type_flags = 0 &#x27;\000&#x27;, u = &#123;extra = 0&#125;&#125;&#125;, u2 = &#123;next = 1, cache_slot = 1, opline_num = 1, lineno = 1, num_args = 1, fe_pos = 1, fe_iter_idx = 1, access_flags = 1,</span></span><br><span class="line"><span class="string">    property_guard = 1, constant_flags = 1, extra = 1&#125;&#125;</span></span><br><span class="line"><span class="string">(gdb) n</span></span><br><span class="line"><span class="string">40428				value = RT_CONSTANT((opline+1), (opline+1)-&gt;op1);</span></span><br><span class="line"><span class="string">(gdb)</span></span><br><span class="line"><span class="string">40429				value = zend_assign_to_variable(variable_ptr, value, IS_CONST, EX_USES_STRICT_TYPES());</span></span><br><span class="line"><span class="string">(gdb)</span></span><br><span class="line"><span class="string">40431			if (UNEXPECTED(RETURN_VALUE_USED(opline))) &#123;</span></span><br><span class="line"><span class="string">(gdb) p *value</span></span><br><span class="line"><span class="string">$87 = &#123;value = &#123;lval = 140737278646592, dval = 6.9533454468467953e-310, counted = 0x7ffff3801940, str = 0x7ffff3801940, arr = 0x7ffff3801940, obj = 0x7ffff3801940, res = 0x7ffff3801940,</span></span><br><span class="line"><span class="string">    ref = 0x7ffff3801940, ast = 0x7ffff3801940, zv = 0x7ffff3801940, ptr = 0x7ffff3801940, ce = 0x7ffff3801940, func = 0x7ffff3801940, ww = &#123;w1 = 4085258560, w2 = 32767&#125;&#125;, u1 = &#123;type_info = 6, v = &#123;</span></span><br><span class="line"><span class="string">      type = 6 &#x27;\006&#x27;, type_flags = 0 &#x27;\000&#x27;, u = &#123;extra = 0&#125;&#125;&#125;, u2 = &#123;next = 1, cache_slot = 1, opline_num = 1, lineno = 1, num_args = 1, fe_pos = 1, fe_iter_idx = 1, access_flags = 1, property_guard = 1,</span></span><br><span class="line"><span class="string">    constant_flags = 1, extra = 1&#125;&#125;</span></span><br><span class="line"><span class="string">(gdb) p value</span></span><br><span class="line"><span class="string">$88 = (zval *) 0x7ffff38743a0</span></span><br><span class="line"><span class="string">(gdb) n</span></span><br><span class="line"><span class="string">40487		ZEND_VM_NEXT_OPCODE_EX(1, 2);</span></span><br><span class="line"><span class="string">(gdb)</span></span><br><span class="line"><span class="string">40488	&#125;</span></span><br><span class="line"><span class="string">(gdb)</span></span><br><span class="line"><span class="string">execute_ex (ex=0x7ffff3814020) at /vagrant/php-8.0.10/Zend/zend_vm_execute.h:57707</span></span><br><span class="line"><span class="string">57707					HYBRID_BREAK();</span></span><br><span class="line"><span class="string">(gdb)</span></span><br><span class="line"><span class="string">57642					ZEND_FETCH_DIM_R_SPEC_CV_CONST_HANDLER(ZEND_OPCODE_HANDLER_ARGS_PASSTHRU);</span></span><br><span class="line"><span class="string">(gdb) s</span></span><br><span class="line"><span class="string">ZEND_FETCH_DIM_R_SPEC_CV_CONST_HANDLER () at /vagrant/php-8.0.10/Zend/zend_vm_execute.h:39426</span></span><br><span class="line"><span class="string">39426		SAVE_OPLINE();</span></span><br><span class="line"><span class="string">(gdb) n</span></span><br><span class="line"><span class="string">39427		container = EX_VAR(opline-&gt;op1.var);</span></span><br><span class="line"><span class="string">(gdb)</span></span><br><span class="line"><span class="string">39428		dim = RT_CONSTANT(opline, opline-&gt;op2);</span></span><br><span class="line"><span class="string">(gdb) p container</span></span><br><span class="line"><span class="string">$89 = (zval *) 0x7ffff3814070</span></span><br><span class="line"><span class="string">(gdb) p *container</span></span><br><span class="line"><span class="string">$90 = &#123;value = &#123;lval = 140737279001440, dval = 6.9533454643786159e-310, counted = 0x7ffff3858360, str = 0x7ffff3858360, arr = 0x7ffff3858360, obj = 0x7ffff3858360, res = 0x7ffff3858360,</span></span><br><span class="line"><span class="string">    ref = 0x7ffff3858360, ast = 0x7ffff3858360, zv = 0x7ffff3858360, ptr = 0x7ffff3858360, ce = 0x7ffff3858360, func = 0x7ffff3858360, ww = &#123;w1 = 4085613408, w2 = 32767&#125;&#125;, u1 = &#123;type_info = 775, v = &#123;</span></span><br><span class="line"><span class="string">      type = 7 &#x27;\a&#x27;, type_flags = 3 &#x27;\003&#x27;, u = &#123;extra = 0&#125;&#125;&#125;, u2 = &#123;next = 0, cache_slot = 0, opline_num = 0, lineno = 0, num_args = 0, fe_pos = 0, fe_iter_idx = 0, access_flags = 0, property_guard = 0,</span></span><br><span class="line"><span class="string">    constant_flags = 0, extra = 0&#125;&#125;</span></span><br><span class="line"><span class="string">(gdb) p dim</span></span><br><span class="line"><span class="string">$91 = (zval *) 0x7ffff3858360</span></span><br><span class="line"><span class="string">(gdb) p *dim</span></span><br><span class="line"><span class="string">$92 = &#123;value = &#123;lval = 30064771073, dval = 1.4853970537250972e-313, counted = 0x700000001, str = 0x700000001, arr = 0x700000001, obj = 0x700000001, res = 0x700000001, ref = 0x700000001, ast = 0x700000001,</span></span><br><span class="line"><span class="string">    zv = 0x700000001, ptr = 0x700000001, ce = 0x700000001, func = 0x700000001, ww = &#123;w1 = 1, w2 = 7&#125;&#125;, u1 = &#123;type_info = 16, v = &#123;type = 16 &#x27;\020&#x27;, type_flags = 0 &#x27;\000&#x27;, u = &#123;extra = 0&#125;&#125;&#125;, u2 = &#123;</span></span><br><span class="line"><span class="string">    next = 4294967280, cache_slot = 4294967280, opline_num = 4294967280, lineno = 4294967280, num_args = 4294967280, fe_pos = 4294967280, fe_iter_idx = 4294967280, access_flags = 4294967280,</span></span><br><span class="line"><span class="string">    property_guard = 4294967280, constant_flags = 4294967280, extra = 4294967280&#125;&#125;</span></span><br><span class="line"><span class="string">(gdb) p *dim.value.str</span></span><br><span class="line"><span class="string">Cannot access memory at address 0x700000001</span></span><br><span class="line"><span class="string">(gdb) p *dim.value.str.val@2</span></span><br><span class="line"><span class="string">Cannot access memory at address 0x700000019</span></span><br><span class="line"><span class="string">(gdb)</span></span><br><span class="line"><span class="string">Cannot access memory at address 0x700000019</span></span><br><span class="line"><span class="string">(gdb) n</span></span><br><span class="line"><span class="string">39430			if (EXPECTED(Z_TYPE_P(container) == IS_ARRAY)) &#123;</span></span><br><span class="line"><span class="string">(gdb) p dim</span></span><br><span class="line"><span class="string">$93 = (zval *) 0x7ffff3877260</span></span><br><span class="line"><span class="string">(gdb) p *dim</span></span><br><span class="line"><span class="string">$94 = &#123;value = &#123;lval = 140737278646400, dval = 6.9533454468373092e-310, counted = 0x7ffff3801880, str = 0x7ffff3801880, arr = 0x7ffff3801880, obj = 0x7ffff3801880, res = 0x7ffff3801880,</span></span><br><span class="line"><span class="string">    ref = 0x7ffff3801880, ast = 0x7ffff3801880, zv = 0x7ffff3801880, ptr = 0x7ffff3801880, ce = 0x7ffff3801880, func = 0x7ffff3801880, ww = &#123;w1 = 4085258368, w2 = 32767&#125;&#125;, u1 = &#123;type_info = 6, v = &#123;</span></span><br><span class="line"><span class="string">      type = 6 &#x27;\006&#x27;, type_flags = 0 &#x27;\000&#x27;, u = &#123;extra = 0&#125;&#125;&#125;, u2 = &#123;next = 0, cache_slot = 0, opline_num = 0, lineno = 0, num_args = 0, fe_pos = 0, fe_iter_idx = 0, access_flags = 0, property_guard = 0,</span></span><br><span class="line"><span class="string">    constant_flags = 0, extra = 0&#125;&#125;</span></span><br><span class="line"><span class="string">(gdb) p *dim.value</span></span><br><span class="line"><span class="string">Attempt to take contents of a non-pointer value.</span></span><br><span class="line"><span class="string">(gdb) p *dim.value.str</span></span><br><span class="line"><span class="string">$95 = &#123;gc = &#123;refcount = 1, u = &#123;type_info = 86&#125;&#125;, h = 9223372036860639297, len = 2, val = &quot;k&quot;&#125;</span></span><br><span class="line"><span class="string">(gdb) p *dim.value.str.val@2</span></span><br><span class="line"><span class="string">$96 = &quot;k1&quot;</span></span><br><span class="line"><span class="string">(gdb) n</span></span><br><span class="line"><span class="string">39431	fetch_dim_r_array:</span></span><br><span class="line"><span class="string">(gdb)</span></span><br><span class="line"><span class="string">39432				value = zend_fetch_dimension_address_inner(Z_ARRVAL_P(container), dim, IS_CONST, BP_VAR_R EXECUTE_DATA_CC);</span></span><br><span class="line"><span class="string">(gdb)</span></span><br><span class="line"><span class="string">39433				ZVAL_COPY_DEREF(EX_VAR(opline-&gt;result.var), value);</span></span><br><span class="line"><span class="string">(gdb) p value</span></span><br><span class="line"><span class="string">$97 = (zval *) 0x7ffff3874380</span></span><br><span class="line"><span class="string">(gdb) p *value</span></span><br><span class="line"><span class="string">$98 = &#123;value = &#123;lval = 140737278646464, dval = 6.9533454468404712e-310, counted = 0x7ffff38018c0, str = 0x7ffff38018c0, arr = 0x7ffff38018c0, obj = 0x7ffff38018c0, res = 0x7ffff38018c0,</span></span><br><span class="line"><span class="string">    ref = 0x7ffff38018c0, ast = 0x7ffff38018c0, zv = 0x7ffff38018c0, ptr = 0x7ffff38018c0, ce = 0x7ffff38018c0, func = 0x7ffff38018c0, ww = &#123;w1 = 4085258432, w2 = 32767&#125;&#125;, u1 = &#123;type_info = 6, v = &#123;</span></span><br><span class="line"><span class="string">      type = 6 &#x27;\006&#x27;, type_flags = 0 &#x27;\000&#x27;, u = &#123;extra = 0&#125;&#125;&#125;, u2 = &#123;next = 0, cache_slot = 0, opline_num = 0, lineno = 0, num_args = 0, fe_pos = 0, fe_iter_idx = 0, access_flags = 0, property_guard = 0,</span></span><br><span class="line"><span class="string">    constant_flags = 0, extra = 0&#125;&#125;</span></span><br><span class="line"><span class="string">(gdb) p *value.value.str</span></span><br><span class="line"><span class="string">$99 = &#123;gc = &#123;refcount = 1, u = &#123;type_info = 86&#125;&#125;, h = 9223372036860639660, len = 2, val = &quot;v&quot;&#125;</span></span><br><span class="line"><span class="string">(gdb) p *value.value.str.val@2</span></span><br><span class="line"><span class="string">$100 = &quot;v1&quot;</span></span><br><span class="line"><span class="string">(gdb) n</span></span><br><span class="line"><span class="string">39453		ZEND_VM_NEXT_OPCODE_CHECK_EXCEPTION();</span></span><br><span class="line"><span class="string">(gdb) n</span></span><br><span class="line"><span class="string">39454	&#125;</span></span><br><span class="line"><span class="string">(gdb)</span></span><br><span class="line"><span class="string">execute_ex (ex=0x7ffff3814020) at /vagrant/php-8.0.10/Zend/zend_vm_execute.h:57643</span></span><br><span class="line"><span class="string">57643					HYBRID_BREAK();</span></span><br><span class="line"><span class="string">(gdb)</span></span><br><span class="line"><span class="string">55595					ZEND_ECHO_SPEC_TMPVAR_HANDLER(ZEND_OPCODE_HANDLER_ARGS_PASSTHRU);</span></span><br><span class="line"><span class="string">(gdb) s</span></span><br><span class="line"><span class="string">ZEND_ECHO_SPEC_TMPVAR_HANDLER () at /vagrant/php-8.0.10/Zend/zend_vm_execute.h:13883</span></span><br><span class="line"><span class="string">13883		SAVE_OPLINE();</span></span><br><span class="line"><span class="string">(gdb) n</span></span><br><span class="line"><span class="string">13884		z = _get_zval_ptr_var(opline-&gt;op1.var EXECUTE_DATA_CC);</span></span><br><span class="line"><span class="string">(gdb)</span></span><br><span class="line"><span class="string">13886		if (Z_TYPE_P(z) == IS_STRING) &#123;</span></span><br><span class="line"><span class="string">(gdb) p z</span></span><br><span class="line"><span class="string">$101 = (zval *) 0x7ffff38140d0</span></span><br><span class="line"><span class="string">(gdb) p *z</span></span><br><span class="line"><span class="string">$102 = &#123;value = &#123;lval = 140737278646464, dval = 6.9533454468404712e-310, counted = 0x7ffff38018c0, str = 0x7ffff38018c0, arr = 0x7ffff38018c0, obj = 0x7ffff38018c0, res = 0x7ffff38018c0,</span></span><br><span class="line"><span class="string">    ref = 0x7ffff38018c0, ast = 0x7ffff38018c0, zv = 0x7ffff38018c0, ptr = 0x7ffff38018c0, ce = 0x7ffff38018c0, func = 0x7ffff38018c0, ww = &#123;w1 = 4085258432, w2 = 32767&#125;&#125;, u1 = &#123;type_info = 6, v = &#123;</span></span><br><span class="line"><span class="string">      type = 6 &#x27;\006&#x27;, type_flags = 0 &#x27;\000&#x27;, u = &#123;extra = 0&#125;&#125;&#125;, u2 = &#123;next = 0, cache_slot = 0, opline_num = 0, lineno = 0, num_args = 0, fe_pos = 0, fe_iter_idx = 0, access_flags = 0, property_guard = 0,</span></span><br><span class="line"><span class="string">    constant_flags = 0, extra = 0&#125;&#125;</span></span><br><span class="line"><span class="string">(gdb) p *z.value.arr</span></span><br><span class="line"><span class="string">$103 = &#123;gc = &#123;refcount = 1, u = &#123;type_info = 86&#125;&#125;, u = &#123;v = &#123;flags = 172 &#x27;\254&#x27;, _unused = 121 &#x27;y&#x27;, nIteratorsCount = 89 &#x27;Y&#x27;, _unused2 = 0 &#x27;\000&#x27;&#125;, flags = 5863852&#125;, nTableMask = 2147483648, arData = 0x2,</span></span><br><span class="line"><span class="string">  nNumUsed = 12662, nNumOfElements = 0, nTableSize = 32, nInternalPointer = 0, nNextFreeElement = 93825006918352, pDestructor = 0x0&#125;</span></span><br><span class="line"><span class="string">(gdb) n</span></span><br><span class="line"><span class="string">13887			zend_string *str = Z_STR_P(z);</span></span><br><span class="line"><span class="string">(gdb)</span></span><br><span class="line"><span class="string">13889			if (ZSTR_LEN(str) != 0) &#123;</span></span><br><span class="line"><span class="string">(gdb)</span></span><br><span class="line"><span class="string">13890				zend_write(ZSTR_VAL(str), ZSTR_LEN(str));</span></span><br><span class="line"><span class="string">(gdb)</span></span><br><span class="line"><span class="string">v113903		zval_ptr_dtor_nogc(EX_VAR(opline-&gt;op1.var));</span></span><br><span class="line"><span class="string">(gdb)</span></span><br><span class="line"><span class="string">13904		ZEND_VM_NEXT_OPCODE_CHECK_EXCEPTION();</span></span><br><span class="line"><span class="string">(gdb)</span></span><br><span class="line"><span class="string">13905	&#125;</span></span><br><span class="line"><span class="string">(gdb) p z</span></span><br><span class="line"><span class="string">$104 = (zval *) 0x7ffff38140d0</span></span><br><span class="line"><span class="string">(gdb) p *z</span></span><br><span class="line"><span class="string">$105 = &#123;value = &#123;lval = 140737278646464, dval = 6.9533454468404712e-310, counted = 0x7ffff38018c0, str = 0x7ffff38018c0, arr = 0x7ffff38018c0, obj = 0x7ffff38018c0, res = 0x7ffff38018c0,</span></span><br><span class="line"><span class="string">    ref = 0x7ffff38018c0, ast = 0x7ffff38018c0, zv = 0x7ffff38018c0, ptr = 0x7ffff38018c0, ce = 0x7ffff38018c0, func = 0x7ffff38018c0, ww = &#123;w1 = 4085258432, w2 = 32767&#125;&#125;, u1 = &#123;type_info = 6, v = &#123;</span></span><br><span class="line"><span class="string">      type = 6 &#x27;\006&#x27;, type_flags = 0 &#x27;\000&#x27;, u = &#123;extra = 0&#125;&#125;&#125;, u2 = &#123;next = 0, cache_slot = 0, opline_num = 0, lineno = 0, num_args = 0, fe_pos = 0, fe_iter_idx = 0, access_flags = 0, property_guard = 0,</span></span><br><span class="line"><span class="string">    constant_flags = 0, extra = 0&#125;&#125;</span></span><br><span class="line"><span class="string">(gdb) p *z.value.arr</span></span><br><span class="line"><span class="string">$106 = &#123;gc = &#123;refcount = 1, u = &#123;type_info = 86&#125;&#125;, u = &#123;v = &#123;flags = 172 &#x27;\254&#x27;, _unused = 121 &#x27;y&#x27;, nIteratorsCount = 89 &#x27;Y&#x27;, _unused2 = 0 &#x27;\000&#x27;&#125;, flags = 5863852&#125;, nTableMask = 2147483648, arData = 0x2,</span></span><br><span class="line"><span class="string">  nNumUsed = 12662, nNumOfElements = 0, nTableSize = 32, nInternalPointer = 0, nNextFreeElement = 93825006918352, pDestructor = 0x0&#125;</span></span><br><span class="line"><span class="string">(gdb) n</span></span><br><span class="line"><span class="string">execute_ex (ex=0x7ffff3814020) at /vagrant/php-8.0.10/Zend/zend_vm_execute.h:55596</span></span><br><span class="line"><span class="string">55596					HYBRID_BREAK();</span></span><br><span class="line"><span class="string">(gdb)</span></span><br><span class="line"><span class="string">57706					ZEND_ASSIGN_DIM_SPEC_CV_CONST_OP_DATA_CONST_HANDLER(ZEND_OPCODE_HANDLER_ARGS_PASSTHRU);</span></span><br><span class="line"><span class="string">(gdb) s</span></span><br><span class="line"><span class="string">ZEND_ASSIGN_DIM_SPEC_CV_CONST_OP_DATA_CONST_HANDLER () at /vagrant/php-8.0.10/Zend/zend_vm_execute.h:40386</span></span><br><span class="line"><span class="string">40386		SAVE_OPLINE();</span></span><br><span class="line"><span class="string">(gdb) n</span></span><br><span class="line"><span class="string">40387		orig_object_ptr = object_ptr = EX_VAR(opline-&gt;op1.var);</span></span><br><span class="line"><span class="string">(gdb)</span></span><br><span class="line"><span class="string">40389		if (EXPECTED(Z_TYPE_P(object_ptr) == IS_ARRAY)) &#123;</span></span><br><span class="line"><span class="string">(gdb) p object_ptr</span></span><br><span class="line"><span class="string">$107 = (zval *) 0x7ffff3814070</span></span><br><span class="line"><span class="string">(gdb) p *object_ptr</span></span><br><span class="line"><span class="string">$108 = &#123;value = &#123;lval = 140737279001440, dval = 6.9533454643786159e-310, counted = 0x7ffff3858360, str = 0x7ffff3858360, arr = 0x7ffff3858360, obj = 0x7ffff3858360, res = 0x7ffff3858360,</span></span><br><span class="line"><span class="string">    ref = 0x7ffff3858360, ast = 0x7ffff3858360, zv = 0x7ffff3858360, ptr = 0x7ffff3858360, ce = 0x7ffff3858360, func = 0x7ffff3858360, ww = &#123;w1 = 4085613408, w2 = 32767&#125;&#125;, u1 = &#123;type_info = 775, v = &#123;</span></span><br><span class="line"><span class="string">      type = 7 &#x27;\a&#x27;, type_flags = 3 &#x27;\003&#x27;, u = &#123;extra = 0&#125;&#125;&#125;, u2 = &#123;next = 0, cache_slot = 0, opline_num = 0, lineno = 0, num_args = 0, fe_pos = 0, fe_iter_idx = 0, access_flags = 0, property_guard = 0,</span></span><br><span class="line"><span class="string">    constant_flags = 0, extra = 0&#125;&#125;</span></span><br><span class="line"><span class="string">(gdb) p *object_ptr.value.arr</span></span><br><span class="line"><span class="string">$109 = &#123;gc = &#123;refcount = 1, u = &#123;type_info = 7&#125;&#125;, u = &#123;v = &#123;flags = 16 &#x27;\020&#x27;, _unused = 0 &#x27;\000&#x27;, nIteratorsCount = 0 &#x27;\000&#x27;, _unused2 = 0 &#x27;\000&#x27;&#125;, flags = 16&#125;, nTableMask = 4294967280,</span></span><br><span class="line"><span class="string">  arData = 0x7ffff3874340, nNumUsed = 4, nNumOfElements = 4, nTableSize = 8, nInternalPointer = 0, nNextFreeElement = 3, pDestructor = 0x555555a909a5 &lt;zval_ptr_dtor&gt;&#125;</span></span><br><span class="line"><span class="string">(gdb) n</span></span><br><span class="line"><span class="string">40390	try_assign_dim_array:</span></span><br><span class="line"><span class="string">(gdb)</span></span><br><span class="line"><span class="string">40391			SEPARATE_ARRAY(object_ptr);</span></span><br><span class="line"><span class="string">(gdb)</span></span><br><span class="line"><span class="string">40419				dim = RT_CONSTANT(opline, opline-&gt;op2);</span></span><br><span class="line"><span class="string">(gdb)</span></span><br><span class="line"><span class="string">40421					variable_ptr = zend_fetch_dimension_address_inner_W_CONST(Z_ARRVAL_P(object_ptr), dim EXECUTE_DATA_CC);</span></span><br><span class="line"><span class="string">(gdb) p dim</span></span><br><span class="line"><span class="string">$110 = (zval *) 0x7ffff3877270</span></span><br><span class="line"><span class="string">(gdb) p *dim</span></span><br><span class="line"><span class="string">$111 = &#123;value = &#123;lval = 140737278646400, dval = 6.9533454468373092e-310, counted = 0x7ffff3801880, str = 0x7ffff3801880, arr = 0x7ffff3801880, obj = 0x7ffff3801880, res = 0x7ffff3801880,</span></span><br><span class="line"><span class="string">    ref = 0x7ffff3801880, ast = 0x7ffff3801880, zv = 0x7ffff3801880, ptr = 0x7ffff3801880, ce = 0x7ffff3801880, func = 0x7ffff3801880, ww = &#123;w1 = 4085258368, w2 = 32767&#125;&#125;, u1 = &#123;type_info = 6, v = &#123;</span></span><br><span class="line"><span class="string">      type = 6 &#x27;\006&#x27;, type_flags = 0 &#x27;\000&#x27;, u = &#123;extra = 0&#125;&#125;&#125;, u2 = &#123;next = 0, cache_slot = 0, opline_num = 0, lineno = 0, num_args = 0, fe_pos = 0, fe_iter_idx = 0, access_flags = 0, property_guard = 0,</span></span><br><span class="line"><span class="string">    constant_flags = 0, extra = 0&#125;&#125;</span></span><br><span class="line"><span class="string">(gdb) p *dim.value.str</span></span><br><span class="line"><span class="string">$112 = &#123;gc = &#123;refcount = 1, u = &#123;type_info = 86&#125;&#125;, h = 9223372036860639297, len = 2, val = &quot;k&quot;&#125;</span></span><br><span class="line"><span class="string">(gdb) p *dim.value.str.val@2</span></span><br><span class="line"><span class="string">$113 = &quot;k1&quot;</span></span><br><span class="line"><span class="string">(gdb) n</span></span><br><span class="line"><span class="string">40425				if (UNEXPECTED(variable_ptr == NULL)) &#123;</span></span><br><span class="line"><span class="string">(gdb) p object_ptr</span></span><br><span class="line"><span class="string">$114 = (zval *) 0x7ffff3814070</span></span><br><span class="line"><span class="string">(gdb) p *object_ptr</span></span><br><span class="line"><span class="string">$115 = &#123;value = &#123;lval = 140737279001440, dval = 6.9533454643786159e-310, counted = 0x7ffff3858360, str = 0x7ffff3858360, arr = 0x7ffff3858360, obj = 0x7ffff3858360, res = 0x7ffff3858360,</span></span><br><span class="line"><span class="string">    ref = 0x7ffff3858360, ast = 0x7ffff3858360, zv = 0x7ffff3858360, ptr = 0x7ffff3858360, ce = 0x7ffff3858360, func = 0x7ffff3858360, ww = &#123;w1 = 4085613408, w2 = 32767&#125;&#125;, u1 = &#123;type_info = 775, v = &#123;</span></span><br><span class="line"><span class="string">      type = 7 &#x27;\a&#x27;, type_flags = 3 &#x27;\003&#x27;, u = &#123;extra = 0&#125;&#125;&#125;, u2 = &#123;next = 0, cache_slot = 0, opline_num = 0, lineno = 0, num_args = 0, fe_pos = 0, fe_iter_idx = 0, access_flags = 0, property_guard = 0,</span></span><br><span class="line"><span class="string">    constant_flags = 0, extra = 0&#125;&#125;</span></span><br><span class="line"><span class="string">(gdb) p *object_ptr.value.str</span></span><br><span class="line"><span class="string">$116 = &#123;gc = &#123;refcount = 1, u = &#123;type_info = 7&#125;&#125;, h = 18446744004990074896, len = 140737279116096, val = &quot;\004&quot;&#125;</span></span><br><span class="line"><span class="string">(gdb) p *object_ptr.value.str.val@2</span></span><br><span class="line"><span class="string">$117 = &quot;\004&quot;</span></span><br><span class="line"><span class="string">(gdb) n</span></span><br><span class="line"><span class="string">40428				value = RT_CONSTANT((opline+1), (opline+1)-&gt;op1);</span></span><br><span class="line"><span class="string">(gdb)</span></span><br><span class="line"><span class="string">40429				value = zend_assign_to_variable(variable_ptr, value, IS_CONST, EX_USES_STRICT_TYPES());</span></span><br><span class="line"><span class="string">(gdb) p *value</span></span><br><span class="line"><span class="string">$118 = &#123;value = &#123;lval = 93825011376368, dval = 4.635571484172756e-310, counted = 0x5555567960f0, str = 0x5555567960f0, arr = 0x5555567960f0, obj = 0x5555567960f0, res = 0x5555567960f0, ref = 0x5555567960f0,</span></span><br><span class="line"><span class="string">    ast = 0x5555567960f0, zv = 0x5555567960f0, ptr = 0x5555567960f0, ce = 0x5555567960f0, func = 0x5555567960f0, ww = &#123;w1 = 1450795248, w2 = 21845&#125;&#125;, u1 = &#123;type_info = 6, v = &#123;type = 6 &#x27;\006&#x27;,</span></span><br><span class="line"><span class="string">      type_flags = 0 &#x27;\000&#x27;, u = &#123;extra = 0&#125;&#125;&#125;, u2 = &#123;next = 0, cache_slot = 0, opline_num = 0, lineno = 0, num_args = 0, fe_pos = 0, fe_iter_idx = 0, access_flags = 0, property_guard = 0,</span></span><br><span class="line"><span class="string">    constant_flags = 0, extra = 0&#125;&#125;</span></span><br><span class="line"><span class="string">(gdb) p *value.value.str</span></span><br><span class="line"><span class="string">$119 = &#123;gc = &#123;refcount = 1, u = &#123;type_info = 470&#125;&#125;, h = 9223372036854953480, len = 1, val = &quot;c&quot;&#125;</span></span><br><span class="line"><span class="string">(gdb) p *value.value.str.val@1</span></span><br><span class="line"><span class="string">$120 = &quot;c&quot;</span></span><br><span class="line"><span class="string">(gdb) n</span></span><br><span class="line"><span class="string">40431			if (UNEXPECTED(RETURN_VALUE_USED(opline))) &#123;</span></span><br><span class="line"><span class="string">(gdb)</span></span><br><span class="line"><span class="string">40487		ZEND_VM_NEXT_OPCODE_EX(1, 2);</span></span><br><span class="line"><span class="string">(gdb) p *(HashTable*)0x7ffff3858360</span></span><br><span class="line"><span class="string">$121 = &#123;gc = &#123;refcount = 1, u = &#123;type_info = 7&#125;&#125;, u = &#123;v = &#123;flags = 16 &#x27;\020&#x27;, _unused = 0 &#x27;\000&#x27;, nIteratorsCount = 0 &#x27;\000&#x27;, _unused2 = 0 &#x27;\000&#x27;&#125;, flags = 16&#125;, nTableMask = 4294967280,</span></span><br><span class="line"><span class="string">  arData = 0x7ffff3874340, nNumUsed = 4, nNumOfElements = 4, nTableSize = 8, nInternalPointer = 0, nNextFreeElement = 3, pDestructor = 0x555555a909a5 &lt;zval_ptr_dtor&gt;&#125;</span></span><br><span class="line"><span class="string">(gdb) p $121.arData[3]</span></span><br><span class="line"><span class="string">$122 = &#123;val = &#123;value = &#123;lval = 140737278646592, dval = 6.9533454468467953e-310, counted = 0x7ffff3801940, str = 0x7ffff3801940, arr = 0x7ffff3801940, obj = 0x7ffff3801940, res = 0x7ffff3801940,</span></span><br><span class="line"><span class="string">      ref = 0x7ffff3801940, ast = 0x7ffff3801940, zv = 0x7ffff3801940, ptr = 0x7ffff3801940, ce = 0x7ffff3801940, func = 0x7ffff3801940, ww = &#123;w1 = 4085258560, w2 = 32767&#125;&#125;, u1 = &#123;type_info = 6, v = &#123;</span></span><br><span class="line"><span class="string">        type = 6 &#x27;\006&#x27;, type_flags = 0 &#x27;\000&#x27;, u = &#123;extra = 0&#125;&#125;&#125;, u2 = &#123;next = 1, cache_slot = 1, opline_num = 1, lineno = 1, num_args = 1, fe_pos = 1, fe_iter_idx = 1, access_flags = 1,</span></span><br><span class="line"><span class="string">      property_guard = 1, constant_flags = 1, extra = 1&#125;&#125;, h = 9223372036860639298, key = 0x7ffff3801900&#125;</span></span><br><span class="line"><span class="string">(gdb) p $121.arData[3].key</span></span><br><span class="line"><span class="string">$123 = (zend_string *) 0x7ffff3801900</span></span><br><span class="line"><span class="string">(gdb) p *$121.arData[3].key</span></span><br><span class="line"><span class="string">$124 = &#123;gc = &#123;refcount = 1, u = &#123;type_info = 86&#125;&#125;, h = 9223372036860639298, len = 2, val = &quot;k&quot;&#125;</span></span><br><span class="line"><span class="string">(gdb) p *$121.arData[3].key.val@2</span></span><br><span class="line"><span class="string">$125 = &quot;k2&quot;</span></span><br><span class="line"><span class="string">(gdb) p *$121.arData[2].key.val@2</span></span><br><span class="line"><span class="string">$126 = &quot;k1&quot;</span></span><br><span class="line"><span class="string">(gdb) p $121.arData[2]</span></span><br><span class="line"><span class="string">$127 = &#123;val = &#123;value = &#123;lval = 93825011376368, dval = 4.635571484172756e-310, counted = 0x5555567960f0, str = 0x5555567960f0, arr = 0x5555567960f0, obj = 0x5555567960f0, res = 0x5555567960f0,</span></span><br><span class="line"><span class="string">      ref = 0x5555567960f0, ast = 0x5555567960f0, zv = 0x5555567960f0, ptr = 0x5555567960f0, ce = 0x5555567960f0, func = 0x5555567960f0, ww = &#123;w1 = 1450795248, w2 = 21845&#125;&#125;, u1 = &#123;type_info = 6, v = &#123;</span></span><br><span class="line"><span class="string">        type = 6 &#x27;\006&#x27;, type_flags = 0 &#x27;\000&#x27;, u = &#123;extra = 0&#125;&#125;&#125;, u2 = &#123;next = 0, cache_slot = 0, opline_num = 0, lineno = 0, num_args = 0, fe_pos = 0, fe_iter_idx = 0, access_flags = 0,</span></span><br><span class="line"><span class="string">      property_guard = 0, constant_flags = 0, extra = 0&#125;&#125;, h = 9223372036860639297, key = 0x7ffff3801880&#125;</span></span><br><span class="line"><span class="string">(gdb) p $121.arData[2].val.value.str</span></span><br><span class="line"><span class="string">$128 = (zend_string *) 0x5555567960f0</span></span><br><span class="line"><span class="string">(gdb) p *$121.arData[2].val.value.str</span></span><br><span class="line"><span class="string">$129 = &#123;gc = &#123;refcount = 1, u = &#123;type_info = 470&#125;&#125;, h = 9223372036854953480, len = 1, val = &quot;c&quot;&#125;</span></span><br><span class="line"><span class="string">(gdb) p *$121.arData[2].val.value.str.val@1</span></span><br><span class="line"><span class="string">$130 = &quot;c&quot;</span></span><br><span class="line"><span class="string">(gdb) n</span></span><br><span class="line"><span class="string">40488	&#125;</span></span><br><span class="line"><span class="string">(gdb)</span></span><br><span class="line"><span class="string">execute_ex (ex=0x7ffff3814020) at /vagrant/php-8.0.10/Zend/zend_vm_execute.h:57707</span></span><br><span class="line"><span class="string">57707					HYBRID_BREAK();</span></span><br><span class="line"><span class="string">(gdb)</span></span><br><span class="line"><span class="string">57766					ZEND_UNSET_DIM_SPEC_CV_CONST_HANDLER(ZEND_OPCODE_HANDLER_ARGS_PASSTHRU);</span></span><br><span class="line"><span class="string">(gdb) s</span></span><br><span class="line"><span class="string">ZEND_UNSET_DIM_SPEC_CV_CONST_HANDLER () at /vagrant/php-8.0.10/Zend/zend_vm_execute.h:41474</span></span><br><span class="line"><span class="string">41474	&#123;</span></span><br><span class="line"><span class="string">(gdb) n</span></span><br><span class="line"><span class="string">41481		SAVE_OPLINE();</span></span><br><span class="line"><span class="string">(gdb)</span></span><br><span class="line"><span class="string">41482		container = EX_VAR(opline-&gt;op1.var);</span></span><br><span class="line"><span class="string">(gdb)</span></span><br><span class="line"><span class="string">41483		offset = RT_CONSTANT(opline, opline-&gt;op2);</span></span><br><span class="line"><span class="string">(gdb) p container</span></span><br><span class="line"><span class="string">$131 = (zval *) 0x7ffff3814070</span></span><br><span class="line"><span class="string">(gdb) p *container</span></span><br><span class="line"><span class="string">$132 = &#123;value = &#123;lval = 140737279001440, dval = 6.9533454643786159e-310, counted = 0x7ffff3858360, str = 0x7ffff3858360, arr = 0x7ffff3858360, obj = 0x7ffff3858360, res = 0x7ffff3858360,</span></span><br><span class="line"><span class="string">    ref = 0x7ffff3858360, ast = 0x7ffff3858360, zv = 0x7ffff3858360, ptr = 0x7ffff3858360, ce = 0x7ffff3858360, func = 0x7ffff3858360, ww = &#123;w1 = 4085613408, w2 = 32767&#125;&#125;, u1 = &#123;type_info = 775, v = &#123;</span></span><br><span class="line"><span class="string">      type = 7 &#x27;\a&#x27;, type_flags = 3 &#x27;\003&#x27;, u = &#123;extra = 0&#125;&#125;&#125;, u2 = &#123;next = 0, cache_slot = 0, opline_num = 0, lineno = 0, num_args = 0, fe_pos = 0, fe_iter_idx = 0, access_flags = 0, property_guard = 0,</span></span><br><span class="line"><span class="string">    constant_flags = 0, extra = 0&#125;&#125;</span></span><br><span class="line"><span class="string">(gdb) n</span></span><br><span class="line"><span class="string">41486			if (EXPECTED(Z_TYPE_P(container) == IS_ARRAY)) &#123;</span></span><br><span class="line"><span class="string">(gdb)</span></span><br><span class="line"><span class="string">41489	unset_dim_array:</span></span><br><span class="line"><span class="string">(gdb)</span></span><br><span class="line"><span class="string">41490				SEPARATE_ARRAY(container);</span></span><br><span class="line"><span class="string">(gdb)</span></span><br><span class="line"><span class="string">41491				ht = Z_ARRVAL_P(container);</span></span><br><span class="line"><span class="string">(gdb)</span></span><br><span class="line"><span class="string">41493				if (EXPECTED(Z_TYPE_P(offset) == IS_STRING)) &#123;</span></span><br><span class="line"><span class="string">(gdb) p ht</span></span><br><span class="line"><span class="string">$133 = (HashTable *) 0x7ffff3858360</span></span><br><span class="line"><span class="string">(gdb) p *ht</span></span><br><span class="line"><span class="string">$134 = &#123;gc = &#123;refcount = 1, u = &#123;type_info = 7&#125;&#125;, u = &#123;v = &#123;flags = 16 &#x27;\020&#x27;, _unused = 0 &#x27;\000&#x27;, nIteratorsCount = 0 &#x27;\000&#x27;, _unused2 = 0 &#x27;\000&#x27;&#125;, flags = 16&#125;, nTableMask = 4294967280,</span></span><br><span class="line"><span class="string">  arData = 0x7ffff3874340, nNumUsed = 4, nNumOfElements = 4, nTableSize = 8, nInternalPointer = 0, nNextFreeElement = 3, pDestructor = 0x555555a909a5 &lt;zval_ptr_dtor&gt;&#125;</span></span><br><span class="line"><span class="string">(gdb) p offset</span></span><br><span class="line"><span class="string">$135 = (zval *) 0x7ffff3877290</span></span><br><span class="line"><span class="string">(gdb) p *offset</span></span><br><span class="line"><span class="string">$136 = &#123;value = &#123;lval = 140737278646528, dval = 6.9533454468436333e-310, counted = 0x7ffff3801900, str = 0x7ffff3801900, arr = 0x7ffff3801900, obj = 0x7ffff3801900, res = 0x7ffff3801900,</span></span><br><span class="line"><span class="string">    ref = 0x7ffff3801900, ast = 0x7ffff3801900, zv = 0x7ffff3801900, ptr = 0x7ffff3801900, ce = 0x7ffff3801900, func = 0x7ffff3801900, ww = &#123;w1 = 4085258496, w2 = 32767&#125;&#125;, u1 = &#123;type_info = 6, v = &#123;</span></span><br><span class="line"><span class="string">      type = 6 &#x27;\006&#x27;, type_flags = 0 &#x27;\000&#x27;, u = &#123;extra = 0&#125;&#125;&#125;, u2 = &#123;next = 0, cache_slot = 0, opline_num = 0, lineno = 0, num_args = 0, fe_pos = 0, fe_iter_idx = 0, access_flags = 0, property_guard = 0,</span></span><br><span class="line"><span class="string">    constant_flags = 0, extra = 0&#125;&#125;</span></span><br><span class="line"><span class="string">(gdb) p *offset.value.str</span></span><br><span class="line"><span class="string">$137 = &#123;gc = &#123;refcount = 1, u = &#123;type_info = 86&#125;&#125;, h = 9223372036860639298, len = 2, val = &quot;k&quot;&#125;</span></span><br><span class="line"><span class="string">(gdb) p *offset.value.str.val@2</span></span><br><span class="line"><span class="string">$138 = &quot;k2&quot;</span></span><br><span class="line"><span class="string">(gdb) p key</span></span><br><span class="line"><span class="string">$139 = (zend_string *) 0x7ffff3874380</span></span><br><span class="line"><span class="string">(gdb) p *key</span></span><br><span class="line"><span class="string">$140 = &#123;gc = &#123;refcount = 1450795248, u = &#123;type_info = 21845&#125;&#125;, h = 6, len = 9223372036860639297, val = &quot;\200&quot;&#125;</span></span><br><span class="line"><span class="string">(gdb)</span></span><br><span class="line"><span class="string">$141 = &#123;gc = &#123;refcount = 1450795248, u = &#123;type_info = 21845&#125;&#125;, h = 6, len = 9223372036860639297, val = &quot;\200&quot;&#125;</span></span><br><span class="line"><span class="string">(gdb) n</span></span><br><span class="line"><span class="string">41494					key = Z_STR_P(offset);</span></span><br><span class="line"><span class="string">(gdb)</span></span><br><span class="line"><span class="string">41500	str_index_dim:</span></span><br><span class="line"><span class="string">(gdb)</span></span><br><span class="line"><span class="string">41501					if (ht == &amp;EG(symbol_table)) &#123;</span></span><br><span class="line"><span class="string">(gdb) p key</span></span><br><span class="line"><span class="string">$142 = (zend_string *) 0x7ffff3801900</span></span><br><span class="line"><span class="string">(gdb) p *key</span></span><br><span class="line"><span class="string">$143 = &#123;gc = &#123;refcount = 1, u = &#123;type_info = 86&#125;&#125;, h = 9223372036860639298, len = 2, val = &quot;k&quot;&#125;</span></span><br><span class="line"><span class="string">(gdb) p *key.value.str.val@2</span></span><br><span class="line"><span class="string">There is no member named value.</span></span><br><span class="line"><span class="string">(gdb) n</span></span><br><span class="line"><span class="string">41504						zend_hash_del(ht, key);</span></span><br><span class="line"><span class="string">(gdb)</span></span><br><span class="line"><span class="string">41535				break;</span></span><br><span class="line"><span class="string">(gdb) p ht</span></span><br><span class="line"><span class="string">$144 = (HashTable *) 0x7ffff3858360</span></span><br><span class="line"><span class="string">(gdb) p *ht</span></span><br><span class="line"><span class="string">$145 = &#123;gc = &#123;refcount = 1, u = &#123;type_info = 7&#125;&#125;, u = &#123;v = &#123;flags = 16 &#x27;\020&#x27;, _unused = 0 &#x27;\000&#x27;, nIteratorsCount = 0 &#x27;\000&#x27;, _unused2 = 0 &#x27;\000&#x27;&#125;, flags = 16&#125;, nTableMask = 4294967280,</span></span><br><span class="line"><span class="string">  arData = 0x7ffff3874340, nNumUsed = 3, nNumOfElements = 3, nTableSize = 8, nInternalPointer = 0, nNextFreeElement = 3, pDestructor = 0x555555a909a5 &lt;zval_ptr_dtor&gt;&#125;</span></span><br><span class="line"><span class="string">(gdb)</span></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>php</category>
      </categories>
      <tags>
        <tag>php</tag>
      </tags>
  </entry>
  <entry>
    <title>Windows æ‰“é€  PHP å¼€å‘ç¯å¢ƒ</title>
    <url>/2018/10/12/win-wamp/</url>
    <content><![CDATA[<p><img src="/images/2019/201904101011.jpg" alt="201904101011.jpg"></p>
<p>ğŸ¤™åœ¨ Windows ä¸Šå¼€å‘ PHPï¼Œä¸€èˆ¬æƒ…å†µä¸‹æˆ‘ä»¬ä¼šç›´æ¥å®‰è£… <a href="http://phpstudy.php.cn/download.html"><code>PhpStudy</code></a>ã€<a href="http://www.wampserver.com/cn/#download-wrapper"><code>WampServer</code></a> æˆ–è€… <a href="https://www.apachefriends.org/index.html"><code>XAMPP</code></a> ç­‰é›†æˆå¼€å‘ç¯å¢ƒã€‚å½“ç„¶ä½œä¸ºä¸€åæœ‰é€¼æ ¼çš„å¼€å‘è€…ï¼Œæˆ‘ä»¬è¿˜ä¼šè‡ªå·±åŠ¨æ‰‹ä¸°è¡£è¶³é£Ÿï¼Œæ¯•ç«Ÿè¿™ä¸ªé—¨æ§›ä¸é«˜ï¼Œæ­ä¸ä¸Šæ€ä¹ˆèƒ½è¯æ˜ä½ æ˜¯ä¸ªæœ‰èŠ‚æ“çš„ PHPer å‘¢ã€‚</p>
<span id="more"></span>
<blockquote>
<p><code>WAMP</code>ï¼šWindows &amp; Apache &amp; MySQL &amp; PHP ç»„åˆï¼Œå³åœ¨ Windows ä¸‹æ­å»ºçš„ Web è¿è¡Œç¯å¢ƒã€‚åœ¨ä»¥ä¸‹çš„æ“ä½œä¸­ï¼Œæˆ‘é¡ºä¾¿æŠŠ Nginx çš„å®‰è£…é…ç½®ä¹ŸåŠ ä¸Šäº†ï¼ŒWindows ç¯å¢ƒè¿˜æ˜¯æ¯”è¾ƒå»ºè®®ä½¿ç”¨ Apacheï¼Œå‡å°‘ä¸å¿…è¦çš„æŠ˜è…¾ã€‚</p>
</blockquote>
<div class="note danger">
            <p>å‹æƒ…æç¤ºï¼šä»¥ä¸‹æ“ä½œçš†åœ¨æœ¬äºº Win10 32 ä½æ“ä½œç³»ç»Ÿä¸ŠæŠ˜è…¾ï¼Œ64 ä½ç³»ç»Ÿæœªåšå°è¯•ã€‚</p>
          </div>
<h1 id="å…³äº-TS-amp-NTS"><a href="#å…³äº-TS-amp-NTS" class="headerlink" title="å…³äº TS &amp; NTS"></a>å…³äº TS &amp; NTS</h1><ul>
<li><code>TS - Thread-Safety</code>ï¼šå³çº¿ç¨‹å®‰å…¨ï¼Œå¤šçº¿ç¨‹è®¿é—®æ—¶ï¼Œé‡‡ç”¨äº†åŠ é”æœºåˆ¶ï¼Œå½“ä¸€ä¸ªçº¿ç¨‹è®¿é—®è¯¥ç±»çš„æŸä¸ªæ•°æ®æ—¶ï¼Œè¿›è¡Œä¿æŠ¤ï¼Œå…¶ä»–çº¿ç¨‹ä¸èƒ½è¿›è¡Œè®¿é—®ç›´åˆ°è¯¥çº¿ç¨‹è¯»å–å®Œï¼Œå…¶ä»–çº¿ç¨‹æ‰å¯ä½¿ç”¨ã€‚ä¸ä¼šå‡ºç°æ•°æ®ä¸ä¸€è‡´æˆ–è€…æ•°æ®æ±¡æŸ“ã€‚PHP ä»¥ ISAPI æ–¹å¼åŠ è½½çš„æ—¶å€™é€‰æ‹©è¿™ä¸ªç‰ˆæœ¬ï¼›</li>
<li><code>NTS - None-Thread Safe</code>ï¼šå³éçº¿ç¨‹å®‰å…¨ï¼Œå°±æ˜¯ä¸æä¾›æ•°æ®è®¿é—®ä¿æŠ¤ï¼Œæœ‰å¯èƒ½å‡ºç°å¤šä¸ªçº¿ç¨‹å…ˆåæ›´æ”¹æ•°æ®é€ æˆæ‰€å¾—åˆ°çš„æ˜¯è„æ•°æ®ã€‚PHP ä»¥ FastCGI æ–¹å¼è¿è¡Œçš„æ—¶å€™é€‰æ‹©è¿™ä¸ªç‰ˆæœ¬ï¼Œå…·æœ‰æ›´å¥½çš„æ€§èƒ½ï¼›</li>
</ul>
<p>åœ¨ä»¥ä¸‹çš„é…ç½®æ–¹å¼ä¸­ï¼Œç¬”è€…ä½¿ç”¨ PHP-TS &amp; Apacheã€PHP-NTS &amp; Nginx çš„æ–¹å¼æ¥æ­å»ºï¼ŒæŒ‡å®š <code>G:\</code> ä¸ºä»£ç ç›®å½•ã€<code>D:\Wamp</code> ä¸ºè½¯ä»¶å®‰è£…ç›®å½•ï¼Œç›¸å…³çš„é…ç½®æ–‡ä»¶åœ¨å®‰è£…çš„å…·ä½“è½¯ä»¶ç›®å½•ä¸­ã€‚</p>
<h1 id="å…³äº-VC6-amp-VC9-amp-VC11"><a href="#å…³äº-VC6-amp-VC9-amp-VC11" class="headerlink" title="å…³äº VC6 &amp; VC9 &amp; VC11"></a>å…³äº VC6 &amp; VC9 &amp; VC11</h1><ul>
<li><code>VC6</code>ï¼šä½¿ç”¨ Legacy Visual Studio 6 Compiler ç¼–è¯‘å™¨ç¼–è¯‘çš„ï¼›</li>
<li><code>VC9</code>ï¼šä½¿ç”¨ Visual Studio 2008 Compiler ç¼–è¯‘å™¨ç¼–è¯‘çš„ï¼ŒVC9 ç‰ˆæœ¬è¦æ±‚ç”¨æˆ·å®‰è£… <a href="https://www.microsoft.com/en-us/download/details.aspx?id=5582">Microsoft Visual C++ 2008 SP1 Redistributable Package (x86)</a> æˆ–è€… <a href="https://www.microsoft.com/en-us/download/details.aspx?id=15336">Microsoft Visual C++ 2008 Redistributable Package (x64)</a>ï¼›</li>
<li><code>VC11</code>ï¼šä½¿ç”¨ Visual Studio 2012 Compiler ç¼–è¯‘å™¨ç¼–è¯‘çš„ï¼ŒVC11 ç‰ˆæœ¬è¦æ±‚ç”¨æˆ·å®‰è£… <a href="https://www.microsoft.com/en-us/download/details.aspx?id=30679">Visual C++ Redistributable for Visual Studio 2012 Update 4</a>ï¼›</li>
</ul>
<h1 id="Apache"><a href="#Apache" class="headerlink" title="Apache"></a>Apache</h1><h2 id="ä¸‹è½½-Apache"><a href="#ä¸‹è½½-Apache" class="headerlink" title="ä¸‹è½½ Apache"></a>ä¸‹è½½ Apache</h2><p><a href="http://httpd.apache.org/download.cgi#apache24">ä¸‹è½½å®˜æ–¹ Apache</a> æˆ–è€… <a href="https://www.apachelounge.com/download/">ä¸‹è½½ Apache Lounge</a>ï¼Œæ‰¾å¯¹åº”ç‰ˆæœ¬ä¸‹è½½ã€‚</p>
<h2 id="è§£å‹-Apache"><a href="#è§£å‹-Apache" class="headerlink" title="è§£å‹ Apache"></a>è§£å‹ Apache</h2><p>å°† httpd-2.4.35-win32-VC15.zip è§£å‹åˆ° httpd-2.4.35 æ–‡ä»¶å¤¹ä¸‹å¹¶ç§»åŠ¨åˆ° C:\Wamp ç›®å½•ä¸‹ã€‚</p>
<h2 id="é…ç½®-Apache"><a href="#é…ç½®-Apache" class="headerlink" title="é…ç½® Apache"></a>é…ç½® Apache</h2><p>æ‰“å¼€ httpd.conf æ–‡ä»¶ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ä¿®æ”¹æœåŠ¡å™¨æ ¹è·¯å¾„</span></span><br><span class="line">ServerRoot <span class="string">&quot;C:/Wamp/httpd-2.4.35&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ‰“å¼€é‡å†™æ¨¡å—</span></span><br><span class="line">LoadModule rewrite_module modules/mod_rewrite.so</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¿®æ”¹æœåŠ¡å™¨åç§°</span></span><br><span class="line">ServerName 127.0.0.1:80</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ‰“å¼€è·¯å¾„é‡å†™</span></span><br><span class="line">&lt;Directory /&gt;</span><br><span class="line">    AllowOverride All</span><br><span class="line">    Require all denied</span><br><span class="line">&lt;/Directory&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># é…ç½®é¡¹ç›®æ ¹è·¯å¾„å’Œæ‰“å¼€æ ¹è·¯å¾„é‡å†™</span></span><br><span class="line">DocumentRoot <span class="string">&quot;G:/&quot;</span></span><br><span class="line">&lt;Directory <span class="string">&quot;G:/&quot;</span>&gt;</span><br><span class="line">    <span class="comment">#</span></span><br><span class="line">    <span class="comment"># Possible values for the Options directive are &quot;None&quot;, &quot;All&quot;,</span></span><br><span class="line">    <span class="comment"># or any combination of:</span></span><br><span class="line">    <span class="comment">#   Indexes Includes FollowSymLinks SymLinksifOwnerMatch ExecCGI MultiViews</span></span><br><span class="line">    <span class="comment">#</span></span><br><span class="line">    <span class="comment"># Note that &quot;MultiViews&quot; must be named *explicitly* --- &quot;Options All&quot;</span></span><br><span class="line">    <span class="comment"># doesn&#x27;t give it to you.</span></span><br><span class="line">    <span class="comment">#</span></span><br><span class="line">    <span class="comment"># The Options directive is both complicated and important.  Please see</span></span><br><span class="line">    <span class="comment"># http://httpd.apache.org/docs/2.4/mod/core.html#options</span></span><br><span class="line">    <span class="comment"># for more information.</span></span><br><span class="line">    <span class="comment">#</span></span><br><span class="line">    Options Indexes FollowSymLinks</span><br><span class="line"></span><br><span class="line">    <span class="comment">#</span></span><br><span class="line">    <span class="comment"># AllowOverride controls what directives may be placed in .htaccess files.</span></span><br><span class="line">    <span class="comment"># It can be &quot;All&quot;, &quot;None&quot;, or any combination of the keywords:</span></span><br><span class="line">    <span class="comment">#   AllowOverride FileInfo AuthConfig Limit</span></span><br><span class="line">    <span class="comment">#</span></span><br><span class="line">    AllowOverride All</span><br><span class="line"></span><br><span class="line">    <span class="comment">#</span></span><br><span class="line">    <span class="comment"># Controls who can get stuff from this server.</span></span><br><span class="line">    <span class="comment">#</span></span><br><span class="line">    Require all granted</span><br><span class="line">&lt;/Directory&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ·»åŠ é»˜è®¤å¤„ç†æ–‡ä»¶</span></span><br><span class="line">&lt;IfModule dir_module&gt;</span><br><span class="line">    DirectoryIndex index.php index.html</span><br><span class="line">&lt;/IfModule&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¼€å¯è™šæ‹Ÿä¸»æœºæ¨¡å¼</span></span><br><span class="line">Include conf/extratpd-vhosts.conf</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ·»åŠ  Apache å¤„ç† PHP æ‰©å±•å’Œé…ç½®</span></span><br><span class="line">LoadModule php5_module <span class="string">&quot;C:/Wamp/php-7.2.11-ts/php5apache2_4.dll&quot;</span></span><br><span class="line">AddHandler application/x-httpd-php .php</span><br><span class="line">PHPIniDir <span class="string">&quot;C:/Wamp/php-7.2.11-ts&quot;</span></span><br></pre></td></tr></table></figure>
<h1 id="Nginx"><a href="#Nginx" class="headerlink" title="Nginx"></a>Nginx</h1><h2 id="ä¸‹è½½-Nginx"><a href="#ä¸‹è½½-Nginx" class="headerlink" title="ä¸‹è½½ Nginx"></a>ä¸‹è½½ Nginx</h2><p><a href="http://nginx.org/en/download.html">ä¸‹è½½ Nginx</a>ï¼Œæ‰¾å¯¹åº”ç‰ˆæœ¬ä¸‹è½½ã€‚</p>
<h2 id="è§£å‹-Nginx"><a href="#è§£å‹-Nginx" class="headerlink" title="è§£å‹ Nginx"></a>è§£å‹ Nginx</h2><p>å°† nginx-1.15.5.zip è§£å‹åˆ° nginx-1.15.5 æ–‡ä»¶å¤¹ä¸‹å¹¶ç§»åŠ¨åˆ° D:\Wamp ç›®å½•ä¸‹</p>
<h2 id="é…ç½®-Nginx"><a href="#é…ç½®-Nginx" class="headerlink" title="é…ç½® Nginx"></a>é…ç½® Nginx</h2><ul>
<li>ç¼–è¾‘ <code>nginx.conf</code> æ–‡ä»¶ï¼š</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">worker_processes  1;</span><br><span class="line"></span><br><span class="line">events &#123;</span><br><span class="line">    worker_connections  1024;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">http &#123;</span><br><span class="line">    include       mime.types;</span><br><span class="line">    default_type  application/octet-stream;</span><br><span class="line"></span><br><span class="line">    log_format  main  <span class="string">&#x27;$remote_addr - $remote_user [$time_local] &quot;$request&quot; &#x27;</span></span><br><span class="line">                      <span class="string">&#x27;$status $body_bytes_sent &quot;$http_referer&quot; &#x27;</span></span><br><span class="line">                      <span class="string">&#x27;&quot;$http_user_agent&quot; &quot;$http_x_forwarded_for&quot;&#x27;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">#access_log  logs/access.log  main;</span></span><br><span class="line"></span><br><span class="line">    sendfile        on;</span><br><span class="line">    <span class="comment">#tcp_nopush     on;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">#keepalive_timeout  0;</span></span><br><span class="line">    keepalive_timeout  65;</span><br><span class="line"></span><br><span class="line">    fastcgi_connect_timeout       300;</span><br><span class="line">    fastcgi_send_timeout          300;</span><br><span class="line">    fastcgi_read_timeout          300;</span><br><span class="line">    fastcgi_buffer_size           128k;</span><br><span class="line">    fastcgi_buffers               4  128k;</span><br><span class="line">    fastcgi_busy_buffers_size     256k;</span><br><span class="line">    fastcgi_temp_file_write_size  256k;</span><br><span class="line"></span><br><span class="line">    gzip               on;</span><br><span class="line">    gzip_min_length    1k;</span><br><span class="line">    gzip_buffers       4  32k;</span><br><span class="line">    gzip_http_version  1.1;</span><br><span class="line">    gzip_comp_level    2;</span><br><span class="line">    gzip_types         text/plain text/css text/javascrip text/xml application/javascript application/x-javascript application/json application/xml;</span><br><span class="line">    gzip_vary          on;</span><br><span class="line">    gzip_disable       <span class="string">&quot;MSIE [1-6].&quot;</span>;</span><br><span class="line"></span><br><span class="line">    server_names_hash_bucket_size  128;</span><br><span class="line">    client_max_body_size           100m;</span><br><span class="line">    client_header_buffer_size      256k;</span><br><span class="line">    large_client_header_buffers    4  256k;</span><br><span class="line"></span><br><span class="line">    server &#123;</span><br><span class="line">        listen       80;</span><br><span class="line">        server_name  localhost;</span><br><span class="line"></span><br><span class="line">        charset  utf-8;</span><br><span class="line"></span><br><span class="line">        <span class="comment">#access_log  logs/host.access.log  main;</span></span><br><span class="line"></span><br><span class="line">        location / &#123;</span><br><span class="line">            root       G:/;</span><br><span class="line">            autoindex  on;</span><br><span class="line">            index      index.html index.htm index.php;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">#error_page  404              /404.html;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># redirect server error pages to the static page /50x.html</span></span><br><span class="line">        <span class="comment">#</span></span><br><span class="line">        error_page   500 502 503 504  /50x.html;</span><br><span class="line">        location = /50x.html &#123;</span><br><span class="line">            root   html;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment"># proxy the PHP scripts to Apache listening on 127.0.0.1:80</span></span><br><span class="line">        <span class="comment">#</span></span><br><span class="line">        <span class="comment">#location ~ \.php$ &#123;</span></span><br><span class="line">        <span class="comment">#    proxy_pass   http://127.0.0.1;</span></span><br><span class="line">        <span class="comment">#&#125;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># pass the PHP scripts to FastCGI server listening on 127.0.0.1:9000</span></span><br><span class="line">        <span class="comment">#</span></span><br><span class="line">        location ~ \.php$ &#123;</span><br><span class="line">            root                     G:/;</span><br><span class="line">            fastcgi_pass             127.0.0.1:9000;</span><br><span class="line">            fastcgi_index            index.php;</span><br><span class="line">            fastcgi_split_path_info  ^((?U).+\.php)(/?.+)$;</span><br><span class="line">            fastcgi_param            PATH_INFO  <span class="variable">$fastcgi_path_info</span>;</span><br><span class="line">            fastcgi_param            PATH_TRANSLATED  $document_root<span class="variable">$fastcgi_path_info</span>;</span><br><span class="line">            fastcgi_param            SCRIPT_FILENAME  $document_root<span class="variable">$fastcgi_script_name</span>;</span><br><span class="line">            include                  fastcgi.conf;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment"># deny access to .htaccess files, if Apache&#x27;s document root</span></span><br><span class="line">        <span class="comment"># concurs with nginx&#x27;s one</span></span><br><span class="line">        <span class="comment">#</span></span><br><span class="line">        location ~ /\.ht &#123;</span><br><span class="line">            deny  all;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    include  vhosts/*.conf;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>åœ¨ conf ç›®å½•ä¸‹æ–°å»º vhosts ç›®å½•ï¼Œè¿›å…¥è¯¥ç›®å½•ï¼Œæ–°å»º sample.conf æ–‡ä»¶ï¼š</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">    listen  80;</span><br><span class="line">    root    G:/Sample/www.sample.com;</span><br><span class="line"></span><br><span class="line">    server_name              www.sample.com;</span><br><span class="line">    server_name_in_redirect  off;</span><br><span class="line"></span><br><span class="line">    location / &#123;</span><br><span class="line">        autoindex  on;</span><br><span class="line">        index      index.php;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    location ~ \.php$ &#123;</span><br><span class="line">        fastcgi_pass             127.0.0.1:9000;</span><br><span class="line">        fastcgi_index            index.php;</span><br><span class="line">        fastcgi_split_path_info  ^((?U).+\.php)(/?.+)$;</span><br><span class="line">        fastcgi_param            PATH_INFO  <span class="variable">$fastcgi_path_info</span>;</span><br><span class="line">        fastcgi_param            PATH_TRANSLATED  $document_root<span class="variable">$fastcgi_path_info</span>;</span><br><span class="line">        fastcgi_param            SCRIPT_FILENAME  $document_root<span class="variable">$fastcgi_script_name</span>;</span><br><span class="line">        include                  fastcgi.conf;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    location = /favicon.con &#123;</span><br><span class="line">        log_not_found  off;</span><br><span class="line">        access_log     off;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    location ~ /(\.ht|\.git|\.svn) &#123;</span><br><span class="line">        deny  all;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="MySQL"><a href="#MySQL" class="headerlink" title="MySQL"></a>MySQL</h1><blockquote>
<p>è¯¦æƒ…è¯·å‚é˜… <a href="https://dev.mysql.com/doc/refman/8.0/en/windows-install-archive.html">Installing MySQL on Microsoft Windows Using a noinstall ZIP Archive</a> æ–‡æ¡£ã€‚</p>
</blockquote>
<h2 id="ä¸‹è½½-MySQL"><a href="#ä¸‹è½½-MySQL" class="headerlink" title="ä¸‹è½½ MySQL"></a>ä¸‹è½½ MySQL</h2><p><a href="https://dev.mysql.com/downloads/mysql/">ä¸‹è½½ MySQL</a>ï¼Œæ‰¾å¯¹åº”ç‰ˆæœ¬ä¸‹è½½ã€‚</p>
<h2 id="è§£å‹-MySQL"><a href="#è§£å‹-MySQL" class="headerlink" title="è§£å‹ MySQL"></a>è§£å‹ MySQL</h2><p>å°† mysql-8.0.12-winx64.zip è§£å‹åˆ° mysql-8.0.12-winx64.zip æ–‡ä»¶å¤¹ä¸‹å¹¶ç§»åŠ¨åˆ° D:\Wamp ç›®å½•ä¸‹ã€‚</p>
<h2 id="é…ç½®-MySQL"><a href="#é…ç½®-MySQL" class="headerlink" title="é…ç½® MySQL"></a>é…ç½® MySQL</h2><ul>
<li>ç¼–è¾‘ MySQL é…ç½®æ–‡ä»¶ my.iniï¼š</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[client]</span><br><span class="line">port = 3306</span><br><span class="line">default-character-set = utf8mb4</span><br><span class="line"></span><br><span class="line">[mysql]</span><br><span class="line">default-character-set=utf8mb4</span><br><span class="line"></span><br><span class="line">[mysqld]</span><br><span class="line">port = 3306</span><br><span class="line">basedir = D:/Wamp/mysql-8.0.12</span><br><span class="line">datadir = D:/Wamp/mysql-8.0.12/data</span><br><span class="line">socket = D:/Wamp/mysql-8.0.12/tmp/mysql.sock</span><br><span class="line">default_authentication_plugin = mysql_native_password</span><br><span class="line">character_set_server = utf8mb4</span><br><span class="line">default-storage-engine = INNODB</span><br><span class="line">server_id = 1</span><br><span class="line"></span><br><span class="line">max_connections = 100</span><br><span class="line">table_open_cache = 256</span><br><span class="line">query_cache_size = 1M</span><br><span class="line"></span><br><span class="line">[mysqld_safe]</span><br><span class="line">log-error = D:/Wamp/mysql-8.0.12/logs/mysql-error.log</span><br><span class="line">pid-file = D:/Wamp/mysql-8.0.12/run/mysql.pid</span><br><span class="line"></span><br><span class="line">sql_mode=NO_ENGINE_SUBSTITUTION,STRICT_TRANS_TABLES</span><br></pre></td></tr></table></figure>
<ul>
<li>MySQL æ“ä½œï¼š</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// é…ç½®ï¼ˆéœ€è¦åœ¨ç®¡ç†å‘˜å‘½ä»¤è¡Œä¸‹æ“ä½œï¼‰</span><br><span class="line">D:\Wamp\mysql-8.0.12\bin&gt; mysqld --defaults-file=<span class="string">&quot;D:/Wamp/mysql-8.0.12/my.ini&quot;</span> --initialize-insecure --explicit_defaults_for_timestamp=<span class="literal">true</span> --user=mysql --console</span><br><span class="line"></span><br><span class="line">// å®‰è£…æœåŠ¡</span><br><span class="line">D:\Wamp\mysql-8.0.12\bin&gt; mysqld --install mysql --defaults-file=<span class="string">&quot;D:/Wamp/mysql-8.0.12/my.ini&quot;</span></span><br><span class="line"></span><br><span class="line">// å¯åŠ¨æœåŠ¡</span><br><span class="line">D:\Wamp\mysql-8.0.12\bin&gt; net start mysql</span><br><span class="line"></span><br><span class="line">// åœæ­¢æœåŠ¡</span><br><span class="line">D:\Wamp\mysql-8.0.12\bin&gt; net stop mysql</span><br><span class="line"></span><br><span class="line">// ç§»é™¤æœåŠ¡</span><br><span class="line">D:\Wamp\mysql-8.0.12\bin&gt; sc delete mysql</span><br><span class="line">æˆ–è€…</span><br><span class="line">D:\Wamp\mysql-8.0.12\bin&gt; mysqld --remove</span><br></pre></td></tr></table></figure>
<h1 id="PHP"><a href="#PHP" class="headerlink" title="PHP"></a>PHP</h1><h2 id="ä¸‹è½½-PHP"><a href="#ä¸‹è½½-PHP" class="headerlink" title="ä¸‹è½½ PHP"></a>ä¸‹è½½ PHP</h2><p><a href="https://windows.php.net/download/">ä¸‹è½½ PHP</a>ï¼Œæ‰¾å¯¹åº”ç‰ˆæœ¬ä¸‹è½½ã€‚</p>
<h2 id="è§£å‹-PHP"><a href="#è§£å‹-PHP" class="headerlink" title="è§£å‹ PHP"></a>è§£å‹ PHP</h2><blockquote>
<p>æ ¹æ®ä¸Šé¢çš„çº¦å®šï¼Œåœ¨å®‰è£… Apache æ—¶æˆ‘ä»¬å®‰è£… TS ç‰ˆæœ¬çš„ PHPï¼Œå®‰è£… Nginx æ—¶æˆ‘ä»¬å®‰è£… NTS ç‰ˆæœ¬çš„ PHPã€‚</p>
</blockquote>
<ul>
<li>å®‰è£… Apache æƒ…å†µä¸‹ï¼Œå°† php-7.2.11-ts-Win32-VC15-x64.zip è§£å‹åˆ° php-7.2.11-ts æ–‡ä»¶å¤¹ä¸‹å¹¶ç§»åŠ¨åˆ° D:\Wamp ç›®å½•ä¸‹ï¼›</li>
<li>å®‰è£… Nginx æƒ…å†µä¸‹ï¼Œå°† php-7.2.11-nts-Win32-VC15-x64.zip è§£å‹åˆ° php-7.2.11-nts æ–‡ä»¶å¤¹ä¸‹å¹¶ç§»åŠ¨åˆ° D:\Wamp ç›®å½•ä¸‹ï¼›</li>
</ul>
<h2 id="é…ç½®-PHP"><a href="#é…ç½®-PHP" class="headerlink" title="é…ç½® PHP"></a>é…ç½® PHP</h2><blockquote>
<p>ç›¸å…³çš„ PHP æ¨¡å—éœ€è¦é…Œæƒ…å¼€å¯ã€‚</p>
</blockquote>
<p>å°† php.ini-development é‡å‘½åä¸º php.iniã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// è®¾ç½®æ¨¡å—åŠ è½½è·¯å¾„</span><br><span class="line">; Directory <span class="keyword">in</span> <span class="built_in">which</span> the loadable extensions (modules) reside.</span><br><span class="line">; http://php.net/extension-dir</span><br><span class="line">; extension_dir = <span class="string">&quot;./&quot;</span></span><br><span class="line">; On windows:</span><br><span class="line">; extension_dir = <span class="string">&quot;ext&quot;</span></span><br><span class="line"></span><br><span class="line">// æ³¨æ„ Apache ä¸ Nginx çš„ PHP ç›®å½•</span><br><span class="line">extension_dir = <span class="string">&quot;D:/Wamp/php-7.2.11-nts/ext&quot;</span></span><br><span class="line"></span><br><span class="line">// å¼€å¯éœ€è¦çš„æ¨¡å—</span><br><span class="line">extension=php_bz2.dll</span><br><span class="line">extension=php_curl.dll</span><br><span class="line">extension=php_fileinfo.dll</span><br><span class="line">extension=php_gd2.dll</span><br><span class="line">;extension=php_gettext.dll</span><br><span class="line">;extension=php_gmp.dll</span><br><span class="line">extension=php_intl.dll</span><br><span class="line">;extension=php_imap.dll</span><br><span class="line">;extension=php_interbase.dll</span><br><span class="line">;extension=php_ldap.dll</span><br><span class="line">extension=php_mbstring.dll</span><br><span class="line">extension=php_exif.dll      ; Must be after mbstring as it depends on it</span><br><span class="line">extension=php_mysqli.dll</span><br><span class="line">;extension=php_oci8_12c.dll  ; Use with Oracle Database 12c Instant Client</span><br><span class="line">extension=php_openssl.dll</span><br><span class="line">;extension=php_pdo_firebird.dll</span><br><span class="line">extension=php_pdo_mysql.dll</span><br><span class="line">;extension=php_pdo_oci.dll</span><br><span class="line">;extension=php_pdo_odbc.dll</span><br><span class="line">;extension=php_pdo_pgsql.dll</span><br><span class="line">;extension=php_pdo_sqlite.dll</span><br><span class="line">;extension=php_pgsql.dll</span><br><span class="line">;extension=php_shmop.dll</span><br><span class="line"></span><br><span class="line">; The MIBS data available <span class="keyword">in</span> the PHP distribution must be installed.</span><br><span class="line">; See http://www.php.net/manual/en/snmp.installation.php</span><br><span class="line">;extension=php_snmp.dll</span><br><span class="line"></span><br><span class="line">extension=php_soap.dll</span><br><span class="line">extension=php_sockets.dll</span><br><span class="line">;extension=php_sqlite3.dll</span><br><span class="line">;extension=php_tidy.dll</span><br><span class="line">extension=php_xmlrpc.dll</span><br><span class="line">extension=php_xsl.dll</span><br><span class="line"></span><br><span class="line">// è®¾ç½®æ—¶åŒº</span><br><span class="line">[Date]</span><br><span class="line">; Defines the default timezone used by the date <span class="built_in">functions</span></span><br><span class="line">; http://php.net/date.timezone</span><br><span class="line">date.timezone = PRC</span><br></pre></td></tr></table></figure>
<h1 id="è„šæœ¬"><a href="#è„šæœ¬" class="headerlink" title="è„šæœ¬"></a>è„šæœ¬</h1><p><code>RunHiddenConsole.exe</code> çš„ä½œç”¨æ˜¯åœ¨æ‰§è¡Œå®Œå‘½ä»¤è¡Œè„šæœ¬åå¯ä»¥è‡ªåŠ¨å…³é—­è„šæœ¬ï¼Œè€Œä»è„šæœ¬ä¸­å¼€å¯çš„è¿›ç¨‹ä¸è¢«å…³é—­ï¼Œ<a href="http://redmine.lighttpd.net/attachments/660/RunHiddenConsole.zip">RunHiddenConsole.exe ä¸‹è½½åœ°å€</a>ã€‚</p>
<h2 id="Apache-è„šæœ¬"><a href="#Apache-è„šæœ¬" class="headerlink" title="Apache è„šæœ¬"></a>Apache è„šæœ¬</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">cls</span><br><span class="line">@<span class="built_in">echo</span> off</span><br><span class="line"><span class="built_in">set</span> APACHE_PATH=D:</span><br><span class="line"><span class="built_in">set</span> APACHE_DIR=D:/Wamp/httpd-2.4.35/bin/</span><br><span class="line">color 0a</span><br><span class="line">title Apache Management Process Power By Yun</span><br><span class="line">goto MENU</span><br><span class="line">:MENU</span><br><span class="line"></span><br><span class="line">cls</span><br><span class="line"><span class="built_in">echo</span> ====================== Begin ======================</span><br><span class="line"><span class="built_in">echo</span>.</span><br><span class="line"><span class="built_in">echo</span>. **************************************************</span><br><span class="line"><span class="built_in">echo</span>. --Apache Management Process Power By Yun</span><br><span class="line"><span class="built_in">echo</span>. **************************************************</span><br><span class="line"><span class="built_in">echo</span>. â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“</span><br><span class="line"><span class="built_in">echo</span>. â”ƒ 1ï¼šApache install  â”ƒ 2ï¼šApache start        â”ƒ</span><br><span class="line"><span class="built_in">echo</span>. â”£â”â”â”â”â”â”â”â”â”â”â•‹â”â”â”â”â”â”â”â”â”â”â”â”â”«</span><br><span class="line"><span class="built_in">echo</span>. â”ƒ 3ï¼šApache restart  â”ƒ 4ï¼šApache stop         â”ƒ</span><br><span class="line"><span class="built_in">echo</span>. â”£â”â”â”â”â”â”â”â”â”â”â•‹â”â”â”â”â”â”â”â”â”â”â”â”â”«</span><br><span class="line"><span class="built_in">echo</span>. â”ƒ 5ï¼šApache uninstallâ”ƒ 6ï¼šApache extension    â”ƒ</span><br><span class="line"><span class="built_in">echo</span>. â”—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”›</span><br><span class="line"><span class="built_in">echo</span>. **************************************************</span><br><span class="line"><span class="built_in">echo</span>.</span><br><span class="line"><span class="built_in">echo</span>. Please select a item number input:</span><br><span class="line"></span><br><span class="line"><span class="built_in">set</span> /p id=</span><br><span class="line">    <span class="keyword">if</span> <span class="string">&quot;%id%&quot;</span>==<span class="string">&quot;1&quot;</span> goto cmd1</span><br><span class="line">    <span class="keyword">if</span> <span class="string">&quot;%id%&quot;</span>==<span class="string">&quot;2&quot;</span> goto cmd2</span><br><span class="line">    <span class="keyword">if</span> <span class="string">&quot;%id%&quot;</span>==<span class="string">&quot;3&quot;</span> goto cmd3</span><br><span class="line">    <span class="keyword">if</span> <span class="string">&quot;%id%&quot;</span>==<span class="string">&quot;4&quot;</span> goto cmd4</span><br><span class="line">    <span class="keyword">if</span> <span class="string">&quot;%id%&quot;</span>==<span class="string">&quot;5&quot;</span> goto cmd5</span><br><span class="line">    <span class="keyword">else</span> <span class="built_in">exit</span></span><br><span class="line">pause</span><br><span class="line"></span><br><span class="line">:cmd1</span><br><span class="line">    <span class="built_in">echo</span>.</span><br><span class="line">    <span class="built_in">echo</span>. Apache is installing......</span><br><span class="line">    <span class="keyword">if</span> not exist %APACHE_DIR%httpd.exe <span class="built_in">echo</span> %APACHE_DIR%httpd.exeä¸å­˜åœ¨</span><br><span class="line">        %APACHE_PATH%</span><br><span class="line">        <span class="built_in">cd</span> %APACHE_DIR%</span><br><span class="line">        <span class="keyword">if</span> exist %APACHE_DIR%httpd.exe %APACHE_DIR%httpd.exe -k install</span><br><span class="line">            <span class="built_in">echo</span>. Apache Server install successful!</span><br><span class="line">            <span class="built_in">echo</span>.</span><br><span class="line">    pause</span><br><span class="line">goto MENU</span><br><span class="line"></span><br><span class="line">:cmd2</span><br><span class="line">    <span class="built_in">echo</span>.</span><br><span class="line">    <span class="built_in">echo</span>. Apache is starting......</span><br><span class="line">    <span class="keyword">if</span> not exist %APACHE_DIR%httpd.exe <span class="built_in">echo</span> %APACHE_DIR%httpd.exeä¸å­˜åœ¨</span><br><span class="line">        %APACHE_PATH%</span><br><span class="line">        <span class="built_in">cd</span> %APACHE_DIR%</span><br><span class="line">        <span class="keyword">if</span> exist %APACHE_DIR%httpd.exe %APACHE_DIR%httpd.exe -k start</span><br><span class="line">            <span class="built_in">echo</span>. Apache start successful!</span><br><span class="line">            <span class="built_in">echo</span>.</span><br><span class="line">    pause</span><br><span class="line">goto MENU</span><br><span class="line"></span><br><span class="line">:cmd3</span><br><span class="line">    <span class="built_in">echo</span>.</span><br><span class="line">    <span class="built_in">echo</span>. Apache is restarting......</span><br><span class="line">    <span class="keyword">if</span> not exist %APACHE_DIR%httpd.exe <span class="built_in">echo</span> %APACHE_DIR%httpd.exeä¸å­˜åœ¨</span><br><span class="line">        %APACHE_PATH%</span><br><span class="line">        <span class="built_in">cd</span> %APACHE_DIR%</span><br><span class="line">        <span class="keyword">if</span> exist %APACHE_DIR%httpd.exe %APACHE_DIR%httpd.exe -k restart</span><br><span class="line">            <span class="built_in">echo</span>. Apache is restarting successful!</span><br><span class="line">            <span class="built_in">echo</span>.</span><br><span class="line">    pause</span><br><span class="line">goto MENU</span><br><span class="line"></span><br><span class="line">:cmd4</span><br><span class="line">    <span class="built_in">echo</span>.</span><br><span class="line">    <span class="built_in">echo</span>. Apache is stoping......</span><br><span class="line">    <span class="keyword">if</span> not exist %APACHE_DIR%httpd.exe <span class="built_in">echo</span> %APACHE_DIR%httpd.exeä¸å­˜åœ¨</span><br><span class="line">        %APACHE_PATH%</span><br><span class="line">        <span class="built_in">cd</span> %APACHE_DIR%</span><br><span class="line">        <span class="keyword">if</span> exist %APACHE_DIR%httpd.exe %APACHE_DIR%httpd.exe -k stop</span><br><span class="line">            <span class="built_in">echo</span>. Apache is stoping successful!</span><br><span class="line">            <span class="built_in">echo</span>.</span><br><span class="line">    pause</span><br><span class="line">goto MENU</span><br><span class="line"></span><br><span class="line">:cmd5</span><br><span class="line">    <span class="built_in">echo</span>.</span><br><span class="line">    <span class="built_in">echo</span>. Apache is uninstalling......</span><br><span class="line">    <span class="keyword">if</span> not exist %APACHE_DIR%httpd.exe <span class="built_in">echo</span> %APACHE_DIR%httpd.exeä¸å­˜åœ¨</span><br><span class="line">        %APACHE_PATH%</span><br><span class="line">        <span class="built_in">cd</span> %APACHE_DIR%</span><br><span class="line">        <span class="keyword">if</span> exist %APACHE_DIR%httpd.exe %APACHE_DIR%httpd.exe -k uninstall</span><br><span class="line">            <span class="built_in">echo</span>. Apache is uninstalling successfulï¼</span><br><span class="line">            <span class="built_in">echo</span>.</span><br><span class="line">    pause</span><br></pre></td></tr></table></figure>
<h2 id="Nginx-è„šæœ¬"><a href="#Nginx-è„šæœ¬" class="headerlink" title="Nginx è„šæœ¬"></a>Nginx è„šæœ¬</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">cls</span><br><span class="line">@<span class="built_in">echo</span> off</span><br><span class="line"><span class="built_in">set</span> NGINX_PATH=D:</span><br><span class="line"><span class="built_in">set</span> NGINX_DIR=D:/Wamp/nginx-1.15.5/</span><br><span class="line">color 0a</span><br><span class="line">title Nginx Management Process Power By Yun</span><br><span class="line">goto MENU</span><br><span class="line">:MENU</span><br><span class="line"></span><br><span class="line">cls</span><br><span class="line"><span class="built_in">echo</span> ====================== Begin ======================</span><br><span class="line"><span class="built_in">echo</span>.</span><br><span class="line"><span class="built_in">echo</span>. **************************************************</span><br><span class="line"><span class="built_in">echo</span>. --Nginx Management Process Power By Yun</span><br><span class="line"><span class="built_in">echo</span>. **************************************************</span><br><span class="line"><span class="built_in">echo</span>. â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“</span><br><span class="line"><span class="built_in">echo</span>. â”ƒ 1ï¼šNginx start     â”ƒ 2ï¼šNginx stop          â”ƒ</span><br><span class="line"><span class="built_in">echo</span>. â”£â”â”â”â”â”â”â”â”â”â”â•‹â”â”â”â”â”â”â”â”â”â”â”â”â”«</span><br><span class="line"><span class="built_in">echo</span>. â”ƒ 3ï¼šNginx reload    â”ƒ 4ï¼šNginx quit          â”ƒ</span><br><span class="line"><span class="built_in">echo</span>. â”—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”›</span><br><span class="line"><span class="built_in">echo</span>. **************************************************</span><br><span class="line"><span class="built_in">echo</span>.</span><br><span class="line"><span class="built_in">echo</span>. Please select a item number input:</span><br><span class="line"></span><br><span class="line"><span class="built_in">set</span> /p id=</span><br><span class="line">    <span class="keyword">if</span> <span class="string">&quot;%id%&quot;</span>==<span class="string">&quot;1&quot;</span> goto cmd1</span><br><span class="line">    <span class="keyword">if</span> <span class="string">&quot;%id%&quot;</span>==<span class="string">&quot;2&quot;</span> goto cmd2</span><br><span class="line">    <span class="keyword">if</span> <span class="string">&quot;%id%&quot;</span>==<span class="string">&quot;3&quot;</span> goto cmd3</span><br><span class="line">    <span class="keyword">if</span> <span class="string">&quot;%id%&quot;</span>==<span class="string">&quot;4&quot;</span> goto cmd4</span><br><span class="line">    <span class="keyword">else</span> <span class="built_in">exit</span></span><br><span class="line">pause</span><br><span class="line"></span><br><span class="line">:cmd1</span><br><span class="line">    <span class="built_in">echo</span>.</span><br><span class="line">    <span class="built_in">echo</span>. Nginx is starting......</span><br><span class="line">    <span class="keyword">if</span> not exist %NGINX_DIR%nginx.exe <span class="built_in">echo</span> %NGINX_DIR%nginx.exeä¸å­˜åœ¨</span><br><span class="line">        %NGINX_PATH%</span><br><span class="line">        <span class="built_in">cd</span> %NGINX_DIR%</span><br><span class="line">        <span class="keyword">if</span> exist %NGINX_DIR%nginx.exe start %NGINX_DIR%nginx.exe</span><br><span class="line">            <span class="built_in">echo</span>. Nginx start successful!</span><br><span class="line">            <span class="built_in">echo</span>.</span><br><span class="line">    pause</span><br><span class="line">goto MENU</span><br><span class="line"></span><br><span class="line">:cmd2</span><br><span class="line">    <span class="built_in">echo</span>.</span><br><span class="line">    <span class="built_in">echo</span>. Nginxæ­£åœ¨å…³é—­ä¸­......</span><br><span class="line">    taskkill /f /im nginx.exe &gt; nul</span><br><span class="line">    <span class="built_in">echo</span>. Nginx is stop successful!</span><br><span class="line">    <span class="built_in">echo</span>.</span><br><span class="line">    pause</span><br><span class="line">goto MENU</span><br><span class="line"></span><br><span class="line">:cmd3</span><br><span class="line">    <span class="built_in">echo</span>.</span><br><span class="line">    <span class="built_in">echo</span>. Nginx is reloading......</span><br><span class="line">    <span class="keyword">if</span> not exist %NGINX_DIR%nginx.exe <span class="built_in">echo</span> %NGINX_DIR%nginx.exeä¸å­˜åœ¨</span><br><span class="line">        %NGINX_PATH%</span><br><span class="line">        <span class="built_in">cd</span> %NGINX_DIR%</span><br><span class="line">        <span class="keyword">if</span> exist %NGINX_DIR%nginx.exe %NGINX_DIR%nginx.exe -s reload</span><br><span class="line">            <span class="built_in">echo</span>. Nginx is reloadding successful!</span><br><span class="line">            <span class="built_in">echo</span>.</span><br><span class="line">    pause</span><br><span class="line">goto MENU</span><br><span class="line"></span><br><span class="line">:cmd4</span><br><span class="line">    <span class="built_in">echo</span>.</span><br><span class="line">    <span class="built_in">echo</span>. Nginx is quitting......</span><br><span class="line">    taskkill /f /im %NGINX_DIR%nginx.exe &gt; nul</span><br><span class="line">    <span class="built_in">echo</span>. Nginx is quitting successful!</span><br><span class="line">    <span class="built_in">echo</span>.</span><br><span class="line">pause</span><br></pre></td></tr></table></figure>
<h2 id="PHP-è„šæœ¬"><a href="#PHP-è„šæœ¬" class="headerlink" title="PHP è„šæœ¬"></a>PHP è„šæœ¬</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">@<span class="built_in">echo</span> off</span><br><span class="line"><span class="built_in">echo</span> PHP FastCGI is starting......</span><br><span class="line">RunHiddenConsole.exe D:/Wamp/php-7.2.11-nts/php-cgi.exe -b 127.0.0.1:9000 -c D:/Wamp/php-7.2.11-nts/php.ini</span><br></pre></td></tr></table></figure>
<p>åˆ°äº†è¿™é‡Œæˆ‘åªèƒ½è¯´ï¼Œä½ å·²ç»æ‹¥æœ‰ä¸€ä¸ªåŸºæœ¬çš„ PHP å¼€å‘ç¯å¢ƒè€Œå·²ï¼Œå› ä¸ºè¦é…åˆ Redisã€Memcachedã€MongoDB ä¹‹ç±»çš„è½¯ä»¶ï¼Œè¿˜å¾—å®‰è£…ç›¸åº”çš„ PHP æ‰©å±•ï¼Œåœ¨è¿™äº›è¿‡ç¨‹ä¸­å¥‡è‘©çš„é—®é¢˜å±‚å‡ºä¸ç©·ï¼Œåƒç¼ºä¸ª *.dll æ–‡ä»¶ä¹‹ç±»çš„ã€‚å› æ­¤åœ¨ Windows ä¸Šæ‰‹å·¥æ­å»ºç¯å¢ƒçš„æˆæœ¬æ˜¯æ¯”è¾ƒé«˜çš„ï¼Œè¯åˆè¯´å›æ¥ï¼Œä¸æŠ˜è…¾ä¸€ä¸‹ï¼Œæ€ä¹ˆèƒ½çŸ¥é“å‘¢ï¼Ÿæ‰€ä»¥ï¼Œæˆ‘æ¢äº† Macã€‚</p>
]]></content>
      <categories>
        <category>php</category>
      </categories>
      <tags>
        <tag>php</tag>
        <tag>windows</tag>
      </tags>
  </entry>
  <entry>
    <title>Neovim + SpaceVim èµ·æ­¥</title>
    <url>/2019/09/28/vim-neovim-spacevim/</url>
    <content><![CDATA[<p><img src="/images/2019/201909291120.jpg" alt="201909291120.jpg"></p>
<p>ğŸš€ Neovim ä¸“æ³¨äºåç«¯å’Œæ§åˆ¶å°ï¼Œè€Œ Vim æ˜¯ä¸€ä¸ª TUI å’Œ GUI å…¼é¡¾çš„ç¼–è¾‘å™¨ã€‚å¦‚æœä½ ç©¿æ¢­äº GVim çš„åº·åº„å¤§é“ï¼Œé‚£ä¹ˆæœ¬æ–‡ä¹Ÿè®¸ä¸å¤ªå¯¹ä½ èƒƒå£ã€‚å½“ç„¶ï¼Œæ—¶ä¸æ—¶æŠ˜è…¾æŠ˜è…¾ä¹Ÿæ˜¯ä¸€ä¸ªç¨‹åºå‘˜å›ºæœ‰çš„ç™–å¥½ï¼Œå’±å°±å¥½è¿™å£ã€‚è¿™ä¸ï¼ŒSpaceVim åŠ æŒçš„ Neovim æ¥äº†ã€‚</p>
<span id="more"></span>
<h2 id="Neovim"><a href="#Neovim" class="headerlink" title="Neovim"></a>Neovim</h2><p>Vim 8 çš„æ¨å‡ºï¼Œå¾ˆå¤§ç¨‹åº¦ä¸Šæ˜¯å—äº† Neovim çš„å½±å“ï¼Œå¯¹äºå¼‚æ­¥é€šä¿¡å’Œå†…ç½®ç»ˆç«¯ï¼Œéƒ½æ˜¯åœ¨ Neovim ä¸­é¦–å…ˆå®ç°çš„ã€‚æ€»ä¹‹ï¼Œåœ¨ç¼–è¾‘å™¨çš„å¼€å‘ä¸Šé¢ï¼ŒNeovim æ˜¯é¢†å…ˆäº Vim çš„ã€‚</p>
<ul>
<li><a href="https://neovim.io/">Neovim</a></li>
<li><a href="https://neovim.io/doc/">Neovim æ–‡æ¡£</a></li>
<li><a href="https://github.com/neovim/neovim">Neovim GitHub</a></li>
<li><a href="https://geoff.greer.fm/2015/01/15/why-neovim-is-better-than-vim/">Why Neovim is Better than Vim</a></li>
</ul>
<h3 id="å®‰è£…-Neovim"><a href="#å®‰è£…-Neovim" class="headerlink" title="å®‰è£… Neovim"></a>å®‰è£… Neovim</h3><p>æ¸…ç†é…ç½®ï¼ˆæ…é‡ï¼šæœ€å¥½è¿›è¡Œå¤‡ä»½ï¼‰ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">rm -rf ~/.vim</span><br><span class="line">rm -rf ~/.vim*</span><br></pre></td></tr></table></figure>
<p>å®‰è£… neovimï¼Œç¨³å®šç‰ˆå’Œå¼€å‘ç‰ˆé€‰ä¸€ä¸ªå°±å¥½ï¼Œå…¶å®ƒçš„å®‰è£…æ–¹å¼è¯·å‚è€ƒå®˜ç½‘æ–‡æ¡£ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// ç¨³å®šç‰ˆ</span><br><span class="line">brew install neovim</span><br><span class="line"></span><br><span class="line">// å¼€å‘ç‰ˆ</span><br><span class="line">brew install --HEAD neovim</span><br></pre></td></tr></table></figure>
<h2 id="SpaceVim"><a href="#SpaceVim" class="headerlink" title="SpaceVim"></a>SpaceVim</h2><blockquote>
<p>SpaceVim æ˜¯ä¸€ä¸ªç¤¾åŒºé©±åŠ¨çš„æ¨¡å—åŒ–çš„ Vim IDEï¼Œä»¥æ¨¡å—çš„æ–¹å¼ç»„ç»‡ç®¡ç†æ’ä»¶ä»¥åŠç›¸å…³é…ç½®ï¼Œä¸ºä¸åŒçš„è¯­è¨€å¼€å‘é‡èº«å®šåˆ¶äº†ç›¸å…³çš„å¼€å‘æ¨¡å—ï¼Œè¯¥æ¨¡å—æä¾›ä»£ç è‡ªåŠ¨è¡¥å…¨ï¼Œè¯­æ³•æ£€æŸ¥ã€æ ¼å¼åŒ–ã€è°ƒè¯•ã€REPL ç­‰ç‰¹æ€§ã€‚ç”¨æˆ·ä»…éœ€è½½å…¥ç›¸å…³è¯­è¨€çš„æ¨¡å—å³å¯å¾—åˆ°ä¸€ä¸ªå¼€ç®±å³ç”¨çš„ Vim IDEã€‚</p>
</blockquote>
<ul>
<li><a href="https://spacevim.org/cn/documentation/">ä¸­æ–‡æ–‡æ¡£</a></li>
<li><a href="https://spacevim.org/cn/quick-start-guide/">å¿«é€Ÿå¼€å§‹</a></li>
<li><a href="https://everettjf.gitbooks.io/spacevimtutorial/content/">å…¥é—¨æ•™ç¨‹</a></li>
<li><a href="https://gitter.im/SpaceVim/cn">SpaceVim ä¸­æ–‡èŠå¤©å®¤</a></li>
<li><a href="https://github.com/SpaceVim/SpaceVim">SpaceVim GitHub</a></li>
</ul>
<p>SpaceVim ä¹Ÿåˆ—å‡ºäº†å®ƒçš„å—ä¼—ç”¨æˆ·ï¼Œå¯¹äº Vim ï¼Œæœ¬äººä¸€ç›´å¤„äºæ–°æ‰‹çŠ¶æ€ï¼Œæ‰€æœ‰æˆ‘è§‰å¾—å®ƒé€‚åˆæˆ‘ï¼Œé«˜æ‰‹è¯·å¿½ç•¥ï¼š</p>
<ul>
<li>åˆçº§ Vim ç”¨æˆ·</li>
<li>è¿½æ±‚ä¼˜é›…ç•Œé¢çš„ Vim ç”¨æˆ·</li>
<li>è¿½æ±‚æ›´å°‘è‚Œè‚‰æŸä¼¤çš„ Vim ç”¨æˆ·</li>
<li>æƒ³è¦å­¦ä¹ ä¸€ç§ä¸ä¸€æ ·çš„ç¼–è¾‘æ–‡ä»¶æ–¹å¼çš„ Vim ç”¨æˆ·</li>
<li>è¿½æ±‚ç®€å•ä½†æ˜¯å¯é«˜åº¦é…ç½®ç³»ç»Ÿçš„ Vim ç”¨æˆ·</li>
</ul>
<h3 id="å®‰è£…-SpaceVim"><a href="#å®‰è£…-SpaceVim" class="headerlink" title="å®‰è£… SpaceVim"></a>å®‰è£… SpaceVim</h3><p>è·å–å®‰è£…è„šæœ¬çš„å¸®åŠ©ä¿¡æ¯ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">curl -sLf https://spacevim.org/cn/install.sh | bash -s -- -h</span><br></pre></td></tr></table></figure>
<p>Linux æˆ– macOS å®‰è£…ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">curl -sLf https://spacevim.org/cn/install.sh | bash</span><br></pre></td></tr></table></figure>
<p>é…ç½®è¾“å…¥ vi æˆ– vim æ—¶ç”¨ Neovim æ‰“å¼€ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">vim ~/.zshrc</span><br><span class="line"><span class="built_in">alias</span> vi=<span class="string">&#x27;nvim&#x27;</span></span><br><span class="line"><span class="built_in">alias</span> vim=<span class="string">&#x27;nvim&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">source</span> ~/.zshrc</span><br></pre></td></tr></table></figure>
<h3 id="æ›´æ–°è‡ªèº«å’Œæ’ä»¶"><a href="#æ›´æ–°è‡ªèº«å’Œæ’ä»¶" class="headerlink" title="æ›´æ–°è‡ªèº«å’Œæ’ä»¶"></a>æ›´æ–°è‡ªèº«å’Œæ’ä»¶</h3><ul>
<li>æ›´æ–°è‡ªèº«ï¼šåœ¨å‘½ä»¤æ¨¡å¼ä¸‹è¾“å…¥ <code>:SPUpdate SpaceVim</code></li>
<li>æ›´æ–°æ’ä»¶ï¼šåœ¨å‘½ä»¤æ¨¡å¼ä¸‹è¾“å…¥ <code>:SPUpdate</code></li>
<li>è·å–æ—¥å¿—ï¼šåœ¨å‘½ä»¤æ¨¡å¼ä¸‹è¾“å…¥ï¼š<code>:SPDebugInfo!</code></li>
</ul>
<h3 id="ä¿®æ­£å­—æ®µä¹±ç "><a href="#ä¿®æ­£å­—æ®µä¹±ç " class="headerlink" title="ä¿®æ­£å­—æ®µä¹±ç "></a>ä¿®æ­£å­—æ®µä¹±ç </h3><ul>
<li><a href="https://github.com/ryanoasis/vim-devicons">VimDevicons</a></li>
<li><a href="https://github.com/ryanoasis/vim-devicons/wiki">VimDevicons æ–‡æ¡£</a></li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">brew tap caskroom/fonts</span><br><span class="line">brew cask install font-hack-nerd-font</span><br></pre></td></tr></table></figure>
<p>å¦‚æœå‡ºç°ä»¥ä¸‹æŠ¥é”™ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">Error: Cask font-hack-nerd-font exists <span class="keyword">in</span> multiple taps:</span><br><span class="line">homebrew/cask-fonts/font-hack-nerd-font</span><br><span class="line">caskroom/fonts/font-hack-nerd-font</span><br></pre></td></tr></table></figure>
<p>é¡ºåºè¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">brew untap caskroom/fonts</span><br><span class="line">brew tap homebrew/cask-fonts</span><br><span class="line">brew cask install font-hack-nerd-font</span><br></pre></td></tr></table></figure>
<h3 id="ç”¨æˆ·é…ç½®"><a href="#ç”¨æˆ·é…ç½®" class="headerlink" title="ç”¨æˆ·é…ç½®"></a>ç”¨æˆ·é…ç½®</h3><p>SpaceVim å°†è‡ªåŠ¨åœ¨ç”¨æˆ·çš„ HOME ç›®å½•ç”Ÿæˆ <code>~/.SpaceVim.d/init.toml</code>ï¼Œå¹¶ä¸”æ‰€æœ‰çš„ç”¨æˆ·è„šæœ¬å­˜å‚¨åœ¨ <code>~/.SpaceVim.d/</code> ç›®å½•ä¸‹ã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">vim ~/.SpaceVim.d/init.toml</span><br><span class="line"><span class="comment">#=============================================================================</span></span><br><span class="line"><span class="comment"># dark_powered.toml --- dark powered configuration example for SpaceVim</span></span><br><span class="line"><span class="comment"># Copyright (c) 2016-2017 Wang Shidong &amp; Contributors</span></span><br><span class="line"><span class="comment"># Author: Wang Shidong &lt; wsdjeg at 163.com &gt;</span></span><br><span class="line"><span class="comment"># URL: https://spacevim.org</span></span><br><span class="line"><span class="comment"># License: GPLv3</span></span><br><span class="line"><span class="comment">#=============================================================================</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># All SpaceVim option below [option] section</span></span><br><span class="line">[options]</span><br><span class="line">    <span class="comment"># set spacevim theme. by default colorscheme layer is not loaded,</span></span><br><span class="line">    <span class="comment"># if you want to use more colorscheme, please load the colorscheme</span></span><br><span class="line">    <span class="comment"># layer</span></span><br><span class="line">    colorscheme = <span class="string">&quot;gruvbox&quot;</span></span><br><span class="line">    background = <span class="string">&quot;dark&quot;</span></span><br><span class="line">    <span class="comment"># Disable guicolors in basic mode, many terminal do not support 24bit</span></span><br><span class="line">    <span class="comment"># true colors</span></span><br><span class="line">    enable_guicolors = <span class="literal">true</span></span><br><span class="line">    <span class="comment"># Disable statusline separator, if you want to use other value, please</span></span><br><span class="line">    <span class="comment"># install nerd fonts</span></span><br><span class="line">    statusline_separator = <span class="string">&quot;arrow&quot;</span></span><br><span class="line">    statusline_inactive_separator = <span class="string">&quot;arrow&quot;</span></span><br><span class="line">    buffer_index_type = 4</span><br><span class="line">    enable_tabline_filetype_icon = <span class="literal">true</span></span><br><span class="line">    enable_statusline_display_mode = <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Enable autocomplete layer</span></span><br><span class="line">[[layers]]</span><br><span class="line">name = <span class="string">&#x27;autocomplete&#x27;</span></span><br><span class="line">auto-completion-return-key-behavior = <span class="string">&quot;complete&quot;</span></span><br><span class="line">auto-completion-tab-key-behavior = <span class="string">&quot;smart&quot;</span></span><br><span class="line"></span><br><span class="line">[[layers]]</span><br><span class="line">name = <span class="string">&#x27;shell&#x27;</span></span><br><span class="line">default_position = <span class="string">&#x27;top&#x27;</span></span><br><span class="line">default_height = 30</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ·»åŠ è‡ªå®šä¹‰ä¸»é¢˜ï¼ˆå¯é€‰ï¼‰ï¼šhttps://github.com/mhartington/oceanic-next</span></span><br><span class="line">[[custom_plugins]]</span><br><span class="line">name = <span class="string">&quot;mhartington/oceanic-next&quot;</span></span><br><span class="line">merged = 0</span><br></pre></td></tr></table></figure>
<p>æœªå®Œå¾…ç»­â€¦â€¦</p>
]]></content>
      <categories>
        <category>vim</category>
      </categories>
      <tags>
        <tag>vim</tag>
      </tags>
  </entry>
</search>
