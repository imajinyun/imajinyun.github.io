<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#222"><meta name="generator" content="Hexo 5.4.0"><link rel="apple-touch-icon" sizes="180x180" href="https://inotes.oss-cn-beijing.aliyuncs.com/common/201812/apple-touch-icon-next.png"><link rel="icon" type="image/png" sizes="32x32" href="https://inotes.oss-cn-beijing.aliyuncs.com/common/201812/favicon-32x32-next.png"><link rel="icon" type="image/png" sizes="16x16" href="https://inotes.oss-cn-beijing.aliyuncs.com/common/201812/favicon-16x16-next.png"><link rel="mask-icon" href="https://inotes.oss-cn-beijing.aliyuncs.com/common/201812/logo.svg" color="#222"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="/lib/font-awesome/css/all.min.css"><script id="hexo-configurations">var NexT=window.NexT||{},CONFIG={hostname:"imajinyun.xyz",root:"/",scheme:"Pisces",version:"7.8.0",exturl:!1,sidebar:{position:"left",display:"post",padding:18,offset:12,onmobile:!1},copycode:{enable:!0,show_result:!0,style:"flat"},back2top:{enable:!0,sidebar:!1,scrollpercent:!1},bookmark:{enable:!1,color:"#222",save:"auto"},fancybox:!1,mediumzoom:!1,lazyload:!1,pangu:!1,comments:{style:"tabs",active:null,storage:!0,lazyload:!1,nav:null},algolia:{appID:"MY71JUZ8GH",apiKey:"06f460e5776acfe140c52e3ba3537780",indexName:"ProdNotes",hits:{per_page:10},labels:{input_placeholder:"🐶 Search for Posts",hits_empty:"🙏 未发现与<b>『${query}』</b>相关的内容",hits_stats:'🚀 <b style="color: red">${hits}</b> 条相关条目，使用了 <b style="color: red">${time}</b> ms'}},localsearch:{enable:!1,trigger:"auto",top_n_per_article:1,unescape:!1,preload:!1},motion:{enable:!0,async:!1,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn",sidebar:"slideUpIn"}},path:"search.xml"}</script><meta name="description" content="PHP 当然也有自己的异常处理，不过那已经是 PHP5 以后的事了。就我自己这些年写程序的现状看，我基本上就没有真正明白什么是异常处理，经常把异常和错误处理混为一谈，关于代码中的那些写法，不是写错了，就是写的太特么烂了。恰好最近在写一些类时用到异常处理了，顺便就把这个整理下，但是这个仅代表我个人的一些理解和使用，也可能是错误的，还请谨慎阅读。 概述错误处理定义错误是指导致系统不能按照用户意图工作的"><meta property="og:type" content="article"><meta property="og:title" content="PHP 中的错误和异常处理"><meta property="og:url" content="https://imajinyun.xyz/2018/04/05/php-error-exception-handler/index.html"><meta property="og:site_name" content="Jinyun&#39;s Notes 🚀"><meta property="og:description" content="PHP 当然也有自己的异常处理，不过那已经是 PHP5 以后的事了。就我自己这些年写程序的现状看，我基本上就没有真正明白什么是异常处理，经常把异常和错误处理混为一谈，关于代码中的那些写法，不是写错了，就是写的太特么烂了。恰好最近在写一些类时用到异常处理了，顺便就把这个整理下，但是这个仅代表我个人的一些理解和使用，也可能是错误的，还请谨慎阅读。 概述错误处理定义错误是指导致系统不能按照用户意图工作的"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://inotes.oss-cn-beijing.aliyuncs.com/php/201812/php-error-exception-handler.png"><meta property="article:published_time" content="2018-04-05T09:41:59.000Z"><meta property="article:modified_time" content="2021-07-01T02:37:02.000Z"><meta property="article:author" content="Jinyun"><meta property="article:tag" content="php"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://inotes.oss-cn-beijing.aliyuncs.com/php/201812/php-error-exception-handler.png"><link rel="canonical" href="https://imajinyun.xyz/2018/04/05/php-error-exception-handler/"><script id="page-configurations">CONFIG.page={sidebar:"",isHome:!1,isPost:!0,lang:"zh-CN"}</script><title>PHP 中的错误和异常处理 | Jinyun's Notes 🚀</title><script>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?80ab72b54c102cbfec5064e3feaea6c8";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script><noscript><style>.sidebar-inner,.use-motion .brand,.use-motion .collection-header,.use-motion .comments,.use-motion .menu-item,.use-motion .pagination,.use-motion .post-block,.use-motion .post-body,.use-motion .post-header{opacity:initial}.use-motion .site-subtitle,.use-motion .site-title{opacity:initial;top:initial}.use-motion .logo-line-before i{left:initial}.use-motion .logo-line-after i{right:initial}</style></noscript></head><body itemscope itemtype="http://schema.org/WebPage"><div class="container use-motion"><div class="headband"></div><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-container"><div class="site-nav-toggle"><div class="toggle" aria-label="切换导航栏"><span class="toggle-line toggle-line-first"></span> <span class="toggle-line toggle-line-middle"></span> <span class="toggle-line toggle-line-last"></span></div></div><div class="site-meta"><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span><h1 class="site-title">Jinyun's Notes 🚀</h1><span class="logo-line-after"><i></i></span></a><p class="site-subtitle" itemprop="description">没什么天赋，爱好也不多，但愿坚持做些喜欢的事情</p></div><div class="site-nav-right"><div class="toggle popup-trigger"><i class="fa fa-search fa-fw fa-lg"></i></div></div></div><nav class="site-nav"><ul id="menu" class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home"></i>首页</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-paper-plane"></i>关于</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags"></i>标签</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th-list"></i>分类</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive"></i>归档</a></li><li class="menu-item menu-item-links"><a href="/links/" rel="section"><i class="fa fa-link"></i>友链</a></li><li class="menu-item menu-item-speech"><a href="/speech/" rel="section"><i class="fa fa-microphone"></i>&nbsp;演说</a></li><li class="menu-item menu-item-tools"><a href="/tools/" rel="section"><i class="fa fa-tools"></i>导航</a></li><li class="menu-item menu-item-search"><a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索</a></li></ul></nav><div class="search-pop-overlay"><div class="popup search-popup"><div class="search-header"><span class="search-icon"><i class="fa fa-search"></i></span><div class="search-input-container"></div><span class="popup-btn-close"><i class="fa fa-times-circle"></i></span></div><div class="algolia-results"><div id="algolia-stats"></div><div id="algolia-hits"></div><div id="algolia-pagination" class="algolia-pagination"></div></div></div></div></div></header><div class="back-to-top"><i class="fa fa-arrow-up"></i> <span>0%</span></div><a href="https://github.com/imajinyun" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin:130px 106px" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a><main class="main"><div class="main-inner"><div class="content-wrap"><div class="content post posts-expand"><article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://imajinyun.xyz/2018/04/05/php-error-exception-handler/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="https://inotes.oss-cn-beijing.aliyuncs.com/common/201812/avatar.jpg"><meta itemprop="name" content="笔者偶像"><meta itemprop="description" content="进一寸自有一寸的欢喜 🎉"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Jinyun's Notes 🚀"></span><header class="post-header"><h1 class="post-title" itemprop="name headline">PHP 中的错误和异常处理</h1><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2018-04-05 17:41:59" itemprop="dateCreated datePublished" datetime="2018-04-05T17:41:59+08:00">2018-04-05</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i> </span><span class="post-meta-item-text">更新于</span> <time title="修改时间：2021-07-01 10:37:02" itemprop="dateModified" datetime="2021-07-01T10:37:02+08:00">2021-07-01</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/php/" itemprop="url" rel="index"><span itemprop="name">php</span></a></span></span></div></header><div class="post-body" itemprop="articleBody"><p>PHP 当然也有自己的异常处理，不过那已经是 PHP5 以后的事了。就我自己这些年写程序的现状看，我基本上就没有真正明白什么是异常处理，经常把异常和错误处理混为一谈，关于代码中的那些写法，不是写错了，就是写的太特么烂了。恰好最近在写一些类时用到异常处理了，顺便就把这个整理下，但是这个仅代表我个人的一些理解和使用，也可能是错误的，还请谨慎阅读。</p><h1 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h1><h2 id="错误处理定义"><a href="#错误处理定义" class="headerlink" title="错误处理定义"></a>错误处理定义</h2><p>错误是指导致系统不能按照用户意图工作的一切原因、事件。在程序设计过程中，由于某些错误的存在，致使程序无法正常运行，处理这些错误以使程序正确运行就称为错误处理。错误处理功能是衡量编译器性能的重要方面，它在帮助程序员尽快修改程序方面起到了非常重要的作用。</p><p>错误类型：</p><ul><li>语法错误</li><li>语义错误</li><li>逻辑错误</li></ul><h2 id="异常处理定义"><a href="#异常处理定义" class="headerlink" title="异常处理定义"></a>异常处理定义</h2><p>编程语言或计算机硬件里的一种机制，用于处理软件或信息系统中出现的异常状况（即超出程序正常执行流程的某些特殊条件）</p><h2 id="预定义的错误代码"><a href="#预定义的错误代码" class="headerlink" title="预定义的错误代码"></a>预定义的错误代码</h2><p>当然你也可以参见官网的手册 <strong><a target="_blank" rel="noopener" href="http://php.net/manual/zh/errorfunc.constants.php">预定义常量</a></strong>，我抄一遍纯粹是为了加深记忆。至于每种错误在什么情况下产生，你可以参看 <strong><a target="_blank" rel="noopener" href="http://www.cnblogs.com/yjf512/p/5314345.html">PHP的错误机制总结</a></strong>。</p><table><thead><tr><th>常量</th><th>取值</th><th>说明</th><th>备注</th></tr></thead><tbody><tr><td><code>E_ERROR</code></td><td>1</td><td>致命的运行时错误。这类错误一般是不可恢复的情况，例如内存分配导致的问题。后果是导致脚本终止不再继续运行</td><td></td></tr><tr><td><code>E_WARNING</code></td><td>2</td><td>运行时警告（非致命错误）。仅给出提示信息，但是脚本不会终止运行</td><td></td></tr><tr><td><code>E_PARSE</code></td><td>4</td><td>编译时语法解析错误。解析错误仅仅由分析器产生</td><td></td></tr><tr><td><code>E_NOTICE</code></td><td>8</td><td>运行时通知。表示脚本遇到可能会表现为错误的情况，但是在可以正常运行的脚本里面也可能会有类似的通知</td><td></td></tr><tr><td><code>E_CORE_ERROR</code></td><td>16</td><td>在 PHP 初始化启动过程中发生的致命错误。该错误类似 E_ERROR，但是是由 PHP 引擎核心产生的</td><td>since PHP 4</td></tr><tr><td><code>E_CORE_WARNING</code></td><td>32</td><td>PHP 初始化启动过程中发生的警告（非致命错误）。类似 E_WARNING，但是是由 PHP 引擎核心产生的</td><td>since PHP 4</td></tr><tr><td><code>E_COMPILE_ERROR</code></td><td>64</td><td>致命编译时错误。类似 E_ERROR，但是是由 Zend 脚本引擎产生的</td><td>since PHP 4</td></tr><tr><td><code>E_COMPILE_WARNING</code></td><td>128</td><td>编译时警告（非致命错误）。类似 E_WARNING，但是是由 Zend 脚本引擎产生的</td><td>since PHP 4</td></tr><tr><td><code>E_USER_ERROR</code></td><td>256</td><td>用户产生的错误信息。类似 E_ERROR，但是是由用户自己在代码中使用 PHP 函数 trigger_error() 来产生的</td><td>since PHP 4</td></tr><tr><td><code>E_USER_WARNING</code></td><td>512</td><td>用户产生的警告信息。类似 E_WARNING，但是是由用户自己在代码中使用 PHP 函数 trigger_error() 来产生的</td><td>since PHP 4</td></tr><tr><td><code>E_USER_NOTICE</code></td><td>1024</td><td>用户产生的通知信息。类似 E_NOTICE，但是是由用户自己在代码中使用 PHP 函数 trigger_error() 来产生的</td><td>since PHP 4</td></tr><tr><td><code>E_STRICT</code></td><td>2048</td><td>启用 PHP 对代码的修改建议，以确保代码具有最佳的互操作性和向前兼容性</td><td>since PHP 5</td></tr><tr><td><code>E_RECOVERABLE_ERROR</code></td><td>4096</td><td>可被捕捉的致命错误。它表示发生了一个可能非常危险的错误，但是还没有导致 PHP 引擎处于不稳定的状态。如果该错误没有被用户自定义句柄捕获（参见 set_error_handler()），将成为一个 E_ERROR　从而脚本会终止运行</td><td>since PHP 5.2.0</td></tr><tr><td><code>E_DEPRECATED</code></td><td>8192</td><td>运行时通知。启用后将会对在未来版本中可能无法正常工作的代码给出警告</td><td>since PHP 5.3.0</td></tr><tr><td><code>E_USER_DEPRECATED</code></td><td>16384</td><td>用户产少的警告信息。类似 E_DEPRECATED，但是是由用户自己在代码中使用 PHP 函数 trigger_error() 来产生的</td><td>since PHP 5.3.0</td></tr><tr><td><code>E_ALL</code></td><td>30719</td><td><code>E_STRICT</code> 出外的所有错误和警告信息</td><td>30719 in PHP 5.3.x, 6143 in PHP 5.2.x, 2047 previously</td></tr></tbody></table><div class="note danger"><ul><li>可以使用按位运算符来组合这些值或者屏蔽某些类型的错误。在 <code>php.ini</code> 之中，仅 <code>|, ~, !, ^, &amp;</code> 这些操作符会被正确解析</li><li>以下级别的错误不能由用户定义的函数来处理：<code>E_ERROR</code>、<code>E_PARSE</code>、<code>E_CORE_ERROR</code>、<code>E_CORE_WARNING</code>、<code>E_COMPILE_ERROR</code>、<code>E_COMPILE_WARNING</code> 和在调用 <code>set_error_handler()</code> 函数所在文件中产生的大多数 <code>E_STRICT</code></li></ul></div><h2 id="相关文章"><a href="#相关文章" class="headerlink" title="相关文章"></a>相关文章</h2><ul><li><a target="_blank" rel="noopener" href="http://www.laruence.com/2010/08/03/1697.html">深入理解PHP原理之异常机制</a></li><li><a target="_blank" rel="noopener" href="http://www.laruence.com/2012/02/02/2515.html">我们什么时候应该使用异常</a></li><li><a target="_blank" rel="noopener" href="https://laravel-china.org/articles/5435/exceptions-and-errors-in-php-best-practices">PHP 最佳实践之异常和错误</a></li><li><a target="_blank" rel="noopener" href="https://trowski.com/2015/06/24/throwable-exceptions-and-errors-in-php7/">Throwable Exceptions and Errors in PHP 7</a></li></ul><p>早有人把 PHP 各个版本的错误和异常处理类树整理出来供我等参观。如果在本地执行此代码，依据本地对 PHP 安装的扩展的不同，会把扩展中的相关异常处理类一并打印出来</p><ul><li><a target="_blank" rel="noopener" href="https://gist.github.com/mlocati/249f07b074a0de339d4d1ca980848e6a">打印错误和异常处理类树代码</a></li><li><a target="_blank" rel="noopener" href="https://3v4l.org/sDMsv#output">打印输出结果</a></li></ul><h1 id="错误处理"><a href="#错误处理" class="headerlink" title="错误处理"></a>错误处理</h1><blockquote><ul><li>Note that other types of errors such as warnings and notices remain unchanged in PHP 7. Only fatal and recoverable errors throw exceptions.</li><li>Prior to PHP 7 alpha-2, the exception hierarchy in PHP 7 was different. Fatal and recoverable errors threw instances of EngineException, which did not inherit from Exception. Both Exception and EngineException inherited from BaseException. The hierarchy was revised with the RFC I authored, Throwable Interface. I felt switching to Throwable and Error was important to avoid confusion from classes using the suffix Exception that did not extend Exception, as well as being more concise and appealing names.</li></ul></blockquote><p><code>E_ERROR</code> 和 <code>E_RECOVERABLE_ERROR</code> 级别的错误在 PHP7 之前是不能被捕获到的，也就是说，你无法使用 <code>try...catch...</code> 这样的语句捕获到这种级别的错误，但不管是 PHP7 还是 PHP5 对于未捕获的异常依然是一个致命错误</p><p>在 PHP5 中</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$object</span> = <span class="literal">null</span>;</span><br><span class="line"><span class="variable">$object</span>-&gt;method();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 结果</span></span><br><span class="line">Fatal <span class="built_in">error</span>: Call to a member <span class="function"><span class="keyword">function</span> <span class="title">method</span>(<span class="params"></span>) <span class="title">on</span> <span class="title">null</span> <span class="title">in</span></span></span><br></pre></td></tr></table></figure><p>在 PHP7 中：</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$object</span> = <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="variable">$object</span>-&gt;method();</span><br><span class="line">&#125; <span class="keyword">catch</span> (<span class="built_in">Error</span> <span class="variable">$error</span>) &#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="variable">$error</span>-&gt;getMessage();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 结果</span></span><br><span class="line">Call to a member <span class="function"><span class="keyword">function</span> <span class="title">method</span>(<span class="params"></span>) <span class="title">on</span> <span class="title">null</span></span></span><br></pre></td></tr></table></figure><p>是的，PHP7 内置了一个名为 <code>Error</code> 的类来捕获一些致命错误和异常了，其中 <code>Error</code> 和 <code>Exception</code> 类实现了 <code>Throwable</code> 接口。</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Throwable 接口</span></span><br><span class="line"><span class="built_in">Throwable</span> &#123;</span><br><span class="line">    <span class="comment">/* Methods */</span></span><br><span class="line">    <span class="keyword">abstract</span> <span class="keyword">public</span> <span class="keyword">string</span> getMessage ( <span class="keyword">void</span> )</span><br><span class="line">    <span class="keyword">abstract</span> <span class="keyword">public</span> <span class="keyword">int</span> getCode ( <span class="keyword">void</span> )</span><br><span class="line">    <span class="keyword">abstract</span> <span class="keyword">public</span> <span class="keyword">string</span> getFile ( <span class="keyword">void</span> )</span><br><span class="line">    <span class="keyword">abstract</span> <span class="keyword">public</span> <span class="keyword">int</span> getLine ( <span class="keyword">void</span> )</span><br><span class="line">    <span class="keyword">abstract</span> <span class="keyword">public</span> <span class="keyword">array</span> getTrace ( <span class="keyword">void</span> )</span><br><span class="line">    <span class="keyword">abstract</span> <span class="keyword">public</span> <span class="keyword">string</span> getTraceAsString ( <span class="keyword">void</span> )</span><br><span class="line">    <span class="keyword">abstract</span> <span class="keyword">public</span> <span class="built_in">Throwable</span> getPrevious ( <span class="keyword">void</span> )</span><br><span class="line">    <span class="keyword">abstract</span> <span class="keyword">public</span> <span class="keyword">string</span> __toString ( <span class="keyword">void</span> )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><div class="note danger"><p>开发者不能直接实现 <code>Throwable</code> 接口，必须通过 <code>Error</code> 或者 <code>Exception</code> 等类去扩展</p></div><p>也可以用以下的方式去扩展自己的错误和异常类。</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">TestThrowable</span> <span class="keyword">extends</span> \<span class="title">Throwable</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TestException</span> <span class="keyword">extends</span> \<span class="title">Exception</span> <span class="keyword">implements</span> <span class="title">TestThrowable</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">DemoError</span> <span class="keyword">extends</span> \<span class="title">Error</span> <span class="keyword">implements</span> <span class="title">TestThrowable</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="异常处理"><a href="#异常处理" class="headerlink" title="异常处理"></a>异常处理</h1><p>由于 <code>Error</code> 和 <code>Exception</code> 都实现了 <code>Throwable</code> 接口，那么问题就来了，在程序中我们究竟要用哪个？通过一些最佳实践我们知道，错误一般是去约束程序员和代码语法、语义及逻辑方面的，而异常是程序在运行过程出现的一些不合期望的情况。因此，在代码中我们应当使用异常而不是错误。</p><p>PHP 7.2.0 - 7.2.3 版本中提供的内置异常：</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Exception</span></span><br><span class="line">  ClosedGeneratorException</span><br><span class="line">  DOMException</span><br><span class="line">  <span class="built_in">ErrorException</span></span><br><span class="line">  IntlException</span><br><span class="line">  <span class="built_in">LogicException</span></span><br><span class="line">    <span class="built_in">BadFunctionCallException</span></span><br><span class="line">      <span class="built_in">BadMethodCallException</span></span><br><span class="line">    <span class="built_in">DomainException</span></span><br><span class="line">    <span class="built_in">InvalidArgumentException</span></span><br><span class="line">    <span class="built_in">LengthException</span></span><br><span class="line">    <span class="built_in">OutOfRangeException</span></span><br><span class="line">  PharException</span><br><span class="line">  ReflectionException</span><br><span class="line">  <span class="built_in">RuntimeException</span></span><br><span class="line">    <span class="built_in">OutOfBoundsException</span></span><br><span class="line">    <span class="built_in">OverflowException</span></span><br><span class="line">    PDOException</span><br><span class="line">    <span class="built_in">RangeException</span></span><br><span class="line">    <span class="built_in">UnderflowException</span></span><br><span class="line">    <span class="built_in">UnexpectedValueException</span></span><br><span class="line">  SodiumException</span><br></pre></td></tr></table></figure><p>兼容 PHP5 和 PHP7 的异常处理</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="comment">// Code that may throw an Exception or Error.</span></span><br><span class="line">&#125; <span class="keyword">catch</span> (<span class="built_in">Throwable</span> <span class="variable">$t</span>) &#123;</span><br><span class="line">    <span class="comment">// Executed only in PHP 7, will not match in PHP 5.x.</span></span><br><span class="line">&#125; <span class="keyword">catch</span> (<span class="built_in">Exception</span> <span class="variable">$e</span>) &#123;</span><br><span class="line">    <span class="comment">// Executed only in PHP 5.x, will not be reached in PHP 7.</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="自定义捕获错误和异常"><a href="#自定义捕获错误和异常" class="headerlink" title="自定义捕获错误和异常"></a>自定义捕获错误和异常</h2><ul><li>未捕获的 <code>Error</code> 和 <code>Exception</code> 通过 <code>set_exception_handler()</code> 做后续清理和日志记录</li><li>其他错误仍然通过 <code>set_error_handler()</code> 来处理，在处理的时候使用更加明确的 <code>E_*</code> 类型，并抛出 <code>ErrorException</code> 记录调用栈</li></ul><p>以下实例中使用 <code>set_error_handler()</code> 函数去捕获错误，设置一个用户自定义的错误处理函数，这里我就粗暴的抛出 了 <code>ErrorException</code> 异常，当然官方文档也明确说了这个函数不能捕获 <code>E_ERROR</code>、<code>E_PARSE</code>、<code>E_CORE_ERROR</code>、<code>E_CORE_WARNING</code>、<code>E_COMPILE_ERROR</code>、<code>E_COMPILE_WARNING</code> 和在调用 <code>set_error_handler()</code> 函数所在文件中产生的大多数 <code>E_STRICT</code> 异常，言外之语也就是仅能捕获用户定义的错误和异常。使用 <code>set_exception_handler()</code> 函数去设置默认的异常处理程序，用在没有用 <code>try/catch</code> 块来捕获的异常，也就是说不管你抛出的异常有没有人捕获，如果没有人捕获就会进入到该方法中，并且在回调函数调用后异常会中止。使用 <code>register_shutdown_function()</code> 函数去捕获 PHP 的错误：<code>Fatal or Parse Error</code> 等，正由于这个函数是 PHP 脚本执行结束前的最后一个有效调用，所以我们才用它来完成一些不可思议的事情。一般情况下，都会在这个函数的回调函数中使用 <code>error_get_last()</code> 函数来获取执行产生的错误，顺便说一下，像语法这样的错误是捕获不到的</p><h3 id="正常情况时的异常捕获"><a href="#正常情况时的异常捕获" class="headerlink" title="正常情况时的异常捕获"></a>正常情况时的异常捕获</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ErrorHandler</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">register</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        error_reporting(E_ALL);</span><br><span class="line">        set_error_handler([<span class="keyword">__CLASS__</span>, <span class="string">&#x27;handleError&#x27;</span>]);</span><br><span class="line">        set_exception_handler([<span class="keyword">__CLASS__</span>, <span class="string">&#x27;handleException&#x27;</span>]);</span><br><span class="line">        register_shutdown_function([<span class="keyword">__CLASS__</span>, <span class="string">&#x27;handleShutdown&#x27;</span>]);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">handleError</span>(<span class="params"><span class="variable">$code</span>, <span class="variable">$message</span>, <span class="variable">$file</span>, <span class="variable">$line</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> \<span class="built_in">ErrorException</span>(<span class="variable">$message</span>, <span class="variable">$code</span>, <span class="number">1</span>, <span class="variable">$file</span>, <span class="variable">$line</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">handleException</span>(<span class="params"><span class="variable">$e</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="built_in">self</span>::handle(<span class="variable">$e</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">handleShutdown</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="variable">$error</span> = error_get_last();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (<span class="literal">null</span> !== <span class="variable">$error</span> &amp;&amp; <span class="built_in">self</span>::isFatal(<span class="variable">$error</span>[<span class="string">&#x27;type&#x27;</span>])) &#123;</span><br><span class="line">            <span class="built_in">self</span>::handleException(<span class="variable">$error</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> \Exception|\Throwable $e</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">handle</span>(<span class="params"><span class="variable">$e</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="variable">$message</span> = <span class="variable">$e</span>-&gt;getMessage() . PHP_EOL;</span><br><span class="line">        <span class="keyword">echo</span> <span class="variable">$message</span>;</span><br><span class="line"></span><br><span class="line">        error_log(<span class="variable">$message</span>, <span class="number">3</span>, <span class="keyword">__DIR__</span> . <span class="string">&#x27;/run.log&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">isFatal</span>(<span class="params"><span class="variable">$type</span></span>): <span class="title">bool</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="variable">$types</span> = [E_ERROR, E_CORE_ERROR, E_COMPILE_ERROR, E_PARSE];</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> in_array(<span class="variable">$type</span>, <span class="variable">$types</span>, <span class="literal">true</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">ErrorHandler::register();</span><br><span class="line"></span><br><span class="line"><span class="variable">$object</span> = <span class="literal">null</span>;</span><br><span class="line"><span class="variable">$object</span>-&gt;toArray();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 结果</span></span><br><span class="line">Call to a member <span class="function"><span class="keyword">function</span> <span class="title">toArray</span>(<span class="params"></span>) <span class="title">on</span> <span class="title">null</span></span></span><br><span class="line"><span class="function">此时错误已经记录到日志文件中</span></span><br></pre></td></tr></table></figure><h3 id="写错语法时的异常捕获"><a href="#写错语法时的异常捕获" class="headerlink" title="写错语法时的异常捕获"></a>写错语法时的异常捕获</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 此处略去 ErrorHandler 类代码，详见上面</span></span><br><span class="line">ErrorHandler::register();</span><br><span class="line"></span><br><span class="line"><span class="variable">$object</span> = <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 这儿故意不写分号</span></span><br><span class="line"><span class="variable">$object</span>-&gt;toArray()</span><br><span class="line"></span><br><span class="line"><span class="comment">// 结果</span></span><br><span class="line">PHP Parse <span class="built_in">error</span>:  syntax <span class="built_in">error</span>, unexpected end of file in ...</span><br><span class="line">PHP</span><br><span class="line">PHP Dump <span class="variable">$_SERVER</span></span><br><span class="line">PHP</span><br><span class="line"></span><br><span class="line">Parse <span class="built_in">error</span>: syntax <span class="built_in">error</span>, unexpected end of file in ...</span><br></pre></td></tr></table></figure><p>事情进展到这里，按理来说，我应该就此停笔收尾，弄个总结之类的一忽悠一下正在阅读的你。但是呢，我又忽然想起来 PHP 那么多的框架是如何处理这个事情的，我想你也好奇，不妨我们去看看</p><h2 id="框架中的错误异常处理"><a href="#框架中的错误异常处理" class="headerlink" title="框架中的错误异常处理"></a>框架中的错误异常处理</h2><p>很遗憾的告诉你，我不会剖析框架源码，我只想做个 <code>demo</code> 得瑟一下，剩下全交给你。此处我以 <code>symfony debug</code> 为例</p><blockquote><ul><li><a target="_blank" rel="noopener" href="https://github.com/symfony/debug">Symfony debug GitHub</a></li><li><a target="_blank" rel="noopener" href="https://symfony.com/components/Debug">Symfony debug Docs</a></li></ul></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// 安装 symfony/debug</span><br><span class="line">$ composer require symfony/debug</span><br></pre></td></tr></table></figure><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">require</span> <span class="keyword">__DIR__</span> . <span class="string">&#x27;/vendor/autoload.php&#x27;</span>;</span><br><span class="line"></span><br><span class="line">\Symfony\Component\Debug\Debug::enable();</span><br><span class="line">\Symfony\Component\Debug\ErrorHandler::register();</span><br><span class="line"></span><br><span class="line"><span class="variable">$object</span> = <span class="literal">null</span>;</span><br><span class="line"><span class="variable">$object</span>-&gt;toArray();</span><br></pre></td></tr></table></figure><p><img src="https://inotes.oss-cn-beijing.aliyuncs.com/php/201812/php-error-exception-handler.png" alt="php-error-exception-handler.png"></p></div><div class="reward-container"><div>本笔记是笔者在学习和工作中的一些整理，如对您有用，请鼓励我继续写作</div><button onclick='var qr=document.getElementById("qr");qr.style.display="none"===qr.style.display?"block":"none"'>赞赏</button><div id="qr" style="display:none"><div style="display:inline-block"><img src="https://inotes.oss-cn-beijing.aliyuncs.com/common/201902/wechatpay.png" alt="笔者偶像 微信支付"><p>微信支付</p></div></div></div><footer class="post-footer"><div class="post-tags"><a href="/tags/php/" rel="tag"># php</a></div><div class="post-widgets"><div class="wp_rating"><div id="wpac-rating"></div></div></div><div class="post-nav"><div class="post-nav-item"><a href="/2018/03/18/php-highlight/" rel="prev" title="PHP - 输出中的代码语法高亮"><i class="fa fa-chevron-left"></i> PHP - 输出中的代码语法高亮</a></div><div class="post-nav-item"><a href="/2018/04/13/php-date-calculation/" rel="next" title="PHP - 日期相关计算">PHP - 日期相关计算 <i class="fa fa-chevron-right"></i></a></div></div></footer></article></div><script>window.addEventListener("tabs:register",()=>{let{activeClass:t}=CONFIG.comments;if(CONFIG.comments.storage&&(t=localStorage.getItem("comments_active")||t),t){let e=document.querySelector(`a[href="#comment-${t}"]`);e&&e.click()}}),CONFIG.comments.storage&&window.addEventListener("tabs:click",t=>{if(!t.target.matches(".tabs-comment .tab-content .tab-pane"))return;let e=t.target.classList[1];localStorage.setItem("comments_active",e)})</script></div><div class="toggle sidebar-toggle"><span class="toggle-line toggle-line-first"></span> <span class="toggle-line toggle-line-middle"></span> <span class="toggle-line toggle-line-last"></span></div><aside class="sidebar"><div class="sidebar-inner"><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc">📚 文章目录</li><li class="sidebar-nav-overview">🌈 站点概览</li></ul><div class="post-toc-wrap sidebar-panel"><div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%A6%82%E8%BF%B0"><span class="nav-number">1.</span> <span class="nav-text">概述</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86%E5%AE%9A%E4%B9%89"><span class="nav-number">1.1.</span> <span class="nav-text">错误处理定义</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86%E5%AE%9A%E4%B9%89"><span class="nav-number">1.2.</span> <span class="nav-text">异常处理定义</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%A2%84%E5%AE%9A%E4%B9%89%E7%9A%84%E9%94%99%E8%AF%AF%E4%BB%A3%E7%A0%81"><span class="nav-number">1.3.</span> <span class="nav-text">预定义的错误代码</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%9B%B8%E5%85%B3%E6%96%87%E7%AB%A0"><span class="nav-number">1.4.</span> <span class="nav-text">相关文章</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86"><span class="nav-number">2.</span> <span class="nav-text">错误处理</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86"><span class="nav-number">3.</span> <span class="nav-text">异常处理</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E6%8D%95%E8%8E%B7%E9%94%99%E8%AF%AF%E5%92%8C%E5%BC%82%E5%B8%B8"><span class="nav-number">3.1.</span> <span class="nav-text">自定义捕获错误和异常</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%AD%A3%E5%B8%B8%E6%83%85%E5%86%B5%E6%97%B6%E7%9A%84%E5%BC%82%E5%B8%B8%E6%8D%95%E8%8E%B7"><span class="nav-number">3.1.1.</span> <span class="nav-text">正常情况时的异常捕获</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%86%99%E9%94%99%E8%AF%AD%E6%B3%95%E6%97%B6%E7%9A%84%E5%BC%82%E5%B8%B8%E6%8D%95%E8%8E%B7"><span class="nav-number">3.1.2.</span> <span class="nav-text">写错语法时的异常捕获</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%A1%86%E6%9E%B6%E4%B8%AD%E7%9A%84%E9%94%99%E8%AF%AF%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86"><span class="nav-number">3.2.</span> <span class="nav-text">框架中的错误异常处理</span></a></li></ol></li></ol></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="site-author-image" itemprop="image" alt="笔者偶像" src="https://inotes.oss-cn-beijing.aliyuncs.com/common/201812/avatar.jpg"><p class="site-author-name" itemprop="name">笔者偶像</p><div class="site-description" itemprop="description">进一寸自有一寸的欢喜 🎉</div></div><div class="site-state-wrap motion-element"><nav class="site-state"><div class="site-state-item site-state-posts"><a href="/archives/"><span class="site-state-item-count">103</span> <span class="site-state-item-name">📑 日志</span></a></div><div class="site-state-item site-state-categories"><a href="/categories/"><span class="site-state-item-count">18</span> <span class="site-state-item-name">🗳 分类</span></a></div><div class="site-state-item site-state-tags"><a href="/tags/"><span class="site-state-item-count">28</span> <span class="site-state-item-name">🔖 标签</span></a></div></nav></div><div class="links-of-author motion-element"><span class="links-of-author-item"><a href="https://github.com/imajinyun" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;imajinyun" rel="noopener" target="_blank"><i class="fa-github fa-fw"></i>GitHub</a> </span><span class="links-of-author-item"><a href="mailto:imajinyun@gmail.com" title="E-Mail → mailto:imajinyun@gmail.com" rel="noopener" target="_blank"><i class="fa-envelope fa-fw"></i>E-Mail</a></span></div></div></div></aside><div id="sidebar-dimmer"></div></div></main><footer class="footer"><div class="footer-inner"><div class="copyright">&copy; 2018 – <span itemprop="copyrightYear">2022</span> <span class="with-love"><i class="fa fa-heart"></i> </span><span class="author" itemprop="copyrightHolder">Jinyun's Notes</span></div><div class="powered-by">🙏 由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://pisces.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a> 强力驱动</div></div></footer></div><script src="/lib/anime.min.js"></script><script src="/lib/velocity/velocity.min.js"></script><script src="/lib/velocity/velocity.ui.min.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/pisces.js"></script><script src="/js/next-boot.js"></script><script>CONFIG.page.isPost&&(wpac_init=window.wpac_init||[],wpac_init.push({widget:"Rating",id:9009,el:"wpac-rating",color:"fc6423"}),function(){if(!("WIDGETPACK_LOADED"in window)){WIDGETPACK_LOADED=!0;var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="//embed.widgetpack.com/widget.js";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t.nextSibling)}}())</script><script src="//cdn.jsdelivr.net/npm/algoliasearch@4/dist/algoliasearch-lite.umd.js"></script><script src="//cdn.jsdelivr.net/npm/instantsearch.js@4/dist/instantsearch.production.min.js"></script><script src="/js/algolia-search.js"></script></body></html>