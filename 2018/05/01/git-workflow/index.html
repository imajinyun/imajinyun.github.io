<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#222"><meta name="generator" content="Hexo 5.4.0"><link rel="apple-touch-icon" sizes="180x180" href="https://inotes.oss-cn-beijing.aliyuncs.com/common/201812/apple-touch-icon-next.png"><link rel="icon" type="image/png" sizes="32x32" href="https://inotes.oss-cn-beijing.aliyuncs.com/common/201812/favicon-32x32-next.png"><link rel="icon" type="image/png" sizes="16x16" href="https://inotes.oss-cn-beijing.aliyuncs.com/common/201812/favicon-16x16-next.png"><link rel="mask-icon" href="https://inotes.oss-cn-beijing.aliyuncs.com/common/201812/logo.svg" color="#222"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="/lib/font-awesome/css/all.min.css"><script id="hexo-configurations">var NexT=window.NexT||{},CONFIG={hostname:"imajinyun.xyz",root:"/",scheme:"Pisces",version:"7.8.0",exturl:!1,sidebar:{position:"left",display:"post",padding:18,offset:12,onmobile:!1},copycode:{enable:!0,show_result:!0,style:"flat"},back2top:{enable:!0,sidebar:!1,scrollpercent:!1},bookmark:{enable:!1,color:"#222",save:"auto"},fancybox:!1,mediumzoom:!1,lazyload:!1,pangu:!1,comments:{style:"tabs",active:null,storage:!0,lazyload:!1,nav:null},algolia:{appID:"MY71JUZ8GH",apiKey:"06f460e5776acfe140c52e3ba3537780",indexName:"ProdNotes",hits:{per_page:10},labels:{input_placeholder:"🐶 Search for Posts",hits_empty:"🙏 未发现与<b>『${query}』</b>相关的内容",hits_stats:'🚀 <b style="color: red">${hits}</b> 条相关条目，使用了 <b style="color: red">${time}</b> ms'}},localsearch:{enable:!1,trigger:"auto",top_n_per_article:1,unescape:!1,preload:!1},motion:{enable:!0,async:!1,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn",sidebar:"slideUpIn"}},path:"search.xml"}</script><meta name="description" content="🎢 工作流 - Workflow：是对工作流程及其各操作步骤之间业务规则的抽象、概括描述。工作流建模，即将工作流程中的工作如何前后组织在一起的逻辑和规则，在计算机中以恰当的模型表达并对其实施计算。工作流要解决的主要问题是：为实现某个业务目标，利用计算机在多个参与者之间按某种预定规则自动传递文档、信息或者任务。"><meta property="og:type" content="article"><meta property="og:title" content="Git Workflow"><meta property="og:url" content="https://imajinyun.xyz/2018/05/01/git-workflow/index.html"><meta property="og:site_name" content="Jinyun&#39;s Notes 🚀"><meta property="og:description" content="🎢 工作流 - Workflow：是对工作流程及其各操作步骤之间业务规则的抽象、概括描述。工作流建模，即将工作流程中的工作如何前后组织在一起的逻辑和规则，在计算机中以恰当的模型表达并对其实施计算。工作流要解决的主要问题是：为实现某个业务目标，利用计算机在多个参与者之间按某种预定规则自动传递文档、信息或者任务。"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://inotes.oss-cn-beijing.aliyuncs.com/git/201812/1006-centralized-workflow.svg"><meta property="og:image" content="https://inotes.oss-cn-beijing.aliyuncs.com/git/201812/1007-gitflow-workflow.png"><meta property="og:image" content="https://inotes.oss-cn-beijing.aliyuncs.com/git/201812/1008-gitflow-commands.png"><meta property="og:image" content="https://inotes.oss-cn-beijing.aliyuncs.com/git/201812/1009-git-forking-workflow.png"><meta property="og:image" content="https://inotes.oss-cn-beijing.aliyuncs.com/git/201812/1010-git-forking-create.jpg"><meta property="og:image" content="https://inotes.oss-cn-beijing.aliyuncs.com/git/201812/1011-git-forking-repo.jpg"><meta property="og:image" content="https://inotes.oss-cn-beijing.aliyuncs.com/git/201812/1012-git-forking-pr-create.jpg"><meta property="og:image" content="https://inotes.oss-cn-beijing.aliyuncs.com/git/201812/1013-git-forking-pr-open.jpg"><meta property="og:image" content="https://inotes.oss-cn-beijing.aliyuncs.com/git/201812/1014-git-forking-pr-show.jpg"><meta property="og:image" content="https://inotes.oss-cn-beijing.aliyuncs.com/git/201812/1015-git-forking-merged.jpg"><meta property="og:image" content="https://inotes.oss-cn-beijing.aliyuncs.com/git/201812/1016-git-forking-conflicts.jpg"><meta property="og:image" content="https://inotes.oss-cn-beijing.aliyuncs.com/git/201812/1017-git-forking-resolved-conflicts.jpg"><meta property="og:image" content="https://inotes.oss-cn-beijing.aliyuncs.com/git/201812/1018-git-forking-mark-resolved.jpg"><meta property="og:image" content="https://inotes.oss-cn-beijing.aliyuncs.com/git/201812/1019-git-forking-resolved-conflicts-merged.jpg"><meta property="og:image" content="https://inotes.oss-cn-beijing.aliyuncs.com/git/201812/1020-forking-feature-merged.jpg"><meta property="og:image" content="https://inotes.oss-cn-beijing.aliyuncs.com/git/201812/1021-forking-close-merged.jpg"><meta property="og:image" content="https://inotes.oss-cn-beijing.aliyuncs.com/git/201812/1022-forking-feature.jpg"><meta property="og:image" content="https://inotes.oss-cn-beijing.aliyuncs.com/git/201812/1023-feature-branch-workflow.png"><meta property="og:image" content="https://inotes.oss-cn-beijing.aliyuncs.com/git/201812/1024-fb-pr-pro-create.jpg"><meta property="og:image" content="https://inotes.oss-cn-beijing.aliyuncs.com/git/201812/1025-fb-pr-collaborator.jpg"><meta property="og:image" content="https://inotes.oss-cn-beijing.aliyuncs.com/git/201812/1026-fb-pr-invitation.jpg"><meta property="og:image" content="https://inotes.oss-cn-beijing.aliyuncs.com/git/201812/1027-fb-pr-new.jpg"><meta property="og:image" content="https://inotes.oss-cn-beijing.aliyuncs.com/git/201812/1028-fb-pr-finish.jpg"><meta property="og:image" content="https://inotes.oss-cn-beijing.aliyuncs.com/git/201812/1029-fb-pr-open.jpg"><meta property="og:image" content="https://inotes.oss-cn-beijing.aliyuncs.com/git/201812/1030-fb-pr-merged-by-qwert.jpg"><meta property="og:image" content="https://inotes.oss-cn-beijing.aliyuncs.com/git/201812/1031-fb-pr-resolved-by-poiuy.jpg"><meta property="og:image" content="https://inotes.oss-cn-beijing.aliyuncs.com/git/201812/1032-fb-pr-mark-resolved.jpg"><meta property="og:image" content="https://inotes.oss-cn-beijing.aliyuncs.com/git/201812/1033-fb-pr-resolved-conflicts.jpg"><meta property="og:image" content="https://inotes.oss-cn-beijing.aliyuncs.com/git/201812/1034-fb-pr-resolved-conflicts-merged.jpg"><meta property="og:image" content="https://inotes.oss-cn-beijing.aliyuncs.com/git/201812/1035-fb-pr-master.jpg"><meta property="article:published_time" content="2018-05-01T13:16:45.000Z"><meta property="article:modified_time" content="2021-09-25T07:43:00.474Z"><meta property="article:author" content="Jinyun"><meta property="article:tag" content="git"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://inotes.oss-cn-beijing.aliyuncs.com/git/201812/1006-centralized-workflow.svg"><link rel="canonical" href="https://imajinyun.xyz/2018/05/01/git-workflow/"><script id="page-configurations">CONFIG.page={sidebar:"",isHome:!1,isPost:!0,lang:"zh-CN"}</script><title>Git Workflow | Jinyun's Notes 🚀</title><script>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?80ab72b54c102cbfec5064e3feaea6c8";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script><noscript><style>.sidebar-inner,.use-motion .brand,.use-motion .collection-header,.use-motion .comments,.use-motion .menu-item,.use-motion .pagination,.use-motion .post-block,.use-motion .post-body,.use-motion .post-header{opacity:initial}.use-motion .site-subtitle,.use-motion .site-title{opacity:initial;top:initial}.use-motion .logo-line-before i{left:initial}.use-motion .logo-line-after i{right:initial}</style></noscript></head><body itemscope itemtype="http://schema.org/WebPage"><div class="container use-motion"><div class="headband"></div><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-container"><div class="site-nav-toggle"><div class="toggle" aria-label="切换导航栏"><span class="toggle-line toggle-line-first"></span> <span class="toggle-line toggle-line-middle"></span> <span class="toggle-line toggle-line-last"></span></div></div><div class="site-meta"><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span><h1 class="site-title">Jinyun's Notes 🚀</h1><span class="logo-line-after"><i></i></span></a><p class="site-subtitle" itemprop="description">没什么天赋，爱好也不多，但愿坚持做些喜欢的事情</p></div><div class="site-nav-right"><div class="toggle popup-trigger"><i class="fa fa-search fa-fw fa-lg"></i></div></div></div><nav class="site-nav"><ul id="menu" class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home"></i>首页</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user"></i>关于</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags"></i>标签</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th"></i>分类</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive"></i>归档</a></li><li class="menu-item menu-item-links"><a href="/links/" rel="section"><i class="fa fa-link"></i>友链</a></li><li class="menu-item menu-item-search"><a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索</a></li></ul></nav><div class="search-pop-overlay"><div class="popup search-popup"><div class="search-header"><span class="search-icon"><i class="fa fa-search"></i></span><div class="search-input-container"></div><span class="popup-btn-close"><i class="fa fa-times-circle"></i></span></div><div class="algolia-results"><div id="algolia-stats"></div><div id="algolia-hits"></div><div id="algolia-pagination" class="algolia-pagination"></div></div></div></div></div></header><div class="back-to-top"><i class="fa fa-arrow-up"></i> <span>0%</span></div><a href="https://github.com/imajinyun" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin:130px 106px" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a><main class="main"><div class="main-inner"><div class="content-wrap"><div class="content post posts-expand"><article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://imajinyun.xyz/2018/05/01/git-workflow/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="https://inotes.oss-cn-beijing.aliyuncs.com/common/201812/avatar.jpg"><meta itemprop="name" content="笔者偶像"><meta itemprop="description" content="进一寸自有一寸的欢喜 🎉"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Jinyun's Notes 🚀"></span><header class="post-header"><h1 class="post-title" itemprop="name headline">Git Workflow</h1><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2018-05-01 21:16:45" itemprop="dateCreated datePublished" datetime="2018-05-01T21:16:45+08:00">2018-05-01</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i> </span><span class="post-meta-item-text">更新于</span> <time title="修改时间：2021-09-25 15:43:00" itemprop="dateModified" datetime="2021-09-25T15:43:00+08:00">2021-09-25</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/git/" itemprop="url" rel="index"><span itemprop="name">git</span></a></span></span></div></header><div class="post-body" itemprop="articleBody"><p>🎢 工作流 - <code>Workflow</code>：是对工作流程及其各操作步骤之间业务规则的抽象、概括描述。工作流建模，即将工作流程中的工作如何前后组织在一起的逻辑和规则，在计算机中以恰当的模型表达并对其实施计算。工作流要解决的主要问题是：为实现某个业务目标，利用计算机在多个参与者之间按某种预定规则自动传递文档、信息或者任务。</p><span id="more"></span><ul><li><a href="https://imajinyun.xyz/2018/01/22/git-started/"><code>Git 起步</code></a></li><li><a href="https://imajinyun.xyz/2018/01/23/git-basic/"><code>Git 基本操作</code></a></li><li><a href="https://imajinyun.xyz/2018/01/24/git-log/"><code>Git 查看日志</code></a></li><li><a href="https://imajinyun.xyz/2018/01/25/git-branch/"><code>Git 分支</code></a></li><li><a href="https://imajinyun.xyz/2018/01/27/git-multiple-accounts/"><code>Git 中一个客户端设置多个账号</code></a></li><li><a href="https://imajinyun.xyz/2018/05/01/git-workflow/"><strong>Git Workflow</strong></a></li><li><a href="https://imajinyun.xyz/2020/09/07/git-collection-command/"><code>Git 命令大全</code></a></li></ul><h1 id="Git-Workflow"><a href="#Git-Workflow" class="headerlink" title="Git Workflow"></a>Git Workflow</h1><p>为了让大家有效地合作，使得项目井井有条地发展下去而抽象出来的一系列 <code>git</code> 操作步骤及流程，没错，是针对 <code>git</code> 的操作使用流程。</p><h1 id="常见的工作流"><a href="#常见的工作流" class="headerlink" title="常见的工作流"></a>常见的工作流</h1><h2 id="集中式工作流"><a href="#集中式工作流" class="headerlink" title="集中式工作流"></a>集中式工作流</h2><blockquote><p><a target="_blank" rel="noopener" href="https://www.atlassian.com/git/tutorials/comparing-workflows#centralized-workflow">集中式工作流 - <code>Centralized Workflow</code></a></p></blockquote><p><img src="https://inotes.oss-cn-beijing.aliyuncs.com/git/201812/1006-centralized-workflow.svg" alt="1006-centralized-workflow.svg"></p><h3 id="创建中央仓库"><a href="#创建中央仓库" class="headerlink" title="创建中央仓库"></a>创建中央仓库</h3><p>假定 <code>git</code> 创建了一个裸仓库：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ ssh git@host</span><br><span class="line">$ <span class="built_in">cd</span> ~ &amp;&amp; mkdir -pv repository</span><br><span class="line"></span><br><span class="line">// 创建一个裸仓库，按照约定，加上 .git 扩展名</span><br><span class="line">$ git init --bare /home/git/repository/repo.git</span><br></pre></td></tr></table></figure><h3 id="开发人员介入"><a href="#开发人员介入" class="headerlink" title="开发人员介入"></a>开发人员介入</h3><h4 id="第一阶段：本地自嗨"><a href="#第一阶段：本地自嗨" class="headerlink" title="第一阶段：本地自嗨"></a>第一阶段：本地自嗨</h4><div class="note info"><p>这一阶段，<code>qwert</code> 可以按自己需求反复操作多次，而不用担心中央仓库上有了什么操作，同样的情况也适用于 <code>poiuy</code></p></div><p>开发者 <code>qwert</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">// 拉取代码</span><br><span class="line">$ <span class="built_in">cd</span> ~ &amp;&amp; git <span class="built_in">clone</span> ssh://git@host/home/git/repository/repo.git</span><br><span class="line"></span><br><span class="line">// 查看状态</span><br><span class="line">$ git status</span><br><span class="line"></span><br><span class="line">// 创建 README.md 文件</span><br><span class="line">$ touch README.md</span><br><span class="line"></span><br><span class="line">// 将 README.md 文件加入暂存区</span><br><span class="line">$ git add README.md</span><br><span class="line"></span><br><span class="line">// 设置用户名和邮箱</span><br><span class="line">$ git config user.email <span class="string">&quot;qwert@example.com&quot;</span></span><br><span class="line">$ git config user.name <span class="string">&quot;qwert&quot;</span></span><br><span class="line"></span><br><span class="line">// 提交代码到本地仓库</span><br><span class="line">$ git commit -m <span class="string">&quot;Add README.md&quot;</span></span><br></pre></td></tr></table></figure><p>开发者 <code>poiuy</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">// 拉取代码</span><br><span class="line">$ <span class="built_in">cd</span> ~ &amp;&amp; git <span class="built_in">clone</span> ssh://git@host/home/git/repository/repo.git</span><br><span class="line"></span><br><span class="line">// 查看状态</span><br><span class="line">$ git status</span><br><span class="line"></span><br><span class="line">// 创建 README.md 文件</span><br><span class="line">$ touch README.md</span><br><span class="line"></span><br><span class="line">// 将 README.md 文件加入暂存区</span><br><span class="line">$ git add README.md</span><br><span class="line">$ vim README.md</span><br><span class="line">1. this is the first commit.</span><br><span class="line"></span><br><span class="line">// 设置用户名和邮箱</span><br><span class="line">$ git config user.email <span class="string">&quot;poiuy@example.com&quot;</span></span><br><span class="line">$ git config user.name <span class="string">&quot;poiuy&quot;</span></span><br><span class="line"></span><br><span class="line">// 提交代码到本地仓库</span><br><span class="line">$ git commit -m <span class="string">&quot;Add README.md&quot;</span></span><br></pre></td></tr></table></figure><p>直到这时两个人都相安无事，在各自的本地仓库玩的尽心。但事情不会就这样了结了，否则，我就没法往下写了。</p><h4 id="第二阶段：远程混战"><a href="#第二阶段：远程混战" class="headerlink" title="第二阶段：远程混战"></a>第二阶段：远程混战</h4><p>这时起，情况就变的有些复杂了，还好局面可控。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">// qwert 提交代码到远程仓库</span><br><span class="line">$ git push origin master</span><br><span class="line"></span><br><span class="line">// 接下来，poiuy 也将代码提交到远程仓库，这时真正的悲剧产生了</span><br><span class="line">$ git push origin master</span><br><span class="line">To ssh://git@host/home/git/repository/repo.git</span><br><span class="line"> ! [rejected]        master -&gt; master (fetch first)</span><br><span class="line">error: failed to push some refs to <span class="string">&#x27;ssh://git@host/home/git/repository/repo.git&#x27;</span></span><br><span class="line">hint: Updates were rejected because the remote contains work that you <span class="keyword">do</span></span><br><span class="line">hint: not have locally. This is usually caused by another repository pushing</span><br><span class="line">hint: to the same ref. You may want to first merge the remote changes (e.g.,</span><br><span class="line">hint: <span class="string">&#x27;git pull&#x27;</span>) before pushing again.</span><br><span class="line">hint: See the <span class="string">&#x27;Note about fast-forwards&#x27;</span> <span class="keyword">in</span> <span class="string">&#x27;git push --help&#x27;</span> <span class="keyword">for</span> details.</span><br><span class="line"></span><br><span class="line">// 也就是说，poiuy 得先拉一下远程仓库的代码到本地，再进行提交，因为你在人家 push 后面进行 push 的，这不怪你</span><br><span class="line">$ git pull --rebase origin master</span><br><span class="line">warning: no common commits</span><br><span class="line">remote: Counting objects: 3, <span class="keyword">done</span>.</span><br><span class="line">remote: Total 3 (delta 0), reused 0 (delta 0)</span><br><span class="line">Unpacking objects: 100% (3/3), <span class="keyword">done</span>.</span><br><span class="line">From ssh://host/home/git/repository/repo</span><br><span class="line"> * branch            master     -&gt; FETCH_HEAD</span><br><span class="line">First, rewinding head to replay your work on top of it...</span><br><span class="line">Applying: Add README.md</span><br><span class="line">Using index info to reconstruct a base tree...</span><br><span class="line">Falling back to patching base and 3-way merge...</span><br><span class="line">Auto-merging README.md</span><br></pre></td></tr></table></figure><div class="note danger"><p><code>--rebase</code>：这个选项就是告诉 <code>Git</code> 把 <code>poiuy</code> 的提交移到同步了中央仓库修改后的 <code>master</code> 分支的顶部。如果你忘加了这个选项，<code>pull</code> 操作仍然可以完成，但每次 <code>pull</code> 操作要同步中央仓库中别人修改时，提交历史会以一个多余的『合并提交』结尾。对于集中式工作流，最好是使用 <code>rebase</code> 而不是生成一个合并提交。</p></div><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line">// qwert 续续编辑文件 README.md 并提交推送到远程</span><br><span class="line">$ vim README.md</span><br><span class="line">1. this is the second commit. <span class="comment"># 只将单词 first 改为 second</span></span><br><span class="line">$ git add README.md</span><br><span class="line">$ git commit -m <span class="string">&quot;Update README.md&quot;</span></span><br><span class="line">$ git push origin master</span><br><span class="line"></span><br><span class="line">// poiuy 使用 git pull 同步远程代码到本地，这将产生一个冲突</span><br><span class="line">$ git pull origin master</span><br><span class="line">remote: Counting objects: 5, <span class="keyword">done</span>.</span><br><span class="line">remote: Total 3 (delta 0), reused 0 (delta 0)</span><br><span class="line">Unpacking objects: 100% (3/3), <span class="keyword">done</span>.</span><br><span class="line">From ssh://host/home/git/repository/repo</span><br><span class="line"> * [new branch]      master     -&gt; origin/master</span><br><span class="line">Auto-merging README.md</span><br><span class="line">CONFLICT (content): Merge conflict <span class="keyword">in</span> README.md</span><br><span class="line">Automatic merge failed; fix conflicts and <span class="keyword">then</span> commit the result.</span><br><span class="line"></span><br><span class="line">// poiuy 使用 git pull --rebase 同步远程代码到本地，托 --rebase 的福没有产生冲突</span><br><span class="line">$ git pull --rebase origin master</span><br><span class="line">From ssh://host/home/git/repository/repo</span><br><span class="line"> * branch            master     -&gt; FETCH_HEAD</span><br><span class="line">First, rewinding head to replay your work on top of it...</span><br><span class="line">Fast-forwarded master to 3a24fcf204956f97a7499393fbca68e3a77df040.</span><br><span class="line"></span><br><span class="line">// poiuy 继续编辑 README.md</span><br><span class="line">$ vim README.md</span><br><span class="line">1. this is the second commit.</span><br><span class="line">2. poiuy <span class="comment"># 新增一行</span></span><br><span class="line">$ git add .</span><br><span class="line">$ git commit -m <span class="string">&quot;Update README.md&quot;</span></span><br><span class="line">$ git push origin master</span><br><span class="line"></span><br><span class="line">// qwert 继续编辑 README.md</span><br><span class="line">$ vim README.md</span><br><span class="line">1. this is the second commit.</span><br><span class="line">2. qwert <span class="comment"># 新增一行</span></span><br><span class="line">$ git add .</span><br><span class="line">$ git commit -m <span class="string">&quot;Update README.md&quot;</span></span><br><span class="line">$ git push origin master <span class="comment"># 这时远程仓库拒绝 qwert 的提交，因为 poiuy 已经将最新改动提交到远程了，qwert 必须将远程同步到本地</span></span><br><span class="line">To ssh://git@host/home/git/repository/repo.git</span><br><span class="line"> ! [rejected]        master -&gt; master (fetch first)</span><br><span class="line">error: failed to push some refs to <span class="string">&#x27;ssh://git@host/home/git/repository/repo.git&#x27;</span></span><br><span class="line">hint: Updates were rejected because the remote contains work that you <span class="keyword">do</span></span><br><span class="line">hint: not have locally. This is usually caused by another repository pushing</span><br><span class="line">hint: to the same ref. You may want to first merge the remote changes (e.g.,</span><br><span class="line">hint: <span class="string">&#x27;git pull&#x27;</span>) before pushing again.</span><br><span class="line">hint: See the <span class="string">&#x27;Note about fast-forwards&#x27;</span> <span class="keyword">in</span> <span class="string">&#x27;git push --help&#x27;</span> <span class="keyword">for</span> details.</span><br><span class="line">$ git pull --rebase origin master <span class="comment"># 不是说拉取的姿势不对，而是两者都对同一行内容进行编辑，冲突无疑呀</span></span><br><span class="line">remote: Counting objects: 5, <span class="keyword">done</span>.</span><br><span class="line">remote: Total 3 (delta 0), reused 0 (delta 0)</span><br><span class="line">Unpacking objects: 100% (3/3), <span class="keyword">done</span>.</span><br><span class="line">From ssh://host/home/git/repository/repo</span><br><span class="line"> * branch            master     -&gt; FETCH_HEAD</span><br><span class="line">First, rewinding head to replay your work on top of it...</span><br><span class="line">Applying: Update README.md</span><br><span class="line">Using index info to reconstruct a base tree...</span><br><span class="line">M  README.md</span><br><span class="line">Falling back to patching base and 3-way merge...</span><br><span class="line">Auto-merging README.md</span><br><span class="line">CONFLICT (content): Merge conflict <span class="keyword">in</span> README.md</span><br><span class="line">Failed to merge <span class="keyword">in</span> the changes.</span><br><span class="line">Patch failed at 0001 Update README.md</span><br><span class="line">The copy of the patch that failed is found <span class="keyword">in</span>:</span><br><span class="line">   /home/qwert/repo/.git/rebase-apply/patch</span><br><span class="line"></span><br><span class="line">When you have resolved this problem, run <span class="string">&quot;git rebase --continue&quot;</span>.</span><br><span class="line">If you prefer to skip this patch, run <span class="string">&quot;git rebase --skip&quot;</span> instead.</span><br><span class="line">To check out the original branch and stop rebasing, run <span class="string">&quot;git rebase --abort&quot;</span>.</span><br><span class="line"></span><br><span class="line">// qwert 解决冲突，解决一个冲突</span><br><span class="line">$ git add &lt;conflict-to-resolve-file&gt;</span><br><span class="line">$ git rebase --<span class="built_in">continue</span> <span class="comment"># 直到出现 No rebase in progress?</span></span><br><span class="line"></span><br><span class="line">// qwert 在解决冲突的过程中，发现有些搞不定，弄乱了，还可以撤销</span><br><span class="line">$ git rebase --abort</span><br><span class="line"></span><br><span class="line">// 如果 qwert 顺利解决了所有冲突，就愉快地发布他的修改</span><br><span class="line">$ git push origin master</span><br></pre></td></tr></table></figure><p>正如引用文章中提到的，仅使用几个 <code>Git</code> 命令我们就可以模拟出传统 <code>Subversion</code> 开发环境。对于要从 <code>SVN</code> 迁移过来的团队来说这太好了，但没有发挥出 <code>Git</code> 分布式本质的优势。</p><p>集中式工作流的使用场景：</p><ul><li>团队人数少</li><li>开发不是很频繁</li><li>团队沟通方便</li><li>不需同时维护多个版本</li></ul><h2 id="Gitflow-工作流"><a href="#Gitflow-工作流" class="headerlink" title="Gitflow 工作流"></a>Gitflow 工作流</h2><blockquote><p><a target="_blank" rel="noopener" href="https://www.atlassian.com/git/tutorials/comparing-workflows/gitflow-workflow">Gitflow 工作流 - <code>Gitflow Workflow</code></a></p></blockquote><p><img src="https://inotes.oss-cn-beijing.aliyuncs.com/git/201812/1007-gitflow-workflow.png" alt="1007-gitflow-workflow.png"></p><h3 id="拉取远程仓库"><a href="#拉取远程仓库" class="headerlink" title="拉取远程仓库"></a>拉取远程仓库</h3><p><code>Gitflow</code> 工作流仍然用中央仓库作为所有开发者的交互中心。这里我沿用集中式工作流中创建的仓库。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">// qwert 工作准备</span><br><span class="line">$ ssh qwert@host &amp;&amp; <span class="built_in">cd</span> ~ &amp;&amp; git <span class="built_in">clone</span> ssh://git@host/home/git/repository/repo.git</span><br><span class="line">$ git config user.name <span class="string">&quot;qwert&quot;</span></span><br><span class="line">$ git config user.email <span class="string">&quot;qwert@example.com&quot;</span></span><br><span class="line"></span><br><span class="line">// poiuy 工作准备</span><br><span class="line">$ ssh poiuy@host &amp;&amp; <span class="built_in">cd</span> ~ &amp;&amp; git <span class="built_in">clone</span> ssh://git@host/home/git/repository/repo.git</span><br><span class="line">$ git config user.name <span class="string">&quot;poiuy&quot;</span></span><br><span class="line">$ git config user.email <span class="string">&quot;poiuy@example.com&quot;</span></span><br></pre></td></tr></table></figure><h3 id="Gitflow-工具安装"><a href="#Gitflow-工具安装" class="headerlink" title="Gitflow 工具安装"></a>Gitflow 工具安装</h3><blockquote><ul><li><a target="_blank" rel="noopener" href="https://github.com/petervanderdoes/gitflow-avh/wiki/Installation">AVH Edition 安装说明</a></li><li><a target="_blank" rel="noopener" href="https://danielkummer.github.io/git-flow-cheatsheet/index.zh_CN.html">git-flow 备忘清单</a></li></ul></blockquote><p>Gitflow 两个长期分支：</p><ul><li>主分支 <code>master</code></li><li>开发分支 <code>develop</code></li></ul><p>Gitflow 三个短期分支：</p><ul><li>功能分支 <code>feature branch</code></li><li>补丁分支 <code>hotfix branch</code></li><li>预发分支 <code>release branch</code></li></ul><p>关于 <code>git-flow</code> 这篇 <a target="_blank" rel="noopener" href="https://www.git-tower.com/learn/git/ebook/cn/command-line/advanced-topics/git-flow">Learn Version Control with Git</a> 说的非常到位。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// Linux 下安装</span><br><span class="line">$ curl --insecure --silent --location  https://raw.githubusercontent.com/petervanderdoes/gitflow-avh/develop/contrib/gitflow-installer.sh --output ./gitflow-installer.sh</span><br><span class="line">$ chmod +x ./gitflow-installer.sh</span><br><span class="line">$ sudo ./gitflow-installer.sh install stable</span><br></pre></td></tr></table></figure><h3 id="Gitflow-初始化"><a href="#Gitflow-初始化" class="headerlink" title="Gitflow 初始化"></a>Gitflow 初始化</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">// qwert 用户初始化 git-flow</span><br><span class="line">$ git flow init</span><br><span class="line"></span><br><span class="line">Which branch should be used <span class="keyword">for</span> bringing forth production releases?</span><br><span class="line">   - master</span><br><span class="line">Branch name <span class="keyword">for</span> production releases: [master]</span><br><span class="line">Branch name <span class="keyword">for</span> <span class="string">&quot;next release&quot;</span> development: [develop]</span><br><span class="line"></span><br><span class="line">How to name your supporting branch prefixes?</span><br><span class="line">Feature branches? [feature/]</span><br><span class="line">Bugfix branches? [bugfix/]</span><br><span class="line">Release branches? [release/]</span><br><span class="line">Hotfix branches? [hotfix/]</span><br><span class="line">Support branches? [support/]</span><br><span class="line">Version tag prefix? []</span><br><span class="line">Hooks and filters directory? [/home/qwert/repo/.git/hooks]</span><br><span class="line">$ git push -u origin develop <span class="comment"># 将 develop 分支提交到远程仓库</span></span><br><span class="line"></span><br><span class="line">// poiuy 用户初始化 git-flow</span><br><span class="line">$ git flow init</span><br><span class="line"></span><br><span class="line">Which branch should be used <span class="keyword">for</span> bringing forth production releases?</span><br><span class="line">   - master</span><br><span class="line">Branch name <span class="keyword">for</span> production releases: [master]</span><br><span class="line">Branch name <span class="keyword">for</span> <span class="string">&quot;next release&quot;</span> development: [develop]</span><br><span class="line"></span><br><span class="line">How to name your supporting branch prefixes?</span><br><span class="line">Feature branches? [feature/]</span><br><span class="line">Bugfix branches? [bugfix/]</span><br><span class="line">Release branches? [release/]</span><br><span class="line">Hotfix branches? [hotfix/]</span><br><span class="line">Support branches? [support/]</span><br><span class="line">Version tag prefix? []</span><br><span class="line">Hooks and filters directory? [/home/poiuy/repo/.git/hooks]</span><br></pre></td></tr></table></figure><h3 id="开发阶段"><a href="#开发阶段" class="headerlink" title="开发阶段"></a>开发阶段</h3><p>开发者 <code>qwert</code>：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">// qwert 开启一个功能分支，进行项目某个功能开发</span><br><span class="line">$ git flow feature start feature-qwert</span><br><span class="line">Switched to a new branch <span class="string">&#x27;feature/feature-qwert&#x27;</span></span><br><span class="line"></span><br><span class="line">Summary of actions:</span><br><span class="line">- A new branch <span class="string">&#x27;feature/feature-qwert&#x27;</span> was created, based on <span class="string">&#x27;develop&#x27;</span></span><br><span class="line">- You are now on branch <span class="string">&#x27;feature/feature-qwert&#x27;</span></span><br><span class="line"></span><br><span class="line">Now, start committing on your feature. When <span class="keyword">done</span>, use:</span><br><span class="line"></span><br><span class="line">     git flow feature finish feature-qwert</span><br><span class="line"></span><br><span class="line">// qwert 操作</span><br><span class="line">$ vim README.md</span><br><span class="line">1. this is the second commit.</span><br><span class="line">2. poiuy</span><br><span class="line">3. qwert</span><br><span class="line">4. qwert feature start.</span><br><span class="line">$ git add README.md</span><br><span class="line">$ git commit -m <span class="string">&quot;Update README.md&quot;</span></span><br><span class="line">$ git flow feature finish feature-qwert <span class="comment"># 此时 qwert 将完成开发结束任务，feature-qwert 分支的使命就此完结</span></span><br><span class="line">Switched to branch <span class="string">&#x27;develop&#x27;</span></span><br><span class="line">Updating d62035e..ced573c</span><br><span class="line">Fast-forward</span><br><span class="line"> README.md | 1 +</span><br><span class="line"> 1 file changed, 1 insertion(+)</span><br><span class="line">Deleted branch feature/feature-qwert (was ced573c).</span><br><span class="line"></span><br><span class="line">Summary of actions:</span><br><span class="line">- The feature branch <span class="string">&#x27;feature/feature-qwert&#x27;</span> was merged into <span class="string">&#x27;develop&#x27;</span></span><br><span class="line">- Feature branch <span class="string">&#x27;feature/feature-qwert&#x27;</span> has been locally deleted</span><br><span class="line">- You are now on branch <span class="string">&#x27;develop&#x27;</span></span><br><span class="line">$ git push origin develop <span class="comment"># 将 develop 分支提交到远程仓库</span></span><br></pre></td></tr></table></figure><p>开发者 <code>poiuy</code>：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">// poiuy 开启一个功能分支，进行项目另一个功能开发</span><br><span class="line">$ git flow feature start feature-poiuy</span><br><span class="line">Switched to a new branch <span class="string">&#x27;feature/feature-poiuy&#x27;</span></span><br><span class="line"></span><br><span class="line">Summary of actions:</span><br><span class="line">- A new branch <span class="string">&#x27;feature/feature-poiuy&#x27;</span> was created, based on <span class="string">&#x27;develop&#x27;</span></span><br><span class="line">- You are now on branch <span class="string">&#x27;feature/feature-poiuy&#x27;</span></span><br><span class="line"></span><br><span class="line">Now, start committing on your feature. When <span class="keyword">done</span>, use:</span><br><span class="line"></span><br><span class="line">     git flow feature finish feature-poiuy</span><br><span class="line"></span><br><span class="line">// poiuy 操作</span><br><span class="line">$ vim README.md</span><br><span class="line">1. this is the second commit.</span><br><span class="line">2. poiuy</span><br><span class="line">3. qwert</span><br><span class="line">4. poiuy feature start.</span><br><span class="line">$ git README.md</span><br><span class="line">$ git commit -m <span class="string">&quot;Update README.md&quot;</span></span><br><span class="line">$ git flow feature finish feature-poiuy <span class="comment"># 此时 poiuy 将完成开发结束任务，feature-poiuy 分支的使命就此完结</span></span><br><span class="line"></span><br><span class="line">// poiuy 跟踪远程分支</span><br><span class="line">$ git branch --set-upstream-to=origin/develop develop</span><br><span class="line">Branch develop <span class="built_in">set</span> up to track remote branch develop from origin.</span><br><span class="line">$ git push origin develop <span class="comment"># poiuy 将开发好的功能推送到远程，但抱歉的时，此时远程 develop 已经向前滚动，因为不只是你一个人在开发</span></span><br><span class="line">To ssh://git@host/home/git/repository/repo.git</span><br><span class="line"> ! [rejected]        develop -&gt; develop (non-fast-forward)</span><br><span class="line">error: failed to push some refs to <span class="string">&#x27;ssh://git@host/home/git/repository/repo.git&#x27;</span></span><br><span class="line">hint: Updates were rejected because the tip of your current branch is behind</span><br><span class="line">hint: its remote counterpart. Merge the remote changes (e.g. <span class="string">&#x27;git pull&#x27;</span>)</span><br><span class="line">hint: before pushing again.</span><br><span class="line">hint: See the <span class="string">&#x27;Note about fast-forwards&#x27;</span> <span class="keyword">in</span> <span class="string">&#x27;git push --help&#x27;</span> <span class="keyword">for</span> details.</span><br><span class="line">$ git pull origin develop <span class="comment"># 那就先拉取一下，这时如果和其它人对同一块内容做过改动，冲突是没有悬念的</span></span><br><span class="line">From ssh://host/home/git/repository/repo</span><br><span class="line"> * branch            develop    -&gt; FETCH_HEAD</span><br><span class="line">Auto-merging README.md</span><br><span class="line">CONFLICT (content): Merge conflict <span class="keyword">in</span> README.md</span><br><span class="line">Automatic merge failed; fix conflicts and <span class="keyword">then</span> commit the result.</span><br><span class="line">$ git push origin develop <span class="comment"># poiuy 只能吭哧吭哧解决完冲突，再推送到远程</span></span><br></pre></td></tr></table></figure><p>这时，开发者 <code>qwert</code> 又开发完一个新的功能，准备要发布</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br></pre></td><td class="code"><pre><span class="line">// 在开启新的功能分支之前，先从 develop 分支拉取最新的代码</span><br><span class="line">$ git pull origin develop</span><br><span class="line"></span><br><span class="line">// 开启新的功能分支</span><br><span class="line">$ git flow feature start feature-something</span><br><span class="line">$ vim README.md</span><br><span class="line">1. this is the second commit.</span><br><span class="line">2. poiuy</span><br><span class="line">3. qwert</span><br><span class="line">4. qwert feature start.</span><br><span class="line">5. poiuy feature start.</span><br><span class="line">6. qwert another feature start.</span><br><span class="line">$ git add README.md</span><br><span class="line">$ git commit -m <span class="string">&quot;Update README.md&quot;</span></span><br><span class="line"></span><br><span class="line">// 将开发完的新功能分支发布到远程仓库，这个分支可以发布到测试或者仿真环境进行测试</span><br><span class="line">$ git flow feature publish feature-something</span><br><span class="line">Counting objects: 5, <span class="keyword">done</span>.</span><br><span class="line">Compressing objects: 100% (2/2), <span class="keyword">done</span>.</span><br><span class="line">Writing objects: 100% (3/3), 303 bytes | 0 bytes/s, <span class="keyword">done</span>.</span><br><span class="line">Total 3 (delta 1), reused 0 (delta 0)</span><br><span class="line">To ssh://git@host/home/git/repository/repo.git</span><br><span class="line"> * [new branch]      feature/feature-something -&gt; feature/feature-something</span><br><span class="line">Branch feature/feature-something <span class="built_in">set</span> up to track remote branch feature/feature-something from origin.</span><br><span class="line">Already on <span class="string">&#x27;feature/feature-something&#x27;</span></span><br><span class="line"></span><br><span class="line">Summary of actions:</span><br><span class="line">- The remote branch <span class="string">&#x27;feature/feature-something&#x27;</span> was created or updated</span><br><span class="line">- The <span class="built_in">local</span> branch <span class="string">&#x27;feature/feature-something&#x27;</span> was configured to track the remote branch</span><br><span class="line">- You are now on branch <span class="string">&#x27;feature/feature-something&#x27;</span></span><br><span class="line"></span><br><span class="line">// 如果这个功能有多个人员参与，那么其它人可以拉取这个新功能分支进行相关的开发</span><br><span class="line">$ git flow feature pull origin feature-something</span><br><span class="line"></span><br><span class="line">// 也可以跟踪在 origin 上的新功能分支</span><br><span class="line">$ git flow feature track feature-something</span><br><span class="line"></span><br><span class="line">// 经过测试发现这个新功能分支没什么大的问题，开发者将完成的新功能合并到 develop 分支并删除新功能分支</span><br><span class="line">$ git flow feature finish feature-something</span><br><span class="line"></span><br><span class="line">// 开始从 develop 准备 release 版本</span><br><span class="line">$ git flow release start v1.0</span><br><span class="line"></span><br><span class="line">// 创建之后可以立即发布允许其它用户向这个 release 分支提交内容，将这个 release 发布出去，允许更新提交，确保新功能正常，万一新功能有隐患的 bug，可以就近修复</span><br><span class="line">$ git flow release publish v1.0</span><br><span class="line"></span><br><span class="line">// poiuy 可以通过 track 命令签出 release 版本的远程变更</span><br><span class="line">$ git flow release track v1.0</span><br><span class="line">$ vim README.md <span class="comment"># poiuy 跟踪 release v1.0 版本后，又进行了一些提交</span></span><br><span class="line">1. this is the second commit.</span><br><span class="line">2. poiuy</span><br><span class="line">3. qwert</span><br><span class="line">4. qwert feature start.</span><br><span class="line">5. poiuy feature start.</span><br><span class="line">6. qwert another feature start.</span><br><span class="line">7. poiuy tract release v1.0</span><br><span class="line"></span><br><span class="line">// 经过灰度的测试后，发布的 release 符合上线的要求，qwert 拉取 release v1.0 的更新，完成 release 版本。至此新功能才能算是上线了</span><br><span class="line">$ git flow release finish v1.0</span><br><span class="line">Branches <span class="string">&#x27;develop&#x27;</span> and <span class="string">&#x27;origin/develop&#x27;</span> have diverged.</span><br><span class="line">And <span class="built_in">local</span> branch <span class="string">&#x27;develop&#x27;</span> is ahead of <span class="string">&#x27;origin/develop&#x27;</span>.</span><br><span class="line">Switched to branch <span class="string">&#x27;master&#x27;</span></span><br><span class="line">Merge made by the <span class="string">&#x27;recursive&#x27;</span> strategy.</span><br><span class="line"> README.md | 4 ++++</span><br><span class="line"> 1 file changed, 4 insertions(+)</span><br><span class="line">Already on <span class="string">&#x27;master&#x27;</span></span><br><span class="line">Your branch is ahead of <span class="string">&#x27;origin/master&#x27;</span> by 6 commits.</span><br><span class="line">  (use <span class="string">&quot;git push&quot;</span> to publish your <span class="built_in">local</span> commits)</span><br><span class="line">Switched to branch <span class="string">&#x27;develop&#x27;</span></span><br><span class="line">Your branch is ahead of <span class="string">&#x27;origin/develop&#x27;</span> by 1 commit.</span><br><span class="line">  (use <span class="string">&quot;git push&quot;</span> to publish your <span class="built_in">local</span> commits)</span><br><span class="line">Merge made by the <span class="string">&#x27;recursive&#x27;</span> strategy.</span><br><span class="line"> README.md | 1 +</span><br><span class="line"> 1 file changed, 1 insertion(+)</span><br><span class="line">To ssh://git@host/home/git/repository/repo.git</span><br><span class="line"> - [deleted]         release/v1.0</span><br><span class="line">Deleted branch release/v1.0 (was 77da54a).</span><br><span class="line"></span><br><span class="line">Summary of actions:</span><br><span class="line">- Release branch <span class="string">&#x27;release/v1.0&#x27;</span> has been merged into <span class="string">&#x27;master&#x27;</span></span><br><span class="line">- The release was tagged <span class="string">&#x27;v1.0&#x27;</span></span><br><span class="line">- Release tag <span class="string">&#x27;v1.0&#x27;</span> has been back-merged into <span class="string">&#x27;develop&#x27;</span></span><br><span class="line">- Release branch <span class="string">&#x27;release/v1.0&#x27;</span> has been locally deleted; it has been remotely deleted from <span class="string">&#x27;origin&#x27;</span></span><br><span class="line">- You are now on branch <span class="string">&#x27;develop&#x27;</span></span><br><span class="line"></span><br><span class="line">// 将 tag 推送到远程仓库</span><br><span class="line">$ git push origin --tags</span><br><span class="line"></span><br><span class="line">// 没过多久，生产环境出现了一个致命的 bug 需要紧急修复，qwert 开启一个修复分支</span><br><span class="line">$ git flow hotfix start issue-1</span><br><span class="line">Branches <span class="string">&#x27;master&#x27;</span> and <span class="string">&#x27;origin/master&#x27;</span> have diverged.</span><br><span class="line">And <span class="built_in">local</span> branch <span class="string">&#x27;master&#x27;</span> is ahead of <span class="string">&#x27;origin/master&#x27;</span>.</span><br><span class="line">Switched to a new branch <span class="string">&#x27;hotfix/issue-1&#x27;</span></span><br><span class="line"></span><br><span class="line">Summary of actions:</span><br><span class="line">- A new branch <span class="string">&#x27;hotfix/issue-1&#x27;</span> was created, based on <span class="string">&#x27;master&#x27;</span></span><br><span class="line">- You are now on branch <span class="string">&#x27;hotfix/issue-1&#x27;</span></span><br><span class="line"></span><br><span class="line">Follow-up actions:</span><br><span class="line">- Start committing your hot fixes</span><br><span class="line">- Bump the version number now!</span><br><span class="line">- When <span class="keyword">done</span>, run:</span><br><span class="line"></span><br><span class="line">     git flow hotfix finish <span class="string">&#x27;issue-1&#x27;</span></span><br><span class="line"></span><br><span class="line">// qwert 开始修复 bug，完成后结束 hotfix 分支</span><br><span class="line">$ vim README.md</span><br><span class="line">1. this is the second commit.</span><br><span class="line">2. poiuy</span><br><span class="line">3. qwert</span><br><span class="line">4. qwert feature start.</span><br><span class="line">5. poiuy feature start.</span><br><span class="line">6. qwert another feature start.</span><br><span class="line">7. poiuy tract release v1.0</span><br><span class="line">8. qwert hotfix start.</span><br><span class="line">$ git add README.md</span><br><span class="line">$ git commit -m <span class="string">&quot;Update README.md&quot;</span></span><br><span class="line">$ git flow hotfix finish <span class="string">&#x27;issue-1&#x27;</span> <span class="comment"># 结束 hotfix 分支的 bug 修复</span></span><br><span class="line">Branches <span class="string">&#x27;master&#x27;</span> and <span class="string">&#x27;origin/master&#x27;</span> have diverged.</span><br><span class="line">And <span class="built_in">local</span> branch <span class="string">&#x27;master&#x27;</span> is ahead of <span class="string">&#x27;origin/master&#x27;</span>.</span><br><span class="line">Branches <span class="string">&#x27;develop&#x27;</span> and <span class="string">&#x27;origin/develop&#x27;</span> have diverged.</span><br><span class="line">And <span class="built_in">local</span> branch <span class="string">&#x27;develop&#x27;</span> is ahead of <span class="string">&#x27;origin/develop&#x27;</span>.</span><br><span class="line">Switched to branch <span class="string">&#x27;master&#x27;</span></span><br><span class="line">Your branch is ahead of <span class="string">&#x27;origin/master&#x27;</span> by 6 commits.</span><br><span class="line">  (use <span class="string">&quot;git push&quot;</span> to publish your <span class="built_in">local</span> commits)</span><br><span class="line">Merge made by the <span class="string">&#x27;recursive&#x27;</span> strategy.</span><br><span class="line"> README.md | 1 +</span><br><span class="line"> 1 file changed, 1 insertion(+)</span><br><span class="line">Switched to branch <span class="string">&#x27;develop&#x27;</span></span><br><span class="line">Your branch is ahead of <span class="string">&#x27;origin/develop&#x27;</span> by 3 commits.</span><br><span class="line">  (use <span class="string">&quot;git push&quot;</span> to publish your <span class="built_in">local</span> commits)</span><br><span class="line">Merge made by the <span class="string">&#x27;recursive&#x27;</span> strategy.</span><br><span class="line"> README.md | 1 +</span><br><span class="line"> 1 file changed, 1 insertion(+)</span><br><span class="line">Deleted branch hotfix/issue-1 (was e4ac4c3).</span><br><span class="line"></span><br><span class="line">Summary of actions:</span><br><span class="line">- Hotfix branch <span class="string">&#x27;hotfix/issue-1&#x27;</span> has been merged into <span class="string">&#x27;master&#x27;</span></span><br><span class="line">- The hotfix was tagged <span class="string">&#x27;issue-1&#x27;</span></span><br><span class="line">- Hotfix tag <span class="string">&#x27;issue-1&#x27;</span> has been back-merged into <span class="string">&#x27;develop&#x27;</span></span><br><span class="line">- Hotfix branch <span class="string">&#x27;hotfix/issue-1&#x27;</span> has been locally deleted</span><br><span class="line">- You are now on branch <span class="string">&#x27;develop&#x27;</span></span><br><span class="line"></span><br><span class="line">// 提交修复的代码到远程 develop 分支</span><br><span class="line">$ git push origin develop</span><br><span class="line"></span><br><span class="line">// 将修复后的 tag 提交到远程仓库，这样生产环境就可以拉取 issue-1 标签修复之前的 bug</span><br><span class="line">$ git push origin --tags</span><br></pre></td></tr></table></figure><p>以下的这副图就是对 <code>git flow</code> 重要命令的诠释：</p><p><img src="https://inotes.oss-cn-beijing.aliyuncs.com/git/201812/1008-gitflow-commands.png" alt="1008-gitflow-commands.png"></p><p>通过这些操作，我们看到 <code>Gitflow</code> 工作流自始至终一直维护 <code>master</code> 和 <code>develop</code> 分支，而 <code>feature</code> 和 <code>hotfix</code> 分支只是短暂的出现，待功能完成后合并到 <code>develop</code> 分支，修复完成后，同时合并到 <code>master</code> 和 <code>develop</code> 分支。同时我们也看到新功能提交从不直接与 <code>master</code> 分支交互，所有的功能分支都基于 <code>develop</code> 分支，当 <code>feature</code> 达到上线的要求后，才结束 <code>feature</code>，并将 <code>feature</code> 分支合并回 <code>master</code> 和 <code>develop</code> 分支，释放出一个版本供生产发布。这样明晰的功能分支提供了一个健壮的用于管理大型项目的框架。当然，要长期维护两个分支也比较麻烦，大多数管理工具都将 <code>master</code> 当作默认分支，可是开发是在 <code>develop</code> 分支进行的，这导致经常要切换分支，稍不注意就弄错分支，非常恼人，也说明了这种工作流程终究是不合适小团队的中小型项目。</p><p><code>Gitflow</code> 工作流的使用场景：</p><ul><li>认为额外学习 <code>Gitflow</code> 不是什么问题的</li><li>有专门的代码仓库管理员的</li><li>开发团队相对固定，而且有一定规模</li><li>常常有并行开发需求</li><li>团队对于 <code>Release</code>、<code>Bug</code>、<code>Feature</code> 这些概念有统一定义标准的</li></ul><h2 id="Forking-工作流"><a href="#Forking-工作流" class="headerlink" title="Forking 工作流"></a>Forking 工作流</h2><blockquote><p><a target="_blank" rel="noopener" href="https://github.com/oldratlee/translations/blob/master/git-workflows-and-tutorials/workflow-forking.md">Forking Workflow</a></p></blockquote><p><img src="https://inotes.oss-cn-beijing.aliyuncs.com/git/201812/1009-git-forking-workflow.png" alt="1009-git-forking-workflow.png"></p><p>为了演示 <code>Forking Workflow</code> 的工作流程，我准备了三个 <code>github</code> 账号，假设为维护者 <code>git</code>、开发者 <code>qwert</code> 和 <code>poiuy</code>。</p><h3 id="创建远程仓库"><a href="#创建远程仓库" class="headerlink" title="创建远程仓库"></a>创建远程仓库</h3><p>维护者 <code>git</code> 创建一个公开的远程仓库：</p><p><img src="https://inotes.oss-cn-beijing.aliyuncs.com/git/201812/1010-git-forking-create.jpg" alt="1010-git-forking-create.jpg"></p><p>开发者 <code>qwert</code> 去 <code>Fork</code> 维护者 <code>git</code> 创建的项目，当然，开发者 <code>poiuy</code> 也和 <code>qwert</code> 一样去 <code>Fork</code> 仓库：</p><p><img src="https://inotes.oss-cn-beijing.aliyuncs.com/git/201812/1011-git-forking-repo.jpg" alt="1011-git-forking-repo.jpg"></p><p>完成之后，<code>qwert</code> 和 <code>poiuy</code> 相当于把远程 <code>git</code> 创建的项目克隆到各自的远程仓库</p><h3 id="功能开发"><a href="#功能开发" class="headerlink" title="功能开发"></a>功能开发</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">// qwert 拉取远程仓库代码到本地</span><br><span class="line">$ git <span class="built_in">clone</span> https://github.com/qwert/repo.git</span><br><span class="line">$ git config user.name <span class="string">&quot;qwert&quot;</span></span><br><span class="line">$ git config user.email <span class="string">&quot;qwert@example.com&quot;</span></span><br><span class="line">$ vim README.md</span><br><span class="line"><span class="comment"># repo</span></span><br><span class="line">This is a forking workflow\<span class="string">&#x27;s demo.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">## Develop Feature</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">1. this is written by Quert.</span></span><br><span class="line"><span class="string">$ git add README.md</span></span><br><span class="line"><span class="string">$ git commit -m &quot;Update README.md&quot;</span></span><br><span class="line"><span class="string">$ git push -u origin master</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">// poiuy 拉取远程仓库代码到本地</span></span><br><span class="line"><span class="string">$ git clone https://github.com/poiuy/repo.git</span></span><br><span class="line"><span class="string">$ git config user.name &quot;poiuy&quot;</span></span><br><span class="line"><span class="string">$ git config user.email &quot;poiuy@example.com&quot;</span></span><br><span class="line"><span class="string">$ vim README.md</span></span><br><span class="line"><span class="string"># repo</span></span><br><span class="line"><span class="string">This is a forking workflow\&#x27;</span>s demo.</span><br><span class="line"></span><br><span class="line"><span class="comment">## Develop Feature</span></span><br><span class="line"></span><br><span class="line">1. this is written by Poiuy.</span><br><span class="line">$ git add README.md</span><br><span class="line">$ git commit -m <span class="string">&quot;Update README.md&quot;</span></span><br><span class="line">$ git push -u origin master</span><br></pre></td></tr></table></figure><h3 id="发起-Pull-Request"><a href="#发起-Pull-Request" class="headerlink" title="发起 Pull Request"></a>发起 Pull Request</h3><p><img src="https://inotes.oss-cn-beijing.aliyuncs.com/git/201812/1012-git-forking-pr-create.jpg" alt="1012-git-forking-pr-create.jpg"></p><p><img src="https://inotes.oss-cn-beijing.aliyuncs.com/git/201812/1013-git-forking-pr-open.jpg" alt="1013-git-forking-pr-open.jpg"></p><p><img src="https://inotes.oss-cn-beijing.aliyuncs.com/git/201812/1014-git-forking-pr-show.jpg" alt="1014-git-forking-pr-show.jpg"></p><p>可以看到开发者 <code>qwert</code> 没有权限合并代码，此时只有维护者 <code>git</code> 才能合并代码，维护者 <code>git</code> 去合并代码：</p><p><img src="https://inotes.oss-cn-beijing.aliyuncs.com/git/201812/1015-git-forking-merged.jpg" alt="1015-git-forking-merged.jpg"></p><p>开发者 <code>poiuy</code> 也采取和 <code>qwert</code> 一样的流程，但是当他申请合并时，出现了冲突，这是预科中的事，因为两人同时对一个文件相同的区域进行了编辑：</p><p><img src="https://inotes.oss-cn-beijing.aliyuncs.com/git/201812/1016-git-forking-conflicts.jpg" alt="1016-git-forking-conflicts.jpg"></p><p><code>poiuy</code> 去解决冲突：</p><p><img src="https://inotes.oss-cn-beijing.aliyuncs.com/git/201812/1017-git-forking-resolved-conflicts.jpg" alt="1017-git-forking-resolved-conflicts.jpg"></p><p><img src="https://inotes.oss-cn-beijing.aliyuncs.com/git/201812/1018-git-forking-mark-resolved.jpg" alt="1018-git-forking-mark-resolved.jpg"></p><p><img src="https://inotes.oss-cn-beijing.aliyuncs.com/git/201812/1019-git-forking-resolved-conflicts-merged.jpg" alt="1019-git-forking-resolved-conflicts-merged.jpg"></p><p>可以看到开发者 <code>poiuy</code> 也没有权限合并代码，此时也只有维护者 <code>git</code> 才能合并代码：</p><p><img src="https://inotes.oss-cn-beijing.aliyuncs.com/git/201812/1020-forking-feature-merged.jpg" alt="1020-git-forking-feature-merged.jpg"></p><p><img src="https://inotes.oss-cn-beijing.aliyuncs.com/git/201812/1021-forking-close-merged.jpg" alt="1021-forking-close-merged.jpg"></p><p><img src="https://inotes.oss-cn-beijing.aliyuncs.com/git/201812/1022-forking-feature.jpg" alt="1022-forking-feature.jpg"></p><p>至此，<code>qwert</code> 和 <code>poiuy</code> 开发的新功能都合并到远程维护者的 <code>master</code> 分支，这一阶段的开发告一段落。</p><p><code>Forking</code> 工作流的使用场景：</p><ul><li>常用于开源软件</li><li>开发者有需要衍生出自己的衍生版的</li><li>开发者不固定，可能是任意一个远程工作者</li></ul><h2 id="Feature-branching-工作流"><a href="#Feature-branching-工作流" class="headerlink" title="Feature branching 工作流"></a>Feature branching 工作流</h2><blockquote><p><a target="_blank" rel="noopener" href="https://github.com/oldratlee/translations/blob/master/git-workflows-and-tutorials/workflow-feature-branch.md">Feature Branching Workflow</a></p></blockquote><p><img src="https://inotes.oss-cn-beijing.aliyuncs.com/git/201812/1023-feature-branch-workflow.png" alt="1023-feature-branch-workflow.png"></p><p>这个流程大概算是 <code>Gitflow</code> 的简化版，不再需要安装额外 <code>Git</code> 插件，这个流程配合一些代码托管平台可以玩的风生水起。</p><h3 id="特性分支下拉取远程仓库"><a href="#特性分支下拉取远程仓库" class="headerlink" title="特性分支下拉取远程仓库"></a>特性分支下拉取远程仓库</h3><p>功能分支工作流中我们仍然使用之前创建的中央仓库，并且 <code>master</code> 分支还是代表了正式项目的历史。这种工作流不是直接提交本地历史到各自的本地 <code>master</code> 分支，开发者每次在开始新功能前先基于 <code>master</code> 创建一个新分支，给分支起一个描述性的名称，这样分支用途就比较明显。</p><p>准备工作还是老套路</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">// qwert 工作准备</span><br><span class="line">$ ssh qwert@host &amp;&amp; <span class="built_in">cd</span> ~ &amp;&amp; git <span class="built_in">clone</span> ssh://git@host/home/git/repository/repo.git</span><br><span class="line">$ git config user.name <span class="string">&quot;qwert&quot;</span></span><br><span class="line">$ git config user.email <span class="string">&quot;qwert@example.com&quot;</span></span><br><span class="line"></span><br><span class="line">// poiuy 工作准备</span><br><span class="line">$ ssh poiuy@host &amp;&amp; <span class="built_in">cd</span> ~ &amp;&amp; git <span class="built_in">clone</span> ssh://git@host/home/git/repository/repo.git</span><br><span class="line">$ git config user.name <span class="string">&quot;poiuy&quot;</span></span><br><span class="line">$ git config user.email <span class="string">&quot;poiuy@example.com&quot;</span></span><br></pre></td></tr></table></figure><h3 id="功性分支下开发阶段"><a href="#功性分支下开发阶段" class="headerlink" title="功性分支下开发阶段"></a>功性分支下开发阶段</h3><p>开发者 <code>qwert</code>：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">// 创建功能分支</span><br><span class="line">$ git checkout -b dev-user-menu</span><br><span class="line">$ vim README.md</span><br><span class="line">1. this is the second commit.</span><br><span class="line">2. poiuy</span><br><span class="line">3. qwert</span><br><span class="line">4. qwert feature start.</span><br><span class="line">5. poiuy feature start.</span><br><span class="line">6. qwert another feature start.</span><br><span class="line">7. poiuy tract release v1.0</span><br><span class="line">8. qwert hotfix start.</span><br><span class="line">9. qwert develop user menu.</span><br><span class="line">$ git add README.md</span><br><span class="line">$ git commit -m <span class="string">&quot;Develop user menu.&quot;</span></span><br><span class="line">$ git push -u origin master</span><br></pre></td></tr></table></figure><p>开发者 <code>poiuy</code>：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">// 创建功能分支</span><br><span class="line">$ git checkout -b dev-user-auth</span><br><span class="line">$ vim README.md</span><br><span class="line">1. this is the second commit.</span><br><span class="line">2. poiuy</span><br><span class="line">3. qwert</span><br><span class="line">4. qwert feature start.</span><br><span class="line">5. poiuy feature start.</span><br><span class="line">6. qwert another feature start.</span><br><span class="line">7. poiuy tract release v1.0</span><br><span class="line">8. qwert hotfix start.</span><br><span class="line">9. poiuy develop user auth.</span><br><span class="line">$ git add README.md</span><br><span class="line">$ git commit -m <span class="string">&quot;Develop user auth&quot;</span></span><br><span class="line">$ git push -u origin dev-user-auth</span><br></pre></td></tr></table></figure><p>一段时间以后，<code>qwert</code> 和 <code>poiuy</code> 都声称把各个负责的功能开发完成，并提交到远程仓库了</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><span class="line">// 发布开发者 qwert 的功能到测试环境测试，测试通过后合并到 master 分支</span><br><span class="line">$ git checkout master</span><br><span class="line">$ git pull <span class="comment"># 拉取其它开发者的更新</span></span><br><span class="line">remote: Counting objects: 5, <span class="keyword">done</span>.</span><br><span class="line">remote: Compressing objects: 100% (2/2), <span class="keyword">done</span>.</span><br><span class="line">remote: Total 3 (delta 1), reused 0 (delta 0)</span><br><span class="line">Unpacking objects: 100% (3/3), <span class="keyword">done</span>.</span><br><span class="line">From ssh://host/home/git/repository/repo</span><br><span class="line"> * [new branch]      dev-user-auth -&gt; origin/dev-user-auth</span><br><span class="line">Already up-to-date.</span><br><span class="line">$ git checkout dev-user-menu</span><br><span class="line">$ git rebase master <span class="comment"># 用 rebase 合并主干的修改，如果有冲突在此时解决</span></span><br><span class="line">$ git checkout master</span><br><span class="line"></span><br><span class="line">// 将 qwert 新开发的功能合并到 master 分支</span><br><span class="line">$ git merge dev-user-menu</span><br><span class="line">Updating 40e19f1..4f92cff</span><br><span class="line">Fast-forward</span><br><span class="line"> README.md | 1 +</span><br><span class="line"> 1 file changed, 1 insertion(+)</span><br><span class="line">$ git push origin master <span class="comment"># 将合并后的提交到远程 master 分支</span></span><br><span class="line"></span><br><span class="line">// 开发者 poiuy 的也通过测试，需要将代码合并到 master 分支</span><br><span class="line">$ git checkout master</span><br><span class="line">Switched to branch <span class="string">&#x27;master&#x27;</span></span><br><span class="line">Your branch is behind <span class="string">&#x27;origin/master&#x27;</span> by 1 commit, and can be fast-forwarded.</span><br><span class="line">  (use <span class="string">&quot;git pull&quot;</span> to update your <span class="built_in">local</span> branch)</span><br><span class="line">$ git pull</span><br><span class="line">From ssh://host/home/git/repository/repo</span><br><span class="line">   40e19f1..4f92cff  master     -&gt; origin/master</span><br><span class="line">Updating 40e19f1..4f92cff</span><br><span class="line">Fast-forward</span><br><span class="line"> README.md | 1 +</span><br><span class="line"> 1 file changed, 1 insertion(+)</span><br><span class="line"></span><br><span class="line">// 切换到功能分支，用 rebase 合并主干的修改，之前由于 qwert 和 poiuy 编辑同一个区域，无疑会产生冲突</span><br><span class="line">$ git checkout dev-user-auth</span><br><span class="line">$ git rebase master <span class="comment"># 用 rebase 合并主干的修改，如果有冲突在此时解决</span></span><br><span class="line">First, rewinding head to replay your work on top of it...</span><br><span class="line">Applying: Develop user auth</span><br><span class="line">Using index info to reconstruct a base tree...</span><br><span class="line">M  README.md</span><br><span class="line">Falling back to patching base and 3-way merge...</span><br><span class="line">Auto-merging README.md</span><br><span class="line">CONFLICT (content): Merge conflict <span class="keyword">in</span> README.md</span><br><span class="line">Failed to merge <span class="keyword">in</span> the changes.</span><br><span class="line">Patch failed at 0001 Develop user auth</span><br><span class="line">The copy of the patch that failed is found <span class="keyword">in</span>:</span><br><span class="line">   /home/poiuy/repo/.git/rebase-apply/patch</span><br><span class="line"></span><br><span class="line">When you have resolved this problem, run <span class="string">&quot;git rebase --continue&quot;</span>.</span><br><span class="line">If you prefer to skip this patch, run <span class="string">&quot;git rebase --skip&quot;</span> instead.</span><br><span class="line">To check out the original branch and stop rebasing, run <span class="string">&quot;git rebase --abort&quot;</span>.</span><br><span class="line">$ git rebase --<span class="built_in">continue</span> <span class="comment"># 动用 rebase --continue 命令逐个修复冲突文件，直到 No rebase in progress? 为止</span></span><br><span class="line">$ git add README.md</span><br><span class="line">$ git commit -m <span class="string">&quot;Conflict resolution&quot;</span></span><br><span class="line">$ git push origin dev-user-auth</span><br><span class="line">Counting objects: 10, <span class="keyword">done</span>.</span><br><span class="line">Compressing objects: 100% (4/4), <span class="keyword">done</span>.</span><br><span class="line">Writing objects: 100% (6/6), 679 bytes | 0 bytes/s, <span class="keyword">done</span>.</span><br><span class="line">Total 6 (delta 1), reused 0 (delta 0)</span><br><span class="line">To ssh://git@host/home/git/repository/repo.git</span><br><span class="line">   ccbab61..f0aea38  dev-user-auth -&gt; dev-user-auth</span><br><span class="line"></span><br><span class="line">// 开发者 poiuy 切换到 master 分支，将冲突后的修复合并回 master</span><br><span class="line">$ git checkou master</span><br><span class="line">$ git merge dev-user-auth</span><br><span class="line">Updating 4f92cff..f0aea38</span><br><span class="line">Fast-forward</span><br><span class="line"> README.md | 5 +++++</span><br><span class="line"> 1 file changed, 5 insertions(+)</span><br><span class="line">$ git push origin master</span><br><span class="line"></span><br><span class="line">// 此时 qwert 再切换到 master 进行拉取，至此两个开发者的各个功能都合并到 master 分支了，可以发布 release 了</span><br><span class="line">$ git checkou master</span><br><span class="line">$ git pull</span><br><span class="line">remote: Counting objects: 10, <span class="keyword">done</span>.</span><br><span class="line">remote: Compressing objects: 100% (4/4), <span class="keyword">done</span>.</span><br><span class="line">remote: Total 6 (delta 1), reused 0 (delta 0)</span><br><span class="line">Unpacking objects: 100% (6/6), <span class="keyword">done</span>.</span><br><span class="line">From ssh://localhost/home/git/repository/repo</span><br><span class="line">   4f92cff..f0aea38  master     -&gt; origin/master</span><br><span class="line">   ccbab61..f0aea38  dev-user-auth -&gt; origin/dev-user-auth</span><br><span class="line">Updating 4f92cff..f0aea38</span><br><span class="line">Fast-forward</span><br><span class="line"> README.md | 5 +++++</span><br><span class="line"> 1 file changed, 5 insertions(+)</span><br></pre></td></tr></table></figure><p>显而易见，这个分支只需要维护 <code>master</code> 分支就可以了，也就是说，在合并到 <code>master</code> 分支之前，需要确保对功能进行充分的测试，因为 <code>master</code> 分支是可以随时 <code>release</code> 的，而发布和相关的补丁都基于 <code>master</code> 分支，所以在分支达到生产要求后，就要立即合并到 <code>master</code> 分支，删除功能分支，再基于 <code>master</code> 分支创建新的分支进行新一轮的开发。当然，这个流程有个弊端就是，当我们 <code>Code Review</code> 之后，准备在 <code>master</code> 释放 <code>release</code> 时，又有人向 <code>master</code> 分支提交了新的完成功能，或者有些公司指定日期时间发布，等到指定的那个时间，<code>master</code> 分支已经有了新的合并而打乱最初的发布意图。因为这个时候，我们的本意是把上一个功能完全发布后再进行下一个版本的发布。为了应付这种情况，就需要在 <code>master</code> 分支以外，新建一个 <code>production</code> 分支来跟踪线上版本，也就是说，在 <code>git</code> 这儿没有什么是一个分支搞不定的，如果有，哪就再创建一个分支。</p><p>功能分支工作流的使用场景：</p><ul><li>开发团队相对固定，而且有一定规模</li><li>常常有多个功能，多个问题并行开发</li><li>对代码审查有较高要求</li><li>更注重团队效率</li></ul><h3 id="通过-Pull-Requests-讨论"><a href="#通过-Pull-Requests-讨论" class="headerlink" title="通过 Pull Requests 讨论"></a>通过 Pull Requests 讨论</h3><blockquote><p>一旦某个开发者完成一个功能，不是立即合并到 <code>master</code>，而是 <code>push</code> 到远程仓库的功能分支上并发起一个 <code>Pull Request</code> 请求去合并修改到 <code>master</code>。在修改成为主干代码前，这让其它的开发者有机会先去 <code>Review</code> 变更。</p></blockquote><p><code>Pull Request</code> 可以和 <code>feature</code> 分支工作流、<code>Gitflow</code> 工作流或者 <code>Forking</code> 工作流一起使用。但 <code>Pull Request</code> 需要两个不同的分支或是两个不同的仓库，因此它们不能和中心化的工作流一起使用。在不同的工作流中使用 <code>Pull Request</code> 有些不同，但大致的流程如下：</p><ul><li>开发者在他们的本地仓库中为某个功能创建一个专门的分支</li><li>开发者将分支推送到公共的 <code>GitHub</code> 仓库</li><li>开发者用 <code>GitHub</code> 发起一个 <code>Pull Request</code></li><li>其余的团队成员审查代码，讨论并且做出修改</li><li>项目维护者将这个功能并入官方的仓库，然后关闭这个 <code>Pull Request</code></li></ul><p>为了演示这个功能，我注册了两个 <code>GitHub</code> 来说明这个情况，假设 <code>qwert</code> 和 <code>poiuy</code> 是两个 <code>GitHub</code> 用户，并且已经注册</p><ul><li>创建项目</li></ul><p><code>qwert</code> 创建一个项目</p><p><img src="https://inotes.oss-cn-beijing.aliyuncs.com/git/201812/1024-fb-pr-pro-create.jpg" alt="1024-fb-pr-pro-create.jpg"></p><p>随后 <code>qwert</code> 邀请 <code>poiuy</code> 加入</p><p><img src="https://inotes.oss-cn-beijing.aliyuncs.com/git/201812/1025-fb-pr-collaborator.jpg" alt="1025-fb-pr-collaborator.jpg"></p><p><code>poiuy</code> 接受邀请</p><p><img src="https://inotes.oss-cn-beijing.aliyuncs.com/git/201812/1026-fb-pr-invitation.jpg" alt="1026-fb-pr-invitation.jpg"></p><ul><li>拉取项目</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">// qwert 拉取项目</span><br><span class="line">$ git <span class="built_in">clone</span> https://github.com/imajinyun/test.git</span><br><span class="line"></span><br><span class="line">// qwert 设置用户名邮箱</span><br><span class="line">$ <span class="built_in">cd</span> <span class="built_in">test</span></span><br><span class="line">$ git config user.name <span class="string">&quot;qwert&quot;</span></span><br><span class="line">$ git config user.email <span class="string">&quot;qwert@example.com&quot;</span></span><br><span class="line"></span><br><span class="line">// qwert 初始化项目</span><br><span class="line">$ <span class="built_in">echo</span> <span class="string">&quot;1. initialize project.&quot;</span> &gt;&gt; README.md</span><br><span class="line">$ git add README.md</span><br><span class="line">$ git commit -m <span class="string">&quot;Add README.md&quot;</span></span><br><span class="line">$ git push -u origin master</span><br><span class="line"></span><br><span class="line">// poiuy 拉取项目</span><br><span class="line">$ git <span class="built_in">clone</span> https://github.com/imajinyun/test.git</span><br><span class="line"></span><br><span class="line">// poiuy 设置用户名邮箱</span><br><span class="line">$ <span class="built_in">cd</span> <span class="built_in">test</span></span><br><span class="line">$ git config user.name <span class="string">&quot;poiuy&quot;</span></span><br><span class="line">$ git config user.email <span class="string">&quot;poiuy@example.com&quot;</span></span><br></pre></td></tr></table></figure><ul><li>功能开发</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">// qwert 开发某个功能</span><br><span class="line">$ git pull</span><br><span class="line">$ git checkou -b dev-user-menu</span><br><span class="line">$ vim README.md</span><br><span class="line">1. initialize project.</span><br><span class="line">2. qwert develop user menu.</span><br><span class="line">$ git commit -m <span class="string">&quot;Develop user menu.&quot;</span></span><br><span class="line">$ git push -u origin dev-user-menu</span><br><span class="line"></span><br><span class="line">// poiuy 开发某个功能</span><br><span class="line">$ git pull</span><br><span class="line">$ git checkou -b dev-user-auth</span><br><span class="line">$ vim README.md</span><br><span class="line">1. initialize project.</span><br><span class="line">2. poiuy develop user auth.</span><br><span class="line">$ git commit -m <span class="string">&quot;Develop user auth.&quot;</span></span><br><span class="line">$ git push -u origin dev-user-auth</span><br></pre></td></tr></table></figure><ul><li>各自发起 <code>Pull Request</code></li></ul><p><img src="https://inotes.oss-cn-beijing.aliyuncs.com/git/201812/1027-fb-pr-new.jpg" alt="1027-fb-pr-new.jpg"></p><p><img src="https://inotes.oss-cn-beijing.aliyuncs.com/git/201812/1028-fb-pr-finish.jpg" alt="1028-fb-pr-finish.jpg"></p><p><img src="https://inotes.oss-cn-beijing.aliyuncs.com/git/201812/1029-fb-pr-open.jpg" alt="1029-fb-pr-open.jpg"></p><ul><li><code>qwert</code> 对发起的 <code>Pull Request</code> 进行合并</li></ul><p><img src="https://inotes.oss-cn-beijing.aliyuncs.com/git/201812/1030-fb-pr-merged-by-qwert.jpg" alt="1030-fb-pr-merged-by-qwert.jpg"></p><ul><li><code>poiuy</code> 对发起的 <code>Pull Request</code> 进行合并</li></ul><p><img src="https://inotes.oss-cn-beijing.aliyuncs.com/git/201812/1031-fb-pr-resolved-by-poiuy.jpg" alt="1031-fb-pr-resolved-by-poiuy.jpg"></p><p>这时我们发现冲突了，需要先解决冲突再合并：</p><p><img src="https://inotes.oss-cn-beijing.aliyuncs.com/git/201812/1032-fb-pr-mark-resolved.jpg" alt="1032-fb-pr-mark-resolved.jpg"></p><p><code>poiuy</code> 解决完冲突进行合并：</p><p><img src="https://inotes.oss-cn-beijing.aliyuncs.com/git/201812/1033-fb-pr-resolved-conflicts.jpg" alt="1033-fb-pr-resolved-conflicts.jpg"></p><p><img src="https://inotes.oss-cn-beijing.aliyuncs.com/git/201812/1034-fb-pr-resolved-conflicts-merged.jpg" alt="1034-fb-pr-resolved-conflicts-merged.jpg"></p><p>终于两个功能都合并到 <code>master</code> 分支了。</p><p><img src="https://inotes.oss-cn-beijing.aliyuncs.com/git/201812/1035-fb-pr-master.jpg" alt="1035-fb-pr-master.jpg"></p><p>至此 <code>Pull Request</code> 算是完结了，至于其它两个工作流程上都差不多，就不再赘述了。</p><p>用一篇文章说清楚 <code>Git Workflow</code> 是不太现实的，我吭哧吭哧的写了一堆，仅代表我对 <code>Git Workflow</code> 的理解和使用方法。如果你有更好的方式，咱们留言区见。</p></div><div class="reward-container"><div>本笔记是笔者在学习和工作中的一些整理，如对您有用，请鼓励我继续写作</div><button onclick='var qr=document.getElementById("qr");qr.style.display="none"===qr.style.display?"block":"none"'>赞赏</button><div id="qr" style="display:none"><div style="display:inline-block"><img src="https://inotes.oss-cn-beijing.aliyuncs.com/common/201902/wechatpay.png" alt="笔者偶像 微信支付"><p>微信支付</p></div></div></div><footer class="post-footer"><div class="post-tags"><a href="/tags/git/" rel="tag"># git</a></div><div class="post-widgets"><div class="wp_rating"><div id="wpac-rating"></div></div></div><div class="post-nav"><div class="post-nav-item"><a href="/2018/04/27/php-shallow-and-deep-clone/" rel="prev" title="PHP 中的浅克隆和深克隆"><i class="fa fa-chevron-left"></i> PHP 中的浅克隆和深克隆</a></div><div class="post-nav-item"><a href="/2018/05/02/php-range-overlap/" rel="next" title="PHP 范围中的重叠关系">PHP 范围中的重叠关系 <i class="fa fa-chevron-right"></i></a></div></div></footer></article></div><script>window.addEventListener("tabs:register",()=>{let{activeClass:t}=CONFIG.comments;if(CONFIG.comments.storage&&(t=localStorage.getItem("comments_active")||t),t){let e=document.querySelector(`a[href="#comment-${t}"]`);e&&e.click()}}),CONFIG.comments.storage&&window.addEventListener("tabs:click",t=>{if(!t.target.matches(".tabs-comment .tab-content .tab-pane"))return;let e=t.target.classList[1];localStorage.setItem("comments_active",e)})</script></div><div class="toggle sidebar-toggle"><span class="toggle-line toggle-line-first"></span> <span class="toggle-line toggle-line-middle"></span> <span class="toggle-line toggle-line-last"></span></div><aside class="sidebar"><div class="sidebar-inner"><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc">📚 文章目录</li><li class="sidebar-nav-overview">🌈 站点概览</li></ul><div class="post-toc-wrap sidebar-panel"><div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Git-Workflow"><span class="nav-number">1.</span> <span class="nav-text">Git Workflow</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%B8%B8%E8%A7%81%E7%9A%84%E5%B7%A5%E4%BD%9C%E6%B5%81"><span class="nav-number">2.</span> <span class="nav-text">常见的工作流</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%9B%86%E4%B8%AD%E5%BC%8F%E5%B7%A5%E4%BD%9C%E6%B5%81"><span class="nav-number">2.1.</span> <span class="nav-text">集中式工作流</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA%E4%B8%AD%E5%A4%AE%E4%BB%93%E5%BA%93"><span class="nav-number">2.1.1.</span> <span class="nav-text">创建中央仓库</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%BC%80%E5%8F%91%E4%BA%BA%E5%91%98%E4%BB%8B%E5%85%A5"><span class="nav-number">2.1.2.</span> <span class="nav-text">开发人员介入</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%AC%AC%E4%B8%80%E9%98%B6%E6%AE%B5%EF%BC%9A%E6%9C%AC%E5%9C%B0%E8%87%AA%E5%97%A8"><span class="nav-number">2.1.2.1.</span> <span class="nav-text">第一阶段：本地自嗨</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%AC%AC%E4%BA%8C%E9%98%B6%E6%AE%B5%EF%BC%9A%E8%BF%9C%E7%A8%8B%E6%B7%B7%E6%88%98"><span class="nav-number">2.1.2.2.</span> <span class="nav-text">第二阶段：远程混战</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Gitflow-%E5%B7%A5%E4%BD%9C%E6%B5%81"><span class="nav-number">2.2.</span> <span class="nav-text">Gitflow 工作流</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%8B%89%E5%8F%96%E8%BF%9C%E7%A8%8B%E4%BB%93%E5%BA%93"><span class="nav-number">2.2.1.</span> <span class="nav-text">拉取远程仓库</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Gitflow-%E5%B7%A5%E5%85%B7%E5%AE%89%E8%A3%85"><span class="nav-number">2.2.2.</span> <span class="nav-text">Gitflow 工具安装</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Gitflow-%E5%88%9D%E5%A7%8B%E5%8C%96"><span class="nav-number">2.2.3.</span> <span class="nav-text">Gitflow 初始化</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%BC%80%E5%8F%91%E9%98%B6%E6%AE%B5"><span class="nav-number">2.2.4.</span> <span class="nav-text">开发阶段</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Forking-%E5%B7%A5%E4%BD%9C%E6%B5%81"><span class="nav-number">2.3.</span> <span class="nav-text">Forking 工作流</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA%E8%BF%9C%E7%A8%8B%E4%BB%93%E5%BA%93"><span class="nav-number">2.3.1.</span> <span class="nav-text">创建远程仓库</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8A%9F%E8%83%BD%E5%BC%80%E5%8F%91"><span class="nav-number">2.3.2.</span> <span class="nav-text">功能开发</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8F%91%E8%B5%B7-Pull-Request"><span class="nav-number">2.3.3.</span> <span class="nav-text">发起 Pull Request</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Feature-branching-%E5%B7%A5%E4%BD%9C%E6%B5%81"><span class="nav-number">2.4.</span> <span class="nav-text">Feature branching 工作流</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%89%B9%E6%80%A7%E5%88%86%E6%94%AF%E4%B8%8B%E6%8B%89%E5%8F%96%E8%BF%9C%E7%A8%8B%E4%BB%93%E5%BA%93"><span class="nav-number">2.4.1.</span> <span class="nav-text">特性分支下拉取远程仓库</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8A%9F%E6%80%A7%E5%88%86%E6%94%AF%E4%B8%8B%E5%BC%80%E5%8F%91%E9%98%B6%E6%AE%B5"><span class="nav-number">2.4.2.</span> <span class="nav-text">功性分支下开发阶段</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%80%9A%E8%BF%87-Pull-Requests-%E8%AE%A8%E8%AE%BA"><span class="nav-number">2.4.3.</span> <span class="nav-text">通过 Pull Requests 讨论</span></a></li></ol></li></ol></li></ol></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="site-author-image" itemprop="image" alt="笔者偶像" src="https://inotes.oss-cn-beijing.aliyuncs.com/common/201812/avatar.jpg"><p class="site-author-name" itemprop="name">笔者偶像</p><div class="site-description" itemprop="description">进一寸自有一寸的欢喜 🎉</div></div><div class="site-state-wrap motion-element"><nav class="site-state"><div class="site-state-item site-state-posts"><a href="/archives/"><span class="site-state-item-count">101</span> <span class="site-state-item-name">📑 日志</span></a></div><div class="site-state-item site-state-categories"><a href="/categories/"><span class="site-state-item-count">16</span> <span class="site-state-item-name">🗳 分类</span></a></div><div class="site-state-item site-state-tags"><a href="/tags/"><span class="site-state-item-count">26</span> <span class="site-state-item-name">🔖 标签</span></a></div></nav></div><div class="links-of-author motion-element"><span class="links-of-author-item"><a href="https://github.com/imajinyun" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;imajinyun" rel="noopener" target="_blank"><i class="github fa-fw"></i>GitHub</a> </span><span class="links-of-author-item"><a href="mailto:imajinyun@gmail.com" title="E-Mail → mailto:imajinyun@gmail.com" rel="noopener" target="_blank"><i class="envelope fa-fw"></i>E-Mail</a></span></div></div></div></aside><div id="sidebar-dimmer"></div></div></main><footer class="footer"><div class="footer-inner"><div class="copyright">&copy; 2018 – <span itemprop="copyrightYear">2021</span> <span class="with-love"><i class="fa fa-heart"></i> </span><span class="author" itemprop="copyrightHolder">Jinyun's Notes</span></div><div class="powered-by">🙏 由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://pisces.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a> 强力驱动</div></div></footer></div><script src="/lib/anime.min.js"></script><script src="/lib/velocity/velocity.min.js"></script><script src="/lib/velocity/velocity.ui.min.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/pisces.js"></script><script src="/js/next-boot.js"></script><script>CONFIG.page.isPost&&(wpac_init=window.wpac_init||[],wpac_init.push({widget:"Rating",id:9009,el:"wpac-rating",color:"fc6423"}),function(){if(!("WIDGETPACK_LOADED"in window)){WIDGETPACK_LOADED=!0;var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="//embed.widgetpack.com/widget.js";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t.nextSibling)}}())</script><script src="//cdn.jsdelivr.net/npm/algoliasearch@4/dist/algoliasearch-lite.umd.js"></script><script src="//cdn.jsdelivr.net/npm/instantsearch.js@4/dist/instantsearch.production.min.js"></script><script src="/js/algolia-search.js"></script></body></html>